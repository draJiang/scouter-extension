/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/bent/src/browser.js":
/*!******************************************!*\
  !*** ./node_modules/bent/src/browser.js ***!
  \******************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";

/* global fetch, btoa, Headers */
const core = __webpack_require__(/*! ./core */ "./node_modules/bent/src/core.js")

class StatusError extends Error {
  constructor (res, ...params) {
    super(...params)

    if (Error.captureStackTrace) {
      Error.captureStackTrace(this, StatusError)
    }

    this.name = 'StatusError'
    this.message = res.statusMessage
    this.statusCode = res.status
    this.res = res
    this.json = res.json.bind(res)
    this.text = res.text.bind(res)
    this.arrayBuffer = res.arrayBuffer.bind(res)
    let buffer
    const get = () => {
      if (!buffer) buffer = this.arrayBuffer()
      return buffer
    }
    Object.defineProperty(this, 'responseBody', { get })
    // match Node.js headers object
    this.headers = {}
    for (const [key, value] of res.headers.entries()) {
      this.headers[key.toLowerCase()] = value
    }
  }
}

const mkrequest = (statusCodes, method, encoding, headers, baseurl) => async (_url, body, _headers = {}) => {
  _url = baseurl + (_url || '')
  let parsed = new URL(_url)

  if (!headers) headers = {}
  if (parsed.username) {
    headers.Authorization = 'Basic ' + btoa(parsed.username + ':' + parsed.password)
    parsed = new URL(parsed.protocol + '//' + parsed.host + parsed.pathname + parsed.search)
  }
  if (parsed.protocol !== 'https:' && parsed.protocol !== 'http:') {
    throw new Error(`Unknown protocol, ${parsed.protocol}`)
  }

  if (body) {
    if (body instanceof ArrayBuffer ||
      ArrayBuffer.isView(body) ||
      typeof body === 'string'
    ) {
      // noop
    } else if (typeof body === 'object') {
      body = JSON.stringify(body)
      headers['Content-Type'] = 'application/json'
    } else {
      throw new Error('Unknown body type.')
    }
  }

  _headers = new Headers({ ...(headers || {}), ..._headers })

  const resp = await fetch(parsed, { method, headers: _headers, body })
  resp.statusCode = resp.status

  if (!statusCodes.has(resp.status)) {
    throw new StatusError(resp)
  }

  if (encoding === 'json') return resp.json()
  else if (encoding === 'buffer') return resp.arrayBuffer()
  else if (encoding === 'string') return resp.text()
  else return resp
}

module.exports = core(mkrequest)


/***/ }),

/***/ "./node_modules/bent/src/core.js":
/*!***************************************!*\
  !*** ./node_modules/bent/src/core.js ***!
  \***************************************/
/***/ ((module) => {

"use strict";

const encodings = new Set(['json', 'buffer', 'string'])

module.exports = mkrequest => (...args) => {
  const statusCodes = new Set()
  let method
  let encoding
  let headers
  let baseurl = ''

  args.forEach(arg => {
    if (typeof arg === 'string') {
      if (arg.toUpperCase() === arg) {
        if (method) {
          const msg = `Can't set method to ${arg}, already set to ${method}.`
          throw new Error(msg)
        } else {
          method = arg
        }
      } else if (arg.startsWith('http:') || arg.startsWith('https:')) {
        baseurl = arg
      } else {
        if (encodings.has(arg)) {
          encoding = arg
        } else {
          throw new Error(`Unknown encoding, ${arg}`)
        }
      }
    } else if (typeof arg === 'number') {
      statusCodes.add(arg)
    } else if (typeof arg === 'object') {
      if (Array.isArray(arg) || arg instanceof Set) {
        arg.forEach(code => statusCodes.add(code))
      } else {
        if (headers) {
          throw new Error('Cannot set headers twice.')
        }
        headers = arg
      }
    } else {
      throw new Error(`Unknown type: ${typeof arg}`)
    }
  })

  if (!method) method = 'GET'
  if (statusCodes.size === 0) {
    statusCodes.add(200)
  }

  return mkrequest(statusCodes, method, encoding, headers, baseurl)
}


/***/ }),

/***/ "./node_modules/content-type/index.js":
/*!********************************************!*\
  !*** ./node_modules/content-type/index.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */



/**
 * RegExp to match *( ";" parameter ) in RFC 7231 sec 3.1.1.1
 *
 * parameter     = token "=" ( token / quoted-string )
 * token         = 1*tchar
 * tchar         = "!" / "#" / "$" / "%" / "&" / "'" / "*"
 *               / "+" / "-" / "." / "^" / "_" / "`" / "|" / "~"
 *               / DIGIT / ALPHA
 *               ; any VCHAR, except delimiters
 * quoted-string = DQUOTE *( qdtext / quoted-pair ) DQUOTE
 * qdtext        = HTAB / SP / %x21 / %x23-5B / %x5D-7E / obs-text
 * obs-text      = %x80-FF
 * quoted-pair   = "\" ( HTAB / SP / VCHAR / obs-text )
 */
var PARAM_REGEXP = /; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g // eslint-disable-line no-control-regex
var TEXT_REGEXP = /^[\u000b\u0020-\u007e\u0080-\u00ff]+$/ // eslint-disable-line no-control-regex
var TOKEN_REGEXP = /^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/

/**
 * RegExp to match quoted-pair in RFC 7230 sec 3.2.6
 *
 * quoted-pair = "\" ( HTAB / SP / VCHAR / obs-text )
 * obs-text    = %x80-FF
 */
var QESC_REGEXP = /\\([\u000b\u0020-\u00ff])/g // eslint-disable-line no-control-regex

/**
 * RegExp to match chars that must be quoted-pair in RFC 7230 sec 3.2.6
 */
var QUOTE_REGEXP = /([\\"])/g

/**
 * RegExp to match type in RFC 7231 sec 3.1.1.1
 *
 * media-type = type "/" subtype
 * type       = token
 * subtype    = token
 */
var TYPE_REGEXP = /^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/

/**
 * Module exports.
 * @public
 */

exports.format = format
exports.parse = parse

/**
 * Format object to media type.
 *
 * @param {object} obj
 * @return {string}
 * @public
 */

function format (obj) {
  if (!obj || typeof obj !== 'object') {
    throw new TypeError('argument obj is required')
  }

  var parameters = obj.parameters
  var type = obj.type

  if (!type || !TYPE_REGEXP.test(type)) {
    throw new TypeError('invalid type')
  }

  var string = type

  // append parameters
  if (parameters && typeof parameters === 'object') {
    var param
    var params = Object.keys(parameters).sort()

    for (var i = 0; i < params.length; i++) {
      param = params[i]

      if (!TOKEN_REGEXP.test(param)) {
        throw new TypeError('invalid parameter name')
      }

      string += '; ' + param + '=' + qstring(parameters[param])
    }
  }

  return string
}

/**
 * Parse media type to object.
 *
 * @param {string|object} string
 * @return {Object}
 * @public
 */

function parse (string) {
  if (!string) {
    throw new TypeError('argument string is required')
  }

  // support req/res-like objects as argument
  var header = typeof string === 'object'
    ? getcontenttype(string)
    : string

  if (typeof header !== 'string') {
    throw new TypeError('argument string is required to be a string')
  }

  var index = header.indexOf(';')
  var type = index !== -1
    ? header.slice(0, index).trim()
    : header.trim()

  if (!TYPE_REGEXP.test(type)) {
    throw new TypeError('invalid media type')
  }

  var obj = new ContentType(type.toLowerCase())

  // parse parameters
  if (index !== -1) {
    var key
    var match
    var value

    PARAM_REGEXP.lastIndex = index

    while ((match = PARAM_REGEXP.exec(header))) {
      if (match.index !== index) {
        throw new TypeError('invalid parameter format')
      }

      index += match[0].length
      key = match[1].toLowerCase()
      value = match[2]

      if (value.charCodeAt(0) === 0x22 /* " */) {
        // remove quotes
        value = value.slice(1, -1)

        // remove escapes
        if (value.indexOf('\\') !== -1) {
          value = value.replace(QESC_REGEXP, '$1')
        }
      }

      obj.parameters[key] = value
    }

    if (index !== header.length) {
      throw new TypeError('invalid parameter format')
    }
  }

  return obj
}

/**
 * Get content-type from req/res objects.
 *
 * @param {object}
 * @return {Object}
 * @private
 */

function getcontenttype (obj) {
  var header

  if (typeof obj.getHeader === 'function') {
    // res-like
    header = obj.getHeader('content-type')
  } else if (typeof obj.headers === 'object') {
    // req-like
    header = obj.headers && obj.headers['content-type']
  }

  if (typeof header !== 'string') {
    throw new TypeError('content-type header is missing from object')
  }

  return header
}

/**
 * Quote a string if necessary.
 *
 * @param {string} val
 * @return {string}
 * @private
 */

function qstring (val) {
  var str = String(val)

  // no need to quote tokens
  if (TOKEN_REGEXP.test(str)) {
    return str
  }

  if (str.length > 0 && !TEXT_REGEXP.test(str)) {
    throw new TypeError('invalid parameter value')
  }

  return '"' + str.replace(QUOTE_REGEXP, '\\$1') + '"'
}

/**
 * Class to represent a content type.
 * @private
 */
function ContentType (type) {
  this.parameters = Object.create(null)
  this.type = type
}


/***/ }),

/***/ "./node_modules/eventsource-parser/dist/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/eventsource-parser/dist/index.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
function createParser(onParse) {
  let isFirstChunk;
  let buffer;
  let startingPosition;
  let startingFieldLength;
  let eventId;
  let eventName;
  let data;
  reset();
  return {
    feed,
    reset
  };
  function reset() {
    isFirstChunk = true;
    buffer = "";
    startingPosition = 0;
    startingFieldLength = -1;
    eventId = void 0;
    eventName = void 0;
    data = "";
  }
  function feed(chunk) {
    buffer = buffer ? buffer + chunk : chunk;
    if (isFirstChunk && hasBom(buffer)) {
      buffer = buffer.slice(BOM.length);
    }
    isFirstChunk = false;
    const length = buffer.length;
    let position = 0;
    let discardTrailingNewline = false;
    while (position < length) {
      if (discardTrailingNewline) {
        if (buffer[position] === "\n") {
          ++position;
        }
        discardTrailingNewline = false;
      }
      let lineLength = -1;
      let fieldLength = startingFieldLength;
      let character;
      for (let index = startingPosition; lineLength < 0 && index < length; ++index) {
        character = buffer[index];
        if (character === ":" && fieldLength < 0) {
          fieldLength = index - position;
        } else if (character === "\r") {
          discardTrailingNewline = true;
          lineLength = index - position;
        } else if (character === "\n") {
          lineLength = index - position;
        }
      }
      if (lineLength < 0) {
        startingPosition = length - position;
        startingFieldLength = fieldLength;
        break;
      } else {
        startingPosition = 0;
        startingFieldLength = -1;
      }
      parseEventStreamLine(buffer, position, fieldLength, lineLength);
      position += lineLength + 1;
    }
    if (position === length) {
      buffer = "";
    } else if (position > 0) {
      buffer = buffer.slice(position);
    }
  }
  function parseEventStreamLine(lineBuffer, index, fieldLength, lineLength) {
    if (lineLength === 0) {
      if (data.length > 0) {
        onParse({
          type: "event",
          id: eventId,
          event: eventName || void 0,
          data: data.slice(0, -1)
          // remove trailing newline
        });

        data = "";
        eventId = void 0;
      }
      eventName = void 0;
      return;
    }
    const noValue = fieldLength < 0;
    const field = lineBuffer.slice(index, index + (noValue ? lineLength : fieldLength));
    let step = 0;
    if (noValue) {
      step = lineLength;
    } else if (lineBuffer[index + fieldLength + 1] === " ") {
      step = fieldLength + 2;
    } else {
      step = fieldLength + 1;
    }
    const position = index + step;
    const valueLength = lineLength - step;
    const value = lineBuffer.slice(position, position + valueLength).toString();
    if (field === "data") {
      data += value ? "".concat(value, "\n") : "\n";
    } else if (field === "event") {
      eventName = value;
    } else if (field === "id" && !value.includes("\0")) {
      eventId = value;
    } else if (field === "retry") {
      const retry = parseInt(value, 10);
      if (!Number.isNaN(retry)) {
        onParse({
          type: "reconnect-interval",
          value: retry
        });
      }
    }
  }
}
const BOM = [239, 187, 191];
function hasBom(buffer) {
  return BOM.every((charCode, index) => buffer.charCodeAt(index) === charCode);
}
exports.createParser = createParser;
//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/microsoft.cognitiveservices.speech.sdk.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/microsoft.cognitiveservices.speech.sdk.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ActivityReceivedEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.ActivityReceivedEventArgs),
/* harmony export */   "AudioConfig": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.AudioConfig),
/* harmony export */   "AudioFormatTag": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.AudioFormatTag),
/* harmony export */   "AudioInputStream": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.AudioInputStream),
/* harmony export */   "AudioOutputStream": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.AudioOutputStream),
/* harmony export */   "AudioStreamFormat": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.AudioStreamFormat),
/* harmony export */   "AutoDetectSourceLanguageConfig": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.AutoDetectSourceLanguageConfig),
/* harmony export */   "AutoDetectSourceLanguageResult": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.AutoDetectSourceLanguageResult),
/* harmony export */   "BaseAudioPlayer": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.BaseAudioPlayer),
/* harmony export */   "BotFrameworkConfig": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.BotFrameworkConfig),
/* harmony export */   "CancellationDetails": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.CancellationDetails),
/* harmony export */   "CancellationDetailsBase": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.CancellationDetailsBase),
/* harmony export */   "CancellationErrorCode": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.CancellationErrorCode),
/* harmony export */   "CancellationReason": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.CancellationReason),
/* harmony export */   "Connection": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.Connection),
/* harmony export */   "ConnectionEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.ConnectionEventArgs),
/* harmony export */   "ConnectionMessage": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.ConnectionMessage),
/* harmony export */   "ConnectionMessageEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.ConnectionMessageEventArgs),
/* harmony export */   "Conversation": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.Conversation),
/* harmony export */   "ConversationExpirationEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.ConversationExpirationEventArgs),
/* harmony export */   "ConversationParticipantsChangedEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.ConversationParticipantsChangedEventArgs),
/* harmony export */   "ConversationTranscriber": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.ConversationTranscriber),
/* harmony export */   "ConversationTranscriptionCanceledEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.ConversationTranscriptionCanceledEventArgs),
/* harmony export */   "ConversationTranscriptionEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.ConversationTranscriptionEventArgs),
/* harmony export */   "ConversationTranslationCanceledEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.ConversationTranslationCanceledEventArgs),
/* harmony export */   "ConversationTranslationEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.ConversationTranslationEventArgs),
/* harmony export */   "ConversationTranslationResult": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.ConversationTranslationResult),
/* harmony export */   "ConversationTranslator": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.ConversationTranslator),
/* harmony export */   "CustomCommandsConfig": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.CustomCommandsConfig),
/* harmony export */   "Diagnostics": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.Diagnostics),
/* harmony export */   "DialogServiceConfig": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.DialogServiceConfig),
/* harmony export */   "DialogServiceConnector": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.DialogServiceConnector),
/* harmony export */   "IntentRecognitionCanceledEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.IntentRecognitionCanceledEventArgs),
/* harmony export */   "IntentRecognitionEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.IntentRecognitionEventArgs),
/* harmony export */   "IntentRecognitionResult": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.IntentRecognitionResult),
/* harmony export */   "IntentRecognizer": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.IntentRecognizer),
/* harmony export */   "KeywordRecognitionModel": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.KeywordRecognitionModel),
/* harmony export */   "LanguageIdMode": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.LanguageIdMode),
/* harmony export */   "LanguageUnderstandingModel": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.LanguageUnderstandingModel),
/* harmony export */   "LogLevel": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.LogLevel),
/* harmony export */   "NoMatchDetails": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.NoMatchDetails),
/* harmony export */   "NoMatchReason": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.NoMatchReason),
/* harmony export */   "OutputFormat": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.OutputFormat),
/* harmony export */   "Participant": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.Participant),
/* harmony export */   "ParticipantChangedReason": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.ParticipantChangedReason),
/* harmony export */   "PhraseListGrammar": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PhraseListGrammar),
/* harmony export */   "ProfanityOption": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.ProfanityOption),
/* harmony export */   "PronunciationAssessmentConfig": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PronunciationAssessmentConfig),
/* harmony export */   "PronunciationAssessmentGradingSystem": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PronunciationAssessmentGradingSystem),
/* harmony export */   "PronunciationAssessmentGranularity": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PronunciationAssessmentGranularity),
/* harmony export */   "PronunciationAssessmentResult": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PronunciationAssessmentResult),
/* harmony export */   "PropertyCollection": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyCollection),
/* harmony export */   "PropertyId": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId),
/* harmony export */   "PullAudioInputStream": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PullAudioInputStream),
/* harmony export */   "PullAudioInputStreamCallback": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PullAudioInputStreamCallback),
/* harmony export */   "PullAudioOutputStream": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PullAudioOutputStream),
/* harmony export */   "PushAudioInputStream": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PushAudioInputStream),
/* harmony export */   "PushAudioOutputStream": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PushAudioOutputStream),
/* harmony export */   "PushAudioOutputStreamCallback": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PushAudioOutputStreamCallback),
/* harmony export */   "RecognitionEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.RecognitionEventArgs),
/* harmony export */   "RecognitionResult": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.RecognitionResult),
/* harmony export */   "Recognizer": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.Recognizer),
/* harmony export */   "ResultReason": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.ResultReason),
/* harmony export */   "ServiceEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.ServiceEventArgs),
/* harmony export */   "ServicePropertyChannel": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.ServicePropertyChannel),
/* harmony export */   "SessionEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SessionEventArgs),
/* harmony export */   "SourceLanguageConfig": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SourceLanguageConfig),
/* harmony export */   "SpeakerAudioDestination": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeakerAudioDestination),
/* harmony export */   "SpeakerIdentificationModel": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeakerIdentificationModel),
/* harmony export */   "SpeakerRecognitionCancellationDetails": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeakerRecognitionCancellationDetails),
/* harmony export */   "SpeakerRecognitionResult": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeakerRecognitionResult),
/* harmony export */   "SpeakerRecognitionResultType": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeakerRecognitionResultType),
/* harmony export */   "SpeakerRecognizer": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeakerRecognizer),
/* harmony export */   "SpeakerVerificationModel": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeakerVerificationModel),
/* harmony export */   "SpeechConfig": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechConfig),
/* harmony export */   "SpeechConfigImpl": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechConfigImpl),
/* harmony export */   "SpeechRecognitionCanceledEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechRecognitionCanceledEventArgs),
/* harmony export */   "SpeechRecognitionEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechRecognitionEventArgs),
/* harmony export */   "SpeechRecognitionResult": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechRecognitionResult),
/* harmony export */   "SpeechRecognizer": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechRecognizer),
/* harmony export */   "SpeechSynthesisBookmarkEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechSynthesisBookmarkEventArgs),
/* harmony export */   "SpeechSynthesisBoundaryType": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechSynthesisBoundaryType),
/* harmony export */   "SpeechSynthesisEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechSynthesisEventArgs),
/* harmony export */   "SpeechSynthesisOutputFormat": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechSynthesisOutputFormat),
/* harmony export */   "SpeechSynthesisResult": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechSynthesisResult),
/* harmony export */   "SpeechSynthesisVisemeEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechSynthesisVisemeEventArgs),
/* harmony export */   "SpeechSynthesisWordBoundaryEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechSynthesisWordBoundaryEventArgs),
/* harmony export */   "SpeechSynthesizer": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechSynthesizer),
/* harmony export */   "SpeechTranslationConfig": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechTranslationConfig),
/* harmony export */   "SpeechTranslationConfigImpl": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechTranslationConfigImpl),
/* harmony export */   "SynthesisResult": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SynthesisResult),
/* harmony export */   "SynthesisVoicesResult": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SynthesisVoicesResult),
/* harmony export */   "TranslationRecognitionCanceledEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.TranslationRecognitionCanceledEventArgs),
/* harmony export */   "TranslationRecognitionEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.TranslationRecognitionEventArgs),
/* harmony export */   "TranslationRecognitionResult": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.TranslationRecognitionResult),
/* harmony export */   "TranslationRecognizer": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.TranslationRecognizer),
/* harmony export */   "TranslationSynthesisEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.TranslationSynthesisEventArgs),
/* harmony export */   "TranslationSynthesisResult": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.TranslationSynthesisResult),
/* harmony export */   "Translations": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.Translations),
/* harmony export */   "TurnStatusReceivedEventArgs": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.TurnStatusReceivedEventArgs),
/* harmony export */   "User": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.User),
/* harmony export */   "VoiceInfo": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.VoiceInfo),
/* harmony export */   "VoiceProfile": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.VoiceProfile),
/* harmony export */   "VoiceProfileCancellationDetails": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.VoiceProfileCancellationDetails),
/* harmony export */   "VoiceProfileClient": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.VoiceProfileClient),
/* harmony export */   "VoiceProfileEnrollmentCancellationDetails": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.VoiceProfileEnrollmentCancellationDetails),
/* harmony export */   "VoiceProfileEnrollmentResult": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.VoiceProfileEnrollmentResult),
/* harmony export */   "VoiceProfilePhraseResult": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.VoiceProfilePhraseResult),
/* harmony export */   "VoiceProfileResult": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.VoiceProfileResult),
/* harmony export */   "VoiceProfileType": () => (/* reexport safe */ _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.VoiceProfileType)
/* harmony export */ });
/* harmony import */ var _src_common_browser_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ConsoleLoggingListener.js");
/* harmony import */ var _src_common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js");
/* harmony import */ var _src_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


// Common.Storage.SetLocalStorage(new Common.Browser.LocalStorage());
// Common.Storage.SetSessionStorage(new Common.Browser.SessionStorage());
_src_common_Exports__WEBPACK_IMPORTED_MODULE_0__.Events.instance.attachConsoleListener(new _src_common_browser_Exports__WEBPACK_IMPORTED_MODULE_1__.ConsoleLoggingListener());
// Speech SDK API


//# sourceMappingURL=microsoft.cognitiveservices.speech.sdk.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ConsoleLoggingListener.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ConsoleLoggingListener.js ***!
  \*************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConsoleLoggingListener": () => (/* binding */ ConsoleLoggingListener)
/* harmony export */ });
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ "?0825");
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _sdk_LogLevel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/LogLevel */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js");
/* harmony import */ var _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sdk/Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* eslint-disable @typescript-eslint/no-unsafe-assignment */
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



class ConsoleLoggingListener {
    constructor(logLevelFilter = _sdk_LogLevel__WEBPACK_IMPORTED_MODULE_1__.EventType.None) {
        this.privLogPath = undefined;
        this.privEnableConsoleOutput = true;
        this.privLogLevelFilter = logLevelFilter;
    }
    set logPath(path) {
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__.Contracts.throwIfNullOrUndefined(fs__WEBPACK_IMPORTED_MODULE_0__.openSync, "\nFile System access not available");
        this.privLogPath = path;
    }
    set enableConsoleOutput(enableOutput) {
        this.privEnableConsoleOutput = enableOutput;
    }
    onEvent(event) {
        if (event.eventType >= this.privLogLevelFilter) {
            const log = this.toString(event);
            if (!!this.privLogPath) {
                fs__WEBPACK_IMPORTED_MODULE_0__.writeFileSync(this.privLogPath, log + "\n", { flag: "a+" });
            }
            if (this.privEnableConsoleOutput) {
                switch (event.eventType) {
                    case _sdk_LogLevel__WEBPACK_IMPORTED_MODULE_1__.EventType.Debug:
                        // eslint-disable-next-line no-console
                        console.debug(log);
                        break;
                    case _sdk_LogLevel__WEBPACK_IMPORTED_MODULE_1__.EventType.Info:
                        // eslint-disable-next-line no-console
                        console.info(log);
                        break;
                    case _sdk_LogLevel__WEBPACK_IMPORTED_MODULE_1__.EventType.Warning:
                        // eslint-disable-next-line no-console
                        console.warn(log);
                        break;
                    case _sdk_LogLevel__WEBPACK_IMPORTED_MODULE_1__.EventType.Error:
                        // eslint-disable-next-line no-console
                        console.error(log);
                        break;
                    default:
                        // eslint-disable-next-line no-console
                        console.log(log);
                        break;
                }
            }
        }
    }
    toString(event) {
        const logFragments = [
            `${event.eventTime}`,
            `${event.name}`,
        ];
        const e = event;
        for (const prop in e) {
            if (prop && event.hasOwnProperty(prop) &&
                prop !== "eventTime" && prop !== "eventType" &&
                prop !== "eventId" && prop !== "name" &&
                prop !== "constructor") {
                // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
                const value = e[prop];
                let valueToLog = "<NULL>";
                if (value !== undefined && value !== null) {
                    if (typeof (value) === "number" || typeof (value) === "string") {
                        valueToLog = value.toString();
                    }
                    else {
                        valueToLog = JSON.stringify(value);
                    }
                }
                logFragments.push(`${prop}: ${valueToLog}`);
            }
        }
        return logFragments.join(" | ");
    }
}

//# sourceMappingURL=ConsoleLoggingListener.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/FileAudioSource.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/FileAudioSource.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FileAudioSource": () => (/* binding */ FileAudioSource)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/EventSource.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/AudioSourceEvents.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ChunkedArrayBufferStream.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js");
/* harmony import */ var _sdk_Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../sdk/Audio/AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



class FileAudioSource {
    constructor(file, filename, audioSourceId) {
        this.privStreams = {};
        this.privHeaderEnd = 44;
        this.privId = audioSourceId ? audioSourceId : (0,_common_Exports__WEBPACK_IMPORTED_MODULE_0__.createNoDashGuid)();
        this.privEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__.EventSource();
        this.privSource = file;
        if (typeof window !== "undefined" && typeof Blob !== "undefined" && this.privSource instanceof Blob) {
            this.privFilename = file.name;
        }
        else {
            this.privFilename = filename || "unknown.wav";
        }
        // Read the header.
        this.privAudioFormatPromise = this.readHeader();
    }
    get format() {
        return this.privAudioFormatPromise;
    }
    turnOn() {
        if (this.privFilename.lastIndexOf(".wav") !== this.privFilename.length - 4) {
            const errorMsg = this.privFilename + " is not supported. Only WAVE files are allowed at the moment.";
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.AudioSourceErrorEvent(errorMsg, ""));
            return Promise.reject(errorMsg);
        }
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.AudioSourceInitializingEvent(this.privId)); // no stream id
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.AudioSourceReadyEvent(this.privId));
        return;
    }
    id() {
        return this.privId;
    }
    attach(audioNodeId) {
        return __awaiter(this, void 0, void 0, function* () {
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.AudioStreamNodeAttachingEvent(this.privId, audioNodeId));
            const stream = yield this.upload(audioNodeId);
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.AudioStreamNodeAttachedEvent(this.privId, audioNodeId));
            return Promise.resolve({
                detach: () => __awaiter(this, void 0, void 0, function* () {
                    stream.readEnded();
                    delete this.privStreams[audioNodeId];
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.AudioStreamNodeDetachedEvent(this.privId, audioNodeId));
                    yield this.turnOff();
                }),
                id: () => audioNodeId,
                read: () => stream.read(),
            });
        });
    }
    detach(audioNodeId) {
        if (audioNodeId && this.privStreams[audioNodeId]) {
            this.privStreams[audioNodeId].close();
            delete this.privStreams[audioNodeId];
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.AudioStreamNodeDetachedEvent(this.privId, audioNodeId));
        }
    }
    turnOff() {
        for (const streamId in this.privStreams) {
            if (streamId) {
                const stream = this.privStreams[streamId];
                if (stream && !stream.isClosed) {
                    stream.close();
                }
            }
        }
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.AudioSourceOffEvent(this.privId)); // no stream now
        return Promise.resolve();
    }
    get events() {
        return this.privEvents;
    }
    get deviceInfo() {
        return this.privAudioFormatPromise.then((result) => (Promise.resolve({
            bitspersample: result.bitsPerSample,
            channelcount: result.channels,
            connectivity: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__.connectivity.Unknown,
            manufacturer: "Speech SDK",
            model: "File",
            samplerate: result.samplesPerSec,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__.type.File,
        })));
    }
    readHeader() {
        // Read the wave header.
        const maxHeaderSize = 4296;
        const header = this.privSource.slice(0, maxHeaderSize);
        const headerResult = new _common_Exports__WEBPACK_IMPORTED_MODULE_4__.Deferred();
        const processHeader = (header) => {
            const view = new DataView(header);
            const getWord = (index) => String.fromCharCode(view.getUint8(index), view.getUint8(index + 1), view.getUint8(index + 2), view.getUint8(index + 3));
            // RIFF 4 bytes.
            if ("RIFF" !== getWord(0)) {
                headerResult.reject("Invalid WAV header in file, RIFF was not found");
                return;
            }
            // length, 4 bytes
            // RIFF Type & fmt 8 bytes
            if ("WAVE" !== getWord(8) || "fmt " !== getWord(12)) {
                headerResult.reject("Invalid WAV header in file, WAVEfmt was not found");
                return;
            }
            const formatSize = view.getInt32(16, true);
            const channelCount = view.getUint16(22, true);
            const sampleRate = view.getUint32(24, true);
            const bitsPerSample = view.getUint16(34, true);
            // Confirm if header is 44 bytes long.
            let pos = 36 + Math.max(formatSize - 16, 0);
            for (; getWord(pos) !== "data"; pos += 2) {
                if (pos > maxHeaderSize - 8) {
                    headerResult.reject("Invalid WAV header in file, data block was not found");
                    return;
                }
            }
            this.privHeaderEnd = pos + 8;
            headerResult.resolve(_sdk_Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_5__.AudioStreamFormat.getWaveFormatPCM(sampleRate, bitsPerSample, channelCount));
        };
        if (typeof window !== "undefined" && typeof Blob !== "undefined" && header instanceof Blob) {
            const reader = new FileReader();
            reader.onload = (event) => {
                const header = event.target.result;
                processHeader(header);
            };
            reader.readAsArrayBuffer(header);
        }
        else {
            const h = header;
            processHeader(h.buffer.slice(h.byteOffset, h.byteOffset + h.byteLength));
        }
        return headerResult.promise;
    }
    upload(audioNodeId) {
        return __awaiter(this, void 0, void 0, function* () {
            const onerror = (error) => {
                const errorMsg = `Error occurred while processing '${this.privFilename}'. ${error}`;
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.AudioStreamNodeErrorEvent(this.privId, audioNodeId, errorMsg));
                throw new Error(errorMsg);
            };
            try {
                yield this.turnOn();
                const format = yield this.privAudioFormatPromise;
                const stream = new _common_Exports__WEBPACK_IMPORTED_MODULE_6__.ChunkedArrayBufferStream(format.avgBytesPerSec / 10, audioNodeId);
                this.privStreams[audioNodeId] = stream;
                const chunk = this.privSource.slice(this.privHeaderEnd);
                const processFile = (buff) => {
                    if (stream.isClosed) {
                        return; // output stream was closed (somebody called TurnOff). We're done here.
                    }
                    stream.writeStreamChunk({
                        buffer: buff,
                        isEnd: false,
                        timeReceived: Date.now(),
                    });
                    stream.close();
                };
                if (typeof window !== "undefined" && typeof Blob !== "undefined" && chunk instanceof Blob) {
                    const reader = new FileReader();
                    reader.onerror = (ev) => onerror(ev.toString());
                    reader.onload = (event) => {
                        const fileBuffer = event.target.result;
                        processFile(fileBuffer);
                    };
                    reader.readAsArrayBuffer(chunk);
                }
                else {
                    const c = chunk;
                    processFile(c.buffer.slice(c.byteOffset, c.byteOffset + c.byteLength));
                }
                return stream;
            }
            catch (e) {
                onerror(e);
            }
        });
    }
    onEvent(event) {
        this.privEvents.onEvent(event);
        _common_Exports__WEBPACK_IMPORTED_MODULE_7__.Events.instance.onEvent(event);
    }
}

//# sourceMappingURL=FileAudioSource.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/MicAudioSource.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/MicAudioSource.js ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AudioWorkletSourceURLPropertyName": () => (/* binding */ AudioWorkletSourceURLPropertyName),
/* harmony export */   "MicAudioSource": () => (/* binding */ MicAudioSource)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/EventSource.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/AudioSourceEvents.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ChunkedArrayBufferStream.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js");
/* harmony import */ var _sdk_Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../sdk/Audio/AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const AudioWorkletSourceURLPropertyName = "MICROPHONE-WorkletSourceUrl";
class MicAudioSource {
    constructor(privRecorder, deviceId, audioSourceId, mediaStream) {
        this.privRecorder = privRecorder;
        this.deviceId = deviceId;
        this.privStreams = {};
        this.privOutputChunkSize = MicAudioSource.AUDIOFORMAT.avgBytesPerSec / 10;
        this.privId = audioSourceId ? audioSourceId : (0,_common_Exports__WEBPACK_IMPORTED_MODULE_0__.createNoDashGuid)();
        this.privEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__.EventSource();
        this.privMediaStream = mediaStream || null;
        this.privIsClosing = false;
    }
    get format() {
        return Promise.resolve(MicAudioSource.AUDIOFORMAT);
    }
    turnOn() {
        if (this.privInitializeDeferral) {
            return this.privInitializeDeferral.promise;
        }
        this.privInitializeDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.Deferred();
        try {
            this.createAudioContext();
        }
        catch (error) {
            if (error instanceof Error) {
                const typedError = error;
                this.privInitializeDeferral.reject(typedError.name + ": " + typedError.message);
            }
            else {
                this.privInitializeDeferral.reject(error);
            }
            return this.privInitializeDeferral.promise;
        }
        const nav = window.navigator;
        let getUserMedia = (
        // eslint-disable-next-line
        nav.getUserMedia ||
            nav.webkitGetUserMedia ||
            nav.mozGetUserMedia ||
            nav.msGetUserMedia);
        if (!!nav.mediaDevices) {
            getUserMedia = (constraints, successCallback, errorCallback) => {
                nav.mediaDevices
                    .getUserMedia(constraints)
                    .then(successCallback)
                    .catch(errorCallback);
            };
        }
        if (!getUserMedia) {
            const errorMsg = "Browser does not support getUserMedia.";
            this.privInitializeDeferral.reject(errorMsg);
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_3__.AudioSourceErrorEvent(errorMsg, "")); // mic initialized error - no streamid at this point
        }
        else {
            const next = () => {
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_3__.AudioSourceInitializingEvent(this.privId)); // no stream id
                if (this.privMediaStream && this.privMediaStream.active) {
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_3__.AudioSourceReadyEvent(this.privId));
                    this.privInitializeDeferral.resolve();
                }
                else {
                    getUserMedia({ audio: this.deviceId ? { deviceId: this.deviceId } : true, video: false }, (mediaStream) => {
                        this.privMediaStream = mediaStream;
                        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_3__.AudioSourceReadyEvent(this.privId));
                        this.privInitializeDeferral.resolve();
                    }, (error) => {
                        const errorMsg = `Error occurred during microphone initialization: ${error}`;
                        this.privInitializeDeferral.reject(errorMsg);
                        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_3__.AudioSourceErrorEvent(this.privId, errorMsg));
                    });
                }
            };
            if (this.privContext.state === "suspended") {
                // NOTE: On iOS, the Web Audio API requires sounds to be triggered from an explicit user action.
                // https://github.com/WebAudio/web-audio-api/issues/790
                this.privContext.resume()
                    .then(next)
                    .catch((reason) => {
                    this.privInitializeDeferral.reject(`Failed to initialize audio context: ${reason}`);
                });
            }
            else {
                next();
            }
        }
        return this.privInitializeDeferral.promise;
    }
    id() {
        return this.privId;
    }
    attach(audioNodeId) {
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_3__.AudioStreamNodeAttachingEvent(this.privId, audioNodeId));
        return this.listen(audioNodeId).then((stream) => {
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_3__.AudioStreamNodeAttachedEvent(this.privId, audioNodeId));
            return {
                detach: () => __awaiter(this, void 0, void 0, function* () {
                    stream.readEnded();
                    delete this.privStreams[audioNodeId];
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_3__.AudioStreamNodeDetachedEvent(this.privId, audioNodeId));
                    return this.turnOff();
                }),
                id: () => audioNodeId,
                read: () => stream.read(),
            };
        });
    }
    detach(audioNodeId) {
        if (audioNodeId && this.privStreams[audioNodeId]) {
            this.privStreams[audioNodeId].close();
            delete this.privStreams[audioNodeId];
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_3__.AudioStreamNodeDetachedEvent(this.privId, audioNodeId));
        }
    }
    turnOff() {
        return __awaiter(this, void 0, void 0, function* () {
            for (const streamId in this.privStreams) {
                if (streamId) {
                    const stream = this.privStreams[streamId];
                    if (stream) {
                        stream.close();
                    }
                }
            }
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_3__.AudioSourceOffEvent(this.privId)); // no stream now
            if (this.privInitializeDeferral) {
                // Correctly handle when browser forces mic off before turnOn() completes
                // eslint-disable-next-line @typescript-eslint/await-thenable
                yield this.privInitializeDeferral;
                this.privInitializeDeferral = null;
            }
            yield this.destroyAudioContext();
            return;
        });
    }
    get events() {
        return this.privEvents;
    }
    get deviceInfo() {
        return this.getMicrophoneLabel().then((label) => ({
            bitspersample: MicAudioSource.AUDIOFORMAT.bitsPerSample,
            channelcount: MicAudioSource.AUDIOFORMAT.channels,
            connectivity: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.connectivity.Unknown,
            manufacturer: "Speech SDK",
            model: label,
            samplerate: MicAudioSource.AUDIOFORMAT.samplesPerSec,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.type.Microphones,
        }));
    }
    setProperty(name, value) {
        if (name === AudioWorkletSourceURLPropertyName) {
            this.privRecorder.setWorkletUrl(value);
        }
        else {
            throw new Error("Property '" + name + "' is not supported on Microphone.");
        }
    }
    getMicrophoneLabel() {
        const defaultMicrophoneName = "microphone";
        // If we did this already, return the value.
        if (this.privMicrophoneLabel !== undefined) {
            return Promise.resolve(this.privMicrophoneLabel);
        }
        // If the stream isn't currently running, we can't query devices because security.
        if (this.privMediaStream === undefined || !this.privMediaStream.active) {
            return Promise.resolve(defaultMicrophoneName);
        }
        // Setup a default
        this.privMicrophoneLabel = defaultMicrophoneName;
        // Get the id of the device running the audio track.
        const microphoneDeviceId = this.privMediaStream.getTracks()[0].getSettings().deviceId;
        // If the browser doesn't support getting the device ID, set a default and return.
        if (undefined === microphoneDeviceId) {
            return Promise.resolve(this.privMicrophoneLabel);
        }
        const deferred = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.Deferred();
        // Enumerate the media devices.
        navigator.mediaDevices.enumerateDevices().then((devices) => {
            for (const device of devices) {
                if (device.deviceId === microphoneDeviceId) {
                    // Found the device
                    this.privMicrophoneLabel = device.label;
                    break;
                }
            }
            deferred.resolve(this.privMicrophoneLabel);
        }, () => deferred.resolve(this.privMicrophoneLabel));
        return deferred.promise;
    }
    listen(audioNodeId) {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.turnOn();
            const stream = new _common_Exports__WEBPACK_IMPORTED_MODULE_5__.ChunkedArrayBufferStream(this.privOutputChunkSize, audioNodeId);
            this.privStreams[audioNodeId] = stream;
            try {
                this.privRecorder.record(this.privContext, this.privMediaStream, stream);
            }
            catch (error) {
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_3__.AudioStreamNodeErrorEvent(this.privId, audioNodeId, error));
                throw error;
            }
            const result = stream;
            return result;
        });
    }
    onEvent(event) {
        this.privEvents.onEvent(event);
        _common_Exports__WEBPACK_IMPORTED_MODULE_6__.Events.instance.onEvent(event);
    }
    createAudioContext() {
        if (!!this.privContext) {
            return;
        }
        this.privContext = _sdk_Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_7__.AudioStreamFormatImpl.getAudioContext(MicAudioSource.AUDIOFORMAT.samplesPerSec);
    }
    destroyAudioContext() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.privContext) {
                return;
            }
            this.privRecorder.releaseMediaResources(this.privContext);
            // This pattern brought to you by a bug in the TypeScript compiler where it
            // confuses the ("close" in this.privContext) with this.privContext always being null as the alternate.
            // https://github.com/Microsoft/TypeScript/issues/11498
            let hasClose = false;
            if ("close" in this.privContext) {
                hasClose = true;
            }
            if (hasClose) {
                if (!this.privIsClosing) {
                    // The audio context close may take enough time that the close is called twice
                    this.privIsClosing = true;
                    yield this.privContext.close();
                    this.privContext = null;
                    this.privIsClosing = false;
                }
            }
            else if (null !== this.privContext && this.privContext.state === "running") {
                // Suspend actually takes a callback, but analogous to the
                // resume method, it'll be only fired if suspend is called
                // in a direct response to a user action. The later is not always
                // the case, as TurnOff is also called, when we receive an
                // end-of-speech message from the service. So, doing a best effort
                // fire-and-forget here.
                yield this.privContext.suspend();
            }
        });
    }
}
MicAudioSource.AUDIOFORMAT = _sdk_Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_7__.AudioStreamFormat.getDefaultInputFormat();

//# sourceMappingURL=MicAudioSource.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/PCMRecorder.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/PCMRecorder.js ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PcmRecorder": () => (/* binding */ PcmRecorder)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RiffPcmEncoder.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class PcmRecorder {
    constructor(stopInputOnRelease) {
        this.privStopInputOnRelease = stopInputOnRelease;
    }
    record(context, mediaStream, outputStream) {
        const desiredSampleRate = 16000;
        const waveStreamEncoder = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__.RiffPcmEncoder(context.sampleRate, desiredSampleRate);
        const micInput = context.createMediaStreamSource(mediaStream);
        const attachScriptProcessor = () => {
            // eslint-disable-next-line @typescript-eslint/explicit-function-return-type
            const scriptNode = (() => {
                let bufferSize = 0;
                try {
                    return context.createScriptProcessor(bufferSize, 1, 1);
                }
                catch (error) {
                    // Webkit (<= version 31) requires a valid bufferSize.
                    bufferSize = 2048;
                    let audioSampleRate = context.sampleRate;
                    while (bufferSize < 16384 && audioSampleRate >= (2 * desiredSampleRate)) {
                        bufferSize <<= 1;
                        audioSampleRate >>= 1;
                    }
                    return context.createScriptProcessor(bufferSize, 1, 1);
                }
            })();
            scriptNode.onaudioprocess = (event) => {
                const inputFrame = event.inputBuffer.getChannelData(0);
                if (outputStream && !outputStream.isClosed) {
                    const waveFrame = waveStreamEncoder.encode(inputFrame);
                    if (!!waveFrame) {
                        outputStream.writeStreamChunk({
                            buffer: waveFrame,
                            isEnd: false,
                            timeReceived: Date.now(),
                        });
                    }
                }
            };
            micInput.connect(scriptNode);
            scriptNode.connect(context.destination);
            this.privMediaResources = {
                scriptProcessorNode: scriptNode,
                source: micInput,
                stream: mediaStream,
            };
        };
        // https://webaudio.github.io/web-audio-api/#audioworklet
        // Using AudioWorklet to improve audio quality and avoid audio glitches due to blocking the UI thread
        if (!!context.audioWorklet) {
            if (!this.privSpeechProcessorScript) {
                const workletScript = `class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`;
                const blob = new Blob([workletScript], { type: "application/javascript; charset=utf-8" });
                this.privSpeechProcessorScript = URL.createObjectURL(blob);
            }
            context.audioWorklet
                .addModule(this.privSpeechProcessorScript)
                .then(() => {
                const workletNode = new AudioWorkletNode(context, "speech-processor");
                workletNode.port.onmessage = (ev) => {
                    const inputFrame = ev.data;
                    if (outputStream && !outputStream.isClosed) {
                        const waveFrame = waveStreamEncoder.encode(inputFrame);
                        if (!!waveFrame) {
                            outputStream.writeStreamChunk({
                                buffer: waveFrame,
                                isEnd: false,
                                timeReceived: Date.now(),
                            });
                        }
                    }
                };
                micInput.connect(workletNode);
                workletNode.connect(context.destination);
                this.privMediaResources = {
                    scriptProcessorNode: workletNode,
                    source: micInput,
                    stream: mediaStream,
                };
            })
                .catch(() => {
                attachScriptProcessor();
            });
        }
        else {
            try {
                attachScriptProcessor();
            }
            catch (err) {
                throw new Error(`Unable to start audio worklet node for PCMRecorder: ${err}`);
            }
        }
    }
    releaseMediaResources(context) {
        if (this.privMediaResources) {
            if (this.privMediaResources.scriptProcessorNode) {
                this.privMediaResources.scriptProcessorNode.disconnect(context.destination);
                this.privMediaResources.scriptProcessorNode = null;
            }
            if (this.privMediaResources.source) {
                this.privMediaResources.source.disconnect();
                if (this.privStopInputOnRelease) {
                    this.privMediaResources.stream.getTracks().forEach((track) => track.stop());
                }
                this.privMediaResources.source = null;
            }
        }
    }
    setWorkletUrl(url) {
        this.privSpeechProcessorScript = url;
    }
}

//# sourceMappingURL=PCMRecorder.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ProxyInfo.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ProxyInfo.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ProxyInfo": () => (/* binding */ ProxyInfo)
/* harmony export */ });
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class ProxyInfo {
    constructor(proxyHostName, proxyPort, proxyUserName, proxyPassword) {
        this.privProxyHostName = proxyHostName;
        this.privProxyPort = proxyPort;
        this.privProxyUserName = proxyUserName;
        this.privProxyPassword = proxyPassword;
    }
    static fromParameters(parameters) {
        return new ProxyInfo(parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_ProxyHostName), parseInt(parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_ProxyPort), 10), parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_ProxyUserName), parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_ProxyPassword));
    }
    static fromRecognizerConfig(config) {
        return this.fromParameters(config.parameters);
    }
    get HostName() {
        return this.privProxyHostName;
    }
    get Port() {
        return this.privProxyPort;
    }
    get UserName() {
        return this.privProxyUserName;
    }
    get Password() {
        return this.privProxyPassword;
    }
}

//# sourceMappingURL=ProxyInfo.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ReplayableAudioNode.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ReplayableAudioNode.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ReplayableAudioNode": () => (/* binding */ ReplayableAudioNode)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class ReplayableAudioNode {
    constructor(audioSource, bytesPerSecond) {
        this.privBuffers = [];
        this.privReplayOffset = 0;
        this.privLastShrinkOffset = 0;
        this.privBufferStartOffset = 0;
        this.privBufferSerial = 0;
        this.privBufferedBytes = 0;
        this.privReplay = false;
        this.privLastChunkAcquiredTime = 0;
        this.privAudioNode = audioSource;
        this.privBytesPerSecond = bytesPerSecond;
    }
    id() {
        return this.privAudioNode.id();
    }
    // Reads and returns the next chunk of audio buffer.
    // If replay of existing buffers are needed, read() will first seek and replay
    // existing content, and upoin completion it will read new content from the underlying
    // audio node, saving that content into the replayable buffers.
    read() {
        // if there is a replay request to honor.
        if (!!this.privReplay && this.privBuffers.length !== 0) {
            // Find the start point in the buffers.
            // Offsets are in 100ns increments.
            // So how many bytes do we need to seek to get the right offset?
            const offsetToSeek = this.privReplayOffset - this.privBufferStartOffset;
            let bytesToSeek = Math.round(offsetToSeek * this.privBytesPerSecond * 1e-7);
            if (0 !== (bytesToSeek % 2)) {
                bytesToSeek++;
            }
            let i = 0;
            while (i < this.privBuffers.length && bytesToSeek >= this.privBuffers[i].chunk.buffer.byteLength) {
                bytesToSeek -= this.privBuffers[i++].chunk.buffer.byteLength;
            }
            if (i < this.privBuffers.length) {
                const retVal = this.privBuffers[i].chunk.buffer.slice(bytesToSeek);
                this.privReplayOffset += (retVal.byteLength / this.privBytesPerSecond) * 1e+7;
                // If we've reached the end of the buffers, stop replaying.
                if (i === this.privBuffers.length - 1) {
                    this.privReplay = false;
                }
                return Promise.resolve({
                    buffer: retVal,
                    isEnd: false,
                    timeReceived: this.privBuffers[i].chunk.timeReceived,
                });
            }
        }
        return this.privAudioNode.read()
            .then((result) => {
            if (result && result.buffer) {
                this.privBuffers.push(new BufferEntry(result, this.privBufferSerial++, this.privBufferedBytes));
                this.privBufferedBytes += result.buffer.byteLength;
            }
            return result;
        });
    }
    detach() {
        this.privBuffers = undefined;
        return this.privAudioNode.detach();
    }
    replay() {
        if (this.privBuffers && 0 !== this.privBuffers.length) {
            this.privReplay = true;
            this.privReplayOffset = this.privLastShrinkOffset;
        }
    }
    // Shrinks the existing audio buffers to start at the new offset, or at the
    // beginning of the buffer closest to the requested offset.
    // A replay request will start from the last shrink point.
    shrinkBuffers(offset) {
        if (this.privBuffers === undefined || this.privBuffers.length === 0) {
            return;
        }
        this.privLastShrinkOffset = offset;
        // Find the start point in the buffers.
        // Offsets are in 100ns increments.
        // So how many bytes do we need to seek to get the right offset?
        const offsetToSeek = offset - this.privBufferStartOffset;
        let bytesToSeek = Math.round(offsetToSeek * this.privBytesPerSecond * 1e-7);
        let i = 0;
        while (i < this.privBuffers.length && bytesToSeek >= this.privBuffers[i].chunk.buffer.byteLength) {
            bytesToSeek -= this.privBuffers[i++].chunk.buffer.byteLength;
        }
        this.privBufferStartOffset = Math.round(offset - ((bytesToSeek / this.privBytesPerSecond) * 1e+7));
        this.privBuffers = this.privBuffers.slice(i);
    }
    // Finds the time a buffer of audio was first seen by offset.
    findTimeAtOffset(offset) {
        if (offset < this.privBufferStartOffset || this.privBuffers === undefined) {
            return 0;
        }
        for (const value of this.privBuffers) {
            const startOffset = (value.byteOffset / this.privBytesPerSecond) * 1e7;
            const endOffset = startOffset + ((value.chunk.buffer.byteLength / this.privBytesPerSecond) * 1e7);
            if (offset >= startOffset && offset <= endOffset) {
                return value.chunk.timeReceived;
            }
        }
        return 0;
    }
}
// Primary use of this class is to help debugging problems with the replay
// code. If the memory cost of alloc / dealloc gets too much, drop it and just use
// the ArrayBuffer directly.
class BufferEntry {
    constructor(chunk, serial, byteOffset) {
        this.chunk = chunk;
        this.serial = serial;
        this.byteOffset = byteOffset;
    }
}

//# sourceMappingURL=ReplayableAudioNode.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/RestConfigBase.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/RestConfigBase.js ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RestConfigBase": () => (/* binding */ RestConfigBase)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class RestConfigBase {
    static get requestOptions() {
        return RestConfigBase.privDefaultRequestOptions;
    }
    static get configParams() {
        return RestConfigBase.privDefaultParams;
    }
    static get restErrors() {
        return RestConfigBase.privRestErrors;
    }
}
RestConfigBase.privDefaultRequestOptions = {
    headers: {
        Accept: "application/json",
    },
    ignoreCache: false,
    timeout: 10000,
};
RestConfigBase.privRestErrors = {
    authInvalidSubscriptionKey: "You must specify either an authentication token to use, or a Cognitive Speech subscription key.",
    authInvalidSubscriptionRegion: "You must specify the Cognitive Speech region to use.",
    invalidArgs: "Required input not found: {arg}.",
    invalidCreateJoinConversationResponse: "Creating/Joining conversation failed with HTTP {status}.",
    invalidParticipantRequest: "The requested participant was not found.",
    permissionDeniedConnect: "Required credentials not found.",
    permissionDeniedConversation: "Invalid operation: only the host can {command} the conversation.",
    permissionDeniedParticipant: "Invalid operation: only the host can {command} a participant.",
    permissionDeniedSend: "Invalid operation: the conversation is not in a connected state.",
    permissionDeniedStart: "Invalid operation: there is already an active conversation.",
};
RestConfigBase.privDefaultParams = {
    apiVersion: "api-version",
    authorization: "Authorization",
    clientAppId: "X-ClientAppId",
    contentTypeKey: "Content-Type",
    correlationId: "X-CorrelationId",
    languageCode: "language",
    nickname: "nickname",
    profanity: "profanity",
    requestId: "X-RequestId",
    roomId: "roomid",
    sessionToken: "token",
    subscriptionKey: "Ocp-Apim-Subscription-Key",
    subscriptionRegion: "Ocp-Apim-Subscription-Region",
    token: "X-CapitoToken",
};

//# sourceMappingURL=RestConfigBase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/RestMessageAdapter.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/RestMessageAdapter.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RestMessageAdapter": () => (/* binding */ RestMessageAdapter),
/* harmony export */   "RestRequestType": () => (/* binding */ RestRequestType)
/* harmony export */ });
/* harmony import */ var bent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bent */ "./node_modules/bent/src/browser.js");
/* harmony import */ var bent__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bent__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


var RestRequestType;
(function (RestRequestType) {
    RestRequestType["Get"] = "GET";
    RestRequestType["Post"] = "POST";
    RestRequestType["Delete"] = "DELETE";
    RestRequestType["File"] = "file";
})(RestRequestType || (RestRequestType = {}));
// accept rest operations via request method and return abstracted objects from server response
class RestMessageAdapter {
    constructor(configParams) {
        if (!configParams) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_1__.ArgumentNullError("configParams");
        }
        this.privHeaders = configParams.headers;
        this.privIgnoreCache = configParams.ignoreCache;
    }
    static extractHeaderValue(headerKey, headers) {
        let headerValue = "";
        try {
            const arr = headers.trim().split(/[\r\n]+/);
            const headerMap = {};
            arr.forEach((line) => {
                const parts = line.split(": ");
                const header = parts.shift().toLowerCase();
                const value = parts.join(": ");
                headerMap[header] = value;
            });
            headerValue = headerMap[headerKey.toLowerCase()];
        }
        catch (e) {
            // ignore the error
        }
        return headerValue;
    }
    set options(configParams) {
        this.privHeaders = configParams.headers;
        this.privIgnoreCache = configParams.ignoreCache;
    }
    setHeaders(key, value) {
        this.privHeaders[key] = value;
    }
    request(method, uri, queryParams = {}, body = null) {
        const responseReceivedDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.Deferred();
        const requestCommand = method === RestRequestType.File ? "POST" : method;
        const handleRestResponse = (data, j = {}) => {
            const d = data;
            return {
                data: JSON.stringify(j),
                headers: JSON.stringify(data.headers),
                json: j,
                ok: data.statusCode >= 200 && data.statusCode < 300,
                status: data.statusCode,
                statusText: j.error ? j.error.message : d.statusText ? d.statusText : d.statusMessage
            };
        };
        const send = (postData) => {
            const sendRequest = bent__WEBPACK_IMPORTED_MODULE_0___default()(uri, requestCommand, this.privHeaders, 200, 201, 202, 204, 400, 401, 402, 403, 404);
            const params = this.queryParams(queryParams) === "" ? "" : `?${this.queryParams(queryParams)}`;
            sendRequest(params, postData).then((data) => __awaiter(this, void 0, void 0, function* () {
                if (method === RestRequestType.Delete || data.statusCode === 204) {
                    // No JSON from Delete and reset (204) operations
                    responseReceivedDeferral.resolve(handleRestResponse(data));
                }
                else {
                    try {
                        const j = yield data.json();
                        responseReceivedDeferral.resolve(handleRestResponse(data, j));
                    }
                    catch (_a) {
                        responseReceivedDeferral.resolve(handleRestResponse(data));
                    }
                }
            })).catch((error) => {
                responseReceivedDeferral.reject(error);
            });
        };
        if (this.privIgnoreCache) {
            this.privHeaders["Cache-Control"] = "no-cache";
        }
        if (method === RestRequestType.Post && body) {
            this.privHeaders["content-type"] = "application/json";
            this.privHeaders["Content-Type"] = "application/json";
        }
        send(body);
        return responseReceivedDeferral.promise;
    }
    queryParams(params = {}) {
        return Object.keys(params)
            .map((k) => encodeURIComponent(k) + "=" + encodeURIComponent(params[k]))
            .join("&");
    }
}

//# sourceMappingURL=RestMessageAdapter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketConnection.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketConnection.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WebsocketConnection": () => (/* binding */ WebsocketConnection)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _WebsocketMessageAdapter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WebsocketMessageAdapter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketMessageAdapter.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


class WebsocketConnection {
    constructor(uri, queryParameters, headers, messageFormatter, proxyInfo, enableCompression = false, connectionId) {
        this.privIsDisposed = false;
        if (!uri) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__.ArgumentNullError("uri");
        }
        if (!messageFormatter) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__.ArgumentNullError("messageFormatter");
        }
        this.privMessageFormatter = messageFormatter;
        let queryParams = "";
        let i = 0;
        if (queryParameters) {
            for (const paramName in queryParameters) {
                if (paramName) {
                    queryParams += ((i === 0) && (uri.indexOf("?") === -1)) ? "?" : "&";
                    const key = encodeURIComponent(paramName);
                    queryParams += key;
                    let val = queryParameters[paramName];
                    if (val) {
                        val = encodeURIComponent(val);
                        queryParams += `=${val}`;
                    }
                    i++;
                }
            }
        }
        if (headers) {
            for (const headerName in headers) {
                if (headerName) {
                    queryParams += ((i === 0) && (uri.indexOf("?") === -1)) ? "?" : "&";
                    const val = encodeURIComponent(headers[headerName]);
                    queryParams += `${headerName}=${val}`;
                    i++;
                }
            }
        }
        this.privUri = uri + queryParams;
        this.privId = connectionId ? connectionId : (0,_common_Exports__WEBPACK_IMPORTED_MODULE_1__.createNoDashGuid)();
        this.privConnectionMessageAdapter = new _WebsocketMessageAdapter__WEBPACK_IMPORTED_MODULE_2__.WebsocketMessageAdapter(this.privUri, this.id, this.privMessageFormatter, proxyInfo, headers, enableCompression);
    }
    dispose() {
        return __awaiter(this, void 0, void 0, function* () {
            this.privIsDisposed = true;
            if (this.privConnectionMessageAdapter) {
                yield this.privConnectionMessageAdapter.close();
            }
        });
    }
    isDisposed() {
        return this.privIsDisposed;
    }
    get id() {
        return this.privId;
    }
    get uri() {
        return this.privUri;
    }
    state() {
        return this.privConnectionMessageAdapter.state;
    }
    open() {
        return this.privConnectionMessageAdapter.open();
    }
    send(message) {
        return this.privConnectionMessageAdapter.send(message);
    }
    read() {
        return this.privConnectionMessageAdapter.read();
    }
    get events() {
        return this.privConnectionMessageAdapter.events;
    }
}

//# sourceMappingURL=WebsocketConnection.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketMessageAdapter.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketMessageAdapter.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WebsocketMessageAdapter": () => (/* binding */ WebsocketMessageAdapter)
/* harmony export */ });
/* harmony import */ var net__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! net */ "?a1bf");
/* harmony import */ var net__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(net__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var tls__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tls */ "?14d6");
/* harmony import */ var tls__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tls__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var agent_base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! agent-base */ "?6483");
/* harmony import */ var agent_base__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(agent_base__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var https_proxy_agent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! https-proxy-agent */ "?72ad");
/* harmony import */ var https_proxy_agent__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(https_proxy_agent__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var ws__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ws */ "?e42a");
/* harmony import */ var ws__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(ws__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _common_speech_HeaderNames__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common.speech/HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/EventSource.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IConnection.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Queue.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/BackgroundError.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionOpenResponse.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionEvents.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RawWebsocketMessage.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};







class WebsocketMessageAdapter {
    constructor(uri, connectionId, messageFormatter, proxyInfo, headers, enableCompression) {
        if (!uri) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_5__.ArgumentNullError("uri");
        }
        if (!messageFormatter) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_5__.ArgumentNullError("messageFormatter");
        }
        this.proxyInfo = proxyInfo;
        this.privConnectionEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_6__.EventSource();
        this.privConnectionId = connectionId;
        this.privMessageFormatter = messageFormatter;
        this.privConnectionState = _common_Exports__WEBPACK_IMPORTED_MODULE_7__.ConnectionState.None;
        this.privUri = uri;
        this.privHeaders = headers;
        this.privEnableCompression = enableCompression;
        // Add the connection ID to the headers
        this.privHeaders[_common_speech_HeaderNames__WEBPACK_IMPORTED_MODULE_8__.HeaderNames.ConnectionId] = this.privConnectionId;
        this.privLastErrorReceived = "";
    }
    get state() {
        return this.privConnectionState;
    }
    open() {
        if (this.privConnectionState === _common_Exports__WEBPACK_IMPORTED_MODULE_7__.ConnectionState.Disconnected) {
            return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);
        }
        if (this.privConnectionEstablishDeferral) {
            return this.privConnectionEstablishDeferral.promise;
        }
        this.privConnectionEstablishDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_9__.Deferred();
        this.privCertificateValidatedDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_9__.Deferred();
        this.privConnectionState = _common_Exports__WEBPACK_IMPORTED_MODULE_7__.ConnectionState.Connecting;
        try {
            if (typeof WebSocket !== "undefined" && !WebsocketMessageAdapter.forceNpmWebSocket) {
                // Browser handles cert checks.
                this.privCertificateValidatedDeferral.resolve();
                this.privWebsocketClient = new WebSocket(this.privUri);
            }
            else {
                const options = { headers: this.privHeaders, perMessageDeflate: this.privEnableCompression };
                // The ocsp library will handle validation for us and fail the connection if needed.
                this.privCertificateValidatedDeferral.resolve();
                options.agent = this.getAgent();
                // Workaround for https://github.com/microsoft/cognitive-services-speech-sdk-js/issues/465
                // Which is root caused by https://github.com/TooTallNate/node-agent-base/issues/61
                const uri = new URL(this.privUri);
                let protocol = uri.protocol;
                if ((protocol === null || protocol === void 0 ? void 0 : protocol.toLocaleLowerCase()) === "wss:") {
                    protocol = "https:";
                }
                else if ((protocol === null || protocol === void 0 ? void 0 : protocol.toLocaleLowerCase()) === "ws:") {
                    protocol = "http:";
                }
                // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
                options.agent.protocol = protocol;
                this.privWebsocketClient = new (ws__WEBPACK_IMPORTED_MODULE_4___default())(this.privUri, options);
            }
            this.privWebsocketClient.binaryType = "arraybuffer";
            this.privReceivingMessageQueue = new _common_Exports__WEBPACK_IMPORTED_MODULE_10__.Queue();
            this.privDisconnectDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_9__.Deferred();
            this.privSendMessageQueue = new _common_Exports__WEBPACK_IMPORTED_MODULE_10__.Queue();
            this.processSendQueue().catch((reason) => {
                _common_Exports__WEBPACK_IMPORTED_MODULE_11__.Events.instance.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_12__.BackgroundEvent(reason));
            });
        }
        catch (error) {
            this.privConnectionEstablishDeferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_13__.ConnectionOpenResponse(500, error));
            return this.privConnectionEstablishDeferral.promise;
        }
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_14__.ConnectionStartEvent(this.privConnectionId, this.privUri));
        this.privWebsocketClient.onopen = () => {
            this.privCertificateValidatedDeferral.promise.then(() => {
                this.privConnectionState = _common_Exports__WEBPACK_IMPORTED_MODULE_7__.ConnectionState.Connected;
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_14__.ConnectionEstablishedEvent(this.privConnectionId));
                this.privConnectionEstablishDeferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_13__.ConnectionOpenResponse(200, ""));
            }, (error) => {
                this.privConnectionEstablishDeferral.reject(error);
            });
        };
        this.privWebsocketClient.onerror = (e) => {
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_14__.ConnectionErrorEvent(this.privConnectionId, e.message, e.type));
            this.privLastErrorReceived = e.message;
        };
        this.privWebsocketClient.onclose = (e) => {
            if (this.privConnectionState === _common_Exports__WEBPACK_IMPORTED_MODULE_7__.ConnectionState.Connecting) {
                this.privConnectionState = _common_Exports__WEBPACK_IMPORTED_MODULE_7__.ConnectionState.Disconnected;
                // this.onEvent(new ConnectionEstablishErrorEvent(this.connectionId, e.code, e.reason));
                this.privConnectionEstablishDeferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_13__.ConnectionOpenResponse(e.code, e.reason + " " + this.privLastErrorReceived));
            }
            else {
                this.privConnectionState = _common_Exports__WEBPACK_IMPORTED_MODULE_7__.ConnectionState.Disconnected;
                this.privWebsocketClient = null;
                this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_14__.ConnectionClosedEvent(this.privConnectionId, e.code, e.reason));
            }
            this.onClose(e.code, e.reason).catch((reason) => {
                _common_Exports__WEBPACK_IMPORTED_MODULE_11__.Events.instance.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_12__.BackgroundEvent(reason));
            });
        };
        this.privWebsocketClient.onmessage = (e) => {
            const networkReceivedTime = new Date().toISOString();
            if (this.privConnectionState === _common_Exports__WEBPACK_IMPORTED_MODULE_7__.ConnectionState.Connected) {
                const deferred = new _common_Exports__WEBPACK_IMPORTED_MODULE_9__.Deferred();
                // let id = ++this.idCounter;
                this.privReceivingMessageQueue.enqueueFromPromise(deferred.promise);
                if (e.data instanceof ArrayBuffer) {
                    const rawMessage = new _common_Exports__WEBPACK_IMPORTED_MODULE_15__.RawWebsocketMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_16__.MessageType.Binary, e.data);
                    this.privMessageFormatter
                        .toConnectionMessage(rawMessage)
                        .then((connectionMessage) => {
                        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_14__.ConnectionMessageReceivedEvent(this.privConnectionId, networkReceivedTime, connectionMessage));
                        deferred.resolve(connectionMessage);
                    }, (error) => {
                        // TODO: Events for these ?
                        deferred.reject(`Invalid binary message format. Error: ${error}`);
                    });
                }
                else {
                    const rawMessage = new _common_Exports__WEBPACK_IMPORTED_MODULE_15__.RawWebsocketMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_16__.MessageType.Text, e.data);
                    this.privMessageFormatter
                        .toConnectionMessage(rawMessage)
                        .then((connectionMessage) => {
                        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_14__.ConnectionMessageReceivedEvent(this.privConnectionId, networkReceivedTime, connectionMessage));
                        deferred.resolve(connectionMessage);
                    }, (error) => {
                        // TODO: Events for these ?
                        deferred.reject(`Invalid text message format. Error: ${error}`);
                    });
                }
            }
        };
        return this.privConnectionEstablishDeferral.promise;
    }
    send(message) {
        if (this.privConnectionState !== _common_Exports__WEBPACK_IMPORTED_MODULE_7__.ConnectionState.Connected) {
            return Promise.reject(`Cannot send on connection that is in ${_common_Exports__WEBPACK_IMPORTED_MODULE_7__.ConnectionState[this.privConnectionState]} state`);
        }
        const messageSendStatusDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_9__.Deferred();
        const messageSendDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_9__.Deferred();
        this.privSendMessageQueue.enqueueFromPromise(messageSendDeferral.promise);
        this.privMessageFormatter
            .fromConnectionMessage(message)
            .then((rawMessage) => {
            messageSendDeferral.resolve({
                Message: message,
                RawWebsocketMessage: rawMessage,
                sendStatusDeferral: messageSendStatusDeferral,
            });
        }, (error) => {
            messageSendDeferral.reject(`Error formatting the message. ${error}`);
        });
        return messageSendStatusDeferral.promise;
    }
    read() {
        if (this.privConnectionState !== _common_Exports__WEBPACK_IMPORTED_MODULE_7__.ConnectionState.Connected) {
            return Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`);
        }
        return this.privReceivingMessageQueue.dequeue();
    }
    close(reason) {
        if (this.privWebsocketClient) {
            if (this.privConnectionState !== _common_Exports__WEBPACK_IMPORTED_MODULE_7__.ConnectionState.Disconnected) {
                this.privWebsocketClient.close(1000, reason ? reason : "Normal closure by client");
            }
        }
        else {
            return Promise.resolve();
        }
        return this.privDisconnectDeferral.promise;
    }
    get events() {
        return this.privConnectionEvents;
    }
    sendRawMessage(sendItem) {
        try {
            // indicates we are draining the queue and it came with no message;
            if (!sendItem) {
                return Promise.resolve();
            }
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_14__.ConnectionMessageSentEvent(this.privConnectionId, new Date().toISOString(), sendItem.Message));
            // add a check for the ws readystate in order to stop the red console error 'WebSocket is already in CLOSING or CLOSED state' appearing
            if (this.isWebsocketOpen) {
                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
                this.privWebsocketClient.send(sendItem.RawWebsocketMessage.payload);
            }
            else {
                return Promise.reject("websocket send error: Websocket not ready " + this.privConnectionId + " " + sendItem.Message.id + " " + new Error().stack);
            }
            return Promise.resolve();
        }
        catch (e) {
            return Promise.reject(`websocket send error: ${e}`);
        }
    }
    onClose(code, reason) {
        return __awaiter(this, void 0, void 0, function* () {
            const closeReason = `Connection closed. ${code}: ${reason}`;
            this.privConnectionState = _common_Exports__WEBPACK_IMPORTED_MODULE_7__.ConnectionState.Disconnected;
            this.privDisconnectDeferral.resolve();
            yield this.privReceivingMessageQueue.drainAndDispose(() => {
                // TODO: Events for these ?
                // Logger.instance.onEvent(new LoggingEvent(LogType.Warning, null, `Failed to process received message. Reason: ${closeReason}, Message: ${JSON.stringify(pendingReceiveItem)}`));
            }, closeReason);
            yield this.privSendMessageQueue.drainAndDispose((pendingSendItem) => {
                pendingSendItem.sendStatusDeferral.reject(closeReason);
            }, closeReason);
        });
    }
    processSendQueue() {
        return __awaiter(this, void 0, void 0, function* () {
            while (true) {
                const itemToSend = this.privSendMessageQueue.dequeue();
                const sendItem = yield itemToSend;
                // indicates we are draining the queue and it came with no message;
                if (!sendItem) {
                    return;
                }
                try {
                    yield this.sendRawMessage(sendItem);
                    sendItem.sendStatusDeferral.resolve();
                }
                catch (sendError) {
                    sendItem.sendStatusDeferral.reject(sendError);
                }
            }
        });
    }
    onEvent(event) {
        this.privConnectionEvents.onEvent(event);
        _common_Exports__WEBPACK_IMPORTED_MODULE_11__.Events.instance.onEvent(event);
    }
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    getAgent() {
        // eslint-disable-next-line @typescript-eslint/unbound-method
        const agent = new (agent_base__WEBPACK_IMPORTED_MODULE_2___default().Agent)(this.createConnection);
        if (this.proxyInfo !== undefined &&
            this.proxyInfo.HostName !== undefined &&
            this.proxyInfo.Port > 0) {
            agent.proxyInfo = this.proxyInfo;
        }
        return agent;
    }
    static GetProxyAgent(proxyInfo) {
        const httpProxyOptions = {
            host: proxyInfo.HostName,
            port: proxyInfo.Port,
        };
        if (!!proxyInfo.UserName) {
            httpProxyOptions.headers = {
                "Proxy-Authentication": "Basic " + new Buffer(`${proxyInfo.UserName}:${(proxyInfo.Password === undefined) ? "" : proxyInfo.Password}`).toString("base64"),
            };
        }
        else {
            httpProxyOptions.headers = {};
        }
        httpProxyOptions.headers.requestOCSP = "true";
        const httpProxyAgent = new (https_proxy_agent__WEBPACK_IMPORTED_MODULE_3___default())(httpProxyOptions);
        return httpProxyAgent;
    }
    createConnection(request, options) {
        let socketPromise;
        options = Object.assign(Object.assign({}, options), {
            requestOCSP: true,
            servername: options.host
        });
        if (!!this.proxyInfo) {
            const httpProxyAgent = WebsocketMessageAdapter.GetProxyAgent(this.proxyInfo);
            const baseAgent = httpProxyAgent;
            socketPromise = new Promise((resolve, reject) => {
                baseAgent.callback(request, options, (error, socket) => {
                    if (!!error) {
                        reject(error);
                    }
                    else {
                        resolve(socket);
                    }
                });
            });
        }
        else {
            if (!!options.secureEndpoint) {
                socketPromise = Promise.resolve(tls__WEBPACK_IMPORTED_MODULE_1__.connect(options));
            }
            else {
                socketPromise = Promise.resolve(net__WEBPACK_IMPORTED_MODULE_0__.connect(options));
            }
        }
        return socketPromise;
    }
    get isWebsocketOpen() {
        return this.privWebsocketClient && this.privWebsocketClient.readyState === this.privWebsocketClient.OPEN;
    }
}
WebsocketMessageAdapter.forceNpmWebSocket = false;

//# sourceMappingURL=WebsocketMessageAdapter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AddedLmIntent.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AddedLmIntent.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AddedLmIntent": () => (/* binding */ AddedLmIntent)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * @class AddedLmIntent
 */
// eslint-disable-next-line max-classes-per-file
class AddedLmIntent {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param modelImpl - The model.
     * @param intentName - The intent name.
     */
    constructor(modelImpl, intentName) {
        this.modelImpl = modelImpl;
        this.intentName = intentName;
    }
}

//# sourceMappingURL=AddedLmIntent.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AgentConfig.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AgentConfig.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AgentConfig": () => (/* binding */ AgentConfig)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Represents the JSON used in the agent.config message sent to the speech service.
 */
class AgentConfig {
    toJsonString() {
        return JSON.stringify(this.iPrivConfig);
    }
    get() {
        return this.iPrivConfig;
    }
    /**
     * Setter for the agent.config object.
     * @param value a JSON serializable object.
     */
    set(value) {
        this.iPrivConfig = value;
    }
}

//# sourceMappingURL=AgentConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveSubscriptionKeyAuthentication.js":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveSubscriptionKeyAuthentication.js ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CognitiveSubscriptionKeyAuthentication": () => (/* binding */ CognitiveSubscriptionKeyAuthentication)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
/* harmony import */ var _IAuthentication__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./IAuthentication */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IAuthentication.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



/**
 * @class
 */
class CognitiveSubscriptionKeyAuthentication {
    /**
     * Creates and initializes an instance of the CognitiveSubscriptionKeyAuthentication class.
     * @constructor
     * @param {string} subscriptionKey - The subscription key
     */
    constructor(subscriptionKey) {
        if (!subscriptionKey) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__.ArgumentNullError("subscriptionKey");
        }
        this.privAuthInfo = new _IAuthentication__WEBPACK_IMPORTED_MODULE_1__.AuthInfo(_HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.AuthKey, subscriptionKey);
    }
    /**
     * Fetches the subscription key.
     * @member
     * @function
     * @public
     * @param {string} authFetchEventId - The id to fetch.
     */
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    fetch(authFetchEventId) {
        return Promise.resolve(this.privAuthInfo);
    }
    /**
     * Fetches the subscription key.
     * @member
     * @function
     * @public
     * @param {string} authFetchEventId - The id to fetch.
     */
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    fetchOnExpiry(authFetchEventId) {
        return Promise.resolve(this.privAuthInfo);
    }
}

//# sourceMappingURL=CognitiveSubscriptionKeyAuthentication.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveTokenAuthentication.js":
/*!******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveTokenAuthentication.js ***!
  \******************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CognitiveTokenAuthentication": () => (/* binding */ CognitiveTokenAuthentication)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _IAuthentication__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./IAuthentication */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IAuthentication.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



class CognitiveTokenAuthentication {
    constructor(fetchCallback, fetchOnExpiryCallback) {
        if (!fetchCallback) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__.ArgumentNullError("fetchCallback");
        }
        if (!fetchOnExpiryCallback) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__.ArgumentNullError("fetchOnExpiryCallback");
        }
        this.privFetchCallback = fetchCallback;
        this.privFetchOnExpiryCallback = fetchOnExpiryCallback;
    }
    fetch(authFetchEventId) {
        return this.privFetchCallback(authFetchEventId).then((token) => new _IAuthentication__WEBPACK_IMPORTED_MODULE_1__.AuthInfo(_HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.Authorization, token === undefined ? undefined : CognitiveTokenAuthentication.privTokenPrefix + token));
    }
    fetchOnExpiry(authFetchEventId) {
        return this.privFetchOnExpiryCallback(authFetchEventId).then((token) => new _IAuthentication__WEBPACK_IMPORTED_MODULE_1__.AuthInfo(_HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.Authorization, token === undefined ? undefined : CognitiveTokenAuthentication.privTokenPrefix + token));
    }
}
CognitiveTokenAuthentication.privTokenPrefix = "bearer ";

//# sourceMappingURL=CognitiveTokenAuthentication.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConnectionFactoryBase": () => (/* binding */ ConnectionFactoryBase)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _QueryParameterNames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./QueryParameterNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



class ConnectionFactoryBase {
    static getHostSuffix(region) {
        if (!!region) {
            if (region.toLowerCase().startsWith("china")) {
                return ".azure.cn";
            }
            if (region.toLowerCase().startsWith("usgov")) {
                return ".azure.us";
            }
        }
        return ".microsoft.com";
    }
    setCommonUrlParams(config, queryParams, endpoint) {
        const propertyIdToParameterMap = new Map([
            [_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.Speech_SegmentationSilenceTimeoutMs, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_1__.QueryParameterNames.SegmentationSilenceTimeoutMs],
            [_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_EnableAudioLogging, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_1__.QueryParameterNames.EnableAudioLogging],
            [_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_1__.QueryParameterNames.EndSilenceTimeoutMs],
            [_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_1__.QueryParameterNames.InitialSilenceTimeoutMs],
            [_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceResponse_PostProcessingOption, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_1__.QueryParameterNames.Postprocessing],
            [_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceResponse_ProfanityOption, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_1__.QueryParameterNames.Profanity],
            [_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_1__.QueryParameterNames.EnableWordLevelTimestamps],
            [_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceResponse_StablePartialResultThreshold, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_1__.QueryParameterNames.StableIntermediateThreshold],
        ]);
        propertyIdToParameterMap.forEach((parameterName, propertyId) => {
            this.setUrlParameter(propertyId, parameterName, config, queryParams, endpoint);
        });
        const serviceProperties = JSON.parse(config.parameters.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_2__.ServicePropertiesPropertyName, "{}"));
        Object.keys(serviceProperties).forEach((value) => {
            queryParams[value] = serviceProperties[value];
        });
    }
    setUrlParameter(propId, parameterName, config, queryParams, endpoint) {
        const value = config.parameters.getProperty(propId, undefined);
        // FIXME: The .search() check will incorrectly match parameter name anywhere in the string
        //        including e.g. the path portion, or even as a substring of other query parameters
        if (value && (!endpoint || endpoint.search(parameterName) === -1)) {
            queryParams[parameterName] = value.toLocaleLowerCase();
        }
    }
}

//# sourceMappingURL=ConnectionFactoryBase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConversationServiceRecognizer.js":
/*!*******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConversationServiceRecognizer.js ***!
  \*******************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationServiceRecognizer": () => (/* binding */ ConversationServiceRecognizer)
/* harmony export */ });
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/OutputFormat.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionResult.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceRecognizerBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/EnumTranslation.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/DetailedSpeechPhrase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechHypothesis.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


class ConversationServiceRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_0__.ServiceRecognizerBase {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, recognizer) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, recognizer);
        this.handleSpeechPhraseMessage = (textBody) => __awaiter(this, void 0, void 0, function* () { return this.handleSpeechPhrase(textBody); });
        this.handleSpeechHypothesisMessage = (textBody) => this.handleSpeechHypothesis(textBody);
    }
    processTypeSpecificMessages(connectionMessage) {
        void connectionMessage;
        return;
    }
    handleRecognizedCallback(result, offset, sessionId) {
        void result;
        void offset;
        void sessionId;
        return;
    }
    handleRecognizingCallback(result, duration, sessionId) {
        void result;
        void duration;
        void sessionId;
        return;
    }
    processSpeechMessages(connectionMessage) {
        return __awaiter(this, void 0, void 0, function* () {
            let processed = false;
            switch (connectionMessage.path.toLowerCase()) {
                case "speech.hypothesis":
                case "speech.fragment":
                    if (!!this.handleSpeechHypothesisMessage) {
                        this.handleSpeechHypothesisMessage(connectionMessage.textBody);
                    }
                    processed = true;
                    break;
                case "speech.phrase":
                    if (!!this.handleSpeechPhraseMessage) {
                        yield this.handleSpeechPhraseMessage(connectionMessage.textBody);
                    }
                    processed = true;
                    break;
                default:
                    break;
            }
            return processed;
        });
    }
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error) {
        // Implementing to allow inheritance
        void sessionId;
        void requestId;
        void cancellationReason;
        void errorCode;
        void error;
    }
    handleSpeechPhrase(textBody) {
        return __awaiter(this, void 0, void 0, function* () {
            const simple = _Exports__WEBPACK_IMPORTED_MODULE_1__.SimpleSpeechPhrase.fromJSON(textBody);
            const resultReason = _Exports__WEBPACK_IMPORTED_MODULE_2__.EnumTranslation.implTranslateRecognitionResult(simple.RecognitionStatus);
            let result;
            const resultProps = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyCollection();
            resultProps.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.SpeechServiceResponse_JsonResult, textBody);
            const simpleOffset = simple.Offset + this.privRequestSession.currentTurnAudioOffset;
            let offset = simpleOffset;
            this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset + simple.Offset + simple.Duration);
            if (_sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.Canceled === resultReason) {
                const cancelReason = _Exports__WEBPACK_IMPORTED_MODULE_2__.EnumTranslation.implTranslateCancelResult(simple.RecognitionStatus);
                const cancellationErrorCode = _Exports__WEBPACK_IMPORTED_MODULE_2__.EnumTranslation.implTranslateCancelErrorCode(simple.RecognitionStatus);
                yield this.cancelRecognitionLocal(cancelReason, cancellationErrorCode, _Exports__WEBPACK_IMPORTED_MODULE_2__.EnumTranslation.implTranslateErrorDetails(cancellationErrorCode));
            }
            else {
                if (!(this.privRequestSession.isSpeechEnded && resultReason === _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.NoMatch && simple.RecognitionStatus !== _Exports__WEBPACK_IMPORTED_MODULE_6__.RecognitionStatus.InitialSilenceTimeout)) {
                    if (this.privRecognizerConfig.parameters.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_7__.OutputFormatPropertyName) === _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.OutputFormat[_sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.OutputFormat.Simple]) {
                        result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.SpeechRecognitionResult(this.privRequestSession.requestId, resultReason, simple.DisplayText, simple.Duration, simpleOffset, simple.Language, simple.LanguageDetectionConfidence, simple.SpeakerId, undefined, textBody, resultProps);
                    }
                    else {
                        const detailed = _Exports__WEBPACK_IMPORTED_MODULE_10__.DetailedSpeechPhrase.fromJSON(textBody);
                        const totalOffset = detailed.Offset + this.privRequestSession.currentTurnAudioOffset;
                        const offsetCorrectedJson = detailed.getJsonWithCorrectedOffsets(totalOffset);
                        result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.SpeechRecognitionResult(this.privRequestSession.requestId, resultReason, detailed.Text, detailed.Duration, totalOffset, detailed.Language, detailed.LanguageDetectionConfidence, detailed.SpeakerId, undefined, offsetCorrectedJson, resultProps);
                        offset = result.offset;
                    }
                    this.handleRecognizedCallback(result, offset, this.privRequestSession.sessionId);
                }
            }
        });
    }
    handleSpeechHypothesis(textBody) {
        const hypothesis = _Exports__WEBPACK_IMPORTED_MODULE_11__.SpeechHypothesis.fromJSON(textBody);
        const offset = hypothesis.Offset + this.privRequestSession.currentTurnAudioOffset;
        const resultProps = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyCollection();
        resultProps.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.SpeechServiceResponse_JsonResult, textBody);
        const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.SpeechRecognitionResult(this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.RecognizingSpeech, hypothesis.Text, hypothesis.Duration, offset, hypothesis.Language, hypothesis.LanguageDetectionConfidence, hypothesis.SpeakerId, undefined, textBody, resultProps);
        this.privRequestSession.onHypothesis(offset);
        this.handleRecognizingCallback(result, hypothesis.Duration, this.privRequestSession.sessionId);
    }
}

//# sourceMappingURL=ConversationServiceRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogConnectorFactory.js":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogConnectorFactory.js ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DialogConnectionFactory": () => (/* binding */ DialogConnectionFactory)
/* harmony export */ });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketConnection.js");
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ProxyInfo.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/OutputFormat.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConfig.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/WebsocketMessageFormatter.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
/* harmony import */ var _QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./QueryParameterNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */







class DialogConnectionFactory extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__.ConnectionFactoryBase {
    create(config, authInfo, connectionId) {
        const applicationId = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.Conversation_ApplicationId, "");
        const dialogType = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.Conversation_DialogType);
        const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Region);
        const language = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_RecoLanguage, "en-US");
        const requestTurnStatus = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.Conversation_Request_Bot_Status_Messages, "true");
        const queryParams = {};
        queryParams[_HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.ConnectionId] = connectionId;
        queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__.QueryParameterNames.Format] = config.parameters.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.OutputFormatPropertyName, _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.OutputFormat[_sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.OutputFormat.Simple]).toLowerCase();
        queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__.QueryParameterNames.Language] = language;
        queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__.QueryParameterNames.RequestBotStatusMessages] = requestTurnStatus;
        if (applicationId) {
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__.QueryParameterNames.BotId] = applicationId;
            if (dialogType === _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.DialogServiceConfig.DialogTypes.CustomCommands) {
                queryParams[_HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.CustomCommandsAppId] = applicationId;
            }
        }
        const resourceInfix = dialogType === _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.DialogServiceConfig.DialogTypes.CustomCommands ? "commands/"
            : "";
        const version = dialogType === _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.DialogServiceConfig.DialogTypes.CustomCommands ? "v1"
            : dialogType === _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.DialogServiceConfig.DialogTypes.BotFramework ? "v3"
                : "v0";
        const headers = {};
        if (authInfo.token != null && authInfo.token !== "") {
            headers[authInfo.headerName] = authInfo.token;
        }
        // The URL used for connection is chosen in a priority order of specification:
        //  1. If a custom endpoint is provided, that URL is used verbatim.
        //  2. If a custom host is provided (e.g. "wss://my.custom.endpoint.com:1123"), a URL is constructed from it.
        //  3. If no custom connection details are provided, a URL is constructed from default values.
        let endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Endpoint, "");
        if (!endpoint) {
            const hostSuffix = _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__.ConnectionFactoryBase.getHostSuffix(region);
            const host = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Host, `wss://${region}.${DialogConnectionFactory.BaseUrl}${hostSuffix}`);
            const standardizedHost = host.endsWith("/") ? host : host + "/";
            endpoint = `${standardizedHost}${resourceInfix}${DialogConnectionFactory.ApiKey}/${version}`;
        }
        this.setCommonUrlParams(config, queryParams, endpoint);
        const enableCompression = config.parameters.getProperty("SPEECH-EnableWebsocketCompression", "false") === "true";
        return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_7__.WebsocketConnection(endpoint, queryParams, headers, new _Exports__WEBPACK_IMPORTED_MODULE_8__.WebsocketMessageFormatter(), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_9__.ProxyInfo.fromRecognizerConfig(config), enableCompression, connectionId);
    }
}
DialogConnectionFactory.ApiKey = "api";
DialogConnectionFactory.BaseUrl = "convai.speech";

//# sourceMappingURL=DialogConnectorFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceAdapter.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceAdapter.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DialogServiceAdapter": () => (/* binding */ DialogServiceAdapter)
/* harmony export */ });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ReplayableAudioNode.js");
/* harmony import */ var _common_DialogEvents__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../common/DialogEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/DialogEvents.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/EventSource.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionEvents.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/BackgroundError.js");
/* harmony import */ var _sdk_Audio_AudioOutputFormat__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../sdk/Audio/AudioOutputFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputFormat.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionResult.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionCanceledEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConfig.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ActivityReceivedEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TurnStatusReceivedEventArgs.js");
/* harmony import */ var _DialogServiceTurnStateManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./DialogServiceTurnStateManager */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceTurnStateManager.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceRecognizerBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechHypothesis.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechKeyword.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechDetected.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/EnumTranslation.js");
/* harmony import */ var _ServiceMessages_ActivityResponsePayload__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./ServiceMessages/ActivityResponsePayload */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/ActivityResponsePayload.js");
/* harmony import */ var _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SpeechConnectionMessage.Internal */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionMessage.Internal.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};









class DialogServiceAdapter extends _Exports__WEBPACK_IMPORTED_MODULE_0__.ServiceRecognizerBase {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, dialogServiceConnector) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, dialogServiceConnector);
        this.privEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__.EventSource();
        this.privDialogServiceConnector = dialogServiceConnector;
        this.receiveMessageOverride = () => this.receiveDialogMessageOverride();
        this.privTurnStateManager = new _DialogServiceTurnStateManager__WEBPACK_IMPORTED_MODULE_2__.DialogServiceTurnStateManager();
        this.recognizeOverride =
            (recoMode, successCallback, errorCallback) => this.listenOnce(recoMode, successCallback, errorCallback);
        this.postConnectImplOverride = (connection) => this.dialogConnectImpl(connection);
        this.configConnectionOverride = (connection) => this.configConnection(connection);
        this.disconnectOverride = () => this.privDisconnect();
        this.privDialogAudioSource = audioSource;
        this.agentConfigSent = false;
        this.privLastResult = null;
        this.connectionEvents.attach((connectionEvent) => {
            if (connectionEvent.name === "ConnectionClosedEvent") {
                this.terminateMessageLoop = true;
            }
        });
    }
    sendMessage(message) {
        return __awaiter(this, void 0, void 0, function* () {
            const interactionGuid = (0,_common_Exports__WEBPACK_IMPORTED_MODULE_3__.createGuid)();
            const requestId = (0,_common_Exports__WEBPACK_IMPORTED_MODULE_3__.createNoDashGuid)();
            const agentMessage = {
                context: {
                    interactionId: interactionGuid
                },
                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
                messagePayload: JSON.parse(message),
                version: 0.5
            };
            const agentMessageJson = JSON.stringify(agentMessage);
            const connection = yield this.fetchConnection();
            yield connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__.SpeechConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_5__.MessageType.Text, "agent", requestId, "application/json", agentMessageJson));
        });
    }
    privDisconnect() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.cancelRecognition(this.privRequestSession.sessionId, this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.CancellationReason.Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_7__.CancellationErrorCode.NoError, "Disconnecting");
            this.terminateMessageLoop = true;
            this.agentConfigSent = false;
            return;
        });
    }
    processTypeSpecificMessages(connectionMessage) {
        const resultProps = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.PropertyCollection();
        if (connectionMessage.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_5__.MessageType.Text) {
            resultProps.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.PropertyId.SpeechServiceResponse_JsonResult, connectionMessage.textBody);
        }
        let result;
        let processed;
        switch (connectionMessage.path.toLowerCase()) {
            case "speech.phrase":
                const speechPhrase = _Exports__WEBPACK_IMPORTED_MODULE_10__.SimpleSpeechPhrase.fromJSON(connectionMessage.textBody);
                this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset + speechPhrase.Offset + speechPhrase.Duration);
                if (speechPhrase.RecognitionStatus !== _Exports__WEBPACK_IMPORTED_MODULE_11__.RecognitionStatus.TooManyRequests && speechPhrase.RecognitionStatus !== _Exports__WEBPACK_IMPORTED_MODULE_11__.RecognitionStatus.Error) {
                    const args = this.fireEventForResult(speechPhrase, resultProps);
                    this.privLastResult = args.result;
                    if (!!this.privDialogServiceConnector.recognized) {
                        try {
                            this.privDialogServiceConnector.recognized(this.privDialogServiceConnector, args);
                            /* eslint-disable no-empty */
                        }
                        catch (error) {
                            // Not going to let errors in the event handler
                            // trip things up.
                        }
                    }
                }
                processed = true;
                break;
            case "speech.hypothesis":
                const hypothesis = _Exports__WEBPACK_IMPORTED_MODULE_12__.SpeechHypothesis.fromJSON(connectionMessage.textBody);
                const offset = hypothesis.Offset + this.privRequestSession.currentTurnAudioOffset;
                result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_13__.SpeechRecognitionResult(this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_14__.ResultReason.RecognizingSpeech, hypothesis.Text, hypothesis.Duration, offset, hypothesis.Language, hypothesis.LanguageDetectionConfidence, undefined, undefined, connectionMessage.textBody, resultProps);
                this.privRequestSession.onHypothesis(offset);
                const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_15__.SpeechRecognitionEventArgs(result, hypothesis.Duration, this.privRequestSession.sessionId);
                if (!!this.privDialogServiceConnector.recognizing) {
                    try {
                        this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector, ev);
                        /* eslint-disable no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                processed = true;
                break;
            case "speech.keyword":
                const keyword = _Exports__WEBPACK_IMPORTED_MODULE_16__.SpeechKeyword.fromJSON(connectionMessage.textBody);
                result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_13__.SpeechRecognitionResult(this.privRequestSession.requestId, keyword.Status === "Accepted" ? _sdk_Exports__WEBPACK_IMPORTED_MODULE_14__.ResultReason.RecognizedKeyword : _sdk_Exports__WEBPACK_IMPORTED_MODULE_14__.ResultReason.NoMatch, keyword.Text, keyword.Duration, keyword.Offset, undefined, undefined, undefined, undefined, connectionMessage.textBody, resultProps);
                if (keyword.Status !== "Accepted") {
                    this.privLastResult = result;
                }
                const event = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_15__.SpeechRecognitionEventArgs(result, result.duration, result.resultId);
                if (!!this.privDialogServiceConnector.recognized) {
                    try {
                        this.privDialogServiceConnector.recognized(this.privDialogServiceConnector, event);
                        /* eslint-disable no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                processed = true;
                break;
            case "audio":
                {
                    const audioRequestId = connectionMessage.requestId.toUpperCase();
                    const turn = this.privTurnStateManager.GetTurn(audioRequestId);
                    try {
                        // Empty binary message signals end of stream.
                        if (!connectionMessage.binaryBody) {
                            turn.endAudioStream();
                        }
                        else {
                            turn.audioStream.write(connectionMessage.binaryBody);
                        }
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                processed = true;
                break;
            case "response":
                {
                    this.handleResponseMessage(connectionMessage);
                }
                processed = true;
                break;
            default:
                break;
        }
        const defferal = new _common_Exports__WEBPACK_IMPORTED_MODULE_17__.Deferred();
        defferal.resolve(processed);
        return defferal.promise;
    }
    // Cancels recognition.
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error) {
        return __awaiter(this, void 0, void 0, function* () {
            this.terminateMessageLoop = true;
            if (!!this.privRequestSession.isRecognizing) {
                yield this.privRequestSession.onStopRecognizing();
            }
            if (!!this.privDialogServiceConnector.canceled) {
                const properties = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.PropertyCollection();
                properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_18__.CancellationErrorCodePropertyName, _sdk_Exports__WEBPACK_IMPORTED_MODULE_7__.CancellationErrorCode[errorCode]);
                const cancelEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_19__.SpeechRecognitionCanceledEventArgs(cancellationReason, error, errorCode, undefined, sessionId);
                try {
                    this.privDialogServiceConnector.canceled(this.privDialogServiceConnector, cancelEvent);
                    /* eslint-disable no-empty */
                }
                catch (_a) { }
                if (!!this.privSuccessCallback) {
                    const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_13__.SpeechRecognitionResult(undefined, // ResultId
                    _sdk_Exports__WEBPACK_IMPORTED_MODULE_14__.ResultReason.Canceled, undefined, // Text
                    undefined, // Duration
                    undefined, // Offset
                    undefined, // Language
                    undefined, // Language Detection Confidence
                    undefined, // Speaker Id
                    error, undefined, // Json
                    properties);
                    try {
                        this.privSuccessCallback(result);
                        this.privSuccessCallback = undefined;
                        /* eslint-disable no-empty */
                    }
                    catch (_b) { }
                }
            }
        });
    }
    listenOnce(recoMode, successCallback, errorCallback) {
        return __awaiter(this, void 0, void 0, function* () {
            this.privRecognizerConfig.recognitionMode = recoMode;
            this.privSuccessCallback = successCallback;
            this.privErrorCallback = errorCallback;
            this.privRequestSession.startNewRecognition();
            this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events);
            this.privRecognizerConfig.parameters.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.PropertyId.Speech_SessionId, this.privRequestSession.sessionId);
            // Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
            const conPromise = this.connectImpl();
            const preAudioPromise = this.sendPreAudioMessages();
            const node = yield this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId);
            const format = yield this.privDialogAudioSource.format;
            const deviceInfo = yield this.privDialogAudioSource.deviceInfo;
            const audioNode = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_20__.ReplayableAudioNode(node, format.avgBytesPerSec);
            yield this.privRequestSession.onAudioSourceAttachCompleted(audioNode, false);
            this.privRecognizerConfig.SpeechServiceConfig.Context.audio = { source: deviceInfo };
            try {
                yield conPromise;
                yield preAudioPromise;
            }
            catch (error) {
                yield this.cancelRecognition(this.privRequestSession.sessionId, this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.CancellationReason.Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_7__.CancellationErrorCode.ConnectionFailure, error);
                return Promise.resolve();
            }
            const sessionStartEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_21__.SessionEventArgs(this.privRequestSession.sessionId);
            if (!!this.privRecognizer.sessionStarted) {
                this.privRecognizer.sessionStarted(this.privRecognizer, sessionStartEventArgs);
            }
            const audioSendPromise = this.sendAudio(audioNode);
            // /* eslint-disable no-empty */
            audioSendPromise.then(() => { }, (error) => __awaiter(this, void 0, void 0, function* () {
                yield this.cancelRecognition(this.privRequestSession.sessionId, this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.CancellationReason.Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_7__.CancellationErrorCode.RuntimeError, error);
            }));
        });
    }
    // Establishes a websocket connection to the end point.
    dialogConnectImpl(connection) {
        this.privConnectionLoop = this.startMessageLoop();
        return connection;
    }
    receiveDialogMessageOverride() {
        // we won't rely on the cascading promises of the connection since we want to continually be available to receive messages
        const communicationCustodian = new _common_Exports__WEBPACK_IMPORTED_MODULE_17__.Deferred();
        const loop = () => __awaiter(this, void 0, void 0, function* () {
            try {
                const isDisposed = this.isDisposed();
                const terminateMessageLoop = (!this.isDisposed() && this.terminateMessageLoop);
                if (isDisposed || terminateMessageLoop) {
                    // We're done.
                    communicationCustodian.resolve(undefined);
                    return;
                }
                const connection = yield this.fetchConnection();
                const message = yield connection.read();
                if (!message) {
                    return loop();
                }
                const connectionMessage = _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__.SpeechConnectionMessage.fromConnectionMessage(message);
                switch (connectionMessage.path.toLowerCase()) {
                    case "turn.start":
                        {
                            const turnRequestId = connectionMessage.requestId.toUpperCase();
                            const audioSessionReqId = this.privRequestSession.requestId.toUpperCase();
                            // turn started by the service
                            if (turnRequestId !== audioSessionReqId) {
                                this.privTurnStateManager.StartTurn(turnRequestId);
                            }
                            else {
                                this.privRequestSession.onServiceTurnStartResponse();
                            }
                        }
                        break;
                    case "speech.startdetected":
                        const speechStartDetected = _Exports__WEBPACK_IMPORTED_MODULE_22__.SpeechDetected.fromJSON(connectionMessage.textBody);
                        const speechStartEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_23__.RecognitionEventArgs(speechStartDetected.Offset, this.privRequestSession.sessionId);
                        if (!!this.privRecognizer.speechStartDetected) {
                            this.privRecognizer.speechStartDetected(this.privRecognizer, speechStartEventArgs);
                        }
                        break;
                    case "speech.enddetected":
                        let json;
                        if (connectionMessage.textBody.length > 0) {
                            json = connectionMessage.textBody;
                        }
                        else {
                            // If the request was empty, the JSON returned is empty.
                            json = "{ Offset: 0 }";
                        }
                        const speechStopDetected = _Exports__WEBPACK_IMPORTED_MODULE_22__.SpeechDetected.fromJSON(json);
                        this.privRequestSession.onServiceRecognized(speechStopDetected.Offset + this.privRequestSession.currentTurnAudioOffset);
                        const speechStopEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_23__.RecognitionEventArgs(speechStopDetected.Offset + this.privRequestSession.currentTurnAudioOffset, this.privRequestSession.sessionId);
                        if (!!this.privRecognizer.speechEndDetected) {
                            this.privRecognizer.speechEndDetected(this.privRecognizer, speechStopEventArgs);
                        }
                        break;
                    case "turn.end":
                        {
                            const turnEndRequestId = connectionMessage.requestId.toUpperCase();
                            const audioSessionReqId = this.privRequestSession.requestId.toUpperCase();
                            // turn started by the service
                            if (turnEndRequestId !== audioSessionReqId) {
                                this.privTurnStateManager.CompleteTurn(turnEndRequestId);
                            }
                            else {
                                // Audio session turn
                                const sessionStopEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_21__.SessionEventArgs(this.privRequestSession.sessionId);
                                yield this.privRequestSession.onServiceTurnEndResponse(false);
                                if (!this.privRecognizerConfig.isContinuousRecognition || this.privRequestSession.isSpeechEnded || !this.privRequestSession.isRecognizing) {
                                    if (!!this.privRecognizer.sessionStopped) {
                                        this.privRecognizer.sessionStopped(this.privRecognizer, sessionStopEventArgs);
                                    }
                                }
                                // report result to promise.
                                if (!!this.privSuccessCallback && this.privLastResult) {
                                    try {
                                        this.privSuccessCallback(this.privLastResult);
                                        this.privLastResult = null;
                                    }
                                    catch (e) {
                                        if (!!this.privErrorCallback) {
                                            this.privErrorCallback(e);
                                        }
                                    }
                                    // Only invoke the call back once.
                                    // and if it's successful don't invoke the
                                    // error after that.
                                    this.privSuccessCallback = undefined;
                                    this.privErrorCallback = undefined;
                                }
                            }
                        }
                        break;
                    default:
                        try {
                            const processed = yield this.processTypeSpecificMessages(connectionMessage);
                            if (!processed) {
                                if (!!this.serviceEvents) {
                                    this.serviceEvents.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_24__.ServiceEvent(connectionMessage.path.toLowerCase(), connectionMessage.textBody));
                                }
                            }
                        }
                        catch (e) {
                            //
                        }
                }
                const ret = loop();
                return ret;
            }
            catch (error) {
                this.terminateMessageLoop = true;
                communicationCustodian.resolve();
            }
        });
        loop().catch((reason) => {
            _common_Exports__WEBPACK_IMPORTED_MODULE_25__.Events.instance.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_26__.BackgroundEvent(reason));
        });
        return communicationCustodian.promise;
    }
    startMessageLoop() {
        return __awaiter(this, void 0, void 0, function* () {
            this.terminateMessageLoop = false;
            try {
                yield this.receiveDialogMessageOverride();
            }
            catch (error) {
                yield this.cancelRecognition(this.privRequestSession.sessionId, this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.CancellationReason.Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_7__.CancellationErrorCode.RuntimeError, error);
            }
            return Promise.resolve();
        });
    }
    // Takes an established websocket connection to the endpoint and sends speech configuration information.
    configConnection(connection) {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.terminateMessageLoop) {
                this.terminateMessageLoop = false;
                return Promise.reject("Connection to service terminated.");
            }
            yield this.sendSpeechServiceConfig(connection, this.privRequestSession, this.privRecognizerConfig.SpeechServiceConfig.serialize());
            yield this.sendAgentConfig(connection);
            return connection;
        });
    }
    sendPreAudioMessages() {
        return __awaiter(this, void 0, void 0, function* () {
            const connection = yield this.fetchConnection();
            this.addKeywordContextData();
            yield this.sendSpeechContext(connection, true);
            yield this.sendAgentContext(connection);
            yield this.sendWaveHeader(connection);
        });
    }
    sendAgentConfig(connection) {
        if (this.agentConfig && !this.agentConfigSent) {
            if (this.privRecognizerConfig
                .parameters
                .getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.PropertyId.Conversation_DialogType) === _sdk_Exports__WEBPACK_IMPORTED_MODULE_27__.DialogServiceConfig.DialogTypes.CustomCommands) {
                const config = this.agentConfig.get();
                config.botInfo.commandsCulture = this.privRecognizerConfig.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.PropertyId.SpeechServiceConnection_RecoLanguage, "en-us");
                this.agentConfig.set(config);
            }
            this.onEvent(new _common_DialogEvents__WEBPACK_IMPORTED_MODULE_28__.SendingAgentContextMessageEvent(this.agentConfig));
            const agentConfigJson = this.agentConfig.toJsonString();
            // guard against sending this multiple times on one connection
            this.agentConfigSent = true;
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__.SpeechConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_5__.MessageType.Text, "agent.config", this.privRequestSession.requestId, "application/json", agentConfigJson));
        }
        return;
    }
    sendAgentContext(connection) {
        const guid = (0,_common_Exports__WEBPACK_IMPORTED_MODULE_3__.createGuid)();
        const speechActivityTemplate = this.privDialogServiceConnector.properties.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.PropertyId.Conversation_Speech_Activity_Template);
        const agentContext = {
            channelData: "",
            context: {
                interactionId: guid
            },
            messagePayload: typeof speechActivityTemplate === undefined ? undefined : speechActivityTemplate,
            version: 0.5
        };
        const agentContextJson = JSON.stringify(agentContext);
        return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_4__.SpeechConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_5__.MessageType.Text, "speech.agent.context", this.privRequestSession.requestId, "application/json", agentContextJson));
    }
    fireEventForResult(serviceResult, properties) {
        const resultReason = _Exports__WEBPACK_IMPORTED_MODULE_29__.EnumTranslation.implTranslateRecognitionResult(serviceResult.RecognitionStatus);
        const offset = serviceResult.Offset + this.privRequestSession.currentTurnAudioOffset;
        const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_13__.SpeechRecognitionResult(this.privRequestSession.requestId, resultReason, serviceResult.DisplayText, serviceResult.Duration, offset, serviceResult.Language, serviceResult.LanguageDetectionConfidence, undefined, undefined, JSON.stringify(serviceResult), properties);
        const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_15__.SpeechRecognitionEventArgs(result, offset, this.privRequestSession.sessionId);
        return ev;
    }
    handleResponseMessage(responseMessage) {
        // "response" messages can contain either "message" (activity) or "MessageStatus" data. Fire the appropriate
        // event according to the message type that's specified.
        const responsePayload = JSON.parse(responseMessage.textBody);
        switch (responsePayload.messageType.toLowerCase()) {
            case "message":
                const responseRequestId = responseMessage.requestId.toUpperCase();
                const activityPayload = _ServiceMessages_ActivityResponsePayload__WEBPACK_IMPORTED_MODULE_30__.ActivityPayloadResponse.fromJSON(responseMessage.textBody);
                const turn = this.privTurnStateManager.GetTurn(responseRequestId);
                // update the conversation Id
                if (activityPayload.conversationId) {
                    const updateAgentConfig = this.agentConfig.get();
                    updateAgentConfig.botInfo.conversationId = activityPayload.conversationId;
                    this.agentConfig.set(updateAgentConfig);
                }
                const pullAudioOutputStream = turn.processActivityPayload(activityPayload, _sdk_Audio_AudioOutputFormat__WEBPACK_IMPORTED_MODULE_31__.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.PropertyId.SpeechServiceConnection_SynthOutputFormat, undefined)));
                const activity = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_32__.ActivityReceivedEventArgs(activityPayload.messagePayload, pullAudioOutputStream);
                if (!!this.privDialogServiceConnector.activityReceived) {
                    try {
                        this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector, activity);
                        /* eslint-disable-next-line no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                break;
            case "messagestatus":
                if (!!this.privDialogServiceConnector.turnStatusReceived) {
                    try {
                        this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector, new _sdk_Exports__WEBPACK_IMPORTED_MODULE_33__.TurnStatusReceivedEventArgs(responseMessage.textBody));
                        /* eslint-disable-next-line no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                break;
            default:
                _common_Exports__WEBPACK_IMPORTED_MODULE_25__.Events.instance.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_26__.BackgroundEvent(`Unexpected response of type ${responsePayload.messageType}. Ignoring.`));
                break;
        }
    }
    onEvent(event) {
        this.privEvents.onEvent(event);
        _common_Exports__WEBPACK_IMPORTED_MODULE_25__.Events.instance.onEvent(event);
    }
    addKeywordContextData() {
        const keywordPropertyValue = this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");
        if (keywordPropertyValue === undefined) {
            return;
        }
        const keywordOffsetPropertyValue = this.privRecognizerConfig.parameters
            .getProperty("SPEECH-KeywordsToDetect-Offsets");
        const keywordDurationPropertyValue = this.privRecognizerConfig.parameters
            .getProperty("SPEECH-KeywordsToDetect-Durations");
        const keywords = keywordPropertyValue.split(";");
        const keywordOffsets = keywordOffsetPropertyValue === undefined ? [] : keywordOffsetPropertyValue.split(";");
        const keywordDurations = keywordDurationPropertyValue === undefined ? [] : keywordDurationPropertyValue.split(";");
        const keywordDefinitionArray = [];
        for (let i = 0; i < keywords.length; i++) {
            const definition = {};
            definition.text = keywords[i];
            if (i < keywordOffsets.length) {
                definition.offset = Number(keywordOffsets[i]);
            }
            if (i < keywordDurations.length) {
                definition.duration = Number(keywordDurations[i]);
            }
            keywordDefinitionArray.push(definition);
        }
        this.speechContext.setSection("invocationSource", "VoiceActivationWithKeyword");
        this.speechContext.setSection("keywordDetection", [{
                clientDetectedKeywords: keywordDefinitionArray,
                onReject: { action: "EndOfTurn" },
                type: "startTrigger"
            }]);
    }
}

//# sourceMappingURL=DialogServiceAdapter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceTurnState.js":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceTurnState.js ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DialogServiceTurnState": () => (/* binding */ DialogServiceTurnState)
/* harmony export */ });
/* harmony import */ var _sdk_Audio_AudioOutputFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sdk/Audio/AudioOutputFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputFormat.js");
/* harmony import */ var _sdk_Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Audio/AudioOutputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js");
/* harmony import */ var _ServiceMessages_ActivityResponsePayload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ServiceMessages/ActivityResponsePayload */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/ActivityResponsePayload.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



class DialogServiceTurnState {
    constructor(manager, requestId) {
        this.privRequestId = requestId;
        this.privIsCompleted = false;
        this.privAudioStream = null;
        this.privTurnManager = manager;
        this.resetTurnEndTimeout();
    }
    get audioStream() {
        // Called when is needed to stream.
        this.resetTurnEndTimeout();
        return this.privAudioStream;
    }
    processActivityPayload(payload, audioFormat) {
        if (payload.messageDataStreamType === _ServiceMessages_ActivityResponsePayload__WEBPACK_IMPORTED_MODULE_0__.MessageDataStreamType.TextToSpeechAudio) {
            this.privAudioStream = _sdk_Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_1__.AudioOutputStream.createPullStream();
            this.privAudioStream.format = (audioFormat !== undefined) ? audioFormat : _sdk_Audio_AudioOutputFormat__WEBPACK_IMPORTED_MODULE_2__.AudioOutputFormatImpl.getDefaultOutputFormat();
        }
        return this.privAudioStream;
    }
    endAudioStream() {
        if (this.privAudioStream !== null && !this.privAudioStream.isClosed) {
            this.privAudioStream.close();
        }
    }
    complete() {
        if (this.privTimeoutToken !== undefined) {
            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
            clearTimeout(this.privTimeoutToken);
        }
        this.endAudioStream();
    }
    resetTurnEndTimeout() {
        if (this.privTimeoutToken !== undefined) {
            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
            clearTimeout(this.privTimeoutToken);
        }
        this.privTimeoutToken = setTimeout(() => {
            this.privTurnManager.CompleteTurn(this.privRequestId);
            return;
        }, 2000);
    }
}

//# sourceMappingURL=DialogServiceTurnState.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceTurnStateManager.js":
/*!*******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceTurnStateManager.js ***!
  \*******************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DialogServiceTurnStateManager": () => (/* binding */ DialogServiceTurnStateManager)
/* harmony export */ });
/* harmony import */ var _common_Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _DialogServiceTurnState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DialogServiceTurnState */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceTurnState.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class DialogServiceTurnStateManager {
    constructor() {
        this.privTurnMap = new Map();
        return;
    }
    StartTurn(id) {
        if (this.privTurnMap.has(id)) {
            throw new _common_Error__WEBPACK_IMPORTED_MODULE_0__.InvalidOperationError("Service error: There is already a turn with id:" + id);
        }
        const turnState = new _DialogServiceTurnState__WEBPACK_IMPORTED_MODULE_1__.DialogServiceTurnState(this, id);
        this.privTurnMap.set(id, turnState);
        return this.privTurnMap.get(id);
    }
    GetTurn(id) {
        return this.privTurnMap.get(id);
    }
    CompleteTurn(id) {
        if (!this.privTurnMap.has(id)) {
            throw new _common_Error__WEBPACK_IMPORTED_MODULE_0__.InvalidOperationError("Service error: Received turn end for an unknown turn id:" + id);
        }
        const turnState = this.privTurnMap.get(id);
        turnState.complete();
        this.privTurnMap.delete(id);
        return turnState;
    }
}

//# sourceMappingURL=DialogServiceTurnStateManager.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DynamicGrammarBuilder.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DynamicGrammarBuilder.js ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DynamicGrammarBuilder": () => (/* binding */ DynamicGrammarBuilder)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Responsible for building the object to be sent to the speech service to support dynamic grammars.
 * @class DynamicGrammarBuilder
 */
class DynamicGrammarBuilder {
    // Adds one more reference phrases to the dynamic grammar to send.
    // All added phrases are generic phrases.
    addPhrase(phrase) {
        if (!this.privPhrases) {
            this.privPhrases = [];
        }
        if (phrase instanceof Array) {
            this.privPhrases = this.privPhrases.concat(phrase);
        }
        else {
            this.privPhrases.push(phrase);
        }
    }
    // Clears all phrases stored in the current object.
    clearPhrases() {
        this.privPhrases = undefined;
    }
    // Adds one or more reference grammars to the current grammar.
    addReferenceGrammar(grammar) {
        if (!this.privGrammars) {
            this.privGrammars = [];
        }
        if (grammar instanceof Array) {
            this.privGrammars = this.privGrammars.concat(grammar);
        }
        else {
            this.privGrammars.push(grammar);
        }
    }
    // clears all grammars stored on the recognizer.
    clearGrammars() {
        this.privGrammars = undefined;
    }
    // Generates an object that represents the dynamic grammar used by the Speech Service.
    // This is done by building an object with the correct layout based on the phrases and reference grammars added to this instance
    // of a DynamicGrammarBuilder
    generateGrammarObject() {
        if (this.privGrammars === undefined && this.privPhrases === undefined) {
            return undefined;
        }
        const retObj = {};
        retObj.ReferenceGrammars = this.privGrammars;
        if (undefined !== this.privPhrases && 0 !== this.privPhrases.length) {
            const retPhrases = [];
            this.privPhrases.forEach((value) => {
                retPhrases.push({
                    Text: value,
                });
            });
            retObj.Groups = [{ Type: "Generic", Items: retPhrases }];
        }
        return retObj;
    }
}

//# sourceMappingURL=DynamicGrammarBuilder.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DynamicGrammarInterfaces.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DynamicGrammarInterfaces.js ***!
  \**************************************************************************************************************************/
/***/ (() => {

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

//# sourceMappingURL=DynamicGrammarInterfaces.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/EnumTranslation.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/EnumTranslation.js ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EnumTranslation": () => (/* binding */ EnumTranslation)
/* harmony export */ });
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class EnumTranslation {
    static implTranslateRecognitionResult(recognitionStatus) {
        let reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.ResultReason.Canceled;
        switch (recognitionStatus) {
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.Success:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.ResultReason.RecognizedSpeech;
                break;
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.NoMatch:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.InitialSilenceTimeout:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.BabbleTimeout:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.EndOfDictation:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.ResultReason.NoMatch;
                break;
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.Error:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.BadRequest:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.Forbidden:
            default:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.ResultReason.Canceled;
                break;
        }
        return reason;
    }
    static implTranslateCancelResult(recognitionStatus) {
        let reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.CancellationReason.EndOfStream;
        switch (recognitionStatus) {
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.Success:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.EndOfDictation:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.NoMatch:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.CancellationReason.EndOfStream;
                break;
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.InitialSilenceTimeout:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.BabbleTimeout:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.Error:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.BadRequest:
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.Forbidden:
            default:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.CancellationReason.Error;
                break;
        }
        return reason;
    }
    static implTranslateCancelErrorCode(recognitionStatus) {
        let reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCode.NoError;
        switch (recognitionStatus) {
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.Error:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCode.ServiceError;
                break;
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.TooManyRequests:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCode.TooManyRequests;
                break;
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.BadRequest:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCode.BadRequestParameters;
                break;
            case _Exports__WEBPACK_IMPORTED_MODULE_1__.RecognitionStatus.Forbidden:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCode.Forbidden;
                break;
            default:
                reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCode.NoError;
                break;
        }
        return reason;
    }
    static implTranslateErrorDetails(cancellationErrorCode) {
        let errorDetails = "The speech service encountered an internal error and could not continue.";
        switch (cancellationErrorCode) {
            case _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCode.Forbidden:
                errorDetails = "The recognizer is using a free subscription that ran out of quota.";
                break;
            case _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCode.BadRequestParameters:
                errorDetails = "Invalid parameter or unsupported audio format in the request.";
                break;
            case _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCode.TooManyRequests:
                errorDetails = "The number of parallel requests exceeded the number of allowed concurrent transcriptions.";
                break;
            default:
                break;
        }
        return errorDetails;
    }
}

//# sourceMappingURL=EnumTranslation.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AddedLmIntent": () => (/* reexport safe */ _AddedLmIntent__WEBPACK_IMPORTED_MODULE_30__.AddedLmIntent),
/* harmony export */   "AgentConfig": () => (/* reexport safe */ _AgentConfig__WEBPACK_IMPORTED_MODULE_39__.AgentConfig),
/* harmony export */   "AuthInfo": () => (/* reexport safe */ _IAuthentication__WEBPACK_IMPORTED_MODULE_2__.AuthInfo),
/* harmony export */   "AutoDetectSourceLanguagesOpenRangeOptionName": () => (/* binding */ AutoDetectSourceLanguagesOpenRangeOptionName),
/* harmony export */   "CancellationErrorCodePropertyName": () => (/* binding */ CancellationErrorCodePropertyName),
/* harmony export */   "CognitiveSubscriptionKeyAuthentication": () => (/* reexport safe */ _CognitiveSubscriptionKeyAuthentication__WEBPACK_IMPORTED_MODULE_0__.CognitiveSubscriptionKeyAuthentication),
/* harmony export */   "CognitiveTokenAuthentication": () => (/* reexport safe */ _CognitiveTokenAuthentication__WEBPACK_IMPORTED_MODULE_1__.CognitiveTokenAuthentication),
/* harmony export */   "ConnectingToServiceEvent": () => (/* reexport safe */ _RecognitionEvents__WEBPACK_IMPORTED_MODULE_7__.ConnectingToServiceEvent),
/* harmony export */   "Context": () => (/* reexport safe */ _RecognizerConfig__WEBPACK_IMPORTED_MODULE_10__.Context),
/* harmony export */   "ConversationConnectionConfig": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_40__.ConversationConnectionConfig),
/* harmony export */   "ConversationManager": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_40__.ConversationManager),
/* harmony export */   "ConversationReceivedTranslationEventArgs": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_40__.ConversationReceivedTranslationEventArgs),
/* harmony export */   "ConversationRecognizerFactory": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_40__.ConversationRecognizerFactory),
/* harmony export */   "ConversationServiceRecognizer": () => (/* reexport safe */ _ConversationServiceRecognizer__WEBPACK_IMPORTED_MODULE_9__.ConversationServiceRecognizer),
/* harmony export */   "ConversationTranslatorCommandTypes": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_40__.ConversationTranslatorCommandTypes),
/* harmony export */   "ConversationTranslatorMessageTypes": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_40__.ConversationTranslatorMessageTypes),
/* harmony export */   "DetailedSpeechPhrase": () => (/* reexport safe */ _ServiceMessages_DetailedSpeechPhrase__WEBPACK_IMPORTED_MODULE_28__.DetailedSpeechPhrase),
/* harmony export */   "Device": () => (/* reexport safe */ _RecognizerConfig__WEBPACK_IMPORTED_MODULE_10__.Device),
/* harmony export */   "DialogServiceAdapter": () => (/* reexport safe */ _DialogServiceAdapter__WEBPACK_IMPORTED_MODULE_38__.DialogServiceAdapter),
/* harmony export */   "DynamicGrammarBuilder": () => (/* reexport safe */ _DynamicGrammarBuilder__WEBPACK_IMPORTED_MODULE_36__.DynamicGrammarBuilder),
/* harmony export */   "EnumTranslation": () => (/* reexport safe */ _EnumTranslation__WEBPACK_IMPORTED_MODULE_17__.EnumTranslation),
/* harmony export */   "ForceDictationPropertyName": () => (/* binding */ ForceDictationPropertyName),
/* harmony export */   "IntentConnectionFactory": () => (/* reexport safe */ _IntentConnectionFactory__WEBPACK_IMPORTED_MODULE_5__.IntentConnectionFactory),
/* harmony export */   "IntentResponse": () => (/* reexport safe */ _ServiceMessages_IntentResponse__WEBPACK_IMPORTED_MODULE_32__.IntentResponse),
/* harmony export */   "IntentServiceRecognizer": () => (/* reexport safe */ _IntentServiceRecognizer__WEBPACK_IMPORTED_MODULE_31__.IntentServiceRecognizer),
/* harmony export */   "InternalParticipants": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_40__.InternalParticipants),
/* harmony export */   "ListeningStartedEvent": () => (/* reexport safe */ _RecognitionEvents__WEBPACK_IMPORTED_MODULE_7__.ListeningStartedEvent),
/* harmony export */   "LockRoomEventArgs": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_40__.LockRoomEventArgs),
/* harmony export */   "MetadataType": () => (/* reexport safe */ _ServiceMessages_SynthesisAudioMetadata__WEBPACK_IMPORTED_MODULE_41__.MetadataType),
/* harmony export */   "MuteAllEventArgs": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_40__.MuteAllEventArgs),
/* harmony export */   "OS": () => (/* reexport safe */ _RecognizerConfig__WEBPACK_IMPORTED_MODULE_10__.OS),
/* harmony export */   "OutputFormatPropertyName": () => (/* binding */ OutputFormatPropertyName),
/* harmony export */   "ParticipantAttributeEventArgs": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_40__.ParticipantAttributeEventArgs),
/* harmony export */   "ParticipantEventArgs": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_40__.ParticipantEventArgs),
/* harmony export */   "ParticipantsListEventArgs": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_40__.ParticipantsListEventArgs),
/* harmony export */   "RecognitionCompletionStatus": () => (/* reexport safe */ _RecognitionEvents__WEBPACK_IMPORTED_MODULE_7__.RecognitionCompletionStatus),
/* harmony export */   "RecognitionEndedEvent": () => (/* reexport safe */ _RecognitionEvents__WEBPACK_IMPORTED_MODULE_7__.RecognitionEndedEvent),
/* harmony export */   "RecognitionMode": () => (/* reexport safe */ _RecognizerConfig__WEBPACK_IMPORTED_MODULE_10__.RecognitionMode),
/* harmony export */   "RecognitionStartedEvent": () => (/* reexport safe */ _RecognitionEvents__WEBPACK_IMPORTED_MODULE_7__.RecognitionStartedEvent),
/* harmony export */   "RecognitionStatus": () => (/* reexport safe */ _ServiceMessages_Enums__WEBPACK_IMPORTED_MODULE_18__.RecognitionStatus),
/* harmony export */   "RecognitionTriggeredEvent": () => (/* reexport safe */ _RecognitionEvents__WEBPACK_IMPORTED_MODULE_7__.RecognitionTriggeredEvent),
/* harmony export */   "RecognizerConfig": () => (/* reexport safe */ _RecognizerConfig__WEBPACK_IMPORTED_MODULE_10__.RecognizerConfig),
/* harmony export */   "RequestSession": () => (/* reexport safe */ _RequestSession__WEBPACK_IMPORTED_MODULE_34__.RequestSession),
/* harmony export */   "ServicePropertiesPropertyName": () => (/* binding */ ServicePropertiesPropertyName),
/* harmony export */   "ServiceRecognizerBase": () => (/* reexport safe */ _ServiceRecognizerBase__WEBPACK_IMPORTED_MODULE_8__.ServiceRecognizerBase),
/* harmony export */   "SimpleSpeechPhrase": () => (/* reexport safe */ _ServiceMessages_SimpleSpeechPhrase__WEBPACK_IMPORTED_MODULE_29__.SimpleSpeechPhrase),
/* harmony export */   "SpeakerRecognitionConfig": () => (/* reexport safe */ _SpeakerRecognitionConfig__WEBPACK_IMPORTED_MODULE_47__.SpeakerRecognitionConfig),
/* harmony export */   "SpeakerRecognitionConnectionFactory": () => (/* reexport safe */ _SpeakerRecognitionConnectionFactory__WEBPACK_IMPORTED_MODULE_6__.SpeakerRecognitionConnectionFactory),
/* harmony export */   "SpeakerServiceRecognizer": () => (/* reexport safe */ _SpeakerServiceRecognizer__WEBPACK_IMPORTED_MODULE_48__.SpeakerServiceRecognizer),
/* harmony export */   "SpeechConnectionFactory": () => (/* reexport safe */ _SpeechConnectionFactory__WEBPACK_IMPORTED_MODULE_13__.SpeechConnectionFactory),
/* harmony export */   "SpeechContext": () => (/* reexport safe */ _SpeechContext__WEBPACK_IMPORTED_MODULE_35__.SpeechContext),
/* harmony export */   "SpeechDetected": () => (/* reexport safe */ _ServiceMessages_SpeechDetected__WEBPACK_IMPORTED_MODULE_23__.SpeechDetected),
/* harmony export */   "SpeechHypothesis": () => (/* reexport safe */ _ServiceMessages_SpeechHypothesis__WEBPACK_IMPORTED_MODULE_24__.SpeechHypothesis),
/* harmony export */   "SpeechKeyword": () => (/* reexport safe */ _ServiceMessages_SpeechKeyword__WEBPACK_IMPORTED_MODULE_25__.SpeechKeyword),
/* harmony export */   "SpeechRecognitionEvent": () => (/* reexport safe */ _RecognitionEvents__WEBPACK_IMPORTED_MODULE_7__.SpeechRecognitionEvent),
/* harmony export */   "SpeechResultFormat": () => (/* reexport safe */ _RecognizerConfig__WEBPACK_IMPORTED_MODULE_10__.SpeechResultFormat),
/* harmony export */   "SpeechServiceConfig": () => (/* reexport safe */ _RecognizerConfig__WEBPACK_IMPORTED_MODULE_10__.SpeechServiceConfig),
/* harmony export */   "SpeechServiceRecognizer": () => (/* reexport safe */ _SpeechServiceRecognizer__WEBPACK_IMPORTED_MODULE_26__.SpeechServiceRecognizer),
/* harmony export */   "SpeechSynthesisConnectionFactory": () => (/* reexport safe */ _SpeechSynthesisConnectionFactory__WEBPACK_IMPORTED_MODULE_16__.SpeechSynthesisConnectionFactory),
/* harmony export */   "SynthesisAdapterBase": () => (/* reexport safe */ _SynthesisAdapterBase__WEBPACK_IMPORTED_MODULE_43__.SynthesisAdapterBase),
/* harmony export */   "SynthesisAudioMetadata": () => (/* reexport safe */ _ServiceMessages_SynthesisAudioMetadata__WEBPACK_IMPORTED_MODULE_41__.SynthesisAudioMetadata),
/* harmony export */   "SynthesisContext": () => (/* reexport safe */ _SynthesisContext__WEBPACK_IMPORTED_MODULE_46__.SynthesisContext),
/* harmony export */   "SynthesisRestAdapter": () => (/* reexport safe */ _SynthesisRestAdapter__WEBPACK_IMPORTED_MODULE_44__.SynthesisRestAdapter),
/* harmony export */   "SynthesisServiceType": () => (/* reexport safe */ _SynthesizerConfig__WEBPACK_IMPORTED_MODULE_45__.SynthesisServiceType),
/* harmony export */   "SynthesisStatus": () => (/* reexport safe */ _ServiceMessages_Enums__WEBPACK_IMPORTED_MODULE_18__.SynthesisStatus),
/* harmony export */   "SynthesisTurn": () => (/* reexport safe */ _SynthesisTurn__WEBPACK_IMPORTED_MODULE_42__.SynthesisTurn),
/* harmony export */   "SynthesizerConfig": () => (/* reexport safe */ _SynthesizerConfig__WEBPACK_IMPORTED_MODULE_45__.SynthesizerConfig),
/* harmony export */   "System": () => (/* reexport safe */ _RecognizerConfig__WEBPACK_IMPORTED_MODULE_10__.System),
/* harmony export */   "TranscriberConnectionFactory": () => (/* reexport safe */ _TranscriberConnectionFactory__WEBPACK_IMPORTED_MODULE_14__.TranscriberConnectionFactory),
/* harmony export */   "TranscriberRecognizer": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_40__.TranscriberRecognizer),
/* harmony export */   "TranscriptionServiceRecognizer": () => (/* reexport safe */ _TranscriptionServiceRecognizer__WEBPACK_IMPORTED_MODULE_27__.TranscriptionServiceRecognizer),
/* harmony export */   "TranslationConnectionFactory": () => (/* reexport safe */ _TranslationConnectionFactory__WEBPACK_IMPORTED_MODULE_15__.TranslationConnectionFactory),
/* harmony export */   "TranslationHypothesis": () => (/* reexport safe */ _ServiceMessages_TranslationHypothesis__WEBPACK_IMPORTED_MODULE_20__.TranslationHypothesis),
/* harmony export */   "TranslationPhrase": () => (/* reexport safe */ _ServiceMessages_TranslationPhrase__WEBPACK_IMPORTED_MODULE_21__.TranslationPhrase),
/* harmony export */   "TranslationServiceRecognizer": () => (/* reexport safe */ _TranslationServiceRecognizer__WEBPACK_IMPORTED_MODULE_22__.TranslationServiceRecognizer),
/* harmony export */   "TranslationSynthesisEnd": () => (/* reexport safe */ _ServiceMessages_TranslationSynthesisEnd__WEBPACK_IMPORTED_MODULE_19__.TranslationSynthesisEnd),
/* harmony export */   "VoiceProfileConnectionFactory": () => (/* reexport safe */ _SpeakerRecognitionConnectionFactory__WEBPACK_IMPORTED_MODULE_6__.VoiceProfileConnectionFactory),
/* harmony export */   "VoiceServiceRecognizer": () => (/* reexport safe */ _VoiceServiceRecognizer__WEBPACK_IMPORTED_MODULE_49__.VoiceServiceRecognizer),
/* harmony export */   "WebsocketMessageFormatter": () => (/* reexport safe */ _WebsocketMessageFormatter__WEBPACK_IMPORTED_MODULE_12__.WebsocketMessageFormatter),
/* harmony export */   "connectivity": () => (/* reexport safe */ _RecognizerConfig__WEBPACK_IMPORTED_MODULE_10__.connectivity),
/* harmony export */   "type": () => (/* reexport safe */ _RecognizerConfig__WEBPACK_IMPORTED_MODULE_10__.type)
/* harmony export */ });
/* harmony import */ var _CognitiveSubscriptionKeyAuthentication__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CognitiveSubscriptionKeyAuthentication */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveSubscriptionKeyAuthentication.js");
/* harmony import */ var _CognitiveTokenAuthentication__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CognitiveTokenAuthentication */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveTokenAuthentication.js");
/* harmony import */ var _IAuthentication__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./IAuthentication */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IAuthentication.js");
/* harmony import */ var _IConnectionFactory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./IConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IConnectionFactory.js");
/* harmony import */ var _IConnectionFactory__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_IConnectionFactory__WEBPACK_IMPORTED_MODULE_3__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _IConnectionFactory__WEBPACK_IMPORTED_MODULE_3__) if(["default","OutputFormatPropertyName","CancellationErrorCodePropertyName","ServicePropertiesPropertyName","ForceDictationPropertyName","AutoDetectSourceLanguagesOpenRangeOptionName","CognitiveSubscriptionKeyAuthentication","CognitiveTokenAuthentication","AuthInfo"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _IConnectionFactory__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);
/* harmony import */ var _ISynthesisConnectionFactory__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ISynthesisConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ISynthesisConnectionFactory.js");
/* harmony import */ var _ISynthesisConnectionFactory__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_ISynthesisConnectionFactory__WEBPACK_IMPORTED_MODULE_4__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _ISynthesisConnectionFactory__WEBPACK_IMPORTED_MODULE_4__) if(["default","OutputFormatPropertyName","CancellationErrorCodePropertyName","ServicePropertiesPropertyName","ForceDictationPropertyName","AutoDetectSourceLanguagesOpenRangeOptionName","CognitiveSubscriptionKeyAuthentication","CognitiveTokenAuthentication","AuthInfo"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _ISynthesisConnectionFactory__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);
/* harmony import */ var _IntentConnectionFactory__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./IntentConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentConnectionFactory.js");
/* harmony import */ var _SpeakerRecognitionConnectionFactory__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./SpeakerRecognitionConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeakerRecognitionConnectionFactory.js");
/* harmony import */ var _RecognitionEvents__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./RecognitionEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognitionEvents.js");
/* harmony import */ var _ServiceRecognizerBase__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ServiceRecognizerBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceRecognizerBase.js");
/* harmony import */ var _ConversationServiceRecognizer__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ConversationServiceRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConversationServiceRecognizer.js");
/* harmony import */ var _RecognizerConfig__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./RecognizerConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
/* harmony import */ var _SpeechServiceInterfaces__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./SpeechServiceInterfaces */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechServiceInterfaces.js");
/* harmony import */ var _SpeechServiceInterfaces__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_SpeechServiceInterfaces__WEBPACK_IMPORTED_MODULE_11__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _SpeechServiceInterfaces__WEBPACK_IMPORTED_MODULE_11__) if(["default","OutputFormatPropertyName","CancellationErrorCodePropertyName","ServicePropertiesPropertyName","ForceDictationPropertyName","AutoDetectSourceLanguagesOpenRangeOptionName","CognitiveSubscriptionKeyAuthentication","CognitiveTokenAuthentication","AuthInfo","IntentConnectionFactory","SpeakerRecognitionConnectionFactory","VoiceProfileConnectionFactory","ConnectingToServiceEvent","ListeningStartedEvent","RecognitionCompletionStatus","RecognitionEndedEvent","RecognitionStartedEvent","RecognitionTriggeredEvent","SpeechRecognitionEvent","ServiceRecognizerBase","ConversationServiceRecognizer","Context","Device","OS","RecognitionMode","RecognizerConfig","SpeechResultFormat","SpeechServiceConfig","System","connectivity","type"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _SpeechServiceInterfaces__WEBPACK_IMPORTED_MODULE_11__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);
/* harmony import */ var _WebsocketMessageFormatter__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./WebsocketMessageFormatter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/WebsocketMessageFormatter.js");
/* harmony import */ var _SpeechConnectionFactory__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./SpeechConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionFactory.js");
/* harmony import */ var _TranscriberConnectionFactory__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./TranscriberConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranscriberConnectionFactory.js");
/* harmony import */ var _TranslationConnectionFactory__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./TranslationConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationConnectionFactory.js");
/* harmony import */ var _SpeechSynthesisConnectionFactory__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./SpeechSynthesisConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechSynthesisConnectionFactory.js");
/* harmony import */ var _EnumTranslation__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./EnumTranslation */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/EnumTranslation.js");
/* harmony import */ var _ServiceMessages_Enums__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./ServiceMessages/Enums */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js");
/* harmony import */ var _ServiceMessages_TranslationSynthesisEnd__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./ServiceMessages/TranslationSynthesisEnd */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationSynthesisEnd.js");
/* harmony import */ var _ServiceMessages_TranslationHypothesis__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./ServiceMessages/TranslationHypothesis */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationHypothesis.js");
/* harmony import */ var _ServiceMessages_TranslationPhrase__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./ServiceMessages/TranslationPhrase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationPhrase.js");
/* harmony import */ var _TranslationServiceRecognizer__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./TranslationServiceRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationServiceRecognizer.js");
/* harmony import */ var _ServiceMessages_SpeechDetected__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./ServiceMessages/SpeechDetected */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechDetected.js");
/* harmony import */ var _ServiceMessages_SpeechHypothesis__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./ServiceMessages/SpeechHypothesis */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechHypothesis.js");
/* harmony import */ var _ServiceMessages_SpeechKeyword__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./ServiceMessages/SpeechKeyword */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechKeyword.js");
/* harmony import */ var _SpeechServiceRecognizer__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./SpeechServiceRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechServiceRecognizer.js");
/* harmony import */ var _TranscriptionServiceRecognizer__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./TranscriptionServiceRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranscriptionServiceRecognizer.js");
/* harmony import */ var _ServiceMessages_DetailedSpeechPhrase__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./ServiceMessages/DetailedSpeechPhrase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/DetailedSpeechPhrase.js");
/* harmony import */ var _ServiceMessages_SimpleSpeechPhrase__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./ServiceMessages/SimpleSpeechPhrase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js");
/* harmony import */ var _AddedLmIntent__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./AddedLmIntent */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AddedLmIntent.js");
/* harmony import */ var _IntentServiceRecognizer__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./IntentServiceRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentServiceRecognizer.js");
/* harmony import */ var _ServiceMessages_IntentResponse__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./ServiceMessages/IntentResponse */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/IntentResponse.js");
/* harmony import */ var _ServiceMessages_SpeakerResponse__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./ServiceMessages/SpeakerResponse */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeakerResponse.js");
/* harmony import */ var _ServiceMessages_SpeakerResponse__WEBPACK_IMPORTED_MODULE_33___default = /*#__PURE__*/__webpack_require__.n(_ServiceMessages_SpeakerResponse__WEBPACK_IMPORTED_MODULE_33__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _ServiceMessages_SpeakerResponse__WEBPACK_IMPORTED_MODULE_33__) if(["default","OutputFormatPropertyName","CancellationErrorCodePropertyName","ServicePropertiesPropertyName","ForceDictationPropertyName","AutoDetectSourceLanguagesOpenRangeOptionName","CognitiveSubscriptionKeyAuthentication","CognitiveTokenAuthentication","AuthInfo","IntentConnectionFactory","SpeakerRecognitionConnectionFactory","VoiceProfileConnectionFactory","ConnectingToServiceEvent","ListeningStartedEvent","RecognitionCompletionStatus","RecognitionEndedEvent","RecognitionStartedEvent","RecognitionTriggeredEvent","SpeechRecognitionEvent","ServiceRecognizerBase","ConversationServiceRecognizer","Context","Device","OS","RecognitionMode","RecognizerConfig","SpeechResultFormat","SpeechServiceConfig","System","connectivity","type","WebsocketMessageFormatter","SpeechConnectionFactory","TranscriberConnectionFactory","TranslationConnectionFactory","SpeechSynthesisConnectionFactory","EnumTranslation","RecognitionStatus","SynthesisStatus","TranslationSynthesisEnd","TranslationHypothesis","TranslationPhrase","TranslationServiceRecognizer","SpeechDetected","SpeechHypothesis","SpeechKeyword","SpeechServiceRecognizer","TranscriptionServiceRecognizer","DetailedSpeechPhrase","SimpleSpeechPhrase","AddedLmIntent","IntentServiceRecognizer","IntentResponse"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _ServiceMessages_SpeakerResponse__WEBPACK_IMPORTED_MODULE_33__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);
/* harmony import */ var _RequestSession__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./RequestSession */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RequestSession.js");
/* harmony import */ var _SpeechContext__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./SpeechContext */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechContext.js");
/* harmony import */ var _DynamicGrammarBuilder__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./DynamicGrammarBuilder */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DynamicGrammarBuilder.js");
/* harmony import */ var _DynamicGrammarInterfaces__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./DynamicGrammarInterfaces */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DynamicGrammarInterfaces.js");
/* harmony import */ var _DynamicGrammarInterfaces__WEBPACK_IMPORTED_MODULE_37___default = /*#__PURE__*/__webpack_require__.n(_DynamicGrammarInterfaces__WEBPACK_IMPORTED_MODULE_37__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _DynamicGrammarInterfaces__WEBPACK_IMPORTED_MODULE_37__) if(["default","OutputFormatPropertyName","CancellationErrorCodePropertyName","ServicePropertiesPropertyName","ForceDictationPropertyName","AutoDetectSourceLanguagesOpenRangeOptionName","CognitiveSubscriptionKeyAuthentication","CognitiveTokenAuthentication","AuthInfo","IntentConnectionFactory","SpeakerRecognitionConnectionFactory","VoiceProfileConnectionFactory","ConnectingToServiceEvent","ListeningStartedEvent","RecognitionCompletionStatus","RecognitionEndedEvent","RecognitionStartedEvent","RecognitionTriggeredEvent","SpeechRecognitionEvent","ServiceRecognizerBase","ConversationServiceRecognizer","Context","Device","OS","RecognitionMode","RecognizerConfig","SpeechResultFormat","SpeechServiceConfig","System","connectivity","type","WebsocketMessageFormatter","SpeechConnectionFactory","TranscriberConnectionFactory","TranslationConnectionFactory","SpeechSynthesisConnectionFactory","EnumTranslation","RecognitionStatus","SynthesisStatus","TranslationSynthesisEnd","TranslationHypothesis","TranslationPhrase","TranslationServiceRecognizer","SpeechDetected","SpeechHypothesis","SpeechKeyword","SpeechServiceRecognizer","TranscriptionServiceRecognizer","DetailedSpeechPhrase","SimpleSpeechPhrase","AddedLmIntent","IntentServiceRecognizer","IntentResponse","RequestSession","SpeechContext","DynamicGrammarBuilder"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _DynamicGrammarInterfaces__WEBPACK_IMPORTED_MODULE_37__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);
/* harmony import */ var _DialogServiceAdapter__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./DialogServiceAdapter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceAdapter.js");
/* harmony import */ var _AgentConfig__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./AgentConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AgentConfig.js");
/* harmony import */ var _Transcription_Exports__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./Transcription/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/Exports.js");
/* harmony import */ var _ServiceMessages_SynthesisAudioMetadata__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./ServiceMessages/SynthesisAudioMetadata */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SynthesisAudioMetadata.js");
/* harmony import */ var _SynthesisTurn__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./SynthesisTurn */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisTurn.js");
/* harmony import */ var _SynthesisAdapterBase__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./SynthesisAdapterBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisAdapterBase.js");
/* harmony import */ var _SynthesisRestAdapter__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./SynthesisRestAdapter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisRestAdapter.js");
/* harmony import */ var _SynthesizerConfig__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./SynthesizerConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesizerConfig.js");
/* harmony import */ var _SynthesisContext__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./SynthesisContext */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisContext.js");
/* harmony import */ var _SpeakerRecognitionConfig__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./SpeakerRecognitionConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeakerRecognitionConfig.js");
/* harmony import */ var _SpeakerServiceRecognizer__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./SpeakerServiceRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeakerServiceRecognizer.js");
/* harmony import */ var _VoiceServiceRecognizer__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./VoiceServiceRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/VoiceServiceRecognizer.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Make sure not to export internal modules.
//


















































const OutputFormatPropertyName = "OutputFormat";
const CancellationErrorCodePropertyName = "CancellationErrorCode";
const ServicePropertiesPropertyName = "ServiceProperties";
const ForceDictationPropertyName = "ForceDictation";
const AutoDetectSourceLanguagesOpenRangeOptionName = "OpenRange";

//# sourceMappingURL=Exports.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HeaderNames": () => (/* binding */ HeaderNames)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class HeaderNames {
}
HeaderNames.AuthKey = "Ocp-Apim-Subscription-Key";
HeaderNames.Authorization = "Authorization";
HeaderNames.SpIDAuthKey = "Apim-Subscription-Id";
HeaderNames.ConnectionId = "X-ConnectionId";
HeaderNames.ContentType = "Content-Type";
HeaderNames.CustomCommandsAppId = "X-CommandsAppId";
HeaderNames.Path = "Path";
HeaderNames.RequestId = "X-RequestId";
HeaderNames.RequestStreamId = "X-StreamId";
HeaderNames.RequestTimestamp = "X-Timestamp";

//# sourceMappingURL=HeaderNames.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IAuthentication.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IAuthentication.js ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AuthInfo": () => (/* binding */ AuthInfo)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class AuthInfo {
    constructor(headerName, token) {
        this.privHeaderName = headerName;
        this.privToken = token;
    }
    get headerName() {
        return this.privHeaderName;
    }
    get token() {
        return this.privToken;
    }
}

//# sourceMappingURL=IAuthentication.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IConnectionFactory.js":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IConnectionFactory.js ***!
  \********************************************************************************************************************/
/***/ (() => {

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

//# sourceMappingURL=IConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ISynthesisConnectionFactory.js":
/*!*****************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ISynthesisConnectionFactory.js ***!
  \*****************************************************************************************************************************/
/***/ (() => {

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

//# sourceMappingURL=ISynthesisConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentConnectionFactory.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentConnectionFactory.js ***!
  \*************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IntentConnectionFactory": () => (/* binding */ IntentConnectionFactory)
/* harmony export */ });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketConnection.js");
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ProxyInfo.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/WebsocketMessageFormatter.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.





class IntentConnectionFactory extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__.ConnectionFactoryBase {
    create(config, authInfo, connectionId) {
        let endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Endpoint);
        if (!endpoint) {
            const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_IntentRegion);
            const hostSuffix = _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__.ConnectionFactoryBase.getHostSuffix(region);
            const host = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Host, "wss://" + region + ".sr.speech" + hostSuffix);
            endpoint = host + "/speech/recognition/interactive/cognitiveservices/v1";
        }
        const queryParams = {
            format: "simple",
            language: config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_RecoLanguage),
        };
        this.setCommonUrlParams(config, queryParams, endpoint);
        const headers = {};
        if (authInfo.token !== undefined && authInfo.token !== "") {
            headers[authInfo.headerName] = authInfo.token;
        }
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.ConnectionId] = connectionId;
        config.parameters.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Url, endpoint);
        const enableCompression = config.parameters.getProperty("SPEECH-EnableWebsocketCompression", "false") === "true";
        return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_3__.WebsocketConnection(endpoint, queryParams, headers, new _Exports__WEBPACK_IMPORTED_MODULE_4__.WebsocketMessageFormatter(), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_5__.ProxyInfo.fromRecognizerConfig(config), enableCompression, connectionId);
    }
    getSpeechRegionFromIntentRegion(intentRegion) {
        switch (intentRegion) {
            case "West US":
            case "US West":
            case "westus":
                return "uswest";
            case "West US 2":
            case "US West 2":
            case "westus2":
                return "uswest2";
            case "South Central US":
            case "US South Central":
            case "southcentralus":
                return "ussouthcentral";
            case "West Central US":
            case "US West Central":
            case "westcentralus":
                return "uswestcentral";
            case "East US":
            case "US East":
            case "eastus":
                return "useast";
            case "East US 2":
            case "US East 2":
            case "eastus2":
                return "useast2";
            case "West Europe":
            case "Europe West":
            case "westeurope":
                return "europewest";
            case "North Europe":
            case "Europe North":
            case "northeurope":
                return "europenorth";
            case "Brazil South":
            case "South Brazil":
            case "southbrazil":
                return "brazilsouth";
            case "Australia East":
            case "East Australia":
            case "eastaustralia":
                return "australiaeast";
            case "Southeast Asia":
            case "Asia Southeast":
            case "southeastasia":
                return "asiasoutheast";
            case "East Asia":
            case "Asia East":
            case "eastasia":
                return "asiaeast";
            default:
                return intentRegion;
        }
    }
}

//# sourceMappingURL=IntentConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentServiceRecognizer.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentServiceRecognizer.js ***!
  \*************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IntentServiceRecognizer": () => (/* binding */ IntentServiceRecognizer)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionResult.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionCanceledEventArgs.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceRecognizerBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechHypothesis.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/EnumTranslation.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/IntentResponse.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



// eslint-disable-next-line max-classes-per-file
class IntentServiceRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_0__.ServiceRecognizerBase {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, recognizer) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, recognizer);
        this.privIntentRecognizer = recognizer;
        this.privIntentDataSent = false;
    }
    setIntents(addedIntents, umbrellaIntent) {
        this.privAddedLmIntents = addedIntents;
        this.privUmbrellaIntent = umbrellaIntent;
        this.privIntentDataSent = true;
    }
    processTypeSpecificMessages(connectionMessage) {
        let result;
        let ev;
        let processed = false;
        const resultProps = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyCollection();
        if (connectionMessage.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_2__.MessageType.Text) {
            resultProps.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceResponse_JsonResult, connectionMessage.textBody);
        }
        switch (connectionMessage.path.toLowerCase()) {
            case "speech.hypothesis":
                const speechHypothesis = _Exports__WEBPACK_IMPORTED_MODULE_4__.SpeechHypothesis.fromJSON(connectionMessage.textBody);
                result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.IntentRecognitionResult(undefined, this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.ResultReason.RecognizingIntent, speechHypothesis.Text, speechHypothesis.Duration, speechHypothesis.Offset + this.privRequestSession.currentTurnAudioOffset, speechHypothesis.Language, speechHypothesis.LanguageDetectionConfidence, undefined, connectionMessage.textBody, resultProps);
                this.privRequestSession.onHypothesis(result.offset);
                ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_7__.IntentRecognitionEventArgs(result, speechHypothesis.Offset + this.privRequestSession.currentTurnAudioOffset, this.privRequestSession.sessionId);
                if (!!this.privIntentRecognizer.recognizing) {
                    try {
                        this.privIntentRecognizer.recognizing(this.privIntentRecognizer, ev);
                        /* eslint-disable no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                processed = true;
                break;
            case "speech.phrase":
                const simple = _Exports__WEBPACK_IMPORTED_MODULE_8__.SimpleSpeechPhrase.fromJSON(connectionMessage.textBody);
                result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.IntentRecognitionResult(undefined, this.privRequestSession.requestId, _Exports__WEBPACK_IMPORTED_MODULE_9__.EnumTranslation.implTranslateRecognitionResult(simple.RecognitionStatus), simple.DisplayText, simple.Duration, simple.Offset + this.privRequestSession.currentTurnAudioOffset, simple.Language, simple.LanguageDetectionConfidence, undefined, connectionMessage.textBody, resultProps);
                ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_7__.IntentRecognitionEventArgs(result, result.offset, this.privRequestSession.sessionId);
                const sendEvent = () => {
                    if (!!this.privIntentRecognizer.recognized) {
                        try {
                            this.privIntentRecognizer.recognized(this.privIntentRecognizer, ev);
                            /* eslint-disable no-empty */
                        }
                        catch (error) {
                            // Not going to let errors in the event handler
                            // trip things up.
                        }
                    }
                    // report result to promise.
                    if (!!this.privSuccessCallback) {
                        try {
                            this.privSuccessCallback(result);
                        }
                        catch (e) {
                            if (!!this.privErrorCallback) {
                                this.privErrorCallback(e);
                            }
                        }
                        // Only invoke the call back once.
                        // and if it's successful don't invoke the
                        // error after that.
                        this.privSuccessCallback = undefined;
                        this.privErrorCallback = undefined;
                    }
                };
                // If intent data was sent, the terminal result for this recognizer is an intent being found.
                // If no intent data was sent, the terminal event is speech recognition being successful.
                if (false === this.privIntentDataSent || _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.ResultReason.NoMatch === ev.result.reason) {
                    // Advance the buffers.
                    this.privRequestSession.onPhraseRecognized(ev.offset + ev.result.duration);
                    sendEvent();
                }
                else {
                    // Squirrel away the args, when the response event arrives it will build upon them
                    // and then return
                    this.privPendingIntentArgs = ev;
                }
                processed = true;
                break;
            case "response":
                // Response from LUIS
                ev = this.privPendingIntentArgs;
                this.privPendingIntentArgs = undefined;
                if (undefined === ev) {
                    if ("" === connectionMessage.textBody) {
                        // This condition happens if there is nothing but silence in the
                        // audio sent to the service.
                        return;
                    }
                    // Odd... Not sure this can happen
                    ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_7__.IntentRecognitionEventArgs(new _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.IntentRecognitionResult(), 0, this.privRequestSession.sessionId);
                }
                const intentResponse = _Exports__WEBPACK_IMPORTED_MODULE_10__.IntentResponse.fromJSON(connectionMessage.textBody);
                // If LUIS didn't return anything, send the existing event, else
                // modify it to show the match.
                // See if the intent found is in the list of intents asked for.
                if (null !== intentResponse && !!intentResponse.topScoringIntent && !!intentResponse.topScoringIntent.intent) {
                    let addedIntent = this.privAddedLmIntents[intentResponse.topScoringIntent.intent];
                    if (this.privUmbrellaIntent !== undefined) {
                        addedIntent = this.privUmbrellaIntent;
                    }
                    if (!!addedIntent) {
                        const intentId = addedIntent === undefined || addedIntent.intentName === undefined ? intentResponse.topScoringIntent.intent : addedIntent.intentName;
                        let reason = ev.result.reason;
                        if (undefined !== intentId) {
                            reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.ResultReason.RecognizedIntent;
                        }
                        // make sure, properties is set.
                        const properties = (undefined !== ev.result.properties) ?
                            ev.result.properties : new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyCollection();
                        properties.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.LanguageUnderstandingServiceResponse_JsonResult, connectionMessage.textBody);
                        ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_7__.IntentRecognitionEventArgs(new _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.IntentRecognitionResult(intentId, ev.result.resultId, reason, ev.result.text, ev.result.duration, ev.result.offset, undefined, undefined, ev.result.errorDetails, ev.result.json, properties), ev.offset, ev.sessionId);
                    }
                }
                this.privRequestSession.onPhraseRecognized(ev.offset + ev.result.duration);
                if (!!this.privIntentRecognizer.recognized) {
                    try {
                        this.privIntentRecognizer.recognized(this.privIntentRecognizer, ev);
                        /* eslint-disable no-empty */
                    }
                    catch (error) {
                        // Not going to let errors in the event handler
                        // trip things up.
                    }
                }
                // report result to promise.
                if (!!this.privSuccessCallback) {
                    try {
                        this.privSuccessCallback(ev.result);
                    }
                    catch (e) {
                        if (!!this.privErrorCallback) {
                            this.privErrorCallback(e);
                        }
                    }
                    // Only invoke the call back once.
                    // and if it's successful don't invoke the
                    // error after that.
                    this.privSuccessCallback = undefined;
                    this.privErrorCallback = undefined;
                }
                processed = true;
                break;
            default:
                break;
        }
        const defferal = new _common_Exports__WEBPACK_IMPORTED_MODULE_11__.Deferred();
        defferal.resolve(processed);
        return defferal.promise;
    }
    // Cancels recognition.
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error) {
        const properties = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyCollection();
        properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_12__.CancellationErrorCodePropertyName, _sdk_Exports__WEBPACK_IMPORTED_MODULE_13__.CancellationErrorCode[errorCode]);
        if (!!this.privIntentRecognizer.canceled) {
            const cancelEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_14__.IntentRecognitionCanceledEventArgs(cancellationReason, error, errorCode, undefined, undefined, sessionId);
            try {
                this.privIntentRecognizer.canceled(this.privIntentRecognizer, cancelEvent);
                /* eslint-disable no-empty */
            }
            catch (_a) { }
        }
        if (!!this.privSuccessCallback) {
            const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.IntentRecognitionResult(undefined, // Intent Id
            requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.ResultReason.Canceled, undefined, // Text
            undefined, // Duration
            undefined, // Offset
            undefined, // Language
            undefined, // LanguageDetectionConfidence
            error, undefined, // Json
            properties);
            try {
                this.privSuccessCallback(result);
                this.privSuccessCallback = undefined;
                /* eslint-disable no-empty */
            }
            catch (_b) { }
        }
    }
}

//# sourceMappingURL=IntentServiceRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "QueryParameterNames": () => (/* binding */ QueryParameterNames)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class QueryParameterNames {
}
QueryParameterNames.BotId = "botid";
QueryParameterNames.CustomSpeechDeploymentId = "cid";
QueryParameterNames.CustomVoiceDeploymentId = "deploymentId";
QueryParameterNames.EnableAudioLogging = "storeAudio";
QueryParameterNames.EnableLanguageId = "lidEnabled";
QueryParameterNames.EnableWordLevelTimestamps = "wordLevelTimestamps";
QueryParameterNames.EndSilenceTimeoutMs = "endSilenceTimeoutMs";
QueryParameterNames.SegmentationSilenceTimeoutMs = "segmentationSilenceTimeoutMs";
QueryParameterNames.Format = "format";
QueryParameterNames.InitialSilenceTimeoutMs = "initialSilenceTimeoutMs";
QueryParameterNames.Language = "language";
QueryParameterNames.Profanity = "profanity";
QueryParameterNames.RequestBotStatusMessages = "enableBotMessageStatus";
QueryParameterNames.StableIntermediateThreshold = "stableIntermediateThreshold";
QueryParameterNames.StableTranslation = "stableTranslation";
QueryParameterNames.TestHooks = "testhooks";
QueryParameterNames.Postprocessing = "postprocessing";
QueryParameterNames.CtsMeetingId = "meetingId";
QueryParameterNames.CtsDeviceId = "deviceId";
QueryParameterNames.CtsIsParticipant = "isParticipant";

//# sourceMappingURL=QueryParameterNames.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognitionEvents.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognitionEvents.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConnectingToServiceEvent": () => (/* binding */ ConnectingToServiceEvent),
/* harmony export */   "ListeningStartedEvent": () => (/* binding */ ListeningStartedEvent),
/* harmony export */   "RecognitionCompletionStatus": () => (/* binding */ RecognitionCompletionStatus),
/* harmony export */   "RecognitionEndedEvent": () => (/* binding */ RecognitionEndedEvent),
/* harmony export */   "RecognitionStartedEvent": () => (/* binding */ RecognitionStartedEvent),
/* harmony export */   "RecognitionTriggeredEvent": () => (/* binding */ RecognitionTriggeredEvent),
/* harmony export */   "SpeechRecognitionEvent": () => (/* binding */ SpeechRecognitionEvent)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */

class SpeechRecognitionEvent extends _common_Exports__WEBPACK_IMPORTED_MODULE_0__.PlatformEvent {
    constructor(eventName, requestId, sessionId, eventType = _common_Exports__WEBPACK_IMPORTED_MODULE_0__.EventType.Info) {
        super(eventName, eventType);
        this.privRequestId = requestId;
        this.privSessionId = sessionId;
    }
    get requestId() {
        return this.privRequestId;
    }
    get sessionId() {
        return this.privSessionId;
    }
}
class RecognitionTriggeredEvent extends SpeechRecognitionEvent {
    constructor(requestId, sessionId, audioSourceId, audioNodeId) {
        super("RecognitionTriggeredEvent", requestId, sessionId);
        this.privAudioSourceId = audioSourceId;
        this.privAudioNodeId = audioNodeId;
    }
    get audioSourceId() {
        return this.privAudioSourceId;
    }
    get audioNodeId() {
        return this.privAudioNodeId;
    }
}
class ListeningStartedEvent extends SpeechRecognitionEvent {
    constructor(requestId, sessionId, audioSourceId, audioNodeId) {
        super("ListeningStartedEvent", requestId, sessionId);
        this.privAudioSourceId = audioSourceId;
        this.privAudioNodeId = audioNodeId;
    }
    get audioSourceId() {
        return this.privAudioSourceId;
    }
    get audioNodeId() {
        return this.privAudioNodeId;
    }
}
class ConnectingToServiceEvent extends SpeechRecognitionEvent {
    constructor(requestId, authFetchEventid, sessionId) {
        super("ConnectingToServiceEvent", requestId, sessionId);
        this.privAuthFetchEventid = authFetchEventid;
    }
    get authFetchEventid() {
        return this.privAuthFetchEventid;
    }
}
class RecognitionStartedEvent extends SpeechRecognitionEvent {
    constructor(requestId, audioSourceId, audioNodeId, authFetchEventId, sessionId) {
        super("RecognitionStartedEvent", requestId, sessionId);
        this.privAudioSourceId = audioSourceId;
        this.privAudioNodeId = audioNodeId;
        this.privAuthFetchEventId = authFetchEventId;
    }
    get audioSourceId() {
        return this.privAudioSourceId;
    }
    get audioNodeId() {
        return this.privAudioNodeId;
    }
    get authFetchEventId() {
        return this.privAuthFetchEventId;
    }
}
var RecognitionCompletionStatus;
(function (RecognitionCompletionStatus) {
    RecognitionCompletionStatus[RecognitionCompletionStatus["Success"] = 0] = "Success";
    RecognitionCompletionStatus[RecognitionCompletionStatus["AudioSourceError"] = 1] = "AudioSourceError";
    RecognitionCompletionStatus[RecognitionCompletionStatus["AudioSourceTimeout"] = 2] = "AudioSourceTimeout";
    RecognitionCompletionStatus[RecognitionCompletionStatus["AuthTokenFetchError"] = 3] = "AuthTokenFetchError";
    RecognitionCompletionStatus[RecognitionCompletionStatus["AuthTokenFetchTimeout"] = 4] = "AuthTokenFetchTimeout";
    RecognitionCompletionStatus[RecognitionCompletionStatus["UnAuthorized"] = 5] = "UnAuthorized";
    RecognitionCompletionStatus[RecognitionCompletionStatus["ConnectTimeout"] = 6] = "ConnectTimeout";
    RecognitionCompletionStatus[RecognitionCompletionStatus["ConnectError"] = 7] = "ConnectError";
    RecognitionCompletionStatus[RecognitionCompletionStatus["ClientRecognitionActivityTimeout"] = 8] = "ClientRecognitionActivityTimeout";
    RecognitionCompletionStatus[RecognitionCompletionStatus["UnknownError"] = 9] = "UnknownError";
})(RecognitionCompletionStatus || (RecognitionCompletionStatus = {}));
class RecognitionEndedEvent extends SpeechRecognitionEvent {
    constructor(requestId, audioSourceId, audioNodeId, authFetchEventId, sessionId, serviceTag, status, error) {
        super("RecognitionEndedEvent", requestId, sessionId, status === RecognitionCompletionStatus.Success ? _common_Exports__WEBPACK_IMPORTED_MODULE_0__.EventType.Info : _common_Exports__WEBPACK_IMPORTED_MODULE_0__.EventType.Error);
        this.privAudioSourceId = audioSourceId;
        this.privAudioNodeId = audioNodeId;
        this.privAuthFetchEventId = authFetchEventId;
        this.privStatus = status;
        this.privError = error;
        this.privServiceTag = serviceTag;
    }
    get audioSourceId() {
        return this.privAudioSourceId;
    }
    get audioNodeId() {
        return this.privAudioNodeId;
    }
    get authFetchEventId() {
        return this.privAuthFetchEventId;
    }
    get serviceTag() {
        return this.privServiceTag;
    }
    get status() {
        return this.privStatus;
    }
    get error() {
        return this.privError;
    }
}

//# sourceMappingURL=RecognitionEvents.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Context": () => (/* binding */ Context),
/* harmony export */   "Device": () => (/* binding */ Device),
/* harmony export */   "OS": () => (/* binding */ OS),
/* harmony export */   "RecognitionMode": () => (/* binding */ RecognitionMode),
/* harmony export */   "RecognizerConfig": () => (/* binding */ RecognizerConfig),
/* harmony export */   "SpeechResultFormat": () => (/* binding */ SpeechResultFormat),
/* harmony export */   "SpeechServiceConfig": () => (/* binding */ SpeechServiceConfig),
/* harmony export */   "System": () => (/* binding */ System),
/* harmony export */   "connectivity": () => (/* binding */ connectivity),
/* harmony export */   "type": () => (/* binding */ type)
/* harmony export */ });
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */

var RecognitionMode;
(function (RecognitionMode) {
    RecognitionMode[RecognitionMode["Interactive"] = 0] = "Interactive";
    RecognitionMode[RecognitionMode["Conversation"] = 1] = "Conversation";
    RecognitionMode[RecognitionMode["Dictation"] = 2] = "Dictation";
})(RecognitionMode || (RecognitionMode = {}));
var SpeechResultFormat;
(function (SpeechResultFormat) {
    SpeechResultFormat[SpeechResultFormat["Simple"] = 0] = "Simple";
    SpeechResultFormat[SpeechResultFormat["Detailed"] = 1] = "Detailed";
})(SpeechResultFormat || (SpeechResultFormat = {}));
class RecognizerConfig {
    constructor(speechServiceConfig, parameters) {
        this.privSpeechServiceConfig = speechServiceConfig ? speechServiceConfig : new SpeechServiceConfig(new Context(null));
        this.privParameters = parameters;
        this.privMaxRetryCount = parseInt(parameters.getProperty("SPEECH-Error-MaxRetryCount", "4"), 10);
        this.privLanguageIdMode = parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_LanguageIdMode, undefined);
    }
    get parameters() {
        return this.privParameters;
    }
    get recognitionMode() {
        return this.privRecognitionMode;
    }
    set recognitionMode(value) {
        this.privRecognitionMode = value;
        this.privRecognitionActivityTimeout = value === RecognitionMode.Interactive ? 8000 : 25000;
        this.privSpeechServiceConfig.Recognition = RecognitionMode[value];
    }
    get SpeechServiceConfig() {
        return this.privSpeechServiceConfig;
    }
    get recognitionActivityTimeout() {
        return this.privRecognitionActivityTimeout;
    }
    get isContinuousRecognition() {
        return this.privRecognitionMode !== RecognitionMode.Interactive;
    }
    get languageIdMode() {
        return this.privLanguageIdMode;
    }
    get autoDetectSourceLanguages() {
        return this.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages, undefined);
    }
    get recognitionEndpointVersion() {
        return this.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion, undefined);
    }
    get sourceLanguageModels() {
        const models = [];
        let modelsExist = false;
        if (this.autoDetectSourceLanguages !== undefined) {
            for (const language of this.autoDetectSourceLanguages.split(",")) {
                const customProperty = language + _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_EndpointId.toString();
                const modelId = this.parameters.getProperty(customProperty, undefined);
                if (modelId !== undefined) {
                    models.push({ language, endpoint: modelId });
                    modelsExist = true;
                }
                else {
                    models.push({ language, endpoint: "" });
                }
            }
        }
        return modelsExist ? models : undefined;
    }
    get maxRetryCount() {
        return this.privMaxRetryCount;
    }
}
// The config is serialized and sent as the Speech.Config
class SpeechServiceConfig {
    constructor(context) {
        this.context = context;
    }
    serialize() {
        return JSON.stringify(this, (key, value) => {
            if (value && typeof value === "object") {
                const replacement = {};
                for (const k in value) {
                    if (Object.hasOwnProperty.call(value, k)) {
                        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
                        replacement[k && k.charAt(0).toLowerCase() + k.substring(1)] = value[k];
                    }
                }
                return replacement;
            }
            return value;
        });
    }
    get Context() {
        return this.context;
    }
    get Recognition() {
        return this.recognition;
    }
    set Recognition(value) {
        this.recognition = value.toLowerCase();
    }
}
class Context {
    constructor(os) {
        this.system = new System();
        this.os = os;
    }
}
class System {
    constructor() {
        // Note: below will be patched for official builds.
        const SPEECHSDK_CLIENTSDK_VERSION = "1.30.1";
        this.name = "SpeechSDK";
        this.version = SPEECHSDK_CLIENTSDK_VERSION;
        this.build = "JavaScript";
        this.lang = "JavaScript";
    }
}
class OS {
    constructor(platform, name, version) {
        this.platform = platform;
        this.name = name;
        this.version = version;
    }
}
class Device {
    constructor(manufacturer, model, version) {
        this.manufacturer = manufacturer;
        this.model = model;
        this.version = version;
    }
}
var connectivity;
(function (connectivity) {
    connectivity["Bluetooth"] = "Bluetooth";
    connectivity["Wired"] = "Wired";
    connectivity["WiFi"] = "WiFi";
    connectivity["Cellular"] = "Cellular";
    connectivity["InBuilt"] = "InBuilt";
    connectivity["Unknown"] = "Unknown";
})(connectivity || (connectivity = {}));
var type;
(function (type) {
    type["Phone"] = "Phone";
    type["Speaker"] = "Speaker";
    type["Car"] = "Car";
    type["Headset"] = "Headset";
    type["Thermostat"] = "Thermostat";
    type["Microphones"] = "Microphones";
    type["Deskphone"] = "Deskphone";
    type["RemoteControl"] = "RemoteControl";
    type["Unknown"] = "Unknown";
    type["File"] = "File";
    type["Stream"] = "Stream";
})(type || (type = {}));

//# sourceMappingURL=RecognizerConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RequestSession.js":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RequestSession.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RequestSession": () => (/* binding */ RequestSession)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js");
/* harmony import */ var _RecognitionEvents__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./RecognitionEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognitionEvents.js");
/* harmony import */ var _ServiceTelemetryListener_Internal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ServiceTelemetryListener.Internal */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceTelemetryListener.Internal.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



class RequestSession {
    constructor(audioSourceId) {
        this.privIsDisposed = false;
        this.privDetachables = new Array();
        this.privIsAudioNodeDetached = false;
        this.privIsRecognizing = false;
        this.privIsSpeechEnded = false;
        this.privTurnStartAudioOffset = 0;
        this.privLastRecoOffset = 0;
        this.privHypothesisReceived = false;
        this.privBytesSent = 0;
        this.privRecogNumber = 0;
        this.privInTurn = false;
        this.privConnectionAttempts = 0;
        this.privAudioSourceId = audioSourceId;
        this.privRequestId = (0,_common_Exports__WEBPACK_IMPORTED_MODULE_0__.createNoDashGuid)();
        this.privAudioNodeId = (0,_common_Exports__WEBPACK_IMPORTED_MODULE_0__.createNoDashGuid)();
        this.privTurnDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__.Deferred();
        // We're not in a turn, so resolve.
        this.privTurnDeferral.resolve();
    }
    get sessionId() {
        return this.privSessionId;
    }
    get requestId() {
        return this.privRequestId;
    }
    get audioNodeId() {
        return this.privAudioNodeId;
    }
    get turnCompletionPromise() {
        return this.privTurnDeferral.promise;
    }
    get isSpeechEnded() {
        return this.privIsSpeechEnded;
    }
    get isRecognizing() {
        return this.privIsRecognizing;
    }
    get currentTurnAudioOffset() {
        return this.privTurnStartAudioOffset;
    }
    get recogNumber() {
        return this.privRecogNumber;
    }
    get numConnectionAttempts() {
        return this.privConnectionAttempts;
    }
    // The number of bytes sent for the current connection.
    // Counter is reset to 0 each time a connection is established.
    get bytesSent() {
        return this.privBytesSent;
    }
    listenForServiceTelemetry(eventSource) {
        if (!!this.privServiceTelemetryListener) {
            this.privDetachables.push(eventSource.attachListener(this.privServiceTelemetryListener));
        }
    }
    startNewRecognition() {
        this.privIsSpeechEnded = false;
        this.privIsRecognizing = true;
        this.privTurnStartAudioOffset = 0;
        this.privLastRecoOffset = 0;
        this.privRecogNumber++;
        this.privServiceTelemetryListener = new _ServiceTelemetryListener_Internal__WEBPACK_IMPORTED_MODULE_2__.ServiceTelemetryListener(this.privRequestId, this.privAudioSourceId, this.privAudioNodeId);
        this.onEvent(new _RecognitionEvents__WEBPACK_IMPORTED_MODULE_3__.RecognitionTriggeredEvent(this.requestId, this.privSessionId, this.privAudioSourceId, this.privAudioNodeId));
    }
    onAudioSourceAttachCompleted(audioNode, isError) {
        return __awaiter(this, void 0, void 0, function* () {
            this.privAudioNode = audioNode;
            this.privIsAudioNodeDetached = false;
            if (isError) {
                yield this.onComplete();
            }
            else {
                this.onEvent(new _RecognitionEvents__WEBPACK_IMPORTED_MODULE_3__.ListeningStartedEvent(this.privRequestId, this.privSessionId, this.privAudioSourceId, this.privAudioNodeId));
            }
        });
    }
    onPreConnectionStart(authFetchEventId, connectionId) {
        this.privAuthFetchEventId = authFetchEventId;
        this.privSessionId = connectionId;
        this.onEvent(new _RecognitionEvents__WEBPACK_IMPORTED_MODULE_3__.ConnectingToServiceEvent(this.privRequestId, this.privAuthFetchEventId, this.privSessionId));
    }
    onAuthCompleted(isError) {
        return __awaiter(this, void 0, void 0, function* () {
            if (isError) {
                yield this.onComplete();
            }
        });
    }
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    onConnectionEstablishCompleted(statusCode, reason) {
        return __awaiter(this, void 0, void 0, function* () {
            if (statusCode === 200) {
                this.onEvent(new _RecognitionEvents__WEBPACK_IMPORTED_MODULE_3__.RecognitionStartedEvent(this.requestId, this.privAudioSourceId, this.privAudioNodeId, this.privAuthFetchEventId, this.privSessionId));
                if (!!this.privAudioNode) {
                    this.privAudioNode.replay();
                }
                this.privTurnStartAudioOffset = this.privLastRecoOffset;
                this.privBytesSent = 0;
                return;
            }
            else if (statusCode === 403) {
                yield this.onComplete();
            }
        });
    }
    onServiceTurnEndResponse(continuousRecognition) {
        return __awaiter(this, void 0, void 0, function* () {
            this.privTurnDeferral.resolve();
            if (!continuousRecognition || this.isSpeechEnded) {
                yield this.onComplete();
                this.privInTurn = false;
            }
            else {
                // Start a new request set.
                this.privTurnStartAudioOffset = this.privLastRecoOffset;
                this.privAudioNode.replay();
            }
        });
    }
    onSpeechContext() {
        this.privRequestId = (0,_common_Exports__WEBPACK_IMPORTED_MODULE_0__.createNoDashGuid)();
    }
    onServiceTurnStartResponse() {
        if (!!this.privTurnDeferral && !!this.privInTurn) {
            // What? How are we starting a turn with another not done?
            this.privTurnDeferral.reject("Another turn started before current completed.");
            // Avoid UnhandledPromiseRejection if privTurnDeferral is not being awaited
            // eslint-disable-next-line @typescript-eslint/no-empty-function
            this.privTurnDeferral.promise.then().catch(() => { });
        }
        this.privInTurn = true;
        this.privTurnDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__.Deferred();
    }
    onHypothesis(offset) {
        if (!this.privHypothesisReceived) {
            this.privHypothesisReceived = true;
            this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(offset));
        }
    }
    onPhraseRecognized(offset) {
        this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(offset));
        this.onServiceRecognized(offset);
    }
    onServiceRecognized(offset) {
        this.privLastRecoOffset = offset;
        this.privHypothesisReceived = false;
        this.privAudioNode.shrinkBuffers(offset);
        this.privConnectionAttempts = 0;
    }
    onAudioSent(bytesSent) {
        this.privBytesSent += bytesSent;
    }
    onRetryConnection() {
        this.privConnectionAttempts++;
    }
    dispose() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.privIsDisposed) {
                // we should have completed by now. If we did not its an unknown error.
                this.privIsDisposed = true;
                for (const detachable of this.privDetachables) {
                    yield detachable.detach();
                }
                if (!!this.privServiceTelemetryListener) {
                    this.privServiceTelemetryListener.dispose();
                }
                this.privIsRecognizing = false;
            }
        });
    }
    getTelemetry() {
        if (this.privServiceTelemetryListener.hasTelemetry) {
            return this.privServiceTelemetryListener.getTelemetry();
        }
        else {
            return null;
        }
    }
    onStopRecognizing() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.onComplete();
        });
    }
    // Should be called with the audioNode for this session has indicated that it is out of speech.
    onSpeechEnded() {
        this.privIsSpeechEnded = true;
    }
    onEvent(event) {
        if (!!this.privServiceTelemetryListener) {
            this.privServiceTelemetryListener.onEvent(event);
        }
        _common_Exports__WEBPACK_IMPORTED_MODULE_4__.Events.instance.onEvent(event);
    }
    onComplete() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!!this.privIsRecognizing) {
                this.privIsRecognizing = false;
                yield this.detachAudioNode();
            }
        });
    }
    detachAudioNode() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.privIsAudioNodeDetached) {
                this.privIsAudioNodeDetached = true;
                if (this.privAudioNode) {
                    yield this.privAudioNode.detach();
                }
            }
        });
    }
}

//# sourceMappingURL=RequestSession.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/ActivityResponsePayload.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/ActivityResponsePayload.js ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ActivityPayloadResponse": () => (/* binding */ ActivityPayloadResponse),
/* harmony export */   "MessageDataStreamType": () => (/* binding */ MessageDataStreamType)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// response
class ActivityPayloadResponse {
    constructor(json) {
        this.privActivityResponse = JSON.parse(json);
    }
    static fromJSON(json) {
        return new ActivityPayloadResponse(json);
    }
    get conversationId() {
        return this.privActivityResponse.conversationId;
    }
    get messageDataStreamType() {
        return this.privActivityResponse.messageDataStreamType;
    }
    get messagePayload() {
        return this.privActivityResponse.messagePayload;
    }
    get version() {
        return this.privActivityResponse.version;
    }
}
var MessageDataStreamType;
(function (MessageDataStreamType) {
    MessageDataStreamType[MessageDataStreamType["None"] = 0] = "None";
    MessageDataStreamType[MessageDataStreamType["TextToSpeechAudio"] = 1] = "TextToSpeechAudio";
})(MessageDataStreamType || (MessageDataStreamType = {}));

//# sourceMappingURL=ActivityResponsePayload.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/DetailedSpeechPhrase.js":
/*!**************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/DetailedSpeechPhrase.js ***!
  \**************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DetailedSpeechPhrase": () => (/* binding */ DetailedSpeechPhrase)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class DetailedSpeechPhrase {
    constructor(json) {
        this.privDetailedSpeechPhrase = JSON.parse(json);
        this.privDetailedSpeechPhrase.RecognitionStatus = _Exports__WEBPACK_IMPORTED_MODULE_0__.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus];
    }
    static fromJSON(json) {
        return new DetailedSpeechPhrase(json);
    }
    getJsonWithCorrectedOffsets(baseOffset) {
        if (!!this.privDetailedSpeechPhrase.NBest) {
            let firstWordOffset;
            for (const phrase of this.privDetailedSpeechPhrase.NBest) {
                if (!!phrase.Words && !!phrase.Words[0]) {
                    firstWordOffset = phrase.Words[0].Offset;
                    break;
                }
            }
            if (!!firstWordOffset && firstWordOffset < baseOffset) {
                const offset = baseOffset - firstWordOffset;
                for (const details of this.privDetailedSpeechPhrase.NBest) {
                    if (!!details.Words) {
                        for (const word of details.Words) {
                            word.Offset += offset;
                        }
                    }
                    if (!!details.DisplayWords) {
                        for (const word of details.DisplayWords) {
                            word.Offset += offset;
                        }
                    }
                }
            }
        }
        return JSON.stringify(this.privDetailedSpeechPhrase);
    }
    get RecognitionStatus() {
        return this.privDetailedSpeechPhrase.RecognitionStatus;
    }
    get NBest() {
        return this.privDetailedSpeechPhrase.NBest;
    }
    get Duration() {
        return this.privDetailedSpeechPhrase.Duration;
    }
    get Offset() {
        return this.privDetailedSpeechPhrase.Offset;
    }
    get Language() {
        return this.privDetailedSpeechPhrase.PrimaryLanguage === undefined ? undefined : this.privDetailedSpeechPhrase.PrimaryLanguage.Language;
    }
    get LanguageDetectionConfidence() {
        return this.privDetailedSpeechPhrase.PrimaryLanguage === undefined ? undefined : this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence;
    }
    get Text() {
        if (!!this.privDetailedSpeechPhrase.NBest && this.privDetailedSpeechPhrase.NBest[0]) {
            return this.privDetailedSpeechPhrase.NBest[0].Display || this.privDetailedSpeechPhrase.NBest[0].DisplayText;
        }
        return this.privDetailedSpeechPhrase.DisplayText;
    }
    get SpeakerId() {
        return this.privDetailedSpeechPhrase.SpeakerId;
    }
}

//# sourceMappingURL=DetailedSpeechPhrase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RecognitionStatus": () => (/* binding */ RecognitionStatus),
/* harmony export */   "SynthesisStatus": () => (/* binding */ SynthesisStatus)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * @class SynthesisStatus
 * @private
 */
var SynthesisStatus;
(function (SynthesisStatus) {
    /**
     * The response contains valid audio data.
     * @member SynthesisStatus.Success
     */
    SynthesisStatus[SynthesisStatus["Success"] = 0] = "Success";
    /**
     * Indicates the end of audio data. No valid audio data is included in the message.
     * @member SynthesisStatus.SynthesisEnd
     */
    SynthesisStatus[SynthesisStatus["SynthesisEnd"] = 1] = "SynthesisEnd";
    /**
     * Indicates an error occurred during synthesis data processing.
     * @member SynthesisStatus.Error
     */
    SynthesisStatus[SynthesisStatus["Error"] = 2] = "Error";
})(SynthesisStatus || (SynthesisStatus = {}));
var RecognitionStatus;
(function (RecognitionStatus) {
    RecognitionStatus[RecognitionStatus["Success"] = 0] = "Success";
    RecognitionStatus[RecognitionStatus["NoMatch"] = 1] = "NoMatch";
    RecognitionStatus[RecognitionStatus["InitialSilenceTimeout"] = 2] = "InitialSilenceTimeout";
    RecognitionStatus[RecognitionStatus["BabbleTimeout"] = 3] = "BabbleTimeout";
    RecognitionStatus[RecognitionStatus["Error"] = 4] = "Error";
    RecognitionStatus[RecognitionStatus["EndOfDictation"] = 5] = "EndOfDictation";
    RecognitionStatus[RecognitionStatus["TooManyRequests"] = 6] = "TooManyRequests";
    RecognitionStatus[RecognitionStatus["BadRequest"] = 7] = "BadRequest";
    RecognitionStatus[RecognitionStatus["Forbidden"] = 8] = "Forbidden";
})(RecognitionStatus || (RecognitionStatus = {}));

//# sourceMappingURL=Enums.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/IntentResponse.js":
/*!********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/IntentResponse.js ***!
  \********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IntentResponse": () => (/* binding */ IntentResponse)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// response
class IntentResponse {
    constructor(json) {
        if (json === "") {
            this.privIntentResponse = {};
        }
        else {
            this.privIntentResponse = JSON.parse(json);
        }
    }
    static fromJSON(json) {
        return new IntentResponse(json);
    }
    get query() {
        return this.privIntentResponse.query;
    }
    get topScoringIntent() {
        return this.privIntentResponse.topScoringIntent;
    }
    get entities() {
        return this.privIntentResponse.entities;
    }
}

//# sourceMappingURL=IntentResponse.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js":
/*!************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js ***!
  \************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SimpleSpeechPhrase": () => (/* binding */ SimpleSpeechPhrase)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class SimpleSpeechPhrase {
    constructor(json) {
        this.privSimpleSpeechPhrase = JSON.parse(json);
        this.privSimpleSpeechPhrase.RecognitionStatus = _Exports__WEBPACK_IMPORTED_MODULE_0__.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus];
    }
    static fromJSON(json) {
        return new SimpleSpeechPhrase(json);
    }
    get RecognitionStatus() {
        return this.privSimpleSpeechPhrase.RecognitionStatus;
    }
    get DisplayText() {
        return this.privSimpleSpeechPhrase.DisplayText;
    }
    get Offset() {
        return this.privSimpleSpeechPhrase.Offset;
    }
    get Duration() {
        return this.privSimpleSpeechPhrase.Duration;
    }
    get Language() {
        return this.privSimpleSpeechPhrase.PrimaryLanguage === undefined ? undefined : this.privSimpleSpeechPhrase.PrimaryLanguage.Language;
    }
    get LanguageDetectionConfidence() {
        return this.privSimpleSpeechPhrase.PrimaryLanguage === undefined ? undefined : this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence;
    }
    get SpeakerId() {
        return this.privSimpleSpeechPhrase.SpeakerId;
    }
}

//# sourceMappingURL=SimpleSpeechPhrase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeakerResponse.js":
/*!*********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeakerResponse.js ***!
  \*********************************************************************************************************************************/
/***/ (() => {

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */

//# sourceMappingURL=SpeakerResponse.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechDetected.js":
/*!********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechDetected.js ***!
  \********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechDetected": () => (/* binding */ SpeechDetected)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class SpeechDetected {
    constructor(json) {
        this.privSpeechStartDetected = JSON.parse(json);
    }
    static fromJSON(json) {
        return new SpeechDetected(json);
    }
    get Offset() {
        return this.privSpeechStartDetected.Offset;
    }
}

//# sourceMappingURL=SpeechDetected.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechHypothesis.js":
/*!**********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechHypothesis.js ***!
  \**********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechHypothesis": () => (/* binding */ SpeechHypothesis)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class SpeechHypothesis {
    constructor(json) {
        this.privSpeechHypothesis = JSON.parse(json);
    }
    static fromJSON(json) {
        return new SpeechHypothesis(json);
    }
    get Text() {
        return this.privSpeechHypothesis.Text;
    }
    get Offset() {
        return this.privSpeechHypothesis.Offset;
    }
    get Duration() {
        return this.privSpeechHypothesis.Duration;
    }
    get Language() {
        return this.privSpeechHypothesis.PrimaryLanguage === undefined ? undefined : this.privSpeechHypothesis.PrimaryLanguage.Language;
    }
    get LanguageDetectionConfidence() {
        return this.privSpeechHypothesis.PrimaryLanguage === undefined ? undefined : this.privSpeechHypothesis.PrimaryLanguage.Confidence;
    }
    get SpeakerId() {
        return this.privSpeechHypothesis.SpeakerId;
    }
}

//# sourceMappingURL=SpeechHypothesis.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechKeyword.js":
/*!*******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechKeyword.js ***!
  \*******************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechKeyword": () => (/* binding */ SpeechKeyword)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class SpeechKeyword {
    constructor(json) {
        this.privSpeechKeyword = JSON.parse(json);
    }
    static fromJSON(json) {
        return new SpeechKeyword(json);
    }
    get Status() {
        return this.privSpeechKeyword.Status;
    }
    get Text() {
        return this.privSpeechKeyword.Text;
    }
    get Offset() {
        return this.privSpeechKeyword.Offset;
    }
    get Duration() {
        return this.privSpeechKeyword.Duration;
    }
}

//# sourceMappingURL=SpeechKeyword.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SynthesisAudioMetadata.js":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SynthesisAudioMetadata.js ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MetadataType": () => (/* binding */ MetadataType),
/* harmony export */   "SynthesisAudioMetadata": () => (/* binding */ SynthesisAudioMetadata)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var MetadataType;
(function (MetadataType) {
    MetadataType["WordBoundary"] = "WordBoundary";
    MetadataType["Bookmark"] = "Bookmark";
    MetadataType["Viseme"] = "Viseme";
    MetadataType["SentenceBoundary"] = "SentenceBoundary";
    MetadataType["SessionEnd"] = "SessionEnd";
})(MetadataType || (MetadataType = {}));
class SynthesisAudioMetadata {
    constructor(json) {
        this.privSynthesisAudioMetadata = JSON.parse(json);
    }
    static fromJSON(json) {
        return new SynthesisAudioMetadata(json);
    }
    get Metadata() {
        return this.privSynthesisAudioMetadata.Metadata;
    }
}

//# sourceMappingURL=SynthesisAudioMetadata.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationHypothesis.js":
/*!***************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationHypothesis.js ***!
  \***************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TranslationHypothesis": () => (/* binding */ TranslationHypothesis)
/* harmony export */ });
/* harmony import */ var _TranslationStatus__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../TranslationStatus */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationStatus.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class TranslationHypothesis {
    constructor(json) {
        this.privTranslationHypothesis = JSON.parse(json);
        this.privTranslationHypothesis.Translation.TranslationStatus = _TranslationStatus__WEBPACK_IMPORTED_MODULE_0__.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus];
    }
    static fromJSON(json) {
        return new TranslationHypothesis(json);
    }
    get Duration() {
        return this.privTranslationHypothesis.Duration;
    }
    get Offset() {
        return this.privTranslationHypothesis.Offset;
    }
    get Text() {
        return this.privTranslationHypothesis.Text;
    }
    get Translation() {
        return this.privTranslationHypothesis.Translation;
    }
}

//# sourceMappingURL=TranslationHypothesis.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationPhrase.js":
/*!***********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationPhrase.js ***!
  \***********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TranslationPhrase": () => (/* binding */ TranslationPhrase)
/* harmony export */ });
/* harmony import */ var _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../sdk/Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js");
/* harmony import */ var _TranslationStatus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../TranslationStatus */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationStatus.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



class TranslationPhrase {
    constructor(phrase) {
        this.privTranslationPhrase = phrase;
        this.privTranslationPhrase.RecognitionStatus = _Exports__WEBPACK_IMPORTED_MODULE_0__.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus];
        if (this.privTranslationPhrase.Translation !== undefined) {
            this.privTranslationPhrase.Translation.TranslationStatus = _TranslationStatus__WEBPACK_IMPORTED_MODULE_1__.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus];
        }
    }
    static fromJSON(json) {
        return new TranslationPhrase(JSON.parse(json));
    }
    static fromTranslationResponse(translationResponse) {
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__.Contracts.throwIfNullOrUndefined(translationResponse, "translationResponse");
        const phrase = translationResponse.SpeechPhrase;
        translationResponse.SpeechPhrase = undefined;
        phrase.Translation = translationResponse;
        phrase.Text = phrase.DisplayText;
        return new TranslationPhrase(phrase);
    }
    get RecognitionStatus() {
        return this.privTranslationPhrase.RecognitionStatus;
    }
    get Offset() {
        return this.privTranslationPhrase.Offset;
    }
    get Duration() {
        return this.privTranslationPhrase.Duration;
    }
    get Text() {
        return this.privTranslationPhrase.Text;
    }
    get Language() {
        var _a;
        return (_a = this.privTranslationPhrase.PrimaryLanguage) === null || _a === void 0 ? void 0 : _a.Language;
    }
    get Confidence() {
        var _a;
        return (_a = this.privTranslationPhrase.PrimaryLanguage) === null || _a === void 0 ? void 0 : _a.Confidence;
    }
    get Translation() {
        return this.privTranslationPhrase.Translation;
    }
}

//# sourceMappingURL=TranslationPhrase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationSynthesisEnd.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationSynthesisEnd.js ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TranslationSynthesisEnd": () => (/* binding */ TranslationSynthesisEnd)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class TranslationSynthesisEnd {
    constructor(json) {
        this.privSynthesisEnd = JSON.parse(json);
        if (!!this.privSynthesisEnd.SynthesisStatus) {
            this.privSynthesisEnd.SynthesisStatus = _Exports__WEBPACK_IMPORTED_MODULE_0__.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus];
        }
        if (!!this.privSynthesisEnd.Status) {
            this.privSynthesisEnd.SynthesisStatus = _Exports__WEBPACK_IMPORTED_MODULE_0__.SynthesisStatus[this.privSynthesisEnd.Status];
        }
    }
    static fromJSON(json) {
        return new TranslationSynthesisEnd(json);
    }
    get SynthesisStatus() {
        return this.privSynthesisEnd.SynthesisStatus;
    }
    get FailureReason() {
        return this.privSynthesisEnd.FailureReason;
    }
}

//# sourceMappingURL=TranslationSynthesisEnd.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TurnStatusPayload.js":
/*!***********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TurnStatusPayload.js ***!
  \***********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TurnStatusResponsePayload": () => (/* binding */ TurnStatusResponsePayload)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class TurnStatusResponsePayload {
    constructor(json) {
        this.privMessageStatusResponse = JSON.parse(json);
    }
    static fromJSON(json) {
        return new TurnStatusResponsePayload(json);
    }
    get interactionId() {
        return this.privMessageStatusResponse.interactionId;
    }
    get conversationId() {
        return this.privMessageStatusResponse.conversationId;
    }
    get statusCode() {
        // Payloads may contain a limited set of textual representations or a numeric status
        // code. The textual values are here converted into numeric ones.
        switch (this.privMessageStatusResponse.statusCode) {
            case "Success":
                return 200;
            case "Failed":
                return 400;
            case "TimedOut":
                return 429;
            default:
                // eslint-disable-next-line @typescript-eslint/no-unsafe-return
                return this.privMessageStatusResponse.statusCode;
        }
    }
}

//# sourceMappingURL=TurnStatusPayload.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceRecognizerBase.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceRecognizerBase.js ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ServiceRecognizerBase": () => (/* binding */ ServiceRecognizerBase)
/* harmony export */ });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ReplayableAudioNode.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/EventSource.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Timeout.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionEvents.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IConnection.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionEventArgs.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RequestSession.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DynamicGrammarBuilder.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechContext.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AgentConfig.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechDetected.js");
/* harmony import */ var _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./SpeechConnectionMessage.Internal */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionMessage.Internal.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





class ServiceRecognizerBase {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, recognizer) {
        // A promise for a configured connection.
        // Do not consume directly, call fetchConnection instead.
        this.privConnectionConfigurationPromise = undefined;
        // A promise for a connection, but one that has not had the speech context sent yet.
        // Do not consume directly, call fetchConnection instead.
        this.privConnectionPromise = undefined;
        this.privSetTimeout = setTimeout;
        this.privIsLiveAudio = false;
        this.recognizeOverride = undefined;
        this.recognizeSpeaker = undefined;
        this.disconnectOverride = undefined;
        this.receiveMessageOverride = undefined;
        this.sendPrePayloadJSONOverride = undefined;
        this.postConnectImplOverride = undefined;
        this.configConnectionOverride = undefined;
        this.handleSpeechPhraseMessage = undefined;
        this.handleSpeechHypothesisMessage = undefined;
        if (!authentication) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__.ArgumentNullError("authentication");
        }
        if (!connectionFactory) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__.ArgumentNullError("connectionFactory");
        }
        if (!audioSource) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__.ArgumentNullError("audioSource");
        }
        if (!recognizerConfig) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__.ArgumentNullError("recognizerConfig");
        }
        this.privMustReportEndOfStream = false;
        this.privAuthentication = authentication;
        this.privConnectionFactory = connectionFactory;
        this.privAudioSource = audioSource;
        this.privRecognizerConfig = recognizerConfig;
        this.privIsDisposed = false;
        this.privRecognizer = recognizer;
        this.privRequestSession = new _Exports__WEBPACK_IMPORTED_MODULE_1__.RequestSession(this.privAudioSource.id());
        this.privConnectionEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.EventSource();
        this.privServiceEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.EventSource();
        this.privDynamicGrammar = new _Exports__WEBPACK_IMPORTED_MODULE_3__.DynamicGrammarBuilder();
        this.privSpeechContext = new _Exports__WEBPACK_IMPORTED_MODULE_4__.SpeechContext(this.privDynamicGrammar);
        this.privAgentConfig = new _Exports__WEBPACK_IMPORTED_MODULE_5__.AgentConfig();
        if (typeof (Blob) !== "undefined" && typeof (Worker) !== "undefined") {
            this.privSetTimeout = _common_Exports__WEBPACK_IMPORTED_MODULE_6__.Timeout.setTimeout;
        }
        this.connectionEvents.attach((connectionEvent) => {
            if (connectionEvent.name === "ConnectionClosedEvent") {
                const connectionClosedEvent = connectionEvent;
                if (connectionClosedEvent.statusCode === 1003 ||
                    connectionClosedEvent.statusCode === 1007 ||
                    connectionClosedEvent.statusCode === 1002 ||
                    connectionClosedEvent.statusCode === 4000 ||
                    this.privRequestSession.numConnectionAttempts > this.privRecognizerConfig.maxRetryCount) {
                    void this.cancelRecognitionLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_7__.CancellationReason.Error, connectionClosedEvent.statusCode === 1007 ? _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.CancellationErrorCode.BadRequestParameters : _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.CancellationErrorCode.ConnectionFailure, `${connectionClosedEvent.reason} websocket error code: ${connectionClosedEvent.statusCode}`);
                }
            }
        });
        const phraseDetection = {};
        if (recognizerConfig.autoDetectSourceLanguages !== undefined) {
            const sourceLanguages = recognizerConfig.autoDetectSourceLanguages.split(",");
            let speechContextLidMode;
            if (recognizerConfig.languageIdMode === "Continuous") {
                speechContextLidMode = "DetectContinuous";
            }
            else { // recognizerConfig.languageIdMode === "AtStart"
                speechContextLidMode = "DetectAtAudioStart";
            }
            this.privSpeechContext.setSection("languageId", {
                Priority: "PrioritizeLatency",
                languages: sourceLanguages,
                mode: speechContextLidMode,
                onSuccess: { action: "Recognize" },
                onUnknown: { action: "None" }
            });
            this.privSpeechContext.setSection("phraseOutput", {
                interimResults: {
                    resultType: "Auto"
                },
                phraseResults: {
                    resultType: "Always"
                }
            });
            const customModels = recognizerConfig.sourceLanguageModels;
            if (customModels !== undefined) {
                phraseDetection.customModels = customModels;
                phraseDetection.onInterim = { action: "None" };
                phraseDetection.onSuccess = { action: "None" };
            }
        }
        const isEmpty = (obj) => {
            // eslint-disable-next-line guard-for-in, brace-style
            for (const x in obj) {
                return false;
            }
            return true;
        };
        if (!isEmpty(phraseDetection)) {
            this.privSpeechContext.setSection("phraseDetection", phraseDetection);
        }
    }
    setSpeechSegmentationTimeout() {
        const speechSegmentationTimeout = this.privRecognizerConfig.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.PropertyId.Speech_SegmentationSilenceTimeoutMs, undefined);
        if (speechSegmentationTimeout !== undefined) {
            const mode = this.recognitionMode === _Exports__WEBPACK_IMPORTED_MODULE_10__.RecognitionMode.Conversation ? "CONVERSATION" :
                this.recognitionMode === _Exports__WEBPACK_IMPORTED_MODULE_10__.RecognitionMode.Dictation ? "DICTATION" : "INTERACTIVE";
            const segmentationSilenceTimeoutMs = parseInt(speechSegmentationTimeout, 10);
            const phraseDetection = this.privSpeechContext.getSection("phraseDetection");
            phraseDetection.mode = mode;
            phraseDetection[mode] = {
                segmentation: {
                    mode: "Custom",
                    segmentationSilenceTimeoutMs
                }
            };
            this.privSpeechContext.setSection("phraseDetection", phraseDetection);
        }
    }
    get audioSource() {
        return this.privAudioSource;
    }
    get speechContext() {
        return this.privSpeechContext;
    }
    get dynamicGrammar() {
        return this.privDynamicGrammar;
    }
    get agentConfig() {
        return this.privAgentConfig;
    }
    set conversationTranslatorToken(token) {
        this.privRecognizerConfig.parameters.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.PropertyId.ConversationTranslator_Token, token);
    }
    set voiceProfileType(type) {
        this.privRecognizerConfig.parameters.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.PropertyId.SpeechServiceConnection_SpeakerIdMode, type);
    }
    set authentication(auth) {
        this.privAuthentication = this.authentication;
    }
    isDisposed() {
        return this.privIsDisposed;
    }
    dispose(reason) {
        return __awaiter(this, void 0, void 0, function* () {
            this.privIsDisposed = true;
            if (this.privConnectionConfigurationPromise !== undefined) {
                try {
                    const connection = yield this.privConnectionConfigurationPromise;
                    yield connection.dispose(reason);
                }
                catch (error) {
                    // The connection is in a bad state. But we're trying to kill it, so...
                    return;
                }
            }
        });
    }
    get connectionEvents() {
        return this.privConnectionEvents;
    }
    get serviceEvents() {
        return this.privServiceEvents;
    }
    get recognitionMode() {
        return this.privRecognizerConfig.recognitionMode;
    }
    recognize(recoMode, successCallback, errorCallBack) {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.recognizeOverride !== undefined) {
                yield this.recognizeOverride(recoMode, successCallback, errorCallBack);
                return;
            }
            // Clear the existing configuration promise to force a re-transmission of config and context.
            this.privConnectionConfigurationPromise = undefined;
            this.privRecognizerConfig.recognitionMode = recoMode;
            this.setSpeechSegmentationTimeout();
            this.privSuccessCallback = successCallback;
            this.privErrorCallback = errorCallBack;
            this.privRequestSession.startNewRecognition();
            this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);
            // Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
            const conPromise = this.connectImpl();
            let audioNode;
            try {
                const audioStreamNode = yield this.audioSource.attach(this.privRequestSession.audioNodeId);
                const format = yield this.audioSource.format;
                const deviceInfo = yield this.audioSource.deviceInfo;
                this.privIsLiveAudio = deviceInfo.type && deviceInfo.type === _Exports__WEBPACK_IMPORTED_MODULE_10__.type.Microphones;
                audioNode = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_11__.ReplayableAudioNode(audioStreamNode, format.avgBytesPerSec);
                yield this.privRequestSession.onAudioSourceAttachCompleted(audioNode, false);
                this.privRecognizerConfig.SpeechServiceConfig.Context.audio = { source: deviceInfo };
            }
            catch (error) {
                yield this.privRequestSession.onStopRecognizing();
                throw error;
            }
            try {
                yield conPromise;
            }
            catch (error) {
                yield this.cancelRecognitionLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_7__.CancellationReason.Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.CancellationErrorCode.ConnectionFailure, error);
                return;
            }
            const sessionStartEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_12__.SessionEventArgs(this.privRequestSession.sessionId);
            if (!!this.privRecognizer.sessionStarted) {
                this.privRecognizer.sessionStarted(this.privRecognizer, sessionStartEventArgs);
            }
            void this.receiveMessage();
            const audioSendPromise = this.sendAudio(audioNode);
            audioSendPromise.catch((error) => __awaiter(this, void 0, void 0, function* () {
                yield this.cancelRecognitionLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_7__.CancellationReason.Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.CancellationErrorCode.RuntimeError, error);
            }));
            return;
        });
    }
    stopRecognizing() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privRequestSession.isRecognizing) {
                try {
                    yield this.audioSource.turnOff();
                    yield this.sendFinalAudio();
                    yield this.privRequestSession.onStopRecognizing();
                    yield this.privRequestSession.turnCompletionPromise;
                }
                finally {
                    yield this.privRequestSession.dispose();
                }
            }
            return;
        });
    }
    connect() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.connectImpl();
            return Promise.resolve();
        });
    }
    connectAsync(cb, err) {
        this.connectImpl().then(() => {
            try {
                if (!!cb) {
                    cb();
                }
            }
            catch (e) {
                if (!!err) {
                    err(e);
                }
            }
        }, (reason) => {
            try {
                if (!!err) {
                    err(reason);
                }
                /* eslint-disable no-empty */
            }
            catch (error) {
            }
        });
    }
    disconnect() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.cancelRecognitionLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_7__.CancellationReason.Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.CancellationErrorCode.NoError, "Disconnecting");
            if (this.disconnectOverride !== undefined) {
                yield this.disconnectOverride();
            }
            if (this.privConnectionPromise !== undefined) {
                try {
                    yield (yield this.privConnectionPromise).dispose();
                }
                catch (error) {
                }
            }
            this.privConnectionPromise = undefined;
        });
    }
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    sendMessage(message) {
        return;
    }
    sendNetworkMessage(path, payload) {
        return __awaiter(this, void 0, void 0, function* () {
            const type = typeof payload === "string" ? _common_Exports__WEBPACK_IMPORTED_MODULE_13__.MessageType.Text : _common_Exports__WEBPACK_IMPORTED_MODULE_13__.MessageType.Binary;
            const contentType = typeof payload === "string" ? "application/json" : "";
            const connection = yield this.fetchConnection();
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_14__.SpeechConnectionMessage(type, path, this.privRequestSession.requestId, contentType, payload));
        });
    }
    set activityTemplate(messagePayload) {
        this.privActivityTemplate = messagePayload;
    }
    get activityTemplate() {
        return this.privActivityTemplate;
    }
    sendTelemetryData() {
        return __awaiter(this, void 0, void 0, function* () {
            const telemetryData = this.privRequestSession.getTelemetry();
            if (ServiceRecognizerBase.telemetryDataEnabled !== true ||
                this.privIsDisposed ||
                null === telemetryData) {
                return;
            }
            if (!!ServiceRecognizerBase.telemetryData) {
                try {
                    ServiceRecognizerBase.telemetryData(telemetryData);
                    /* eslint-disable no-empty */
                }
                catch (_a) { }
            }
            const connection = yield this.fetchConnection();
            yield connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_14__.SpeechConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_13__.MessageType.Text, "telemetry", this.privRequestSession.requestId, "application/json", telemetryData));
        });
    }
    // Cancels recognition.
    cancelRecognitionLocal(cancellationReason, errorCode, error) {
        return __awaiter(this, void 0, void 0, function* () {
            if (!!this.privRequestSession.isRecognizing) {
                yield this.privRequestSession.onStopRecognizing();
                this.cancelRecognition(this.privRequestSession.sessionId, this.privRequestSession.requestId, cancellationReason, errorCode, error);
            }
        });
    }
    receiveMessage() {
        return __awaiter(this, void 0, void 0, function* () {
            try {
                if (this.privIsDisposed) {
                    // We're done.
                    return;
                }
                let connection = yield this.fetchConnection();
                const message = yield connection.read();
                if (this.receiveMessageOverride !== undefined) {
                    return this.receiveMessageOverride();
                }
                // indicates we are draining the queue and it came with no message;
                if (!message) {
                    if (!this.privRequestSession.isRecognizing) {
                        return;
                    }
                    else {
                        return this.receiveMessage();
                    }
                }
                this.privServiceHasSentMessage = true;
                const connectionMessage = _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_14__.SpeechConnectionMessage.fromConnectionMessage(message);
                if (connectionMessage.requestId.toLowerCase() === this.privRequestSession.requestId.toLowerCase()) {
                    switch (connectionMessage.path.toLowerCase()) {
                        case "turn.start":
                            this.privMustReportEndOfStream = true;
                            this.privRequestSession.onServiceTurnStartResponse();
                            break;
                        case "speech.startdetected":
                            const speechStartDetected = _Exports__WEBPACK_IMPORTED_MODULE_15__.SpeechDetected.fromJSON(connectionMessage.textBody);
                            const speechStartEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_16__.RecognitionEventArgs(speechStartDetected.Offset, this.privRequestSession.sessionId);
                            if (!!this.privRecognizer.speechStartDetected) {
                                this.privRecognizer.speechStartDetected(this.privRecognizer, speechStartEventArgs);
                            }
                            break;
                        case "speech.enddetected":
                            let json;
                            if (connectionMessage.textBody.length > 0) {
                                json = connectionMessage.textBody;
                            }
                            else {
                                // If the request was empty, the JSON returned is empty.
                                json = "{ Offset: 0 }";
                            }
                            const speechStopDetected = _Exports__WEBPACK_IMPORTED_MODULE_15__.SpeechDetected.fromJSON(json);
                            const speechStopEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_16__.RecognitionEventArgs(speechStopDetected.Offset + this.privRequestSession.currentTurnAudioOffset, this.privRequestSession.sessionId);
                            if (!!this.privRecognizer.speechEndDetected) {
                                this.privRecognizer.speechEndDetected(this.privRecognizer, speechStopEventArgs);
                            }
                            break;
                        case "turn.end":
                            yield this.sendTelemetryData();
                            if (this.privRequestSession.isSpeechEnded && this.privMustReportEndOfStream) {
                                this.privMustReportEndOfStream = false;
                                yield this.cancelRecognitionLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_7__.CancellationReason.EndOfStream, _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.CancellationErrorCode.NoError, undefined);
                            }
                            const sessionStopEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_12__.SessionEventArgs(this.privRequestSession.sessionId);
                            yield this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition);
                            if (!this.privRecognizerConfig.isContinuousRecognition || this.privRequestSession.isSpeechEnded || !this.privRequestSession.isRecognizing) {
                                if (!!this.privRecognizer.sessionStopped) {
                                    this.privRecognizer.sessionStopped(this.privRecognizer, sessionStopEventArgs);
                                }
                                return;
                            }
                            else {
                                connection = yield this.fetchConnection();
                                yield this.sendPrePayloadJSON(connection);
                            }
                            break;
                        default:
                            if (!(yield this.processTypeSpecificMessages(connectionMessage))) {
                                // here are some messages that the derived class has not processed, dispatch them to connect class
                                if (!!this.privServiceEvents) {
                                    this.serviceEvents.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_17__.ServiceEvent(connectionMessage.path.toLowerCase(), connectionMessage.textBody));
                                }
                            }
                    }
                }
                return this.receiveMessage();
            }
            catch (error) {
                return null;
            }
        });
    }
    sendSpeechContext(connection, generateNewRequestId) {
        const speechContextJson = this.speechContext.toJSON();
        if (generateNewRequestId) {
            this.privRequestSession.onSpeechContext();
        }
        if (speechContextJson) {
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_14__.SpeechConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_13__.MessageType.Text, "speech.context", this.privRequestSession.requestId, "application/json", speechContextJson));
        }
        return;
    }
    noOp() {
        // operation not supported
        return;
    }
    // Encapsulated for derived service recognizers that need to send additional JSON
    sendPrePayloadJSON(connection, generateNewRequestId = true) {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.sendPrePayloadJSONOverride !== undefined) {
                return this.sendPrePayloadJSONOverride(connection);
            }
            yield this.sendSpeechContext(connection, generateNewRequestId);
            yield this.sendWaveHeader(connection);
            return;
        });
    }
    sendWaveHeader(connection) {
        return __awaiter(this, void 0, void 0, function* () {
            const format = yield this.audioSource.format;
            // this.writeBufferToConsole(format.header);
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_14__.SpeechConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_13__.MessageType.Binary, "audio", this.privRequestSession.requestId, "audio/x-wav", format.header));
        });
    }
    // Establishes a websocket connection to the end point.
    connectImpl() {
        if (this.privConnectionPromise !== undefined) {
            return this.privConnectionPromise.then((connection) => {
                if (connection.state() === _common_Exports__WEBPACK_IMPORTED_MODULE_18__.ConnectionState.Disconnected) {
                    this.privConnectionId = null;
                    this.privConnectionPromise = undefined;
                    this.privServiceHasSentMessage = false;
                    return this.connectImpl();
                }
                return this.privConnectionPromise;
            }, () => {
                this.privConnectionId = null;
                this.privConnectionPromise = undefined;
                this.privServiceHasSentMessage = false;
                return this.connectImpl();
            });
        }
        this.privConnectionPromise = this.retryableConnect();
        // Attach an empty handler to allow the promise to run in the background while
        // other startup events happen. It'll eventually be awaited on.
        // eslint-disable-next-line @typescript-eslint/no-empty-function
        this.privConnectionPromise.catch(() => { });
        if (this.postConnectImplOverride !== undefined) {
            return this.postConnectImplOverride(this.privConnectionPromise);
        }
        return this.privConnectionPromise;
    }
    sendSpeechServiceConfig(connection, requestSession, SpeechServiceConfigJson) {
        requestSession.onSpeechContext();
        // filter out anything that is not required for the service to work.
        if (ServiceRecognizerBase.telemetryDataEnabled !== true) {
            const withTelemetry = JSON.parse(SpeechServiceConfigJson);
            const replacement = {
                context: {
                    system: withTelemetry.context.system,
                },
            };
            SpeechServiceConfigJson = JSON.stringify(replacement);
        }
        if (this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2", "false").toLowerCase() === "true") {
            const json = JSON.parse(SpeechServiceConfigJson);
            json.context.DisableReferenceChannel = "True";
            json.context.MicSpec = "1_0_0";
            SpeechServiceConfigJson = JSON.stringify(json);
        }
        if (SpeechServiceConfigJson) {
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_14__.SpeechConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_13__.MessageType.Text, "speech.config", requestSession.requestId, "application/json", SpeechServiceConfigJson));
        }
        return;
    }
    fetchConnection() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privConnectionConfigurationPromise !== undefined) {
                return this.privConnectionConfigurationPromise.then((connection) => {
                    if (connection.state() === _common_Exports__WEBPACK_IMPORTED_MODULE_18__.ConnectionState.Disconnected) {
                        this.privConnectionId = null;
                        this.privConnectionConfigurationPromise = undefined;
                        this.privServiceHasSentMessage = false;
                        return this.fetchConnection();
                    }
                    return this.privConnectionConfigurationPromise;
                }, () => {
                    this.privConnectionId = null;
                    this.privConnectionConfigurationPromise = undefined;
                    this.privServiceHasSentMessage = false;
                    return this.fetchConnection();
                });
            }
            this.privConnectionConfigurationPromise = this.configureConnection();
            return yield this.privConnectionConfigurationPromise;
        });
    }
    sendAudio(audioStreamNode) {
        return __awaiter(this, void 0, void 0, function* () {
            const audioFormat = yield this.audioSource.format;
            // The time we last sent data to the service.
            let nextSendTime = Date.now();
            // Max amount to send before we start to throttle
            const fastLaneSizeMs = this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs", "5000");
            const maxSendUnthrottledBytes = audioFormat.avgBytesPerSec / 1000 * parseInt(fastLaneSizeMs, 10);
            const startRecogNumber = this.privRequestSession.recogNumber;
            const readAndUploadCycle = () => __awaiter(this, void 0, void 0, function* () {
                // If speech is done, stop sending audio.
                if (!this.privIsDisposed &&
                    !this.privRequestSession.isSpeechEnded &&
                    this.privRequestSession.isRecognizing &&
                    this.privRequestSession.recogNumber === startRecogNumber) {
                    const connection = yield this.fetchConnection();
                    const audioStreamChunk = yield audioStreamNode.read();
                    // we have a new audio chunk to upload.
                    if (this.privRequestSession.isSpeechEnded) {
                        // If service already recognized audio end then don't send any more audio
                        return;
                    }
                    let payload;
                    let sendDelay;
                    if (!audioStreamChunk || audioStreamChunk.isEnd) {
                        payload = null;
                        sendDelay = 0;
                    }
                    else {
                        payload = audioStreamChunk.buffer;
                        this.privRequestSession.onAudioSent(payload.byteLength);
                        if (maxSendUnthrottledBytes >= this.privRequestSession.bytesSent) {
                            sendDelay = 0;
                        }
                        else {
                            sendDelay = Math.max(0, nextSendTime - Date.now());
                        }
                    }
                    if (0 !== sendDelay) {
                        yield this.delay(sendDelay);
                    }
                    if (payload !== null) {
                        nextSendTime = Date.now() + (payload.byteLength * 1000 / (audioFormat.avgBytesPerSec * 2));
                    }
                    // Are we still alive?
                    if (!this.privIsDisposed &&
                        !this.privRequestSession.isSpeechEnded &&
                        this.privRequestSession.isRecognizing &&
                        this.privRequestSession.recogNumber === startRecogNumber) {
                        connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_14__.SpeechConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_13__.MessageType.Binary, "audio", this.privRequestSession.requestId, null, payload)).catch(() => {
                            // eslint-disable-next-line @typescript-eslint/no-empty-function
                            this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(() => { });
                        });
                        if (!(audioStreamChunk === null || audioStreamChunk === void 0 ? void 0 : audioStreamChunk.isEnd)) {
                            // this.writeBufferToConsole(payload);
                            // Regardless of success or failure, schedule the next upload.
                            // If the underlying connection was broken, the next cycle will
                            // get a new connection and re-transmit missing audio automatically.
                            return readAndUploadCycle();
                        }
                        else {
                            // the audio stream has been closed, no need to schedule next
                            // read-upload cycle.
                            if (!this.privIsLiveAudio) {
                                this.privRequestSession.onSpeechEnded();
                            }
                        }
                    }
                }
            });
            return readAndUploadCycle();
        });
    }
    retryableConnect() {
        return __awaiter(this, void 0, void 0, function* () {
            let isUnAuthorized = false;
            this.privAuthFetchEventId = (0,_common_Exports__WEBPACK_IMPORTED_MODULE_19__.createNoDashGuid)();
            const sessionId = this.privRequestSession.sessionId;
            this.privConnectionId = (sessionId !== undefined) ? sessionId : (0,_common_Exports__WEBPACK_IMPORTED_MODULE_19__.createNoDashGuid)();
            this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId, this.privConnectionId);
            let lastStatusCode = 0;
            let lastReason = "";
            while (this.privRequestSession.numConnectionAttempts <= this.privRecognizerConfig.maxRetryCount) {
                // Get the auth information for the connection. This is a bit of overkill for the current API surface, but leaving the plumbing in place to be able to raise a developer-customer
                // facing event when a connection fails to let them try and provide new auth information.
                const authPromise = isUnAuthorized ? this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId) : this.privAuthentication.fetch(this.privAuthFetchEventId);
                const auth = yield authPromise;
                yield this.privRequestSession.onAuthCompleted(false);
                // Create the connection
                const connection = this.privConnectionFactory.create(this.privRecognizerConfig, auth, this.privConnectionId);
                // Attach the telemetry handlers.
                this.privRequestSession.listenForServiceTelemetry(connection.events);
                // Attach to the underlying event. No need to hold onto the detach pointers as in the event the connection goes away,
                // it'll stop sending events.
                connection.events.attach((event) => {
                    this.connectionEvents.onEvent(event);
                });
                const response = yield connection.open();
                // 200 == everything is fine.
                if (response.statusCode === 200) {
                    yield this.privRequestSession.onConnectionEstablishCompleted(response.statusCode);
                    return Promise.resolve(connection);
                }
                else if (response.statusCode === 1006) {
                    isUnAuthorized = true;
                }
                lastStatusCode = response.statusCode;
                lastReason = response.reason;
                this.privRequestSession.onRetryConnection();
            }
            yield this.privRequestSession.onConnectionEstablishCompleted(lastStatusCode, lastReason);
            return Promise.reject(`Unable to contact server. StatusCode: ${lastStatusCode}, ${this.privRecognizerConfig.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${lastReason}`);
        });
    }
    delay(delayMs) {
        return new Promise((resolve) => this.privSetTimeout(resolve, delayMs));
    }
    writeBufferToConsole(buffer) {
        let out = "Buffer Size: ";
        if (null === buffer) {
            out += "null";
        }
        else {
            const readView = new Uint8Array(buffer);
            out += `${buffer.byteLength}\r\n`;
            for (let i = 0; i < buffer.byteLength; i++) {
                out += readView[i].toString(16).padStart(2, "0") + " ";
                if (((i + 1) % 16) === 0) {
                    // eslint-disable-next-line no-console
                    console.info(out);
                    out = "";
                }
            }
        }
        // eslint-disable-next-line no-console
        console.info(out);
    }
    sendFinalAudio() {
        return __awaiter(this, void 0, void 0, function* () {
            const connection = yield this.fetchConnection();
            yield connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_14__.SpeechConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_13__.MessageType.Binary, "audio", this.privRequestSession.requestId, null, null));
            return;
        });
    }
    // Takes an established websocket connection to the endpoint and sends speech configuration information.
    configureConnection() {
        return __awaiter(this, void 0, void 0, function* () {
            const connection = yield this.connectImpl();
            if (this.configConnectionOverride !== undefined) {
                return this.configConnectionOverride(connection);
            }
            yield this.sendSpeechServiceConfig(connection, this.privRequestSession, this.privRecognizerConfig.SpeechServiceConfig.serialize());
            yield this.sendPrePayloadJSON(connection, false);
            return connection;
        });
    }
}
ServiceRecognizerBase.telemetryDataEnabled = true;

//# sourceMappingURL=ServiceRecognizerBase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceTelemetryListener.Internal.js":
/*!***********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceTelemetryListener.Internal.js ***!
  \***********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ServiceTelemetryListener": () => (/* binding */ ServiceTelemetryListener)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/AudioSourceEvents.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionEvents.js");
/* harmony import */ var _RecognitionEvents__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./RecognitionEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognitionEvents.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */


class ServiceTelemetryListener {
    constructor(requestId, audioSourceId, audioNodeId) {
        this.privIsDisposed = false;
        this.privListeningTriggerMetric = null;
        this.privMicMetric = null;
        this.privConnectionEstablishMetric = null;
        this.privRequestId = requestId;
        this.privAudioSourceId = audioSourceId;
        this.privAudioNodeId = audioNodeId;
        this.privReceivedMessages = {};
        this.privPhraseLatencies = [];
        this.privHypothesisLatencies = [];
    }
    phraseReceived(audioReceivedTime) {
        if (audioReceivedTime > 0) { // 0 indicates the time is unknown. Drop it.
            this.privPhraseLatencies.push(Date.now() - audioReceivedTime);
        }
    }
    hypothesisReceived(audioReceivedTime) {
        if (audioReceivedTime > 0) { // 0 indicates the time is unknown. Drop it.
            this.privHypothesisLatencies.push(Date.now() - audioReceivedTime);
        }
    }
    onEvent(e) {
        if (this.privIsDisposed) {
            return;
        }
        if (e instanceof _RecognitionEvents__WEBPACK_IMPORTED_MODULE_0__.RecognitionTriggeredEvent && e.requestId === this.privRequestId) {
            this.privListeningTriggerMetric = {
                End: e.eventTime,
                Name: "ListeningTrigger",
                Start: e.eventTime,
            };
        }
        if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_1__.AudioStreamNodeAttachingEvent && e.audioSourceId === this.privAudioSourceId && e.audioNodeId === this.privAudioNodeId) {
            this.privMicStartTime = e.eventTime;
        }
        if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_1__.AudioStreamNodeAttachedEvent && e.audioSourceId === this.privAudioSourceId && e.audioNodeId === this.privAudioNodeId) {
            this.privMicStartTime = e.eventTime;
        }
        if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_1__.AudioSourceErrorEvent && e.audioSourceId === this.privAudioSourceId) {
            if (!this.privMicMetric) {
                this.privMicMetric = {
                    End: e.eventTime,
                    Error: e.error,
                    Name: "Microphone",
                    Start: this.privMicStartTime,
                };
            }
        }
        if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_1__.AudioStreamNodeErrorEvent && e.audioSourceId === this.privAudioSourceId && e.audioNodeId === this.privAudioNodeId) {
            if (!this.privMicMetric) {
                this.privMicMetric = {
                    End: e.eventTime,
                    Error: e.error,
                    Name: "Microphone",
                    Start: this.privMicStartTime,
                };
            }
        }
        if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_1__.AudioStreamNodeDetachedEvent && e.audioSourceId === this.privAudioSourceId && e.audioNodeId === this.privAudioNodeId) {
            if (!this.privMicMetric) {
                this.privMicMetric = {
                    End: e.eventTime,
                    Name: "Microphone",
                    Start: this.privMicStartTime,
                };
            }
        }
        if (e instanceof _RecognitionEvents__WEBPACK_IMPORTED_MODULE_0__.ConnectingToServiceEvent && e.requestId === this.privRequestId) {
            this.privConnectionId = e.sessionId;
        }
        if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_2__.ConnectionStartEvent && e.connectionId === this.privConnectionId) {
            this.privConnectionStartTime = e.eventTime;
        }
        if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_2__.ConnectionEstablishedEvent && e.connectionId === this.privConnectionId) {
            if (!this.privConnectionEstablishMetric) {
                this.privConnectionEstablishMetric = {
                    End: e.eventTime,
                    Id: this.privConnectionId,
                    Name: "Connection",
                    Start: this.privConnectionStartTime,
                };
            }
        }
        if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_2__.ConnectionEstablishErrorEvent && e.connectionId === this.privConnectionId) {
            if (!this.privConnectionEstablishMetric) {
                this.privConnectionEstablishMetric = {
                    End: e.eventTime,
                    Error: this.getConnectionError(e.statusCode),
                    Id: this.privConnectionId,
                    Name: "Connection",
                    Start: this.privConnectionStartTime,
                };
            }
        }
        if (e instanceof _common_Exports__WEBPACK_IMPORTED_MODULE_2__.ConnectionMessageReceivedEvent && e.connectionId === this.privConnectionId) {
            if (e.message && e.message.headers && e.message.headers.path) {
                if (!this.privReceivedMessages[e.message.headers.path]) {
                    this.privReceivedMessages[e.message.headers.path] = new Array();
                }
                const maxMessagesToSend = 50;
                if (this.privReceivedMessages[e.message.headers.path].length < maxMessagesToSend) {
                    this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime);
                }
            }
        }
    }
    getTelemetry() {
        const metrics = new Array();
        if (this.privListeningTriggerMetric) {
            metrics.push(this.privListeningTriggerMetric);
        }
        if (this.privMicMetric) {
            metrics.push(this.privMicMetric);
        }
        if (this.privConnectionEstablishMetric) {
            metrics.push(this.privConnectionEstablishMetric);
        }
        if (this.privPhraseLatencies.length > 0) {
            metrics.push({
                PhraseLatencyMs: this.privPhraseLatencies,
            });
        }
        if (this.privHypothesisLatencies.length > 0) {
            metrics.push({
                FirstHypothesisLatencyMs: this.privHypothesisLatencies,
            });
        }
        const telemetry = {
            Metrics: metrics,
            ReceivedMessages: this.privReceivedMessages,
        };
        const json = JSON.stringify(telemetry);
        // We dont want to send the same telemetry again. So clean those out.
        this.privReceivedMessages = {};
        this.privListeningTriggerMetric = null;
        this.privMicMetric = null;
        this.privConnectionEstablishMetric = null;
        this.privPhraseLatencies = [];
        this.privHypothesisLatencies = [];
        return json;
    }
    // Determines if there are any telemetry events to send to the service.
    get hasTelemetry() {
        return (Object.keys(this.privReceivedMessages).length !== 0 ||
            this.privListeningTriggerMetric !== null ||
            this.privMicMetric !== null ||
            this.privConnectionEstablishMetric !== null ||
            this.privPhraseLatencies.length !== 0 ||
            this.privHypothesisLatencies.length !== 0);
    }
    dispose() {
        this.privIsDisposed = true;
    }
    getConnectionError(statusCode) {
        /*
        -- Websocket status codes --
        NormalClosure = 1000,
        EndpointUnavailable = 1001,
        ProtocolError = 1002,
        InvalidMessageType = 1003,
        Empty = 1005,
        InvalidPayloadData = 1007,
        PolicyViolation = 1008,
        MessageTooBig = 1009,
        MandatoryExtension = 1010,
        InternalServerError = 1011
        */
        switch (statusCode) {
            case 400:
            case 1002:
            case 1003:
            case 1005:
            case 1007:
            case 1008:
            case 1009: return "BadRequest";
            case 401: return "Unauthorized";
            case 403: return "Forbidden";
            case 503:
            case 1001: return "ServerUnavailable";
            case 500:
            case 1011: return "ServerError";
            case 408:
            case 504: return "Timeout";
            default: return "statuscode:" + statusCode.toString();
        }
    }
}

//# sourceMappingURL=ServiceTelemetryListener.Internal.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeakerRecognitionConfig.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeakerRecognitionConfig.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeakerRecognitionConfig": () => (/* binding */ SpeakerRecognitionConfig)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class SpeakerRecognitionConfig {
    constructor(context, parameters) {
        this.privContext = context ? context : new _Exports__WEBPACK_IMPORTED_MODULE_0__.Context(null);
        this.privParameters = parameters;
    }
    get parameters() {
        return this.privParameters;
    }
    get Context() {
        return this.privContext;
    }
}

//# sourceMappingURL=SpeakerRecognitionConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeakerRecognitionConnectionFactory.js":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeakerRecognitionConnectionFactory.js ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeakerRecognitionConnectionFactory": () => (/* binding */ SpeakerRecognitionConnectionFactory),
/* harmony export */   "VoiceProfileConnectionFactory": () => (/* binding */ VoiceProfileConnectionFactory)
/* harmony export */ });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketConnection.js");
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ProxyInfo.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/WebsocketMessageFormatter.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */





class SpeakerRecognitionConnectionFactoryBase extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__.ConnectionFactoryBase {
    create(config, authInfo, endpointPath, connectionId) {
        let endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Endpoint);
        if (!endpoint) {
            const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Region);
            const hostSuffix = _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__.ConnectionFactoryBase.getHostSuffix(region);
            const host = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Host, `wss://${region}.spr-frontend.speech${hostSuffix}`);
            const scenario = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_SpeakerIdMode, "TextIndependentIdentification");
            endpoint = `${host}/speaker/ws/${this.scenarioToPath(scenario)}/${endpointPath}`;
        }
        const queryParams = {
            format: "simple",
            language: config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_RecoLanguage),
        };
        this.setCommonUrlParams(config, queryParams, endpoint);
        const headers = {};
        if (authInfo.token !== undefined && authInfo.token !== "") {
            headers[authInfo.headerName] = authInfo.token;
        }
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.ConnectionId] = connectionId;
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.SpIDAuthKey] = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Key);
        config.parameters.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Url, endpoint);
        const enableCompression = config.parameters.getProperty("SPEECH-EnableWebsocketCompression", "false") === "true";
        return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_3__.WebsocketConnection(endpoint, queryParams, headers, new _Exports__WEBPACK_IMPORTED_MODULE_4__.WebsocketMessageFormatter(), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_5__.ProxyInfo.fromRecognizerConfig(config), enableCompression, connectionId);
    }
    scenarioToPath(mode) {
        switch (mode) {
            case "TextIndependentVerification":
            case "2":
                return "verification/text-independent";
            case "TextDependentVerification":
            case "1":
                return "verification/text-dependent";
            default:
                return "identification/text-independent";
        }
    }
}
class SpeakerRecognitionConnectionFactory extends SpeakerRecognitionConnectionFactoryBase {
    create(config, authInfo, connectionId) {
        return super.create(config, authInfo, "recognition", connectionId);
    }
}
class VoiceProfileConnectionFactory extends SpeakerRecognitionConnectionFactoryBase {
    create(config, authInfo, connectionId) {
        return super.create(config, authInfo, "profile", connectionId);
    }
}

//# sourceMappingURL=SpeakerRecognitionConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeakerServiceRecognizer.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeakerServiceRecognizer.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeakerServiceRecognizer": () => (/* binding */ SpeakerServiceRecognizer)
/* harmony export */ });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ReplayableAudioNode.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerRecognitionResult.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceRecognizerBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./SpeechConnectionMessage.Internal */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionMessage.Internal.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





// eslint-disable-next-line max-classes-per-file
class SpeakerServiceRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_0__.ServiceRecognizerBase {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, recognizer) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, recognizer);
        this.privSpeakerRecognizer = recognizer;
        this.privSpeakerAudioSource = audioSource;
        this.recognizeSpeaker = (model) => this.recognizeSpeakerOnce(model);
        this.sendPrePayloadJSONOverride = () => this.noOp();
    }
    processTypeSpecificMessages(connectionMessage) {
        let processed = false;
        const resultProps = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyCollection();
        if (connectionMessage.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_2__.MessageType.Text) {
            resultProps.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceResponse_JsonResult, connectionMessage.textBody);
        }
        switch (connectionMessage.path.toLowerCase()) {
            case "speaker.response":
                const response = JSON.parse(connectionMessage.textBody);
                let result;
                if (response.status.statusCode.toLowerCase() !== "success") {
                    result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__.SpeakerRecognitionResult(response, _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.Canceled, _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.CancellationErrorCode.ServiceError, response.status.reason);
                }
                else {
                    result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__.SpeakerRecognitionResult(response, _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.RecognizedSpeaker);
                }
                if (!!this.privResultDeferral) {
                    this.privResultDeferral.resolve(result);
                }
                processed = true;
                break;
            default:
                break;
        }
        const defferal = new _common_Exports__WEBPACK_IMPORTED_MODULE_7__.Deferred();
        defferal.resolve(processed);
        return defferal.promise;
    }
    // Cancels recognition.
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error) {
        const properties = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyCollection();
        properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_8__.CancellationErrorCodePropertyName, _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.CancellationErrorCode[errorCode]);
        if (!!this.privResultDeferral) {
            const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__.SpeakerRecognitionResult({
                scenario: this.privSpeakerModel.scenario,
                status: { statusCode: error, reason: error }
            }, _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.Canceled, errorCode, error);
            try {
                this.privResultDeferral.resolve(result);
            }
            catch (error) {
                this.privResultDeferral.reject(error);
            }
        }
    }
    recognizeSpeakerOnce(model) {
        return __awaiter(this, void 0, void 0, function* () {
            this.privSpeakerModel = model;
            this.voiceProfileType = model.scenario;
            if (!this.privResultDeferral) {
                this.privResultDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_7__.Deferred();
            }
            this.privRequestSession.startNewRecognition();
            this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events);
            this.privRecognizerConfig.parameters.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.Speech_SessionId, this.privRequestSession.sessionId);
            // Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
            const conPromise = this.connectImpl();
            const preAudioPromise = this.sendPreAudioMessages(this.extractSpeakerContext(model));
            const node = yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId);
            const format = yield this.privSpeakerAudioSource.format;
            const deviceInfo = yield this.privSpeakerAudioSource.deviceInfo;
            const audioNode = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_9__.ReplayableAudioNode(node, format.avgBytesPerSec);
            yield this.privRequestSession.onAudioSourceAttachCompleted(audioNode, false);
            this.privRecognizerConfig.SpeechServiceConfig.Context.audio = { source: deviceInfo };
            try {
                yield conPromise;
                yield preAudioPromise;
            }
            catch (err) {
                this.cancelRecognition(this.privRequestSession.sessionId, this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_10__.CancellationReason.Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.CancellationErrorCode.ConnectionFailure, err);
            }
            const sessionStartEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_11__.SessionEventArgs(this.privRequestSession.sessionId);
            if (!!this.privRecognizer.sessionStarted) {
                this.privRecognizer.sessionStarted(this.privRecognizer, sessionStartEventArgs);
            }
            void this.receiveMessage();
            const audioSendPromise = this.sendAudio(audioNode);
            // /* eslint-disable no-empty */
            audioSendPromise.then(() => { }, (error) => {
                this.cancelRecognition(this.privRequestSession.sessionId, this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_10__.CancellationReason.Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.CancellationErrorCode.RuntimeError, error);
            });
            return this.privResultDeferral.promise;
        });
    }
    sendPreAudioMessages(context) {
        return __awaiter(this, void 0, void 0, function* () {
            const connection = yield this.fetchConnection();
            yield this.sendSpeakerRecognition(connection, context);
            // await this.sendWaveHeader(connection);
        });
    }
    sendSpeakerRecognition(connection, context) {
        return __awaiter(this, void 0, void 0, function* () {
            const speakerContextJson = JSON.stringify(context);
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_12__.SpeechConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_2__.MessageType.Text, "speaker.context", this.privRequestSession.requestId, "application/json; charset=utf-8", speakerContextJson));
        });
    }
    extractSpeakerContext(model) {
        return {
            features: {
                interimResult: "enabled",
                progressiveDetection: "disabled",
            },
            profileIds: model.profileIds,
            scenario: model.scenario,
        };
    }
}

//# sourceMappingURL=SpeakerServiceRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionFactory.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionFactory.js ***!
  \*************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechConnectionFactory": () => (/* binding */ SpeechConnectionFactory)
/* harmony export */ });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketConnection.js");
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ProxyInfo.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/OutputFormat.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/WebsocketMessageFormatter.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
/* harmony import */ var _QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./QueryParameterNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.







class SpeechConnectionFactory extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__.ConnectionFactoryBase {
    constructor() {
        super(...arguments);
        this.interactiveRelativeUri = "/speech/recognition/interactive/cognitiveservices/v1";
        this.conversationRelativeUri = "/speech/recognition/conversation/cognitiveservices/v1";
        this.dictationRelativeUri = "/speech/recognition/dictation/cognitiveservices/v1";
        this.universalUri = "/speech/universal/v";
    }
    create(config, authInfo, connectionId) {
        let endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Endpoint, undefined);
        const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Region, undefined);
        const hostSuffix = _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__.ConnectionFactoryBase.getHostSuffix(region);
        const host = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Host, "wss://" + region + ".stt.speech" + hostSuffix);
        const queryParams = {};
        const endpointId = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_EndpointId, undefined);
        const language = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_RecoLanguage, undefined);
        if (endpointId) {
            if (!endpoint || endpoint.search(_QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__.QueryParameterNames.CustomSpeechDeploymentId) === -1) {
                queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__.QueryParameterNames.CustomSpeechDeploymentId] = endpointId;
            }
        }
        else if (language) {
            if (!endpoint || endpoint.search(_QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__.QueryParameterNames.Language) === -1) {
                queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__.QueryParameterNames.Language] = language;
            }
        }
        if (!endpoint || endpoint.search(_QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__.QueryParameterNames.Format) === -1) {
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__.QueryParameterNames.Format] = config.parameters.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__.OutputFormatPropertyName, _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__.OutputFormat[_sdk_Exports__WEBPACK_IMPORTED_MODULE_4__.OutputFormat.Simple]).toLowerCase();
        }
        if (config.autoDetectSourceLanguages !== undefined) {
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_2__.QueryParameterNames.EnableLanguageId] = "true";
        }
        this.setCommonUrlParams(config, queryParams, endpoint);
        if (!endpoint) {
            switch (config.recognitionMode) {
                case _Exports__WEBPACK_IMPORTED_MODULE_5__.RecognitionMode.Conversation:
                    if (config.parameters.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__.ForceDictationPropertyName, "false") === "true") {
                        endpoint = host + this.dictationRelativeUri;
                    }
                    else {
                        if (config.recognitionEndpointVersion !== undefined && parseInt(config.recognitionEndpointVersion, 10) > 1) {
                            endpoint = `${host}${this.universalUri}${config.recognitionEndpointVersion}`;
                        }
                        else {
                            endpoint = host + this.conversationRelativeUri;
                        }
                    }
                    break;
                case _Exports__WEBPACK_IMPORTED_MODULE_5__.RecognitionMode.Dictation:
                    endpoint = host + this.dictationRelativeUri;
                    break;
                default:
                    if (config.recognitionEndpointVersion !== undefined && parseInt(config.recognitionEndpointVersion, 10) > 1) {
                        endpoint = `${host}${this.universalUri}${config.recognitionEndpointVersion}`;
                    }
                    else {
                        endpoint = host + this.interactiveRelativeUri; // default is interactive
                    }
                    break;
            }
        }
        const headers = {};
        if (authInfo.token !== undefined && authInfo.token !== "") {
            headers[authInfo.headerName] = authInfo.token;
        }
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_6__.HeaderNames.ConnectionId] = connectionId;
        const enableCompression = config.parameters.getProperty("SPEECH-EnableWebsocketCompression", "false") === "true";
        const webSocketConnection = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_7__.WebsocketConnection(endpoint, queryParams, headers, new _Exports__WEBPACK_IMPORTED_MODULE_8__.WebsocketMessageFormatter(), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_9__.ProxyInfo.fromRecognizerConfig(config), enableCompression, connectionId);
        // Set the value of SpeechServiceConnection_Url to webSocketConnection.uri (and not to `endpoint`), since this value is the final
        // URI that was used to make the connection (including query parameters).
        const uri = webSocketConnection.uri;
        config.parameters.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Url, uri);
        return webSocketConnection;
    }
}

//# sourceMappingURL=SpeechConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionMessage.Internal.js":
/*!**********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionMessage.Internal.js ***!
  \**********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechConnectionMessage": () => (/* binding */ SpeechConnectionMessage)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class SpeechConnectionMessage extends _common_Exports__WEBPACK_IMPORTED_MODULE_0__.ConnectionMessage {
    constructor(messageType, path, requestId, contentType, body, streamId, additionalHeaders, id) {
        if (!path) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_1__.ArgumentNullError("path");
        }
        if (!requestId) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_1__.ArgumentNullError("requestId");
        }
        const headers = {};
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.Path] = path;
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.RequestId] = requestId;
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.RequestTimestamp] = new Date().toISOString();
        if (contentType) {
            headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.ContentType] = contentType;
        }
        if (streamId) {
            headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.RequestStreamId] = streamId;
        }
        if (additionalHeaders) {
            for (const headerName in additionalHeaders) {
                if (headerName) {
                    headers[headerName] = additionalHeaders[headerName];
                }
            }
        }
        if (id) {
            super(messageType, body, headers, id);
        }
        else {
            super(messageType, body, headers);
        }
        this.privPath = path;
        this.privRequestId = requestId;
        this.privContentType = contentType;
        this.privStreamId = streamId;
        this.privAdditionalHeaders = additionalHeaders;
    }
    get path() {
        return this.privPath;
    }
    get requestId() {
        return this.privRequestId;
    }
    get contentType() {
        return this.privContentType;
    }
    get streamId() {
        return this.privStreamId;
    }
    get additionalHeaders() {
        return this.privAdditionalHeaders;
    }
    static fromConnectionMessage(message) {
        let path = null;
        let requestId = null;
        let contentType = null;
        // let requestTimestamp = null;
        let streamId = null;
        const additionalHeaders = {};
        if (message.headers) {
            for (const headerName in message.headers) {
                if (headerName) {
                    if (headerName.toLowerCase() === _HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.Path.toLowerCase()) {
                        path = message.headers[headerName];
                    }
                    else if (headerName.toLowerCase() === _HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.RequestId.toLowerCase()) {
                        requestId = message.headers[headerName];
                        // } else if (headerName.toLowerCase() === HeaderNames.RequestTimestamp.toLowerCase()) {
                        //  requestTimestamp = message.headers[headerName];
                    }
                    else if (headerName.toLowerCase() === _HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.ContentType.toLowerCase()) {
                        contentType = message.headers[headerName];
                    }
                    else if (headerName.toLowerCase() === _HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.RequestStreamId.toLowerCase()) {
                        streamId = message.headers[headerName];
                    }
                    else {
                        additionalHeaders[headerName] = message.headers[headerName];
                    }
                }
            }
        }
        return new SpeechConnectionMessage(message.messageType, path, requestId, contentType, message.body, streamId, additionalHeaders, message.id);
    }
}

//# sourceMappingURL=SpeechConnectionMessage.Internal.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechContext.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechContext.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechContext": () => (/* binding */ SpeechContext)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Represents the JSON used in the speech.context message sent to the speech service.
 * The dynamic grammar is always refreshed from the encapsulated dynamic grammar object.
 */
class SpeechContext {
    constructor(dynamicGrammar) {
        this.privContext = {};
        this.privDynamicGrammar = dynamicGrammar;
    }
    /**
     * Gets a section of the speech.context object.
     * @param sectionName Name of the section to get.
     * @return string or Context JSON serializable object that represents the value.
     */
    getSection(sectionName) {
        return (this.privContext[sectionName] || {});
    }
    /**
     * Adds a section to the speech.context object.
     * @param sectionName Name of the section to add.
     * @param value JSON serializable object that represents the value.
     */
    setSection(sectionName, value) {
        this.privContext[sectionName] = value;
    }
    /**
     * @Internal
     * This is only used by pronunciation assessment config.
     * Do not use externally, object returned will change without warning or notice.
     */
    setPronunciationAssessmentParams(params) {
        if (this.privContext.phraseDetection === undefined) {
            this.privContext.phraseDetection = {
                enrichment: {
                    pronunciationAssessment: {}
                }
            };
        }
        this.privContext.phraseDetection.enrichment.pronunciationAssessment = JSON.parse(params);
        this.setWordLevelTimings();
        this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment");
        if (this.privContext.phraseOutput.detailed.options.indexOf("SNR") === -1) {
            this.privContext.phraseOutput.detailed.options.push("SNR");
        }
    }
    setWordLevelTimings() {
        if (this.privContext.phraseOutput === undefined) {
            this.privContext.phraseOutput = {
                detailed: {
                    options: []
                },
                format: {}
            };
        }
        if (this.privContext.phraseOutput.detailed === undefined) {
            this.privContext.phraseOutput.detailed = {
                options: []
            };
        }
        this.privContext.phraseOutput.format = "Detailed";
        if (this.privContext.phraseOutput.detailed.options.indexOf("WordTimings") === -1) {
            this.privContext.phraseOutput.detailed.options.push("WordTimings");
        }
    }
    toJSON() {
        const dgi = this.privDynamicGrammar.generateGrammarObject();
        this.setSection("dgi", dgi);
        const ret = JSON.stringify(this.privContext);
        return ret;
    }
}

//# sourceMappingURL=SpeechContext.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechServiceInterfaces.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechServiceInterfaces.js ***!
  \*************************************************************************************************************************/
/***/ (() => {

// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

//# sourceMappingURL=SpeechServiceInterfaces.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechServiceRecognizer.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechServiceRecognizer.js ***!
  \*************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechServiceRecognizer": () => (/* binding */ SpeechServiceRecognizer)
/* harmony export */ });
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionResult.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/OutputFormat.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionCanceledEventArgs.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceRecognizerBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SpeechHypothesis.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/EnumTranslation.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/DetailedSpeechPhrase.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


// eslint-disable-next-line max-classes-per-file
class SpeechServiceRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_0__.ServiceRecognizerBase {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, speechRecognizer) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, speechRecognizer);
        this.privSpeechRecognizer = speechRecognizer;
    }
    processTypeSpecificMessages(connectionMessage) {
        return __awaiter(this, void 0, void 0, function* () {
            let result;
            const resultProps = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyCollection();
            resultProps.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceResponse_JsonResult, connectionMessage.textBody);
            let processed = false;
            switch (connectionMessage.path.toLowerCase()) {
                case "speech.hypothesis":
                case "speech.fragment":
                    const hypothesis = _Exports__WEBPACK_IMPORTED_MODULE_3__.SpeechHypothesis.fromJSON(connectionMessage.textBody);
                    const offset = hypothesis.Offset + this.privRequestSession.currentTurnAudioOffset;
                    result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__.SpeechRecognitionResult(this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.RecognizingSpeech, hypothesis.Text, hypothesis.Duration, offset, hypothesis.Language, hypothesis.LanguageDetectionConfidence, undefined, // Speaker Id
                    undefined, connectionMessage.textBody, resultProps);
                    this.privRequestSession.onHypothesis(offset);
                    const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.SpeechRecognitionEventArgs(result, hypothesis.Duration, this.privRequestSession.sessionId);
                    if (!!this.privSpeechRecognizer.recognizing) {
                        try {
                            this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer, ev);
                            /* eslint-disable no-empty */
                        }
                        catch (error) {
                            // Not going to let errors in the event handler
                            // trip things up.
                        }
                    }
                    processed = true;
                    break;
                case "speech.phrase":
                    const simple = _Exports__WEBPACK_IMPORTED_MODULE_7__.SimpleSpeechPhrase.fromJSON(connectionMessage.textBody);
                    const resultReason = _Exports__WEBPACK_IMPORTED_MODULE_8__.EnumTranslation.implTranslateRecognitionResult(simple.RecognitionStatus);
                    this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset + simple.Offset + simple.Duration);
                    if (_sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.Canceled === resultReason) {
                        const cancelReason = _Exports__WEBPACK_IMPORTED_MODULE_8__.EnumTranslation.implTranslateCancelResult(simple.RecognitionStatus);
                        const cancellationErrorCode = _Exports__WEBPACK_IMPORTED_MODULE_8__.EnumTranslation.implTranslateCancelErrorCode(simple.RecognitionStatus);
                        yield this.cancelRecognitionLocal(cancelReason, cancellationErrorCode, _Exports__WEBPACK_IMPORTED_MODULE_8__.EnumTranslation.implTranslateErrorDetails(cancellationErrorCode));
                    }
                    else {
                        if (!(this.privRequestSession.isSpeechEnded && resultReason === _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.NoMatch && simple.RecognitionStatus !== _Exports__WEBPACK_IMPORTED_MODULE_9__.RecognitionStatus.InitialSilenceTimeout)) {
                            if (this.privRecognizerConfig.parameters.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_10__.OutputFormatPropertyName) === _sdk_Exports__WEBPACK_IMPORTED_MODULE_11__.OutputFormat[_sdk_Exports__WEBPACK_IMPORTED_MODULE_11__.OutputFormat.Simple]) {
                                result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__.SpeechRecognitionResult(this.privRequestSession.requestId, resultReason, simple.DisplayText, simple.Duration, simple.Offset + this.privRequestSession.currentTurnAudioOffset, simple.Language, simple.LanguageDetectionConfidence, undefined, // Speaker Id
                                undefined, connectionMessage.textBody, resultProps);
                            }
                            else {
                                const detailed = _Exports__WEBPACK_IMPORTED_MODULE_12__.DetailedSpeechPhrase.fromJSON(connectionMessage.textBody);
                                const totalOffset = detailed.Offset + this.privRequestSession.currentTurnAudioOffset;
                                const offsetCorrectedJson = detailed.getJsonWithCorrectedOffsets(totalOffset);
                                result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__.SpeechRecognitionResult(this.privRequestSession.requestId, resultReason, detailed.RecognitionStatus === _Exports__WEBPACK_IMPORTED_MODULE_9__.RecognitionStatus.Success ? detailed.NBest[0].Display : undefined, detailed.Duration, totalOffset, detailed.Language, detailed.LanguageDetectionConfidence, undefined, // Speaker Id
                                undefined, offsetCorrectedJson, resultProps);
                            }
                            const event = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.SpeechRecognitionEventArgs(result, result.offset, this.privRequestSession.sessionId);
                            if (!!this.privSpeechRecognizer.recognized) {
                                try {
                                    this.privSpeechRecognizer.recognized(this.privSpeechRecognizer, event);
                                    /* eslint-disable no-empty */
                                }
                                catch (error) {
                                    // Not going to let errors in the event handler
                                    // trip things up.
                                }
                            }
                        }
                        if (!!this.privSuccessCallback) {
                            try {
                                this.privSuccessCallback(result);
                            }
                            catch (e) {
                                if (!!this.privErrorCallback) {
                                    this.privErrorCallback(e);
                                }
                            }
                            // Only invoke the call back once.
                            // and if it's successful don't invoke the
                            // error after that.
                            this.privSuccessCallback = undefined;
                            this.privErrorCallback = undefined;
                        }
                    }
                    processed = true;
                    break;
                default:
                    break;
            }
            return processed;
        });
    }
    // Cancels recognition.
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error) {
        const properties = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyCollection();
        properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_10__.CancellationErrorCodePropertyName, _sdk_Exports__WEBPACK_IMPORTED_MODULE_13__.CancellationErrorCode[errorCode]);
        if (!!this.privSpeechRecognizer.canceled) {
            const cancelEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_14__.SpeechRecognitionCanceledEventArgs(cancellationReason, error, errorCode, undefined, sessionId);
            try {
                this.privSpeechRecognizer.canceled(this.privSpeechRecognizer, cancelEvent);
                /* eslint-disable no-empty */
            }
            catch (_a) { }
        }
        if (!!this.privSuccessCallback) {
            const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__.SpeechRecognitionResult(requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.Canceled, undefined, // Text
            undefined, // Duration
            undefined, // Offset
            undefined, // Language
            undefined, // Language Detection Confidence
            undefined, // Speaker Id
            error, undefined, // Json
            properties);
            try {
                this.privSuccessCallback(result);
                this.privSuccessCallback = undefined;
                /* eslint-disable no-empty */
            }
            catch (_b) { }
        }
    }
}

//# sourceMappingURL=SpeechServiceRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechSynthesisConnectionFactory.js":
/*!**********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechSynthesisConnectionFactory.js ***!
  \**********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechSynthesisConnectionFactory": () => (/* binding */ SpeechSynthesisConnectionFactory)
/* harmony export */ });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketConnection.js");
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ProxyInfo.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/WebsocketMessageFormatter.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
/* harmony import */ var _QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./QueryParameterNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.






class SpeechSynthesisConnectionFactory {
    constructor() {
        this.synthesisUri = "/cognitiveservices/websocket/v1";
    }
    create(config, authInfo, connectionId) {
        let endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_Endpoint, undefined);
        const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_Region, undefined);
        const hostSuffix = _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_1__.ConnectionFactoryBase.getHostSuffix(region);
        const endpointId = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_EndpointId, undefined);
        const hostPrefix = (endpointId === undefined) ? "tts" : "voice";
        const host = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_Host, "wss://" + region + "." + hostPrefix + ".speech" + hostSuffix);
        const queryParams = {};
        if (!endpoint) {
            endpoint = host + this.synthesisUri;
        }
        const headers = {};
        if (authInfo.token !== undefined && authInfo.token !== "") {
            headers[authInfo.headerName] = authInfo.token;
        }
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.ConnectionId] = connectionId;
        if (endpointId !== undefined) {
            headers[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__.QueryParameterNames.CustomVoiceDeploymentId] = endpointId;
        }
        config.parameters.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_Url, endpoint);
        const enableCompression = config.parameters.getProperty("SPEECH-EnableWebsocketCompression", "false") === "true";
        return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_4__.WebsocketConnection(endpoint, queryParams, headers, new _Exports__WEBPACK_IMPORTED_MODULE_5__.WebsocketMessageFormatter(), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_6__.ProxyInfo.fromParameters(config.parameters), enableCompression, connectionId);
    }
}

//# sourceMappingURL=SpeechSynthesisConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisAdapterBase.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisAdapterBase.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SynthesisAdapterBase": () => (/* binding */ SynthesisAdapterBase)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/EventSource.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionEvents.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IConnection.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisResult.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisWordBoundaryEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisBookmarkEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisVisemeEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisTurn.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisContext.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AgentConfig.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SynthesisAudioMetadata.js");
/* harmony import */ var _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./SpeechConnectionMessage.Internal */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionMessage.Internal.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




class SynthesisAdapterBase {
    constructor(authentication, connectionFactory, synthesizerConfig, speechSynthesizer, audioDestination) {
        this.speakOverride = undefined;
        this.receiveMessageOverride = undefined;
        this.connectImplOverride = undefined;
        this.configConnectionOverride = undefined;
        // A promise for a configured connection.
        // Do not consume directly, call fetchConnection instead.
        this.privConnectionConfigurationPromise = undefined;
        if (!authentication) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__.ArgumentNullError("authentication");
        }
        if (!connectionFactory) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__.ArgumentNullError("connectionFactory");
        }
        if (!synthesizerConfig) {
            throw new _common_Exports__WEBPACK_IMPORTED_MODULE_0__.ArgumentNullError("synthesizerConfig");
        }
        this.privAuthentication = authentication;
        this.privConnectionFactory = connectionFactory;
        this.privSynthesizerConfig = synthesizerConfig;
        this.privIsDisposed = false;
        this.privSpeechSynthesizer = speechSynthesizer;
        this.privSessionAudioDestination = audioDestination;
        this.privSynthesisTurn = new _Exports__WEBPACK_IMPORTED_MODULE_1__.SynthesisTurn();
        this.privConnectionEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.EventSource();
        this.privServiceEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.EventSource();
        this.privSynthesisContext = new _Exports__WEBPACK_IMPORTED_MODULE_3__.SynthesisContext(this.privSpeechSynthesizer);
        this.privAgentConfig = new _Exports__WEBPACK_IMPORTED_MODULE_4__.AgentConfig();
        this.connectionEvents.attach((connectionEvent) => {
            if (connectionEvent.name === "ConnectionClosedEvent") {
                const connectionClosedEvent = connectionEvent;
                if (connectionClosedEvent.statusCode !== 1000) {
                    this.cancelSynthesisLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.CancellationReason.Error, connectionClosedEvent.statusCode === 1007 ? _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.CancellationErrorCode.BadRequestParameters : _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.CancellationErrorCode.ConnectionFailure, `${connectionClosedEvent.reason} websocket error code: ${connectionClosedEvent.statusCode}`);
                }
            }
        });
    }
    get synthesisContext() {
        return this.privSynthesisContext;
    }
    get agentConfig() {
        return this.privAgentConfig;
    }
    get connectionEvents() {
        return this.privConnectionEvents;
    }
    get serviceEvents() {
        return this.privServiceEvents;
    }
    set activityTemplate(messagePayload) {
        this.privActivityTemplate = messagePayload;
    }
    get activityTemplate() {
        return this.privActivityTemplate;
    }
    set audioOutputFormat(format) {
        this.privAudioOutputFormat = format;
        this.privSynthesisTurn.audioOutputFormat = format;
        if (this.privSessionAudioDestination !== undefined) {
            this.privSessionAudioDestination.format = format;
        }
        if (this.synthesisContext !== undefined) {
            this.synthesisContext.audioOutputFormat = format;
        }
    }
    static addHeader(audio, format) {
        if (!format.hasHeader) {
            return audio;
        }
        format.updateHeader(audio.byteLength);
        const tmp = new Uint8Array(audio.byteLength + format.header.byteLength);
        tmp.set(new Uint8Array(format.header), 0);
        tmp.set(new Uint8Array(audio), format.header.byteLength);
        return tmp.buffer;
    }
    isDisposed() {
        return this.privIsDisposed;
    }
    dispose(reason) {
        return __awaiter(this, void 0, void 0, function* () {
            this.privIsDisposed = true;
            if (this.privSessionAudioDestination !== undefined) {
                this.privSessionAudioDestination.close();
            }
            if (this.privConnectionConfigurationPromise !== undefined) {
                const connection = yield this.privConnectionConfigurationPromise;
                yield connection.dispose(reason);
            }
        });
    }
    connect() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.connectImpl();
        });
    }
    sendNetworkMessage(path, payload) {
        return __awaiter(this, void 0, void 0, function* () {
            const type = typeof payload === "string" ? _common_Exports__WEBPACK_IMPORTED_MODULE_7__.MessageType.Text : _common_Exports__WEBPACK_IMPORTED_MODULE_7__.MessageType.Binary;
            const contentType = typeof payload === "string" ? "application/json" : "";
            const connection = yield this.fetchConnection();
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_8__.SpeechConnectionMessage(type, path, this.privSynthesisTurn.requestId, contentType, payload));
        });
    }
    Speak(text, isSSML, requestId, successCallback, errorCallBack, audioDestination) {
        return __awaiter(this, void 0, void 0, function* () {
            let ssml;
            if (isSSML) {
                ssml = text;
            }
            else {
                ssml = this.privSpeechSynthesizer.buildSsml(text);
            }
            if (this.speakOverride !== undefined) {
                return this.speakOverride(ssml, requestId, successCallback, errorCallBack);
            }
            this.privSuccessCallback = successCallback;
            this.privErrorCallback = errorCallBack;
            this.privSynthesisTurn.startNewSynthesis(requestId, text, isSSML, audioDestination);
            try {
                yield this.connectImpl();
                const connection = yield this.fetchConnection();
                yield this.sendSynthesisContext(connection);
                yield this.sendSsmlMessage(connection, ssml, requestId);
                const synthesisStartEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.SpeechSynthesisEventArgs(new _sdk_Exports__WEBPACK_IMPORTED_MODULE_10__.SpeechSynthesisResult(requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_11__.ResultReason.SynthesizingAudioStarted));
                if (!!this.privSpeechSynthesizer.synthesisStarted) {
                    this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer, synthesisStartEventArgs);
                }
                void this.receiveMessage();
            }
            catch (e) {
                this.cancelSynthesisLocal(_sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.CancellationReason.Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.CancellationErrorCode.ConnectionFailure, e);
                return Promise.reject(e);
            }
        });
    }
    // Cancels synthesis.
    cancelSynthesis(requestId, cancellationReason, errorCode, error) {
        const properties = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_12__.PropertyCollection();
        properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_13__.CancellationErrorCodePropertyName, _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.CancellationErrorCode[errorCode]);
        const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_10__.SpeechSynthesisResult(requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_11__.ResultReason.Canceled, undefined, error, properties);
        if (!!this.privSpeechSynthesizer.SynthesisCanceled) {
            const cancelEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.SpeechSynthesisEventArgs(result);
            try {
                this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer, cancelEvent);
                /* eslint-disable no-empty */
            }
            catch (_a) { }
        }
        if (!!this.privSuccessCallback) {
            try {
                this.privSuccessCallback(result);
                /* eslint-disable no-empty */
            }
            catch (_b) { }
        }
    }
    // Cancels synthesis.
    cancelSynthesisLocal(cancellationReason, errorCode, error) {
        if (!!this.privSynthesisTurn.isSynthesizing) {
            this.privSynthesisTurn.onStopSynthesizing();
            this.cancelSynthesis(this.privSynthesisTurn.requestId, cancellationReason, errorCode, error);
        }
    }
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    processTypeSpecificMessages(connectionMessage) {
        return true;
    }
    receiveMessage() {
        return __awaiter(this, void 0, void 0, function* () {
            try {
                const connection = yield this.fetchConnection();
                const message = yield connection.read();
                if (this.receiveMessageOverride !== undefined) {
                    return this.receiveMessageOverride();
                }
                if (this.privIsDisposed) {
                    // We're done.
                    return;
                }
                // indicates we are draining the queue and it came with no message;
                if (!message) {
                    if (!this.privSynthesisTurn.isSynthesizing) {
                        return;
                    }
                    else {
                        return this.receiveMessage();
                    }
                }
                const connectionMessage = _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_8__.SpeechConnectionMessage.fromConnectionMessage(message);
                if (connectionMessage.requestId.toLowerCase() === this.privSynthesisTurn.requestId.toLowerCase()) {
                    switch (connectionMessage.path.toLowerCase()) {
                        case "turn.start":
                            this.privSynthesisTurn.onServiceTurnStartResponse();
                            break;
                        case "response":
                            this.privSynthesisTurn.onServiceResponseMessage(connectionMessage.textBody);
                            break;
                        case "audio":
                            if (this.privSynthesisTurn.streamId.toLowerCase() === connectionMessage.streamId.toLowerCase()
                                && !!connectionMessage.binaryBody) {
                                this.privSynthesisTurn.onAudioChunkReceived(connectionMessage.binaryBody);
                                if (!!this.privSpeechSynthesizer.synthesizing) {
                                    try {
                                        const audioWithHeader = SynthesisAdapterBase.addHeader(connectionMessage.binaryBody, this.privSynthesisTurn.audioOutputFormat);
                                        const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.SpeechSynthesisEventArgs(new _sdk_Exports__WEBPACK_IMPORTED_MODULE_10__.SpeechSynthesisResult(this.privSynthesisTurn.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_11__.ResultReason.SynthesizingAudio, audioWithHeader));
                                        this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer, ev);
                                    }
                                    catch (error) {
                                        // Not going to let errors in the event handler
                                        // trip things up.
                                    }
                                }
                                if (this.privSessionAudioDestination !== undefined) {
                                    this.privSessionAudioDestination.write(connectionMessage.binaryBody);
                                }
                            }
                            break;
                        case "audio.metadata":
                            const metadataList = _Exports__WEBPACK_IMPORTED_MODULE_14__.SynthesisAudioMetadata.fromJSON(connectionMessage.textBody).Metadata;
                            for (const metadata of metadataList) {
                                switch (metadata.Type) {
                                    case _Exports__WEBPACK_IMPORTED_MODULE_14__.MetadataType.WordBoundary:
                                    case _Exports__WEBPACK_IMPORTED_MODULE_14__.MetadataType.SentenceBoundary:
                                        this.privSynthesisTurn.onTextBoundaryEvent(metadata);
                                        const wordBoundaryEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_15__.SpeechSynthesisWordBoundaryEventArgs(metadata.Data.Offset, metadata.Data.Duration, metadata.Data.text.Text, metadata.Data.text.Length, metadata.Type === _Exports__WEBPACK_IMPORTED_MODULE_14__.MetadataType.WordBoundary
                                            ? this.privSynthesisTurn.currentTextOffset : this.privSynthesisTurn.currentSentenceOffset, metadata.Data.text.BoundaryType);
                                        if (!!this.privSpeechSynthesizer.wordBoundary) {
                                            try {
                                                this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer, wordBoundaryEventArgs);
                                            }
                                            catch (error) {
                                                // Not going to let errors in the event handler
                                                // trip things up.
                                            }
                                        }
                                        break;
                                    case _Exports__WEBPACK_IMPORTED_MODULE_14__.MetadataType.Bookmark:
                                        const bookmarkEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_16__.SpeechSynthesisBookmarkEventArgs(metadata.Data.Offset, metadata.Data.Bookmark);
                                        if (!!this.privSpeechSynthesizer.bookmarkReached) {
                                            try {
                                                this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer, bookmarkEventArgs);
                                            }
                                            catch (error) {
                                                // Not going to let errors in the event handler
                                                // trip things up.
                                            }
                                        }
                                        break;
                                    case _Exports__WEBPACK_IMPORTED_MODULE_14__.MetadataType.Viseme:
                                        this.privSynthesisTurn.onVisemeMetadataReceived(metadata);
                                        if (metadata.Data.IsLastAnimation) {
                                            const visemeEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_17__.SpeechSynthesisVisemeEventArgs(metadata.Data.Offset, metadata.Data.VisemeId, this.privSynthesisTurn.getAndClearVisemeAnimation());
                                            if (!!this.privSpeechSynthesizer.visemeReceived) {
                                                try {
                                                    this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer, visemeEventArgs);
                                                }
                                                catch (error) {
                                                    // Not going to let errors in the event handler
                                                    // trip things up.
                                                }
                                            }
                                        }
                                        break;
                                    case _Exports__WEBPACK_IMPORTED_MODULE_14__.MetadataType.SessionEnd:
                                        this.privSynthesisTurn.onSessionEnd(metadata);
                                        break;
                                }
                            }
                            break;
                        case "turn.end":
                            this.privSynthesisTurn.onServiceTurnEndResponse();
                            let result;
                            try {
                                const audioBuffer = yield this.privSynthesisTurn.getAllReceivedAudioWithHeader();
                                result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_10__.SpeechSynthesisResult(this.privSynthesisTurn.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_11__.ResultReason.SynthesizingAudioCompleted, audioBuffer, undefined, undefined, this.privSynthesisTurn.audioDuration);
                                if (!!this.privSuccessCallback) {
                                    this.privSuccessCallback(result);
                                }
                            }
                            catch (error) {
                                if (!!this.privErrorCallback) {
                                    this.privErrorCallback(error);
                                }
                            }
                            if (this.privSpeechSynthesizer.synthesisCompleted) {
                                try {
                                    this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer, new _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.SpeechSynthesisEventArgs(result));
                                }
                                catch (e) {
                                    // Not going to let errors in the event handler
                                    // trip things up.
                                }
                            }
                            break;
                        default:
                            if (!this.processTypeSpecificMessages(connectionMessage)) {
                                // here are some messages that the derived class has not processed, dispatch them to connect class
                                if (!!this.privServiceEvents) {
                                    this.serviceEvents.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_18__.ServiceEvent(connectionMessage.path.toLowerCase(), connectionMessage.textBody));
                                }
                            }
                    }
                }
                return this.receiveMessage();
            }
            catch (e) {
                // TODO: What goes here?
            }
        });
    }
    sendSynthesisContext(connection) {
        const synthesisContextJson = this.synthesisContext.toJSON();
        if (synthesisContextJson) {
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_8__.SpeechConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_7__.MessageType.Text, "synthesis.context", this.privSynthesisTurn.requestId, "application/json", synthesisContextJson));
        }
        return;
    }
    connectImpl(isUnAuthorized = false) {
        if (this.privConnectionPromise != null) {
            return this.privConnectionPromise.then((connection) => {
                if (connection.state() === _common_Exports__WEBPACK_IMPORTED_MODULE_19__.ConnectionState.Disconnected) {
                    this.privConnectionId = null;
                    this.privConnectionPromise = null;
                    return this.connectImpl();
                }
                return this.privConnectionPromise;
            }, () => {
                this.privConnectionId = null;
                this.privConnectionPromise = null;
                return this.connectImpl();
            });
        }
        this.privAuthFetchEventId = (0,_common_Exports__WEBPACK_IMPORTED_MODULE_20__.createNoDashGuid)();
        this.privConnectionId = (0,_common_Exports__WEBPACK_IMPORTED_MODULE_20__.createNoDashGuid)();
        this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);
        const authPromise = isUnAuthorized ? this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId) : this.privAuthentication.fetch(this.privAuthFetchEventId);
        this.privConnectionPromise = authPromise.then((result) => __awaiter(this, void 0, void 0, function* () {
            this.privSynthesisTurn.onAuthCompleted(false);
            const connection = this.privConnectionFactory.create(this.privSynthesizerConfig, result, this.privConnectionId);
            // Attach to the underlying event. No need to hold onto the detach pointers as in the event the connection goes away,
            // it'll stop sending events.
            connection.events.attach((event) => {
                this.connectionEvents.onEvent(event);
            });
            const response = yield connection.open();
            if (response.statusCode === 200) {
                this.privSynthesisTurn.onConnectionEstablishCompleted(response.statusCode);
                return Promise.resolve(connection);
            }
            else if (response.statusCode === 403 && !isUnAuthorized) {
                return this.connectImpl(true);
            }
            else {
                this.privSynthesisTurn.onConnectionEstablishCompleted(response.statusCode);
                return Promise.reject(`Unable to contact server. StatusCode: ${response.statusCode}, ${this.privSynthesizerConfig.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_21__.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${response.reason}`);
            }
        }), (error) => {
            this.privSynthesisTurn.onAuthCompleted(true);
            throw new Error(error);
        });
        // Attach an empty handler to allow the promise to run in the background while
        // other startup events happen. It'll eventually be awaited on.
        // eslint-disable-next-line @typescript-eslint/no-empty-function
        this.privConnectionPromise.catch(() => { });
        return this.privConnectionPromise;
    }
    sendSpeechServiceConfig(connection, SpeechServiceConfigJson) {
        if (SpeechServiceConfigJson) {
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_8__.SpeechConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_7__.MessageType.Text, "speech.config", this.privSynthesisTurn.requestId, "application/json", SpeechServiceConfigJson));
        }
    }
    sendSsmlMessage(connection, ssml, requestId) {
        return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_8__.SpeechConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_7__.MessageType.Text, "ssml", requestId, "application/ssml+xml", ssml));
    }
    fetchConnection() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privConnectionConfigurationPromise !== undefined) {
                return this.privConnectionConfigurationPromise.then((connection) => {
                    if (connection.state() === _common_Exports__WEBPACK_IMPORTED_MODULE_19__.ConnectionState.Disconnected) {
                        this.privConnectionId = null;
                        this.privConnectionConfigurationPromise = undefined;
                        return this.fetchConnection();
                    }
                    return this.privConnectionConfigurationPromise;
                }, () => {
                    this.privConnectionId = null;
                    this.privConnectionConfigurationPromise = undefined;
                    return this.fetchConnection();
                });
            }
            this.privConnectionConfigurationPromise = this.configureConnection();
            return yield this.privConnectionConfigurationPromise;
        });
    }
    // Takes an established websocket connection to the endpoint and sends speech configuration information.
    configureConnection() {
        return __awaiter(this, void 0, void 0, function* () {
            const connection = yield this.connectImpl();
            if (this.configConnectionOverride !== undefined) {
                return this.configConnectionOverride(connection);
            }
            yield this.sendSpeechServiceConfig(connection, this.privSynthesizerConfig.SpeechServiceConfig.serialize());
            return connection;
        });
    }
}
SynthesisAdapterBase.telemetryDataEnabled = true;

//# sourceMappingURL=SynthesisAdapterBase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisContext.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisContext.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SynthesisContext": () => (/* binding */ SynthesisContext)
/* harmony export */ });
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Represents the JSON used in the synthesis.context message sent to the speech service.
 * The dynamic grammar is always refreshed from the encapsulated dynamic grammar object.
 */
class SynthesisContext {
    constructor(speechSynthesizer) {
        this.privContext = {};
        this.privSpeechSynthesizer = speechSynthesizer;
    }
    /**
     * Adds a section to the synthesis.context object.
     * @param sectionName Name of the section to add.
     * @param value JSON serializable object that represents the value.
     */
    setSection(sectionName, value) {
        this.privContext[sectionName] = value;
    }
    /**
     * Sets the audio output format for synthesis context generation.
     * @param format {AudioOutputFormatImpl} the output format
     */
    set audioOutputFormat(format) {
        this.privAudioOutputFormat = format;
    }
    toJSON() {
        const synthesisSection = this.buildSynthesisContext();
        this.setSection("synthesis", synthesisSection);
        return JSON.stringify(this.privContext);
    }
    buildSynthesisContext() {
        return {
            audio: {
                metadataOptions: {
                    bookmarkEnabled: (!!this.privSpeechSynthesizer.bookmarkReached),
                    punctuationBoundaryEnabled: this.privSpeechSynthesizer.properties.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary, (!!this.privSpeechSynthesizer.wordBoundary)),
                    sentenceBoundaryEnabled: this.privSpeechSynthesizer.properties.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceResponse_RequestSentenceBoundary, false),
                    sessionEndEnabled: true,
                    visemeEnabled: (!!this.privSpeechSynthesizer.visemeReceived),
                    wordBoundaryEnabled: this.privSpeechSynthesizer.properties.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceResponse_RequestWordBoundary, (!!this.privSpeechSynthesizer.wordBoundary)),
                },
                outputFormat: this.privAudioOutputFormat.requestAudioFormatString,
            },
            language: {
                autoDetection: this.privSpeechSynthesizer.autoDetectSourceLanguage
            }
        };
    }
}

//# sourceMappingURL=SynthesisContext.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisEvents.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisEvents.js ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConnectingToSynthesisServiceEvent": () => (/* binding */ ConnectingToSynthesisServiceEvent),
/* harmony export */   "SpeechSynthesisEvent": () => (/* binding */ SpeechSynthesisEvent),
/* harmony export */   "SynthesisStartedEvent": () => (/* binding */ SynthesisStartedEvent),
/* harmony export */   "SynthesisTriggeredEvent": () => (/* binding */ SynthesisTriggeredEvent)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */

class SpeechSynthesisEvent extends _common_Exports__WEBPACK_IMPORTED_MODULE_0__.PlatformEvent {
    constructor(eventName, requestId, eventType = _common_Exports__WEBPACK_IMPORTED_MODULE_0__.EventType.Info) {
        super(eventName, eventType);
        this.privRequestId = requestId;
    }
    get requestId() {
        return this.privRequestId;
    }
}
class SynthesisTriggeredEvent extends SpeechSynthesisEvent {
    constructor(requestId, sessionAudioDestinationId, turnAudioDestinationId) {
        super("SynthesisTriggeredEvent", requestId);
        this.privSessionAudioDestinationId = sessionAudioDestinationId;
        this.privTurnAudioDestinationId = turnAudioDestinationId;
    }
    get audioSessionDestinationId() {
        return this.privSessionAudioDestinationId;
    }
    get audioTurnDestinationId() {
        return this.privTurnAudioDestinationId;
    }
}
class ConnectingToSynthesisServiceEvent extends SpeechSynthesisEvent {
    constructor(requestId, authFetchEventId) {
        super("ConnectingToSynthesisServiceEvent", requestId);
        this.privAuthFetchEventId = authFetchEventId;
    }
    get authFetchEventId() {
        return this.privAuthFetchEventId;
    }
}
class SynthesisStartedEvent extends SpeechSynthesisEvent {
    constructor(requestId, authFetchEventId) {
        super("SynthesisStartedEvent", requestId);
        this.privAuthFetchEventId = authFetchEventId;
    }
    get authFetchEventId() {
        return this.privAuthFetchEventId;
    }
}

//# sourceMappingURL=SynthesisEvents.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisRestAdapter.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisRestAdapter.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SynthesisRestAdapter": () => (/* binding */ SynthesisRestAdapter)
/* harmony export */ });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/RestConfigBase.js");
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/RestMessageAdapter.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");




/**
 * Implements methods for speaker recognition classes, sending requests to endpoint
 * and parsing response into expected format
 * @class SynthesisRestAdapter
 */
class SynthesisRestAdapter {
    constructor(config, authentication) {
        let endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_Endpoint, undefined);
        if (!endpoint) {
            const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_Region, "westus");
            const hostSuffix = _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_1__.ConnectionFactoryBase.getHostSuffix(region);
            endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId.SpeechServiceConnection_Host, `https://${region}.tts.speech${hostSuffix}`);
        }
        this.privUri = `${endpoint}/cognitiveservices/voices/list`;
        const options = _common_browser_Exports__WEBPACK_IMPORTED_MODULE_2__.RestConfigBase.requestOptions;
        this.privRestAdapter = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_3__.RestMessageAdapter(options);
        this.privAuthentication = authentication;
    }
    /**
     * Sends list voices request to endpoint.
     * @function
     * @public
     * @param connectionId - guid for connectionId
     * @returns {Promise<IRestResponse>} rest response to status request
     */
    getVoicesList(connectionId) {
        this.privRestAdapter.setHeaders(_HeaderNames__WEBPACK_IMPORTED_MODULE_4__.HeaderNames.ConnectionId, connectionId);
        return this.privAuthentication.fetch(connectionId).then((authInfo) => {
            this.privRestAdapter.setHeaders(authInfo.headerName, authInfo.token);
            return this.privRestAdapter.request(_common_browser_Exports__WEBPACK_IMPORTED_MODULE_3__.RestRequestType.Get, this.privUri);
        });
    }
}

//# sourceMappingURL=SynthesisRestAdapter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisTurn.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisTurn.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SynthesisTurn": () => (/* binding */ SynthesisTurn)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js");
/* harmony import */ var _sdk_Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../sdk/Audio/AudioOutputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js");
/* harmony import */ var _ServiceMessages_SynthesisAudioMetadata__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ServiceMessages/SynthesisAudioMetadata */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SynthesisAudioMetadata.js");
/* harmony import */ var _SynthesisAdapterBase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SynthesisAdapterBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisAdapterBase.js");
/* harmony import */ var _SynthesisEvents__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SynthesisEvents */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisEvents.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





class SynthesisTurn {
    constructor() {
        this.privIsDisposed = false;
        this.privIsSynthesizing = false;
        this.privIsSynthesisEnded = false;
        this.privBytesReceived = 0;
        this.privInTurn = false;
        this.privTextOffset = 0;
        this.privNextSearchTextIndex = 0;
        this.privSentenceOffset = 0;
        this.privNextSearchSentenceIndex = 0;
        this.privRequestId = (0,_common_Exports__WEBPACK_IMPORTED_MODULE_0__.createNoDashGuid)();
        this.privTurnDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__.Deferred();
        // We're not in a turn, so resolve.
        this.privTurnDeferral.resolve();
    }
    get requestId() {
        return this.privRequestId;
    }
    get streamId() {
        return this.privStreamId;
    }
    set streamId(value) {
        this.privStreamId = value;
    }
    get audioOutputFormat() {
        return this.privAudioOutputFormat;
    }
    set audioOutputFormat(format) {
        this.privAudioOutputFormat = format;
    }
    get turnCompletionPromise() {
        return this.privTurnDeferral.promise;
    }
    get isSynthesisEnded() {
        return this.privIsSynthesisEnded;
    }
    get isSynthesizing() {
        return this.privIsSynthesizing;
    }
    get currentTextOffset() {
        return this.privTextOffset;
    }
    get currentSentenceOffset() {
        return this.privSentenceOffset;
    }
    // The number of bytes received for current turn
    get bytesReceived() {
        return this.privBytesReceived;
    }
    get audioDuration() {
        return this.privAudioDuration;
    }
    getAllReceivedAudio() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!!this.privReceivedAudio) {
                return Promise.resolve(this.privReceivedAudio);
            }
            if (!this.privIsSynthesisEnded) {
                return null;
            }
            yield this.readAllAudioFromStream();
            return Promise.resolve(this.privReceivedAudio);
        });
    }
    getAllReceivedAudioWithHeader() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!!this.privReceivedAudioWithHeader) {
                return this.privReceivedAudioWithHeader;
            }
            if (!this.privIsSynthesisEnded) {
                return null;
            }
            if (this.audioOutputFormat.hasHeader) {
                const audio = yield this.getAllReceivedAudio();
                this.privReceivedAudioWithHeader = _SynthesisAdapterBase__WEBPACK_IMPORTED_MODULE_2__.SynthesisAdapterBase.addHeader(audio, this.audioOutputFormat);
                return this.privReceivedAudioWithHeader;
            }
            else {
                return this.getAllReceivedAudio();
            }
        });
    }
    startNewSynthesis(requestId, rawText, isSSML, audioDestination) {
        this.privIsSynthesisEnded = false;
        this.privIsSynthesizing = true;
        this.privRequestId = requestId;
        this.privRawText = rawText;
        this.privIsSSML = isSSML;
        this.privAudioOutputStream = new _sdk_Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_3__.PullAudioOutputStreamImpl();
        this.privAudioOutputStream.format = this.privAudioOutputFormat;
        this.privReceivedAudio = null;
        this.privReceivedAudioWithHeader = null;
        this.privBytesReceived = 0;
        this.privTextOffset = 0;
        this.privNextSearchTextIndex = 0;
        this.privSentenceOffset = 0;
        this.privNextSearchSentenceIndex = 0;
        this.privPartialVisemeAnimation = "";
        if (audioDestination !== undefined) {
            this.privTurnAudioDestination = audioDestination;
            this.privTurnAudioDestination.format = this.privAudioOutputFormat;
        }
        this.onEvent(new _SynthesisEvents__WEBPACK_IMPORTED_MODULE_4__.SynthesisTriggeredEvent(this.requestId, undefined, audioDestination === undefined ? undefined : audioDestination.id()));
    }
    onPreConnectionStart(authFetchEventId) {
        this.privAuthFetchEventId = authFetchEventId;
        this.onEvent(new _SynthesisEvents__WEBPACK_IMPORTED_MODULE_4__.ConnectingToSynthesisServiceEvent(this.privRequestId, this.privAuthFetchEventId));
    }
    onAuthCompleted(isError) {
        if (isError) {
            this.onComplete();
        }
    }
    onConnectionEstablishCompleted(statusCode) {
        if (statusCode === 200) {
            this.onEvent(new _SynthesisEvents__WEBPACK_IMPORTED_MODULE_4__.SynthesisStartedEvent(this.requestId, this.privAuthFetchEventId));
            this.privBytesReceived = 0;
            return;
        }
        else if (statusCode === 403) {
            this.onComplete();
        }
    }
    onServiceResponseMessage(responseJson) {
        const response = JSON.parse(responseJson);
        this.streamId = response.audio.streamId;
    }
    onServiceTurnEndResponse() {
        this.privInTurn = false;
        this.privTurnDeferral.resolve();
        this.onComplete();
    }
    onServiceTurnStartResponse() {
        if (!!this.privTurnDeferral && !!this.privInTurn) {
            // What? How are we starting a turn with another not done?
            this.privTurnDeferral.reject("Another turn started before current completed.");
            // Avoid UnhandledPromiseRejection if privTurnDeferral is not being awaited
            // eslint-disable-next-line @typescript-eslint/no-empty-function
            this.privTurnDeferral.promise.then().catch(() => { });
        }
        this.privInTurn = true;
        this.privTurnDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__.Deferred();
    }
    onAudioChunkReceived(data) {
        if (this.isSynthesizing) {
            this.privAudioOutputStream.write(data);
            this.privBytesReceived += data.byteLength;
            if (this.privTurnAudioDestination !== undefined) {
                this.privTurnAudioDestination.write(data);
            }
        }
    }
    onTextBoundaryEvent(metadata) {
        this.updateTextOffset(metadata.Data.text.Text, metadata.Type);
    }
    onVisemeMetadataReceived(metadata) {
        if (metadata.Data.AnimationChunk !== undefined) {
            this.privPartialVisemeAnimation += metadata.Data.AnimationChunk;
        }
    }
    onSessionEnd(metadata) {
        this.privAudioDuration = metadata.Data.Offset;
    }
    dispose() {
        if (!this.privIsDisposed) {
            // we should have completed by now. If we did not its an unknown error.
            this.privIsDisposed = true;
        }
    }
    onStopSynthesizing() {
        this.onComplete();
    }
    /**
     * Gets the viseme animation string (merged from animation chunk), and clears the internal
     * partial animation.
     */
    getAndClearVisemeAnimation() {
        const animation = this.privPartialVisemeAnimation;
        this.privPartialVisemeAnimation = "";
        return animation;
    }
    onEvent(event) {
        _common_Exports__WEBPACK_IMPORTED_MODULE_5__.Events.instance.onEvent(event);
    }
    /**
     * Check if the text is an XML(SSML) tag
     * @param text
     * @private
     */
    static isXmlTag(text) {
        return text.length >= 2 && text[0] === "<" && text[text.length - 1] === ">";
    }
    updateTextOffset(text, type) {
        if (type === _ServiceMessages_SynthesisAudioMetadata__WEBPACK_IMPORTED_MODULE_6__.MetadataType.WordBoundary) {
            this.privTextOffset = this.privRawText.indexOf(text, this.privNextSearchTextIndex);
            if (this.privTextOffset >= 0) {
                this.privNextSearchTextIndex = this.privTextOffset + text.length;
                if (this.privIsSSML) {
                    if (this.withinXmlTag(this.privTextOffset) && !SynthesisTurn.isXmlTag(text)) {
                        this.updateTextOffset(text, type);
                    }
                }
            }
        }
        else {
            this.privSentenceOffset = this.privRawText.indexOf(text, this.privNextSearchSentenceIndex);
            if (this.privSentenceOffset >= 0) {
                this.privNextSearchSentenceIndex = this.privSentenceOffset + text.length;
                if (this.privIsSSML) {
                    if (this.withinXmlTag(this.privSentenceOffset) && !SynthesisTurn.isXmlTag(text)) {
                        this.updateTextOffset(text, type);
                    }
                }
            }
        }
    }
    onComplete() {
        if (this.privIsSynthesizing) {
            this.privIsSynthesizing = false;
            this.privIsSynthesisEnded = true;
            this.privAudioOutputStream.close();
            this.privInTurn = false;
            if (this.privTurnAudioDestination !== undefined) {
                this.privTurnAudioDestination.close();
                this.privTurnAudioDestination = undefined;
            }
        }
    }
    readAllAudioFromStream() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privIsSynthesisEnded) {
                this.privReceivedAudio = new ArrayBuffer(this.bytesReceived);
                try {
                    yield this.privAudioOutputStream.read(this.privReceivedAudio);
                }
                catch (e) {
                    this.privReceivedAudio = new ArrayBuffer(0);
                }
            }
        });
    }
    /**
     * Check if current idx is in XML(SSML) tag
     * @param idx
     * @private
     */
    withinXmlTag(idx) {
        return this.privRawText.indexOf("<", idx + 1) > this.privRawText.indexOf(">", idx + 1);
    }
}

//# sourceMappingURL=SynthesisTurn.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesizerConfig.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesizerConfig.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SynthesisServiceType": () => (/* binding */ SynthesisServiceType),
/* harmony export */   "SynthesizerConfig": () => (/* binding */ SynthesizerConfig)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

var SynthesisServiceType;
(function (SynthesisServiceType) {
    SynthesisServiceType[SynthesisServiceType["Standard"] = 0] = "Standard";
    SynthesisServiceType[SynthesisServiceType["Custom"] = 1] = "Custom";
})(SynthesisServiceType || (SynthesisServiceType = {}));
class SynthesizerConfig {
    constructor(speechServiceConfig, parameters) {
        this.privSynthesisServiceType = SynthesisServiceType.Standard;
        this.privSpeechServiceConfig = speechServiceConfig ? speechServiceConfig : new _Exports__WEBPACK_IMPORTED_MODULE_0__.SpeechServiceConfig(new _Exports__WEBPACK_IMPORTED_MODULE_0__.Context(null));
        this.privParameters = parameters;
    }
    get parameters() {
        return this.privParameters;
    }
    get synthesisServiceType() {
        return this.privSynthesisServiceType;
    }
    set synthesisServiceType(value) {
        this.privSynthesisServiceType = value;
    }
    get SpeechServiceConfig() {
        return this.privSpeechServiceConfig;
    }
}

//# sourceMappingURL=SynthesizerConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranscriberConnectionFactory.js":
/*!******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranscriberConnectionFactory.js ***!
  \******************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TranscriberConnectionFactory": () => (/* binding */ TranscriberConnectionFactory)
/* harmony export */ });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketConnection.js");
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ProxyInfo.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/OutputFormat.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/WebsocketMessageFormatter.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
/* harmony import */ var _QueryParameterNames__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./QueryParameterNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.






class TranscriberConnectionFactory extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__.ConnectionFactoryBase {
    constructor() {
        super(...arguments);
        this.multiaudioRelativeUri = "/speech/recognition/multiaudio";
    }
    create(config, authInfo, connectionId) {
        let endpoint = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Endpoint, undefined);
        const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Region, "centralus");
        const hostSuffix = _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__.ConnectionFactoryBase.getHostSuffix(region);
        const hostDefault = "wss://transcribe." + region + ".cts.speech" + hostSuffix + this.multiaudioRelativeUri;
        const host = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Host, hostDefault);
        const queryParams = {};
        this.setQueryParams(queryParams, config, endpoint);
        if (!endpoint) {
            endpoint = host;
        }
        const headers = {};
        if (authInfo.token !== undefined && authInfo.token !== "") {
            headers[authInfo.headerName] = authInfo.token;
        }
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.ConnectionId] = connectionId;
        config.parameters.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Url, endpoint);
        const enableCompression = config.parameters.getProperty("SPEECH-EnableWebsocketCompression", "false") === "true";
        return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_3__.WebsocketConnection(endpoint, queryParams, headers, new _Exports__WEBPACK_IMPORTED_MODULE_4__.WebsocketMessageFormatter(), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_5__.ProxyInfo.fromRecognizerConfig(config), enableCompression, connectionId);
    }
    setQueryParams(queryParams, config, endpointUrl) {
        const endpointId = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_EndpointId, undefined);
        const language = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_RecoLanguage, undefined);
        if (endpointId && !(_QueryParameterNames__WEBPACK_IMPORTED_MODULE_6__.QueryParameterNames.CustomSpeechDeploymentId in queryParams)) {
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_6__.QueryParameterNames.CustomSpeechDeploymentId] = endpointId;
        }
        if (language && !(_QueryParameterNames__WEBPACK_IMPORTED_MODULE_6__.QueryParameterNames.Language in queryParams)) {
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_6__.QueryParameterNames.Language] = language;
        }
        const wordLevelTimings = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps, "false").toLowerCase() === "true";
        const detailed = config.parameters.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_7__.OutputFormatPropertyName, _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.OutputFormat[_sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.OutputFormat.Simple]) !== _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.OutputFormat[_sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.OutputFormat.Simple];
        if (wordLevelTimings || detailed) {
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_6__.QueryParameterNames.Format] = _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.OutputFormat[_sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.OutputFormat.Detailed].toLowerCase();
        }
        this.setCommonUrlParams(config, queryParams, endpointUrl);
    }
}

//# sourceMappingURL=TranscriberConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionConfig.js":
/*!********************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionConfig.js ***!
  \********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationConnectionConfig": () => (/* binding */ ConversationConnectionConfig)
/* harmony export */ });
/* harmony import */ var _common_browser_RestConfigBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common.browser/RestConfigBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/RestConfigBase.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class ConversationConnectionConfig extends _common_browser_RestConfigBase__WEBPACK_IMPORTED_MODULE_0__.RestConfigBase {
    static get host() {
        return ConversationConnectionConfig.privHost;
    }
    static get apiVersion() {
        return ConversationConnectionConfig.privApiVersion;
    }
    static get clientAppId() {
        return ConversationConnectionConfig.privClientAppId;
    }
    static get defaultLanguageCode() {
        return ConversationConnectionConfig.privDefaultLanguageCode;
    }
    static get restPath() {
        return ConversationConnectionConfig.privRestPath;
    }
    static get webSocketPath() {
        return ConversationConnectionConfig.privWebSocketPath;
    }
    static get transcriptionEventKeys() {
        return ConversationConnectionConfig.privTranscriptionEventKeys;
    }
}
ConversationConnectionConfig.privHost = "dev.microsofttranslator.com";
ConversationConnectionConfig.privRestPath = "/capito/room";
ConversationConnectionConfig.privApiVersion = "2.0";
ConversationConnectionConfig.privDefaultLanguageCode = "en-US";
ConversationConnectionConfig.privClientAppId = "FC539C22-1767-4F1F-84BC-B4D811114F15";
ConversationConnectionConfig.privWebSocketPath = "/capito/translate";
ConversationConnectionConfig.privTranscriptionEventKeys = ["iCalUid", "callId", "organizer", "FLAC", "MTUri", "DifferentiateGuestSpeakers", "audiorecording", "Threadid", "OrganizerMri", "OrganizerTenantId", "UserToken"];

//# sourceMappingURL=ConversationConnectionConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionFactory.js":
/*!*********************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionFactory.js ***!
  \*********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationConnectionFactory": () => (/* binding */ ConversationConnectionFactory)
/* harmony export */ });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketConnection.js");
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ProxyInfo.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _sdk_Contracts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../sdk/Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConversationConnectionConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionConfig.js");
/* harmony import */ var _ConversationWebsocketMessageFormatter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ConversationWebsocketMessageFormatter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationWebsocketMessageFormatter.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.







/**
 * Create a connection to the Conversation Translator websocket for sending instant messages and commands, and for receiving translated messages.
 * The conversation must already have been started or joined.
 */
class ConversationConnectionFactory extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__.ConnectionFactoryBase {
    create(config, authInfo, connectionId) {
        const endpointHost = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.ConversationTranslator_Host, _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_2__.ConversationConnectionConfig.host);
        const correlationId = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.ConversationTranslator_CorrelationId, (0,_common_Exports__WEBPACK_IMPORTED_MODULE_3__.createGuid)());
        const endpoint = `wss://${endpointHost}${_ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_2__.ConversationConnectionConfig.webSocketPath}`;
        const token = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.ConversationTranslator_Token, undefined);
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_4__.Contracts.throwIfNullOrUndefined(token, "token");
        const queryParams = {};
        queryParams[_ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_2__.ConversationConnectionConfig.configParams.apiVersion] = _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_2__.ConversationConnectionConfig.apiVersion;
        queryParams[_ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_2__.ConversationConnectionConfig.configParams.token] = token;
        queryParams[_ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_2__.ConversationConnectionConfig.configParams.correlationId] = correlationId;
        const enableCompression = config.parameters.getProperty("SPEECH-EnableWebsocketCompression", "false") === "true";
        return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_5__.WebsocketConnection(endpoint, queryParams, {}, new _ConversationWebsocketMessageFormatter__WEBPACK_IMPORTED_MODULE_6__.ConversationWebsocketMessageFormatter(), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_7__.ProxyInfo.fromRecognizerConfig(config), enableCompression, connectionId);
    }
}

//# sourceMappingURL=ConversationConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionMessage.js":
/*!*********************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionMessage.js ***!
  \*********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationConnectionMessage": () => (/* binding */ ConversationConnectionMessage)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class ConversationConnectionMessage extends _common_Exports__WEBPACK_IMPORTED_MODULE_0__.ConnectionMessage {
    constructor(messageType, body, headers, id) {
        super(messageType, body, headers, id);
        const json = JSON.parse(this.textBody);
        if (json.type !== undefined) {
            this.privConversationMessageType = json.type;
        }
    }
    get conversationMessageType() {
        return this.privConversationMessageType;
    }
}

//# sourceMappingURL=ConversationConnectionMessage.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationManager.js":
/*!***********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationManager.js ***!
  \***********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationManager": () => (/* binding */ ConversationManager)
/* harmony export */ });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/RestMessageAdapter.js");
/* harmony import */ var _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../sdk/Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConversationConnectionConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionConfig.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.




class ConversationManager {
    constructor() {
        //
        this.privRequestParams = _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_0__.ConversationConnectionConfig.configParams;
        this.privErrors = _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_0__.ConversationConnectionConfig.restErrors;
        this.privHost = _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_0__.ConversationConnectionConfig.host;
        this.privApiVersion = _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_0__.ConversationConnectionConfig.apiVersion;
        this.privRestPath = _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_0__.ConversationConnectionConfig.restPath;
        this.privRestAdapter = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_1__.RestMessageAdapter({});
    }
    /**
     * Make a POST request to the Conversation Manager service endpoint to create or join a conversation.
     * @param args
     * @param conversationCode
     * @param callback
     * @param errorCallback
     */
    createOrJoin(args, conversationCode, cb, err) {
        try {
            _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__.Contracts.throwIfNullOrUndefined(args, "args");
            const languageCode = args.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_RecoLanguage, _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_0__.ConversationConnectionConfig.defaultLanguageCode);
            const nickname = args.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.ConversationTranslator_Name, "conversation_host");
            const endpointHost = args.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.ConversationTranslator_Host, this.privHost);
            const correlationId = args.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.ConversationTranslator_CorrelationId);
            const subscriptionKey = args.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_Key);
            const subscriptionRegion = args.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_Region);
            const authToken = args.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceAuthorization_Token);
            _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__.Contracts.throwIfNullOrWhitespace(languageCode, "languageCode");
            _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__.Contracts.throwIfNullOrWhitespace(nickname, "nickname");
            _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__.Contracts.throwIfNullOrWhitespace(endpointHost, "endpointHost");
            const queryParams = {};
            queryParams[this.privRequestParams.apiVersion] = this.privApiVersion;
            queryParams[this.privRequestParams.languageCode] = languageCode;
            queryParams[this.privRequestParams.nickname] = nickname;
            const headers = {};
            if (correlationId) {
                headers[this.privRequestParams.correlationId] = correlationId;
            }
            headers[this.privRequestParams.clientAppId] = _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_0__.ConversationConnectionConfig.clientAppId;
            if (conversationCode !== undefined) {
                queryParams[this.privRequestParams.roomId] = conversationCode;
            }
            else {
                _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__.Contracts.throwIfNullOrUndefined(subscriptionRegion, this.privErrors.authInvalidSubscriptionRegion);
                headers[this.privRequestParams.subscriptionRegion] = subscriptionRegion;
                if (subscriptionKey) {
                    headers[this.privRequestParams.subscriptionKey] = subscriptionKey;
                }
                else if (authToken) {
                    headers[this.privRequestParams.authorization] = `Bearer ${authToken}`;
                }
                else {
                    _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__.Contracts.throwIfNullOrUndefined(subscriptionKey, this.privErrors.authInvalidSubscriptionKey);
                }
            }
            const config = {};
            config.headers = headers;
            this.privRestAdapter.options = config;
            const endpoint = `https://${endpointHost}${this.privRestPath}`;
            // TODO: support a proxy and certificate validation
            this.privRestAdapter.request(_common_browser_Exports__WEBPACK_IMPORTED_MODULE_1__.RestRequestType.Post, endpoint, queryParams, null).then((response) => {
                const requestId = _common_browser_Exports__WEBPACK_IMPORTED_MODULE_1__.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId, response.headers);
                if (!response.ok) {
                    if (!!err) {
                        // get the error
                        let errorMessage = this.privErrors.invalidCreateJoinConversationResponse.replace("{status}", response.status.toString());
                        let errMessageRaw;
                        try {
                            errMessageRaw = JSON.parse(response.data);
                            errorMessage += ` [${errMessageRaw.error.code}: ${errMessageRaw.error.message}]`;
                        }
                        catch (e) {
                            errorMessage += ` [${response.data}]`;
                        }
                        if (requestId) {
                            errorMessage += ` ${requestId}`;
                        }
                        err(errorMessage);
                    }
                    return;
                }
                const conversation = JSON.parse(response.data);
                if (conversation) {
                    conversation.requestId = requestId;
                }
                if (!!cb) {
                    try {
                        cb(conversation);
                    }
                    catch (e) {
                        if (!!err) {
                            err(e);
                        }
                    }
                    cb = undefined;
                }
                // eslint-disable-next-line @typescript-eslint/no-empty-function
            }).catch(() => { });
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
        }
    }
    /**
     * Make a DELETE request to the Conversation Manager service endpoint to leave the conversation.
     * @param args
     * @param sessionToken
     * @param callback
     */
    leave(args, sessionToken) {
        return new Promise((resolve, reject) => {
            try {
                _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__.Contracts.throwIfNullOrUndefined(args, this.privErrors.invalidArgs.replace("{arg}", "config"));
                _sdk_Contracts__WEBPACK_IMPORTED_MODULE_2__.Contracts.throwIfNullOrWhitespace(sessionToken, this.privErrors.invalidArgs.replace("{arg}", "token"));
                const endpointHost = args.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.ConversationTranslator_Host, this.privHost);
                const correlationId = args.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.ConversationTranslator_CorrelationId);
                const queryParams = {};
                queryParams[this.privRequestParams.apiVersion] = this.privApiVersion;
                queryParams[this.privRequestParams.sessionToken] = sessionToken;
                const headers = {};
                if (correlationId) {
                    headers[this.privRequestParams.correlationId] = correlationId;
                }
                const config = {};
                config.headers = headers;
                this.privRestAdapter.options = config;
                const endpoint = `https://${endpointHost}${this.privRestPath}`;
                // TODO: support a proxy and certificate validation
                this.privRestAdapter.request(_common_browser_Exports__WEBPACK_IMPORTED_MODULE_1__.RestRequestType.Delete, endpoint, queryParams, null).then((response) => {
                    if (!response.ok) {
                        // ignore errors on delete
                    }
                    resolve();
                    // eslint-disable-next-line @typescript-eslint/no-empty-function
                }).catch(() => { });
            }
            catch (error) {
                if (error instanceof Error) {
                    const typedError = error;
                    reject(typedError.name + ": " + typedError.message);
                }
                else {
                    reject(error);
                }
            }
        });
    }
}

//# sourceMappingURL=ConversationManager.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationRequestSession.js":
/*!******************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationRequestSession.js ***!
  \******************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationRequestSession": () => (/* binding */ ConversationRequestSession)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

/**
 * Placeholder class for the Conversation Request Session. Based off RequestSession.
 * TODO: define what telemetry is required.
 */
class ConversationRequestSession {
    constructor(sessionId) {
        this.privIsDisposed = false;
        this.privDetachables = new Array();
        this.privSessionId = sessionId;
        this.privRequestId = (0,_common_Exports__WEBPACK_IMPORTED_MODULE_0__.createNoDashGuid)();
        this.privRequestCompletionDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__.Deferred();
    }
    get sessionId() {
        return this.privSessionId;
    }
    get requestId() {
        return this.privRequestId;
    }
    get completionPromise() {
        return this.privRequestCompletionDeferral.promise;
    }
    onPreConnectionStart(authFetchEventId, connectionId) {
        this.privSessionId = connectionId;
    }
    onAuthCompleted(isError) {
        if (isError) {
            this.onComplete();
        }
    }
    onConnectionEstablishCompleted(statusCode) {
        if (statusCode === 200) {
            return;
        }
        else if (statusCode === 403) {
            this.onComplete();
        }
    }
    onServiceTurnEndResponse(continuousRecognition) {
        if (!continuousRecognition) {
            this.onComplete();
        }
        else {
            this.privRequestId = (0,_common_Exports__WEBPACK_IMPORTED_MODULE_0__.createNoDashGuid)();
        }
    }
    dispose() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.privIsDisposed) {
                // we should have completed by now. If we did not its an unknown error.
                this.privIsDisposed = true;
                for (const detachable of this.privDetachables) {
                    yield detachable.detach();
                }
            }
        });
    }
    onComplete() {
        //
    }
}

//# sourceMappingURL=ConversationRequestSession.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationServiceAdapter.js":
/*!******************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationServiceAdapter.js ***!
  \******************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationServiceAdapter": () => (/* binding */ ConversationServiceAdapter)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IConnection.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationCanceledEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationExpirationEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationResult.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Translations.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceRecognizerBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveTokenAuthentication.js");
/* harmony import */ var _ConversationConnectionMessage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ConversationConnectionMessage */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionMessage.js");
/* harmony import */ var _ConversationRequestSession__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConversationRequestSession */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationRequestSession.js");
/* harmony import */ var _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./ConversationTranslatorEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorEventArgs.js");
/* harmony import */ var _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./ConversationTranslatorInterfaces */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorInterfaces.js");
/* harmony import */ var _ServiceMessages_Exports__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ServiceMessages/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/CommandResponsePayload.js");
/* harmony import */ var _ServiceMessages_Exports__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./ServiceMessages/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/ParticipantResponsePayload.js");
/* harmony import */ var _ServiceMessages_Exports__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./ServiceMessages/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/TranslationResponsePayload.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};








/**
 * The service adapter handles sending and receiving messages to the Conversation Translator websocket.
 */
class ConversationServiceAdapter extends _Exports__WEBPACK_IMPORTED_MODULE_0__.ServiceRecognizerBase {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, conversationServiceConnector) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, conversationServiceConnector);
        this.privConnectionConfigPromise = undefined;
        this.privLastPartialUtteranceId = "";
        this.privConversationServiceConnector = conversationServiceConnector;
        this.privConversationAuthentication = authentication;
        this.receiveMessageOverride = () => this.receiveConversationMessageOverride();
        this.recognizeOverride = () => this.noOp();
        this.postConnectImplOverride = (connection) => this.conversationConnectImpl(connection);
        this.configConnectionOverride = () => this.configConnection();
        this.disconnectOverride = () => this.privDisconnect();
        this.privConversationRequestSession = new _ConversationRequestSession__WEBPACK_IMPORTED_MODULE_1__.ConversationRequestSession((0,_common_Exports__WEBPACK_IMPORTED_MODULE_2__.createNoDashGuid)());
        this.privConversationConnectionFactory = connectionFactory;
        this.privConversationIsDisposed = false;
    }
    isDisposed() {
        return super.isDisposed() || this.privConversationIsDisposed;
    }
    dispose(reason) {
        const _super = Object.create(null, {
            dispose: { get: () => super.dispose }
        });
        return __awaiter(this, void 0, void 0, function* () {
            this.privConversationIsDisposed = true;
            if (this.privConnectionConfigPromise !== undefined) {
                const connection = yield this.privConnectionConfigPromise;
                yield connection.dispose(reason);
            }
            yield _super.dispose.call(this, reason);
        });
    }
    sendMessage(message) {
        return __awaiter(this, void 0, void 0, function* () {
            const connection = yield this.fetchConnection();
            return connection.send(new _ConversationConnectionMessage__WEBPACK_IMPORTED_MODULE_3__.ConversationConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_4__.MessageType.Text, message));
        });
    }
    sendMessageAsync(message) {
        return __awaiter(this, void 0, void 0, function* () {
            const connection = yield this.fetchConnection();
            yield connection.send(new _ConversationConnectionMessage__WEBPACK_IMPORTED_MODULE_3__.ConversationConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_4__.MessageType.Text, message));
        });
    }
    privDisconnect() {
        if (this.terminateMessageLoop) {
            return;
        }
        this.cancelRecognition(this.privConversationRequestSession.sessionId, this.privConversationRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.CancellationReason.Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.CancellationErrorCode.NoError, "Disconnecting");
        this.terminateMessageLoop = true;
        return Promise.resolve();
    }
    // eslint-disable-next-line @typescript-eslint/require-await
    processTypeSpecificMessages() {
        return __awaiter(this, void 0, void 0, function* () {
            return true;
        });
    }
    // Cancels recognition.
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error) {
        this.terminateMessageLoop = true;
        const cancelEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_7__.ConversationTranslationCanceledEventArgs(cancellationReason, error, errorCode, undefined, sessionId);
        try {
            if (!!this.privConversationServiceConnector.canceled) {
                this.privConversationServiceConnector.canceled(this.privConversationServiceConnector, cancelEvent);
            }
        }
        catch (_a) {
            // continue on error
        }
    }
    /**
     * Establishes a websocket connection to the end point.
     */
    conversationConnectImpl(connection) {
        return __awaiter(this, void 0, void 0, function* () {
            this.privConnectionLoop = this.startMessageLoop();
            return connection;
        });
    }
    /**
     * Process incoming websocket messages
     */
    receiveConversationMessageOverride() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.isDisposed() || this.terminateMessageLoop) {
                return Promise.resolve();
            }
            // we won't rely on the cascading promises of the connection since we want to continually be available to receive messages
            const communicationCustodian = new _common_Exports__WEBPACK_IMPORTED_MODULE_8__.Deferred();
            try {
                const connection = yield this.fetchConnection();
                const message = yield connection.read();
                if (this.isDisposed() || this.terminateMessageLoop) {
                    // We're done.
                    communicationCustodian.resolve();
                    return Promise.resolve();
                }
                if (!message) {
                    return this.receiveConversationMessageOverride();
                }
                const sessionId = this.privConversationRequestSession.sessionId;
                const conversationMessageType = message.conversationMessageType.toLowerCase();
                let sendFinal = false;
                try {
                    switch (conversationMessageType) {
                        case "info":
                        case "participant_command":
                        case "command":
                            const commandPayload = _ServiceMessages_Exports__WEBPACK_IMPORTED_MODULE_9__.CommandResponsePayload.fromJSON(message.textBody);
                            switch (commandPayload.command.toLowerCase()) {
                                /**
                                 * 'ParticpantList' is the first message sent to the user after the websocket connection has opened.
                                 * The consuming client must wait for this message to arrive
                                 * before starting to send their own data.
                                 */
                                case "participantlist":
                                    const participantsPayload = _ServiceMessages_Exports__WEBPACK_IMPORTED_MODULE_10__.ParticipantsListPayloadResponse.fromJSON(message.textBody);
                                    const participantsResult = participantsPayload.participants.map((p) => {
                                        const participant = {
                                            avatar: p.avatar,
                                            displayName: p.nickname,
                                            id: p.participantId,
                                            isHost: p.ishost,
                                            isMuted: p.ismuted,
                                            isUsingTts: p.usetts,
                                            preferredLanguage: p.locale
                                        };
                                        return participant;
                                    });
                                    if (!!this.privConversationServiceConnector.participantsListReceived) {
                                        this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_11__.ParticipantsListEventArgs(participantsPayload.roomid, participantsPayload.token, participantsPayload.translateTo, participantsPayload.profanityFilter, participantsPayload.roomProfanityFilter, participantsPayload.roomLocked, participantsPayload.muteAll, participantsResult, sessionId));
                                    }
                                    break;
                                /**
                                 * 'SetTranslateToLanguages' represents the list of languages being used in the Conversation by all users(?).
                                 * This is sent at the start of the Conversation
                                 */
                                case "settranslatetolanguages":
                                    if (!!this.privConversationServiceConnector.participantUpdateCommandReceived) {
                                        this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_11__.ParticipantAttributeEventArgs(commandPayload.participantId, _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_12__.ConversationTranslatorCommandTypes.setTranslateToLanguages, commandPayload.value, sessionId));
                                    }
                                    break;
                                /**
                                 * 'SetProfanityFiltering' lets the client set the level of profanity filtering.
                                 * If sent by the participant the setting will effect only their own profanity level.
                                 * If sent by the host, the setting will effect all participants including the host.
                                 * Note: the profanity filters differ from Speech Service (?): 'marked', 'raw', 'removed', 'tagged'
                                 */
                                case "setprofanityfiltering":
                                    if (!!this.privConversationServiceConnector.participantUpdateCommandReceived) {
                                        this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_11__.ParticipantAttributeEventArgs(commandPayload.participantId, _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_12__.ConversationTranslatorCommandTypes.setProfanityFiltering, commandPayload.value, sessionId));
                                    }
                                    break;
                                /**
                                 * 'SetMute' is sent if the participant has been muted by the host.
                                 * Check the 'participantId' to determine if the current user has been muted.
                                 */
                                case "setmute":
                                    if (!!this.privConversationServiceConnector.participantUpdateCommandReceived) {
                                        this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_11__.ParticipantAttributeEventArgs(commandPayload.participantId, _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_12__.ConversationTranslatorCommandTypes.setMute, commandPayload.value, sessionId));
                                    }
                                    break;
                                /**
                                 * 'SetMuteAll' is sent if the Conversation has been muted by the host.
                                 */
                                case "setmuteall":
                                    if (!!this.privConversationServiceConnector.muteAllCommandReceived) {
                                        this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_11__.MuteAllEventArgs(commandPayload.value, sessionId));
                                    }
                                    break;
                                /**
                                 * 'RoomExpirationWarning' is sent towards the end of the Conversation session to give a timeout warning.
                                 */
                                case "roomexpirationwarning":
                                    if (!!this.privConversationServiceConnector.conversationExpiration) {
                                        this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector, new _sdk_Exports__WEBPACK_IMPORTED_MODULE_13__.ConversationExpirationEventArgs(commandPayload.value, this.privConversationRequestSession.sessionId));
                                    }
                                    break;
                                /**
                                 * 'SetUseTts' is sent as a confirmation if the user requests TTS to be turned on or off.
                                 */
                                case "setusetts":
                                    if (!!this.privConversationServiceConnector.participantUpdateCommandReceived) {
                                        this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_11__.ParticipantAttributeEventArgs(commandPayload.participantId, _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_12__.ConversationTranslatorCommandTypes.setUseTTS, commandPayload.value, sessionId));
                                    }
                                    break;
                                /**
                                 * 'SetLockState' is set if the host has locked or unlocked the Conversation.
                                 */
                                case "setlockstate":
                                    if (!!this.privConversationServiceConnector.lockRoomCommandReceived) {
                                        this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_11__.LockRoomEventArgs(commandPayload.value, sessionId));
                                    }
                                    break;
                                /**
                                 * 'ChangeNickname' is received if a user changes their display name.
                                 * Any cached particpiants list should be updated to reflect the display name.
                                 */
                                case "changenickname":
                                    if (!!this.privConversationServiceConnector.participantUpdateCommandReceived) {
                                        this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_11__.ParticipantAttributeEventArgs(commandPayload.participantId, _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_12__.ConversationTranslatorCommandTypes.changeNickname, commandPayload.nickname, sessionId));
                                    }
                                    break;
                                /**
                                 * 'JoinSession' is sent when a user joins the Conversation.
                                 */
                                case "joinsession":
                                    const joinParticipantPayload = _ServiceMessages_Exports__WEBPACK_IMPORTED_MODULE_10__.ParticipantPayloadResponse.fromJSON(message.textBody);
                                    const joiningParticipant = {
                                        avatar: joinParticipantPayload.avatar,
                                        displayName: joinParticipantPayload.nickname,
                                        id: joinParticipantPayload.participantId,
                                        isHost: joinParticipantPayload.ishost,
                                        isMuted: joinParticipantPayload.ismuted,
                                        isUsingTts: joinParticipantPayload.usetts,
                                        preferredLanguage: joinParticipantPayload.locale,
                                    };
                                    if (!!this.privConversationServiceConnector.participantJoinCommandReceived) {
                                        this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_11__.ParticipantEventArgs(joiningParticipant, sessionId));
                                    }
                                    break;
                                /**
                                 * 'LeaveSession' is sent when a user leaves the Conversation'.
                                 */
                                case "leavesession":
                                    const leavingParticipant = {
                                        id: commandPayload.participantId
                                    };
                                    if (!!this.privConversationServiceConnector.participantLeaveCommandReceived) {
                                        this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_11__.ParticipantEventArgs(leavingParticipant, sessionId));
                                    }
                                    break;
                                /**
                                 * 'DisconnectSession' is sent when a user is disconnected from the session (e.g. network problem).
                                 * Check the 'ParticipantId' to check whether the message is for the current user.
                                 */
                                case "disconnectsession":
                                    // eslint-disable-next-line @typescript-eslint/no-unused-vars
                                    const disconnectParticipant = {
                                        id: commandPayload.participantId
                                    };
                                    break;
                                case "token":
                                    const token = new _Exports__WEBPACK_IMPORTED_MODULE_14__.CognitiveTokenAuthentication(() => {
                                        const authorizationToken = commandPayload.token;
                                        return Promise.resolve(authorizationToken);
                                    }, () => {
                                        const authorizationToken = commandPayload.token;
                                        return Promise.resolve(authorizationToken);
                                    });
                                    this.authentication = token;
                                    break;
                                /**
                                 * Message not recognized.
                                 */
                                default:
                                    break;
                            }
                            break;
                        /**
                         * 'partial' (or 'hypothesis') represents a unfinalized speech message.
                         */
                        case "partial":
                        /**
                         * 'final' (or 'phrase') represents a finalized speech message.
                         */
                        case "final":
                            const speechPayload = _ServiceMessages_Exports__WEBPACK_IMPORTED_MODULE_15__.SpeechResponsePayload.fromJSON(message.textBody);
                            const conversationResultReason = (conversationMessageType === "final") ? _sdk_Exports__WEBPACK_IMPORTED_MODULE_16__.ResultReason.TranslatedParticipantSpeech : _sdk_Exports__WEBPACK_IMPORTED_MODULE_16__.ResultReason.TranslatingParticipantSpeech;
                            const speechResult = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_17__.ConversationTranslationResult(speechPayload.participantId, this.getTranslations(speechPayload.translations), speechPayload.language, speechPayload.id, conversationResultReason, speechPayload.recognition, undefined, undefined, message.textBody, undefined);
                            if (speechPayload.isFinal) {
                                // check the length, sometimes empty finals are returned
                                if (speechResult.text !== undefined && speechResult.text.length > 0) {
                                    sendFinal = true;
                                }
                                else if (speechPayload.id === this.privLastPartialUtteranceId) {
                                    // send final as normal. We had a non-empty partial for this same utterance
                                    // so sending the empty final is important
                                    sendFinal = true;
                                }
                                else {
                                    // suppress unneeded final
                                }
                                if (sendFinal) {
                                    if (!!this.privConversationServiceConnector.translationReceived) {
                                        this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_11__.ConversationReceivedTranslationEventArgs(_ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_12__.ConversationTranslatorMessageTypes.final, speechResult, sessionId));
                                    }
                                }
                            }
                            else if (speechResult.text !== undefined) {
                                this.privLastPartialUtteranceId = speechPayload.id;
                                if (!!this.privConversationServiceConnector.translationReceived) {
                                    this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_11__.ConversationReceivedTranslationEventArgs(_ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_12__.ConversationTranslatorMessageTypes.partial, speechResult, sessionId));
                                }
                            }
                            break;
                        /**
                         * "translated_message" is a text message or instant message (IM).
                         */
                        case "translated_message":
                            const textPayload = _ServiceMessages_Exports__WEBPACK_IMPORTED_MODULE_15__.TextResponsePayload.fromJSON(message.textBody);
                            // TODO: (Native parity) a result reason should be set based whether the participantId is ours or not
                            const textResult = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_17__.ConversationTranslationResult(textPayload.participantId, this.getTranslations(textPayload.translations), textPayload.language, undefined, undefined, textPayload.originalText, undefined, undefined, undefined, message.textBody, undefined);
                            if (!!this.privConversationServiceConnector.translationReceived) {
                                this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector, new _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_11__.ConversationReceivedTranslationEventArgs(_ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_12__.ConversationTranslatorMessageTypes.instantMessage, textResult, sessionId));
                            }
                            break;
                        default:
                            // ignore any unsupported message types
                            break;
                    }
                }
                catch (e) {
                    // continue
                }
                return this.receiveConversationMessageOverride();
            }
            catch (e) {
                this.terminateMessageLoop = true;
            }
            return communicationCustodian.promise;
        });
    }
    startMessageLoop() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.isDisposed()) {
                return Promise.resolve();
            }
            this.terminateMessageLoop = false;
            const messageRetrievalPromise = this.receiveConversationMessageOverride();
            try {
                const r = yield messageRetrievalPromise;
                return r;
            }
            catch (error) {
                this.cancelRecognition(this.privRequestSession ? this.privRequestSession.sessionId : "", this.privRequestSession ? this.privRequestSession.requestId : "", _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.CancellationReason.Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.CancellationErrorCode.RuntimeError, error);
                return null;
            }
        });
    }
    // Takes an established websocket connection to the endpoint
    configConnection() {
        if (this.isDisposed()) {
            return Promise.resolve(undefined);
        }
        if (this.privConnectionConfigPromise !== undefined) {
            return this.privConnectionConfigPromise.then((connection) => {
                if (connection.state() === _common_Exports__WEBPACK_IMPORTED_MODULE_18__.ConnectionState.Disconnected) {
                    this.privConnectionId = null;
                    this.privConnectionConfigPromise = undefined;
                    return this.configConnection();
                }
                return this.privConnectionConfigPromise;
            }, () => {
                this.privConnectionId = null;
                this.privConnectionConfigPromise = undefined;
                return this.configConnection();
            });
        }
        if (this.terminateMessageLoop) {
            return Promise.resolve(undefined);
        }
        this.privConnectionConfigPromise = this.connectImpl().then((connection) => connection);
        return this.privConnectionConfigPromise;
    }
    getTranslations(serviceResultTranslations) {
        let translations;
        if (undefined !== serviceResultTranslations) {
            translations = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_19__.Translations();
            for (const translation of serviceResultTranslations) {
                translations.set(translation.lang, translation.translation);
            }
        }
        return translations;
    }
}

//# sourceMappingURL=ConversationServiceAdapter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorConnectionFactory.js":
/*!*******************************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorConnectionFactory.js ***!
  \*******************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationTranslatorConnectionFactory": () => (/* binding */ ConversationTranslatorConnectionFactory)
/* harmony export */ });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/RestConfigBase.js");
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketConnection.js");
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ProxyInfo.js");
/* harmony import */ var _common_StringUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/StringUtils */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/StringUtils.js");
/* harmony import */ var _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../sdk/Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
/* harmony import */ var _QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../QueryParameterNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./../ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranscriberConnectionFactory.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationConnectionFactory.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/WebsocketMessageFormatter.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.








/**
 * Connection factory for the conversation translator. Handles connecting to the regular translator endpoint,
 * as well as the virtual microphone array transcription endpoint
 */
class ConversationTranslatorConnectionFactory extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__.ConnectionFactoryBase {
    constructor(convGetter) {
        super();
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(convGetter, "convGetter");
        this.privConvGetter = convGetter;
    }
    create(config, authInfo, connectionId) {
        const isVirtMicArrayEndpoint = config.parameters.getProperty("ConversationTranslator_MultiChannelAudio", "").toUpperCase() === "TRUE";
        const convInfo = this.privConvGetter().room;
        const region = convInfo.cognitiveSpeechRegion || config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Region, "");
        const replacementValues = {
            hostSuffix: _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__.ConnectionFactoryBase.getHostSuffix(region),
            path: ConversationTranslatorConnectionFactory.CTS_VIRT_MIC_PATH,
            region: encodeURIComponent(region)
        };
        replacementValues[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__.QueryParameterNames.Language] = encodeURIComponent(config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_RecoLanguage, ""));
        replacementValues[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__.QueryParameterNames.CtsMeetingId] = encodeURIComponent(convInfo.roomId);
        replacementValues[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__.QueryParameterNames.CtsDeviceId] = encodeURIComponent(convInfo.participantId);
        replacementValues[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__.QueryParameterNames.CtsIsParticipant] = convInfo.isHost ? "" : ("&" + _QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__.QueryParameterNames.CtsIsParticipant);
        let endpointUrl = "";
        const queryParams = {};
        const headers = {};
        if (isVirtMicArrayEndpoint) {
            // connecting to the conversation transcription virtual microphone array endpoint
            endpointUrl = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Endpoint);
            if (!endpointUrl) {
                const hostName = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Host, "transcribe.{region}.cts.speech{hostSuffix}");
                endpointUrl = "wss://" + hostName + "{path}";
            }
            // because the region can change during a session, we support being passed a format string which we can then
            // replace with the correct information.
            endpointUrl = _common_StringUtils__WEBPACK_IMPORTED_MODULE_4__.StringUtils.formatString(endpointUrl, replacementValues);
            const parsedUrl = new URL(endpointUrl);
            parsedUrl.searchParams.forEach((val, key) => {
                queryParams[key] = val;
            });
            const connFactory = new _Exports__WEBPACK_IMPORTED_MODULE_5__.TranscriberConnectionFactory();
            connFactory.setQueryParams(queryParams, config, endpointUrl);
            // Some query parameters are required for the CTS endpoint, let's explicity set them here
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__.QueryParameterNames.CtsMeetingId] = replacementValues[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__.QueryParameterNames.CtsMeetingId];
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__.QueryParameterNames.CtsDeviceId] = replacementValues[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__.QueryParameterNames.CtsDeviceId];
            if (!convInfo.isHost) {
                queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__.QueryParameterNames.CtsIsParticipant] = ""; // this doesn't have a value so set to an empty string
            }
            if (!(_QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__.QueryParameterNames.Format in queryParams)) {
                queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_3__.QueryParameterNames.Format] = "simple";
            }
            parsedUrl.searchParams.forEach((val, key) => {
                parsedUrl.searchParams.set(key, queryParams[key]);
                delete queryParams[key];
            });
            endpointUrl = parsedUrl.toString();
        }
        else {
            // connecting to regular translation endpoint
            const connFactory = new _Exports__WEBPACK_IMPORTED_MODULE_6__.TranslationConnectionFactory();
            endpointUrl = connFactory.getEndpointUrl(config, true);
            endpointUrl = _common_StringUtils__WEBPACK_IMPORTED_MODULE_4__.StringUtils.formatString(endpointUrl, replacementValues);
            connFactory.setQueryParams(queryParams, config, endpointUrl);
        }
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_7__.HeaderNames.ConnectionId] = connectionId;
        headers[_common_browser_Exports__WEBPACK_IMPORTED_MODULE_8__.RestConfigBase.configParams.token] = convInfo.token;
        if (authInfo.token) {
            headers[authInfo.headerName] = authInfo.token;
        }
        const enableCompression = config.parameters.getProperty("SPEECH-EnableWebsocketCompression", "").toUpperCase() === "TRUE";
        return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_9__.WebsocketConnection(endpointUrl, queryParams, headers, new _Exports__WEBPACK_IMPORTED_MODULE_10__.WebsocketMessageFormatter(), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_11__.ProxyInfo.fromRecognizerConfig(config), enableCompression, connectionId);
    }
}
ConversationTranslatorConnectionFactory.CTS_VIRT_MIC_PATH = "/speech/recognition/dynamicaudio";

//# sourceMappingURL=ConversationTranslatorConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorEventArgs.js":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorEventArgs.js ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationReceivedTranslationEventArgs": () => (/* binding */ ConversationReceivedTranslationEventArgs),
/* harmony export */   "LockRoomEventArgs": () => (/* binding */ LockRoomEventArgs),
/* harmony export */   "MuteAllEventArgs": () => (/* binding */ MuteAllEventArgs),
/* harmony export */   "ParticipantAttributeEventArgs": () => (/* binding */ ParticipantAttributeEventArgs),
/* harmony export */   "ParticipantEventArgs": () => (/* binding */ ParticipantEventArgs),
/* harmony export */   "ParticipantsListEventArgs": () => (/* binding */ ParticipantsListEventArgs)
/* harmony export */ });
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */

class MuteAllEventArgs extends _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.SessionEventArgs {
    constructor(isMuted, sessionId) {
        super(sessionId);
        this.privIsMuted = isMuted;
    }
    get isMuted() {
        return this.privIsMuted;
    }
}
class LockRoomEventArgs extends _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.SessionEventArgs {
    constructor(isLocked, sessionId) {
        super(sessionId);
        this.privIsLocked = isLocked;
    }
    get isMuted() {
        return this.privIsLocked;
    }
}
class ParticipantEventArgs extends _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.SessionEventArgs {
    constructor(participant, sessionId) {
        super(sessionId);
        this.privParticipant = participant;
    }
    get participant() {
        return this.privParticipant;
    }
}
class ParticipantAttributeEventArgs extends _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.SessionEventArgs {
    constructor(participantId, key, value, sessionId) {
        super(sessionId);
        this.privKey = key;
        this.privValue = value;
        this.privParticipantId = participantId;
    }
    get value() {
        return this.privValue;
    }
    get key() {
        return this.privKey;
    }
    get id() {
        return this.privParticipantId;
    }
}
class ParticipantsListEventArgs extends _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.SessionEventArgs {
    constructor(conversationId, token, translateTo, profanityFilter, roomProfanityFilter, isRoomLocked, isMuteAll, participants, sessionId) {
        super(sessionId);
        this.privRoomId = conversationId;
        this.privSessionToken = token;
        this.privTranslateTo = translateTo;
        this.privProfanityFilter = profanityFilter;
        this.privRoomProfanityFilter = roomProfanityFilter;
        this.privIsRoomLocked = isRoomLocked;
        this.privIsRoomLocked = isMuteAll;
        this.privParticipants = participants;
    }
    get sessionToken() {
        return this.privSessionToken;
    }
    get conversationId() {
        return this.privRoomId;
    }
    get translateTo() {
        return this.privTranslateTo;
    }
    get profanityFilter() {
        return this.privProfanityFilter;
    }
    get roomProfanityFilter() {
        return this.privRoomProfanityFilter;
    }
    get isRoomLocked() {
        return this.privIsRoomLocked;
    }
    get isMuteAll() {
        return this.privIsMuteAll;
    }
    get participants() {
        return this.privParticipants;
    }
}
class ConversationReceivedTranslationEventArgs {
    constructor(command, payload, sessionId) {
        this.privPayload = payload;
        this.privCommand = command;
        this.privSessionId = sessionId;
    }
    get payload() {
        return this.privPayload;
    }
    get command() {
        return this.privCommand;
    }
    get sessionId() {
        return this.privSessionId;
    }
}

//# sourceMappingURL=ConversationTranslatorEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorInterfaces.js":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorInterfaces.js ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationTranslatorCommandTypes": () => (/* binding */ ConversationTranslatorCommandTypes),
/* harmony export */   "ConversationTranslatorMessageTypes": () => (/* binding */ ConversationTranslatorMessageTypes),
/* harmony export */   "InternalParticipants": () => (/* binding */ InternalParticipants)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/** Users participating in the conversation */
class InternalParticipants {
    constructor(participants = [], meId) {
        this.participants = participants;
        this.meId = meId;
    }
    /**
     * Add or update a participant
     * @param value
     */
    addOrUpdateParticipant(value) {
        if (value === undefined) {
            return;
        }
        const exists = this.getParticipantIndex(value.id);
        if (exists > -1) {
            this.participants.splice(exists, 1, value);
        }
        else {
            this.participants.push(value);
        }
        // ensure it was added ok
        return this.getParticipant(value.id);
    }
    /**
     * Find the participant's position in the participants list.
     * @param id
     */
    getParticipantIndex(id) {
        return this.participants.findIndex((p) => p.id === id);
    }
    /**
     * Find the participant by id.
     * @param id
     */
    getParticipant(id) {
        return this.participants.find((p) => p.id === id);
    }
    /**
     * Remove a participant from the participants list.
     */
    deleteParticipant(id) {
        this.participants = this.participants.filter((p) => p.id !== id);
    }
    /**
     * Helper to return the conversation host.
     */
    get host() {
        return this.participants.find((p) => p.isHost === true);
    }
    /**
     * Helper to return the current user.
     */
    get me() {
        return this.getParticipant(this.meId);
    }
}
/**
 * List of command message types
 */
const ConversationTranslatorMessageTypes = {
    command: "command",
    final: "final",
    info: "info",
    instantMessage: "instant_message",
    keepAlive: "keep_alive",
    partial: "partial",
    participantCommand: "participant_command",
    translatedMessage: "translated_message"
};
/**
 * List of command types
 */
const ConversationTranslatorCommandTypes = {
    changeNickname: "ChangeNickname",
    disconnectSession: "DisconnectSession",
    ejectParticipant: "EjectParticipant",
    instant_message: "instant_message",
    joinSession: "JoinSession",
    leaveSession: "LeaveSession",
    participantList: "ParticipantList",
    roomExpirationWarning: "RoomExpirationWarning",
    setLockState: "SetLockState",
    setMute: "SetMute",
    setMuteAll: "SetMuteAll",
    setProfanityFiltering: "SetProfanityFiltering",
    setTranslateToLanguages: "SetTranslateToLanguages",
    setUseTTS: "SetUseTTS"
};

//# sourceMappingURL=ConversationTranslatorInterfaces.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorRecognizer.js":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorRecognizer.js ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationRecognizerFactory": () => (/* binding */ ConversationRecognizerFactory),
/* harmony export */   "ConversationTranslatorRecognizer": () => (/* binding */ ConversationTranslatorRecognizer)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Timeout.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/BackgroundError.js");
/* harmony import */ var _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../sdk/Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Recognizer.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Connection.js");
/* harmony import */ var _ConversationConnectionFactory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConversationConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionFactory.js");
/* harmony import */ var _ConversationServiceAdapter__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ConversationServiceAdapter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationServiceAdapter.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
// eslint-disable-next-line max-classes-per-file






class ConversationRecognizerFactory {
    static fromConfig(conversation, speechConfig, audioConfig) {
        return new ConversationTranslatorRecognizer(conversation, speechConfig, audioConfig);
    }
}
/**
 * Sends messages to the Conversation Translator websocket and listens for incoming events containing websocket messages.
 * Based off the recognizers in the SDK folder.
 */
class ConversationTranslatorRecognizer extends _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.Recognizer {
    constructor(conversation, speechConfig, audioConfig) {
        const serviceConfigImpl = speechConfig;
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNull(serviceConfigImpl, "speechConfig");
        const conversationImpl = conversation;
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNull(conversationImpl, "conversationImpl");
        super(audioConfig, serviceConfigImpl.properties, new _ConversationConnectionFactory__WEBPACK_IMPORTED_MODULE_2__.ConversationConnectionFactory());
        this.privConversation = conversationImpl;
        this.privIsDisposed = false;
        this.privProperties = serviceConfigImpl.properties.clone();
        this.privConnection = _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.Connection.fromRecognizer(this);
        this.privSetTimeout = (typeof (Blob) !== "undefined" && typeof (Worker) !== "undefined") ? _common_Exports__WEBPACK_IMPORTED_MODULE_4__.Timeout.setTimeout : setTimeout;
        this.privClearTimeout = (typeof (Blob) !== "undefined" && typeof (Worker) !== "undefined") ? _common_Exports__WEBPACK_IMPORTED_MODULE_4__.Timeout.clearTimeout : clearTimeout;
    }
    set connected(cb) {
        this.privConnection.connected = cb;
    }
    set disconnected(cb) {
        this.privConnection.disconnected = cb;
    }
    /**
     * Return the speech language used by the recognizer
     */
    get speechRecognitionLanguage() {
        return this.privSpeechRecognitionLanguage;
    }
    /**
     * Return the properties for the recognizer
     */
    get properties() {
        return this.privProperties;
    }
    isDisposed() {
        return this.privIsDisposed;
    }
    /**
     * Connect to the recognizer
     * @param token
     */
    connect(token, cb, err) {
        try {
            _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privIsDisposed);
            _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(token, "token");
            this.privReco.conversationTranslatorToken = token;
            this.resetConversationTimeout();
            this.privReco.connectAsync(cb, err);
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
        }
    }
    /**
     * Disconnect from the recognizer
     */
    disconnect(cb, err) {
        try {
            _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privIsDisposed);
            if (this.privTimeoutToken !== undefined) {
                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
                this.privClearTimeout(this.privTimeoutToken);
            }
            this.privReco.disconnect().then(() => {
                if (!!cb) {
                    cb();
                }
            }, (error) => {
                if (!!err) {
                    err(error);
                }
            });
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true).catch((reason) => {
                _common_Exports__WEBPACK_IMPORTED_MODULE_5__.Events.instance.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_6__.BackgroundEvent(reason));
            });
        }
    }
    /**
     * Send the mute all participants command to the websocket
     * @param conversationId
     * @param participantId
     * @param isMuted
     */
    sendRequest(command, cb, err) {
        try {
            _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privIsDisposed);
            this.sendMessage(command, cb, err);
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the recognizer.
            this.dispose(true).catch((reason) => {
                _common_Exports__WEBPACK_IMPORTED_MODULE_5__.Events.instance.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_6__.BackgroundEvent(reason));
            });
        }
    }
    /**
     * Close and dispose the recognizer
     */
    close() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.privIsDisposed) {
                if (!!this.privConnection) {
                    this.privConnection.closeConnection();
                    this.privConnection.close();
                }
                this.privConnection = undefined;
                yield this.dispose(true);
            }
        });
    }
    /**
     * Dispose the recognizer
     * @param disposing
     */
    dispose(disposing) {
        const _super = Object.create(null, {
            dispose: { get: () => super.dispose }
        });
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privIsDisposed) {
                return;
            }
            if (disposing) {
                if (this.privTimeoutToken !== undefined) {
                    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
                    this.privClearTimeout(this.privTimeoutToken);
                }
                this.privIsDisposed = true;
                if (!!this.privConnection) {
                    this.privConnection.closeConnection();
                    this.privConnection.close();
                    this.privConnection = undefined;
                }
                yield _super.dispose.call(this, disposing);
            }
        });
    }
    /**
     * Create the config for the recognizer
     * @param speechConfig
     */
    createRecognizerConfig(speechConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_7__.RecognizerConfig(speechConfig, this.privProperties);
    }
    /**
     * Create the service recognizer.
     * The audio source is redundnant here but is required by the implementation.
     * @param authentication
     * @param connectionFactory
     * @param audioConfig
     * @param recognizerConfig
     */
    createServiceRecognizer(authentication, connectionFactory, audioConfig, recognizerConfig) {
        const audioSource = audioConfig;
        return new _ConversationServiceAdapter__WEBPACK_IMPORTED_MODULE_8__.ConversationServiceAdapter(authentication, connectionFactory, audioSource, recognizerConfig, this);
    }
    sendMessage(msg, cb, err) {
        const withAsync = this.privReco;
        const PromiseToEmptyCallback = (promise, cb, err) => {
            if (promise !== undefined) {
                promise.then(() => {
                    try {
                        if (!!cb) {
                            cb();
                        }
                    }
                    catch (e) {
                        if (!!err) {
                            err(`'Unhandled error on promise callback: ${e}'`);
                        }
                    }
                }, (reason) => {
                    try {
                        if (!!err) {
                            err(reason);
                        }
                        // eslint-disable-next-line no-empty
                    }
                    catch (error) { }
                });
            }
            else {
                if (!!err) {
                    err("Null promise");
                }
            }
        };
        PromiseToEmptyCallback(withAsync.sendMessageAsync(msg), cb, err);
        this.resetConversationTimeout();
    }
    resetConversationTimeout() {
        if (this.privTimeoutToken !== undefined) {
            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
            this.privClearTimeout(this.privTimeoutToken);
        }
        this.privTimeoutToken = this.privSetTimeout(() => {
            this.sendRequest(this.privConversation.getKeepAlive());
        }, 60000);
    }
}

//# sourceMappingURL=ConversationTranslatorRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationWebsocketMessageFormatter.js":
/*!*****************************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationWebsocketMessageFormatter.js ***!
  \*****************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationWebsocketMessageFormatter": () => (/* binding */ ConversationWebsocketMessageFormatter)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RawWebsocketMessage.js");
/* harmony import */ var _ConversationConnectionMessage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConversationConnectionMessage */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionMessage.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * Based off WebsocketMessageFormatter. The messages for Conversation Translator have some variations from the Speech messages.
 */
class ConversationWebsocketMessageFormatter {
    /**
     * Format incoming messages: text (speech partial/final, IM) or binary (tts)
     */
    toConnectionMessage(message) {
        const deferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__.Deferred();
        try {
            if (message.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_1__.MessageType.Text) {
                const incomingMessage = new _ConversationConnectionMessage__WEBPACK_IMPORTED_MODULE_2__.ConversationConnectionMessage(message.messageType, message.textContent, {}, message.id);
                deferral.resolve(incomingMessage);
            }
            else if (message.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_1__.MessageType.Binary) {
                deferral.resolve(new _ConversationConnectionMessage__WEBPACK_IMPORTED_MODULE_2__.ConversationConnectionMessage(message.messageType, message.binaryContent, undefined, message.id));
            }
        }
        catch (e) {
            deferral.reject(`Error formatting the message. Error: ${e}`);
        }
        return deferral.promise;
    }
    /**
     * Format outgoing messages: text (commands or IM)
     */
    fromConnectionMessage(message) {
        const deferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__.Deferred();
        try {
            if (message.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_1__.MessageType.Text) {
                const payload = `${message.textBody ? message.textBody : ""}`;
                deferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_3__.RawWebsocketMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_1__.MessageType.Text, payload, message.id));
            }
        }
        catch (e) {
            deferral.reject(`Error formatting the message. ${e}`);
        }
        return deferral.promise;
    }
}

//# sourceMappingURL=ConversationWebsocketMessageFormatter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/Exports.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/Exports.js ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationConnectionConfig": () => (/* reexport safe */ _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_1__.ConversationConnectionConfig),
/* harmony export */   "ConversationManager": () => (/* reexport safe */ _ConversationManager__WEBPACK_IMPORTED_MODULE_0__.ConversationManager),
/* harmony export */   "ConversationReceivedTranslationEventArgs": () => (/* reexport safe */ _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_4__.ConversationReceivedTranslationEventArgs),
/* harmony export */   "ConversationRecognizerFactory": () => (/* reexport safe */ _ConversationTranslatorRecognizer__WEBPACK_IMPORTED_MODULE_2__.ConversationRecognizerFactory),
/* harmony export */   "ConversationTranslatorCommandTypes": () => (/* reexport safe */ _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_5__.ConversationTranslatorCommandTypes),
/* harmony export */   "ConversationTranslatorMessageTypes": () => (/* reexport safe */ _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_5__.ConversationTranslatorMessageTypes),
/* harmony export */   "InternalParticipants": () => (/* reexport safe */ _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_5__.InternalParticipants),
/* harmony export */   "LockRoomEventArgs": () => (/* reexport safe */ _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_4__.LockRoomEventArgs),
/* harmony export */   "MuteAllEventArgs": () => (/* reexport safe */ _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_4__.MuteAllEventArgs),
/* harmony export */   "ParticipantAttributeEventArgs": () => (/* reexport safe */ _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_4__.ParticipantAttributeEventArgs),
/* harmony export */   "ParticipantEventArgs": () => (/* reexport safe */ _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_4__.ParticipantEventArgs),
/* harmony export */   "ParticipantsListEventArgs": () => (/* reexport safe */ _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_4__.ParticipantsListEventArgs),
/* harmony export */   "TranscriberRecognizer": () => (/* reexport safe */ _TranscriberRecognizer__WEBPACK_IMPORTED_MODULE_3__.TranscriberRecognizer)
/* harmony export */ });
/* harmony import */ var _ConversationManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConversationManager */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationManager.js");
/* harmony import */ var _ConversationConnectionConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConversationConnectionConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionConfig.js");
/* harmony import */ var _ConversationTranslatorRecognizer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ConversationTranslatorRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorRecognizer.js");
/* harmony import */ var _TranscriberRecognizer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./TranscriberRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/TranscriberRecognizer.js");
/* harmony import */ var _ConversationTranslatorEventArgs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ConversationTranslatorEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorEventArgs.js");
/* harmony import */ var _ConversationTranslatorInterfaces__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ConversationTranslatorInterfaces */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorInterfaces.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.







//# sourceMappingURL=Exports.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/CommandResponsePayload.js":
/*!******************************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/CommandResponsePayload.js ***!
  \******************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CommandResponsePayload": () => (/* binding */ CommandResponsePayload)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
const parseCommandResponse = (json) => JSON.parse(json);
class CommandResponsePayload {
    constructor(json) {
        this.privCommandResponse = parseCommandResponse(json);
    }
    get type() {
        return this.privCommandResponse.type;
    }
    get command() {
        return this.privCommandResponse.command;
    }
    get id() {
        return this.privCommandResponse.id;
    }
    get nickname() {
        return this.privCommandResponse.nickname;
    }
    get participantId() {
        return this.privCommandResponse.participantId;
    }
    get roomid() {
        return this.privCommandResponse.roomid;
    }
    get value() {
        return this.privCommandResponse.value;
    }
    get token() {
        return this.privCommandResponse.token;
    }
    static fromJSON(json) {
        return new CommandResponsePayload(json);
    }
}

//# sourceMappingURL=CommandResponsePayload.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/ParticipantResponsePayload.js":
/*!**********************************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/ParticipantResponsePayload.js ***!
  \**********************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ParticipantPayloadResponse": () => (/* binding */ ParticipantPayloadResponse),
/* harmony export */   "ParticipantsListPayloadResponse": () => (/* binding */ ParticipantsListPayloadResponse)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
const parseListResponse = (json) => JSON.parse(json);
const parseParticipantResponse = (json) => JSON.parse(json);
class ParticipantsListPayloadResponse {
    constructor(json) {
        this.privParticipantsPayloadResponse = parseListResponse(json);
    }
    get roomid() {
        return this.privParticipantsPayloadResponse.roomid;
    }
    get id() {
        return this.privParticipantsPayloadResponse.id;
    }
    get command() {
        return this.privParticipantsPayloadResponse.command;
    }
    get participants() {
        return this.privParticipantsPayloadResponse.participants;
    }
    get token() {
        return this.privParticipantsPayloadResponse.token;
    }
    get translateTo() {
        return this.privParticipantsPayloadResponse.translateTo;
    }
    get profanityFilter() {
        return this.privParticipantsPayloadResponse.profanityFilter;
    }
    get roomProfanityFilter() {
        return this.privParticipantsPayloadResponse.roomProfanityFilter;
    }
    get roomLocked() {
        return this.privParticipantsPayloadResponse.roomLocked;
    }
    get muteAll() {
        return this.privParticipantsPayloadResponse.muteAll;
    }
    get type() {
        return this.privParticipantsPayloadResponse.type;
    }
    static fromJSON(json) {
        return new ParticipantsListPayloadResponse(json);
    }
}
class ParticipantPayloadResponse {
    constructor(json) {
        this.privParticipantPayloadResponse = parseParticipantResponse(json);
    }
    get nickname() {
        return this.privParticipantPayloadResponse.nickname;
    }
    get locale() {
        return this.privParticipantPayloadResponse.locale;
    }
    get usetts() {
        return this.privParticipantPayloadResponse.usetts;
    }
    get ismuted() {
        return this.privParticipantPayloadResponse.ismuted;
    }
    get ishost() {
        return this.privParticipantPayloadResponse.ishost;
    }
    get participantId() {
        return this.privParticipantPayloadResponse.participantId;
    }
    get avatar() {
        return this.privParticipantPayloadResponse.avatar;
    }
    static fromJSON(json) {
        return new ParticipantPayloadResponse(json);
    }
}

//# sourceMappingURL=ParticipantResponsePayload.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/TranslationResponsePayload.js":
/*!**********************************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ServiceMessages/TranslationResponsePayload.js ***!
  \**********************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechResponsePayload": () => (/* binding */ SpeechResponsePayload),
/* harmony export */   "TextResponsePayload": () => (/* binding */ TextResponsePayload)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
const parseSpeechResponse = (json) => JSON.parse(json);
const parseTextResponse = (json) => JSON.parse(json);
class SpeechResponsePayload {
    constructor(json) {
        this.privSpeechResponse = parseSpeechResponse(json);
    }
    get recognition() {
        return this.privSpeechResponse.recognition;
    }
    get translations() {
        return this.privSpeechResponse.translations;
    }
    get id() {
        return this.privSpeechResponse.id;
    }
    get language() {
        return this.privSpeechResponse.language;
    }
    get nickname() {
        return this.privSpeechResponse.nickname;
    }
    get participantId() {
        return this.privSpeechResponse.participantId;
    }
    get roomid() {
        return this.privSpeechResponse.roomid;
    }
    get timestamp() {
        return this.privSpeechResponse.timestamp;
    }
    get type() {
        return this.privSpeechResponse.type;
    }
    get isFinal() {
        return this.privSpeechResponse.type === "final";
    }
    static fromJSON(json) {
        return new SpeechResponsePayload(json);
    }
}
class TextResponsePayload {
    constructor(json) {
        this.privTextResponse = parseTextResponse(json);
    }
    get originalText() {
        return this.privTextResponse.originalText;
    }
    get translations() {
        return this.privTextResponse.translations;
    }
    get id() {
        return this.privTextResponse.id;
    }
    get language() {
        return this.privTextResponse.language;
    }
    get nickname() {
        return this.privTextResponse.nickname;
    }
    get participantId() {
        return this.privTextResponse.participantId;
    }
    get roomid() {
        return this.privTextResponse.roomid;
    }
    get timestamp() {
        return this.privTextResponse.timestamp;
    }
    get type() {
        return this.privTextResponse.type;
    }
    static fromJSON(json) {
        return new TextResponsePayload(json);
    }
}

//# sourceMappingURL=TranslationResponsePayload.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/TranscriberRecognizer.js":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/TranscriberRecognizer.js ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TranscriberRecognizer": () => (/* binding */ TranscriberRecognizer)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../sdk/Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Recognizer.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranscriberConnectionFactory.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranscriptionServiceRecognizer.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




class TranscriberRecognizer extends _sdk_Exports__WEBPACK_IMPORTED_MODULE_0__.Recognizer {
    /**
     * TranscriberRecognizer constructor.
     * @constructor
     * @param {SpeechTranslationConfig} speechTranslationConfig - Non-audio configuration associated with the recognizer
     * @param {AudioConfig} audioConfig - An audio configuration associated with the recognizer
     */
    constructor(speechTranslationConfig, audioConfig) {
        const speechTranslationConfigImpl = speechTranslationConfig;
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNull(speechTranslationConfigImpl, "speechTranslationConfig");
        const audioConfigImpl = audioConfig;
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNull(audioConfigImpl, "audioConfigImpl");
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(speechTranslationConfigImpl.speechRecognitionLanguage, _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId[_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_RecoLanguage]);
        super(audioConfig, speechTranslationConfigImpl.properties, new _Exports__WEBPACK_IMPORTED_MODULE_3__.TranscriberConnectionFactory());
        this.privDisposedRecognizer = false;
    }
    get speechRecognitionLanguage() {
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedRecognizer);
        return this.properties.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_RecoLanguage);
    }
    get properties() {
        return this.privProperties;
    }
    get authorizationToken() {
        return this.properties.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceAuthorization_Token);
    }
    set authorizationToken(token) {
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(token, "token");
        this.properties.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceAuthorization_Token, token);
    }
    set conversation(c) {
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(c, "Conversation");
        this.privConversation = c;
    }
    getConversationInfo() {
        _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(this.privConversation, "Conversation");
        return this.privConversation.conversationInfo;
    }
    startContinuousRecognitionAsync(cb, err) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_4__.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(_Exports__WEBPACK_IMPORTED_MODULE_5__.RecognitionMode.Conversation), cb, err);
    }
    stopContinuousRecognitionAsync(cb, err) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_4__.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(), cb, err);
    }
    close() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.privDisposedRecognizer) {
                yield this.dispose(true);
            }
        });
    }
    // Push async join/leave conversation message via serviceRecognizer
    pushConversationEvent(conversationInfo, command) {
        return __awaiter(this, void 0, void 0, function* () {
            const reco = (this.privReco);
            _sdk_Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(reco, "serviceRecognizer");
            yield reco.sendSpeechEventAsync(conversationInfo, command);
        });
    }
    enforceAudioGating() {
        return __awaiter(this, void 0, void 0, function* () {
            const audioConfigImpl = this.audioConfig;
            const format = yield audioConfigImpl.format;
            const channels = format.channels;
            if (channels === 1) {
                if (this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2", "false").toLowerCase() !== "true") {
                    throw new Error("Single channel audio configuration for ConversationTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details");
                }
            }
            else if (channels !== 8) {
                throw new Error(`Unsupported audio configuration: Detected ${channels}-channel audio`);
            }
            return;
        });
    }
    connectCallbacks(transcriber) {
        this.canceled = (s, e) => {
            if (!!transcriber.canceled) {
                transcriber.canceled(transcriber, e);
            }
        };
        this.recognizing = (s, e) => {
            if (!!transcriber.transcribing) {
                transcriber.transcribing(transcriber, e);
            }
        };
        this.recognized = (s, e) => {
            if (!!transcriber.transcribed) {
                transcriber.transcribed(transcriber, e);
            }
        };
        this.sessionStarted = (s, e) => {
            if (!!transcriber.sessionStarted) {
                transcriber.sessionStarted(transcriber, e);
            }
        };
        this.sessionStopped = (s, e) => {
            if (!!transcriber.sessionStopped) {
                transcriber.sessionStopped(transcriber, e);
            }
        };
    }
    disconnectCallbacks() {
        this.canceled = undefined;
        this.recognizing = undefined;
        this.recognized = undefined;
        this.sessionStarted = undefined;
        this.sessionStopped = undefined;
    }
    /**
     * Disposes any resources held by the object.
     * @member ConversationTranscriber.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - true if disposing the object.
     */
    dispose(disposing) {
        const _super = Object.create(null, {
            dispose: { get: () => super.dispose }
        });
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privDisposedRecognizer) {
                return;
            }
            if (disposing) {
                this.privDisposedRecognizer = true;
                yield this.implRecognizerStop();
            }
            yield _super.dispose.call(this, disposing);
        });
    }
    createRecognizerConfig(speechConfig) {
        return new _Exports__WEBPACK_IMPORTED_MODULE_5__.RecognizerConfig(speechConfig, this.properties);
    }
    createServiceRecognizer(authentication, connectionFactory, audioConfig, recognizerConfig) {
        const configImpl = audioConfig;
        return new _Exports__WEBPACK_IMPORTED_MODULE_6__.TranscriptionServiceRecognizer(authentication, connectionFactory, configImpl, recognizerConfig, this);
    }
}

//# sourceMappingURL=TranscriberRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranscriptionServiceRecognizer.js":
/*!********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranscriptionServiceRecognizer.js ***!
  \********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TranscriptionServiceRecognizer": () => (/* binding */ TranscriptionServiceRecognizer)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConversationTranscriptionCanceledEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionResult.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConversationServiceRecognizer.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./SpeechConnectionMessage.Internal */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionMessage.Internal.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




// eslint-disable-next-line max-classes-per-file
class TranscriptionServiceRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_0__.ConversationServiceRecognizer {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, transcriber) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, transcriber);
        this.privTranscriberRecognizer = transcriber;
        this.sendPrePayloadJSONOverride = (connection) => this.sendTranscriptionStartJSON(connection);
        if (this.privRecognizerConfig.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps) === "true") {
            this.privSpeechContext.setWordLevelTimings();
        }
    }
    sendSpeechEventAsync(info, command) {
        return __awaiter(this, void 0, void 0, function* () {
            if (!!this.privRequestSession.isRecognizing) {
                const connection = yield this.fetchConnection();
                yield this.sendSpeechEvent(connection, this.createSpeechEventPayload(info, command));
            }
        });
    }
    processTypeSpecificMessages(connectionMessage) {
        return this.processSpeechMessages(connectionMessage);
    }
    handleRecognizedCallback(result, offset, sessionId) {
        try {
            const event = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechRecognitionEventArgs(result, offset, sessionId);
            this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer, event);
            if (!!this.privSuccessCallback) {
                try {
                    this.privSuccessCallback(result);
                }
                catch (e) {
                    if (!!this.privErrorCallback) {
                        this.privErrorCallback(e);
                    }
                }
                // Only invoke the call back once.
                // and if it's successful don't invoke the
                // error after that.
                this.privSuccessCallback = undefined;
                this.privErrorCallback = undefined;
            }
            /* eslint-disable no-empty */
        }
        catch (error) {
            // Not going to let errors in the event handler
            // trip things up.
        }
    }
    handleRecognizingCallback(result, duration, sessionId) {
        try {
            const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechRecognitionEventArgs(result, duration, sessionId);
            this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer, ev);
            /* eslint-disable no-empty */
        }
        catch (error) {
            // Not going to let errors in the event handler
            // trip things up.
        }
    }
    // Cancels recognition.
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error) {
        const properties = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyCollection();
        properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.CancellationErrorCodePropertyName, _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.CancellationErrorCode[errorCode]);
        if (!!this.privTranscriberRecognizer.canceled) {
            const cancelEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.ConversationTranscriptionCanceledEventArgs(cancellationReason, error, errorCode, undefined, sessionId);
            try {
                this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer, cancelEvent);
                /* eslint-disable no-empty */
            }
            catch (_a) { }
        }
        if (!!this.privSuccessCallback) {
            const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_7__.SpeechRecognitionResult(requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.ResultReason.Canceled, undefined, // Text
            undefined, // Duration
            undefined, // Offset
            undefined, // Language
            undefined, // Language Detection Confidence
            undefined, // Speaker Id
            error, undefined, // Json
            properties);
            try {
                this.privSuccessCallback(result);
                this.privSuccessCallback = undefined;
                /* eslint-disable no-empty */
            }
            catch (_b) { }
        }
    }
    // Encapsulated for derived service recognizers that need to send additional JSON
    sendTranscriptionStartJSON(connection) {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.sendSpeechContext(connection, true);
            const info = this.privTranscriberRecognizer.getConversationInfo();
            const payload = this.createSpeechEventPayload(info, "start");
            yield this.sendSpeechEvent(connection, payload);
            yield this.sendWaveHeader(connection);
            return;
        });
    }
    sendSpeechEvent(connection, payload) {
        const speechEventJson = JSON.stringify(payload);
        if (speechEventJson) {
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_9__.SpeechConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_10__.MessageType.Text, "speech.event", this.privRequestSession.requestId, "application/json", speechEventJson));
        }
        return;
    }
    createSpeechEventPayload(info, command) {
        const eventDict = { id: "meeting", name: command, meeting: info.conversationProperties };
        eventDict.meeting.id = info.id;
        eventDict.meeting.attendees = info.participants;
        eventDict.meeting.record = info.conversationProperties.audiorecording === "on" ? "true" : "false";
        return eventDict;
    }
}

//# sourceMappingURL=TranscriptionServiceRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationConnectionFactory.js":
/*!******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationConnectionFactory.js ***!
  \******************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TranslationConnectionFactory": () => (/* binding */ TranslationConnectionFactory)
/* harmony export */ });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/WebsocketConnection.js");
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ProxyInfo.js");
/* harmony import */ var _common_StringUtils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/StringUtils */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/StringUtils.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConnectionFactoryBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConnectionFactoryBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/WebsocketMessageFormatter.js");
/* harmony import */ var _HeaderNames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
/* harmony import */ var _QueryParameterNames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./QueryParameterNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/QueryParameterNames.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.







class TranslationConnectionFactory extends _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__.ConnectionFactoryBase {
    create(config, authInfo, connectionId) {
        const endpoint = this.getEndpointUrl(config);
        const queryParams = {};
        if (config.autoDetectSourceLanguages !== undefined) {
            queryParams[_QueryParameterNames__WEBPACK_IMPORTED_MODULE_1__.QueryParameterNames.EnableLanguageId] = "true";
        }
        this.setQueryParams(queryParams, config, endpoint);
        const headers = {};
        if (authInfo.token !== undefined && authInfo.token !== "") {
            headers[authInfo.headerName] = authInfo.token;
        }
        headers[_HeaderNames__WEBPACK_IMPORTED_MODULE_2__.HeaderNames.ConnectionId] = connectionId;
        config.parameters.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_Url, endpoint);
        const enableCompression = config.parameters.getProperty("SPEECH-EnableWebsocketCompression", "false") === "true";
        return new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_4__.WebsocketConnection(endpoint, queryParams, headers, new _Exports__WEBPACK_IMPORTED_MODULE_5__.WebsocketMessageFormatter(), _common_browser_Exports__WEBPACK_IMPORTED_MODULE_6__.ProxyInfo.fromRecognizerConfig(config), enableCompression, connectionId);
    }
    getEndpointUrl(config, returnRegionPlaceholder) {
        const region = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_Region);
        const hostSuffix = _ConnectionFactoryBase__WEBPACK_IMPORTED_MODULE_0__.ConnectionFactoryBase.getHostSuffix(region);
        let endpointUrl = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_Endpoint, undefined);
        if (!endpointUrl) {
            if (config.autoDetectSourceLanguages !== undefined) {
                const host = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_Host, "wss://{region}.stt.speech" + hostSuffix);
                endpointUrl = host + "/speech/universal/v2";
            }
            else {
                const host = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_Host, "wss://{region}.s2s.speech" + hostSuffix);
                endpointUrl = host + "/speech/translation/cognitiveservices/v1";
            }
        }
        if (returnRegionPlaceholder === true) {
            return endpointUrl;
        }
        return _common_StringUtils__WEBPACK_IMPORTED_MODULE_7__.StringUtils.formatString(endpointUrl, { region });
    }
    setQueryParams(queryParams, config, endpointUrl) {
        queryParams.from = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_RecoLanguage);
        queryParams.to = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_TranslationToLanguages);
        this.setCommonUrlParams(config, queryParams, endpointUrl);
        this.setUrlParameter(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult, _QueryParameterNames__WEBPACK_IMPORTED_MODULE_1__.QueryParameterNames.StableTranslation, config, queryParams, endpointUrl);
        const translationVoice = config.parameters.getProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_TranslationVoice, undefined);
        if (translationVoice !== undefined) {
            queryParams.voice = translationVoice;
            queryParams.features = "texttospeech";
        }
    }
}

//# sourceMappingURL=TranslationConnectionFactory.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationServiceRecognizer.js":
/*!******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationServiceRecognizer.js ***!
  \******************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TranslationServiceRecognizer": () => (/* binding */ TranslationServiceRecognizer)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationStatus.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionResult.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisResult.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionCanceledEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Translations.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ConversationServiceRecognizer.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/EnumTranslation.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationHypothesis.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationPhrase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TranslationSynthesisEnd.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



// eslint-disable-next-line max-classes-per-file
class TranslationServiceRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_0__.ConversationServiceRecognizer {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, translationRecognizer) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, translationRecognizer);
        this.privTranslationRecognizer = translationRecognizer;
        this.connectionEvents.attach((connectionEvent) => {
            if (connectionEvent.name === "ConnectionEstablishedEvent") {
                this.privTranslationRecognizer.onConnection();
            }
            else if (connectionEvent.name === "ConnectionClosedEvent") {
                void this.privTranslationRecognizer.onDisconnection();
            }
        });
    }
    processTypeSpecificMessages(connectionMessage) {
        return __awaiter(this, void 0, void 0, function* () {
            const resultProps = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyCollection();
            let processed = yield this.processSpeechMessages(connectionMessage);
            if (processed) {
                return true;
            }
            const handleTranslationPhrase = (translatedPhrase) => __awaiter(this, void 0, void 0, function* () {
                this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset + translatedPhrase.Offset + translatedPhrase.Duration);
                if (translatedPhrase.RecognitionStatus === _Exports__WEBPACK_IMPORTED_MODULE_2__.RecognitionStatus.Success) {
                    // OK, the recognition was successful. How'd the translation do?
                    const result = this.fireEventForResult(translatedPhrase, resultProps);
                    if (!!this.privTranslationRecognizer.recognized) {
                        try {
                            this.privTranslationRecognizer.recognized(this.privTranslationRecognizer, result);
                            /* eslint-disable no-empty */
                        }
                        catch (error) {
                            // Not going to let errors in the event handler
                            // trip things up.
                        }
                    }
                    // report result to promise.
                    if (!!this.privSuccessCallback) {
                        try {
                            this.privSuccessCallback(result.result);
                        }
                        catch (e) {
                            if (!!this.privErrorCallback) {
                                this.privErrorCallback(e);
                            }
                        }
                        // Only invoke the call back once.
                        // and if it's successful don't invoke the
                        // error after that.
                        this.privSuccessCallback = undefined;
                        this.privErrorCallback = undefined;
                    }
                }
                else {
                    const reason = _Exports__WEBPACK_IMPORTED_MODULE_3__.EnumTranslation.implTranslateRecognitionResult(translatedPhrase.RecognitionStatus);
                    const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__.TranslationRecognitionResult(undefined, this.privRequestSession.requestId, reason, translatedPhrase.Text, translatedPhrase.Duration, this.privRequestSession.currentTurnAudioOffset + translatedPhrase.Offset, translatedPhrase.Language, translatedPhrase.Confidence, undefined, connectionMessage.textBody, resultProps);
                    if (reason === _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.Canceled) {
                        const cancelReason = _Exports__WEBPACK_IMPORTED_MODULE_3__.EnumTranslation.implTranslateCancelResult(translatedPhrase.RecognitionStatus);
                        const cancellationErrorCode = _Exports__WEBPACK_IMPORTED_MODULE_3__.EnumTranslation.implTranslateCancelErrorCode(translatedPhrase.RecognitionStatus);
                        yield this.cancelRecognitionLocal(cancelReason, cancellationErrorCode, _Exports__WEBPACK_IMPORTED_MODULE_3__.EnumTranslation.implTranslateErrorDetails(cancellationErrorCode));
                    }
                    else {
                        if (!(this.privRequestSession.isSpeechEnded && reason === _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.NoMatch && translatedPhrase.RecognitionStatus !== _Exports__WEBPACK_IMPORTED_MODULE_2__.RecognitionStatus.InitialSilenceTimeout)) {
                            const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.TranslationRecognitionEventArgs(result, result.offset, this.privRequestSession.sessionId);
                            if (!!this.privTranslationRecognizer.recognized) {
                                try {
                                    this.privTranslationRecognizer.recognized(this.privTranslationRecognizer, ev);
                                    /* eslint-disable no-empty */
                                }
                                catch (error) {
                                    // Not going to let errors in the event handler
                                    // trip things up.
                                }
                            }
                        }
                        // report result to promise.
                        if (!!this.privSuccessCallback) {
                            try {
                                this.privSuccessCallback(result);
                            }
                            catch (e) {
                                if (!!this.privErrorCallback) {
                                    this.privErrorCallback(e);
                                }
                            }
                            // Only invoke the call back once.
                            // and if it's successful don't invoke the
                            // error after that.
                            this.privSuccessCallback = undefined;
                            this.privErrorCallback = undefined;
                        }
                    }
                    processed = true;
                }
            });
            if (connectionMessage.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_7__.MessageType.Text) {
                resultProps.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.PropertyId.SpeechServiceResponse_JsonResult, connectionMessage.textBody);
            }
            switch (connectionMessage.path.toLowerCase()) {
                case "translation.hypothesis":
                    const result = this.fireEventForResult(_Exports__WEBPACK_IMPORTED_MODULE_9__.TranslationHypothesis.fromJSON(connectionMessage.textBody), resultProps);
                    this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset + result.offset);
                    if (!!this.privTranslationRecognizer.recognizing) {
                        try {
                            this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer, result);
                            /* eslint-disable no-empty */
                        }
                        catch (error) {
                            // Not going to let errors in the event handler
                            // trip things up.
                        }
                    }
                    processed = true;
                    break;
                case "translation.response":
                    const phrase = JSON.parse(connectionMessage.textBody);
                    if (!!phrase.SpeechPhrase) {
                        yield handleTranslationPhrase(_Exports__WEBPACK_IMPORTED_MODULE_10__.TranslationPhrase.fromTranslationResponse(phrase));
                    }
                    break;
                case "translation.phrase":
                    yield handleTranslationPhrase(_Exports__WEBPACK_IMPORTED_MODULE_10__.TranslationPhrase.fromJSON(connectionMessage.textBody));
                    break;
                case "translation.synthesis":
                    this.sendSynthesisAudio(connectionMessage.binaryBody, this.privRequestSession.sessionId);
                    processed = true;
                    break;
                case "audio.end":
                case "translation.synthesis.end":
                    const synthEnd = _Exports__WEBPACK_IMPORTED_MODULE_11__.TranslationSynthesisEnd.fromJSON(connectionMessage.textBody);
                    switch (synthEnd.SynthesisStatus) {
                        case _Exports__WEBPACK_IMPORTED_MODULE_2__.SynthesisStatus.Error:
                            if (!!this.privTranslationRecognizer.synthesizing) {
                                const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_12__.TranslationSynthesisResult(_sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.Canceled, undefined);
                                const retEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_13__.TranslationSynthesisEventArgs(result, this.privRequestSession.sessionId);
                                try {
                                    this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer, retEvent);
                                    /* eslint-disable no-empty */
                                }
                                catch (error) {
                                    // Not going to let errors in the event handler
                                    // trip things up.
                                }
                            }
                            if (!!this.privTranslationRecognizer.canceled) {
                                // And raise a canceled event to send the rich(er) error message back.
                                const canceledResult = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_14__.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_15__.CancellationReason.Error, synthEnd.FailureReason, _sdk_Exports__WEBPACK_IMPORTED_MODULE_16__.CancellationErrorCode.ServiceError, null);
                                try {
                                    this.privTranslationRecognizer.canceled(this.privTranslationRecognizer, canceledResult);
                                    /* eslint-disable no-empty */
                                }
                                catch (error) {
                                    // Not going to let errors in the event handler
                                    // trip things up.
                                }
                            }
                            break;
                        case _Exports__WEBPACK_IMPORTED_MODULE_2__.SynthesisStatus.Success:
                            this.sendSynthesisAudio(undefined, this.privRequestSession.sessionId);
                            break;
                        default:
                            break;
                    }
                    processed = true;
                    break;
                default:
                    break;
            }
            return processed;
        });
    }
    // Cancels recognition.
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error) {
        const properties = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyCollection();
        properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_17__.CancellationErrorCodePropertyName, _sdk_Exports__WEBPACK_IMPORTED_MODULE_16__.CancellationErrorCode[errorCode]);
        if (!!this.privTranslationRecognizer.canceled) {
            const cancelEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_14__.TranslationRecognitionCanceledEventArgs(sessionId, cancellationReason, error, errorCode, undefined);
            try {
                this.privTranslationRecognizer.canceled(this.privTranslationRecognizer, cancelEvent);
                /* eslint-disable no-empty */
            }
            catch (_a) { }
        }
        if (!!this.privSuccessCallback) {
            const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__.TranslationRecognitionResult(undefined, // Translations
            requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.Canceled, undefined, // Text
            undefined, // Druation
            undefined, // Offset
            undefined, // Language
            undefined, // LanguageDetectionConfidence
            error, undefined, // Json
            properties);
            try {
                this.privSuccessCallback(result);
                /* eslint-disable no-empty */
                this.privSuccessCallback = undefined;
            }
            catch (_b) { }
        }
    }
    handleRecognizingCallback(result, duration, sessionId) {
        try {
            const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.TranslationRecognitionEventArgs(_sdk_Exports__WEBPACK_IMPORTED_MODULE_4__.TranslationRecognitionResult.fromSpeechRecognitionResult(result), duration, sessionId);
            this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer, ev);
            /* eslint-disable no-empty */
        }
        catch (error) {
            // Not going to let errors in the event handler
            // trip things up.
        }
    }
    handleRecognizedCallback(result, offset, sessionId) {
        try {
            const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.TranslationRecognitionEventArgs(_sdk_Exports__WEBPACK_IMPORTED_MODULE_4__.TranslationRecognitionResult.fromSpeechRecognitionResult(result), offset, sessionId);
            this.privTranslationRecognizer.recognized(this.privTranslationRecognizer, ev);
        }
        catch (error) {
            // Not going to let errors in the event handler
            // trip things up.
        }
    }
    fireEventForResult(serviceResult, properties) {
        let translations;
        if (undefined !== serviceResult.Translation.Translations) {
            translations = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_18__.Translations();
            for (const translation of serviceResult.Translation.Translations) {
                translations.set(translation.Language, translation.Text || translation.DisplayText);
            }
        }
        let resultReason;
        let language;
        let confidence;
        if (serviceResult instanceof _Exports__WEBPACK_IMPORTED_MODULE_10__.TranslationPhrase) {
            if (!!serviceResult.Translation && serviceResult.Translation.TranslationStatus === _common_Exports__WEBPACK_IMPORTED_MODULE_19__.TranslationStatus.Success) {
                resultReason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.TranslatedSpeech;
            }
            else {
                resultReason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.RecognizedSpeech;
            }
            language = serviceResult.Language;
            confidence = serviceResult.Confidence;
        }
        else {
            resultReason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.TranslatingSpeech;
        }
        const offset = serviceResult.Offset + this.privRequestSession.currentTurnAudioOffset;
        const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__.TranslationRecognitionResult(translations, this.privRequestSession.requestId, resultReason, serviceResult.Text, serviceResult.Duration, offset, language, confidence, serviceResult.Translation.FailureReason, JSON.stringify(serviceResult), properties);
        const ev = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_6__.TranslationRecognitionEventArgs(result, offset, this.privRequestSession.sessionId);
        return ev;
    }
    sendSynthesisAudio(audio, sessionId) {
        const reason = (undefined === audio) ? _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.SynthesizingAudioCompleted : _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.ResultReason.SynthesizingAudio;
        const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_12__.TranslationSynthesisResult(reason, audio);
        const retEvent = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_13__.TranslationSynthesisEventArgs(result, sessionId);
        if (!!this.privTranslationRecognizer.synthesizing) {
            try {
                this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer, retEvent);
                /* eslint-disable no-empty */
            }
            catch (error) {
                // Not going to let errors in the event handler
                // trip things up.
            }
        }
    }
}

//# sourceMappingURL=TranslationServiceRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationStatus.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationStatus.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TranslationStatus": () => (/* binding */ TranslationStatus)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines translation status.
 * @class TranslationStatus
 */
var TranslationStatus;
(function (TranslationStatus) {
    /**
     * @member TranslationStatus.Success
     */
    TranslationStatus[TranslationStatus["Success"] = 0] = "Success";
    /**
     * @member TranslationStatus.Error
     */
    TranslationStatus[TranslationStatus["Error"] = 1] = "Error";
})(TranslationStatus || (TranslationStatus = {}));

//# sourceMappingURL=TranslationStatus.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/VoiceServiceRecognizer.js":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/VoiceServiceRecognizer.js ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VoiceServiceRecognizer": () => (/* binding */ VoiceServiceRecognizer)
/* harmony export */ });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ReplayableAudioNode.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/DeferralMap.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileEnrollmentResult.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileType.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfilePhraseResult.js");
/* harmony import */ var _sdk_Exports__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../sdk/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileResult.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceRecognizerBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./SpeechConnectionMessage.Internal */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionMessage.Internal.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





// eslint-disable-next-line max-classes-per-file
class VoiceServiceRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_0__.ServiceRecognizerBase {
    constructor(authentication, connectionFactory, audioSource, recognizerConfig, recognizer) {
        super(authentication, connectionFactory, audioSource, recognizerConfig, recognizer);
        this.privDeferralMap = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__.DeferralMap();
        this.privSpeakerAudioSource = audioSource;
        this.sendPrePayloadJSONOverride = () => this.noOp();
    }
    set SpeakerAudioSource(audioSource) {
        this.privSpeakerAudioSource = audioSource;
    }
    processTypeSpecificMessages(connectionMessage) {
        let processed = false;
        const resultProps = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyCollection();
        if (connectionMessage.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_3__.MessageType.Text) {
            resultProps.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.SpeechServiceResponse_JsonResult, connectionMessage.textBody);
        }
        switch (connectionMessage.path.toLowerCase()) {
            // Profile management response for create, fetch, delete, reset
            case "speaker.profiles":
                const response = JSON.parse(connectionMessage.textBody);
                switch (response.operation.toLowerCase()) {
                    case "create":
                        this.handleCreateResponse(response, connectionMessage.requestId);
                        break;
                    case "delete":
                    case "reset":
                        this.handleResultResponse(response, connectionMessage.requestId);
                        break;
                    case "fetch":
                        const enrollmentResponse = JSON.parse(connectionMessage.textBody);
                        this.handleFetchResponse(enrollmentResponse, connectionMessage.requestId);
                        break;
                    default:
                        break;
                }
                processed = true;
                break;
            // Activation and authorization phrase response
            case "speaker.phrases":
                const phraseResponse = JSON.parse(connectionMessage.textBody);
                this.handlePhrasesResponse(phraseResponse, connectionMessage.requestId);
                processed = true;
                break;
            // Enrollment response
            case "speaker.profile.enrollment":
                const enrollmentResponse = JSON.parse(connectionMessage.textBody);
                const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(!!enrollmentResponse.enrollment ? enrollmentResponse.enrollment.enrollmentStatus : enrollmentResponse.status.statusCode), !!enrollmentResponse.enrollment ? JSON.stringify(enrollmentResponse.enrollment) : undefined, enrollmentResponse.status.reason);
                if (!!this.privDeferralMap.getId(connectionMessage.requestId)) {
                    this.privDeferralMap.complete(connectionMessage.requestId, result);
                }
                this.privRequestSession.onSpeechEnded();
                processed = true;
                break;
            default:
                break;
        }
        const defferal = new _common_Exports__WEBPACK_IMPORTED_MODULE_6__.Deferred();
        defferal.resolve(processed);
        return defferal.promise;
    }
    // Cancels recognition.
    cancelRecognition(sessionId, requestId, cancellationReason, errorCode, error) {
        const properties = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyCollection();
        // const enrollmentResponse: EnrollmentResponse = JSON.parse(connectionMessage.textBody) as EnrollmentResponse;
        properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_7__.CancellationErrorCodePropertyName, _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.CancellationErrorCode[errorCode]);
        const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.VoiceProfileEnrollmentResult(_sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.ResultReason.Canceled, error, error);
        if (!!this.privDeferralMap.getId(requestId)) {
            this.privDeferralMap.complete(requestId, result);
        }
    }
    createProfile(profileType, locale) {
        return __awaiter(this, void 0, void 0, function* () {
            // Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
            this.voiceProfileType = profileType.toString();
            const conPromise = this.connectImpl();
            try {
                const createProfileDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_6__.Deferred();
                yield conPromise;
                yield this.sendCreateProfile(createProfileDeferral, profileType, locale);
                void this.receiveMessage();
                return createProfileDeferral.promise;
            }
            catch (err) {
                throw err;
            }
        });
    }
    resetProfile(profile) {
        return __awaiter(this, void 0, void 0, function* () {
            this.voiceProfileType = profile.profileType.toString();
            return this.sendCommonRequest("reset", profile.profileType, profile);
        });
    }
    deleteProfile(profile) {
        return __awaiter(this, void 0, void 0, function* () {
            this.voiceProfileType = profile.profileType.toString();
            return this.sendCommonRequest("delete", profile.profileType, profile);
        });
    }
    retrieveEnrollmentResult(profile) {
        return __awaiter(this, void 0, void 0, function* () {
            this.voiceProfileType = profile.profileType.toString();
            this.privExpectedProfileId = profile.profileId;
            return this.sendCommonRequest("fetch", profile.profileType, profile);
        });
    }
    getAllProfiles(profileType) {
        return __awaiter(this, void 0, void 0, function* () {
            this.voiceProfileType = profileType.toString();
            return this.sendCommonRequest("fetch", profileType);
        });
    }
    getActivationPhrases(profileType, lang) {
        return __awaiter(this, void 0, void 0, function* () {
            this.voiceProfileType = profileType.toString();
            // Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
            const conPromise = this.connectImpl();
            try {
                const getPhrasesDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_6__.Deferred();
                yield conPromise;
                yield this.sendPhrasesRequest(getPhrasesDeferral, profileType, lang);
                void this.receiveMessage();
                return getPhrasesDeferral.promise;
            }
            catch (err) {
                throw err;
            }
        });
    }
    enrollProfile(profile) {
        return __awaiter(this, void 0, void 0, function* () {
            this.voiceProfileType = profile.profileType.toString();
            const enrollmentDeferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_6__.Deferred();
            this.privRequestSession.startNewRecognition();
            this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events);
            this.privRecognizerConfig.parameters.setProperty(_sdk_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.Speech_SessionId, this.privRequestSession.sessionId);
            // Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
            const conPromise = this.connectImpl();
            const preAudioPromise = this.sendPreAudioMessages(profile, enrollmentDeferral);
            const node = yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId);
            const format = yield this.privSpeakerAudioSource.format;
            const deviceInfo = yield this.privSpeakerAudioSource.deviceInfo;
            const audioNode = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_10__.ReplayableAudioNode(node, format.avgBytesPerSec);
            yield this.privRequestSession.onAudioSourceAttachCompleted(audioNode, false);
            this.privRecognizerConfig.SpeechServiceConfig.Context.audio = { source: deviceInfo };
            try {
                yield conPromise;
                yield preAudioPromise;
            }
            catch (err) {
                this.cancelRecognition(this.privRequestSession.sessionId, this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_11__.CancellationReason.Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.CancellationErrorCode.ConnectionFailure, err);
            }
            const sessionStartEventArgs = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_12__.SessionEventArgs(this.privRequestSession.sessionId);
            if (!!this.privRecognizer.sessionStarted) {
                this.privRecognizer.sessionStarted(this.privRecognizer, sessionStartEventArgs);
            }
            void this.receiveMessage();
            const audioSendPromise = this.sendAudio(audioNode);
            // /* eslint-disable no-empty */
            audioSendPromise.then(() => { }, (error) => {
                this.cancelRecognition(this.privRequestSession.sessionId, this.privRequestSession.requestId, _sdk_Exports__WEBPACK_IMPORTED_MODULE_11__.CancellationReason.Error, _sdk_Exports__WEBPACK_IMPORTED_MODULE_8__.CancellationErrorCode.RuntimeError, error);
            });
            return enrollmentDeferral.promise;
        });
    }
    sendPreAudioMessages(profile, enrollmentDeferral) {
        return __awaiter(this, void 0, void 0, function* () {
            const connection = yield this.fetchConnection();
            this.privRequestSession.onSpeechContext();
            this.privDeferralMap.add(this.privRequestSession.requestId, enrollmentDeferral);
            yield this.sendBaseRequest(connection, "enroll", this.scenarioFrom(profile.profileType), profile);
        });
    }
    sendPhrasesRequest(getPhrasesDeferral, profileType, locale) {
        return __awaiter(this, void 0, void 0, function* () {
            const connection = yield this.fetchConnection();
            this.privRequestSession.onSpeechContext();
            this.privDeferralMap.add(this.privRequestSession.requestId, getPhrasesDeferral);
            const scenario = this.scenarioFrom(profileType);
            const profileCreateRequest = {
                locale,
                scenario,
            };
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_13__.SpeechConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_3__.MessageType.Text, "speaker.profile.phrases", this.privRequestSession.requestId, "application/json; charset=utf-8", JSON.stringify(profileCreateRequest)));
        });
    }
    sendCreateProfile(createProfileDeferral, profileType, locale) {
        return __awaiter(this, void 0, void 0, function* () {
            const connection = yield this.fetchConnection();
            this.privRequestSession.onSpeechContext();
            this.privDeferralMap.add(this.privRequestSession.requestId, createProfileDeferral);
            const scenario = profileType === _sdk_Exports__WEBPACK_IMPORTED_MODULE_14__.VoiceProfileType.TextIndependentIdentification ? "TextIndependentIdentification" :
                profileType === _sdk_Exports__WEBPACK_IMPORTED_MODULE_14__.VoiceProfileType.TextIndependentVerification ? "TextIndependentVerification" : "TextDependentVerification";
            const profileCreateRequest = {
                locale,
                number: "1",
                scenario,
            };
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_13__.SpeechConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_3__.MessageType.Text, "speaker.profile.create", this.privRequestSession.requestId, "application/json; charset=utf-8", JSON.stringify(profileCreateRequest)));
        });
    }
    sendCommonRequest(operation, profileType, profile = undefined) {
        return __awaiter(this, void 0, void 0, function* () {
            // Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
            const conPromise = this.connectImpl();
            try {
                const deferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_6__.Deferred();
                this.privRequestSession.onSpeechContext();
                yield conPromise;
                const connection = yield this.fetchConnection();
                this.privDeferralMap.add(this.privRequestSession.requestId, deferral);
                yield this.sendBaseRequest(connection, operation, this.scenarioFrom(profileType), profile);
                void this.receiveMessage();
                return deferral.promise;
            }
            catch (err) {
                throw err;
            }
        });
    }
    sendBaseRequest(connection, operation, scenario, profile) {
        return __awaiter(this, void 0, void 0, function* () {
            const profileRequest = {
                scenario
            };
            if (!!profile) {
                profileRequest.profileIds = [profile.profileId];
            }
            else {
                profileRequest.maxPageSize = -1;
            }
            return connection.send(new _SpeechConnectionMessage_Internal__WEBPACK_IMPORTED_MODULE_13__.SpeechConnectionMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_3__.MessageType.Text, `speaker.profile.${operation}`, this.privRequestSession.requestId, "application/json; charset=utf-8", JSON.stringify(profileRequest)));
        });
    }
    extractSpeakerContext(model) {
        return {
            features: {
                interimResult: "enabled",
                progressiveDetection: "disabled",
            },
            profileIds: model.profileIds,
            scenario: model.scenario,
        };
    }
    handlePhrasesResponse(response, requestId) {
        if (!!this.privDeferralMap.getId(requestId)) {
            if (response.status.statusCode.toLowerCase() !== "success") {
                const reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.ResultReason.Canceled;
                const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_15__.VoiceProfilePhraseResult(reason, response.status.statusCode, response.passPhraseType, []);
                this.privDeferralMap.complete(requestId, result);
            }
            else if (!!response.phrases && response.phrases.length > 0) {
                const reason = _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.ResultReason.EnrollingVoiceProfile;
                const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_15__.VoiceProfilePhraseResult(reason, response.status.statusCode, response.passPhraseType, response.phrases);
                this.privDeferralMap.complete(requestId, result);
            }
            else {
                throw new Error("Voice Profile get activation phrases failed, no phrases received");
            }
        }
        else {
            throw new Error(`Voice Profile get activation phrases request for requestID ${requestId} not found`);
        }
    }
    handleCreateResponse(response, requestId) {
        if (!!response.profiles && response.profiles.length > 0) {
            if (!!this.privDeferralMap.getId(requestId)) {
                const profileIds = response.profiles.map((profile) => profile.profileId);
                this.privDeferralMap.complete(requestId, profileIds);
            }
            else {
                throw new Error(`Voice Profile create request for requestID ${requestId} not found`);
            }
        }
        else {
            throw new Error("Voice Profile create failed, no profile id received");
        }
    }
    handleResultResponse(response, requestId) {
        if (!!this.privDeferralMap.getId(requestId)) {
            const successReason = response.operation.toLowerCase() === "delete" ? _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.ResultReason.DeletedVoiceProfile : _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.ResultReason.ResetVoiceProfile;
            const reason = response.status.statusCode.toLowerCase() === "success" ? successReason : _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.ResultReason.Canceled;
            const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_16__.VoiceProfileResult(reason, `statusCode: ${response.status.statusCode}, errorDetails: ${response.status.reason}`);
            this.privDeferralMap.complete(requestId, result);
        }
        else {
            throw new Error(`Voice Profile create request for requestID ${requestId} not found`);
        }
    }
    handleFetchResponse(enrollmentResponse, requestId) {
        if (!!this.privDeferralMap.getId(requestId) && !!enrollmentResponse.profiles[0]) {
            if (!!this.privExpectedProfileId && enrollmentResponse.profiles.length === 1 && enrollmentResponse.profiles[0].profileId === this.privExpectedProfileId) {
                this.privExpectedProfileId = undefined;
                const profileInfo = enrollmentResponse.profiles[0];
                const result = new _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(profileInfo.enrollmentStatus), JSON.stringify(profileInfo), enrollmentResponse.status.reason);
                this.privDeferralMap.complete(requestId, result);
            }
            else if (enrollmentResponse.profiles.length > 0) {
                const iProfiles = enrollmentResponse.profiles;
                const profileResults = [];
                for (const profile of iProfiles) {
                    profileResults.push(new _sdk_Exports__WEBPACK_IMPORTED_MODULE_5__.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(profile.enrollmentStatus), JSON.stringify(profile), enrollmentResponse.status.reason));
                }
                this.privDeferralMap.complete(requestId, profileResults);
            }
        }
        else {
            throw new Error(`Voice Profile fetch request for requestID ${requestId} not found`);
        }
    }
    enrollmentReasonFrom(statusCode) {
        switch (statusCode.toLowerCase()) {
            case "enrolled":
                return _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.ResultReason.EnrolledVoiceProfile;
            case "invalidlocale":
            case "invalidphrase":
            case "invalidaudioformat":
            case "invalidscenario":
            case "invalidprofilecount":
            case "invalidoperation":
            case "audiotooshort":
            case "audiotoolong":
            case "toomanyenrollments":
            case "storageconflict":
            case "profilenotfound":
            case "incompatibleprofiles":
            case "incompleteenrollment":
                return _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.ResultReason.Canceled;
            default:
                return _sdk_Exports__WEBPACK_IMPORTED_MODULE_9__.ResultReason.EnrollingVoiceProfile;
        }
    }
    scenarioFrom(profileType) {
        return profileType === _sdk_Exports__WEBPACK_IMPORTED_MODULE_14__.VoiceProfileType.TextIndependentIdentification ? "TextIndependentIdentification" :
            profileType === _sdk_Exports__WEBPACK_IMPORTED_MODULE_14__.VoiceProfileType.TextIndependentVerification ? "TextIndependentVerification" : "TextDependentVerification";
    }
}

//# sourceMappingURL=VoiceServiceRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/WebsocketMessageFormatter.js":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/WebsocketMessageFormatter.js ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WebsocketMessageFormatter": () => (/* binding */ WebsocketMessageFormatter)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RawWebsocketMessage.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

const CRLF = "\r\n";
class WebsocketMessageFormatter {
    toConnectionMessage(message) {
        const deferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__.Deferred();
        try {
            if (message.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_1__.MessageType.Text) {
                const textMessage = message.textContent;
                let headers = {};
                let body = null;
                if (textMessage) {
                    const headerBodySplit = textMessage.split("\r\n\r\n");
                    if (headerBodySplit && headerBodySplit.length > 0) {
                        headers = this.parseHeaders(headerBodySplit[0]);
                        if (headerBodySplit.length > 1) {
                            body = headerBodySplit[1];
                        }
                    }
                }
                deferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__.ConnectionMessage(message.messageType, body, headers, message.id));
            }
            else if (message.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_1__.MessageType.Binary) {
                const binaryMessage = message.binaryContent;
                let headers = {};
                let body = null;
                if (!binaryMessage || binaryMessage.byteLength < 2) {
                    throw new Error("Invalid binary message format. Header length missing.");
                }
                const dataView = new DataView(binaryMessage);
                const headerLength = dataView.getInt16(0);
                if (binaryMessage.byteLength < headerLength + 2) {
                    throw new Error("Invalid binary message format. Header content missing.");
                }
                let headersString = "";
                for (let i = 0; i < headerLength; i++) {
                    headersString += String.fromCharCode((dataView).getInt8(i + 2));
                }
                headers = this.parseHeaders(headersString);
                if (binaryMessage.byteLength > headerLength + 2) {
                    body = binaryMessage.slice(2 + headerLength);
                }
                deferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_1__.ConnectionMessage(message.messageType, body, headers, message.id));
            }
        }
        catch (e) {
            deferral.reject(`Error formatting the message. Error: ${e}`);
        }
        return deferral.promise;
    }
    fromConnectionMessage(message) {
        const deferral = new _common_Exports__WEBPACK_IMPORTED_MODULE_0__.Deferred();
        try {
            if (message.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_1__.MessageType.Text) {
                const payload = `${this.makeHeaders(message)}${CRLF}${message.textBody ? message.textBody : ""}`;
                deferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.RawWebsocketMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_1__.MessageType.Text, payload, message.id));
            }
            else if (message.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_1__.MessageType.Binary) {
                const headersString = this.makeHeaders(message);
                const content = message.binaryBody;
                const headerBuffer = this.stringToArrayBuffer(headersString);
                const headerInt8Array = new Int8Array(headerBuffer);
                const headerLength = headerInt8Array.byteLength;
                const payloadInt8Array = new Int8Array(2 + headerLength + (content ? content.byteLength : 0));
                payloadInt8Array[0] = ((headerLength >> 8) & 0xff);
                payloadInt8Array[1] = headerLength & 0xff;
                payloadInt8Array.set(headerInt8Array, 2);
                if (content) {
                    const bodyInt8Array = new Int8Array(content);
                    payloadInt8Array.set(bodyInt8Array, 2 + headerLength);
                }
                const payload = payloadInt8Array.buffer;
                deferral.resolve(new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.RawWebsocketMessage(_common_Exports__WEBPACK_IMPORTED_MODULE_1__.MessageType.Binary, payload, message.id));
            }
        }
        catch (e) {
            deferral.reject(`Error formatting the message. ${e}`);
        }
        return deferral.promise;
    }
    makeHeaders(message) {
        let headersString = "";
        if (message.headers) {
            for (const header in message.headers) {
                if (header) {
                    headersString += `${header}: ${message.headers[header]}${CRLF}`;
                }
            }
        }
        return headersString;
    }
    parseHeaders(headersString) {
        const headers = {};
        if (headersString) {
            const headerMatches = headersString.match(/[^\r\n]+/g);
            if (headers) {
                for (const header of headerMatches) {
                    if (header) {
                        const separatorIndex = header.indexOf(":");
                        const headerName = separatorIndex > 0 ? header.substr(0, separatorIndex).trim().toLowerCase() : header;
                        const headerValue = separatorIndex > 0 && header.length > (separatorIndex + 1) ?
                            header.substr(separatorIndex + 1).trim() :
                            "";
                        headers[headerName] = headerValue;
                    }
                }
            }
        }
        return headers;
    }
    stringToArrayBuffer(str) {
        const buffer = new ArrayBuffer(str.length);
        const view = new DataView(buffer);
        for (let i = 0; i < str.length; i++) {
            view.setUint8(i, str.charCodeAt(i));
        }
        return buffer;
    }
}

//# sourceMappingURL=WebsocketMessageFormatter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/AudioSourceEvents.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/AudioSourceEvents.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AudioSourceErrorEvent": () => (/* binding */ AudioSourceErrorEvent),
/* harmony export */   "AudioSourceEvent": () => (/* binding */ AudioSourceEvent),
/* harmony export */   "AudioSourceInitializingEvent": () => (/* binding */ AudioSourceInitializingEvent),
/* harmony export */   "AudioSourceOffEvent": () => (/* binding */ AudioSourceOffEvent),
/* harmony export */   "AudioSourceReadyEvent": () => (/* binding */ AudioSourceReadyEvent),
/* harmony export */   "AudioStreamNodeAttachedEvent": () => (/* binding */ AudioStreamNodeAttachedEvent),
/* harmony export */   "AudioStreamNodeAttachingEvent": () => (/* binding */ AudioStreamNodeAttachingEvent),
/* harmony export */   "AudioStreamNodeDetachedEvent": () => (/* binding */ AudioStreamNodeDetachedEvent),
/* harmony export */   "AudioStreamNodeErrorEvent": () => (/* binding */ AudioStreamNodeErrorEvent),
/* harmony export */   "AudioStreamNodeEvent": () => (/* binding */ AudioStreamNodeEvent)
/* harmony export */ });
/* harmony import */ var _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PlatformEvent */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */

class AudioSourceEvent extends _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__.PlatformEvent {
    constructor(eventName, audioSourceId, eventType = _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__.EventType.Info) {
        super(eventName, eventType);
        this.privAudioSourceId = audioSourceId;
    }
    get audioSourceId() {
        return this.privAudioSourceId;
    }
}
class AudioSourceInitializingEvent extends AudioSourceEvent {
    constructor(audioSourceId) {
        super("AudioSourceInitializingEvent", audioSourceId);
    }
}
class AudioSourceReadyEvent extends AudioSourceEvent {
    constructor(audioSourceId) {
        super("AudioSourceReadyEvent", audioSourceId);
    }
}
class AudioSourceOffEvent extends AudioSourceEvent {
    constructor(audioSourceId) {
        super("AudioSourceOffEvent", audioSourceId);
    }
}
class AudioSourceErrorEvent extends AudioSourceEvent {
    constructor(audioSourceId, error) {
        super("AudioSourceErrorEvent", audioSourceId, _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__.EventType.Error);
        this.privError = error;
    }
    get error() {
        return this.privError;
    }
}
class AudioStreamNodeEvent extends AudioSourceEvent {
    constructor(eventName, audioSourceId, audioNodeId) {
        super(eventName, audioSourceId);
        this.privAudioNodeId = audioNodeId;
    }
    get audioNodeId() {
        return this.privAudioNodeId;
    }
}
class AudioStreamNodeAttachingEvent extends AudioStreamNodeEvent {
    constructor(audioSourceId, audioNodeId) {
        super("AudioStreamNodeAttachingEvent", audioSourceId, audioNodeId);
    }
}
class AudioStreamNodeAttachedEvent extends AudioStreamNodeEvent {
    constructor(audioSourceId, audioNodeId) {
        super("AudioStreamNodeAttachedEvent", audioSourceId, audioNodeId);
    }
}
class AudioStreamNodeDetachedEvent extends AudioStreamNodeEvent {
    constructor(audioSourceId, audioNodeId) {
        super("AudioStreamNodeDetachedEvent", audioSourceId, audioNodeId);
    }
}
class AudioStreamNodeErrorEvent extends AudioStreamNodeEvent {
    constructor(audioSourceId, audioNodeId, error) {
        super("AudioStreamNodeErrorEvent", audioSourceId, audioNodeId);
        this.privError = error;
    }
    get error() {
        return this.privError;
    }
}

//# sourceMappingURL=AudioSourceEvents.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/BackgroundError.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/BackgroundError.js ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BackgroundEvent": () => (/* binding */ BackgroundEvent)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class BackgroundEvent extends _Exports__WEBPACK_IMPORTED_MODULE_0__.PlatformEvent {
    constructor(error) {
        super("BackgroundEvent", _Exports__WEBPACK_IMPORTED_MODULE_0__.EventType.Error);
        this.privError = error;
    }
    get error() {
        return this.privError;
    }
}

//# sourceMappingURL=BackgroundError.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ChunkedArrayBufferStream.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ChunkedArrayBufferStream.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ChunkedArrayBufferStream": () => (/* binding */ ChunkedArrayBufferStream)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Stream.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class ChunkedArrayBufferStream extends _Exports__WEBPACK_IMPORTED_MODULE_0__.Stream {
    constructor(targetChunkSize, streamId) {
        super(streamId);
        this.privTargetChunkSize = targetChunkSize;
        this.privNextBufferReadyBytes = 0;
    }
    writeStreamChunk(chunk) {
        // No pending write, and the buffer is the right size so write it.
        if (chunk.isEnd ||
            (0 === this.privNextBufferReadyBytes && chunk.buffer.byteLength === this.privTargetChunkSize)) {
            super.writeStreamChunk(chunk);
            return;
        }
        let bytesCopiedFromBuffer = 0;
        while (bytesCopiedFromBuffer < chunk.buffer.byteLength) {
            // Fill the next buffer.
            if (undefined === this.privNextBufferToWrite) {
                this.privNextBufferToWrite = new ArrayBuffer(this.privTargetChunkSize);
                this.privNextBufferStartTime = chunk.timeReceived;
            }
            // Find out how many bytes we can copy into the read buffer.
            const bytesToCopy = Math.min(chunk.buffer.byteLength - bytesCopiedFromBuffer, this.privTargetChunkSize - this.privNextBufferReadyBytes);
            const targetView = new Uint8Array(this.privNextBufferToWrite);
            const sourceView = new Uint8Array(chunk.buffer.slice(bytesCopiedFromBuffer, bytesToCopy + bytesCopiedFromBuffer));
            targetView.set(sourceView, this.privNextBufferReadyBytes);
            this.privNextBufferReadyBytes += bytesToCopy;
            bytesCopiedFromBuffer += bytesToCopy;
            // Are we ready to write?
            if (this.privNextBufferReadyBytes === this.privTargetChunkSize) {
                super.writeStreamChunk({
                    buffer: this.privNextBufferToWrite,
                    isEnd: false,
                    timeReceived: this.privNextBufferStartTime,
                });
                this.privNextBufferReadyBytes = 0;
                this.privNextBufferToWrite = undefined;
            }
        }
    }
    close() {
        // Send whatever is pending, then close the base class.
        if (0 !== this.privNextBufferReadyBytes && !this.isClosed) {
            super.writeStreamChunk({
                buffer: this.privNextBufferToWrite.slice(0, this.privNextBufferReadyBytes),
                isEnd: false,
                timeReceived: this.privNextBufferStartTime,
            });
        }
        super.close();
    }
}

//# sourceMappingURL=ChunkedArrayBufferStream.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionEvents.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionEvents.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConnectionClosedEvent": () => (/* binding */ ConnectionClosedEvent),
/* harmony export */   "ConnectionErrorEvent": () => (/* binding */ ConnectionErrorEvent),
/* harmony export */   "ConnectionEstablishErrorEvent": () => (/* binding */ ConnectionEstablishErrorEvent),
/* harmony export */   "ConnectionEstablishedEvent": () => (/* binding */ ConnectionEstablishedEvent),
/* harmony export */   "ConnectionEvent": () => (/* binding */ ConnectionEvent),
/* harmony export */   "ConnectionMessageReceivedEvent": () => (/* binding */ ConnectionMessageReceivedEvent),
/* harmony export */   "ConnectionMessageSentEvent": () => (/* binding */ ConnectionMessageSentEvent),
/* harmony export */   "ConnectionStartEvent": () => (/* binding */ ConnectionStartEvent),
/* harmony export */   "ServiceEvent": () => (/* binding */ ServiceEvent)
/* harmony export */ });
/* harmony import */ var _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PlatformEvent */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class ServiceEvent extends _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__.PlatformEvent {
    constructor(eventName, jsonstring, eventType = _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__.EventType.Info) {
        super(eventName, eventType);
        this.privJsonResult = jsonstring;
    }
    get jsonString() {
        return this.privJsonResult;
    }
}
class ConnectionEvent extends _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__.PlatformEvent {
    constructor(eventName, connectionId, eventType = _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__.EventType.Info) {
        super(eventName, eventType);
        this.privConnectionId = connectionId;
    }
    get connectionId() {
        return this.privConnectionId;
    }
}
class ConnectionStartEvent extends ConnectionEvent {
    constructor(connectionId, uri, headers) {
        super("ConnectionStartEvent", connectionId);
        this.privUri = uri;
        this.privHeaders = headers;
    }
    get uri() {
        return this.privUri;
    }
    get headers() {
        return this.privHeaders;
    }
}
class ConnectionEstablishedEvent extends ConnectionEvent {
    constructor(connectionId) {
        super("ConnectionEstablishedEvent", connectionId);
    }
}
class ConnectionClosedEvent extends ConnectionEvent {
    constructor(connectionId, statusCode, reason) {
        super("ConnectionClosedEvent", connectionId, _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__.EventType.Debug);
        this.privReason = reason;
        this.privStatusCode = statusCode;
    }
    get reason() {
        return this.privReason;
    }
    get statusCode() {
        return this.privStatusCode;
    }
}
class ConnectionErrorEvent extends ConnectionEvent {
    constructor(connectionId, message, type) {
        super("ConnectionErrorEvent", connectionId, _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__.EventType.Debug);
        this.privMessage = message;
        this.privType = type;
    }
    get message() {
        return this.privMessage;
    }
    get type() {
        return this.privType;
    }
}
class ConnectionEstablishErrorEvent extends ConnectionEvent {
    constructor(connectionId, statuscode, reason) {
        super("ConnectionEstablishErrorEvent", connectionId, _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__.EventType.Error);
        this.privStatusCode = statuscode;
        this.privReason = reason;
    }
    get reason() {
        return this.privReason;
    }
    get statusCode() {
        return this.privStatusCode;
    }
}
class ConnectionMessageReceivedEvent extends ConnectionEvent {
    constructor(connectionId, networkReceivedTimeISO, message) {
        super("ConnectionMessageReceivedEvent", connectionId);
        this.privNetworkReceivedTime = networkReceivedTimeISO;
        this.privMessage = message;
    }
    get networkReceivedTime() {
        return this.privNetworkReceivedTime;
    }
    get message() {
        return this.privMessage;
    }
}
class ConnectionMessageSentEvent extends ConnectionEvent {
    constructor(connectionId, networkSentTimeISO, message) {
        super("ConnectionMessageSentEvent", connectionId);
        this.privNetworkSentTime = networkSentTimeISO;
        this.privMessage = message;
    }
    get networkSentTime() {
        return this.privNetworkSentTime;
    }
    get message() {
        return this.privMessage;
    }
}

//# sourceMappingURL=ConnectionEvents.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConnectionMessage": () => (/* binding */ ConnectionMessage),
/* harmony export */   "MessageType": () => (/* binding */ MessageType)
/* harmony export */ });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _Guid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* eslint-disable @typescript-eslint/no-unsafe-return */
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


var MessageType;
(function (MessageType) {
    MessageType[MessageType["Text"] = 0] = "Text";
    MessageType[MessageType["Binary"] = 1] = "Binary";
})(MessageType || (MessageType = {}));
class ConnectionMessage {
    constructor(messageType, body, headers, id) {
        this.privBody = null;
        if (messageType === MessageType.Text && body && !(typeof (body) === "string")) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__.InvalidOperationError("Payload must be a string");
        }
        if (messageType === MessageType.Binary && body && !(body instanceof ArrayBuffer)) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__.InvalidOperationError("Payload must be ArrayBuffer");
        }
        this.privMessageType = messageType;
        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
        this.privBody = body;
        this.privHeaders = headers ? headers : {};
        this.privId = id ? id : (0,_Guid__WEBPACK_IMPORTED_MODULE_1__.createNoDashGuid)();
        switch (this.messageType) {
            case MessageType.Binary:
                this.privSize = this.binaryBody !== null ? this.binaryBody.byteLength : 0;
                break;
            case MessageType.Text:
                this.privSize = this.textBody.length;
        }
    }
    get messageType() {
        return this.privMessageType;
    }
    get headers() {
        return this.privHeaders;
    }
    get body() {
        return this.privBody;
    }
    get textBody() {
        if (this.privMessageType === MessageType.Binary) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__.InvalidOperationError("Not supported for binary message");
        }
        return this.privBody;
    }
    get binaryBody() {
        if (this.privMessageType === MessageType.Text) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__.InvalidOperationError("Not supported for text message");
        }
        return this.privBody;
    }
    get id() {
        return this.privId;
    }
}

//# sourceMappingURL=ConnectionMessage.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionOpenResponse.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionOpenResponse.js ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConnectionOpenResponse": () => (/* binding */ ConnectionOpenResponse)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class ConnectionOpenResponse {
    constructor(statusCode, reason) {
        this.privStatusCode = statusCode;
        this.privReason = reason;
    }
    get statusCode() {
        return this.privStatusCode;
    }
    get reason() {
        return this.privReason;
    }
}

//# sourceMappingURL=ConnectionOpenResponse.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/DeferralMap.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/DeferralMap.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DeferralMap": () => (/* binding */ DeferralMap)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * The error that is thrown when an argument passed in is null.
 *
 * @export
 * @class DefferalMap
 */
class DeferralMap {
    constructor() {
        this.privMap = {};
    }
    add(id, deferral) {
        this.privMap[id] = deferral;
    }
    getId(id) {
        return this.privMap[id];
    }
    complete(id, result) {
        try {
            this.privMap[id].resolve(result);
        }
        catch (error) {
            this.privMap[id].reject(error);
        }
        finally {
            this.privMap[id] = undefined;
        }
    }
}

//# sourceMappingURL=DeferralMap.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/DialogEvents.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/DialogEvents.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DialogEvent": () => (/* binding */ DialogEvent),
/* harmony export */   "SendingAgentContextMessageEvent": () => (/* binding */ SendingAgentContextMessageEvent)
/* harmony export */ });
/* harmony import */ var _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PlatformEvent */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class DialogEvent extends _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__.PlatformEvent {
    constructor(eventName, eventType = _PlatformEvent__WEBPACK_IMPORTED_MODULE_0__.EventType.Info) {
        super(eventName, eventType);
    }
}
class SendingAgentContextMessageEvent extends DialogEvent {
    constructor(agentConfig) {
        super("SendingAgentContextMessageEvent");
        this.privAgentConfig = agentConfig;
    }
    get agentConfig() {
        return this.privAgentConfig;
    }
}

//# sourceMappingURL=DialogEvents.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ArgumentNullError": () => (/* binding */ ArgumentNullError),
/* harmony export */   "InvalidOperationError": () => (/* binding */ InvalidOperationError),
/* harmony export */   "ObjectDisposedError": () => (/* binding */ ObjectDisposedError)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */
/**
 * The error that is thrown when an argument passed in is null.
 *
 * @export
 * @class ArgumentNullError
 * @extends {Error}
 */
class ArgumentNullError extends Error {
    /**
     * Creates an instance of ArgumentNullError.
     *
     * @param {string} argumentName - Name of the argument that is null
     *
     * @memberOf ArgumentNullError
     */
    constructor(argumentName) {
        super(argumentName);
        this.name = "ArgumentNull";
        this.message = argumentName;
    }
}
/**
 * The error that is thrown when an invalid operation is performed in the code.
 *
 * @export
 * @class InvalidOperationError
 * @extends {Error}
 */
class InvalidOperationError extends Error {
    /**
     * Creates an instance of InvalidOperationError.
     *
     * @param {string} error - The error
     *
     * @memberOf InvalidOperationError
     */
    constructor(error) {
        super(error);
        this.name = "InvalidOperation";
        this.message = error;
    }
}
/**
 * The error that is thrown when an object is disposed.
 *
 * @export
 * @class ObjectDisposedError
 * @extends {Error}
 */
class ObjectDisposedError extends Error {
    /**
     * Creates an instance of ObjectDisposedError.
     *
     * @param {string} objectName - The object that is disposed
     * @param {string} error - The error
     *
     * @memberOf ObjectDisposedError
     */
    constructor(objectName, error) {
        super(error);
        this.name = objectName + "ObjectDisposed";
        this.message = error;
    }
}

//# sourceMappingURL=Error.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/EventSource.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/EventSource.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EventSource": () => (/* binding */ EventSource)
/* harmony export */ });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _Guid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class EventSource {
    constructor(metadata) {
        this.privEventListeners = {};
        this.privIsDisposed = false;
        this.privConsoleListener = undefined;
        this.privMetadata = metadata;
    }
    onEvent(event) {
        if (this.isDisposed()) {
            throw (new _Error__WEBPACK_IMPORTED_MODULE_0__.ObjectDisposedError("EventSource"));
        }
        if (this.metadata) {
            for (const paramName in this.metadata) {
                if (paramName) {
                    if (event.metadata) {
                        if (!event.metadata[paramName]) {
                            event.metadata[paramName] = this.metadata[paramName];
                        }
                    }
                }
            }
        }
        for (const eventId in this.privEventListeners) {
            if (eventId && this.privEventListeners[eventId]) {
                this.privEventListeners[eventId](event);
            }
        }
    }
    attach(onEventCallback) {
        const id = (0,_Guid__WEBPACK_IMPORTED_MODULE_1__.createNoDashGuid)();
        this.privEventListeners[id] = onEventCallback;
        return {
            detach: () => {
                delete this.privEventListeners[id];
                return Promise.resolve();
            },
        };
    }
    attachListener(listener) {
        return this.attach((e) => listener.onEvent(e));
    }
    attachConsoleListener(listener) {
        if (!!this.privConsoleListener) {
            void this.privConsoleListener.detach(); // Detach implementation for eventListeners is synchronous
        }
        this.privConsoleListener = this.attach((e) => listener.onEvent(e));
        return this.privConsoleListener;
    }
    isDisposed() {
        return this.privIsDisposed;
    }
    dispose() {
        this.privEventListeners = null;
        this.privIsDisposed = true;
    }
    get metadata() {
        return this.privMetadata;
    }
}

//# sourceMappingURL=EventSource.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Events": () => (/* binding */ Events)
/* harmony export */ });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _EventSource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EventSource */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/EventSource.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class Events {
    static setEventSource(eventSource) {
        if (!eventSource) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__.ArgumentNullError("eventSource");
        }
        Events.privInstance = eventSource;
    }
    static get instance() {
        return Events.privInstance;
    }
}
Events.privInstance = new _EventSource__WEBPACK_IMPORTED_MODULE_1__.EventSource();

//# sourceMappingURL=Events.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createGuid": () => (/* binding */ createGuid),
/* harmony export */   "createNoDashGuid": () => (/* binding */ createNoDashGuid)
/* harmony export */ });
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuid */ "./node_modules/uuid/dist/esm-browser/v4.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

const createGuid = () => (0,uuid__WEBPACK_IMPORTED_MODULE_0__["default"])();
const createNoDashGuid = () => createGuid().replace(new RegExp("-", "g"), "").toUpperCase();


//# sourceMappingURL=Guid.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IConnection.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/IConnection.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConnectionState": () => (/* binding */ ConnectionState)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var ConnectionState;
(function (ConnectionState) {
    ConnectionState[ConnectionState["None"] = 0] = "None";
    ConnectionState[ConnectionState["Connected"] = 1] = "Connected";
    ConnectionState[ConnectionState["Connecting"] = 2] = "Connecting";
    ConnectionState[ConnectionState["Disconnected"] = 3] = "Disconnected";
})(ConnectionState || (ConnectionState = {}));

//# sourceMappingURL=IConnection.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/List.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/List.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "List": () => (/* binding */ List)
/* harmony export */ });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class List {
    constructor(list) {
        this.privSubscriptionIdCounter = 0;
        this.privAddSubscriptions = {};
        this.privRemoveSubscriptions = {};
        this.privDisposedSubscriptions = {};
        this.privDisposeReason = null;
        this.privList = [];
        // copy the list rather than taking as is.
        if (list) {
            for (const item of list) {
                this.privList.push(item);
            }
        }
    }
    get(itemIndex) {
        this.throwIfDisposed();
        return this.privList[itemIndex];
    }
    first() {
        return this.get(0);
    }
    last() {
        return this.get(this.length() - 1);
    }
    add(item) {
        this.throwIfDisposed();
        this.insertAt(this.privList.length, item);
    }
    insertAt(index, item) {
        this.throwIfDisposed();
        if (index === 0) {
            this.privList.unshift(item);
        }
        else if (index === this.privList.length) {
            this.privList.push(item);
        }
        else {
            this.privList.splice(index, 0, item);
        }
        this.triggerSubscriptions(this.privAddSubscriptions);
    }
    removeFirst() {
        this.throwIfDisposed();
        return this.removeAt(0);
    }
    removeLast() {
        this.throwIfDisposed();
        return this.removeAt(this.length() - 1);
    }
    removeAt(index) {
        this.throwIfDisposed();
        return this.remove(index, 1)[0];
    }
    remove(index, count) {
        this.throwIfDisposed();
        const removedElements = this.privList.splice(index, count);
        this.triggerSubscriptions(this.privRemoveSubscriptions);
        return removedElements;
    }
    clear() {
        this.throwIfDisposed();
        this.remove(0, this.length());
    }
    length() {
        this.throwIfDisposed();
        return this.privList.length;
    }
    onAdded(addedCallback) {
        this.throwIfDisposed();
        const subscriptionId = this.privSubscriptionIdCounter++;
        this.privAddSubscriptions[subscriptionId] = addedCallback;
        return {
            detach: () => {
                delete this.privAddSubscriptions[subscriptionId];
                return Promise.resolve();
            },
        };
    }
    onRemoved(removedCallback) {
        this.throwIfDisposed();
        const subscriptionId = this.privSubscriptionIdCounter++;
        this.privRemoveSubscriptions[subscriptionId] = removedCallback;
        return {
            detach: () => {
                delete this.privRemoveSubscriptions[subscriptionId];
                return Promise.resolve();
            },
        };
    }
    onDisposed(disposedCallback) {
        this.throwIfDisposed();
        const subscriptionId = this.privSubscriptionIdCounter++;
        this.privDisposedSubscriptions[subscriptionId] = disposedCallback;
        return {
            detach: () => {
                delete this.privDisposedSubscriptions[subscriptionId];
                return Promise.resolve();
            },
        };
    }
    join(seperator) {
        this.throwIfDisposed();
        return this.privList.join(seperator);
    }
    toArray() {
        const cloneCopy = Array();
        this.privList.forEach((val) => {
            cloneCopy.push(val);
        });
        return cloneCopy;
    }
    any(callback) {
        this.throwIfDisposed();
        if (callback) {
            return this.where(callback).length() > 0;
        }
        else {
            return this.length() > 0;
        }
    }
    all(callback) {
        this.throwIfDisposed();
        return this.where(callback).length() === this.length();
    }
    forEach(callback) {
        this.throwIfDisposed();
        for (let i = 0; i < this.length(); i++) {
            callback(this.privList[i], i);
        }
    }
    select(callback) {
        this.throwIfDisposed();
        const selectList = [];
        for (let i = 0; i < this.privList.length; i++) {
            selectList.push(callback(this.privList[i], i));
        }
        return new List(selectList);
    }
    where(callback) {
        this.throwIfDisposed();
        const filteredList = new List();
        for (let i = 0; i < this.privList.length; i++) {
            if (callback(this.privList[i], i)) {
                filteredList.add(this.privList[i]);
            }
        }
        return filteredList;
    }
    orderBy(compareFn) {
        this.throwIfDisposed();
        const clonedArray = this.toArray();
        const orderedArray = clonedArray.sort(compareFn);
        return new List(orderedArray);
    }
    orderByDesc(compareFn) {
        this.throwIfDisposed();
        return this.orderBy((a, b) => compareFn(b, a));
    }
    clone() {
        this.throwIfDisposed();
        return new List(this.toArray());
    }
    concat(list) {
        this.throwIfDisposed();
        return new List(this.privList.concat(list.toArray()));
    }
    concatArray(array) {
        this.throwIfDisposed();
        return new List(this.privList.concat(array));
    }
    isDisposed() {
        return this.privList == null;
    }
    dispose(reason) {
        if (!this.isDisposed()) {
            this.privDisposeReason = reason;
            this.privList = null;
            this.privAddSubscriptions = null;
            this.privRemoveSubscriptions = null;
            this.triggerSubscriptions(this.privDisposedSubscriptions);
        }
    }
    throwIfDisposed() {
        if (this.isDisposed()) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__.ObjectDisposedError("List", this.privDisposeReason);
        }
    }
    triggerSubscriptions(subscriptions) {
        if (subscriptions) {
            for (const subscriptionId in subscriptions) {
                if (subscriptionId) {
                    subscriptions[subscriptionId]();
                }
            }
        }
    }
}

//# sourceMappingURL=List.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EventType": () => (/* binding */ EventType),
/* harmony export */   "PlatformEvent": () => (/* binding */ PlatformEvent)
/* harmony export */ });
/* harmony import */ var _Guid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

var EventType;
(function (EventType) {
    EventType[EventType["Debug"] = 0] = "Debug";
    EventType[EventType["Info"] = 1] = "Info";
    EventType[EventType["Warning"] = 2] = "Warning";
    EventType[EventType["Error"] = 3] = "Error";
    EventType[EventType["None"] = 4] = "None";
})(EventType || (EventType = {}));
class PlatformEvent {
    constructor(eventName, eventType) {
        this.privName = eventName;
        this.privEventId = (0,_Guid__WEBPACK_IMPORTED_MODULE_0__.createNoDashGuid)();
        this.privEventTime = new Date().toISOString();
        this.privEventType = eventType;
        this.privMetadata = {};
    }
    get name() {
        return this.privName;
    }
    get eventId() {
        return this.privEventId;
    }
    get eventTime() {
        return this.privEventTime;
    }
    get eventType() {
        return this.privEventType;
    }
    get metadata() {
        return this.privMetadata;
    }
}

//# sourceMappingURL=PlatformEvent.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Deferred": () => (/* binding */ Deferred),
/* harmony export */   "PromiseResult": () => (/* binding */ PromiseResult),
/* harmony export */   "PromiseResultEventSource": () => (/* binding */ PromiseResultEventSource),
/* harmony export */   "PromiseState": () => (/* binding */ PromiseState),
/* harmony export */   "Sink": () => (/* binding */ Sink),
/* harmony export */   "marshalPromiseToCallbacks": () => (/* binding */ marshalPromiseToCallbacks)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file, @typescript-eslint/typedef */
var PromiseState;
(function (PromiseState) {
    PromiseState[PromiseState["None"] = 0] = "None";
    PromiseState[PromiseState["Resolved"] = 1] = "Resolved";
    PromiseState[PromiseState["Rejected"] = 2] = "Rejected";
})(PromiseState || (PromiseState = {}));
class PromiseResult {
    constructor(promiseResultEventSource) {
        this.throwIfError = () => {
            if (this.isError) {
                throw this.error;
            }
        };
        promiseResultEventSource.on((result) => {
            if (!this.privIsCompleted) {
                this.privIsCompleted = true;
                this.privIsError = false;
                this.privResult = result;
            }
        }, (error) => {
            if (!this.privIsCompleted) {
                this.privIsCompleted = true;
                this.privIsError = true;
                this.privError = error;
            }
        });
    }
    get isCompleted() {
        return this.privIsCompleted;
    }
    get isError() {
        return this.privIsError;
    }
    get error() {
        return this.privError;
    }
    get result() {
        return this.privResult;
    }
}
class PromiseResultEventSource {
    constructor() {
        this.setResult = (result) => {
            this.privOnSetResult(result);
        };
        this.setError = (error) => {
            this.privOnSetError(error);
        };
        this.on = (onSetResult, onSetError) => {
            this.privOnSetResult = onSetResult;
            this.privOnSetError = onSetError;
        };
    }
}
class Deferred {
    constructor() {
        this.resolve = (result) => {
            this.privResolve(result);
            return this;
        };
        this.reject = (error) => {
            this.privReject(error);
            return this;
        };
        // eslint-disable-next-line @typescript-eslint/explicit-function-return-type
        this.privPromise = new Promise((resolve, reject) => {
            this.privResolve = resolve;
            this.privReject = reject;
        });
    }
    get promise() {
        return this.privPromise;
    }
}
class Sink {
    constructor() {
        this.privState = PromiseState.None;
        this.privPromiseResult = null;
        this.privPromiseResultEvents = null;
        this.privSuccessHandlers = [];
        this.privErrorHandlers = [];
        this.privPromiseResultEvents = new PromiseResultEventSource();
        this.privPromiseResult = new PromiseResult(this.privPromiseResultEvents);
    }
    get state() {
        return this.privState;
    }
    get result() {
        return this.privPromiseResult;
    }
    resolve(result) {
        if (this.privState !== PromiseState.None) {
            throw new Error("'Cannot resolve a completed promise'");
        }
        this.privState = PromiseState.Resolved;
        this.privPromiseResultEvents.setResult(result);
        for (let i = 0; i < this.privSuccessHandlers.length; i++) {
            this.executeSuccessCallback(result, this.privSuccessHandlers[i], this.privErrorHandlers[i]);
        }
        this.detachHandlers();
    }
    reject(error) {
        if (this.privState !== PromiseState.None) {
            throw new Error("'Cannot reject a completed promise'");
        }
        this.privState = PromiseState.Rejected;
        this.privPromiseResultEvents.setError(error);
        for (const errorHandler of this.privErrorHandlers) {
            this.executeErrorCallback(error, errorHandler);
        }
        this.detachHandlers();
    }
    on(successCallback, errorCallback) {
        if (successCallback == null) {
            // eslint-disable-next-line @typescript-eslint/no-empty-function
            successCallback = () => { };
        }
        if (this.privState === PromiseState.None) {
            this.privSuccessHandlers.push(successCallback);
            this.privErrorHandlers.push(errorCallback);
        }
        else {
            if (this.privState === PromiseState.Resolved) {
                this.executeSuccessCallback(this.privPromiseResult.result, successCallback, errorCallback);
            }
            else if (this.privState === PromiseState.Rejected) {
                this.executeErrorCallback(this.privPromiseResult.error, errorCallback);
            }
            this.detachHandlers();
        }
    }
    executeSuccessCallback(result, successCallback, errorCallback) {
        try {
            successCallback(result);
        }
        catch (e) {
            this.executeErrorCallback(`'Unhandled callback error: ${e}'`, errorCallback);
        }
    }
    executeErrorCallback(error, errorCallback) {
        if (errorCallback) {
            try {
                errorCallback(error);
            }
            catch (e) {
                throw new Error(`'Unhandled callback error: ${e}. InnerError: ${error}'`);
            }
        }
        else {
            throw new Error(`'Unhandled error: ${error}'`);
        }
    }
    detachHandlers() {
        this.privErrorHandlers = [];
        this.privSuccessHandlers = [];
    }
}
// eslint-disable-next-line prefer-arrow/prefer-arrow-functions
function marshalPromiseToCallbacks(promise, cb, err) {
    promise.then((val) => {
        try {
            if (!!cb) {
                cb(val);
            }
        }
        catch (error) {
            if (!!err) {
                try {
                    if (error instanceof Error) {
                        const typedError = error;
                        err(typedError.name + ": " + typedError.message);
                    }
                    else {
                        err(error);
                    }
                    // eslint-disable-next-line no-empty
                }
                catch (error) { }
            }
        }
    }, (error) => {
        if (!!err) {
            try {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
                // eslint-disable-next-line no-empty
            }
            catch (error) { }
        }
    });
}

//# sourceMappingURL=Promise.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Queue.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Queue.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Queue": () => (/* binding */ Queue)
/* harmony export */ });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _List__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./List */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/List.js");
/* harmony import */ var _Promise__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Promise */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



var SubscriberType;
(function (SubscriberType) {
    SubscriberType[SubscriberType["Dequeue"] = 0] = "Dequeue";
    SubscriberType[SubscriberType["Peek"] = 1] = "Peek";
})(SubscriberType || (SubscriberType = {}));
class Queue {
    constructor(list) {
        this.privPromiseStore = new _List__WEBPACK_IMPORTED_MODULE_0__.List();
        this.privIsDrainInProgress = false;
        this.privIsDisposing = false;
        this.privDisposeReason = null;
        this.privList = list ? list : new _List__WEBPACK_IMPORTED_MODULE_0__.List();
        this.privDetachables = [];
        this.privSubscribers = new _List__WEBPACK_IMPORTED_MODULE_0__.List();
        this.privDetachables.push(this.privList.onAdded(() => this.drain()));
    }
    enqueue(item) {
        this.throwIfDispose();
        this.enqueueFromPromise(new Promise((resolve) => resolve(item)));
    }
    enqueueFromPromise(promise) {
        this.throwIfDispose();
        promise.then((val) => {
            this.privList.add(val);
            // eslint-disable-next-line @typescript-eslint/no-empty-function
        }, () => { });
    }
    dequeue() {
        this.throwIfDispose();
        const deferredSubscriber = new _Promise__WEBPACK_IMPORTED_MODULE_1__.Deferred();
        if (this.privSubscribers) {
            this.privSubscribers.add({ deferral: deferredSubscriber, type: SubscriberType.Dequeue });
            this.drain();
        }
        return deferredSubscriber.promise;
    }
    peek() {
        this.throwIfDispose();
        const deferredSubscriber = new _Promise__WEBPACK_IMPORTED_MODULE_1__.Deferred();
        const subs = this.privSubscribers;
        if (subs) {
            this.privSubscribers.add({ deferral: deferredSubscriber, type: SubscriberType.Peek });
            this.drain();
        }
        return deferredSubscriber.promise;
    }
    length() {
        this.throwIfDispose();
        return this.privList.length();
    }
    isDisposed() {
        return this.privSubscribers == null;
    }
    drainAndDispose(pendingItemProcessor, reason) {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.isDisposed() && !this.privIsDisposing) {
                this.privDisposeReason = reason;
                this.privIsDisposing = true;
                const subs = this.privSubscribers;
                if (subs) {
                    while (subs.length() > 0) {
                        const subscriber = subs.removeFirst();
                        // TODO: this needs work (Resolve(null) instead?).
                        subscriber.deferral.resolve(undefined);
                        // subscriber.deferral.reject("Disposed");
                    }
                    // note: this block assumes cooperative multitasking, i.e.,
                    // between the if-statement and the assignment there are no
                    // thread switches.
                    // Reason is that between the initial const = this.; and this
                    // point there is the derral.resolve() operation that might have
                    // caused recursive calls to the Queue, especially, calling
                    // Dispose() on the queue alredy (which would reset the var
                    // here to null!).
                    // That should generally hold true for javascript...
                    if (this.privSubscribers === subs) {
                        this.privSubscribers = subs;
                    }
                }
                for (const detachable of this.privDetachables) {
                    yield detachable.detach();
                }
                if (this.privPromiseStore.length() > 0 && pendingItemProcessor) {
                    const promiseArray = [];
                    this.privPromiseStore.toArray().forEach((wrapper) => {
                        promiseArray.push(wrapper);
                    });
                    return Promise.all(promiseArray).finally(() => {
                        this.privSubscribers = null;
                        this.privList.forEach((item) => {
                            pendingItemProcessor(item);
                        });
                        this.privList = null;
                        return;
                    }).then();
                }
                else {
                    this.privSubscribers = null;
                    this.privList = null;
                }
            }
        });
    }
    dispose(reason) {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.drainAndDispose(null, reason);
        });
    }
    drain() {
        if (!this.privIsDrainInProgress && !this.privIsDisposing) {
            this.privIsDrainInProgress = true;
            const subs = this.privSubscribers;
            const lists = this.privList;
            if (subs && lists) {
                while (lists.length() > 0 && subs.length() > 0 && !this.privIsDisposing) {
                    const subscriber = subs.removeFirst();
                    if (subscriber.type === SubscriberType.Peek) {
                        subscriber.deferral.resolve(lists.first());
                    }
                    else {
                        const dequeuedItem = lists.removeFirst();
                        subscriber.deferral.resolve(dequeuedItem);
                    }
                }
                // note: this block assumes cooperative multitasking, i.e.,
                // between the if-statement and the assignment there are no
                // thread switches.
                // Reason is that between the initial const = this.; and this
                // point there is the derral.resolve() operation that might have
                // caused recursive calls to the Queue, especially, calling
                // Dispose() on the queue alredy (which would reset the var
                // here to null!).
                // That should generally hold true for javascript...
                if (this.privSubscribers === subs) {
                    this.privSubscribers = subs;
                }
                // note: this block assumes cooperative multitasking, i.e.,
                // between the if-statement and the assignment there are no
                // thread switches.
                // Reason is that between the initial const = this.; and this
                // point there is the derral.resolve() operation that might have
                // caused recursive calls to the Queue, especially, calling
                // Dispose() on the queue alredy (which would reset the var
                // here to null!).
                // That should generally hold true for javascript...
                if (this.privList === lists) {
                    this.privList = lists;
                }
            }
            this.privIsDrainInProgress = false;
        }
    }
    throwIfDispose() {
        if (this.isDisposed()) {
            if (this.privDisposeReason) {
                throw new _Error__WEBPACK_IMPORTED_MODULE_2__.InvalidOperationError(this.privDisposeReason);
            }
            throw new _Error__WEBPACK_IMPORTED_MODULE_2__.ObjectDisposedError("Queue");
        }
        else if (this.privIsDisposing) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_2__.InvalidOperationError("Queue disposing");
        }
    }
}

//# sourceMappingURL=Queue.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RawWebsocketMessage.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RawWebsocketMessage.js ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RawWebsocketMessage": () => (/* binding */ RawWebsocketMessage)
/* harmony export */ });
/* harmony import */ var _ConnectionMessage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConnectionMessage */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _Guid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* eslint-disable @typescript-eslint/no-unsafe-assignment */
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



class RawWebsocketMessage {
    constructor(messageType, payload, id) {
        this.privPayload = null;
        if (!payload) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__.ArgumentNullError("payload");
        }
        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
        if (messageType === _ConnectionMessage__WEBPACK_IMPORTED_MODULE_1__.MessageType.Binary && payload.__proto__.constructor.name !== "ArrayBuffer") {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__.InvalidOperationError("Payload must be ArrayBuffer");
        }
        if (messageType === _ConnectionMessage__WEBPACK_IMPORTED_MODULE_1__.MessageType.Text && !(typeof (payload) === "string")) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__.InvalidOperationError("Payload must be a string");
        }
        this.privMessageType = messageType;
        this.privPayload = payload;
        this.privId = id ? id : (0,_Guid__WEBPACK_IMPORTED_MODULE_2__.createNoDashGuid)();
    }
    get messageType() {
        return this.privMessageType;
    }
    get payload() {
        // eslint-disable-next-line @typescript-eslint/no-unsafe-return
        return this.privPayload;
    }
    get textContent() {
        if (this.privMessageType === _ConnectionMessage__WEBPACK_IMPORTED_MODULE_1__.MessageType.Binary) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__.InvalidOperationError("Not supported for binary message");
        }
        return this.privPayload;
    }
    get binaryContent() {
        if (this.privMessageType === _ConnectionMessage__WEBPACK_IMPORTED_MODULE_1__.MessageType.Text) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_0__.InvalidOperationError("Not supported for text message");
        }
        return this.privPayload;
    }
    get id() {
        return this.privId;
    }
}

//# sourceMappingURL=RawWebsocketMessage.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RiffPcmEncoder.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/RiffPcmEncoder.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RiffPcmEncoder": () => (/* binding */ RiffPcmEncoder)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class RiffPcmEncoder {
    constructor(actualSampleRate, desiredSampleRate) {
        this.privActualSampleRate = actualSampleRate;
        this.privDesiredSampleRate = desiredSampleRate;
    }
    encode(actualAudioFrame) {
        const audioFrame = this.downSampleAudioFrame(actualAudioFrame, this.privActualSampleRate, this.privDesiredSampleRate);
        if (!audioFrame) {
            return null;
        }
        const audioLength = audioFrame.length * 2;
        const buffer = new ArrayBuffer(audioLength);
        const view = new DataView(buffer);
        this.floatTo16BitPCM(view, 0, audioFrame);
        return buffer;
    }
    setString(view, offset, str) {
        for (let i = 0; i < str.length; i++) {
            view.setUint8(offset + i, str.charCodeAt(i));
        }
    }
    floatTo16BitPCM(view, offset, input) {
        for (let i = 0; i < input.length; i++, offset += 2) {
            const s = Math.max(-1, Math.min(1, input[i]));
            view.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7FFF, true);
        }
    }
    downSampleAudioFrame(srcFrame, srcRate, dstRate) {
        if (!srcFrame) {
            return null;
        }
        if (dstRate === srcRate || dstRate > srcRate) {
            return srcFrame;
        }
        const ratio = srcRate / dstRate;
        const dstLength = Math.round(srcFrame.length / ratio);
        const dstFrame = new Float32Array(dstLength);
        let srcOffset = 0;
        let dstOffset = 0;
        while (dstOffset < dstLength) {
            const nextSrcOffset = Math.round((dstOffset + 1) * ratio);
            let accum = 0;
            let count = 0;
            while (srcOffset < nextSrcOffset && srcOffset < srcFrame.length) {
                accum += srcFrame[srcOffset++];
                count++;
            }
            dstFrame[dstOffset++] = accum / count;
        }
        return dstFrame;
    }
}

//# sourceMappingURL=RiffPcmEncoder.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Stream.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Stream.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Stream": () => (/* binding */ Stream)
/* harmony export */ });
/* harmony import */ var _Error__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _Guid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _Queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Queue */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Queue.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



class Stream {
    constructor(streamId) {
        this.privIsWriteEnded = false;
        this.privIsReadEnded = false;
        this.privId = streamId ? streamId : (0,_Guid__WEBPACK_IMPORTED_MODULE_0__.createNoDashGuid)();
        this.privReaderQueue = new _Queue__WEBPACK_IMPORTED_MODULE_1__.Queue();
    }
    get isClosed() {
        return this.privIsWriteEnded;
    }
    get isReadEnded() {
        return this.privIsReadEnded;
    }
    get id() {
        return this.privId;
    }
    close() {
        if (!this.privIsWriteEnded) {
            this.writeStreamChunk({
                buffer: null,
                isEnd: true,
                timeReceived: Date.now(),
            });
            this.privIsWriteEnded = true;
        }
    }
    writeStreamChunk(streamChunk) {
        this.throwIfClosed();
        if (!this.privReaderQueue.isDisposed()) {
            try {
                this.privReaderQueue.enqueue(streamChunk);
            }
            catch (e) {
                // Do nothing
            }
        }
    }
    read() {
        if (this.privIsReadEnded) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_2__.InvalidOperationError("Stream read has already finished");
        }
        return this.privReaderQueue
            .dequeue()
            .then((streamChunk) => __awaiter(this, void 0, void 0, function* () {
            if (streamChunk === undefined || streamChunk.isEnd) {
                yield this.privReaderQueue.dispose("End of stream reached");
            }
            return streamChunk;
        }));
    }
    readEnded() {
        if (!this.privIsReadEnded) {
            this.privIsReadEnded = true;
            this.privReaderQueue = new _Queue__WEBPACK_IMPORTED_MODULE_1__.Queue();
        }
    }
    throwIfClosed() {
        if (this.privIsWriteEnded) {
            throw new _Error__WEBPACK_IMPORTED_MODULE_2__.InvalidOperationError("Stream closed");
        }
    }
}

//# sourceMappingURL=Stream.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/StringUtils.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/StringUtils.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "StringUtils": () => (/* binding */ StringUtils)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * String helper functions
 */
class StringUtils {
    /**
     * Formats a string by replacing the named {keys} in the string with the values contained in the replacement dictionary.
     * @param format The format string that contains the parts to replace surrounded by {}. For example: "wss://{region}.cts.speech.microsoft.com".
     * If your string needs to contain a { or } you can use the {{ and }} escape sequences respectively.
     * @param replacements The dictionary of replacements. If a replacement is not found, it is replaced with an empty string
     * @returns The formatted string. If you pass in a null or undefined format string, an empty string will be returned
     */
    static formatString(format, replacements) {
        if (!format) {
            return "";
        }
        if (!replacements) {
            return format;
        }
        let formatted = "";
        let key = "";
        const appendToFormatted = (str) => {
            formatted += str;
        };
        const appendToKey = (str) => {
            key += str;
        };
        let appendFunc = appendToFormatted;
        for (let i = 0; i < format.length; i++) {
            const c = format[i];
            const next = i + 1 < format.length ? format[i + 1] : "";
            switch (c) {
                case "{":
                    if (next === "{") {
                        appendFunc("{");
                        i++;
                    }
                    else {
                        appendFunc = appendToKey;
                    }
                    break;
                case "}":
                    if (next === "}") {
                        appendFunc("}");
                        i++;
                    }
                    else {
                        if (replacements.hasOwnProperty(key)) {
                            formatted += replacements[key];
                        }
                        appendFunc = appendToFormatted;
                        key = "";
                    }
                    break;
                default:
                    appendFunc(c);
                    break;
            }
        }
        return formatted;
    }
}

//# sourceMappingURL=StringUtils.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Timeout.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Timeout.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Timeout": () => (/* binding */ Timeout)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class Timeout {
    static load() {
        // Prefilling the Maps with a function indexed by zero is necessary to be compliant with the specification.
        const scheduledTimeoutFunctions = new Map([[0, () => { }]]); // eslint-disable-line @typescript-eslint/no-empty-function
        const unhandledRequests = new Map();
        // eslint-disable-next-line
        const workerScript = `!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`;
        const workerUrl = "data:text/javascript;base64," + btoa(workerScript);
        const worker = new Worker(workerUrl);
        worker.addEventListener("message", ({ data }) => {
            if (Timeout.isCallNotification(data)) {
                const { params: { timerId } } = data;
                const idOrFunc = scheduledTimeoutFunctions.get(timerId);
                if (typeof idOrFunc === "number") {
                    const unhandledTimerId = unhandledRequests.get(idOrFunc);
                    if (unhandledTimerId === undefined ||
                        unhandledTimerId !== timerId) {
                        throw new Error("The timer is in an undefined state.");
                    }
                }
                else if (typeof idOrFunc !== "undefined") {
                    idOrFunc();
                    // A timeout can be safely deleted because it is only called once.
                    scheduledTimeoutFunctions.delete(timerId);
                }
                else {
                    throw new Error("The timer is in an undefined state.");
                }
            }
            else if (Timeout.isClearResponse(data)) {
                const { id } = data;
                const unhandledTimerId = unhandledRequests.get(id);
                if (unhandledTimerId === undefined) {
                    throw new Error("The timer is in an undefined state.");
                }
                unhandledRequests.delete(id);
                scheduledTimeoutFunctions.delete(unhandledTimerId);
            }
            else {
                const { error: { message } } = data;
                throw new Error(message);
            }
        });
        const clearTimeout = (timerId) => {
            const id = Math.random();
            unhandledRequests.set(id, timerId);
            scheduledTimeoutFunctions.set(timerId, id);
            worker.postMessage({
                id,
                method: "clear",
                params: { timerId }
            });
        };
        const setTimeout = (func, delay) => {
            const timerId = Math.random();
            scheduledTimeoutFunctions.set(timerId, func);
            worker.postMessage({
                id: null,
                method: "set",
                params: {
                    delay,
                    now: performance.now(),
                    timerId
                }
            });
            return timerId;
        };
        return {
            clearTimeout,
            setTimeout
        };
    }
    static loadWorkerTimers() {
        return () => {
            if (Timeout.workerTimers !== null) {
                return Timeout.workerTimers;
            }
            Timeout.workerTimers = Timeout.load();
            return Timeout.workerTimers;
        };
    }
    static isCallNotification(message) {
        return message.method !== undefined && message.method === "call";
    }
    static isClearResponse(message) {
        return message.error === null && typeof message.id === "number";
    }
}
Timeout.workerTimers = null;
Timeout.clearTimeout = (timerId) => Timeout.timers().clearTimeout(timerId);
Timeout.setTimeout = (func, delay) => Timeout.timers().setTimeout(func, delay);
Timeout.timers = Timeout.loadWorkerTimers();

//# sourceMappingURL=Timeout.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ActivityReceivedEventArgs.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ActivityReceivedEventArgs.js ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ActivityReceivedEventArgs": () => (/* binding */ ActivityReceivedEventArgs)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines contents of received message/events.
 * @class ActivityReceivedEventArgs
 */
class ActivityReceivedEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {any} activity - The activity..
     */
    constructor(activity, audioStream) {
        this.privActivity = activity;
        this.privAudioStream = audioStream;
    }
    /**
     * Gets the received activity
     * @member ActivityReceivedEventArgs.prototype.activity
     * @function
     * @public
     * @returns {any} the received activity.
     */
    get activity() {
        return this.privActivity;
    }
    get audioStream() {
        return this.privAudioStream;
    }
}

//# sourceMappingURL=ActivityReceivedEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioConfig.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioConfig.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AudioConfig": () => (/* binding */ AudioConfig),
/* harmony export */   "AudioConfigImpl": () => (/* binding */ AudioConfigImpl),
/* harmony export */   "AudioOutputConfigImpl": () => (/* binding */ AudioOutputConfigImpl)
/* harmony export */ });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/PCMRecorder.js");
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/MicAudioSource.js");
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/FileAudioSource.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/PullAudioInputStreamCallback.js");
/* harmony import */ var _AudioInputStream__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AudioInputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioInputStream.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/SpeakerAudioDestination.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/PushAudioOutputStreamCallback.js");
/* harmony import */ var _AudioOutputStream__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./AudioOutputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js");
/* harmony import */ var _AudioFileWriter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./AudioFileWriter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioFileWriter.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.






/**
 * Represents audio input configuration used for specifying what type of input to use (microphone, file, stream).
 * @class AudioConfig
 * Updated in version 1.11.0
 */
class AudioConfig {
    /**
     * Creates an AudioConfig object representing the default microphone on the system.
     * @member AudioConfig.fromDefaultMicrophoneInput
     * @function
     * @public
     * @returns {AudioConfig} The audio input configuration being created.
     */
    static fromDefaultMicrophoneInput() {
        const pcmRecorder = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__.PcmRecorder(true);
        return new AudioConfigImpl(new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_1__.MicAudioSource(pcmRecorder));
    }
    /**
     * Creates an AudioConfig object representing a microphone with the specified device ID.
     * @member AudioConfig.fromMicrophoneInput
     * @function
     * @public
     * @param {string | undefined} deviceId - Specifies the device ID of the microphone to be used.
     * Default microphone is used the value is omitted.
     * @returns {AudioConfig} The audio input configuration being created.
     */
    static fromMicrophoneInput(deviceId) {
        const pcmRecorder = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__.PcmRecorder(true);
        return new AudioConfigImpl(new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_1__.MicAudioSource(pcmRecorder, deviceId));
    }
    /**
     * Creates an AudioConfig object representing the specified file.
     * @member AudioConfig.fromWavFileInput
     * @function
     * @public
     * @param {File} fileName - Specifies the audio input file. Currently, only WAV / PCM is supported.
     * @returns {AudioConfig} The audio input configuration being created.
     */
    static fromWavFileInput(file, name = "unnamedBuffer.wav") {
        return new AudioConfigImpl(new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_2__.FileAudioSource(file, name));
    }
    /**
     * Creates an AudioConfig object representing the specified stream.
     * @member AudioConfig.fromStreamInput
     * @function
     * @public
     * @param {AudioInputStream | PullAudioInputStreamCallback | MediaStream} audioStream - Specifies the custom audio input
     * stream. Currently, only WAV / PCM is supported.
     * @returns {AudioConfig} The audio input configuration being created.
     */
    static fromStreamInput(audioStream) {
        if (audioStream instanceof _Exports__WEBPACK_IMPORTED_MODULE_3__.PullAudioInputStreamCallback) {
            return new AudioConfigImpl(new _AudioInputStream__WEBPACK_IMPORTED_MODULE_4__.PullAudioInputStreamImpl(audioStream));
        }
        if (audioStream instanceof _AudioInputStream__WEBPACK_IMPORTED_MODULE_4__.AudioInputStream) {
            return new AudioConfigImpl(audioStream);
        }
        if (typeof MediaStream !== "undefined" && audioStream instanceof MediaStream) {
            const pcmRecorder = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__.PcmRecorder(false);
            return new AudioConfigImpl(new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_1__.MicAudioSource(pcmRecorder, null, null, audioStream));
        }
        throw new Error("Not Supported Type");
    }
    /**
     * Creates an AudioConfig object representing the default speaker.
     * @member AudioConfig.fromDefaultSpeakerOutput
     * @function
     * @public
     * @returns {AudioConfig} The audio output configuration being created.
     * Added in version 1.11.0
     */
    static fromDefaultSpeakerOutput() {
        return new AudioOutputConfigImpl(new _Exports__WEBPACK_IMPORTED_MODULE_5__.SpeakerAudioDestination());
    }
    /**
     * Creates an AudioConfig object representing the custom IPlayer object.
     * You can use the IPlayer object to control pause, resume, etc.
     * @member AudioConfig.fromSpeakerOutput
     * @function
     * @public
     * @param {IPlayer} player - the IPlayer object for playback.
     * @returns {AudioConfig} The audio output configuration being created.
     * Added in version 1.12.0
     */
    static fromSpeakerOutput(player) {
        if (player === undefined) {
            return AudioConfig.fromDefaultSpeakerOutput();
        }
        if (player instanceof _Exports__WEBPACK_IMPORTED_MODULE_5__.SpeakerAudioDestination) {
            return new AudioOutputConfigImpl(player);
        }
        throw new Error("Not Supported Type");
    }
    /**
     * Creates an AudioConfig object representing a specified output audio file
     * @member AudioConfig.fromAudioFileOutput
     * @function
     * @public
     * @param {PathLike} filename - the filename of the output audio file
     * @returns {AudioConfig} The audio output configuration being created.
     * Added in version 1.11.0
     */
    static fromAudioFileOutput(filename) {
        return new AudioOutputConfigImpl(new _AudioFileWriter__WEBPACK_IMPORTED_MODULE_6__.AudioFileWriter(filename));
    }
    /**
     * Creates an AudioConfig object representing a specified audio output stream
     * @member AudioConfig.fromStreamOutput
     * @function
     * @public
     * @param {AudioOutputStream | PushAudioOutputStreamCallback} audioStream - Specifies the custom audio output
     * stream.
     * @returns {AudioConfig} The audio output configuration being created.
     * Added in version 1.11.0
     */
    static fromStreamOutput(audioStream) {
        if (audioStream instanceof _Exports__WEBPACK_IMPORTED_MODULE_7__.PushAudioOutputStreamCallback) {
            return new AudioOutputConfigImpl(new _AudioOutputStream__WEBPACK_IMPORTED_MODULE_8__.PushAudioOutputStreamImpl(audioStream));
        }
        if (audioStream instanceof _AudioOutputStream__WEBPACK_IMPORTED_MODULE_8__.PushAudioOutputStream) {
            return new AudioOutputConfigImpl(audioStream);
        }
        if (audioStream instanceof _AudioOutputStream__WEBPACK_IMPORTED_MODULE_8__.PullAudioOutputStream) {
            return new AudioOutputConfigImpl(audioStream);
        }
        throw new Error("Not Supported Type");
    }
}
/**
 * Represents audio input stream used for custom audio input configurations.
 * @private
 * @class AudioConfigImpl
 */
class AudioConfigImpl extends AudioConfig {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {IAudioSource} source - An audio source.
     */
    constructor(source) {
        super();
        this.privSource = source;
    }
    /**
     * Format information for the audio
     */
    get format() {
        return this.privSource.format;
    }
    /**
     * @member AudioConfigImpl.prototype.close
     * @function
     * @public
     */
    close(cb, err) {
        this.privSource.turnOff().then(() => {
            if (!!cb) {
                cb();
            }
        }, (error) => {
            if (!!err) {
                err(error);
            }
        });
    }
    /**
     * @member AudioConfigImpl.prototype.id
     * @function
     * @public
     */
    id() {
        return this.privSource.id();
    }
    /**
     * @member AudioConfigImpl.prototype.turnOn
     * @function
     * @public
     * @returns {Promise<void>} A promise.
     */
    turnOn() {
        return this.privSource.turnOn();
    }
    /**
     * @member AudioConfigImpl.prototype.attach
     * @function
     * @public
     * @param {string} audioNodeId - The audio node id.
     * @returns {Promise<IAudioStreamNode>} A promise.
     */
    attach(audioNodeId) {
        return this.privSource.attach(audioNodeId);
    }
    /**
     * @member AudioConfigImpl.prototype.detach
     * @function
     * @public
     * @param {string} audioNodeId - The audio node id.
     */
    detach(audioNodeId) {
        return this.privSource.detach(audioNodeId);
    }
    /**
     * @member AudioConfigImpl.prototype.turnOff
     * @function
     * @public
     * @returns {Promise<void>} A promise.
     */
    turnOff() {
        return this.privSource.turnOff();
    }
    /**
     * @member AudioConfigImpl.prototype.events
     * @function
     * @public
     * @returns {EventSource<AudioSourceEvent>} An event source for audio events.
     */
    get events() {
        return this.privSource.events;
    }
    setProperty(name, value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_9__.Contracts.throwIfNull(value, "value");
        if (undefined !== this.privSource.setProperty) {
            this.privSource.setProperty(name, value);
        }
        else {
            throw new Error("This AudioConfig instance does not support setting properties.");
        }
    }
    getProperty(name, def) {
        if (undefined !== this.privSource.getProperty) {
            return this.privSource.getProperty(name, def);
        }
        else {
            throw new Error("This AudioConfig instance does not support getting properties.");
        }
        return def;
    }
    get deviceInfo() {
        return this.privSource.deviceInfo;
    }
}
class AudioOutputConfigImpl extends AudioConfig {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {IAudioDestination} destination - An audio destination.
     */
    constructor(destination) {
        super();
        this.privDestination = destination;
    }
    set format(format) {
        this.privDestination.format = format;
    }
    write(buffer) {
        this.privDestination.write(buffer);
    }
    close() {
        this.privDestination.close();
    }
    id() {
        return this.privDestination.id();
    }
    setProperty() {
        throw new Error("This AudioConfig instance does not support setting properties.");
    }
    getProperty() {
        throw new Error("This AudioConfig instance does not support getting properties.");
    }
}

//# sourceMappingURL=AudioConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioFileWriter.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioFileWriter.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AudioFileWriter": () => (/* binding */ AudioFileWriter)
/* harmony export */ });
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ "?9463");
/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


class AudioFileWriter {
    constructor(filename) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(fs__WEBPACK_IMPORTED_MODULE_0__.openSync, "\nFile System access not available, please use Push or PullAudioOutputStream");
        this.privFd = fs__WEBPACK_IMPORTED_MODULE_0__.openSync(filename, "w");
    }
    set format(format) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNotUndefined(this.privAudioFormat, "format is already set");
        this.privAudioFormat = format;
        let headerOffset = 0;
        if (this.privAudioFormat.hasHeader) {
            headerOffset = this.privAudioFormat.header.byteLength;
        }
        if (this.privFd !== undefined) {
            this.privWriteStream = fs__WEBPACK_IMPORTED_MODULE_0__.createWriteStream("", { fd: this.privFd, start: headerOffset, autoClose: false });
        }
    }
    write(buffer) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(this.privAudioFormat, "must set format before writing.");
        if (this.privWriteStream !== undefined) {
            this.privWriteStream.write(new Uint8Array(buffer.slice(0)));
        }
    }
    close() {
        if (this.privFd !== undefined) {
            this.privWriteStream.on("finish", () => {
                if (this.privAudioFormat.hasHeader) {
                    this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten);
                    fs__WEBPACK_IMPORTED_MODULE_0__.writeSync(this.privFd, new Int8Array(this.privAudioFormat.header), 0, this.privAudioFormat.header.byteLength, 0);
                }
                fs__WEBPACK_IMPORTED_MODULE_0__.closeSync(this.privFd);
                this.privFd = undefined;
            });
            this.privWriteStream.end();
        }
    }
    id() {
        return this.privId;
    }
}

//# sourceMappingURL=AudioFileWriter.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioInputStream.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioInputStream.js ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AudioInputStream": () => (/* binding */ AudioInputStream),
/* harmony export */   "PullAudioInputStream": () => (/* binding */ PullAudioInputStream),
/* harmony export */   "PullAudioInputStreamImpl": () => (/* binding */ PullAudioInputStreamImpl),
/* harmony export */   "PushAudioInputStream": () => (/* binding */ PushAudioInputStream),
/* harmony export */   "PushAudioInputStreamImpl": () => (/* binding */ PushAudioInputStreamImpl)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/EventSource.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ChunkedArrayBufferStream.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/AudioSourceEvents.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js");
/* harmony import */ var _common_Guid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/Guid */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/* eslint-disable max-classes-per-file */





/**
 * Represents audio input stream used for custom audio input configurations.
 * @class AudioInputStream
 */
class AudioInputStream {
    /**
     * Creates and initializes an instance.
     * @constructor
     */
    constructor() {
        return;
    }
    /**
     * Creates a memory backed PushAudioInputStream with the specified audio format.
     * @member AudioInputStream.createPushStream
     * @function
     * @public
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     * written to the push audio stream's write() method (Required if format is not 16 kHz 16bit mono PCM).
     * @returns {PushAudioInputStream} The audio input stream being created.
     */
    static createPushStream(format) {
        return PushAudioInputStream.create(format);
    }
    /**
     * Creates a PullAudioInputStream that delegates to the specified callback interface for read()
     * and close() methods.
     * @member AudioInputStream.createPullStream
     * @function
     * @public
     * @param {PullAudioInputStreamCallback} callback - The custom audio input object, derived from
     * PullAudioInputStreamCallback
     * @param {AudioStreamFormat} format - The audio data format in which audio will be returned from
     * the callback's read() method (Required if format is not 16 kHz 16bit mono PCM).
     * @returns {PullAudioInputStream} The audio input stream being created.
     */
    static createPullStream(callback, format) {
        return PullAudioInputStream.create(callback, format);
        // throw new Error("Oops");
    }
}
/**
 * Represents memory backed push audio input stream used for custom audio input configurations.
 * @class PushAudioInputStream
 */
class PushAudioInputStream extends AudioInputStream {
    /**
     * Creates a memory backed PushAudioInputStream with the specified audio format.
     * @member PushAudioInputStream.create
     * @function
     * @public
     * @param {AudioStreamFormat} format - The audio data format in which audio will be written to the
     * push audio stream's write() method (Required if format is not 16 kHz 16bit mono PCM).
     * @returns {PushAudioInputStream} The push audio input stream being created.
     */
    static create(format) {
        return new PushAudioInputStreamImpl(format);
    }
}
/**
 * Represents memory backed push audio input stream used for custom audio input configurations.
 * @private
 * @class PushAudioInputStreamImpl
 */
class PushAudioInputStreamImpl extends PushAudioInputStream {
    /**
     * Creates and initalizes an instance with the given values.
     * @constructor
     * @param {AudioStreamFormat} format - The audio stream format.
     */
    constructor(format) {
        super();
        if (format === undefined) {
            this.privFormat = _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioStreamFormatImpl.getDefaultInputFormat();
        }
        else {
            this.privFormat = format;
        }
        this.privEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__.EventSource();
        this.privId = (0,_common_Guid__WEBPACK_IMPORTED_MODULE_2__.createNoDashGuid)();
        this.privStream = new _common_Exports__WEBPACK_IMPORTED_MODULE_3__.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec / 10);
    }
    /**
     * Format information for the audio
     */
    get format() {
        return Promise.resolve(this.privFormat);
    }
    /**
     * Writes the audio data specified by making an internal copy of the data.
     * @member PushAudioInputStreamImpl.prototype.write
     * @function
     * @public
     * @param {ArrayBuffer} dataBuffer - The audio buffer of which this function will make a copy.
     */
    write(dataBuffer) {
        this.privStream.writeStreamChunk({
            buffer: dataBuffer,
            isEnd: false,
            timeReceived: Date.now()
        });
    }
    /**
     * Closes the stream.
     * @member PushAudioInputStreamImpl.prototype.close
     * @function
     * @public
     */
    close() {
        this.privStream.close();
    }
    id() {
        return this.privId;
    }
    turnOn() {
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_4__.AudioSourceInitializingEvent(this.privId)); // no stream id
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_4__.AudioSourceReadyEvent(this.privId));
        return;
    }
    attach(audioNodeId) {
        return __awaiter(this, void 0, void 0, function* () {
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_4__.AudioStreamNodeAttachingEvent(this.privId, audioNodeId));
            yield this.turnOn();
            const stream = this.privStream;
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_4__.AudioStreamNodeAttachedEvent(this.privId, audioNodeId));
            return {
                detach: () => __awaiter(this, void 0, void 0, function* () {
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_4__.AudioStreamNodeDetachedEvent(this.privId, audioNodeId));
                    return this.turnOff();
                }),
                id: () => audioNodeId,
                read: () => stream.read(),
            };
        });
    }
    detach(audioNodeId) {
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_4__.AudioStreamNodeDetachedEvent(this.privId, audioNodeId));
    }
    turnOff() {
        return;
    }
    get events() {
        return this.privEvents;
    }
    get deviceInfo() {
        return Promise.resolve({
            bitspersample: this.privFormat.bitsPerSample,
            channelcount: this.privFormat.channels,
            connectivity: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.connectivity.Unknown,
            manufacturer: "Speech SDK",
            model: "PushStream",
            samplerate: this.privFormat.samplesPerSec,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.type.Stream,
        });
    }
    onEvent(event) {
        this.privEvents.onEvent(event);
        _common_Exports__WEBPACK_IMPORTED_MODULE_6__.Events.instance.onEvent(event);
    }
    toBuffer(arrayBuffer) {
        const buf = Buffer.alloc(arrayBuffer.byteLength);
        const view = new Uint8Array(arrayBuffer);
        for (let i = 0; i < buf.length; ++i) {
            buf[i] = view[i];
        }
        return buf;
    }
}
/*
 * Represents audio input stream used for custom audio input configurations.
 * @class PullAudioInputStream
 */
class PullAudioInputStream extends AudioInputStream {
    /**
     * Creates and initializes and instance.
     * @constructor
     */
    constructor() {
        super();
    }
    /**
     * Creates a PullAudioInputStream that delegates to the specified callback interface for
     * read() and close() methods, using the default format (16 kHz 16bit mono PCM).
     * @member PullAudioInputStream.create
     * @function
     * @public
     * @param {PullAudioInputStreamCallback} callback - The custom audio input object,
     * derived from PullAudioInputStreamCustomCallback
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     * returned from the callback's read() method (Required if format is not 16 kHz 16bit mono PCM).
     * @returns {PullAudioInputStream} The push audio input stream being created.
     */
    static create(callback, format) {
        return new PullAudioInputStreamImpl(callback, format);
    }
}
/**
 * Represents audio input stream used for custom audio input configurations.
 * @private
 * @class PullAudioInputStreamImpl
 */
class PullAudioInputStreamImpl extends PullAudioInputStream {
    /**
     * Creates a PullAudioInputStream that delegates to the specified callback interface for
     * read() and close() methods, using the default format (16 kHz 16bit mono PCM).
     * @constructor
     * @param {PullAudioInputStreamCallback} callback - The custom audio input object,
     * derived from PullAudioInputStreamCustomCallback
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     * returned from the callback's read() method (Required if format is not 16 kHz 16bit mono PCM).
     */
    constructor(callback, format) {
        super();
        if (undefined === format) {
            this.privFormat = _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioStreamFormat.getDefaultInputFormat();
        }
        else {
            this.privFormat = format;
        }
        this.privEvents = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__.EventSource();
        this.privId = (0,_common_Guid__WEBPACK_IMPORTED_MODULE_2__.createNoDashGuid)();
        this.privCallback = callback;
        this.privIsClosed = false;
        this.privBufferSize = this.privFormat.avgBytesPerSec / 10;
    }
    /**
     * Format information for the audio
     */
    get format() {
        return Promise.resolve(this.privFormat);
    }
    /**
     * Closes the stream.
     * @member PullAudioInputStreamImpl.prototype.close
     * @function
     * @public
     */
    close() {
        this.privIsClosed = true;
        this.privCallback.close();
    }
    id() {
        return this.privId;
    }
    turnOn() {
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_4__.AudioSourceInitializingEvent(this.privId)); // no stream id
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_4__.AudioSourceReadyEvent(this.privId));
        return;
    }
    attach(audioNodeId) {
        return __awaiter(this, void 0, void 0, function* () {
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_4__.AudioStreamNodeAttachingEvent(this.privId, audioNodeId));
            yield this.turnOn();
            this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_4__.AudioStreamNodeAttachedEvent(this.privId, audioNodeId));
            return {
                detach: () => {
                    this.privCallback.close();
                    this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_4__.AudioStreamNodeDetachedEvent(this.privId, audioNodeId));
                    return this.turnOff();
                },
                id: () => audioNodeId,
                read: () => {
                    let totalBytes = 0;
                    let transmitBuff;
                    // Until we have the minimum number of bytes to send in a transmission, keep asking for more.
                    while (totalBytes < this.privBufferSize) {
                        // Sizing the read buffer to the delta between the perfect size and what's left means we won't ever get too much
                        // data back.
                        const readBuff = new ArrayBuffer(this.privBufferSize - totalBytes);
                        const pulledBytes = this.privCallback.read(readBuff);
                        // If there is no return buffer yet defined, set the return buffer to the that was just populated.
                        // This was, if we have enough data there's no copy penalty, but if we don't we have a buffer that's the
                        // preferred size allocated.
                        if (undefined === transmitBuff) {
                            transmitBuff = readBuff;
                        }
                        else {
                            // Not the first bite at the apple, so fill the return buffer with the data we got back.
                            const intView = new Int8Array(transmitBuff);
                            intView.set(new Int8Array(readBuff), totalBytes);
                        }
                        // If there are no bytes to read, just break out and be done.
                        if (0 === pulledBytes) {
                            break;
                        }
                        totalBytes += pulledBytes;
                    }
                    return Promise.resolve({
                        buffer: transmitBuff.slice(0, totalBytes),
                        isEnd: this.privIsClosed || totalBytes === 0,
                        timeReceived: Date.now(),
                    });
                },
            };
        });
    }
    detach(audioNodeId) {
        this.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_4__.AudioStreamNodeDetachedEvent(this.privId, audioNodeId));
    }
    turnOff() {
        return;
    }
    get events() {
        return this.privEvents;
    }
    get deviceInfo() {
        return Promise.resolve({
            bitspersample: this.privFormat.bitsPerSample,
            channelcount: this.privFormat.channels,
            connectivity: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.connectivity.Unknown,
            manufacturer: "Speech SDK",
            model: "PullStream",
            samplerate: this.privFormat.samplesPerSec,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.type.Stream,
        });
    }
    onEvent(event) {
        this.privEvents.onEvent(event);
        _common_Exports__WEBPACK_IMPORTED_MODULE_6__.Events.instance.onEvent(event);
    }
}

//# sourceMappingURL=AudioInputStream.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputFormat.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputFormat.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AudioOutputFormatImpl": () => (/* binding */ AudioOutputFormatImpl)
/* harmony export */ });
/* harmony import */ var _SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../SpeechSynthesisOutputFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisOutputFormat.js");
/* harmony import */ var _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * @private
 * @class AudioOutputFormatImpl
 * Updated in version 1.17.0
 */
// eslint-disable-next-line max-classes-per-file
class AudioOutputFormatImpl extends _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioStreamFormatImpl {
    /**
     * Creates an instance with the given values.
     * @constructor
     * @param formatTag
     * @param {number} channels - Number of channels.
     * @param {number} samplesPerSec - Samples per second.
     * @param {number} avgBytesPerSec - Average bytes per second.
     * @param {number} blockAlign - Block alignment.
     * @param {number} bitsPerSample - Bits per sample.
     * @param {string} audioFormatString - Audio format string
     * @param {string} requestAudioFormatString - Audio format string sent to service.
     * @param {boolean} hasHeader - If the format has header or not.
     */
    constructor(formatTag, channels, samplesPerSec, avgBytesPerSec, blockAlign, bitsPerSample, audioFormatString, requestAudioFormatString, hasHeader) {
        super(samplesPerSec, bitsPerSample, channels, formatTag);
        this.formatTag = formatTag;
        this.avgBytesPerSec = avgBytesPerSec;
        this.blockAlign = blockAlign;
        this.priAudioFormatString = audioFormatString;
        this.priRequestAudioFormatString = requestAudioFormatString;
        this.priHasHeader = hasHeader;
    }
    static fromSpeechSynthesisOutputFormat(speechSynthesisOutputFormat) {
        if (speechSynthesisOutputFormat === undefined) {
            return AudioOutputFormatImpl.getDefaultOutputFormat();
        }
        return AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(AudioOutputFormatImpl.SpeechSynthesisOutputFormatToString[speechSynthesisOutputFormat]);
    }
    static fromSpeechSynthesisOutputFormatString(speechSynthesisOutputFormatString) {
        switch (speechSynthesisOutputFormatString) {
            case "raw-8khz-8bit-mono-mulaw":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.MuLaw, 1, 8000, 8000, 1, 8, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "riff-16khz-16kbps-mono-siren":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.Siren, 1, 16000, 2000, 40, 0, speechSynthesisOutputFormatString, "audio-16khz-16kbps-mono-siren", true);
            case "audio-16khz-16kbps-mono-siren":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.Siren, 1, 16000, 2000, 40, 0, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-16khz-32kbitrate-mono-mp3":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.MP3, 1, 16000, 32 << 7, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-16khz-128kbitrate-mono-mp3":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.MP3, 1, 16000, 128 << 7, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-16khz-64kbitrate-mono-mp3":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.MP3, 1, 16000, 64 << 7, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-24khz-48kbitrate-mono-mp3":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.MP3, 1, 24000, 48 << 7, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-24khz-96kbitrate-mono-mp3":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.MP3, 1, 24000, 96 << 7, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-24khz-160kbitrate-mono-mp3":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.MP3, 1, 24000, 160 << 7, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "raw-16khz-16bit-mono-truesilk":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.SILKSkype, 1, 16000, 32000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "riff-8khz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.PCM, 1, 8000, 16000, 2, 16, speechSynthesisOutputFormatString, "raw-8khz-16bit-mono-pcm", true);
            case "riff-24khz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.PCM, 1, 24000, 48000, 2, 16, speechSynthesisOutputFormatString, "raw-24khz-16bit-mono-pcm", true);
            case "riff-8khz-8bit-mono-mulaw":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.MuLaw, 1, 8000, 8000, 1, 8, speechSynthesisOutputFormatString, "raw-8khz-8bit-mono-mulaw", true);
            case "raw-16khz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.PCM, 1, 16000, 32000, 2, 16, speechSynthesisOutputFormatString, "raw-16khz-16bit-mono-pcm", false);
            case "raw-24khz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.PCM, 1, 24000, 48000, 2, 16, speechSynthesisOutputFormatString, "raw-24khz-16bit-mono-pcm", false);
            case "raw-8khz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.PCM, 1, 8000, 16000, 2, 16, speechSynthesisOutputFormatString, "raw-8khz-16bit-mono-pcm", false);
            case "ogg-16khz-16bit-mono-opus":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.OGG_OPUS, 1, 16000, 8192, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "ogg-24khz-16bit-mono-opus":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.OGG_OPUS, 1, 24000, 8192, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "raw-48khz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.PCM, 1, 48000, 96000, 2, 16, speechSynthesisOutputFormatString, "raw-48khz-16bit-mono-pcm", false);
            case "riff-48khz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.PCM, 1, 48000, 96000, 2, 16, speechSynthesisOutputFormatString, "raw-48khz-16bit-mono-pcm", true);
            case "audio-48khz-96kbitrate-mono-mp3":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.MP3, 1, 48000, 96 << 7, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-48khz-192kbitrate-mono-mp3":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.MP3, 1, 48000, 192 << 7, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "ogg-48khz-16bit-mono-opus":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.OGG_OPUS, 1, 48000, 12000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "webm-16khz-16bit-mono-opus":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.WEBM_OPUS, 1, 16000, 4000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "webm-24khz-16bit-mono-opus":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.WEBM_OPUS, 1, 24000, 6000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "webm-24khz-16bit-24kbps-mono-opus":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.WEBM_OPUS, 1, 24000, 3000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-16khz-16bit-32kbps-mono-opus":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.OPUS, 1, 16000, 4000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-24khz-16bit-48kbps-mono-opus":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.OPUS, 1, 24000, 6000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-24khz-16bit-24kbps-mono-opus":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.OPUS, 1, 24000, 3000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-24khz-16bit-mono-flac":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.FLAC, 1, 24000, 24000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "audio-48khz-16bit-mono-flac":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.FLAC, 1, 48000, 30000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "raw-24khz-16bit-mono-truesilk":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.SILKSkype, 1, 24000, 48000, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "raw-8khz-8bit-mono-alaw":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.ALaw, 1, 8000, 8000, 1, 8, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "riff-8khz-8bit-mono-alaw":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.ALaw, 1, 8000, 8000, 1, 8, speechSynthesisOutputFormatString, "raw-8khz-8bit-mono-alaw", true);
            case "raw-22050hz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.PCM, 1, 22050, 44100, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "riff-22050hz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.PCM, 1, 22050, 44100, 2, 16, speechSynthesisOutputFormatString, "raw-22050hz-16bit-mono-pcm", true);
            case "raw-44100hz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.PCM, 1, 44100, 88200, 2, 16, speechSynthesisOutputFormatString, speechSynthesisOutputFormatString, false);
            case "riff-44100hz-16bit-mono-pcm":
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.PCM, 1, 44100, 88200, 2, 16, speechSynthesisOutputFormatString, "raw-44100hz-16bit-mono-pcm", true);
            case "riff-16khz-16bit-mono-pcm":
            default:
                return new AudioOutputFormatImpl(_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.PCM, 1, 16000, 32000, 2, 16, "riff-16khz-16bit-mono-pcm", "raw-16khz-16bit-mono-pcm", true);
        }
    }
    static getDefaultOutputFormat() {
        return AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString((typeof window !== "undefined") ? "audio-24khz-48kbitrate-mono-mp3" : "riff-16khz-16bit-mono-pcm");
    }
    /**
     * Specifies if this audio output format has a header
     * @boolean AudioOutputFormatImpl.prototype.hasHeader
     * @function
     * @public
     */
    get hasHeader() {
        return this.priHasHeader;
    }
    /**
     * Specifies the header of this format
     * @ArrayBuffer AudioOutputFormatImpl.prototype.header
     * @function
     * @public
     */
    get header() {
        if (this.hasHeader) {
            return this.privHeader;
        }
        return undefined;
    }
    /**
     * Updates the header based on the audio length
     * @member AudioOutputFormatImpl.updateHeader
     * @function
     * @public
     * @param {number} audioLength - the audio length
     */
    updateHeader(audioLength) {
        if (this.priHasHeader) {
            const view = new DataView(this.privHeader);
            view.setUint32(4, audioLength + this.privHeader.byteLength - 8, true);
            view.setUint32(40, audioLength, true);
        }
    }
    /**
     * Specifies the audio format string to be sent to the service
     * @string AudioOutputFormatImpl.prototype.requestAudioFormatString
     * @function
     * @public
     */
    get requestAudioFormatString() {
        return this.priRequestAudioFormatString;
    }
}
AudioOutputFormatImpl.SpeechSynthesisOutputFormatToString = {
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]: "raw-8khz-8bit-mono-mulaw",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]: "riff-16khz-16kbps-mono-siren",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]: "audio-16khz-16kbps-mono-siren",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]: "audio-16khz-32kbitrate-mono-mp3",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]: "audio-16khz-128kbitrate-mono-mp3",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]: "audio-16khz-64kbitrate-mono-mp3",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]: "audio-24khz-48kbitrate-mono-mp3",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]: "audio-24khz-96kbitrate-mono-mp3",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]: "audio-24khz-160kbitrate-mono-mp3",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]: "raw-16khz-16bit-mono-truesilk",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]: "riff-16khz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]: "riff-8khz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]: "riff-24khz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]: "riff-8khz-8bit-mono-mulaw",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]: "raw-16khz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]: "raw-24khz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]: "raw-8khz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]: "ogg-16khz-16bit-mono-opus",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]: "ogg-24khz-16bit-mono-opus",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]: "raw-48khz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]: "riff-48khz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]: "audio-48khz-96kbitrate-mono-mp3",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]: "audio-48khz-192kbitrate-mono-mp3",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]: "ogg-48khz-16bit-mono-opus",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]: "webm-16khz-16bit-mono-opus",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]: "webm-24khz-16bit-mono-opus",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]: "webm-24khz-16bit-24kbps-mono-opus",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]: "raw-24khz-16bit-mono-truesilk",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]: "raw-8khz-8bit-mono-alaw",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]: "riff-8khz-8bit-mono-alaw",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]: "audio-16khz-16bit-32kbps-mono-opus",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]: "audio-24khz-16bit-48kbps-mono-opus",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]: "audio-24khz-16bit-24kbps-mono-opus",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]: "raw-22050hz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]: "riff-22050hz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]: "raw-44100hz-16bit-mono-pcm",
    [_SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_1__.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]: "riff-44100hz-16bit-mono-pcm",
};

//# sourceMappingURL=AudioOutputFormat.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AudioOutputStream": () => (/* binding */ AudioOutputStream),
/* harmony export */   "PullAudioOutputStream": () => (/* binding */ PullAudioOutputStream),
/* harmony export */   "PullAudioOutputStreamImpl": () => (/* binding */ PullAudioOutputStreamImpl),
/* harmony export */   "PushAudioOutputStream": () => (/* binding */ PushAudioOutputStream),
/* harmony export */   "PushAudioOutputStreamImpl": () => (/* binding */ PushAudioOutputStreamImpl)
/* harmony export */ });
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Stream.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _AudioOutputFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AudioOutputFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/* eslint-disable max-classes-per-file */



/**
 * Represents audio output stream used for custom audio output configurations.
 * @class AudioOutputStream
 */
class AudioOutputStream {
    /**
     * Creates and initializes an instance.
     * @constructor
     */
    constructor() {
        return;
    }
    /**
     * Creates a memory backed PullAudioOutputStream with the specified audio format.
     * @member AudioOutputStream.createPullStream
     * @function
     * @public
     * @returns {PullAudioOutputStream} The audio output stream being created.
     */
    static createPullStream() {
        return PullAudioOutputStream.create();
    }
}
/**
 * Represents memory backed push audio output stream used for custom audio output configurations.
 * @class PullAudioOutputStream
 */
class PullAudioOutputStream extends AudioOutputStream {
    /**
     * Creates a memory backed PullAudioOutputStream with the specified audio format.
     * @member PullAudioOutputStream.create
     * @function
     * @public
     * @returns {PullAudioOutputStream} The push audio output stream being created.
     */
    static create() {
        return new PullAudioOutputStreamImpl();
    }
}
/**
 * Represents memory backed push audio output stream used for custom audio output configurations.
 * @private
 * @class PullAudioOutputStreamImpl
 */
class PullAudioOutputStreamImpl extends PullAudioOutputStream {
    /**
     * Creates and initializes an instance with the given values.
     * @constructor
     */
    constructor() {
        super();
        this.privId = (0,_common_Exports__WEBPACK_IMPORTED_MODULE_0__.createNoDashGuid)();
        this.privStream = new _common_Exports__WEBPACK_IMPORTED_MODULE_1__.Stream();
    }
    /**
     * Sets the format information to the stream. For internal use only.
     * @param {AudioStreamFormat} format - the format to be set.
     */
    set format(format) {
        if (format === undefined || format === null) {
            this.privFormat = _AudioOutputFormat__WEBPACK_IMPORTED_MODULE_2__.AudioOutputFormatImpl.getDefaultOutputFormat();
        }
        this.privFormat = format;
    }
    /**
     * Format information for the audio
     */
    get format() {
        return this.privFormat;
    }
    /**
     * Checks if the stream is closed
     * @member PullAudioOutputStreamImpl.prototype.isClosed
     * @property
     * @public
     */
    get isClosed() {
        return this.privStream.isClosed;
    }
    /**
     * Gets the id of the stream
     * @member PullAudioOutputStreamImpl.prototype.id
     * @property
     * @public
     */
    id() {
        return this.privId;
    }
    /**
     * Reads audio data from the internal buffer.
     * @member PullAudioOutputStreamImpl.prototype.read
     * @function
     * @public
     * @param {ArrayBuffer} dataBuffer - An ArrayBuffer to store the read data.
     * @returns {Promise<number>} - Audio buffer length has been read.
     */
    read(dataBuffer) {
        return __awaiter(this, void 0, void 0, function* () {
            const intView = new Int8Array(dataBuffer);
            let totalBytes = 0;
            if (this.privLastChunkView !== undefined) {
                if (this.privLastChunkView.length > dataBuffer.byteLength) {
                    intView.set(this.privLastChunkView.slice(0, dataBuffer.byteLength));
                    this.privLastChunkView = this.privLastChunkView.slice(dataBuffer.byteLength);
                    return Promise.resolve(dataBuffer.byteLength);
                }
                intView.set(this.privLastChunkView);
                totalBytes = this.privLastChunkView.length;
                this.privLastChunkView = undefined;
            }
            // Until we have the minimum number of bytes to send in a transmission, keep asking for more.
            while (totalBytes < dataBuffer.byteLength && !this.privStream.isReadEnded) {
                const chunk = yield this.privStream.read();
                if (chunk !== undefined && !chunk.isEnd) {
                    let tmpBuffer;
                    if (chunk.buffer.byteLength > dataBuffer.byteLength - totalBytes) {
                        tmpBuffer = chunk.buffer.slice(0, dataBuffer.byteLength - totalBytes);
                        this.privLastChunkView = new Int8Array(chunk.buffer.slice(dataBuffer.byteLength - totalBytes));
                    }
                    else {
                        tmpBuffer = chunk.buffer;
                    }
                    intView.set(new Int8Array(tmpBuffer), totalBytes);
                    totalBytes += tmpBuffer.byteLength;
                }
                else {
                    this.privStream.readEnded();
                }
            }
            return totalBytes;
        });
    }
    /**
     * Writes the audio data specified by making an internal copy of the data.
     * @member PullAudioOutputStreamImpl.prototype.write
     * @function
     * @public
     * @param {ArrayBuffer} dataBuffer - The audio buffer of which this function will make a copy.
     */
    write(dataBuffer) {
        _Contracts__WEBPACK_IMPORTED_MODULE_3__.Contracts.throwIfNullOrUndefined(this.privStream, "must set format before writing");
        this.privStream.writeStreamChunk({
            buffer: dataBuffer,
            isEnd: false,
            timeReceived: Date.now()
        });
    }
    /**
     * Closes the stream.
     * @member PullAudioOutputStreamImpl.prototype.close
     * @function
     * @public
     */
    close() {
        this.privStream.close();
    }
}
/*
 * Represents audio output stream used for custom audio output configurations.
 * @class PushAudioOutputStream
 */
class PushAudioOutputStream extends AudioOutputStream {
    /**
     * Creates and initializes and instance.
     * @constructor
     */
    constructor() {
        super();
    }
    /**
     * Creates a PushAudioOutputStream that delegates to the specified callback interface for
     * write() and close() methods.
     * @member PushAudioOutputStream.create
     * @function
     * @public
     * @param {PushAudioOutputStreamCallback} callback - The custom audio output object,
     * derived from PushAudioOutputStreamCallback
     * @returns {PushAudioOutputStream} The push audio output stream being created.
     */
    static create(callback) {
        return new PushAudioOutputStreamImpl(callback);
    }
}
/**
 * Represents audio output stream used for custom audio output configurations.
 * @private
 * @class PushAudioOutputStreamImpl
 */
class PushAudioOutputStreamImpl extends PushAudioOutputStream {
    /**
     * Creates a PushAudioOutputStream that delegates to the specified callback interface for
     * read() and close() methods.
     * @constructor
     * @param {PushAudioOutputStreamCallback} callback - The custom audio output object,
     * derived from PushAudioOutputStreamCallback
     */
    constructor(callback) {
        super();
        this.privId = (0,_common_Exports__WEBPACK_IMPORTED_MODULE_0__.createNoDashGuid)();
        this.privCallback = callback;
    }
    // eslint-disable-next-line @typescript-eslint/no-empty-function
    set format(format) { }
    write(buffer) {
        if (!!this.privCallback.write) {
            this.privCallback.write(buffer);
        }
    }
    close() {
        if (!!this.privCallback.close) {
            this.privCallback.close();
        }
    }
    id() {
        return this.privId;
    }
}

//# sourceMappingURL=AudioOutputStream.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AudioFormatTag": () => (/* binding */ AudioFormatTag),
/* harmony export */   "AudioStreamFormat": () => (/* binding */ AudioStreamFormat),
/* harmony export */   "AudioStreamFormatImpl": () => (/* binding */ AudioStreamFormatImpl)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// eslint-disable-next-line max-classes-per-file
var AudioFormatTag;
(function (AudioFormatTag) {
    AudioFormatTag[AudioFormatTag["PCM"] = 1] = "PCM";
    AudioFormatTag[AudioFormatTag["MuLaw"] = 2] = "MuLaw";
    AudioFormatTag[AudioFormatTag["Siren"] = 3] = "Siren";
    AudioFormatTag[AudioFormatTag["MP3"] = 4] = "MP3";
    AudioFormatTag[AudioFormatTag["SILKSkype"] = 5] = "SILKSkype";
    AudioFormatTag[AudioFormatTag["OGG_OPUS"] = 6] = "OGG_OPUS";
    AudioFormatTag[AudioFormatTag["WEBM_OPUS"] = 7] = "WEBM_OPUS";
    AudioFormatTag[AudioFormatTag["ALaw"] = 8] = "ALaw";
    AudioFormatTag[AudioFormatTag["FLAC"] = 9] = "FLAC";
    AudioFormatTag[AudioFormatTag["OPUS"] = 10] = "OPUS";
})(AudioFormatTag || (AudioFormatTag = {}));
/**
 * Represents audio stream format used for custom audio input configurations.
 * @class AudioStreamFormat
 */
class AudioStreamFormat {
    /**
     * Creates an audio stream format object representing the default audio stream
     * format (16KHz 16bit mono PCM).
     * @member AudioStreamFormat.getDefaultInputFormat
     * @function
     * @public
     * @returns {AudioStreamFormat} The audio stream format being created.
     */
    static getDefaultInputFormat() {
        return AudioStreamFormatImpl.getDefaultInputFormat();
    }
    /**
     * Creates an audio stream format object with the specified format characteristics.
     * @member AudioStreamFormat.getWaveFormat
     * @function
     * @public
     * @param {number} samplesPerSecond - Sample rate, in samples per second (Hertz).
     * @param {number} bitsPerSample - Bits per sample, typically 16.
     * @param {number} channels - Number of channels in the waveform-audio data. Monaural data
     * uses one channel and stereo data uses two channels.
     * @param {AudioFormatTag} format - Audio format (PCM, alaw or mulaw).
     * @returns {AudioStreamFormat} The audio stream format being created.
     */
    static getWaveFormat(samplesPerSecond, bitsPerSample, channels, format) {
        return new AudioStreamFormatImpl(samplesPerSecond, bitsPerSample, channels, format);
    }
    /**
     * Creates an audio stream format object with the specified pcm waveformat characteristics.
     * @member AudioStreamFormat.getWaveFormatPCM
     * @function
     * @public
     * @param {number} samplesPerSecond - Sample rate, in samples per second (Hertz).
     * @param {number} bitsPerSample - Bits per sample, typically 16.
     * @param {number} channels - Number of channels in the waveform-audio data. Monaural data
     * uses one channel and stereo data uses two channels.
     * @returns {AudioStreamFormat} The audio stream format being created.
     */
    static getWaveFormatPCM(samplesPerSecond, bitsPerSample, channels) {
        return new AudioStreamFormatImpl(samplesPerSecond, bitsPerSample, channels);
    }
}
/**
 * @private
 * @class AudioStreamFormatImpl
 */
class AudioStreamFormatImpl extends AudioStreamFormat {
    /**
     * Creates an instance with the given values.
     * @constructor
     * @param {number} samplesPerSec - Samples per second.
     * @param {number} bitsPerSample - Bits per sample.
     * @param {number} channels - Number of channels.
     * @param {AudioFormatTag} format - Audio format (PCM, alaw or mulaw).
     */
    constructor(samplesPerSec = 16000, bitsPerSample = 16, channels = 1, format = AudioFormatTag.PCM) {
        super();
        let isWavFormat = true;
        /* 1 for PCM; 6 for alaw; 7 for mulaw */
        switch (format) {
            case AudioFormatTag.PCM:
                this.formatTag = 1;
                break;
            case AudioFormatTag.ALaw:
                this.formatTag = 6;
                break;
            case AudioFormatTag.MuLaw:
                this.formatTag = 7;
                break;
            default:
                isWavFormat = false;
        }
        this.bitsPerSample = bitsPerSample;
        this.samplesPerSec = samplesPerSec;
        this.channels = channels;
        this.avgBytesPerSec = this.samplesPerSec * this.channels * (this.bitsPerSample / 8);
        this.blockAlign = this.channels * Math.max(this.bitsPerSample, 8);
        if (isWavFormat) {
            this.privHeader = new ArrayBuffer(44);
            // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView
            const view = new DataView(this.privHeader);
            /* RIFF identifier */
            this.setString(view, 0, "RIFF");
            /* file length */
            view.setUint32(4, 0, true);
            /* RIFF type & Format */
            this.setString(view, 8, "WAVEfmt ");
            /* format chunk length */
            view.setUint32(16, 16, true);
            /* audio format */
            view.setUint16(20, this.formatTag, true);
            /* channel count */
            view.setUint16(22, this.channels, true);
            /* sample rate */
            view.setUint32(24, this.samplesPerSec, true);
            /* byte rate (sample rate * block align) */
            view.setUint32(28, this.avgBytesPerSec, true);
            /* block align (channel count * bytes per sample) */
            view.setUint16(32, this.channels * (this.bitsPerSample / 8), true);
            /* bits per sample */
            view.setUint16(34, this.bitsPerSample, true);
            /* data chunk identifier */
            this.setString(view, 36, "data");
            /* data chunk length */
            view.setUint32(40, 0, true);
        }
    }
    /**
     * Retrieves the default input format.
     * @member AudioStreamFormatImpl.getDefaultInputFormat
     * @function
     * @public
     * @returns {AudioStreamFormatImpl} The default input format.
     */
    static getDefaultInputFormat() {
        return new AudioStreamFormatImpl();
    }
    /**
     * Creates an audio context appropriate to current browser
     * @member AudioStreamFormatImpl.getAudioContext
     * @function
     * @public
     * @returns {AudioContext} An audio context instance
     */
    /* eslint-disable */
    static getAudioContext(sampleRate) {
        // Workaround for Speech SDK bug in Safari.
        const AudioContext = window.AudioContext // our preferred impl
            || window.webkitAudioContext // fallback, mostly when on Safari
            || false; // could not find.
        // https://developer.mozilla.org/en-US/docs/Web/API/AudioContext
        if (!!AudioContext) {
            if (sampleRate !== undefined && navigator.mediaDevices.getSupportedConstraints().sampleRate) {
                return new AudioContext({ sampleRate });
            }
            else {
                return new AudioContext();
            }
        }
        else {
            throw new Error("Browser does not support Web Audio API (AudioContext is not available).");
        }
    }
    /* eslint-enable */
    /**
     * Closes the configuration object.
     * @member AudioStreamFormatImpl.prototype.close
     * @function
     * @public
     */
    close() {
        return;
    }
    get header() {
        return this.privHeader;
    }
    setString(view, offset, str) {
        for (let i = 0; i < str.length; i++) {
            view.setUint8(offset + i, str.charCodeAt(i));
        }
    }
}

//# sourceMappingURL=AudioStreamFormat.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/BaseAudioPlayer.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/BaseAudioPlayer.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BaseAudioPlayer": () => (/* binding */ BaseAudioPlayer)
/* harmony export */ });
/* harmony import */ var _common_Error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/Error */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Error.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



/**
 * Base audio player class
 * TODO: Plays only PCM for now.
 * @class
 */
class BaseAudioPlayer {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {AudioStreamFormat} audioFormat audio stream format recognized by the player.
     */
    constructor(audioFormat) {
        this.audioContext = null;
        this.gainNode = null;
        this.autoUpdateBufferTimer = 0;
        if (audioFormat === undefined) {
            audioFormat = _Exports__WEBPACK_IMPORTED_MODULE_0__.AudioStreamFormat.getDefaultInputFormat();
        }
        this.init(audioFormat);
    }
    /**
     * play Audio sample
     * @param newAudioData audio data to be played.
     */
    playAudioSample(newAudioData, cb, err) {
        try {
            this.ensureInitializedContext();
            const audioData = this.formatAudioData(newAudioData);
            const newSamplesData = new Float32Array(this.samples.length + audioData.length);
            newSamplesData.set(this.samples, 0);
            newSamplesData.set(audioData, this.samples.length);
            this.samples = newSamplesData;
            if (!!cb) {
                cb();
            }
        }
        catch (e) {
            if (!!err) {
                err(e);
            }
        }
    }
    /**
     * stops audio and clears the buffers
     */
    stopAudio(cb, err) {
        if (this.audioContext !== null) {
            this.samples = new Float32Array();
            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
            clearInterval(this.autoUpdateBufferTimer);
            this.audioContext.close().then(() => {
                if (!!cb) {
                    cb();
                }
            }, (error) => {
                if (!!err) {
                    err(error);
                }
            });
            this.audioContext = null;
        }
    }
    init(audioFormat) {
        this.audioFormat = audioFormat;
        this.samples = new Float32Array();
    }
    ensureInitializedContext() {
        if (this.audioContext === null) {
            this.createAudioContext();
            const timerPeriod = 200;
            this.autoUpdateBufferTimer = setInterval(() => {
                this.updateAudioBuffer();
            }, timerPeriod);
        }
    }
    createAudioContext() {
        // new ((window as any).AudioContext || (window as any).webkitAudioContext)();
        this.audioContext = _Exports__WEBPACK_IMPORTED_MODULE_0__.AudioStreamFormatImpl.getAudioContext();
        // TODO: Various examples shows this gain node, it does not seem to be needed unless we plan
        // to control the volume, not likely
        this.gainNode = this.audioContext.createGain();
        this.gainNode.gain.value = 1;
        this.gainNode.connect(this.audioContext.destination);
        this.startTime = this.audioContext.currentTime;
    }
    formatAudioData(audioData) {
        switch (this.audioFormat.bitsPerSample) {
            case 8:
                return this.formatArrayBuffer(new Int8Array(audioData), 128);
            case 16:
                return this.formatArrayBuffer(new Int16Array(audioData), 32768);
            case 32:
                return this.formatArrayBuffer(new Int32Array(audioData), 2147483648);
            default:
                throw new _common_Error__WEBPACK_IMPORTED_MODULE_1__.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time");
        }
    }
    formatArrayBuffer(audioData, maxValue) {
        const float32Data = new Float32Array(audioData.length);
        for (let i = 0; i < audioData.length; i++) {
            float32Data[i] = audioData[i] / maxValue;
        }
        return float32Data;
    }
    updateAudioBuffer() {
        if (this.samples.length === 0) {
            return;
        }
        const channelCount = this.audioFormat.channels;
        const bufferSource = this.audioContext.createBufferSource();
        const frameCount = this.samples.length / channelCount;
        const audioBuffer = this.audioContext.createBuffer(channelCount, frameCount, this.audioFormat.samplesPerSec);
        // TODO: Should we do the conversion in the pushAudioSample instead?
        for (let channel = 0; channel < channelCount; channel++) {
            // Fill in individual channel data
            let channelOffset = channel;
            const audioData = audioBuffer.getChannelData(channel);
            for (let i = 0; i < this.samples.length; i++, channelOffset += channelCount) {
                audioData[i] = this.samples[channelOffset];
            }
        }
        if (this.startTime < this.audioContext.currentTime) {
            this.startTime = this.audioContext.currentTime;
        }
        bufferSource.buffer = audioBuffer;
        bufferSource.connect(this.gainNode);
        bufferSource.start(this.startTime);
        // Make sure we play the next sample after the current one.
        this.startTime += audioBuffer.duration;
        // Clear the samples for the next pushed data.
        this.samples = new Float32Array();
    }
    playAudio(audioData) {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.audioContext === null) {
                this.createAudioContext();
            }
            const source = this.audioContext.createBufferSource();
            const destination = this.audioContext.destination;
            yield this.audioContext.decodeAudioData(audioData, (newBuffer) => {
                source.buffer = newBuffer;
                source.connect(destination);
                source.start(0);
            });
        });
    }
}

//# sourceMappingURL=BaseAudioPlayer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/PullAudioInputStreamCallback.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/PullAudioInputStreamCallback.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PullAudioInputStreamCallback": () => (/* binding */ PullAudioInputStreamCallback)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * An abstract base class that defines callback methods (read() and close()) for
 * custom audio input streams).
 * @class PullAudioInputStreamCallback
 */
class PullAudioInputStreamCallback {
}

//# sourceMappingURL=PullAudioInputStreamCallback.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/PushAudioOutputStreamCallback.js":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/PushAudioOutputStreamCallback.js ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PushAudioOutputStreamCallback": () => (/* binding */ PushAudioOutputStreamCallback)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * An abstract base class that defines callback methods (write() and close()) for
 * custom audio output streams).
 * @class PushAudioOutputStreamCallback
 */
class PushAudioOutputStreamCallback {
}

//# sourceMappingURL=PushAudioOutputStreamCallback.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/SpeakerAudioDestination.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/SpeakerAudioDestination.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeakerAudioDestination": () => (/* binding */ SpeakerAudioDestination)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisAdapterBase.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/BackgroundError.js");
/* harmony import */ var _AudioOutputStream__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./AudioOutputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js");
/* harmony import */ var _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




const MediaDurationPlaceholderSeconds = 60 * 30;
const AudioFormatToMimeType = {
    [_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.PCM]: "audio/wav",
    [_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.MuLaw]: "audio/x-wav",
    [_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.MP3]: "audio/mpeg",
    [_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.OGG_OPUS]: "audio/ogg",
    [_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.WEBM_OPUS]: "audio/webm; codecs=opus",
    [_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.ALaw]: "audio/x-wav",
    [_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.FLAC]: "audio/flac",
};
/**
 * Represents the speaker playback audio destination, which only works in browser.
 * Note: the SDK will try to use <a href="https://www.w3.org/TR/media-source/">Media Source Extensions</a> to play audio.
 * Mp3 format has better supports on Microsoft Edge, Chrome and Safari (desktop), so, it's better to specify mp3 format for playback.
 * @class SpeakerAudioDestination
 * Updated in version 1.17.0
 */
class SpeakerAudioDestination {
    constructor(audioDestinationId) {
        this.privPlaybackStarted = false;
        this.privAppendingToBuffer = false;
        this.privMediaSourceOpened = false;
        this.privBytesReceived = 0;
        this.privId = audioDestinationId ? audioDestinationId : (0,_common_Exports__WEBPACK_IMPORTED_MODULE_1__.createNoDashGuid)();
        this.privIsPaused = false;
        this.privIsClosed = false;
    }
    id() {
        return this.privId;
    }
    write(buffer, cb, err) {
        if (this.privAudioBuffer !== undefined) {
            this.privAudioBuffer.push(buffer);
            this.updateSourceBuffer().then(() => {
                if (!!cb) {
                    cb();
                }
            }, (error) => {
                if (!!err) {
                    err(error);
                }
            });
        }
        else if (this.privAudioOutputStream !== undefined) {
            this.privAudioOutputStream.write(buffer);
            this.privBytesReceived += buffer.byteLength;
        }
    }
    close(cb, err) {
        this.privIsClosed = true;
        if (this.privSourceBuffer !== undefined) {
            this.handleSourceBufferUpdateEnd().then(() => {
                if (!!cb) {
                    cb();
                }
            }, (error) => {
                if (!!err) {
                    err(error);
                }
            });
        }
        else if (this.privAudioOutputStream !== undefined && typeof window !== "undefined") {
            if ((this.privFormat.formatTag === _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.PCM || this.privFormat.formatTag === _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.MuLaw
                || this.privFormat.formatTag === _AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag.ALaw) && this.privFormat.hasHeader === false) {
                // eslint-disable-next-line no-console
                console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header.");
                if (!!this.onAudioEnd) {
                    this.onAudioEnd(this);
                }
            }
            else {
                let receivedAudio = new ArrayBuffer(this.privBytesReceived);
                this.privAudioOutputStream.read(receivedAudio).then(() => {
                    receivedAudio = _common_speech_Exports__WEBPACK_IMPORTED_MODULE_2__.SynthesisAdapterBase.addHeader(receivedAudio, this.privFormat);
                    const audioBlob = new Blob([receivedAudio], { type: AudioFormatToMimeType[this.privFormat.formatTag] });
                    this.privAudio.src = window.URL.createObjectURL(audioBlob);
                    this.notifyPlayback().then(() => {
                        if (!!cb) {
                            cb();
                        }
                    }, (error) => {
                        if (!!err) {
                            err(error);
                        }
                    });
                }, (error) => {
                    if (!!err) {
                        err(error);
                    }
                });
            }
        }
        else {
            // unsupported format, call onAudioEnd directly.
            if (!!this.onAudioEnd) {
                this.onAudioEnd(this);
            }
        }
    }
    set format(format) {
        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
        if (typeof (AudioContext) !== "undefined" || (typeof (window) !== "undefined" && typeof (window.webkitAudioContext) !== "undefined")) {
            this.privFormat = format;
            const mimeType = AudioFormatToMimeType[this.privFormat.formatTag];
            if (mimeType === undefined) {
                // eslint-disable-next-line no-console
                console.warn(`Unknown mimeType for format ${_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`);
            }
            else if (typeof (MediaSource) !== "undefined" && MediaSource.isTypeSupported(mimeType)) {
                this.privAudio = new Audio();
                this.privAudioBuffer = [];
                this.privMediaSource = new MediaSource();
                this.privAudio.src = URL.createObjectURL(this.privMediaSource);
                this.privAudio.load();
                this.privMediaSource.onsourceopen = () => {
                    this.privMediaSourceOpened = true;
                    this.privMediaSource.duration = MediaDurationPlaceholderSeconds;
                    this.privSourceBuffer = this.privMediaSource.addSourceBuffer(mimeType);
                    this.privSourceBuffer.onupdate = () => {
                        this.updateSourceBuffer().catch((reason) => {
                            _common_Exports__WEBPACK_IMPORTED_MODULE_3__.Events.instance.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_4__.BackgroundEvent(reason));
                        });
                    };
                    this.privSourceBuffer.onupdateend = () => {
                        this.handleSourceBufferUpdateEnd().catch((reason) => {
                            _common_Exports__WEBPACK_IMPORTED_MODULE_3__.Events.instance.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_4__.BackgroundEvent(reason));
                        });
                    };
                    this.privSourceBuffer.onupdatestart = () => {
                        this.privAppendingToBuffer = false;
                    };
                };
                this.updateSourceBuffer().catch((reason) => {
                    _common_Exports__WEBPACK_IMPORTED_MODULE_3__.Events.instance.onEvent(new _common_Exports__WEBPACK_IMPORTED_MODULE_4__.BackgroundEvent(reason));
                });
            }
            else {
                // eslint-disable-next-line no-console
                console.warn(`Format ${_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_0__.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`);
                this.privAudioOutputStream = new _AudioOutputStream__WEBPACK_IMPORTED_MODULE_5__.PullAudioOutputStreamImpl();
                this.privAudioOutputStream.format = this.privFormat;
                this.privAudio = new Audio();
            }
        }
    }
    get volume() {
        var _a, _b;
        return (_b = (_a = this.privAudio) === null || _a === void 0 ? void 0 : _a.volume) !== null && _b !== void 0 ? _b : -1;
    }
    set volume(volume) {
        if (!!this.privAudio) {
            this.privAudio.volume = volume;
        }
    }
    mute() {
        if (!!this.privAudio) {
            this.privAudio.muted = true;
        }
    }
    unmute() {
        if (!!this.privAudio) {
            this.privAudio.muted = false;
        }
    }
    get isClosed() {
        return this.privIsClosed;
    }
    get currentTime() {
        if (this.privAudio !== undefined) {
            return this.privAudio.currentTime;
        }
        return -1;
    }
    pause() {
        if (!this.privIsPaused && this.privAudio !== undefined) {
            this.privAudio.pause();
            this.privIsPaused = true;
        }
    }
    resume(cb, err) {
        if (this.privIsPaused && this.privAudio !== undefined) {
            this.privAudio.play().then(() => {
                if (!!cb) {
                    cb();
                }
            }, (error) => {
                if (!!err) {
                    err(error);
                }
            });
            this.privIsPaused = false;
        }
    }
    get internalAudio() {
        return this.privAudio;
    }
    updateSourceBuffer() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privAudioBuffer !== undefined && (this.privAudioBuffer.length > 0) && this.sourceBufferAvailable()) {
                this.privAppendingToBuffer = true;
                const binary = this.privAudioBuffer.shift();
                try {
                    this.privSourceBuffer.appendBuffer(binary);
                }
                catch (error) {
                    this.privAudioBuffer.unshift(binary);
                    // eslint-disable-next-line no-console
                    console.log("buffer filled, pausing addition of binaries until space is made");
                    return;
                }
                yield this.notifyPlayback();
            }
            else if (this.canEndStream()) {
                yield this.handleSourceBufferUpdateEnd();
            }
        });
    }
    handleSourceBufferUpdateEnd() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.canEndStream() && this.sourceBufferAvailable()) {
                this.privMediaSource.endOfStream();
                yield this.notifyPlayback();
            }
        });
    }
    notifyPlayback() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.privPlaybackStarted && this.privAudio !== undefined) {
                this.privPlaybackStarted = true;
                if (!!this.onAudioStart) {
                    this.onAudioStart(this);
                }
                this.privAudio.onended = () => {
                    if (!!this.onAudioEnd) {
                        this.onAudioEnd(this);
                    }
                };
                if (!this.privIsPaused) {
                    yield this.privAudio.play();
                }
            }
        });
    }
    canEndStream() {
        return (this.isClosed && this.privSourceBuffer !== undefined && (this.privAudioBuffer.length === 0)
            && this.privMediaSourceOpened && !this.privAppendingToBuffer && this.privMediaSource.readyState === "open");
    }
    sourceBufferAvailable() {
        return (this.privSourceBuffer !== undefined && !this.privSourceBuffer.updating);
    }
}

//# sourceMappingURL=SpeakerAudioDestination.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/AutoDetectSourceLanguageConfig.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/AutoDetectSourceLanguageConfig.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AutoDetectSourceLanguageConfig": () => (/* binding */ AutoDetectSourceLanguageConfig)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _LanguageIdMode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./LanguageIdMode */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LanguageIdMode.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.




/**
 * Language auto detect configuration.
 * @class AutoDetectSourceLanguageConfig
 * Added in version 1.13.0.
 */
class AutoDetectSourceLanguageConfig {
    constructor() {
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyCollection();
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_LanguageIdMode, "AtStart");
        this.privLanguageIdMode = _LanguageIdMode__WEBPACK_IMPORTED_MODULE_2__.LanguageIdMode.AtStart;
    }
    /**
     * @member AutoDetectSourceLanguageConfig.fromOpenRange
     * @function
     * @public
     * Only [[SpeechSynthesizer]] supports source language auto detection from open range,
     * for [[Recognizer]], please use AutoDetectSourceLanguageConfig with specific source languages.
     * @return {AutoDetectSourceLanguageConfig} Instance of AutoDetectSourceLanguageConfig
     * @summary Creates an instance of the AutoDetectSourceLanguageConfig with open range.
     */
    static fromOpenRange() {
        const config = new AutoDetectSourceLanguageConfig();
        config.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages, _common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__.AutoDetectSourceLanguagesOpenRangeOptionName);
        return config;
    }
    /**
     * @member AutoDetectSourceLanguageConfig.fromLanguages
     * @function
     * @public
     * @param {string[]} languages Comma-separated string of languages (eg. "en-US,fr-FR") to populate properties of config.
     * @return {AutoDetectSourceLanguageConfig} Instance of AutoDetectSourceLanguageConfig
     * @summary Creates an instance of the AutoDetectSourceLanguageConfig with given languages.
     */
    static fromLanguages(languages) {
        _Contracts__WEBPACK_IMPORTED_MODULE_4__.Contracts.throwIfArrayEmptyOrWhitespace(languages, "languages");
        const config = new AutoDetectSourceLanguageConfig();
        config.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages, languages.join());
        return config;
    }
    /**
     * @member AutoDetectSourceLanguageConfig.fromSourceLanguageConfigs
     * @function
     * @public
     * @param {SourceLanguageConfig[]} configs SourceLanguageConfigs to populate properties of config.
     * @return {AutoDetectSourceLanguageConfig} Instance of AutoDetectSourceLanguageConfig
     * @summary Creates an instance of the AutoDetectSourceLanguageConfig with given SourceLanguageConfigs.
     */
    static fromSourceLanguageConfigs(configs) {
        if (configs.length < 1) {
            throw new Error("Expected non-empty SourceLanguageConfig array.");
        }
        const autoConfig = new AutoDetectSourceLanguageConfig();
        const langs = [];
        configs.forEach((config) => {
            langs.push(config.language);
            if (config.endpointId !== undefined && config.endpointId !== "") {
                const customProperty = config.language + _Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_EndpointId.toString();
                autoConfig.properties.setProperty(customProperty, config.endpointId);
            }
        });
        autoConfig.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages, langs.join());
        return autoConfig;
    }
    /**
     * @member AutoDetectSourceLanguageConfig.prototype.properties
     * @function
     * @public
     * @return {PropertyCollection} Properties of the config.
     * @summary Gets an auto detected language config properties
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * @member AutoDetectSourceLanguageConfig.prototype.mode
     * @function
     * @public
     * @param {LanguageIdMode} mode LID mode desired.
     * @summary Sets LID operation to desired mode
     */
    set mode(mode) {
        if (mode === _LanguageIdMode__WEBPACK_IMPORTED_MODULE_2__.LanguageIdMode.Continuous) {
            this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion, "2");
            this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_LanguageIdMode, "Continuous");
        }
        else { // LanguageIdMode.AtStart
            this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion, "1");
            this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_LanguageIdMode, "AtStart");
        }
        this.privLanguageIdMode = mode;
    }
}

//# sourceMappingURL=AutoDetectSourceLanguageConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/AutoDetectSourceLanguageResult.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/AutoDetectSourceLanguageResult.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AutoDetectSourceLanguageResult": () => (/* binding */ AutoDetectSourceLanguageResult)
/* harmony export */ });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Output format
 * @class AutoDetectSourceLanguageResult
 */
class AutoDetectSourceLanguageResult {
    constructor(language, languageDetectionConfidence) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(language, "language");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(languageDetectionConfidence, "languageDetectionConfidence");
        this.privLanguage = language;
        this.privLanguageDetectionConfidence = languageDetectionConfidence;
    }
    /**
     * Creates an instance of AutoDetectSourceLanguageResult object from a SpeechRecognitionResult instance.
     * @member AutoDetectSourceLanguageResult.fromResult
     * @function
     * @public
     * @param {SpeechRecognitionResult} result - The recognition result.
     * @returns {AutoDetectSourceLanguageResult} AutoDetectSourceLanguageResult object being created.
     */
    static fromResult(result) {
        return new AutoDetectSourceLanguageResult(result.language, result.languageDetectionConfidence);
    }
    get language() {
        return this.privLanguage;
    }
    get languageDetectionConfidence() {
        return this.privLanguageDetectionConfidence;
    }
}

//# sourceMappingURL=AutoDetectSourceLanguageResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/BotFrameworkConfig.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/BotFrameworkConfig.js ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BotFrameworkConfig": () => (/* binding */ BotFrameworkConfig)
/* harmony export */ });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DialogServiceConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConfig.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



/**
 * Class that defines configurations for the dialog service connector object for using a Bot Framework backend.
 * @class BotFrameworkConfig
 */
class BotFrameworkConfig extends _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_0__.DialogServiceConfigImpl {
    /**
     * Creates an instance of BotFrameworkConfig.
     */
    constructor() {
        super();
    }
    /**
     * Creates a bot framework configuration instance with the provided subscription information.
     * @member BotFrameworkConfig.fromSubscription
     * @function
     * @public
     * @param subscription Subscription key associated with the bot
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @param botId Optional. Identifier for using a specific bot within an Azure resource group. Equivalent to the
     * resource name.
     * @returns {BotFrameworkConfig} A new bot framework configuration instance.
     */
    static fromSubscription(subscription, region, botId) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(subscription, "subscription");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(region, "region");
        const botFrameworkConfig = new _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_0__.DialogServiceConfigImpl();
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.Conversation_DialogType, _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_0__.DialogServiceConfig.DialogTypes.BotFramework);
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Key, subscription);
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Region, region);
        if (botId) {
            botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.Conversation_ApplicationId, botId);
        }
        return botFrameworkConfig;
    }
    /**
     * Creates a bot framework configuration instance for the specified authorization token and region.
     * Note: The caller must ensure that an authorization token is valid. Before an authorization token expires, the
     * caller must refresh it by setting the authorizationToken property on the corresponding
     * DialogServiceConnector instance created with this config. The contents of configuration objects are copied
     * when connectors are created, so setting authorizationToken on a DialogServiceConnector will not update the
     * original configuration's authorization token. Create a new configuration instance or set the
     * SpeechServiceAuthorization_Token property to update an existing instance if it will be used to create
     * further DialogServiceConnectors.
     * @member BotFrameworkConfig.fromAuthorizationToken
     * @function
     * @public
     * @param authorizationToken The authorization token associated with the bot
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @param botId Optional. Identifier for using a specific bot within an Azure resource group. Equivalent to the
     * resource name.
     * @returns {BotFrameworkConfig} A new bot framework configuration instance.
     */
    static fromAuthorizationToken(authorizationToken, region, botId) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(authorizationToken, "authorizationToken");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(region, "region");
        const botFrameworkConfig = new _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_0__.DialogServiceConfigImpl();
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.Conversation_DialogType, _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_0__.DialogServiceConfig.DialogTypes.BotFramework);
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceAuthorization_Token, authorizationToken);
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Region, region);
        if (botId) {
            botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.Conversation_ApplicationId, botId);
        }
        return botFrameworkConfig;
    }
    /**
     * Creates an instance of a BotFrameworkConfig.
     * This method is intended only for users who use a non-default service host. The standard resource path will be
     * assumed. For services with a non-standard resource path or no path at all, use fromEndpoint instead.
     * Note: Query parameters are not allowed in the host URI and must be set by other APIs.
     * Note: To use an authorization token with fromHost, use fromHost(URL) and then set the AuthorizationToken
     * property on the created BotFrameworkConfig instance.
     * Note: Added in version 1.15.0.
     * @member BotFrameworkConfig.fromHost
     * @function
     * @public
     * @param {URL | string} host - If a URL is provided, the fully-qualified host with protocol (e.g.
     * wss://your.host.com:1234) will be used. If a string is provided, it will be embedded in
     * wss://{host}.convai.speech.azure.us.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization
     * token must be set.
     * @param botId Optional. Identifier for using a specific bot within an Azure resource group. Equivalent to the
     * resource name.
     * @returns {BotFrameworkConfig} A new bot framework configuration instance.
     */
    static fromHost(host, subscriptionKey, botId) {
        void botId;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(host, "host");
        const resolvedHost = host instanceof URL ? host : new URL(`wss://${host}.convai.speech.azure.us`);
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(resolvedHost, "resolvedHost");
        const botFrameworkConfig = new _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_0__.DialogServiceConfigImpl();
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.Conversation_DialogType, _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_0__.DialogServiceConfig.DialogTypes.BotFramework);
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Host, resolvedHost.toString());
        if (undefined !== subscriptionKey) {
            botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Key, subscriptionKey);
        }
        return botFrameworkConfig;
    }
    /**
     * Creates an instance of a BotFrameworkConfig.
     * This method is intended only for users who use a non-standard service endpoint or parameters.
     * Note: The query parameters specified in the endpoint URL are not changed, even if they are set by any other APIs.
     * Note: To use authorization token with fromEndpoint, pass an empty string to the subscriptionKey in the
     * fromEndpoint method, and then set authorizationToken="token" on the created BotFrameworkConfig instance to
     * use the authorization token.
     * Note: Added in version 1.15.0.
     * @member BotFrameworkConfig.fromEndpoint
     * @function
     * @public
     * @param {URL} endpoint - The service endpoint to connect to.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization
     * token must be set.
     * @returns {BotFrameworkConfig} - A new bot framework configuration instance using the provided endpoint.
     */
    static fromEndpoint(endpoint, subscriptionKey) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNull(endpoint, "endpoint");
        const botFrameworkConfig = new _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_0__.DialogServiceConfigImpl();
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.Conversation_DialogType, _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_0__.DialogServiceConfig.DialogTypes.BotFramework);
        botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Endpoint, endpoint.toString());
        if (undefined !== subscriptionKey) {
            botFrameworkConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Key, subscriptionKey);
        }
        return botFrameworkConfig;
    }
}

//# sourceMappingURL=BotFrameworkConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetails.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetails.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CancellationDetails": () => (/* binding */ CancellationDetails)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/EnumTranslation.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _CancellationDetailsBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CancellationDetailsBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetailsBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionResult.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



/**
 * Contains detailed information about why a result was canceled.
 * @class CancellationDetails
 */
class CancellationDetails extends _CancellationDetailsBase__WEBPACK_IMPORTED_MODULE_0__.CancellationDetailsBase {
    constructor(reason, errorDetails, errorCode) {
        super(reason, errorDetails, errorCode);
    }
    /**
     * Creates an instance of CancellationDetails object for the canceled RecognitionResult.
     * @member CancellationDetails.fromResult
     * @function
     * @public
     * @param {RecognitionResult | SpeechSynthesisResult} result - The result that was canceled.
     * @returns {CancellationDetails} The cancellation details object being created.
     */
    static fromResult(result) {
        let reason = _Exports__WEBPACK_IMPORTED_MODULE_1__.CancellationReason.Error;
        let errorCode = _Exports__WEBPACK_IMPORTED_MODULE_2__.CancellationErrorCode.NoError;
        if (result instanceof _Exports__WEBPACK_IMPORTED_MODULE_3__.RecognitionResult && !!result.json) {
            const simpleSpeech = _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.SimpleSpeechPhrase.fromJSON(result.json);
            reason = _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.EnumTranslation.implTranslateCancelResult(simpleSpeech.RecognitionStatus);
        }
        if (!!result.properties) {
            errorCode = _Exports__WEBPACK_IMPORTED_MODULE_2__.CancellationErrorCode[result.properties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_6__.CancellationErrorCodePropertyName, _Exports__WEBPACK_IMPORTED_MODULE_2__.CancellationErrorCode[_Exports__WEBPACK_IMPORTED_MODULE_2__.CancellationErrorCode.NoError])];
        }
        return new CancellationDetails(reason, result.errorDetails || _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.EnumTranslation.implTranslateErrorDetails(errorCode), errorCode);
    }
}

//# sourceMappingURL=CancellationDetails.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetailsBase.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetailsBase.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CancellationDetailsBase": () => (/* binding */ CancellationDetailsBase)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Contains detailed information about why a result was canceled.
 * @class CancellationDetailsBase
 */
class CancellationDetailsBase {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {CancellationReason} reason - The cancellation reason.
     * @param {string} errorDetails - The error details, if provided.
     */
    constructor(reason, errorDetails, errorCode) {
        this.privReason = reason;
        this.privErrorDetails = errorDetails;
        this.privErrorCode = errorCode;
    }
    /**
     * The reason the recognition was canceled.
     * @member CancellationDetailsBase.prototype.reason
     * @function
     * @public
     * @returns {CancellationReason} Specifies the reason canceled.
     */
    get reason() {
        return this.privReason;
    }
    /**
     * In case of an unsuccessful recognition, provides details of the occurred error.
     * @member CancellationDetailsBase.prototype.errorDetails
     * @function
     * @public
     * @returns {string} A String that represents the error details.
     */
    get errorDetails() {
        return this.privErrorDetails;
    }
    /**
     * The error code in case of an unsuccessful recognition.
     * Added in version 1.1.0.
     * @return An error code that represents the error reason.
     */
    get ErrorCode() {
        return this.privErrorCode;
    }
}

//# sourceMappingURL=CancellationDetailsBase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CancellationErrorCode": () => (/* binding */ CancellationErrorCode)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines error code in case that CancellationReason is Error.
 * Added in version 1.1.0.
 */
var CancellationErrorCode;
(function (CancellationErrorCode) {
    /**
     * Indicates that no error occurred during speech recognition.
     */
    CancellationErrorCode[CancellationErrorCode["NoError"] = 0] = "NoError";
    /**
     * Indicates an authentication error.
     */
    CancellationErrorCode[CancellationErrorCode["AuthenticationFailure"] = 1] = "AuthenticationFailure";
    /**
     * Indicates that one or more recognition parameters are invalid.
     */
    CancellationErrorCode[CancellationErrorCode["BadRequestParameters"] = 2] = "BadRequestParameters";
    /**
     * Indicates that the number of parallel requests exceeded the number of allowed
     * concurrent transcriptions for the subscription.
     */
    CancellationErrorCode[CancellationErrorCode["TooManyRequests"] = 3] = "TooManyRequests";
    /**
     * Indicates a connection error.
     */
    CancellationErrorCode[CancellationErrorCode["ConnectionFailure"] = 4] = "ConnectionFailure";
    /**
     * Indicates a time-out error when waiting for response from service.
     */
    CancellationErrorCode[CancellationErrorCode["ServiceTimeout"] = 5] = "ServiceTimeout";
    /**
     * Indicates that an error is returned by the service.
     */
    CancellationErrorCode[CancellationErrorCode["ServiceError"] = 6] = "ServiceError";
    /**
     * Indicates an unexpected runtime error.
     */
    CancellationErrorCode[CancellationErrorCode["RuntimeError"] = 7] = "RuntimeError";
    /**
     * Indicates an quota overrun on existing key.
     */
    CancellationErrorCode[CancellationErrorCode["Forbidden"] = 8] = "Forbidden";
})(CancellationErrorCode || (CancellationErrorCode = {}));

//# sourceMappingURL=CancellationErrorCodes.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationEventArgsBase.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationEventArgsBase.js ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CancellationEventArgsBase": () => (/* binding */ CancellationEventArgsBase)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionEventArgs.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Defines content of a CancellationEvent.
 * @class CancellationEventArgsBase
 */
class CancellationEventArgsBase extends _Exports__WEBPACK_IMPORTED_MODULE_0__.RecognitionEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {CancellationReason} reason - The cancellation reason.
     * @param {string} errorDetails - Error details, if provided.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */
    constructor(reason, errorDetails, errorCode, offset, sessionId) {
        super(offset, sessionId);
        this.privReason = reason;
        this.privErrorDetails = errorDetails;
        this.privErrorCode = errorCode;
    }
    /**
     * The reason the recognition was canceled.
     * @member CancellationEventArgsBase.prototype.reason
     * @function
     * @public
     * @returns {CancellationReason} Specifies the reason canceled.
     */
    get reason() {
        return this.privReason;
    }
    /**
     * The error code in case of an unsuccessful operation.
     * @return An error code that represents the error reason.
     */
    get errorCode() {
        return this.privErrorCode;
    }
    /**
     * In case of an unsuccessful operation, provides details of the occurred error.
     * @member CancellationEventArgsBase.prototype.errorDetails
     * @function
     * @public
     * @returns {string} A String that represents the error details.
     */
    get errorDetails() {
        return this.privErrorDetails;
    }
}

//# sourceMappingURL=CancellationEventArgsBase.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CancellationReason": () => (/* binding */ CancellationReason)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines the possible reasons a recognition result might be canceled.
 * @class CancellationReason
 */
var CancellationReason;
(function (CancellationReason) {
    /**
     * Indicates that an error occurred during speech recognition.
     * @member CancellationReason.Error
     */
    CancellationReason[CancellationReason["Error"] = 0] = "Error";
    /**
     * Indicates that the end of the audio stream was reached.
     * @member CancellationReason.EndOfStream
     */
    CancellationReason[CancellationReason["EndOfStream"] = 1] = "EndOfStream";
})(CancellationReason || (CancellationReason = {}));

//# sourceMappingURL=CancellationReason.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Connection.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Connection.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Connection": () => (/* binding */ Connection)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisAdapterBase.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceRecognizerBase.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _ConnectionMessage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ConnectionMessage */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionMessage.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionEventArgs.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionMessageEventArgs.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ServiceEventArgs.js");
//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//





/**
 * Connection is a proxy class for managing connection to the speech service of the specified Recognizer.
 * By default, a Recognizer autonomously manages connection to service when needed.
 * The Connection class provides additional methods for users to explicitly open or close a connection and
 * to subscribe to connection status changes.
 * The use of Connection is optional, and mainly for scenarios where fine tuning of application
 * behavior based on connection status is needed. Users can optionally call Open() to manually set up a connection
 * in advance before starting recognition on the Recognizer associated with this Connection.
 * If the Recognizer needs to connect or disconnect to service, it will
 * setup or shutdown the connection independently. In this case the Connection will be notified by change of connection
 * status via Connected/Disconnected events.
 * Added in version 1.2.1.
 */
class Connection {
    /**
     * Gets the Connection instance from the specified recognizer.
     * @param recognizer The recognizer associated with the connection.
     * @return The Connection instance of the recognizer.
     */
    static fromRecognizer(recognizer) {
        const recoBase = recognizer.internalData;
        const ret = new Connection();
        ret.privInternalData = recoBase;
        ret.setupEvents();
        return ret;
    }
    /**
     * Gets the Connection instance from the specified synthesizer.
     * @param synthesizer The synthesizer associated with the connection.
     * @return The Connection instance of the synthesizer.
     */
    static fromSynthesizer(synthesizer) {
        const synthBase = synthesizer.internalData;
        const ret = new Connection();
        ret.privInternalData = synthBase;
        ret.setupEvents();
        return ret;
    }
    /**
     * Starts to set up connection to the service.
     * Users can optionally call openConnection() to manually set up a connection in advance before starting recognition on the
     * Recognizer associated with this Connection. After starting recognition, calling Open() will have no effect
     *
     * Note: On return, the connection might not be ready yet. Please subscribe to the Connected event to
     * be notified when the connection is established.
     */
    openConnection(cb, err) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_0__.marshalPromiseToCallbacks)(this.privInternalData.connect(), cb, err);
    }
    /**
     * Closes the connection the service.
     * Users can optionally call closeConnection() to manually shutdown the connection of the associated Recognizer.
     *
     * If closeConnection() is called during recognition, recognition will fail and cancel with an error.
     */
    closeConnection(cb, err) {
        if (this.privInternalData instanceof _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__.SynthesisAdapterBase) {
            throw new Error("Disconnecting a synthesizer's connection is currently not supported");
        }
        else {
            (0,_common_Exports__WEBPACK_IMPORTED_MODULE_0__.marshalPromiseToCallbacks)(this.privInternalData.disconnect(), cb, err);
        }
    }
    /**
     * Appends a parameter in a message to service.
     * Added in version 1.12.1.
     * @param path The path of the network message.
     * @param propertyName Name of the property
     * @param propertyValue Value of the property. This is a json string.
     */
    setMessageProperty(path, propertyName, propertyValue) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__.Contracts.throwIfNullOrWhitespace(propertyName, "propertyName");
        if (this.privInternalData instanceof _common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__.ServiceRecognizerBase) {
            if (path.toLowerCase() !== "speech.context") {
                throw new Error("Only speech.context message property sets are currently supported for recognizer");
            }
            else {
                this.privInternalData.speechContext.setSection(propertyName, propertyValue);
            }
        }
        else if (this.privInternalData instanceof _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__.SynthesisAdapterBase) {
            if (path.toLowerCase() !== "synthesis.context") {
                throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");
            }
            else {
                this.privInternalData.synthesisContext.setSection(propertyName, propertyValue);
            }
        }
    }
    /**
     * Sends a message to the speech service.
     * Added in version 1.13.0.
     * @param path The WebSocket path of the message
     * @param payload The payload of the message. This is a json string or a ArrayBuffer.
     * @param success A callback to indicate success.
     * @param error A callback to indicate an error.
     */
    sendMessageAsync(path, payload, success, error) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_0__.marshalPromiseToCallbacks)(this.privInternalData.sendNetworkMessage(path, payload), success, error);
    }
    /**
     * Dispose of associated resources.
     */
    close() {
        /* eslint-disable no-empty */
    }
    setupEvents() {
        this.privEventListener = this.privInternalData.connectionEvents.attach((connectionEvent) => {
            if (connectionEvent.name === "ConnectionEstablishedEvent") {
                if (!!this.connected) {
                    this.connected(new _Exports__WEBPACK_IMPORTED_MODULE_4__.ConnectionEventArgs(connectionEvent.connectionId));
                }
            }
            else if (connectionEvent.name === "ConnectionClosedEvent") {
                if (!!this.disconnected) {
                    this.disconnected(new _Exports__WEBPACK_IMPORTED_MODULE_4__.ConnectionEventArgs(connectionEvent.connectionId));
                }
            }
            else if (connectionEvent.name === "ConnectionMessageSentEvent") {
                if (!!this.messageSent) {
                    this.messageSent(new _Exports__WEBPACK_IMPORTED_MODULE_5__.ConnectionMessageEventArgs(new _ConnectionMessage__WEBPACK_IMPORTED_MODULE_6__.ConnectionMessageImpl(connectionEvent.message)));
                }
            }
            else if (connectionEvent.name === "ConnectionMessageReceivedEvent") {
                if (!!this.messageReceived) {
                    this.messageReceived(new _Exports__WEBPACK_IMPORTED_MODULE_5__.ConnectionMessageEventArgs(new _ConnectionMessage__WEBPACK_IMPORTED_MODULE_6__.ConnectionMessageImpl(connectionEvent.message)));
                }
            }
        });
        this.privServiceEventListener = this.privInternalData.serviceEvents.attach((e) => {
            if (!!this.receivedServiceMessage) {
                this.receivedServiceMessage(new _Exports__WEBPACK_IMPORTED_MODULE_7__.ServiceEventArgs(e.jsonString, e.name));
            }
        });
    }
}

//# sourceMappingURL=Connection.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionEventArgs.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionEventArgs.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConnectionEventArgs": () => (/* binding */ ConnectionEventArgs)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js");
//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//

/**
 * Defines payload for connection events like Connected/Disconnected.
 * Added in version 1.2.0
 */
class ConnectionEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__.SessionEventArgs {
}

//# sourceMappingURL=ConnectionEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionMessage.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionMessage.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConnectionMessage": () => (/* binding */ ConnectionMessage),
/* harmony export */   "ConnectionMessageImpl": () => (/* binding */ ConnectionMessageImpl)
/* harmony export */ });
/* harmony import */ var _common_speech_HeaderNames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common.speech/HeaderNames */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/HeaderNames.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/ConnectionMessage.js");
/* harmony import */ var _PropertyCollection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PropertyCollection */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _PropertyId__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PropertyId */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//
// eslint-disable-next-line max-classes-per-file




/**
 * ConnectionMessage represents implementation specific messages sent to and received from
 * the speech service. These messages are provided for debugging purposes and should not
 * be used for production use cases with the Azure Cognitive Services Speech Service.
 * Messages sent to and received from the Speech Service are subject to change without
 * notice. This includes message contents, headers, payloads, ordering, etc.
 * Added in version 1.11.0.
 */
class ConnectionMessage {
}
class ConnectionMessageImpl {
    constructor(message) {
        this.privConnectionMessage = message;
        this.privProperties = new _PropertyCollection__WEBPACK_IMPORTED_MODULE_0__.PropertyCollection();
        if (!!this.privConnectionMessage.headers[_common_speech_HeaderNames__WEBPACK_IMPORTED_MODULE_1__.HeaderNames.ConnectionId]) {
            this.privProperties.setProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_2__.PropertyId.Speech_SessionId, this.privConnectionMessage.headers[_common_speech_HeaderNames__WEBPACK_IMPORTED_MODULE_1__.HeaderNames.ConnectionId]);
        }
        Object.keys(this.privConnectionMessage.headers).forEach((header) => {
            this.privProperties.setProperty(header, this.privConnectionMessage.headers[header]);
        });
    }
    /**
     * The message path.
     */
    get path() {
        return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find((key) => key.toLowerCase() === "path".toLowerCase())];
    }
    /**
     * Checks to see if the ConnectionMessage is a text message.
     * See also IsBinaryMessage().
     */
    get isTextMessage() {
        return this.privConnectionMessage.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_3__.MessageType.Text;
    }
    /**
     * Checks to see if the ConnectionMessage is a binary message.
     * See also GetBinaryMessage().
     */
    get isBinaryMessage() {
        return this.privConnectionMessage.messageType === _common_Exports__WEBPACK_IMPORTED_MODULE_3__.MessageType.Binary;
    }
    /**
     * Gets the text message payload. Typically the text message content-type is
     * application/json. To determine other content-types use
     * Properties.GetProperty("Content-Type").
     */
    get TextMessage() {
        return this.privConnectionMessage.textBody;
    }
    /**
     * Gets the binary message payload.
     */
    get binaryMessage() {
        return this.privConnectionMessage.binaryBody;
    }
    /**
     * A collection of properties and their values defined for this <see cref="ConnectionMessage"/>.
     * Message headers can be accessed via this collection (e.g. "Content-Type").
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * Returns a string that represents the connection message.
     */
    toString() {
        return "";
    }
}

//# sourceMappingURL=ConnectionMessage.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionMessageEventArgs.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionMessageEventArgs.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConnectionMessageEventArgs": () => (/* binding */ ConnectionMessageEventArgs)
/* harmony export */ });
//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//
class ConnectionMessageEventArgs {
    constructor(message) {
        this.privConnectionMessage = message;
    }
    /**
     * Gets the <see cref="ConnectionMessage"/> associated with this <see cref="ConnectionMessageEventArgs"/>.
     */
    get message() {
        return this.privConnectionMessage;
    }
    /**
     * Returns a string that represents the connection message event.
     */
    toString() {
        return "Message: " + this.privConnectionMessage.toString();
    }
}

//# sourceMappingURL=ConnectionMessageEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Contracts": () => (/* binding */ Contracts)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * @class Contracts
 * @private
 */
class Contracts {
    static throwIfNullOrUndefined(param, name) {
        if (param === undefined || param === null) {
            throw new Error("throwIfNullOrUndefined:" + name);
        }
    }
    static throwIfNull(param, name) {
        if (param === null) {
            throw new Error("throwIfNull:" + name);
        }
    }
    static throwIfNullOrWhitespace(param, name) {
        Contracts.throwIfNullOrUndefined(param, name);
        if (("" + param).trim().length < 1) {
            throw new Error("throwIfNullOrWhitespace:" + name);
        }
    }
    static throwIfNullOrTooLong(param, name, maxLength) {
        Contracts.throwIfNullOrUndefined(param, name);
        if (("" + param).length > maxLength) {
            throw new Error("throwIfNullOrTooLong:" + name + " (more than " + maxLength.toString() + " characters)");
        }
    }
    static throwIfNullOrTooShort(param, name, minLength) {
        Contracts.throwIfNullOrUndefined(param, name);
        if (("" + param).length < minLength) {
            throw new Error("throwIfNullOrTooShort:" + name + " (less than " + minLength.toString() + " characters)");
        }
    }
    static throwIfDisposed(isDisposed) {
        if (isDisposed) {
            throw new Error("the object is already disposed");
        }
    }
    static throwIfArrayEmptyOrWhitespace(array, name) {
        Contracts.throwIfNullOrUndefined(array, name);
        if (array.length === 0) {
            throw new Error("throwIfArrayEmptyOrWhitespace:" + name);
        }
        for (const item of array) {
            Contracts.throwIfNullOrWhitespace(item, name);
        }
    }
    static throwIfFileDoesNotExist(param, name) {
        Contracts.throwIfNullOrWhitespace(param, name);
        // TODO check for file existence.
    }
    static throwIfNotUndefined(param, name) {
        if (param !== undefined) {
            throw new Error("throwIfNotUndefined:" + name);
        }
    }
}

//# sourceMappingURL=Contracts.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConversationTranscriptionCanceledEventArgs.js":
/*!**********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConversationTranscriptionCanceledEventArgs.js ***!
  \**********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationTranscriptionCanceledEventArgs": () => (/* binding */ ConversationTranscriptionCanceledEventArgs)
/* harmony export */ });
/* harmony import */ var _CancellationEventArgsBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CancellationEventArgsBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationEventArgsBase.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Defines content of a RecognitionErrorEvent.
 * @class ConversationTranscriptionCanceledEventArgs
 */
class ConversationTranscriptionCanceledEventArgs extends _CancellationEventArgsBase__WEBPACK_IMPORTED_MODULE_0__.CancellationEventArgsBase {
}

//# sourceMappingURL=ConversationTranscriptionCanceledEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CustomCommandsConfig.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CustomCommandsConfig.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CustomCommandsConfig": () => (/* binding */ CustomCommandsConfig)
/* harmony export */ });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DialogServiceConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConfig.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.



/**
 * Class that defines configurations for the dialog service connector object for using a CustomCommands backend.
 * @class CustomCommandsConfig
 */
class CustomCommandsConfig extends _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_0__.DialogServiceConfigImpl {
    /**
     * Creates an instance of CustomCommandsConfig.
     */
    constructor() {
        super();
    }
    /**
     * Creates an instance of the bot framework config with the specified subscription and region.
     * @member CustomCommandsConfig.fromSubscription
     * @function
     * @public
     * @param applicationId Speech Commands application id.
     * @param subscription Subscription key associated with the bot
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {CustomCommandsConfig} A new bot framework config.
     */
    static fromSubscription(applicationId, subscription, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(applicationId, "applicationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(subscription, "subscription");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(region, "region");
        const customCommandsConfig = new _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_0__.DialogServiceConfigImpl();
        customCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.Conversation_DialogType, _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_0__.DialogServiceConfig.DialogTypes.CustomCommands);
        customCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.Conversation_ApplicationId, applicationId);
        customCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Key, subscription);
        customCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Region, region);
        return customCommandsConfig;
    }
    /**
     * Creates an instance of the bot framework config with the specified Speech Commands application id, authorization token and region.
     * Note: The caller needs to ensure that the authorization token is valid. Before the authorization token
     * expires, the caller needs to refresh it by calling this setter with a new valid token.
     * As configuration values are copied when creating a new recognizer, the new token value will not apply to recognizers that have already been created.
     * For recognizers that have been created before, you need to set authorization token of the corresponding recognizer
     * to refresh the token. Otherwise, the recognizers will encounter errors during recognition.
     * @member CustomCommandsConfig.fromAuthorizationToken
     * @function
     * @public
     * @param applicationId Speech Commands application id.
     * @param authorizationToken The authorization token associated with the application.
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {CustomCommandsConfig} A new speech commands config.
     */
    static fromAuthorizationToken(applicationId, authorizationToken, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(applicationId, "applicationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(authorizationToken, "authorizationToken");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(region, "region");
        const customCommandsConfig = new _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_0__.DialogServiceConfigImpl();
        customCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.Conversation_DialogType, _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_0__.DialogServiceConfig.DialogTypes.CustomCommands);
        customCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.Conversation_ApplicationId, applicationId);
        customCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceAuthorization_Token, authorizationToken);
        customCommandsConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Region, region);
        return customCommandsConfig;
    }
    /**
     * Sets the corresponding backend application identifier.
     * @member CustomCommandsConfig.prototype.Conversation_ApplicationId
     * @function
     * @public
     * @param {string} value - The application identifier to set.
     */
    set applicationId(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(value, "value");
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.Conversation_ApplicationId, value);
    }
    /**
     * Gets the corresponding backend application identifier.
     * @member CustomCommandsConfig.prototype.Conversation_ApplicationId
     * @function
     * @public
     * @param {string} value - The application identifier to get.
     */
    get applicationId() {
        return this.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.Conversation_ApplicationId);
    }
}

//# sourceMappingURL=CustomCommandsConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Diagnostics.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Diagnostics.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Diagnostics": () => (/* binding */ Diagnostics)
/* harmony export */ });
/* harmony import */ var _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.browser/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.browser/ConsoleLoggingListener.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Events.js");
//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//


/**
 * Defines diagnostics API for managing console output
 * Added in version 1.21.0
 */
class Diagnostics {
    static SetLoggingLevel(logLevel) {
        this.privListener = new _common_browser_Exports__WEBPACK_IMPORTED_MODULE_0__.ConsoleLoggingListener(logLevel);
        _common_Exports__WEBPACK_IMPORTED_MODULE_1__.Events.instance.attachConsoleListener(this.privListener);
    }
    static StartConsoleOutput() {
        if (!!this.privListener) {
            this.privListener.enableConsoleOutput = true;
        }
    }
    static StopConsoleOutput() {
        if (!!this.privListener) {
            this.privListener.enableConsoleOutput = false;
        }
    }
    static SetLogOutputPath(path) {
        if (typeof window === "undefined") {
            if (!!this.privListener) {
                this.privListener.logPath = path;
            }
        }
        else {
            throw new Error("File system logging not available in browser.");
        }
    }
}
Diagnostics.privListener = undefined;

//# sourceMappingURL=Diagnostics.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConfig.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConfig.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DialogServiceConfig": () => (/* binding */ DialogServiceConfig),
/* harmony export */   "DialogServiceConfigImpl": () => (/* binding */ DialogServiceConfigImpl)
/* harmony export */ });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechConfig.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */


/**
 * Class that defines base configurations for dialog service connector
 * @class DialogServiceConfig
 */
class DialogServiceConfig {
    /**
     * Creates an instance of DialogService config.
     * @constructor
     */
    constructor() {
        return;
    }
    /**
     * Sets the corresponding backend application identifier.
     * @member DialogServiceConfig.prototype.Conversation_ApplicationId
     * @function
     * @public
     * @param {string} value - The application identifier to set.
     */
    // eslint-disable-next-line @typescript-eslint/no-empty-function
    set applicationId(value) { }
    static get DialogTypes() {
        return {
            BotFramework: "bot_framework",
            CustomCommands: "custom_commands"
        };
    }
}
/**
 * Dialog Service configuration.
 * @class DialogServiceConfigImpl
 */
class DialogServiceConfigImpl extends DialogServiceConfig {
    /**
     * Creates an instance of dialogService config.
     */
    constructor() {
        super();
        this.privSpeechConfig = new _Exports__WEBPACK_IMPORTED_MODULE_0__.SpeechConfigImpl();
    }
    /**
     * Provides access to custom properties.
     * @member DialogServiceConfigImpl.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The properties.
     */
    get properties() {
        return this.privSpeechConfig.properties;
    }
    /**
     * Gets the speech recognition language.
     * @member DialogServiceConfigImpl.prototype.speechRecognitionLanguage
     * @function
     * @public
     */
    get speechRecognitionLanguage() {
        return this.privSpeechConfig.speechRecognitionLanguage;
    }
    /**
     * Sets the speech recognition language.
     * @member DialogServiceConfigImpl.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @param {string} value - The language to set.
     */
    set speechRecognitionLanguage(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(value, "value");
        this.privSpeechConfig.speechRecognitionLanguage = value;
    }
    get outputFormat() {
        return this.privSpeechConfig.outputFormat;
    }
    set outputFormat(value) {
        this.privSpeechConfig.outputFormat = value;
    }
    /**
     * Sets a named property as value
     * @member DialogServiceConfigImpl.prototype.setProperty
     * @function
     * @public
     * @param {PropertyId | string} name - The property to set.
     * @param {string} value - The value.
     */
    setProperty(name, value) {
        this.privSpeechConfig.setProperty(name, value);
    }
    /**
     * Sets a named property as value
     * @member DialogServiceConfigImpl.prototype.getProperty
     * @function
     * @public
     * @param {PropertyId | string} name - The property to get.
     * @param {string} def - The default value to return in case the property is not known.
     * @returns {string} The current value, or provided default, of the given property.
     */
    getProperty(name, def) {
        void def;
        return this.privSpeechConfig.getProperty(name);
    }
    /**
     * Sets the proxy configuration.
     * Only relevant in Node.js environments.
     * Added in version 1.4.0.
     * @param proxyHostName The host name of the proxy server, without the protocol scheme (http://)
     * @param proxyPort The port number of the proxy server.
     * @param proxyUserName The user name of the proxy server.
     * @param proxyPassword The password of the proxy server.
     */
    setProxy(proxyHostName, proxyPort, proxyUserName, proxyPassword) {
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_ProxyHostName, proxyHostName);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_ProxyPort, `${proxyPort}`);
        if (proxyUserName) {
            this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_ProxyUserName, proxyUserName);
        }
        if (proxyPassword) {
            this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_ProxyPassword, proxyPassword);
        }
    }
    setServiceProperty(name, value, channel) {
        void channel;
        this.privSpeechConfig.setServiceProperty(name, value);
    }
    /**
     * Dispose of associated resources.
     * @member DialogServiceConfigImpl.prototype.close
     * @function
     * @public
     */
    close() {
        return;
    }
}

//# sourceMappingURL=DialogServiceConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConnector.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConnector.js ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DialogServiceConnector": () => (/* binding */ DialogServiceConnector)
/* harmony export */ });
/* harmony import */ var _common_speech_DialogConnectorFactory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common.speech/DialogConnectorFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogConnectorFactory.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/DialogServiceAdapter.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Recognizer.js");
/* harmony import */ var _PropertyId__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./PropertyId */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};






/**
 * Dialog Service Connector
 * @class DialogServiceConnector
 */
class DialogServiceConnector extends _Exports__WEBPACK_IMPORTED_MODULE_0__.Recognizer {
    /**
     * Initializes an instance of the DialogServiceConnector.
     * @constructor
     * @param {DialogServiceConfig} dialogConfig - Set of properties to configure this recognizer.
     * @param {AudioConfig} audioConfig - An optional audio config associated with the recognizer
     */
    constructor(dialogConfig, audioConfig) {
        const dialogServiceConfigImpl = dialogConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNull(dialogConfig, "dialogConfig");
        super(audioConfig, dialogServiceConfigImpl.properties, new _common_speech_DialogConnectorFactory__WEBPACK_IMPORTED_MODULE_2__.DialogConnectionFactory());
        this.isTurnComplete = true;
        this.privIsDisposed = false;
        this.privProperties = dialogServiceConfigImpl.properties.clone();
        const agentConfig = this.buildAgentConfig();
        this.privReco.agentConfig.set(agentConfig);
    }
    /**
     * Starts a connection to the service.
     * Users can optionally call connect() to manually set up a connection in advance, before starting interactions.
     *
     * Note: On return, the connection might not be ready yet. Please subscribe to the Connected event to
     * be notified when the connection is established.
     * @member DialogServiceConnector.prototype.connect
     * @function
     * @public
     */
    connect(cb, err) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_3__.marshalPromiseToCallbacks)(this.privReco.connect(), cb, err);
    }
    /**
     * Closes the connection the service.
     * Users can optionally call disconnect() to manually shutdown the connection of the associated DialogServiceConnector.
     *
     * If disconnect() is called during a recognition, recognition will fail and cancel with an error.
     */
    disconnect(cb, err) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_3__.marshalPromiseToCallbacks)(this.privReco.disconnect(), cb, err);
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member DialogServiceConnector.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_4__.PropertyId.SpeechServiceAuthorization_Token);
    }
    /**
     * Sets the authorization token used to communicate with the service.
     * @member DialogServiceConnector.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */
    set authorizationToken(token) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(token, "token");
        this.properties.setProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_4__.PropertyId.SpeechServiceAuthorization_Token, token);
    }
    /**
     * The collection of properties and their values defined for this DialogServiceConnector.
     * @member DialogServiceConnector.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this DialogServiceConnector.
     */
    get properties() {
        return this.privProperties;
    }
    /** Gets the template for the activity generated by service from speech.
     * Properties from the template will be stamped on the generated activity.
     * It can be empty
     */
    get speechActivityTemplate() {
        return this.properties.getProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_4__.PropertyId.Conversation_Speech_Activity_Template);
    }
    /** Sets the template for the activity generated by service from speech.
     * Properties from the template will be stamped on the generated activity.
     * It can be null or empty.
     * Note: it has to be a valid Json object.
     */
    set speechActivityTemplate(speechActivityTemplate) {
        this.properties.setProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_4__.PropertyId.Conversation_Speech_Activity_Template, speechActivityTemplate);
    }
    /**
     * Starts recognition and stops after the first utterance is recognized.
     * @member DialogServiceConnector.prototype.listenOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the result when the reco has completed.
     * @param err - Callback invoked in case of an error.
     */
    listenOnceAsync(cb, err) {
        if (this.isTurnComplete) {
            _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privIsDisposed);
            const callbackHolder = () => __awaiter(this, void 0, void 0, function* () {
                yield this.privReco.connect();
                yield this.implRecognizerStop();
                this.isTurnComplete = false;
                const ret = new _common_Exports__WEBPACK_IMPORTED_MODULE_3__.Deferred();
                yield this.privReco.recognize(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.RecognitionMode.Conversation, ret.resolve, ret.reject);
                const e = yield ret.promise;
                yield this.implRecognizerStop();
                return e;
            });
            const retPromise = callbackHolder();
            retPromise.catch(() => {
                // Destroy the recognizer.
                // We've done all we can here.
                // eslint-disable-next-line @typescript-eslint/no-empty-function
                this.dispose(true).catch(() => { });
            });
            (0,_common_Exports__WEBPACK_IMPORTED_MODULE_3__.marshalPromiseToCallbacks)(retPromise.finally(() => {
                this.isTurnComplete = true;
            }), cb, err);
        }
    }
    sendActivityAsync(activity, cb, errCb) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_3__.marshalPromiseToCallbacks)(this.privReco.sendMessage(activity), cb, errCb);
    }
    /**
     * closes all external resources held by an instance of this class.
     * @member DialogServiceConnector.prototype.close
     * @function
     * @public
     */
    close(cb, err) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privIsDisposed);
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_3__.marshalPromiseToCallbacks)(this.dispose(true), cb, err);
    }
    dispose(disposing) {
        const _super = Object.create(null, {
            dispose: { get: () => super.dispose }
        });
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privIsDisposed) {
                return;
            }
            if (disposing) {
                this.privIsDisposed = true;
                yield this.implRecognizerStop();
                yield _super.dispose.call(this, disposing);
            }
        });
    }
    createRecognizerConfig(speechConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.RecognizerConfig(speechConfig, this.privProperties);
    }
    createServiceRecognizer(authentication, connectionFactory, audioConfig, recognizerConfig) {
        const audioSource = audioConfig;
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_6__.DialogServiceAdapter(authentication, connectionFactory, audioSource, recognizerConfig, this);
    }
    buildAgentConfig() {
        const communicationType = this.properties.getProperty("Conversation_Communication_Type", "Default");
        return {
            botInfo: {
                commType: communicationType,
                commandsCulture: undefined,
                connectionId: this.properties.getProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_4__.PropertyId.Conversation_Agent_Connection_Id),
                conversationId: this.properties.getProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_4__.PropertyId.Conversation_Conversation_Id, undefined),
                fromId: this.properties.getProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_4__.PropertyId.Conversation_From_Id, undefined),
                ttsAudioFormat: this.properties.getProperty(_PropertyId__WEBPACK_IMPORTED_MODULE_4__.PropertyId.SpeechServiceConnection_SynthOutputFormat, undefined)
            },
            version: 0.2
        };
    }
}

//# sourceMappingURL=DialogServiceConnector.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Exports.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ActivityReceivedEventArgs": () => (/* reexport safe */ _ActivityReceivedEventArgs__WEBPACK_IMPORTED_MODULE_48__.ActivityReceivedEventArgs),
/* harmony export */   "AudioConfig": () => (/* reexport safe */ _Audio_AudioConfig__WEBPACK_IMPORTED_MODULE_0__.AudioConfig),
/* harmony export */   "AudioFormatTag": () => (/* reexport safe */ _Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__.AudioFormatTag),
/* harmony export */   "AudioInputStream": () => (/* reexport safe */ _Audio_AudioInputStream__WEBPACK_IMPORTED_MODULE_2__.AudioInputStream),
/* harmony export */   "AudioOutputStream": () => (/* reexport safe */ _Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_3__.AudioOutputStream),
/* harmony export */   "AudioStreamFormat": () => (/* reexport safe */ _Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__.AudioStreamFormat),
/* harmony export */   "AutoDetectSourceLanguageConfig": () => (/* reexport safe */ _AutoDetectSourceLanguageConfig__WEBPACK_IMPORTED_MODULE_63__.AutoDetectSourceLanguageConfig),
/* harmony export */   "AutoDetectSourceLanguageResult": () => (/* reexport safe */ _AutoDetectSourceLanguageResult__WEBPACK_IMPORTED_MODULE_64__.AutoDetectSourceLanguageResult),
/* harmony export */   "BaseAudioPlayer": () => (/* reexport safe */ _Audio_BaseAudioPlayer__WEBPACK_IMPORTED_MODULE_52__.BaseAudioPlayer),
/* harmony export */   "BotFrameworkConfig": () => (/* reexport safe */ _BotFrameworkConfig__WEBPACK_IMPORTED_MODULE_45__.BotFrameworkConfig),
/* harmony export */   "CancellationDetails": () => (/* reexport safe */ _CancellationDetails__WEBPACK_IMPORTED_MODULE_38__.CancellationDetails),
/* harmony export */   "CancellationDetailsBase": () => (/* reexport safe */ _CancellationDetailsBase__WEBPACK_IMPORTED_MODULE_37__.CancellationDetailsBase),
/* harmony export */   "CancellationErrorCode": () => (/* reexport safe */ _CancellationErrorCodes__WEBPACK_IMPORTED_MODULE_39__.CancellationErrorCode),
/* harmony export */   "CancellationReason": () => (/* reexport safe */ _CancellationReason__WEBPACK_IMPORTED_MODULE_4__.CancellationReason),
/* harmony export */   "Connection": () => (/* reexport safe */ _Connection__WEBPACK_IMPORTED_MODULE_42__.Connection),
/* harmony export */   "ConnectionEventArgs": () => (/* reexport safe */ _ConnectionEventArgs__WEBPACK_IMPORTED_MODULE_40__.ConnectionEventArgs),
/* harmony export */   "ConnectionMessage": () => (/* reexport safe */ _ConnectionMessage__WEBPACK_IMPORTED_MODULE_54__.ConnectionMessage),
/* harmony export */   "ConnectionMessageEventArgs": () => (/* reexport safe */ _ConnectionMessageEventArgs__WEBPACK_IMPORTED_MODULE_53__.ConnectionMessageEventArgs),
/* harmony export */   "Conversation": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_67__.Conversation),
/* harmony export */   "ConversationExpirationEventArgs": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_68__.ConversationExpirationEventArgs),
/* harmony export */   "ConversationParticipantsChangedEventArgs": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_69__.ConversationParticipantsChangedEventArgs),
/* harmony export */   "ConversationTranscriber": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_74__.ConversationTranscriber),
/* harmony export */   "ConversationTranscriptionCanceledEventArgs": () => (/* reexport safe */ _ConversationTranscriptionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_89__.ConversationTranscriptionCanceledEventArgs),
/* harmony export */   "ConversationTranscriptionEventArgs": () => (/* reexport safe */ _SpeechRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_16__.ConversationTranscriptionEventArgs),
/* harmony export */   "ConversationTranslationCanceledEventArgs": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_70__.ConversationTranslationCanceledEventArgs),
/* harmony export */   "ConversationTranslationEventArgs": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_71__.ConversationTranslationEventArgs),
/* harmony export */   "ConversationTranslationResult": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_72__.ConversationTranslationResult),
/* harmony export */   "ConversationTranslator": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_73__.ConversationTranslator),
/* harmony export */   "CustomCommandsConfig": () => (/* reexport safe */ _CustomCommandsConfig__WEBPACK_IMPORTED_MODULE_46__.CustomCommandsConfig),
/* harmony export */   "Diagnostics": () => (/* reexport safe */ _Diagnostics__WEBPACK_IMPORTED_MODULE_95__.Diagnostics),
/* harmony export */   "DialogServiceConfig": () => (/* reexport safe */ _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_44__.DialogServiceConfig),
/* harmony export */   "DialogServiceConnector": () => (/* reexport safe */ _DialogServiceConnector__WEBPACK_IMPORTED_MODULE_47__.DialogServiceConnector),
/* harmony export */   "IntentRecognitionCanceledEventArgs": () => (/* reexport safe */ _IntentRecognitionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_36__.IntentRecognitionCanceledEventArgs),
/* harmony export */   "IntentRecognitionEventArgs": () => (/* reexport safe */ _IntentRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_11__.IntentRecognitionEventArgs),
/* harmony export */   "IntentRecognitionResult": () => (/* reexport safe */ _IntentRecognitionResult__WEBPACK_IMPORTED_MODULE_14__.IntentRecognitionResult),
/* harmony export */   "IntentRecognizer": () => (/* reexport safe */ _IntentRecognizer__WEBPACK_IMPORTED_MODULE_29__.IntentRecognizer),
/* harmony export */   "KeywordRecognitionModel": () => (/* reexport safe */ _KeywordRecognitionModel__WEBPACK_IMPORTED_MODULE_7__.KeywordRecognitionModel),
/* harmony export */   "LanguageIdMode": () => (/* reexport safe */ _LanguageIdMode__WEBPACK_IMPORTED_MODULE_94__.LanguageIdMode),
/* harmony export */   "LanguageUnderstandingModel": () => (/* reexport safe */ _LanguageUnderstandingModel__WEBPACK_IMPORTED_MODULE_15__.LanguageUnderstandingModel),
/* harmony export */   "LogLevel": () => (/* reexport safe */ _LogLevel__WEBPACK_IMPORTED_MODULE_96__.EventType),
/* harmony export */   "NoMatchDetails": () => (/* reexport safe */ _NoMatchDetails__WEBPACK_IMPORTED_MODULE_34__.NoMatchDetails),
/* harmony export */   "NoMatchReason": () => (/* reexport safe */ _NoMatchReason__WEBPACK_IMPORTED_MODULE_33__.NoMatchReason),
/* harmony export */   "OutputFormat": () => (/* reexport safe */ _OutputFormat__WEBPACK_IMPORTED_MODULE_10__.OutputFormat),
/* harmony export */   "Participant": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_75__.Participant),
/* harmony export */   "ParticipantChangedReason": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_76__.ParticipantChangedReason),
/* harmony export */   "PhraseListGrammar": () => (/* reexport safe */ _PhraseListGrammar__WEBPACK_IMPORTED_MODULE_43__.PhraseListGrammar),
/* harmony export */   "ProfanityOption": () => (/* reexport safe */ _ProfanityOption__WEBPACK_IMPORTED_MODULE_51__.ProfanityOption),
/* harmony export */   "PronunciationAssessmentConfig": () => (/* reexport safe */ _PronunciationAssessmentConfig__WEBPACK_IMPORTED_MODULE_92__.PronunciationAssessmentConfig),
/* harmony export */   "PronunciationAssessmentGradingSystem": () => (/* reexport safe */ _PronunciationAssessmentGradingSystem__WEBPACK_IMPORTED_MODULE_90__.PronunciationAssessmentGradingSystem),
/* harmony export */   "PronunciationAssessmentGranularity": () => (/* reexport safe */ _PronunciationAssessmentGranularity__WEBPACK_IMPORTED_MODULE_91__.PronunciationAssessmentGranularity),
/* harmony export */   "PronunciationAssessmentResult": () => (/* reexport safe */ _PronunciationAssessmentResult__WEBPACK_IMPORTED_MODULE_93__.PronunciationAssessmentResult),
/* harmony export */   "PropertyCollection": () => (/* reexport safe */ _PropertyCollection__WEBPACK_IMPORTED_MODULE_25__.PropertyCollection),
/* harmony export */   "PropertyId": () => (/* reexport safe */ _PropertyId__WEBPACK_IMPORTED_MODULE_26__.PropertyId),
/* harmony export */   "PullAudioInputStream": () => (/* reexport safe */ _Audio_AudioInputStream__WEBPACK_IMPORTED_MODULE_2__.PullAudioInputStream),
/* harmony export */   "PullAudioInputStreamCallback": () => (/* reexport safe */ _Audio_PullAudioInputStreamCallback__WEBPACK_IMPORTED_MODULE_5__.PullAudioInputStreamCallback),
/* harmony export */   "PullAudioOutputStream": () => (/* reexport safe */ _Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_3__.PullAudioOutputStream),
/* harmony export */   "PushAudioInputStream": () => (/* reexport safe */ _Audio_AudioInputStream__WEBPACK_IMPORTED_MODULE_2__.PushAudioInputStream),
/* harmony export */   "PushAudioOutputStream": () => (/* reexport safe */ _Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_3__.PushAudioOutputStream),
/* harmony export */   "PushAudioOutputStreamCallback": () => (/* reexport safe */ _Audio_PushAudioOutputStreamCallback__WEBPACK_IMPORTED_MODULE_6__.PushAudioOutputStreamCallback),
/* harmony export */   "RecognitionEventArgs": () => (/* reexport safe */ _RecognitionEventArgs__WEBPACK_IMPORTED_MODULE_9__.RecognitionEventArgs),
/* harmony export */   "RecognitionResult": () => (/* reexport safe */ _RecognitionResult__WEBPACK_IMPORTED_MODULE_12__.RecognitionResult),
/* harmony export */   "Recognizer": () => (/* reexport safe */ _Recognizer__WEBPACK_IMPORTED_MODULE_27__.Recognizer),
/* harmony export */   "ResultReason": () => (/* reexport safe */ _ResultReason__WEBPACK_IMPORTED_MODULE_22__.ResultReason),
/* harmony export */   "ServiceEventArgs": () => (/* reexport safe */ _ServiceEventArgs__WEBPACK_IMPORTED_MODULE_41__.ServiceEventArgs),
/* harmony export */   "ServicePropertyChannel": () => (/* reexport safe */ _ServicePropertyChannel__WEBPACK_IMPORTED_MODULE_50__.ServicePropertyChannel),
/* harmony export */   "SessionEventArgs": () => (/* reexport safe */ _SessionEventArgs__WEBPACK_IMPORTED_MODULE_8__.SessionEventArgs),
/* harmony export */   "SourceLanguageConfig": () => (/* reexport safe */ _SourceLanguageConfig__WEBPACK_IMPORTED_MODULE_65__.SourceLanguageConfig),
/* harmony export */   "SpeakerAudioDestination": () => (/* reexport safe */ _Audio_SpeakerAudioDestination__WEBPACK_IMPORTED_MODULE_88__.SpeakerAudioDestination),
/* harmony export */   "SpeakerIdentificationModel": () => (/* reexport safe */ _SpeakerIdentificationModel__WEBPACK_IMPORTED_MODULE_61__.SpeakerIdentificationModel),
/* harmony export */   "SpeakerRecognitionCancellationDetails": () => (/* reexport safe */ _SpeakerRecognitionResult__WEBPACK_IMPORTED_MODULE_66__.SpeakerRecognitionCancellationDetails),
/* harmony export */   "SpeakerRecognitionResult": () => (/* reexport safe */ _SpeakerRecognitionResult__WEBPACK_IMPORTED_MODULE_66__.SpeakerRecognitionResult),
/* harmony export */   "SpeakerRecognitionResultType": () => (/* reexport safe */ _SpeakerRecognitionResult__WEBPACK_IMPORTED_MODULE_66__.SpeakerRecognitionResultType),
/* harmony export */   "SpeakerRecognizer": () => (/* reexport safe */ _SpeakerRecognizer__WEBPACK_IMPORTED_MODULE_60__.SpeakerRecognizer),
/* harmony export */   "SpeakerVerificationModel": () => (/* reexport safe */ _SpeakerVerificationModel__WEBPACK_IMPORTED_MODULE_62__.SpeakerVerificationModel),
/* harmony export */   "SpeechConfig": () => (/* reexport safe */ _SpeechConfig__WEBPACK_IMPORTED_MODULE_23__.SpeechConfig),
/* harmony export */   "SpeechConfigImpl": () => (/* reexport safe */ _SpeechConfig__WEBPACK_IMPORTED_MODULE_23__.SpeechConfigImpl),
/* harmony export */   "SpeechRecognitionCanceledEventArgs": () => (/* reexport safe */ _SpeechRecognitionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_17__.SpeechRecognitionCanceledEventArgs),
/* harmony export */   "SpeechRecognitionEventArgs": () => (/* reexport safe */ _SpeechRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_16__.SpeechRecognitionEventArgs),
/* harmony export */   "SpeechRecognitionResult": () => (/* reexport safe */ _SpeechRecognitionResult__WEBPACK_IMPORTED_MODULE_13__.SpeechRecognitionResult),
/* harmony export */   "SpeechRecognizer": () => (/* reexport safe */ _SpeechRecognizer__WEBPACK_IMPORTED_MODULE_28__.SpeechRecognizer),
/* harmony export */   "SpeechSynthesisBookmarkEventArgs": () => (/* reexport safe */ _SpeechSynthesisBookmarkEventArgs__WEBPACK_IMPORTED_MODULE_83__.SpeechSynthesisBookmarkEventArgs),
/* harmony export */   "SpeechSynthesisBoundaryType": () => (/* reexport safe */ _SpeechSynthesisBoundaryType__WEBPACK_IMPORTED_MODULE_85__.SpeechSynthesisBoundaryType),
/* harmony export */   "SpeechSynthesisEventArgs": () => (/* reexport safe */ _SpeechSynthesisEventArgs__WEBPACK_IMPORTED_MODULE_81__.SpeechSynthesisEventArgs),
/* harmony export */   "SpeechSynthesisOutputFormat": () => (/* reexport safe */ _SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_77__.SpeechSynthesisOutputFormat),
/* harmony export */   "SpeechSynthesisResult": () => (/* reexport safe */ _SpeechSynthesisResult__WEBPACK_IMPORTED_MODULE_80__.SpeechSynthesisResult),
/* harmony export */   "SpeechSynthesisVisemeEventArgs": () => (/* reexport safe */ _SpeechSynthesisVisemeEventArgs__WEBPACK_IMPORTED_MODULE_84__.SpeechSynthesisVisemeEventArgs),
/* harmony export */   "SpeechSynthesisWordBoundaryEventArgs": () => (/* reexport safe */ _SpeechSynthesisWordBoundaryEventArgs__WEBPACK_IMPORTED_MODULE_82__.SpeechSynthesisWordBoundaryEventArgs),
/* harmony export */   "SpeechSynthesizer": () => (/* reexport safe */ _SpeechSynthesizer__WEBPACK_IMPORTED_MODULE_78__.SpeechSynthesizer),
/* harmony export */   "SpeechTranslationConfig": () => (/* reexport safe */ _SpeechTranslationConfig__WEBPACK_IMPORTED_MODULE_24__.SpeechTranslationConfig),
/* harmony export */   "SpeechTranslationConfigImpl": () => (/* reexport safe */ _SpeechTranslationConfig__WEBPACK_IMPORTED_MODULE_24__.SpeechTranslationConfigImpl),
/* harmony export */   "SynthesisResult": () => (/* reexport safe */ _SynthesisResult__WEBPACK_IMPORTED_MODULE_79__.SynthesisResult),
/* harmony export */   "SynthesisVoicesResult": () => (/* reexport safe */ _SynthesisVoicesResult__WEBPACK_IMPORTED_MODULE_86__.SynthesisVoicesResult),
/* harmony export */   "TranslationRecognitionCanceledEventArgs": () => (/* reexport safe */ _TranslationRecognitionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_35__.TranslationRecognitionCanceledEventArgs),
/* harmony export */   "TranslationRecognitionEventArgs": () => (/* reexport safe */ _TranslationRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_18__.TranslationRecognitionEventArgs),
/* harmony export */   "TranslationRecognitionResult": () => (/* reexport safe */ _TranslationRecognitionResult__WEBPACK_IMPORTED_MODULE_20__.TranslationRecognitionResult),
/* harmony export */   "TranslationRecognizer": () => (/* reexport safe */ _TranslationRecognizer__WEBPACK_IMPORTED_MODULE_31__.TranslationRecognizer),
/* harmony export */   "TranslationSynthesisEventArgs": () => (/* reexport safe */ _TranslationSynthesisEventArgs__WEBPACK_IMPORTED_MODULE_19__.TranslationSynthesisEventArgs),
/* harmony export */   "TranslationSynthesisResult": () => (/* reexport safe */ _TranslationSynthesisResult__WEBPACK_IMPORTED_MODULE_21__.TranslationSynthesisResult),
/* harmony export */   "Translations": () => (/* reexport safe */ _Translations__WEBPACK_IMPORTED_MODULE_32__.Translations),
/* harmony export */   "TurnStatusReceivedEventArgs": () => (/* reexport safe */ _TurnStatusReceivedEventArgs__WEBPACK_IMPORTED_MODULE_49__.TurnStatusReceivedEventArgs),
/* harmony export */   "User": () => (/* reexport safe */ _Transcription_Exports__WEBPACK_IMPORTED_MODULE_75__.User),
/* harmony export */   "VoiceInfo": () => (/* reexport safe */ _VoiceInfo__WEBPACK_IMPORTED_MODULE_87__.VoiceInfo),
/* harmony export */   "VoiceProfile": () => (/* reexport safe */ _VoiceProfile__WEBPACK_IMPORTED_MODULE_55__.VoiceProfile),
/* harmony export */   "VoiceProfileCancellationDetails": () => (/* reexport safe */ _VoiceProfileResult__WEBPACK_IMPORTED_MODULE_57__.VoiceProfileCancellationDetails),
/* harmony export */   "VoiceProfileClient": () => (/* reexport safe */ _VoiceProfileClient__WEBPACK_IMPORTED_MODULE_59__.VoiceProfileClient),
/* harmony export */   "VoiceProfileEnrollmentCancellationDetails": () => (/* reexport safe */ _VoiceProfileEnrollmentResult__WEBPACK_IMPORTED_MODULE_56__.VoiceProfileEnrollmentCancellationDetails),
/* harmony export */   "VoiceProfileEnrollmentResult": () => (/* reexport safe */ _VoiceProfileEnrollmentResult__WEBPACK_IMPORTED_MODULE_56__.VoiceProfileEnrollmentResult),
/* harmony export */   "VoiceProfilePhraseResult": () => (/* reexport safe */ _VoiceProfilePhraseResult__WEBPACK_IMPORTED_MODULE_58__.VoiceProfilePhraseResult),
/* harmony export */   "VoiceProfileResult": () => (/* reexport safe */ _VoiceProfileResult__WEBPACK_IMPORTED_MODULE_57__.VoiceProfileResult),
/* harmony export */   "VoiceProfileType": () => (/* reexport safe */ _VoiceProfileType__WEBPACK_IMPORTED_MODULE_30__.VoiceProfileType)
/* harmony export */ });
/* harmony import */ var _Audio_AudioConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Audio/AudioConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioConfig.js");
/* harmony import */ var _Audio_AudioStreamFormat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Audio/AudioStreamFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioStreamFormat.js");
/* harmony import */ var _Audio_AudioInputStream__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Audio/AudioInputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioInputStream.js");
/* harmony import */ var _Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Audio/AudioOutputStream */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js");
/* harmony import */ var _CancellationReason__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./CancellationReason */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js");
/* harmony import */ var _Audio_PullAudioInputStreamCallback__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Audio/PullAudioInputStreamCallback */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/PullAudioInputStreamCallback.js");
/* harmony import */ var _Audio_PushAudioOutputStreamCallback__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Audio/PushAudioOutputStreamCallback */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/PushAudioOutputStreamCallback.js");
/* harmony import */ var _KeywordRecognitionModel__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./KeywordRecognitionModel */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/KeywordRecognitionModel.js");
/* harmony import */ var _SessionEventArgs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./SessionEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js");
/* harmony import */ var _RecognitionEventArgs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./RecognitionEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionEventArgs.js");
/* harmony import */ var _OutputFormat__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./OutputFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/OutputFormat.js");
/* harmony import */ var _IntentRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./IntentRecognitionEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionEventArgs.js");
/* harmony import */ var _RecognitionResult__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./RecognitionResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionResult.js");
/* harmony import */ var _SpeechRecognitionResult__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./SpeechRecognitionResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionResult.js");
/* harmony import */ var _IntentRecognitionResult__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./IntentRecognitionResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionResult.js");
/* harmony import */ var _LanguageUnderstandingModel__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./LanguageUnderstandingModel */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LanguageUnderstandingModel.js");
/* harmony import */ var _SpeechRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./SpeechRecognitionEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionEventArgs.js");
/* harmony import */ var _SpeechRecognitionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./SpeechRecognitionCanceledEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionCanceledEventArgs.js");
/* harmony import */ var _TranslationRecognitionEventArgs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./TranslationRecognitionEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionEventArgs.js");
/* harmony import */ var _TranslationSynthesisEventArgs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./TranslationSynthesisEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisEventArgs.js");
/* harmony import */ var _TranslationRecognitionResult__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./TranslationRecognitionResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionResult.js");
/* harmony import */ var _TranslationSynthesisResult__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./TranslationSynthesisResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisResult.js");
/* harmony import */ var _ResultReason__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./ResultReason */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
/* harmony import */ var _SpeechConfig__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./SpeechConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechConfig.js");
/* harmony import */ var _SpeechTranslationConfig__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./SpeechTranslationConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechTranslationConfig.js");
/* harmony import */ var _PropertyCollection__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./PropertyCollection */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _PropertyId__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./PropertyId */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _Recognizer__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./Recognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Recognizer.js");
/* harmony import */ var _SpeechRecognizer__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./SpeechRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognizer.js");
/* harmony import */ var _IntentRecognizer__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./IntentRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognizer.js");
/* harmony import */ var _VoiceProfileType__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./VoiceProfileType */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileType.js");
/* harmony import */ var _TranslationRecognizer__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./TranslationRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognizer.js");
/* harmony import */ var _Translations__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./Translations */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Translations.js");
/* harmony import */ var _NoMatchReason__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./NoMatchReason */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchReason.js");
/* harmony import */ var _NoMatchDetails__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./NoMatchDetails */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchDetails.js");
/* harmony import */ var _TranslationRecognitionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./TranslationRecognitionCanceledEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionCanceledEventArgs.js");
/* harmony import */ var _IntentRecognitionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./IntentRecognitionCanceledEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionCanceledEventArgs.js");
/* harmony import */ var _CancellationDetailsBase__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./CancellationDetailsBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetailsBase.js");
/* harmony import */ var _CancellationDetails__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./CancellationDetails */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetails.js");
/* harmony import */ var _CancellationErrorCodes__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./CancellationErrorCodes */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony import */ var _ConnectionEventArgs__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./ConnectionEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionEventArgs.js");
/* harmony import */ var _ServiceEventArgs__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./ServiceEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ServiceEventArgs.js");
/* harmony import */ var _Connection__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./Connection */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Connection.js");
/* harmony import */ var _PhraseListGrammar__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./PhraseListGrammar */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PhraseListGrammar.js");
/* harmony import */ var _DialogServiceConfig__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./DialogServiceConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConfig.js");
/* harmony import */ var _BotFrameworkConfig__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./BotFrameworkConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/BotFrameworkConfig.js");
/* harmony import */ var _CustomCommandsConfig__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./CustomCommandsConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CustomCommandsConfig.js");
/* harmony import */ var _DialogServiceConnector__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./DialogServiceConnector */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/DialogServiceConnector.js");
/* harmony import */ var _ActivityReceivedEventArgs__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./ActivityReceivedEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ActivityReceivedEventArgs.js");
/* harmony import */ var _TurnStatusReceivedEventArgs__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./TurnStatusReceivedEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TurnStatusReceivedEventArgs.js");
/* harmony import */ var _ServicePropertyChannel__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./ServicePropertyChannel */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ServicePropertyChannel.js");
/* harmony import */ var _ProfanityOption__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./ProfanityOption */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ProfanityOption.js");
/* harmony import */ var _Audio_BaseAudioPlayer__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./Audio/BaseAudioPlayer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/BaseAudioPlayer.js");
/* harmony import */ var _ConnectionMessageEventArgs__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./ConnectionMessageEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionMessageEventArgs.js");
/* harmony import */ var _ConnectionMessage__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./ConnectionMessage */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConnectionMessage.js");
/* harmony import */ var _VoiceProfile__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./VoiceProfile */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfile.js");
/* harmony import */ var _VoiceProfileEnrollmentResult__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ./VoiceProfileEnrollmentResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileEnrollmentResult.js");
/* harmony import */ var _VoiceProfileResult__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ./VoiceProfileResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileResult.js");
/* harmony import */ var _VoiceProfilePhraseResult__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ./VoiceProfilePhraseResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfilePhraseResult.js");
/* harmony import */ var _VoiceProfileClient__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ./VoiceProfileClient */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileClient.js");
/* harmony import */ var _SpeakerRecognizer__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ./SpeakerRecognizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerRecognizer.js");
/* harmony import */ var _SpeakerIdentificationModel__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ./SpeakerIdentificationModel */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerIdentificationModel.js");
/* harmony import */ var _SpeakerVerificationModel__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ./SpeakerVerificationModel */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerVerificationModel.js");
/* harmony import */ var _AutoDetectSourceLanguageConfig__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ./AutoDetectSourceLanguageConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/AutoDetectSourceLanguageConfig.js");
/* harmony import */ var _AutoDetectSourceLanguageResult__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! ./AutoDetectSourceLanguageResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/AutoDetectSourceLanguageResult.js");
/* harmony import */ var _SourceLanguageConfig__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ./SourceLanguageConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SourceLanguageConfig.js");
/* harmony import */ var _SpeakerRecognitionResult__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ./SpeakerRecognitionResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerRecognitionResult.js");
/* harmony import */ var _Transcription_Exports__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ./Transcription/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/Conversation.js");
/* harmony import */ var _Transcription_Exports__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ./Transcription/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationExpirationEventArgs.js");
/* harmony import */ var _Transcription_Exports__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! ./Transcription/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationParticipantsChangedEventArgs.js");
/* harmony import */ var _Transcription_Exports__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ./Transcription/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationCanceledEventArgs.js");
/* harmony import */ var _Transcription_Exports__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! ./Transcription/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationEventArgs.js");
/* harmony import */ var _Transcription_Exports__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! ./Transcription/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationResult.js");
/* harmony import */ var _Transcription_Exports__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! ./Transcription/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslator.js");
/* harmony import */ var _Transcription_Exports__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! ./Transcription/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranscriber.js");
/* harmony import */ var _Transcription_Exports__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! ./Transcription/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/IParticipant.js");
/* harmony import */ var _Transcription_Exports__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! ./Transcription/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ParticipantChangedReason.js");
/* harmony import */ var _SpeechSynthesisOutputFormat__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! ./SpeechSynthesisOutputFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisOutputFormat.js");
/* harmony import */ var _SpeechSynthesizer__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! ./SpeechSynthesizer */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesizer.js");
/* harmony import */ var _SynthesisResult__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! ./SynthesisResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SynthesisResult.js");
/* harmony import */ var _SpeechSynthesisResult__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! ./SpeechSynthesisResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisResult.js");
/* harmony import */ var _SpeechSynthesisEventArgs__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! ./SpeechSynthesisEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisEventArgs.js");
/* harmony import */ var _SpeechSynthesisWordBoundaryEventArgs__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(/*! ./SpeechSynthesisWordBoundaryEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisWordBoundaryEventArgs.js");
/* harmony import */ var _SpeechSynthesisBookmarkEventArgs__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(/*! ./SpeechSynthesisBookmarkEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisBookmarkEventArgs.js");
/* harmony import */ var _SpeechSynthesisVisemeEventArgs__WEBPACK_IMPORTED_MODULE_84__ = __webpack_require__(/*! ./SpeechSynthesisVisemeEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisVisemeEventArgs.js");
/* harmony import */ var _SpeechSynthesisBoundaryType__WEBPACK_IMPORTED_MODULE_85__ = __webpack_require__(/*! ./SpeechSynthesisBoundaryType */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisBoundaryType.js");
/* harmony import */ var _SynthesisVoicesResult__WEBPACK_IMPORTED_MODULE_86__ = __webpack_require__(/*! ./SynthesisVoicesResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SynthesisVoicesResult.js");
/* harmony import */ var _VoiceInfo__WEBPACK_IMPORTED_MODULE_87__ = __webpack_require__(/*! ./VoiceInfo */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceInfo.js");
/* harmony import */ var _Audio_SpeakerAudioDestination__WEBPACK_IMPORTED_MODULE_88__ = __webpack_require__(/*! ./Audio/SpeakerAudioDestination */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/SpeakerAudioDestination.js");
/* harmony import */ var _ConversationTranscriptionCanceledEventArgs__WEBPACK_IMPORTED_MODULE_89__ = __webpack_require__(/*! ./ConversationTranscriptionCanceledEventArgs */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ConversationTranscriptionCanceledEventArgs.js");
/* harmony import */ var _PronunciationAssessmentGradingSystem__WEBPACK_IMPORTED_MODULE_90__ = __webpack_require__(/*! ./PronunciationAssessmentGradingSystem */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentGradingSystem.js");
/* harmony import */ var _PronunciationAssessmentGranularity__WEBPACK_IMPORTED_MODULE_91__ = __webpack_require__(/*! ./PronunciationAssessmentGranularity */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentGranularity.js");
/* harmony import */ var _PronunciationAssessmentConfig__WEBPACK_IMPORTED_MODULE_92__ = __webpack_require__(/*! ./PronunciationAssessmentConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentConfig.js");
/* harmony import */ var _PronunciationAssessmentResult__WEBPACK_IMPORTED_MODULE_93__ = __webpack_require__(/*! ./PronunciationAssessmentResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentResult.js");
/* harmony import */ var _LanguageIdMode__WEBPACK_IMPORTED_MODULE_94__ = __webpack_require__(/*! ./LanguageIdMode */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LanguageIdMode.js");
/* harmony import */ var _Diagnostics__WEBPACK_IMPORTED_MODULE_95__ = __webpack_require__(/*! ./Diagnostics */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Diagnostics.js");
/* harmony import */ var _LogLevel__WEBPACK_IMPORTED_MODULE_96__ = __webpack_require__(/*! ./LogLevel */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/PlatformEvent.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

























































































//# sourceMappingURL=Exports.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionCanceledEventArgs.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionCanceledEventArgs.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IntentRecognitionCanceledEventArgs": () => (/* binding */ IntentRecognitionCanceledEventArgs)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionEventArgs.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Define payload of intent recognition canceled result events.
 * @class IntentRecognitionCanceledEventArgs
 */
class IntentRecognitionCanceledEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__.IntentRecognitionEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {CancellationReason} result - The result of the intent recognition.
     * @param {string} offset - The offset.
     * @param {IntentRecognitionResult} sessionId - The session id.
     */
    constructor(reason, errorDetails, errorCode, result, offset, sessionId) {
        super(result, offset, sessionId);
        this.privReason = reason;
        this.privErrorDetails = errorDetails;
        this.privErrorCode = errorCode;
    }
    /**
     * The reason the recognition was canceled.
     * @member IntentRecognitionCanceledEventArgs.prototype.reason
     * @function
     * @public
     * @returns {CancellationReason} Specifies the reason canceled.
     */
    get reason() {
        return this.privReason;
    }
    /**
     * The error code in case of an unsuccessful recognition.
     * Added in version 1.1.0.
     * @return An error code that represents the error reason.
     */
    get errorCode() {
        return this.privErrorCode;
    }
    /**
     * In case of an unsuccessful recognition, provides details of the occurred error.
     * @member IntentRecognitionCanceledEventArgs.prototype.errorDetails
     * @function
     * @public
     * @returns {string} A String that represents the error details.
     */
    get errorDetails() {
        return this.privErrorDetails;
    }
}

//# sourceMappingURL=IntentRecognitionCanceledEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionEventArgs.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionEventArgs.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IntentRecognitionEventArgs": () => (/* binding */ IntentRecognitionEventArgs)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionEventArgs.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Intent recognition result event arguments.
 * @class
 */
class IntentRecognitionEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__.RecognitionEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param result - The result of the intent recognition.
     * @param offset - The offset.
     * @param sessionId - The session id.
     */
    constructor(result, offset, sessionId) {
        super(offset, sessionId);
        this.privResult = result;
    }
    /**
     * Represents the intent recognition result.
     * @member IntentRecognitionEventArgs.prototype.result
     * @function
     * @public
     * @returns {IntentRecognitionResult} Represents the intent recognition result.
     */
    get result() {
        return this.privResult;
    }
}

//# sourceMappingURL=IntentRecognitionEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionResult.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognitionResult.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IntentRecognitionResult": () => (/* binding */ IntentRecognitionResult)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionResult.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Intent recognition result.
 * @class
 */
class IntentRecognitionResult extends _Exports__WEBPACK_IMPORTED_MODULE_0__.SpeechRecognitionResult {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param intentId - The intent id.
     * @param resultId - The result id.
     * @param reason - The reason.
     * @param text - The recognized text.
     * @param duration - The duration.
     * @param offset - The offset into the stream.
     * @param language - Primary Language detected, if provided.
     * @param languageDetectionConfidence - Primary Language confidence ("Unknown," "Low," "Medium," "High"...), if provided.
     * @param errorDetails - Error details, if provided.
     * @param json - Additional Json, if provided.
     * @param properties - Additional properties, if provided.
     */
    constructor(intentId, resultId, reason, text, duration, offset, language, languageDetectionConfidence, errorDetails, json, properties) {
        super(resultId, reason, text, duration, offset, language, languageDetectionConfidence, undefined, errorDetails, json, properties);
        this.privIntentId = intentId;
    }
    /**
     * A String that represents the intent identifier being recognized.
     * @member IntentRecognitionResult.prototype.intentId
     * @function
     * @public
     * @returns {string} A String that represents the intent identifier being recognized.
     */
    get intentId() {
        return this.privIntentId;
    }
}

//# sourceMappingURL=IntentRecognitionResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognizer.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/IntentRecognizer.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IntentRecognizer": () => (/* binding */ IntentRecognizer)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentConnectionFactory.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/AddedLmIntent.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/IntentServiceRecognizer.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Recognizer.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




/**
 * Intent recognizer.
 * @class
 */
class IntentRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_0__.Recognizer {
    /**
     * Initializes an instance of the IntentRecognizer.
     * @constructor
     * @param {SpeechConfig} speechConfig - The set of configuration properties.
     * @param {AudioConfig} audioConfig - An optional audio input config associated with the recognizer
     */
    constructor(speechConfig, audioConfig) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(speechConfig, "speechConfig");
        const configImpl = speechConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(configImpl, "speechConfig");
        super(audioConfig, configImpl.properties, new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_2__.IntentConnectionFactory());
        this.privAddedIntents = [];
        this.privAddedLmIntents = {};
        this.privDisposedIntentRecognizer = false;
        this.privProperties = configImpl.properties;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_RecoLanguage), _Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_RecoLanguage]);
    }
    /**
     * Gets the spoken language of recognition.
     * @member IntentRecognizer.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @returns {string} the spoken language of recognition.
     */
    get speechRecognitionLanguage() {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_RecoLanguage);
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member IntentRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceAuthorization_Token);
    }
    /**
     * Gets/Sets the authorization token used to communicate with the service.
     * Note: Please use a token derived from your LanguageUnderstanding subscription key for the Intent recognizer.
     * @member IntentRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @param {string} value - Authorization token.
     */
    set authorizationToken(value) {
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceAuthorization_Token, value);
    }
    /**
     * The collection of properties and their values defined for this IntentRecognizer.
     * @member IntentRecognizer.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their
     * values defined for this IntentRecognizer.
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * Starts intent recognition, and stops after the first utterance is recognized.
     * The task returns the recognition text and intent as result.
     * Note: RecognizeOnceAsync() returns when the first utterance has been recognized,
     * so it is suitable only for single shot recognition like command or query.
     * For long-running recognition, use StartContinuousRecognitionAsync() instead.
     * @member IntentRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the recognition has finished with an IntentRecognitionResult.
     * @param err - Callback invoked in case of an error.
     */
    recognizeOnceAsync(cb, err) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer);
        if (Object.keys(this.privAddedLmIntents).length !== 0 || undefined !== this.privUmbrellaIntent) {
            const context = this.buildSpeechContext();
            this.privReco.speechContext.setSection("intent", context.Intent);
            this.privReco.dynamicGrammar.addReferenceGrammar(context.ReferenceGrammars);
            const intentReco = this.privReco;
            intentReco.setIntents(this.privAddedLmIntents, this.privUmbrellaIntent);
        }
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_4__.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.RecognitionMode.Interactive), cb, err);
    }
    /**
     * Starts speech recognition, until stopContinuousRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * @member IntentRecognizer.prototype.startContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */
    startContinuousRecognitionAsync(cb, err) {
        if (Object.keys(this.privAddedLmIntents).length !== 0 || undefined !== this.privUmbrellaIntent) {
            const context = this.buildSpeechContext();
            this.privReco.speechContext.setSection("intent", context.Intent);
            this.privReco.dynamicGrammar.addReferenceGrammar(context.ReferenceGrammars);
            const intentReco = this.privReco;
            intentReco.setIntents(this.privAddedLmIntents, this.privUmbrellaIntent);
        }
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_4__.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.RecognitionMode.Conversation), cb, err);
    }
    /**
     * Stops continuous intent recognition.
     * @member IntentRecognizer.prototype.stopContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */
    stopContinuousRecognitionAsync(cb, err) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_4__.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(), cb, err);
    }
    /**
     * Starts speech recognition with keyword spotting, until stopKeywordRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * Note: Key word spotting functionality is only available on the Speech Devices SDK.
     * This functionality is currently not included in the SDK itself.
     * @member IntentRecognizer.prototype.startKeywordRecognitionAsync
     * @function
     * @public
     * @param {KeywordRecognitionModel} model - The keyword recognition model that specifies the keyword to be recognized.
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */
    startKeywordRecognitionAsync(model, cb, err) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNull(model, "model");
        if (!!err) {
            err("Not yet implemented.");
        }
    }
    /**
     * Stops continuous speech recognition.
     * Note: Key word spotting functionality is only available on the Speech Devices SDK.
     * This functionality is currently not included in the SDK itself.
     * @member IntentRecognizer.prototype.stopKeywordRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */
    stopKeywordRecognitionAsync(cb, err) {
        if (!!cb) {
            try {
                cb();
            }
            catch (e) {
                if (!!err) {
                    err(e);
                }
            }
        }
    }
    /**
     * Adds a phrase that should be recognized as intent.
     * @member IntentRecognizer.prototype.addIntent
     * @function
     * @public
     * @param {string} intentId - A String that represents the identifier of the intent to be recognized.
     * @param {string} phrase - A String that specifies the phrase representing the intent.
     */
    addIntent(simplePhrase, intentId) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer);
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(intentId, "intentId");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(simplePhrase, "simplePhrase");
        this.privAddedIntents.push([intentId, simplePhrase]);
    }
    /**
     * Adds an intent from Language Understanding service for recognition.
     * @member IntentRecognizer.prototype.addIntentWithLanguageModel
     * @function
     * @public
     * @param {string} intentId - A String that represents the identifier of the intent
     * to be recognized. Ignored if intentName is empty.
     * @param {string} model - The intent model from Language Understanding service.
     * @param {string} intentName - The intent name defined in the intent model. If it
     * is empty, all intent names defined in the model will be added.
     */
    addIntentWithLanguageModel(intentId, model, intentName) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer);
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(intentId, "intentId");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNull(model, "model");
        const modelImpl = model;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(modelImpl.appId, "model.appId");
        this.privAddedLmIntents[intentId] = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_6__.AddedLmIntent(modelImpl, intentName);
    }
    /**
     * @summary Adds all intents from the specified Language Understanding Model.
     * @member IntentRecognizer.prototype.addAllIntents
     * @function
     * @public
     * @function
     * @public
     * @param {LanguageUnderstandingModel} model - The language understanding model containing the intents.
     * @param {string} intentId - A custom id String to be returned in the IntentRecognitionResult's getIntentId() method.
     */
    addAllIntents(model, intentId) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNull(model, "model");
        const modelImpl = model;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(modelImpl.appId, "model.appId");
        this.privUmbrellaIntent = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_6__.AddedLmIntent(modelImpl, intentId);
    }
    /**
     * closes all external resources held by an instance of this class.
     * @member IntentRecognizer.prototype.close
     * @function
     * @public
     */
    close(cb, errorCb) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer);
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_4__.marshalPromiseToCallbacks)(this.dispose(true), cb, errorCb);
    }
    createRecognizerConfig(speechConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.RecognizerConfig(speechConfig, this.privProperties);
    }
    createServiceRecognizer(authentication, connectionFactory, audioConfig, recognizerConfig) {
        const audioImpl = audioConfig;
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_7__.IntentServiceRecognizer(authentication, connectionFactory, audioImpl, recognizerConfig, this);
    }
    dispose(disposing) {
        const _super = Object.create(null, {
            dispose: { get: () => super.dispose }
        });
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privDisposedIntentRecognizer) {
                return;
            }
            if (disposing) {
                this.privDisposedIntentRecognizer = true;
                yield _super.dispose.call(this, disposing);
            }
        });
    }
    buildSpeechContext() {
        let appId;
        let region;
        let subscriptionKey;
        const refGrammers = [];
        if (undefined !== this.privUmbrellaIntent) {
            appId = this.privUmbrellaIntent.modelImpl.appId;
            region = this.privUmbrellaIntent.modelImpl.region;
            subscriptionKey = this.privUmbrellaIntent.modelImpl.subscriptionKey;
        }
        // Build the reference grammer array.
        for (const intentId of Object.keys(this.privAddedLmIntents)) {
            const addedLmIntent = this.privAddedLmIntents[intentId];
            // validate all the same model, region, and key...
            if (appId === undefined) {
                appId = addedLmIntent.modelImpl.appId;
            }
            else {
                if (appId !== addedLmIntent.modelImpl.appId) {
                    throw new Error("Intents must all be from the same LUIS model");
                }
            }
            if (region === undefined) {
                region = addedLmIntent.modelImpl.region;
            }
            else {
                if (region !== addedLmIntent.modelImpl.region) {
                    throw new Error("Intents must all be from the same LUIS model in a single region");
                }
            }
            if (subscriptionKey === undefined) {
                subscriptionKey = addedLmIntent.modelImpl.subscriptionKey;
            }
            else {
                if (subscriptionKey !== addedLmIntent.modelImpl.subscriptionKey) {
                    throw new Error("Intents must all use the same subscription key");
                }
            }
            const grammer = "luis/" + appId + "-PRODUCTION#" + intentId;
            refGrammers.push(grammer);
        }
        return {
            Intent: {
                id: appId,
                key: (subscriptionKey === undefined) ? this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_Key]) : subscriptionKey,
                provider: "LUIS",
            },
            ReferenceGrammars: (undefined === this.privUmbrellaIntent) ? refGrammers : ["luis/" + appId + "-PRODUCTION"],
        };
    }
}

//# sourceMappingURL=IntentRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/KeywordRecognitionModel.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/KeywordRecognitionModel.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "KeywordRecognitionModel": () => (/* binding */ KeywordRecognitionModel)
/* harmony export */ });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Represents a keyword recognition model for recognizing when
 * the user says a keyword to initiate further speech recognition.
 * @class KeywordRecognitionModel
 */
class KeywordRecognitionModel {
    /**
     * Create and initializes a new instance.
     * @constructor
     */
    constructor() {
        this.privDisposed = false;
        return;
    }
    /**
     * Creates a keyword recognition model using the specified filename.
     * @member KeywordRecognitionModel.fromFile
     * @function
     * @public
     * @param {string} fileName - A string that represents file name for the keyword recognition model.
     * Note, the file can point to a zip file in which case the model
     * will be extracted from the zip.
     * @returns {KeywordRecognitionModel} The keyword recognition model being created.
     */
    static fromFile(fileName) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfFileDoesNotExist(fileName, "fileName");
        throw new Error("Not yet implemented.");
    }
    /**
     * Creates a keyword recognition model using the specified filename.
     * @member KeywordRecognitionModel.fromStream
     * @function
     * @public
     * @param {string} file - A File that represents file for the keyword recognition model.
     * Note, the file can point to a zip file in which case the model will be extracted from the zip.
     * @returns {KeywordRecognitionModel} The keyword recognition model being created.
     */
    static fromStream(file) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNull(file, "file");
        throw new Error("Not yet implemented.");
    }
    /**
     * Dispose of associated resources.
     * @member KeywordRecognitionModel.prototype.close
     * @function
     * @public
     */
    close() {
        if (this.privDisposed) {
            return;
        }
        this.privDisposed = true;
    }
}

//# sourceMappingURL=KeywordRecognitionModel.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LanguageIdMode.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LanguageIdMode.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LanguageIdMode": () => (/* binding */ LanguageIdMode)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Language Identification mode
 * @class LanguageIdMode
 */
var LanguageIdMode;
(function (LanguageIdMode) {
    /**
     * Detect language at audio start
     * @member LanguageIdMode.AtStart
     */
    LanguageIdMode[LanguageIdMode["AtStart"] = 0] = "AtStart";
    /**
     * Continuously detect language
     * @member LanguageIdMode.Continuous
     */
    LanguageIdMode[LanguageIdMode["Continuous"] = 1] = "Continuous";
})(LanguageIdMode || (LanguageIdMode = {}));

//# sourceMappingURL=LanguageIdMode.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LanguageUnderstandingModel.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/LanguageUnderstandingModel.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "LanguageUnderstandingModel": () => (/* binding */ LanguageUnderstandingModel),
/* harmony export */   "LanguageUnderstandingModelImpl": () => (/* binding */ LanguageUnderstandingModelImpl)
/* harmony export */ });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// eslint-disable-next-line max-classes-per-file

/**
 * Language understanding model
 * @class LanguageUnderstandingModel
 */
class LanguageUnderstandingModel {
    /**
     * Creates and initializes a new instance
     * @constructor
     */
    constructor() {
        return;
    }
    /**
     * Creates an language understanding model using the specified endpoint.
     * @member LanguageUnderstandingModel.fromEndpoint
     * @function
     * @public
     * @param {URL} uri - A String that represents the endpoint of the language understanding model.
     * @returns {LanguageUnderstandingModel} The language understanding model being created.
     */
    static fromEndpoint(uri) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNull(uri, "uri");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(uri.hostname, "uri");
        const langModelImp = new LanguageUnderstandingModelImpl();
        // Need to extract the app ID from the URL.
        // URL is in the format: https://<region>.api.cognitive.microsoft.com/luis/v2.0/apps/<Guid>?subscription-key=<key>&timezoneOffset=-360
        // Start tearing the string apart.
        // region can be extracted from the host name.
        const firstDot = uri.host.indexOf(".");
        if (-1 === firstDot) {
            throw new Error("Could not determine region from endpoint");
        }
        langModelImp.region = uri.host.substr(0, firstDot);
        // Now the app ID.
        const lastSegment = uri.pathname.lastIndexOf("/") + 1;
        if (-1 === lastSegment) {
            throw new Error("Could not determine appId from endpoint");
        }
        langModelImp.appId = uri.pathname.substr(lastSegment);
        // And finally the key.
        langModelImp.subscriptionKey = uri.searchParams.get("subscription-key");
        if (undefined === langModelImp.subscriptionKey) {
            throw new Error("Could not determine subscription key from endpoint");
        }
        return langModelImp;
    }
    /**
     * Creates an language understanding model using the application id of Language Understanding service.
     * @member LanguageUnderstandingModel.fromAppId
     * @function
     * @public
     * @param {string} appId - A String that represents the application id of Language Understanding service.
     * @returns {LanguageUnderstandingModel} The language understanding model being created.
     */
    static fromAppId(appId) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(appId, "appId");
        const langModelImp = new LanguageUnderstandingModelImpl();
        langModelImp.appId = appId;
        return langModelImp;
    }
    /**
     * Creates a language understanding model using hostname, subscription key and application
     * id of Language Understanding service.
     * @member LanguageUnderstandingModel.fromSubscription
     * @function
     * @public
     * @param {string} subscriptionKey - A String that represents the subscription key of
     * Language Understanding service.
     * @param {string} appId - A String that represents the application id of Language
     * Understanding service.
     * @param {LanguageUnderstandingModel} region - A String that represents the region
     * of the Language Understanding service (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {LanguageUnderstandingModel} The language understanding model being created.
     */
    static fromSubscription(subscriptionKey, appId, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(subscriptionKey, "subscriptionKey");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(appId, "appId");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(region, "region");
        const langModelImp = new LanguageUnderstandingModelImpl();
        langModelImp.appId = appId;
        langModelImp.region = region;
        langModelImp.subscriptionKey = subscriptionKey;
        return langModelImp;
    }
}
/**
 * @private
 * @class LanguageUnderstandingModelImpl
 */
class LanguageUnderstandingModelImpl extends LanguageUnderstandingModel {
}

//# sourceMappingURL=LanguageUnderstandingModel.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchDetails.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchDetails.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NoMatchDetails": () => (/* binding */ NoMatchDetails)
/* harmony export */ });
/* harmony import */ var _src_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../src/common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/SimpleSpeechPhrase.js");
/* harmony import */ var _src_common_speech_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../src/common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/Enums.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchReason.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * Contains detailed information for NoMatch recognition results.
 * @class NoMatchDetails
 */
class NoMatchDetails {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {NoMatchReason} reason - The no-match reason.
     */
    constructor(reason) {
        this.privReason = reason;
    }
    /**
     * Creates an instance of NoMatchDetails object for the NoMatch SpeechRecognitionResults.
     * @member NoMatchDetails.fromResult
     * @function
     * @public
     * @param {SpeechRecognitionResult | IntentRecognitionResult | TranslationRecognitionResult}
     * result - The recognition result that was not recognized.
     * @returns {NoMatchDetails} The no match details object being created.
     */
    static fromResult(result) {
        const simpleSpeech = _src_common_speech_Exports__WEBPACK_IMPORTED_MODULE_0__.SimpleSpeechPhrase.fromJSON(result.json);
        let reason = _Exports__WEBPACK_IMPORTED_MODULE_1__.NoMatchReason.NotRecognized;
        switch (simpleSpeech.RecognitionStatus) {
            case _src_common_speech_Exports__WEBPACK_IMPORTED_MODULE_2__.RecognitionStatus.BabbleTimeout:
                reason = _Exports__WEBPACK_IMPORTED_MODULE_1__.NoMatchReason.InitialBabbleTimeout;
                break;
            case _src_common_speech_Exports__WEBPACK_IMPORTED_MODULE_2__.RecognitionStatus.InitialSilenceTimeout:
                reason = _Exports__WEBPACK_IMPORTED_MODULE_1__.NoMatchReason.InitialSilenceTimeout;
                break;
            default:
                reason = _Exports__WEBPACK_IMPORTED_MODULE_1__.NoMatchReason.NotRecognized;
                break;
        }
        return new NoMatchDetails(reason);
    }
    /**
     * The reason the recognition was canceled.
     * @member NoMatchDetails.prototype.reason
     * @function
     * @public
     * @returns {NoMatchReason} Specifies the reason canceled.
     */
    get reason() {
        return this.privReason;
    }
}

//# sourceMappingURL=NoMatchDetails.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchReason.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/NoMatchReason.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NoMatchReason": () => (/* binding */ NoMatchReason)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines the possible reasons a recognition result might not be recognized.
 * @class NoMatchReason
 */
var NoMatchReason;
(function (NoMatchReason) {
    /**
     * Indicates that speech was detected, but not recognized.
     * @member NoMatchReason.NotRecognized
     */
    NoMatchReason[NoMatchReason["NotRecognized"] = 0] = "NotRecognized";
    /**
     * Indicates that the start of the audio stream contained only silence,
     * and the service timed out waiting for speech.
     * @member NoMatchReason.InitialSilenceTimeout
     */
    NoMatchReason[NoMatchReason["InitialSilenceTimeout"] = 1] = "InitialSilenceTimeout";
    /**
     * Indicates that the start of the audio stream contained only noise,
     * and the service timed out waiting for speech.
     * @member NoMatchReason.InitialBabbleTimeout
     */
    NoMatchReason[NoMatchReason["InitialBabbleTimeout"] = 2] = "InitialBabbleTimeout";
})(NoMatchReason || (NoMatchReason = {}));

//# sourceMappingURL=NoMatchReason.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/OutputFormat.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/OutputFormat.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "OutputFormat": () => (/* binding */ OutputFormat)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Define Speech Recognizer output formats.
 * @class OutputFormat
 */
var OutputFormat;
(function (OutputFormat) {
    /**
     * @member OutputFormat.Simple
     */
    OutputFormat[OutputFormat["Simple"] = 0] = "Simple";
    /**
     * @member OutputFormat.Detailed
     */
    OutputFormat[OutputFormat["Detailed"] = 1] = "Detailed";
})(OutputFormat || (OutputFormat = {}));

//# sourceMappingURL=OutputFormat.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PhraseListGrammar.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PhraseListGrammar.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PhraseListGrammar": () => (/* binding */ PhraseListGrammar)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Allows additions of new phrases to improve speech recognition.
 *
 * Phrases added to the recognizer are effective at the start of the next recognition, or the next time the SpeechSDK must reconnect
 * to the speech service.
 */
class PhraseListGrammar {
    constructor(recogBase) {
        this.privGrammerBuilder = recogBase.dynamicGrammar;
    }
    /**
     * Creates a PhraseListGrammar from a given speech recognizer. Will accept any recognizer that derives from @class Recognizer.
     * @param recognizer The recognizer to add phrase lists to.
     */
    static fromRecognizer(recognizer) {
        const recoBase = recognizer.internalData;
        return new PhraseListGrammar(recoBase);
    }
    /**
     * Adds a single phrase to the current recognizer.
     * @param phrase Phrase to add.
     */
    addPhrase(phrase) {
        this.privGrammerBuilder.addPhrase(phrase);
    }
    /**
     * Adds multiple phrases to the current recognizer.
     * @param phrases Array of phrases to add.
     */
    addPhrases(phrases) {
        this.privGrammerBuilder.addPhrase(phrases);
    }
    /**
     * Clears all phrases added to the current recognizer.
     */
    clear() {
        this.privGrammerBuilder.clearPhrases();
    }
}

//# sourceMappingURL=PhraseListGrammar.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ProfanityOption.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ProfanityOption.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ProfanityOption": () => (/* binding */ ProfanityOption)
/* harmony export */ });
// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
/**
 * Profanity option.
 * Added in version 1.7.0.
 */
var ProfanityOption;
(function (ProfanityOption) {
    ProfanityOption[ProfanityOption["Masked"] = 0] = "Masked";
    ProfanityOption[ProfanityOption["Removed"] = 1] = "Removed";
    ProfanityOption[ProfanityOption["Raw"] = 2] = "Raw";
})(ProfanityOption || (ProfanityOption = {}));

//# sourceMappingURL=ProfanityOption.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentConfig.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentConfig.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PronunciationAssessmentConfig": () => (/* binding */ PronunciationAssessmentConfig)
/* harmony export */ });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentGradingSystem.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentGranularity.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * Pronunciation assessment configuration.
 * @class PronunciationAssessmentConfig
 * Added in version 1.15.0.
 */
class PronunciationAssessmentConfig {
    /**
     * PronunciationAssessmentConfig constructor.
     * @constructor
     * @param {string} referenceText
     * @param gradingSystem
     * @param granularity
     * @param enableMiscue
     */
    constructor(referenceText, gradingSystem = _Exports__WEBPACK_IMPORTED_MODULE_0__.PronunciationAssessmentGradingSystem.FivePoint, granularity = _Exports__WEBPACK_IMPORTED_MODULE_1__.PronunciationAssessmentGranularity.Phoneme, enableMiscue = false) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__.Contracts.throwIfNullOrUndefined(referenceText, "referenceText");
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyCollection();
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.PronunciationAssessment_ReferenceText, referenceText);
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.PronunciationAssessment_GradingSystem, _Exports__WEBPACK_IMPORTED_MODULE_0__.PronunciationAssessmentGradingSystem[gradingSystem]);
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.PronunciationAssessment_Granularity, _Exports__WEBPACK_IMPORTED_MODULE_1__.PronunciationAssessmentGranularity[granularity]);
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.PronunciationAssessment_EnableMiscue, String(enableMiscue));
    }
    /**
     * @member PronunciationAssessmentConfig.fromJSON
     * @function
     * @public
     * @param {string} json The json string containing the pronunciation assessment parameters.
     * @return {PronunciationAssessmentConfig} Instance of PronunciationAssessmentConfig
     * @summary Creates an instance of the PronunciationAssessmentConfig from json.
     */
    static fromJSON(json) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__.Contracts.throwIfNullOrUndefined(json, "json");
        const config = new PronunciationAssessmentConfig("");
        config.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyCollection();
        config.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.PronunciationAssessment_Json, json);
        return config;
    }
    toJSON() {
        this.updateJson();
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.PronunciationAssessment_Params);
    }
    applyTo(recognizer) {
        this.updateJson();
        const recoBase = recognizer.internalData;
        recoBase.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.PronunciationAssessment_Params));
    }
    /**
     * Gets the reference text.
     * @member PronunciationAssessmentConfig.prototype.referenceText
     * @function
     * @public
     * @returns {string} Reference text.
     */
    get referenceText() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.PronunciationAssessment_ReferenceText);
    }
    /**
     * Gets/Sets the reference text.
     * @member PronunciationAssessmentConfig.prototype.referenceText
     * @function
     * @public
     * @param {string} referenceText - Reference text.
     */
    set referenceText(referenceText) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__.Contracts.throwIfNullOrWhitespace(referenceText, "referenceText");
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.PronunciationAssessment_ReferenceText, referenceText);
    }
    /**
     * Sets the phoneme alphabet.
     * The valid values are "SAPI" (default) and "IPA".
     * Added in version 1.20.0
     * @member PronunciationAssessmentConfig.prototype.phonemeAlphabet
     * @function
     * @public
     * @param {string} phonemeAlphabet - Phoneme alphabet.
     */
    set phonemeAlphabet(phonemeAlphabet) {
        _Contracts__WEBPACK_IMPORTED_MODULE_2__.Contracts.throwIfNullOrWhitespace(phonemeAlphabet, "phonemeAlphabet");
        this.privPhonemeAlphabet = phonemeAlphabet;
    }
    /**
     * Sets the boolean enableMiscue property.
     * Added in version 1.26.0
     * @member PronunciationAssessmentConfig.prototype.enableMiscue
     * @function
     * @public
     * @param {boolean} enableMiscue - enable miscue.
     */
    set enableMiscue(enableMiscue) {
        const enableMiscueString = enableMiscue ? "true" : "false";
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.PronunciationAssessment_EnableMiscue, enableMiscueString);
    }
    /**
     * Gets the boolean enableMiscue property.
     * Added in version 1.26.0
     * @member PronunciationAssessmentConfig.prototype.enableMiscue
     * @function
     * @public
     * @return {boolean} enableMiscue - enable miscue.
     */
    get enableMiscue() {
        const enableMiscueString = this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.PronunciationAssessment_EnableMiscue, "false");
        return (enableMiscueString.toLowerCase() === "true");
    }
    /**
     * Sets the nbest phoneme count
     * Added in version 1.20.0
     * @member PronunciationAssessmentConfig.prototype.nbestPhonemeCount
     * @function
     * @public
     * @param {number} nbestPhonemeCount - NBest phoneme count.
     */
    set nbestPhonemeCount(nbestPhonemeCount) {
        this.privNBestPhonemeCount = nbestPhonemeCount;
    }
    /**
     * @member PronunciationAssessmentConfig.prototype.properties
     * @function
     * @public
     * @return {PropertyCollection} Properties of the config.
     * @summary Gets a pronunciation assessment config properties
     */
    get properties() {
        return this.privProperties;
    }
    updateJson() {
        const jsonString = this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.PronunciationAssessment_Json, "{}");
        const paramsJson = JSON.parse(jsonString);
        const referenceText = this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.PronunciationAssessment_ReferenceText);
        if (referenceText) {
            paramsJson.referenceText = referenceText;
        }
        const gradingSystem = this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.PronunciationAssessment_GradingSystem);
        if (gradingSystem) {
            paramsJson.gradingSystem = gradingSystem;
        }
        const granularity = this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.PronunciationAssessment_Granularity);
        if (granularity) {
            paramsJson.granularity = granularity;
        }
        if (this.privPhonemeAlphabet) {
            paramsJson.phonemeAlphabet = this.privPhonemeAlphabet;
        }
        if (this.privNBestPhonemeCount) {
            paramsJson.nbestPhonemeCount = this.privNBestPhonemeCount;
        }
        // always set dimension to Comprehensive
        paramsJson.dimension = "Comprehensive";
        paramsJson.enableMiscue = this.enableMiscue;
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.PronunciationAssessment_Params, JSON.stringify(paramsJson));
    }
}

//# sourceMappingURL=PronunciationAssessmentConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentGradingSystem.js":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentGradingSystem.js ***!
  \****************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PronunciationAssessmentGradingSystem": () => (/* binding */ PronunciationAssessmentGradingSystem)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines the point system for pronunciation score calibration; default value is FivePoint.
 * Added in version 1.15.0
 * @class PronunciationAssessmentGradingSystem
 */
var PronunciationAssessmentGradingSystem;
(function (PronunciationAssessmentGradingSystem) {
    /**
     * Five point calibration
     * @member PronunciationAssessmentGradingSystem.FivePoint
     */
    PronunciationAssessmentGradingSystem[PronunciationAssessmentGradingSystem["FivePoint"] = 1] = "FivePoint";
    /**
     * Hundred mark
     * @member PronunciationAssessmentGradingSystem.HundredMark
     */
    PronunciationAssessmentGradingSystem[PronunciationAssessmentGradingSystem["HundredMark"] = 2] = "HundredMark";
})(PronunciationAssessmentGradingSystem || (PronunciationAssessmentGradingSystem = {}));

//# sourceMappingURL=PronunciationAssessmentGradingSystem.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentGranularity.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentGranularity.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PronunciationAssessmentGranularity": () => (/* binding */ PronunciationAssessmentGranularity)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines the pronunciation evaluation granularity; default value is Phoneme.
 * Added in version 1.15.0
 * @class PronunciationAssessmentGranularity
 */
var PronunciationAssessmentGranularity;
(function (PronunciationAssessmentGranularity) {
    /**
     * Shows the score on the full text, word and phoneme level
     * @member PronunciationAssessmentGranularity.Phoneme
     */
    PronunciationAssessmentGranularity[PronunciationAssessmentGranularity["Phoneme"] = 1] = "Phoneme";
    /**
     * Shows the score on the full text and word level
     * @member PronunciationAssessmentGranularity.Word
     */
    PronunciationAssessmentGranularity[PronunciationAssessmentGranularity["Word"] = 2] = "Word";
    /**
     * Shows the score on the full text level only
     * @member PronunciationAssessmentGranularity.FullText
     */
    PronunciationAssessmentGranularity[PronunciationAssessmentGranularity["FullText"] = 3] = "FullText";
})(PronunciationAssessmentGranularity || (PronunciationAssessmentGranularity = {}));

//# sourceMappingURL=PronunciationAssessmentGranularity.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentResult.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PronunciationAssessmentResult.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PronunciationAssessmentResult": () => (/* binding */ PronunciationAssessmentResult)
/* harmony export */ });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * Pronunciation assessment results.
 * @class PronunciationAssessmentResult
 * Added in version 1.15.0.
 */
class PronunciationAssessmentResult {
    constructor(jsonString) {
        const j = JSON.parse(jsonString);
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(j.NBest[0], "NBest");
        this.privPronJson = j.NBest[0];
    }
    /**
     * @member PronunciationAssessmentResult.fromResult
     * @function
     * @public
     * @param {RecognitionResult} result The recognition result.
     * @return {PronunciationAssessmentConfig} Instance of PronunciationAssessmentConfig
     * @summary Creates an instance of the PronunciationAssessmentResult from recognition result.
     */
    static fromResult(result) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(result, "result");
        const json = result.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceResponse_JsonResult);
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(json, "json");
        return new PronunciationAssessmentResult(json);
    }
    /**
     * Gets the detail result of pronunciation assessment.
     * @member PronunciationAssessmentConfig.prototype.detailResult
     * @function
     * @public
     * @returns {DetailResult} detail result.
     */
    get detailResult() {
        return this.privPronJson;
    }
    /**
     * The score indicating the pronunciation accuracy of the given speech, which indicates
     * how closely the phonemes match a native speaker's pronunciation.
     * @member PronunciationAssessmentResult.prototype.accuracyScore
     * @function
     * @public
     * @returns {number} Accuracy score.
     */
    get accuracyScore() {
        return this.detailResult.PronunciationAssessment.AccuracyScore;
    }
    /**
     * The overall score indicating the pronunciation quality of the given speech.
     * This is calculated from AccuracyScore, FluencyScore and CompletenessScore with weight.
     * @member PronunciationAssessmentResult.prototype.pronunciationScore
     * @function
     * @public
     * @returns {number} Pronunciation score.
     */
    get pronunciationScore() {
        return this.detailResult.PronunciationAssessment.PronScore;
    }
    /**
     * The score indicating the completeness of the given speech by calculating the ratio of pronounced words towards entire input.
     * @member PronunciationAssessmentResult.prototype.completenessScore
     * @function
     * @public
     * @returns {number} Completeness score.
     */
    get completenessScore() {
        return this.detailResult.PronunciationAssessment.CompletenessScore;
    }
    /**
     * The score indicating the fluency of the given speech.
     * @member PronunciationAssessmentResult.prototype.fluencyScore
     * @function
     * @public
     * @returns {number} Fluency score.
     */
    get fluencyScore() {
        return this.detailResult.PronunciationAssessment.FluencyScore;
    }
}

//# sourceMappingURL=PronunciationAssessmentResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PropertyCollection": () => (/* binding */ PropertyCollection)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Represents collection of properties and their values.
 * @class PropertyCollection
 */
class PropertyCollection {
    constructor() {
        this.privKeys = [];
        this.privValues = [];
    }
    /**
     * Returns the property value in type String.
     * Currently only String, int and bool are allowed.
     * If the name is not available, the specified defaultValue is returned.
     * @member PropertyCollection.prototype.getProperty
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string | number | boolean} def - The default value which is returned if the parameter
     * is not available in the collection.
     * @returns {string} value of the parameter.
     */
    getProperty(key, def) {
        let keyToUse;
        if (typeof key === "string") {
            keyToUse = key;
        }
        else {
            keyToUse = _Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId[key];
        }
        for (let n = 0; n < this.privKeys.length; n++) {
            if (this.privKeys[n] === keyToUse) {
                return this.privValues[n];
            }
        }
        if (def === undefined) {
            return undefined;
        }
        return String(def);
    }
    /**
     * Sets the String value of the parameter specified by name.
     * @member PropertyCollection.prototype.setProperty
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} value - The value of the parameter.
     */
    setProperty(key, value) {
        let keyToUse;
        if (typeof key === "string") {
            keyToUse = key;
        }
        else {
            keyToUse = _Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyId[key];
        }
        for (let n = 0; n < this.privKeys.length; n++) {
            if (this.privKeys[n] === keyToUse) {
                this.privValues[n] = value;
                return;
            }
        }
        this.privKeys.push(keyToUse);
        this.privValues.push(value);
    }
    /**
     * Clones the collection.
     * @member PropertyCollection.prototype.clone
     * @function
     * @public
     * @returns {PropertyCollection} A copy of the collection.
     */
    clone() {
        const clonedMap = new PropertyCollection();
        for (let n = 0; n < this.privKeys.length; n++) {
            clonedMap.privKeys.push(this.privKeys[n]);
            clonedMap.privValues.push(this.privValues[n]);
        }
        return clonedMap;
    }
    /**
     * Merges this set of properties into another, no overwrites.
     * @member PropertyCollection.prototype.mergeTo
     * @function
     * @public
     * @param {PropertyCollection}  destinationCollection - The collection to merge into.
     */
    mergeTo(destinationCollection) {
        this.privKeys.forEach((key) => {
            if (destinationCollection.getProperty(key, undefined) === undefined) {
                const value = this.getProperty(key);
                destinationCollection.setProperty(key, value);
            }
        });
    }
    /**
     * Get the keys in Property Collection.
     * @member PropertyCollection.prototype.keys
     * @function
     * @public
     * @returns {string []} Keys in the collection.
     */
    get keys() {
        return this.privKeys;
    }
}

//# sourceMappingURL=PropertyCollection.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PropertyId": () => (/* binding */ PropertyId)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines speech property ids.
 * @class PropertyId
 */
var PropertyId;
(function (PropertyId) {
    /**
     * The Cognitive Services Speech Service subscription Key. If you are using an intent recognizer, you need to
     * specify the LUIS endpoint key for your particular LUIS app. Under normal circumstances, you shouldn't
     * have to use this property directly.
     * Instead, use [[SpeechConfig.fromSubscription]].
     * @member PropertyId.SpeechServiceConnection_Key
     */
    PropertyId[PropertyId["SpeechServiceConnection_Key"] = 0] = "SpeechServiceConnection_Key";
    /**
     * The Cognitive Services Speech Service endpoint (url). Under normal circumstances, you shouldn't
     * have to use this property directly.
     * Instead, use [[SpeechConfig.fromEndpoint]].
     * NOTE: This endpoint is not the same as the endpoint used to obtain an access token.
     * @member PropertyId.SpeechServiceConnection_Endpoint
     */
    PropertyId[PropertyId["SpeechServiceConnection_Endpoint"] = 1] = "SpeechServiceConnection_Endpoint";
    /**
     * The Cognitive Services Speech Service region. Under normal circumstances, you shouldn't have to
     * use this property directly.
     * Instead, use [[SpeechConfig.fromSubscription]], [[SpeechConfig.fromEndpoint]], [[SpeechConfig.fromAuthorizationToken]].
     * @member PropertyId.SpeechServiceConnection_Region
     */
    PropertyId[PropertyId["SpeechServiceConnection_Region"] = 2] = "SpeechServiceConnection_Region";
    /**
     * The Cognitive Services Speech Service authorization token (aka access token). Under normal circumstances,
     * you shouldn't have to use this property directly.
     * Instead, use [[SpeechConfig.fromAuthorizationToken]], [[SpeechRecognizer.authorizationToken]],
     * [[IntentRecognizer.authorizationToken]], [[TranslationRecognizer.authorizationToken]], [[SpeakerRecognizer.authorizationToken]].
     * @member PropertyId.SpeechServiceAuthorization_Token
     */
    PropertyId[PropertyId["SpeechServiceAuthorization_Token"] = 3] = "SpeechServiceAuthorization_Token";
    /**
     * The Cognitive Services Speech Service authorization type. Currently unused.
     * @member PropertyId.SpeechServiceAuthorization_Type
     */
    PropertyId[PropertyId["SpeechServiceAuthorization_Type"] = 4] = "SpeechServiceAuthorization_Type";
    /**
     * The Cognitive Services Speech Service endpoint id. Under normal circumstances, you shouldn't
     * have to use this property directly.
     * Instead, use [[SpeechConfig.endpointId]].
     * NOTE: The endpoint id is available in the Speech Portal, listed under Endpoint Details.
     * @member PropertyId.SpeechServiceConnection_EndpointId
     */
    PropertyId[PropertyId["SpeechServiceConnection_EndpointId"] = 5] = "SpeechServiceConnection_EndpointId";
    /**
     * The list of comma separated languages (BCP-47 format) used as target translation languages. Under normal circumstances,
     * you shouldn't have to use this property directly.
     * Instead use [[SpeechTranslationConfig.addTargetLanguage]],
     * [[SpeechTranslationConfig.targetLanguages]], [[TranslationRecognizer.targetLanguages]].
     * @member PropertyId.SpeechServiceConnection_TranslationToLanguages
     */
    PropertyId[PropertyId["SpeechServiceConnection_TranslationToLanguages"] = 6] = "SpeechServiceConnection_TranslationToLanguages";
    /**
     * The name of the Cognitive Service Text to Speech Service Voice. Under normal circumstances, you shouldn't have to use this
     * property directly.
     * Instead, use [[SpeechTranslationConfig.voiceName]].
     * NOTE: Valid voice names can be found <a href="https://aka.ms/csspeech/voicenames">here</a>.
     * @member PropertyId.SpeechServiceConnection_TranslationVoice
     */
    PropertyId[PropertyId["SpeechServiceConnection_TranslationVoice"] = 7] = "SpeechServiceConnection_TranslationVoice";
    /**
     * Translation features.
     * @member PropertyId.SpeechServiceConnection_TranslationFeatures
     */
    PropertyId[PropertyId["SpeechServiceConnection_TranslationFeatures"] = 8] = "SpeechServiceConnection_TranslationFeatures";
    /**
     * The Language Understanding Service Region. Under normal circumstances, you shouldn't have to use this property directly.
     * Instead, use [[LanguageUnderstandingModel]].
     * @member PropertyId.SpeechServiceConnection_IntentRegion
     */
    PropertyId[PropertyId["SpeechServiceConnection_IntentRegion"] = 9] = "SpeechServiceConnection_IntentRegion";
    /**
     * The host name of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_ProxyHostName"] = 10] = "SpeechServiceConnection_ProxyHostName";
    /**
     * The port of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_ProxyPort"] = 11] = "SpeechServiceConnection_ProxyPort";
    /**
     * The user name of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_ProxyUserName"] = 12] = "SpeechServiceConnection_ProxyUserName";
    /**
     * The password of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_ProxyPassword"] = 13] = "SpeechServiceConnection_ProxyPassword";
    /**
     * The Cognitive Services Speech Service recognition Mode. Can be "INTERACTIVE", "CONVERSATION", "DICTATION".
     * This property is intended to be read-only. The SDK is using it internally.
     * @member PropertyId.SpeechServiceConnection_RecoMode
     */
    PropertyId[PropertyId["SpeechServiceConnection_RecoMode"] = 14] = "SpeechServiceConnection_RecoMode";
    /**
     * The spoken language to be recognized (in BCP-47 format). Under normal circumstances, you shouldn't have to use this property
     * directly.
     * Instead, use [[SpeechConfig.speechRecognitionLanguage]].
     * @member PropertyId.SpeechServiceConnection_RecoLanguage
     */
    PropertyId[PropertyId["SpeechServiceConnection_RecoLanguage"] = 15] = "SpeechServiceConnection_RecoLanguage";
    /**
     * The session id. This id is a universally unique identifier (aka UUID) representing a specific binding of an audio input stream
     * and the underlying speech recognition instance to which it is bound. Under normal circumstances, you shouldn't have to use this
     * property directly.
     * Instead use [[SessionEventArgs.sessionId]].
     * @member PropertyId.Speech_SessionId
     */
    PropertyId[PropertyId["Speech_SessionId"] = 16] = "Speech_SessionId";
    /**
     * The spoken language to be synthesized (e.g. en-US)
     * @member PropertyId.SpeechServiceConnection_SynthLanguage
     */
    PropertyId[PropertyId["SpeechServiceConnection_SynthLanguage"] = 17] = "SpeechServiceConnection_SynthLanguage";
    /**
     * The name of the TTS voice to be used for speech synthesis
     * @member PropertyId.SpeechServiceConnection_SynthVoice
     */
    PropertyId[PropertyId["SpeechServiceConnection_SynthVoice"] = 18] = "SpeechServiceConnection_SynthVoice";
    /**
     * The string to specify TTS output audio format
     * @member PropertyId.SpeechServiceConnection_SynthOutputFormat
     */
    PropertyId[PropertyId["SpeechServiceConnection_SynthOutputFormat"] = 19] = "SpeechServiceConnection_SynthOutputFormat";
    /**
     * The list of comma separated languages used as possible source languages
     * Added in version 1.13.0
     * @member PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages
     */
    PropertyId[PropertyId["SpeechServiceConnection_AutoDetectSourceLanguages"] = 20] = "SpeechServiceConnection_AutoDetectSourceLanguages";
    /**
     * The requested Cognitive Services Speech Service response output format (simple or detailed). Under normal circumstances, you shouldn't have
     * to use this property directly.
     * Instead use [[SpeechConfig.outputFormat]].
     * @member PropertyId.SpeechServiceResponse_RequestDetailedResultTrueFalse
     */
    PropertyId[PropertyId["SpeechServiceResponse_RequestDetailedResultTrueFalse"] = 21] = "SpeechServiceResponse_RequestDetailedResultTrueFalse";
    /**
     * The requested Cognitive Services Speech Service response output profanity level. Currently unused.
     * @member PropertyId.SpeechServiceResponse_RequestProfanityFilterTrueFalse
     */
    PropertyId[PropertyId["SpeechServiceResponse_RequestProfanityFilterTrueFalse"] = 22] = "SpeechServiceResponse_RequestProfanityFilterTrueFalse";
    /**
     * The Cognitive Services Speech Service response output (in JSON format). This property is available on recognition result objects only.
     * @member PropertyId.SpeechServiceResponse_JsonResult
     */
    PropertyId[PropertyId["SpeechServiceResponse_JsonResult"] = 23] = "SpeechServiceResponse_JsonResult";
    /**
     * The Cognitive Services Speech Service error details (in JSON format). Under normal circumstances, you shouldn't have to
     * use this property directly. Instead use [[CancellationDetails.errorDetails]].
     * @member PropertyId.SpeechServiceResponse_JsonErrorDetails
     */
    PropertyId[PropertyId["SpeechServiceResponse_JsonErrorDetails"] = 24] = "SpeechServiceResponse_JsonErrorDetails";
    /**
     * The cancellation reason. Currently unused.
     * @member PropertyId.CancellationDetails_Reason
     */
    PropertyId[PropertyId["CancellationDetails_Reason"] = 25] = "CancellationDetails_Reason";
    /**
     * The cancellation text. Currently unused.
     * @member PropertyId.CancellationDetails_ReasonText
     */
    PropertyId[PropertyId["CancellationDetails_ReasonText"] = 26] = "CancellationDetails_ReasonText";
    /**
     * The Cancellation detailed text. Currently unused.
     * @member PropertyId.CancellationDetails_ReasonDetailedText
     */
    PropertyId[PropertyId["CancellationDetails_ReasonDetailedText"] = 27] = "CancellationDetails_ReasonDetailedText";
    /**
     * The Language Understanding Service response output (in JSON format). Available via [[IntentRecognitionResult]]
     * @member PropertyId.LanguageUnderstandingServiceResponse_JsonResult
     */
    PropertyId[PropertyId["LanguageUnderstandingServiceResponse_JsonResult"] = 28] = "LanguageUnderstandingServiceResponse_JsonResult";
    /**
     * The URL string built from speech configuration.
     * This property is intended to be read-only. The SDK is using it internally.
     * NOTE: Added in version 1.7.0.
     */
    PropertyId[PropertyId["SpeechServiceConnection_Url"] = 29] = "SpeechServiceConnection_Url";
    /**
     * The initial silence timeout value (in milliseconds) used by the service.
     * Added in version 1.7.0
     */
    PropertyId[PropertyId["SpeechServiceConnection_InitialSilenceTimeoutMs"] = 30] = "SpeechServiceConnection_InitialSilenceTimeoutMs";
    /**
     * The end silence timeout value (in milliseconds) used by the service.
     * Added in version 1.7.0
     */
    PropertyId[PropertyId["SpeechServiceConnection_EndSilenceTimeoutMs"] = 31] = "SpeechServiceConnection_EndSilenceTimeoutMs";
    /**
     * A duration of detected silence, measured in milliseconds, after which speech-to-text will determine a spoken
     * phrase has ended and generate a final Recognized result. Configuring this timeout may be helpful in situations
     * where spoken input is significantly faster or slower than usual and default segmentation behavior consistently
     * yields results that are too long or too short. Segmentation timeout values that are inappropriately high or low
     * can negatively affect speech-to-text accuracy; this property should be carefully configured and the resulting
     * behavior should be thoroughly validated as intended.
     *
     * For more information about timeout configuration that includes discussion of default behaviors, please visit
     * https://aka.ms/csspeech/timeouts.
     *
     * Added in version 1.21.0.
     */
    PropertyId[PropertyId["Speech_SegmentationSilenceTimeoutMs"] = 32] = "Speech_SegmentationSilenceTimeoutMs";
    /**
     * A boolean value specifying whether audio logging is enabled in the service or not.
     * Audio and content logs are stored either in Microsoft-owned storage, or in your own storage account linked
     * to your Cognitive Services subscription (Bring Your Own Storage (BYOS) enabled Speech resource).
     * The logs will be removed after 30 days.
     * Added in version 1.7.0
     */
    PropertyId[PropertyId["SpeechServiceConnection_EnableAudioLogging"] = 33] = "SpeechServiceConnection_EnableAudioLogging";
    /**
     * The speech service connection language identifier mode.
     * Can be "AtStart" (the default), or "Continuous". See Language
     * Identification document https://aka.ms/speech/lid?pivots=programming-language-javascript
     * for more details.
     * Added in 1.25.0
     **/
    PropertyId[PropertyId["SpeechServiceConnection_LanguageIdMode"] = 34] = "SpeechServiceConnection_LanguageIdMode";
    /**
     * A string value representing the desired endpoint version to target for Speech Recognition.
     * Added in version 1.21.0
     */
    PropertyId[PropertyId["SpeechServiceConnection_RecognitionEndpointVersion"] = 35] = "SpeechServiceConnection_RecognitionEndpointVersion";
    /**
    /**
     * A string value the current speaker recognition scenario/mode (TextIndependentIdentification, etc.).
     * Added in version 1.23.0
     */
    PropertyId[PropertyId["SpeechServiceConnection_SpeakerIdMode"] = 36] = "SpeechServiceConnection_SpeakerIdMode";
    /**
     * The requested Cognitive Services Speech Service response output profanity setting.
     * Allowed values are "masked", "removed", and "raw".
     * Added in version 1.7.0.
     */
    PropertyId[PropertyId["SpeechServiceResponse_ProfanityOption"] = 37] = "SpeechServiceResponse_ProfanityOption";
    /**
     * A string value specifying which post processing option should be used by service.
     * Allowed values are "TrueText".
     * Added in version 1.7.0
     */
    PropertyId[PropertyId["SpeechServiceResponse_PostProcessingOption"] = 38] = "SpeechServiceResponse_PostProcessingOption";
    /**
     * A boolean value specifying whether to include word-level timestamps in the response result.
     * Added in version 1.7.0
     */
    PropertyId[PropertyId["SpeechServiceResponse_RequestWordLevelTimestamps"] = 39] = "SpeechServiceResponse_RequestWordLevelTimestamps";
    /**
     * The number of times a word has to be in partial results to be returned.
     * Added in version 1.7.0
     */
    PropertyId[PropertyId["SpeechServiceResponse_StablePartialResultThreshold"] = 40] = "SpeechServiceResponse_StablePartialResultThreshold";
    /**
     * A string value specifying the output format option in the response result. Internal use only.
     * Added in version 1.7.0.
     */
    PropertyId[PropertyId["SpeechServiceResponse_OutputFormatOption"] = 41] = "SpeechServiceResponse_OutputFormatOption";
    /**
     * A boolean value to request for stabilizing translation partial results by omitting words in the end.
     * Added in version 1.7.0.
     */
    PropertyId[PropertyId["SpeechServiceResponse_TranslationRequestStablePartialResult"] = 42] = "SpeechServiceResponse_TranslationRequestStablePartialResult";
    /**
     * A boolean value specifying whether to request WordBoundary events.
     * @member PropertyId.SpeechServiceResponse_RequestWordBoundary
     * Added in version 1.21.0.
     */
    PropertyId[PropertyId["SpeechServiceResponse_RequestWordBoundary"] = 43] = "SpeechServiceResponse_RequestWordBoundary";
    /**
     * A boolean value specifying whether to request punctuation boundary in WordBoundary Events. Default is true.
     * @member PropertyId.SpeechServiceResponse_RequestPunctuationBoundary
     * Added in version 1.21.0.
     */
    PropertyId[PropertyId["SpeechServiceResponse_RequestPunctuationBoundary"] = 44] = "SpeechServiceResponse_RequestPunctuationBoundary";
    /**
     * A boolean value specifying whether to request sentence boundary in WordBoundary Events. Default is false.
     * @member PropertyId.SpeechServiceResponse_RequestSentenceBoundary
     * Added in version 1.21.0.
     */
    PropertyId[PropertyId["SpeechServiceResponse_RequestSentenceBoundary"] = 45] = "SpeechServiceResponse_RequestSentenceBoundary";
    /**
     * Identifier used to connect to the backend service.
     * @member PropertyId.Conversation_ApplicationId
     */
    PropertyId[PropertyId["Conversation_ApplicationId"] = 46] = "Conversation_ApplicationId";
    /**
     * Type of dialog backend to connect to.
     * @member PropertyId.Conversation_DialogType
     */
    PropertyId[PropertyId["Conversation_DialogType"] = 47] = "Conversation_DialogType";
    /**
     * Silence timeout for listening
     * @member PropertyId.Conversation_Initial_Silence_Timeout
     */
    PropertyId[PropertyId["Conversation_Initial_Silence_Timeout"] = 48] = "Conversation_Initial_Silence_Timeout";
    /**
     * From Id to add to speech recognition activities.
     * @member PropertyId.Conversation_From_Id
     */
    PropertyId[PropertyId["Conversation_From_Id"] = 49] = "Conversation_From_Id";
    /**
     * ConversationId for the session.
     * @member PropertyId.Conversation_Conversation_Id
     */
    PropertyId[PropertyId["Conversation_Conversation_Id"] = 50] = "Conversation_Conversation_Id";
    /**
     * Comma separated list of custom voice deployment ids.
     * @member PropertyId.Conversation_Custom_Voice_Deployment_Ids
     */
    PropertyId[PropertyId["Conversation_Custom_Voice_Deployment_Ids"] = 51] = "Conversation_Custom_Voice_Deployment_Ids";
    /**
     * Speech activity template, stamp properties from the template on the activity generated by the service for speech.
     * @member PropertyId.Conversation_Speech_Activity_Template
     * Added in version 1.10.0.
     */
    PropertyId[PropertyId["Conversation_Speech_Activity_Template"] = 52] = "Conversation_Speech_Activity_Template";
    /**
     * Enables or disables the receipt of turn status messages as obtained on the turnStatusReceived event.
     * @member PropertyId.Conversation_Request_Bot_Status_Messages
     * Added in version 1.15.0.
     */
    PropertyId[PropertyId["Conversation_Request_Bot_Status_Messages"] = 53] = "Conversation_Request_Bot_Status_Messages";
    /**
     * Specifies the connection ID to be provided in the Agent configuration message, e.g. a Direct Line token for
     * channel authentication.
     * Added in version 1.15.1.
     */
    PropertyId[PropertyId["Conversation_Agent_Connection_Id"] = 54] = "Conversation_Agent_Connection_Id";
    /**
     * The Cognitive Services Speech Service host (url). Under normal circumstances, you shouldn't have to use this property directly.
     * Instead, use [[SpeechConfig.fromHost]].
     */
    PropertyId[PropertyId["SpeechServiceConnection_Host"] = 55] = "SpeechServiceConnection_Host";
    /**
     * Set the host for service calls to the Conversation Translator REST management and websocket calls.
     */
    PropertyId[PropertyId["ConversationTranslator_Host"] = 56] = "ConversationTranslator_Host";
    /**
     * Optionally set the the host's display name.
     * Used when joining a conversation.
     */
    PropertyId[PropertyId["ConversationTranslator_Name"] = 57] = "ConversationTranslator_Name";
    /**
     * Optionally set a value for the X-CorrelationId request header.
     * Used for troubleshooting errors in the server logs. It should be a valid guid.
     */
    PropertyId[PropertyId["ConversationTranslator_CorrelationId"] = 58] = "ConversationTranslator_CorrelationId";
    /**
     * Set the conversation token to be sent to the speech service. This enables the
     * service to service call from the speech service to the Conversation Translator service for relaying
     * recognitions. For internal use.
     */
    PropertyId[PropertyId["ConversationTranslator_Token"] = 59] = "ConversationTranslator_Token";
    /**
     * The reference text of the audio for pronunciation evaluation.
     * For this and the following pronunciation assessment parameters, see
     * https://docs.microsoft.com/azure/cognitive-services/speech-service/rest-speech-to-text#pronunciation-assessment-parameters for details.
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */
    PropertyId[PropertyId["PronunciationAssessment_ReferenceText"] = 60] = "PronunciationAssessment_ReferenceText";
    /**
     * The point system for pronunciation score calibration (FivePoint or HundredMark).
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */
    PropertyId[PropertyId["PronunciationAssessment_GradingSystem"] = 61] = "PronunciationAssessment_GradingSystem";
    /**
     * The pronunciation evaluation granularity (Phoneme, Word, or FullText).
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */
    PropertyId[PropertyId["PronunciationAssessment_Granularity"] = 62] = "PronunciationAssessment_Granularity";
    /**
     * Defines if enable miscue calculation.
     * With this enabled, the pronounced words will be compared to the reference text,
     * and will be marked with omission/insertion based on the comparison. The default setting is False.
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */
    PropertyId[PropertyId["PronunciationAssessment_EnableMiscue"] = 63] = "PronunciationAssessment_EnableMiscue";
    /**
     * The json string of pronunciation assessment parameters
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */
    PropertyId[PropertyId["PronunciationAssessment_Json"] = 64] = "PronunciationAssessment_Json";
    /**
     * Pronunciation assessment parameters.
     * This property is intended to be read-only. The SDK is using it internally.
     * Added in version 1.15.0
     */
    PropertyId[PropertyId["PronunciationAssessment_Params"] = 65] = "PronunciationAssessment_Params";
    /**
     * Version of Speaker Recognition API to use.
     * Added in version 1.18.0
     */
    PropertyId[PropertyId["SpeakerRecognition_Api_Version"] = 66] = "SpeakerRecognition_Api_Version";
})(PropertyId || (PropertyId = {}));

//# sourceMappingURL=PropertyId.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionEventArgs.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionEventArgs.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RecognitionEventArgs": () => (/* binding */ RecognitionEventArgs)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Defines payload for session events like Speech Start/End Detected
 * @class
 */
class RecognitionEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__.SessionEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */
    constructor(offset, sessionId) {
        super(sessionId);
        this.privOffset = offset;
    }
    /**
     * Represents the message offset
     * @member RecognitionEventArgs.prototype.offset
     * @function
     * @public
     */
    get offset() {
        return this.privOffset;
    }
}

//# sourceMappingURL=RecognitionEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionResult.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionResult.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RecognitionResult": () => (/* binding */ RecognitionResult)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines result of speech recognition.
 * @class RecognitionResult
 */
class RecognitionResult {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} language - Primary Language detected, if provided.
     * @param {string} languageDetectionConfidence - Primary Language confidence ("Unknown," "Low," "Medium," "High"...), if provided.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */
    constructor(resultId, reason, text, duration, offset, language, languageDetectionConfidence, errorDetails, json, properties) {
        this.privResultId = resultId;
        this.privReason = reason;
        this.privText = text;
        this.privDuration = duration;
        this.privOffset = offset;
        this.privLanguage = language;
        this.privLanguageDetectionConfidence = languageDetectionConfidence;
        this.privErrorDetails = errorDetails;
        this.privJson = json;
        this.privProperties = properties;
    }
    /**
     * Specifies the result identifier.
     * @member RecognitionResult.prototype.resultId
     * @function
     * @public
     * @returns {string} Specifies the result identifier.
     */
    get resultId() {
        return this.privResultId;
    }
    /**
     * Specifies status of the result.
     * @member RecognitionResult.prototype.reason
     * @function
     * @public
     * @returns {ResultReason} Specifies status of the result.
     */
    get reason() {
        return this.privReason;
    }
    /**
     * Presents the recognized text in the result.
     * @member RecognitionResult.prototype.text
     * @function
     * @public
     * @returns {string} Presents the recognized text in the result.
     */
    get text() {
        return this.privText;
    }
    /**
     * Duration of recognized speech in 100 nano second increments.
     * @member RecognitionResult.prototype.duration
     * @function
     * @public
     * @returns {number} Duration of recognized speech in 100 nano second increments.
     */
    get duration() {
        return this.privDuration;
    }
    /**
     * Offset of recognized speech in 100 nano second increments.
     * @member RecognitionResult.prototype.offset
     * @function
     * @public
     * @returns {number} Offset of recognized speech in 100 nano second increments.
     */
    get offset() {
        return this.privOffset;
    }
    /**
     * Primary Language detected.
     * @member RecognitionResult.prototype.language
     * @function
     * @public
     * @returns {string} language detected.
     */
    get language() {
        return this.privLanguage;
    }
    /**
     * Primary Language detection confidence (Unknown, Low, Medium, High).
     * @member RecognitionResult.prototype.languageDetectionConfidence
     * @function
     * @public
     * @returns {string} detection confidence strength.
     */
    get languageDetectionConfidence() {
        return this.privLanguageDetectionConfidence;
    }
    /**
     * In case of an unsuccessful recognition, provides details of the occurred error.
     * @member RecognitionResult.prototype.errorDetails
     * @function
     * @public
     * @returns {string} a brief description of an error.
     */
    get errorDetails() {
        return this.privErrorDetails;
    }
    /**
     * A string containing Json serialized recognition result as it was received from the service.
     * @member RecognitionResult.prototype.json
     * @function
     * @private
     * @returns {string} Json serialized representation of the result.
     */
    get json() {
        return this.privJson;
    }
    /**
     * The set of properties exposed in the result.
     * @member RecognitionResult.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The set of properties exposed in the result.
     */
    get properties() {
        return this.privProperties;
    }
}

//# sourceMappingURL=RecognitionResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Recognizer.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Recognizer.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Recognizer": () => (/* binding */ Recognizer)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceRecognizerBase.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveSubscriptionKeyAuthentication.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveTokenAuthentication.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioConfig.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




/**
 * Defines the base class Recognizer which mainly contains common event handlers.
 * @class Recognizer
 */
class Recognizer {
    /**
     * Creates and initializes an instance of a Recognizer
     * @constructor
     * @param {AudioConfig} audioInput - An optional audio input stream associated with the recognizer
     */
    constructor(audioConfig, properties, connectionFactory) {
        this.audioConfig = (audioConfig !== undefined) ? audioConfig : _Exports__WEBPACK_IMPORTED_MODULE_0__.AudioConfig.fromDefaultMicrophoneInput();
        this.privDisposed = false;
        this.privProperties = properties.clone();
        this.privConnectionFactory = connectionFactory;
        this.implCommonRecognizerSetup();
    }
    /**
     * Dispose of associated resources.
     * @member Recognizer.prototype.close
     * @function
     * @public
     */
    close(cb, errorCb) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposed);
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_2__.marshalPromiseToCallbacks)(this.dispose(true), cb, errorCb);
    }
    /**
     * @Internal
     * Internal data member to support fromRecognizer* pattern methods on other classes.
     * Do not use externally, object returned will change without warning or notice.
     */
    get internalData() {
        return this.privReco;
    }
    /**
     * This method performs cleanup of resources.
     * The Boolean parameter disposing indicates whether the method is called
     * from Dispose (if disposing is true) or from the finalizer (if disposing is false).
     * Derived classes should override this method to dispose resource if needed.
     * @member Recognizer.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - Flag to request disposal.
     */
    dispose(disposing) {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privDisposed) {
                return;
            }
            this.privDisposed = true;
            if (disposing) {
                if (this.privReco) {
                    yield this.privReco.audioSource.turnOff();
                    yield this.privReco.dispose();
                }
            }
        });
    }
    /**
     * This method returns the current state of the telemetry setting.
     * @member Recognizer.prototype.telemetryEnabled
     * @function
     * @public
     * @returns true if the telemetry is enabled, false otherwise.
     */
    static get telemetryEnabled() {
        return _common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__.ServiceRecognizerBase.telemetryDataEnabled;
    }
    /**
     * This method globally enables or disables telemetry.
     * @member Recognizer.prototype.enableTelemetry
     * @function
     * @public
     * @param enabled - Global setting for telemetry collection.
     * If set to true, telemetry information like microphone errors,
     * recognition errors are collected and sent to Microsoft.
     * If set to false, no telemetry is sent to Microsoft.
     */
    static enableTelemetry(enabled) {
        _common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__.ServiceRecognizerBase.telemetryDataEnabled = enabled;
    }
    // Does the generic recognizer setup that is common across all recognizer types.
    implCommonRecognizerSetup() {
        let osPlatform = (typeof window !== "undefined") ? "Browser" : "Node";
        let osName = "unknown";
        let osVersion = "unknown";
        if (typeof navigator !== "undefined") {
            osPlatform = osPlatform + "/" + navigator.platform;
            osName = navigator.userAgent;
            osVersion = navigator.appVersion;
        }
        const recognizerConfig = this.createRecognizerConfig(new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.SpeechServiceConfig(new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.Context(new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.OS(osPlatform, osName, osVersion))));
        this.privReco = this.createServiceRecognizer(Recognizer.getAuthFromProperties(this.privProperties), this.privConnectionFactory, this.audioConfig, recognizerConfig);
    }
    recognizeOnceAsyncImpl(recognitionMode) {
        return __awaiter(this, void 0, void 0, function* () {
            _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposed);
            const ret = new _common_Exports__WEBPACK_IMPORTED_MODULE_2__.Deferred();
            yield this.implRecognizerStop();
            yield this.privReco.recognize(recognitionMode, ret.resolve, ret.reject);
            const result = yield ret.promise;
            yield this.implRecognizerStop();
            return result;
        });
    }
    startContinuousRecognitionAsyncImpl(recognitionMode) {
        return __awaiter(this, void 0, void 0, function* () {
            _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposed);
            yield this.implRecognizerStop();
            yield this.privReco.recognize(recognitionMode, undefined, undefined);
        });
    }
    stopContinuousRecognitionAsyncImpl() {
        return __awaiter(this, void 0, void 0, function* () {
            _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposed);
            yield this.implRecognizerStop();
        });
    }
    implRecognizerStop() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privReco) {
                yield this.privReco.stopRecognizing();
            }
            return;
        });
    }
    static getAuthFromProperties(properties) {
        const subscriptionKey = properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_5__.PropertyId.SpeechServiceConnection_Key, undefined);
        const authentication = (subscriptionKey && subscriptionKey !== "") ?
            new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_6__.CognitiveSubscriptionKeyAuthentication(subscriptionKey) :
            new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_7__.CognitiveTokenAuthentication(() => {
                const authorizationToken = properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_5__.PropertyId.SpeechServiceAuthorization_Token, undefined);
                return Promise.resolve(authorizationToken);
            }, () => {
                const authorizationToken = properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_5__.PropertyId.SpeechServiceAuthorization_Token, undefined);
                return Promise.resolve(authorizationToken);
            });
        return authentication;
    }
}

//# sourceMappingURL=Recognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ResultReason": () => (/* binding */ ResultReason)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines the possible reasons a recognition result might be generated.
 * @class ResultReason
 */
var ResultReason;
(function (ResultReason) {
    /**
     * Indicates speech could not be recognized. More details
     * can be found in the NoMatchDetails object.
     * @member ResultReason.NoMatch
     */
    ResultReason[ResultReason["NoMatch"] = 0] = "NoMatch";
    /**
     * Indicates that the recognition was canceled. More details
     * can be found using the CancellationDetails object.
     * @member ResultReason.Canceled
     */
    ResultReason[ResultReason["Canceled"] = 1] = "Canceled";
    /**
     * Indicates the speech result contains hypothesis text.
     * @member ResultReason.RecognizedSpeech
     */
    ResultReason[ResultReason["RecognizingSpeech"] = 2] = "RecognizingSpeech";
    /**
     * Indicates the speech result contains final text that has been recognized.
     * Speech Recognition is now complete for this phrase.
     * @member ResultReason.RecognizedSpeech
     */
    ResultReason[ResultReason["RecognizedSpeech"] = 3] = "RecognizedSpeech";
    /**
     * Indicates the speech result contains a finalized acceptance of a provided keyword.
     * Speech recognition will continue unless otherwise configured.
     * @member ResultReason.RecognizedKeyword
     */
    ResultReason[ResultReason["RecognizedKeyword"] = 4] = "RecognizedKeyword";
    /**
     * Indicates the intent result contains hypothesis text and intent.
     * @member ResultReason.RecognizingIntent
     */
    ResultReason[ResultReason["RecognizingIntent"] = 5] = "RecognizingIntent";
    /**
     * Indicates the intent result contains final text and intent.
     * Speech Recognition and Intent determination are now complete for this phrase.
     * @member ResultReason.RecognizedIntent
     */
    ResultReason[ResultReason["RecognizedIntent"] = 6] = "RecognizedIntent";
    /**
     * Indicates the translation result contains hypothesis text and its translation(s).
     * @member ResultReason.TranslatingSpeech
     */
    ResultReason[ResultReason["TranslatingSpeech"] = 7] = "TranslatingSpeech";
    /**
     * Indicates the translation result contains final text and corresponding translation(s).
     * Speech Recognition and Translation are now complete for this phrase.
     * @member ResultReason.TranslatedSpeech
     */
    ResultReason[ResultReason["TranslatedSpeech"] = 8] = "TranslatedSpeech";
    /**
     * Indicates the synthesized audio result contains a non-zero amount of audio data
     * @member ResultReason.SynthesizingAudio
     */
    ResultReason[ResultReason["SynthesizingAudio"] = 9] = "SynthesizingAudio";
    /**
     * Indicates the synthesized audio is now complete for this phrase.
     * @member ResultReason.SynthesizingAudioCompleted
     */
    ResultReason[ResultReason["SynthesizingAudioCompleted"] = 10] = "SynthesizingAudioCompleted";
    /**
     * Indicates the speech synthesis is now started
     * @member ResultReason.SynthesizingAudioStarted
     */
    ResultReason[ResultReason["SynthesizingAudioStarted"] = 11] = "SynthesizingAudioStarted";
    /**
     * Indicates the voice profile is being enrolled and customers need to send more audio to create a voice profile.
     * @member ResultReason.EnrollingVoiceProfile
     */
    ResultReason[ResultReason["EnrollingVoiceProfile"] = 12] = "EnrollingVoiceProfile";
    /**
     * Indicates the voice profile has been enrolled.
     * @member ResultReason.EnrolledVoiceProfile
     */
    ResultReason[ResultReason["EnrolledVoiceProfile"] = 13] = "EnrolledVoiceProfile";
    /**
     * Indicates successful identification of some speakers.
     * @member ResultReason.RecognizedSpeakers
     */
    ResultReason[ResultReason["RecognizedSpeakers"] = 14] = "RecognizedSpeakers";
    /**
     * Indicates successfully verified one speaker.
     * @member ResultReason.RecognizedSpeaker
     */
    ResultReason[ResultReason["RecognizedSpeaker"] = 15] = "RecognizedSpeaker";
    /**
     * Indicates a voice profile has been reset successfully.
     * @member ResultReason.ResetVoiceProfile
     */
    ResultReason[ResultReason["ResetVoiceProfile"] = 16] = "ResetVoiceProfile";
    /**
     * Indicates a voice profile has been deleted successfully.
     * @member ResultReason.DeletedVoiceProfile
     */
    ResultReason[ResultReason["DeletedVoiceProfile"] = 17] = "DeletedVoiceProfile";
    /**
     * Indicates synthesis voices list has been successfully retrieved.
     * @member ResultReason.VoicesListRetrieved
     */
    ResultReason[ResultReason["VoicesListRetrieved"] = 18] = "VoicesListRetrieved";
    /**
     * Indicates the transcription result contains hypothesis text and its translation(s) for
     * other participants in the conversation.
     * @member ResultReason.TranslatingParticipantSpeech
     */
    ResultReason[ResultReason["TranslatingParticipantSpeech"] = 19] = "TranslatingParticipantSpeech";
    /**
     * Indicates the transcription result contains final text and corresponding translation(s)
     * for other participants in the conversation. Speech Recognition and Translation are now
     * complete for this phrase.
     * @member ResultReason.TranslatedParticipantSpeech
     */
    ResultReason[ResultReason["TranslatedParticipantSpeech"] = 20] = "TranslatedParticipantSpeech";
    /**
     * <summary>
     * Indicates the transcription result contains the instant message and corresponding
     * translation(s).
     * @member ResultReason.TranslatedInstantMessage
     */
    ResultReason[ResultReason["TranslatedInstantMessage"] = 21] = "TranslatedInstantMessage";
    /**
     * Indicates the transcription result contains the instant message for other participants
     * in the conversation and corresponding translation(s).
     * @member ResultReason.TranslatedParticipantInstantMessage
     */
    ResultReason[ResultReason["TranslatedParticipantInstantMessage"] = 22] = "TranslatedParticipantInstantMessage";
})(ResultReason || (ResultReason = {}));

//# sourceMappingURL=ResultReason.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ServiceEventArgs.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ServiceEventArgs.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ServiceEventArgs": () => (/* binding */ ServiceEventArgs)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js");
//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//

/**
 * Defines payload for any Service message event
 * Added in version 1.9.0
 */
class ServiceEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__.SessionEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} json - json payload of the USP message.
     */
    constructor(json, name, sessionId) {
        super(sessionId);
        this.privJsonResult = json;
        this.privEventName = name;
    }
    get jsonString() {
        return this.privJsonResult;
    }
    get eventName() {
        return this.privEventName;
    }
}

//# sourceMappingURL=ServiceEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ServicePropertyChannel.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ServicePropertyChannel.js ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ServicePropertyChannel": () => (/* binding */ ServicePropertyChannel)
/* harmony export */ });
// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
/**
 * Defines channels used to pass property settings to service.
 * Added in version 1.7.0.
 */
var ServicePropertyChannel;
(function (ServicePropertyChannel) {
    /**
     * Uses URI query parameter to pass property settings to service.
     */
    ServicePropertyChannel[ServicePropertyChannel["UriQueryParameter"] = 0] = "UriQueryParameter";
})(ServicePropertyChannel || (ServicePropertyChannel = {}));

//# sourceMappingURL=ServicePropertyChannel.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SessionEventArgs": () => (/* binding */ SessionEventArgs)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines content for session events like SessionStarted/Stopped, SoundStarted/Stopped.
 * @class SessionEventArgs
 */
class SessionEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} sessionId - The session id.
     */
    constructor(sessionId) {
        this.privSessionId = sessionId;
    }
    /**
     * Represents the session identifier.
     * @member SessionEventArgs.prototype.sessionId
     * @function
     * @public
     * @returns {string} Represents the session identifier.
     */
    get sessionId() {
        return this.privSessionId;
    }
}

//# sourceMappingURL=SessionEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SourceLanguageConfig.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SourceLanguageConfig.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SourceLanguageConfig": () => (/* binding */ SourceLanguageConfig)
/* harmony export */ });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Source Language configuration.
 * @class SourceLanguageConfig
 */
class SourceLanguageConfig {
    constructor(language, endpointId) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(language, "language");
        this.privLanguage = language;
        this.privEndpointId = endpointId;
    }
    /**
     * @member SourceLanguageConfig.fromLanguage
     * @function
     * @public
     * @param {string} language language (eg. "en-US") value of config.
     * @param {string?} endpointId endpointId of model bound to given language of config.
     * @return {SourceLanguageConfig} Instance of SourceLanguageConfig
     * @summary Creates an instance of the SourceLanguageConfig with the given language and optional endpointId.
     * Added in version 1.13.0.
     */
    static fromLanguage(language, endpointId) {
        return new SourceLanguageConfig(language, endpointId);
    }
    get language() {
        return this.privLanguage;
    }
    get endpointId() {
        return this.privEndpointId;
    }
}

//# sourceMappingURL=SourceLanguageConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerIdentificationModel.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerIdentificationModel.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeakerIdentificationModel": () => (/* binding */ SpeakerIdentificationModel)
/* harmony export */ });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileType.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * Defines SpeakerIdentificationModel class for Speaker Recognition
 * Model contains a set of profiles against which to identify speaker(s)
 * @class SpeakerIdentificationModel
 */
class SpeakerIdentificationModel {
    constructor(profiles) {
        this.privVoiceProfiles = [];
        this.privProfileIds = [];
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(profiles, "VoiceProfiles");
        if (profiles.length === 0) {
            throw new Error("Empty Voice Profiles array");
        }
        for (const profile of profiles) {
            if (profile.profileType !== _Exports__WEBPACK_IMPORTED_MODULE_1__.VoiceProfileType.TextIndependentIdentification) {
                throw new Error("Identification model can only be created from Identification profile: " + profile.profileId);
            }
            this.privVoiceProfiles.push(profile);
            this.privProfileIds.push(profile.profileId);
        }
    }
    static fromProfiles(profiles) {
        return new SpeakerIdentificationModel(profiles);
    }
    get voiceProfileIds() {
        return this.privProfileIds.join(",");
    }
    get profileIds() {
        return this.privProfileIds;
    }
    get scenario() {
        return "TextIndependentIdentification";
    }
}

//# sourceMappingURL=SpeakerIdentificationModel.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerRecognitionResult.js":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerRecognitionResult.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeakerRecognitionCancellationDetails": () => (/* binding */ SpeakerRecognitionCancellationDetails),
/* harmony export */   "SpeakerRecognitionResult": () => (/* binding */ SpeakerRecognitionResult),
/* harmony export */   "SpeakerRecognitionResultType": () => (/* binding */ SpeakerRecognitionResultType)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetailsBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */


var SpeakerRecognitionResultType;
(function (SpeakerRecognitionResultType) {
    SpeakerRecognitionResultType[SpeakerRecognitionResultType["Verify"] = 0] = "Verify";
    SpeakerRecognitionResultType[SpeakerRecognitionResultType["Identify"] = 1] = "Identify";
})(SpeakerRecognitionResultType || (SpeakerRecognitionResultType = {}));
/**
 * Output format
 * @class SpeakerRecognitionResult
 */
class SpeakerRecognitionResult {
    constructor(response, resultReason = _Exports__WEBPACK_IMPORTED_MODULE_0__.ResultReason.RecognizedSpeaker, cancellationErrorCode = _Exports__WEBPACK_IMPORTED_MODULE_1__.CancellationErrorCode.NoError, errorDetails = "") {
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyCollection();
        const resultType = response.scenario === "TextIndependentIdentification" ? SpeakerRecognitionResultType.Identify : SpeakerRecognitionResultType.Verify;
        this.privReason = resultReason;
        if (this.privReason !== _Exports__WEBPACK_IMPORTED_MODULE_0__.ResultReason.Canceled) {
            if (resultType === SpeakerRecognitionResultType.Identify) {
                this.privProfileId = response.identificationResult.identifiedProfile.profileId;
                this.privScore = response.identificationResult.identifiedProfile.score;
                this.privReason = _Exports__WEBPACK_IMPORTED_MODULE_0__.ResultReason.RecognizedSpeakers;
            }
            else {
                this.privScore = response.verificationResult.score;
                if (response.verificationResult.recognitionResult.toLowerCase() !== "accept") {
                    this.privReason = _Exports__WEBPACK_IMPORTED_MODULE_0__.ResultReason.NoMatch;
                }
                if (response.verificationResult.profileId !== undefined && response.verificationResult.profileId !== "") {
                    this.privProfileId = response.verificationResult.profileId;
                }
            }
        }
        else {
            this.privErrorDetails = errorDetails;
            this.privProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCodePropertyName, _Exports__WEBPACK_IMPORTED_MODULE_1__.CancellationErrorCode[cancellationErrorCode]);
        }
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.SpeechServiceResponse_JsonResult, JSON.stringify(response));
    }
    get properties() {
        return this.privProperties;
    }
    get reason() {
        return this.privReason;
    }
    get profileId() {
        return this.privProfileId;
    }
    get errorDetails() {
        return this.privErrorDetails;
    }
    get score() {
        return this.privScore;
    }
}
/**
 * @class SpeakerRecognitionCancellationDetails
 */
class SpeakerRecognitionCancellationDetails extends _Exports__WEBPACK_IMPORTED_MODULE_5__.CancellationDetailsBase {
    constructor(reason, errorDetails, errorCode) {
        super(reason, errorDetails, errorCode);
    }
    /**
     * Creates an instance of SpeakerRecognitionCancellationDetails object for the canceled SpeakerRecognitionResult
     * @member SpeakerRecognitionCancellationDetails.fromResult
     * @function
     * @public
     * @param {SpeakerRecognitionResult} result - The result that was canceled.
     * @returns {SpeakerRecognitionCancellationDetails} The cancellation details object being created.
     */
    static fromResult(result) {
        const reason = _Exports__WEBPACK_IMPORTED_MODULE_6__.CancellationReason.Error;
        let errorCode = _Exports__WEBPACK_IMPORTED_MODULE_1__.CancellationErrorCode.NoError;
        if (!!result.properties) {
            errorCode = _Exports__WEBPACK_IMPORTED_MODULE_1__.CancellationErrorCode[result.properties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCodePropertyName, _Exports__WEBPACK_IMPORTED_MODULE_1__.CancellationErrorCode[_Exports__WEBPACK_IMPORTED_MODULE_1__.CancellationErrorCode.NoError])];
        }
        return new SpeakerRecognitionCancellationDetails(reason, result.errorDetails, errorCode);
    }
}

//# sourceMappingURL=SpeakerRecognitionResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerRecognizer.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerRecognizer.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeakerRecognizer": () => (/* binding */ SpeakerRecognizer)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeakerRecognitionConnectionFactory.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeakerServiceRecognizer.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Recognizer.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



/**
 * Defines SpeakerRecognizer class for Speaker Recognition
 * Handles operations from user for Voice Profile operations (e.g. createProfile, deleteProfile)
 * @class SpeakerRecognizer
 */
class SpeakerRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_0__.Recognizer {
    /**
     * Initializes an instance of the SpeakerRecognizer.
     * @constructor
     * @param {SpeechConfig} speechConfig - The set of configuration properties.
     * @param {AudioConfig} audioConfig - An optional audio input config associated with the recognizer
     */
    constructor(speechConfig, audioConfig) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(speechConfig, "speechConfig");
        const configImpl = speechConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(configImpl, "speechConfig");
        super(audioConfig, configImpl.properties, new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeakerRecognitionConnectionFactory());
        this.privAudioConfigImpl = audioConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNull(this.privAudioConfigImpl, "audioConfig");
        this.privDisposedSpeakerRecognizer = false;
        this.privProperties = configImpl.properties;
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member SpeakerRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceAuthorization_Token);
    }
    /**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member SpeakerRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */
    set authorizationToken(token) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(token, "token");
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceAuthorization_Token, token);
    }
    /**
     * The collection of properties and their values defined for this SpeakerRecognizer.
     * @member SpeakerRecognizer.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this SpeakerRecognizer.
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * Get recognition result for model using given audio
     * @member SpeakerRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @async
     * @param {SpeakerIdentificationModel | SpeakerVerificationModel} model Model containing Voice Profiles to be identified
     * @param cb - Callback invoked once result is returned.
     * @param err - Callback invoked in case of an error.
     */
    recognizeOnceAsync(model) {
        return __awaiter(this, void 0, void 0, function* () {
            _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer);
            return this.recognizeSpeakerOnceAsyncImpl(model);
        });
    }
    /**
     * Included for compatibility
     * @member SpeakerRecognizer.prototype.close
     * @function
     * @public
     * @async
     */
    close() {
        return __awaiter(this, void 0, void 0, function* () {
            _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer);
            yield this.dispose(true);
        });
    }
    recognizeSpeakerOnceAsyncImpl(model) {
        return __awaiter(this, void 0, void 0, function* () {
            _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer);
            yield this.implRecognizerStop();
            const result = yield this.privReco.recognizeSpeaker(model);
            yield this.implRecognizerStop();
            return result;
        });
    }
    implRecognizerStop() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privReco) {
                yield this.privReco.stopRecognizing();
            }
            return;
        });
    }
    createRecognizerConfig(speechConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.RecognizerConfig(speechConfig, this.privProperties);
    }
    createServiceRecognizer(authentication, connectionFactory, audioConfig, recognizerConfig) {
        const audioImpl = audioConfig;
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.SpeakerServiceRecognizer(authentication, connectionFactory, audioImpl, recognizerConfig, this);
    }
    dispose(disposing) {
        const _super = Object.create(null, {
            dispose: { get: () => super.dispose }
        });
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privDisposedSpeakerRecognizer) {
                return;
            }
            if (disposing) {
                this.privDisposedSpeakerRecognizer = true;
                yield _super.dispose.call(this, disposing);
            }
        });
    }
}

//# sourceMappingURL=SpeakerRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerVerificationModel.js":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeakerVerificationModel.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeakerVerificationModel": () => (/* binding */ SpeakerVerificationModel)
/* harmony export */ });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileType.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * Defines SpeakerVerificationModel class for Speaker Recognition
 * Model contains a profile against which to verify a speaker
 * @class SpeakerVerificationModel
 */
class SpeakerVerificationModel {
    constructor(profile) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(profile, "VoiceProfile");
        if (profile.profileType === _Exports__WEBPACK_IMPORTED_MODULE_1__.VoiceProfileType.TextIndependentIdentification) {
            throw new Error("Verification model cannot be created from Identification profile");
        }
        this.privVoiceProfile = profile;
    }
    static fromProfile(profile) {
        return new SpeakerVerificationModel(profile);
    }
    get voiceProfile() {
        return this.privVoiceProfile;
    }
    get profileIds() {
        return [this.voiceProfile.profileId];
    }
    get scenario() {
        if (this.voiceProfile.profileType === _Exports__WEBPACK_IMPORTED_MODULE_1__.VoiceProfileType.TextDependentVerification) {
            return "TextDependentVerification";
        }
        else {
            return "TextIndependentVerification";
        }
    }
}

//# sourceMappingURL=SpeakerVerificationModel.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechConfig.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechConfig.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechConfig": () => (/* binding */ SpeechConfig),
/* harmony export */   "SpeechConfigImpl": () => (/* binding */ SpeechConfigImpl)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/OutputFormat.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ProfanityOption.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisOutputFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */



/**
 * Speech configuration.
 * @class SpeechConfig
 */
class SpeechConfig {
    /**
     * Creates and initializes an instance.
     * @constructor
     */
    constructor() {
        return;
    }
    /**
     * Static instance of SpeechConfig returned by passing subscriptionKey and service region.
     * Note: Please use your LanguageUnderstanding subscription key in case you want to use the Intent recognizer.
     * @member SpeechConfig.fromSubscription
     * @function
     * @public
     * @param {string} subscriptionKey - The subscription key.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechConfig} The speech factory
     */
    static fromSubscription(subscriptionKey, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(subscriptionKey, "subscriptionKey");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(region, "region");
        const speechImpl = new SpeechConfigImpl();
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Region, region);
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_IntentRegion, region);
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Key, subscriptionKey);
        return speechImpl;
    }
    /**
     * Creates an instance of the speech config with specified endpoint and subscription key.
     * This method is intended only for users who use a non-standard service endpoint or parameters.
     * Note: Please use your LanguageUnderstanding subscription key in case you want to use the Intent recognizer.
     * Note: The query parameters specified in the endpoint URL are not changed, even if they are set by any other APIs.
     * For example, if language is defined in the uri as query parameter "language=de-DE", and also set by
     * SpeechConfig.speechRecognitionLanguage = "en-US", the language setting in uri takes precedence,
     * and the effective language is "de-DE". Only the parameters that are not specified in the
     * endpoint URL can be set by other APIs.
     * Note: To use authorization token with fromEndpoint, pass an empty string to the subscriptionKey in the
     * fromEndpoint method, and then set authorizationToken="token" on the created SpeechConfig instance to
     * use the authorization token.
     * @member SpeechConfig.fromEndpoint
     * @function
     * @public
     * @param {URL} endpoint - The service endpoint to connect to.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization token must be set.
     * @returns {SpeechConfig} A speech factory instance.
     */
    static fromEndpoint(endpoint, subscriptionKey) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNull(endpoint, "endpoint");
        const speechImpl = new SpeechConfigImpl();
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Endpoint, endpoint.href);
        if (undefined !== subscriptionKey) {
            speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Key, subscriptionKey);
        }
        return speechImpl;
    }
    /**
     * Creates an instance of the speech config with specified host and subscription key.
     * This method is intended only for users who use a non-default service host. Standard resource path will be assumed.
     * For services with a non-standard resource path or no path at all, use fromEndpoint instead.
     * Note: Query parameters are not allowed in the host URI and must be set by other APIs.
     * Note: To use an authorization token with fromHost, use fromHost(URL),
     * and then set the AuthorizationToken property on the created SpeechConfig instance.
     * Note: Added in version 1.9.0.
     * @member SpeechConfig.fromHost
     * @function
     * @public
     * @param {URL} host - The service endpoint to connect to. Format is "protocol://host:port" where ":port" is optional.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization token must be set.
     * @returns {SpeechConfig} A speech factory instance.
     */
    static fromHost(hostName, subscriptionKey) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNull(hostName, "hostName");
        const speechImpl = new SpeechConfigImpl();
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Host, hostName.protocol + "//" + hostName.hostname + (hostName.port === "" ? "" : ":" + hostName.port));
        if (undefined !== subscriptionKey) {
            speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Key, subscriptionKey);
        }
        return speechImpl;
    }
    /**
     * Creates an instance of the speech factory with specified initial authorization token and region.
     * Note: The caller needs to ensure that the authorization token is valid. Before the authorization token
     * expires, the caller needs to refresh it by calling this setter with a new valid token.
     * Note: Please use a token derived from your LanguageUnderstanding subscription key in case you want
     * to use the Intent recognizer. As configuration values are copied when creating a new recognizer,
     * the new token value will not apply to recognizers that have already been created. For recognizers
     * that have been created before, you need to set authorization token of the corresponding recognizer
     * to refresh the token. Otherwise, the recognizers will encounter errors during recognition.
     * @member SpeechConfig.fromAuthorizationToken
     * @function
     * @public
     * @param {string} authorizationToken - The initial authorization token.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechConfig} A speech factory instance.
     */
    static fromAuthorizationToken(authorizationToken, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNull(authorizationToken, "authorizationToken");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(region, "region");
        const speechImpl = new SpeechConfigImpl();
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Region, region);
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_IntentRegion, region);
        speechImpl.authorizationToken = authorizationToken;
        return speechImpl;
    }
    /**
     * Closes the configuration.
     * @member SpeechConfig.prototype.close
     * @function
     * @public
     */
    // eslint-disable-next-line @typescript-eslint/no-empty-function
    close() { }
}
/**
 * @public
 * @class SpeechConfigImpl
 */
class SpeechConfigImpl extends SpeechConfig {
    constructor() {
        super();
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyCollection();
        this.speechRecognitionLanguage = "en-US"; // Should we have a default?
        this.outputFormat = _Exports__WEBPACK_IMPORTED_MODULE_3__.OutputFormat.Simple;
    }
    get properties() {
        return this.privProperties;
    }
    get endPoint() {
        return new URL(this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Endpoint));
    }
    get subscriptionKey() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Key);
    }
    get region() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_Region);
    }
    get authorizationToken() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceAuthorization_Token);
    }
    set authorizationToken(value) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceAuthorization_Token, value);
    }
    get speechRecognitionLanguage() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_RecoLanguage);
    }
    set speechRecognitionLanguage(value) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_RecoLanguage, value);
    }
    get autoDetectSourceLanguages() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages);
    }
    set autoDetectSourceLanguages(value) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages, value);
    }
    get outputFormat() {
        return _Exports__WEBPACK_IMPORTED_MODULE_3__.OutputFormat[this.privProperties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.OutputFormatPropertyName, undefined)];
    }
    set outputFormat(value) {
        this.privProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.OutputFormatPropertyName, _Exports__WEBPACK_IMPORTED_MODULE_3__.OutputFormat[value]);
    }
    get endpointId() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_EndpointId);
    }
    set endpointId(value) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_EndpointId, value);
    }
    setProperty(name, value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNull(value, "value");
        this.privProperties.setProperty(name, value);
    }
    getProperty(name, def) {
        return this.privProperties.getProperty(name, def);
    }
    setProxy(proxyHostName, proxyPort, proxyUserName, proxyPassword) {
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_ProxyHostName], proxyHostName);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_ProxyPort], proxyPort);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_ProxyUserName], proxyUserName);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_ProxyPassword], proxyPassword);
    }
    setServiceProperty(name, value) {
        const currentProperties = JSON.parse(this.privProperties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ServicePropertiesPropertyName, "{}"));
        currentProperties[name] = value;
        this.privProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ServicePropertiesPropertyName, JSON.stringify(currentProperties));
    }
    setProfanity(profanity) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceResponse_ProfanityOption, _Exports__WEBPACK_IMPORTED_MODULE_5__.ProfanityOption[profanity]);
    }
    enableAudioLogging() {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_EnableAudioLogging, "true");
    }
    requestWordLevelTimestamps() {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps, "true");
    }
    enableDictation() {
        this.privProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ForceDictationPropertyName, "true");
    }
    clone() {
        const ret = new SpeechConfigImpl();
        ret.privProperties = this.privProperties.clone();
        return ret;
    }
    get speechSynthesisLanguage() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_SynthLanguage);
    }
    set speechSynthesisLanguage(language) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_SynthLanguage, language);
    }
    get speechSynthesisVoiceName() {
        return this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_SynthVoice);
    }
    set speechSynthesisVoiceName(voice) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_SynthVoice, voice);
    }
    get speechSynthesisOutputFormat() {
        return _Exports__WEBPACK_IMPORTED_MODULE_6__.SpeechSynthesisOutputFormat[this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_SynthOutputFormat, undefined)];
    }
    set speechSynthesisOutputFormat(format) {
        this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_1__.PropertyId.SpeechServiceConnection_SynthOutputFormat, _Exports__WEBPACK_IMPORTED_MODULE_6__.SpeechSynthesisOutputFormat[format]);
    }
}

//# sourceMappingURL=SpeechConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionCanceledEventArgs.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionCanceledEventArgs.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechRecognitionCanceledEventArgs": () => (/* binding */ SpeechRecognitionCanceledEventArgs)
/* harmony export */ });
/* harmony import */ var _CancellationEventArgsBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CancellationEventArgsBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationEventArgsBase.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

class SpeechRecognitionCanceledEventArgs extends _CancellationEventArgsBase__WEBPACK_IMPORTED_MODULE_0__.CancellationEventArgsBase {
}

//# sourceMappingURL=SpeechRecognitionCanceledEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionEventArgs.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionEventArgs.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationTranscriptionEventArgs": () => (/* binding */ ConversationTranscriptionEventArgs),
/* harmony export */   "SpeechRecognitionEventArgs": () => (/* binding */ SpeechRecognitionEventArgs)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionEventArgs.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */

/**
 * Defines contents of speech recognizing/recognized event.
 * @class SpeechRecognitionEventArgs
 */
class SpeechRecognitionEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__.RecognitionEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {SpeechRecognitionResult} result - The speech recognition result.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */
    constructor(result, offset, sessionId) {
        super(offset, sessionId);
        this.privResult = result;
    }
    /**
     * Specifies the recognition result.
     * @member SpeechRecognitionEventArgs.prototype.result
     * @function
     * @public
     * @returns {SpeechRecognitionResult} the recognition result.
     */
    get result() {
        return this.privResult;
    }
}
/**
 * Defines contents of conversation transcribed/transcribing event.
 * @class ConversationTranscriptionEventArgs
 */
class ConversationTranscriptionEventArgs extends SpeechRecognitionEventArgs {
}

//# sourceMappingURL=SpeechRecognitionEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionResult.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionResult.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechRecognitionResult": () => (/* binding */ SpeechRecognitionResult)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionResult.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Defines result of speech recognition.
 * @class SpeechRecognitionResult
 */
class SpeechRecognitionResult extends _Exports__WEBPACK_IMPORTED_MODULE_0__.RecognitionResult {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @public
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} language - Primary Language detected, if provided.
     * @param {string} languageDetectionConfidence - Primary Language confidence ("Unknown," "Low," "Medium," "High"...), if provided.
     * @param {string} speakerId - speaker id for conversation transcription, if provided.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */
    constructor(resultId, reason, text, duration, offset, language, languageDetectionConfidence, speakerId, errorDetails, json, properties) {
        super(resultId, reason, text, duration, offset, language, languageDetectionConfidence, errorDetails, json, properties);
        this.privSpeakerId = speakerId;
    }
    /**
     * speaker id from conversation transcription/id scenarios
     * @member SpeechRecognitionResult.prototype.speakerId
     * @function
     * @public
     * @returns {string} id of speaker in given result
     */
    get speakerId() {
        return this.privSpeakerId;
    }
}

//# sourceMappingURL=SpeechRecognitionResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognizer.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognizer.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechRecognizer": () => (/* binding */ SpeechRecognizer)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechConnectionFactory.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechServiceRecognizer.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Recognizer.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/OutputFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




/**
 * Performs speech recognition from microphone, file, or other audio input streams, and gets transcribed text as result.
 * @class SpeechRecognizer
 */
class SpeechRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_0__.Recognizer {
    /**
     * SpeechRecognizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - an set of initial properties for this recognizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */
    constructor(speechConfig, audioConfig) {
        const speechConfigImpl = speechConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNull(speechConfigImpl, "speechConfig");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(speechConfigImpl.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_RecoLanguage), _Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_RecoLanguage]);
        super(audioConfig, speechConfigImpl.properties, new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__.SpeechConnectionFactory());
        this.privDisposedRecognizer = false;
    }
    /**
     * SpeechRecognizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - an set of initial properties for this recognizer
     * @param {AutoDetectSourceLanguageConfig} autoDetectSourceLanguageConfig - An source language detection configuration associated with the recognizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */
    static FromConfig(speechConfig, autoDetectSourceLanguageConfig, audioConfig) {
        const speechConfigImpl = speechConfig;
        autoDetectSourceLanguageConfig.properties.mergeTo(speechConfigImpl.properties);
        const recognizer = new SpeechRecognizer(speechConfig, audioConfig);
        return recognizer;
    }
    /**
     * Gets the endpoint id of a customized speech model that is used for speech recognition.
     * @member SpeechRecognizer.prototype.endpointId
     * @function
     * @public
     * @returns {string} the endpoint id of a customized speech model that is used for speech recognition.
     */
    get endpointId() {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_EndpointId, "00000000-0000-0000-0000-000000000000");
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member SpeechRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceAuthorization_Token);
    }
    /**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member SpeechRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */
    set authorizationToken(token) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(token, "token");
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceAuthorization_Token, token);
    }
    /**
     * Gets the spoken language of recognition.
     * @member SpeechRecognizer.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @returns {string} The spoken language of recognition.
     */
    get speechRecognitionLanguage() {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_RecoLanguage);
    }
    /**
     * Gets the output format of recognition.
     * @member SpeechRecognizer.prototype.outputFormat
     * @function
     * @public
     * @returns {OutputFormat} The output format of recognition.
     */
    get outputFormat() {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedRecognizer);
        if (this.properties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.OutputFormatPropertyName, _Exports__WEBPACK_IMPORTED_MODULE_5__.OutputFormat[_Exports__WEBPACK_IMPORTED_MODULE_5__.OutputFormat.Simple]) === _Exports__WEBPACK_IMPORTED_MODULE_5__.OutputFormat[_Exports__WEBPACK_IMPORTED_MODULE_5__.OutputFormat.Simple]) {
            return _Exports__WEBPACK_IMPORTED_MODULE_5__.OutputFormat.Simple;
        }
        else {
            return _Exports__WEBPACK_IMPORTED_MODULE_5__.OutputFormat.Detailed;
        }
    }
    /**
     * The collection of properties and their values defined for this SpeechRecognizer.
     * @member SpeechRecognizer.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this SpeechRecognizer.
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * Starts speech recognition, and stops after the first utterance is recognized.
     * The task returns the recognition text as result.
     * Note: RecognizeOnceAsync() returns when the first utterance has been recognized,
     * so it is suitable only for single shot recognition
     * like command or query. For long-running recognition, use StartContinuousRecognitionAsync() instead.
     * @member SpeechRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the SpeechRecognitionResult.
     * @param err - Callback invoked in case of an error.
     */
    recognizeOnceAsync(cb, err) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_6__.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_7__.RecognitionMode.Interactive), cb, err);
    }
    /**
     * Starts speech recognition, until stopContinuousRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * @member SpeechRecognizer.prototype.startContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */
    startContinuousRecognitionAsync(cb, err) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_6__.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_7__.RecognitionMode.Conversation), cb, err);
    }
    /**
     * Stops continuous speech recognition.
     * @member SpeechRecognizer.prototype.stopContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */
    stopContinuousRecognitionAsync(cb, err) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_6__.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(), cb, err);
    }
    /**
     * Starts speech recognition with keyword spotting, until
     * stopKeywordRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * Note: Key word spotting functionality is only available on the
     * Speech Devices SDK. This functionality is currently not included in the SDK itself.
     * @member SpeechRecognizer.prototype.startKeywordRecognitionAsync
     * @function
     * @public
     * @param {KeywordRecognitionModel} model The keyword recognition model that
     * specifies the keyword to be recognized.
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */
    startKeywordRecognitionAsync(model, cb, err) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNull(model, "model");
        if (!!err) {
            err("Not yet implemented.");
        }
    }
    /**
     * Stops continuous speech recognition.
     * Note: Key word spotting functionality is only available on the
     * Speech Devices SDK. This functionality is currently not included in the SDK itself.
     * @member SpeechRecognizer.prototype.stopKeywordRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */
    stopKeywordRecognitionAsync(cb) {
        if (!!cb) {
            cb();
        }
    }
    /**
     * closes all external resources held by an instance of this class.
     * @member SpeechRecognizer.prototype.close
     * @function
     * @public
     */
    close(cb, errorCb) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedRecognizer);
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_6__.marshalPromiseToCallbacks)(this.dispose(true), cb, errorCb);
    }
    /**
     * Disposes any resources held by the object.
     * @member SpeechRecognizer.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - true if disposing the object.
     */
    dispose(disposing) {
        const _super = Object.create(null, {
            dispose: { get: () => super.dispose }
        });
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privDisposedRecognizer) {
                return;
            }
            if (disposing) {
                this.privDisposedRecognizer = true;
                yield this.implRecognizerStop();
            }
            yield _super.dispose.call(this, disposing);
        });
    }
    createRecognizerConfig(speechConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_7__.RecognizerConfig(speechConfig, this.privProperties);
    }
    createServiceRecognizer(authentication, connectionFactory, audioConfig, recognizerConfig) {
        const configImpl = audioConfig;
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_8__.SpeechServiceRecognizer(authentication, connectionFactory, configImpl, recognizerConfig, this);
    }
}

//# sourceMappingURL=SpeechRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisBookmarkEventArgs.js":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisBookmarkEventArgs.js ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechSynthesisBookmarkEventArgs": () => (/* binding */ SpeechSynthesisBookmarkEventArgs)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines contents of speech synthesis bookmark event.
 * @class SpeechSynthesisBookmarkEventArgs
 * Added in version 1.16.0
 */
class SpeechSynthesisBookmarkEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} audioOffset - The audio offset.
     * @param {string} text - The bookmark text.
     */
    constructor(audioOffset, text) {
        this.privAudioOffset = audioOffset;
        this.privText = text;
    }
    /**
     * Specifies the audio offset.
     * @member SpeechSynthesisBookmarkEventArgs.prototype.audioOffset
     * @function
     * @public
     * @returns {number} the audio offset.
     */
    get audioOffset() {
        return this.privAudioOffset;
    }
    /**
     * Specifies the bookmark.
     * @member SpeechSynthesisBookmarkEventArgs.prototype.text
     * @function
     * @public
     * @returns {string} the bookmark text.
     */
    get text() {
        return this.privText;
    }
}

//# sourceMappingURL=SpeechSynthesisBookmarkEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisBoundaryType.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisBoundaryType.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechSynthesisBoundaryType": () => (/* binding */ SpeechSynthesisBoundaryType)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines the boundary type of speech synthesis boundary event.
 * @class SpeechSynthesisBoundaryType
 * Added in version 1.21.0
 */
var SpeechSynthesisBoundaryType;
(function (SpeechSynthesisBoundaryType) {
    /**
     * Indicates the boundary text is a word.
     * @member SpeechSynthesisBoundaryType.Word
     */
    SpeechSynthesisBoundaryType["Word"] = "WordBoundary";
    /**
     * Indicates the boundary text is a punctuation.
     * @member SpeechSynthesisBoundaryType.Punctuation
     */
    SpeechSynthesisBoundaryType["Punctuation"] = "PunctuationBoundary";
    /**
     * Indicates the boundary text is a sentence.
     * @member SpeechSynthesisBoundaryType.Sentence
     */
    SpeechSynthesisBoundaryType["Sentence"] = "SentenceBoundary";
})(SpeechSynthesisBoundaryType || (SpeechSynthesisBoundaryType = {}));

//# sourceMappingURL=SpeechSynthesisBoundaryType.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisEventArgs.js":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisEventArgs.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechSynthesisEventArgs": () => (/* binding */ SpeechSynthesisEventArgs)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines contents of speech synthesis events.
 * @class SpeechSynthesisEventArgs
 * Added in version 1.11.0
 */
class SpeechSynthesisEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {SpeechSynthesisResult} result - The speech synthesis result.
     */
    constructor(result) {
        this.privResult = result;
    }
    /**
     * Specifies the synthesis result.
     * @member SpeechSynthesisEventArgs.prototype.result
     * @function
     * @public
     * @returns {SpeechSynthesisResult} the synthesis result.
     */
    get result() {
        return this.privResult;
    }
}

//# sourceMappingURL=SpeechSynthesisEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisOutputFormat.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisOutputFormat.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechSynthesisOutputFormat": () => (/* binding */ SpeechSynthesisOutputFormat)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Define speech synthesis audio output formats.
 * @enum SpeechSynthesisOutputFormat
 * Updated in version 1.17.0
 */
var SpeechSynthesisOutputFormat;
(function (SpeechSynthesisOutputFormat) {
    /**
     * raw-8khz-8bit-mono-mulaw
     * @member SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw,
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw8Khz8BitMonoMULaw"] = 0] = "Raw8Khz8BitMonoMULaw";
    /**
     * riff-16khz-16kbps-mono-siren
     * @note Unsupported by the service. Do not use this value.
     * @member SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff16Khz16KbpsMonoSiren"] = 1] = "Riff16Khz16KbpsMonoSiren";
    /**
     * audio-16khz-16kbps-mono-siren
     * @note Unsupported by the service. Do not use this value.
     * @member SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio16Khz16KbpsMonoSiren"] = 2] = "Audio16Khz16KbpsMonoSiren";
    /**
     * audio-16khz-32kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio16Khz32KBitRateMonoMp3"] = 3] = "Audio16Khz32KBitRateMonoMp3";
    /**
     * audio-16khz-128kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio16Khz128KBitRateMonoMp3"] = 4] = "Audio16Khz128KBitRateMonoMp3";
    /**
     * audio-16khz-64kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio16Khz64KBitRateMonoMp3"] = 5] = "Audio16Khz64KBitRateMonoMp3";
    /**
     * audio-24khz-48kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio24Khz48KBitRateMonoMp3"] = 6] = "Audio24Khz48KBitRateMonoMp3";
    /**
     * audio-24khz-96kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio24Khz96KBitRateMonoMp3"] = 7] = "Audio24Khz96KBitRateMonoMp3";
    /**
     * audio-24khz-160kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio24Khz160KBitRateMonoMp3"] = 8] = "Audio24Khz160KBitRateMonoMp3";
    /**
     * raw-16khz-16bit-mono-truesilk
     * @member SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw16Khz16BitMonoTrueSilk"] = 9] = "Raw16Khz16BitMonoTrueSilk";
    /**
     * riff-16khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff16Khz16BitMonoPcm"] = 10] = "Riff16Khz16BitMonoPcm";
    /**
     * riff-8khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff8Khz16BitMonoPcm"] = 11] = "Riff8Khz16BitMonoPcm";
    /**
     * riff-24khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff24Khz16BitMonoPcm"] = 12] = "Riff24Khz16BitMonoPcm";
    /**
     * riff-8khz-8bit-mono-mulaw
     * @member SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff8Khz8BitMonoMULaw"] = 13] = "Riff8Khz8BitMonoMULaw";
    /**
     * raw-16khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw16Khz16BitMonoPcm"] = 14] = "Raw16Khz16BitMonoPcm";
    /**
     * raw-24khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw24Khz16BitMonoPcm"] = 15] = "Raw24Khz16BitMonoPcm";
    /**
     * raw-8khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw8Khz16BitMonoPcm"] = 16] = "Raw8Khz16BitMonoPcm";
    /**
     * ogg-16khz-16bit-mono-opus
     * @member SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Ogg16Khz16BitMonoOpus"] = 17] = "Ogg16Khz16BitMonoOpus";
    /**
     * ogg-24khz-16bit-mono-opus
     * @member SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Ogg24Khz16BitMonoOpus"] = 18] = "Ogg24Khz16BitMonoOpus";
    /**
     * raw-48khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw48Khz16BitMonoPcm"] = 19] = "Raw48Khz16BitMonoPcm";
    /**
     * riff-48khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff48Khz16BitMonoPcm"] = 20] = "Riff48Khz16BitMonoPcm";
    /**
     * audio-48khz-96kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio48Khz96KBitRateMonoMp3"] = 21] = "Audio48Khz96KBitRateMonoMp3";
    /**
     * audio-48khz-192kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio48Khz192KBitRateMonoMp3"] = 22] = "Audio48Khz192KBitRateMonoMp3";
    /**
     * ogg-48khz-16bit-mono-opus
     * Added in version 1.16.0
     * @member SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Ogg48Khz16BitMonoOpus"] = 23] = "Ogg48Khz16BitMonoOpus";
    /**
     * webm-16khz-16bit-mono-opus
     * Added in version 1.16.0
     * @member SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Webm16Khz16BitMonoOpus"] = 24] = "Webm16Khz16BitMonoOpus";
    /**
     * webm-24khz-16bit-mono-opus
     * Added in version 1.16.0
     * @member SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Webm24Khz16BitMonoOpus"] = 25] = "Webm24Khz16BitMonoOpus";
    /**
     * raw-24khz-16bit-mono-truesilk
     * Added in version 1.17.0
     * @member SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw24Khz16BitMonoTrueSilk"] = 26] = "Raw24Khz16BitMonoTrueSilk";
    /**
     * raw-8khz-8bit-mono-alaw
     * Added in version 1.17.0
     * @member SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw8Khz8BitMonoALaw"] = 27] = "Raw8Khz8BitMonoALaw";
    /**
     * riff-8khz-8bit-mono-alaw
     * Added in version 1.17.0
     * @member SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff8Khz8BitMonoALaw"] = 28] = "Riff8Khz8BitMonoALaw";
    /**
     * webm-24khz-16bit-24kbps-mono-opus
     * Audio compressed by OPUS codec in a webm container, with bitrate of 24kbps, optimized for IoT scenario.
     * Added in version 1.19.0
     * @member SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Webm24Khz16Bit24KbpsMonoOpus"] = 29] = "Webm24Khz16Bit24KbpsMonoOpus";
    /**
     * audio-16khz-16bit-32kbps-mono-opus
     * Audio compressed by OPUS codec without container, with bitrate of 32kbps.
     * Added in version 1.20.0
     * @member SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio16Khz16Bit32KbpsMonoOpus"] = 30] = "Audio16Khz16Bit32KbpsMonoOpus";
    /**
     * audio-24khz-16bit-48kbps-mono-opus
     * Audio compressed by OPUS codec without container, with bitrate of 48kbps.
     * Added in version 1.20.0
     * @member SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio24Khz16Bit48KbpsMonoOpus"] = 31] = "Audio24Khz16Bit48KbpsMonoOpus";
    /**
     * audio-24khz-16bit-24kbps-mono-opus
     * Audio compressed by OPUS codec without container, with bitrate of 24kbps.
     * Added in version 1.20.0
     * @member SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio24Khz16Bit24KbpsMonoOpus"] = 32] = "Audio24Khz16Bit24KbpsMonoOpus";
    /**
     * raw-22050hz-16bit-mono-pcm
     * Raw PCM audio at 22050Hz sampling rate and 16-bit depth.
     * Added in version 1.22.0
     * @member SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw22050Hz16BitMonoPcm"] = 33] = "Raw22050Hz16BitMonoPcm";
    /**
     * riff-22050hz-16bit-mono-pcm
     * PCM audio at 22050Hz sampling rate and 16-bit depth, with RIFF header.
     * Added in version 1.22.0
     * @member SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff22050Hz16BitMonoPcm"] = 34] = "Riff22050Hz16BitMonoPcm";
    /**
     * raw-44100hz-16bit-mono-pcm
     * Raw PCM audio at 44100Hz sampling rate and 16-bit depth.
     * Added in version 1.22.0
     * @member SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw44100Hz16BitMonoPcm"] = 35] = "Raw44100Hz16BitMonoPcm";
    /**
     * riff-44100hz-16bit-mono-pcm
     * PCM audio at 44100Hz sampling rate and 16-bit depth, with RIFF header.
     * Added in version 1.22.0
     * @member SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm
     */
    SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff44100Hz16BitMonoPcm"] = 36] = "Riff44100Hz16BitMonoPcm";
})(SpeechSynthesisOutputFormat || (SpeechSynthesisOutputFormat = {}));

//# sourceMappingURL=SpeechSynthesisOutputFormat.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisResult.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisResult.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechSynthesisResult": () => (/* binding */ SpeechSynthesisResult)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SynthesisResult.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Defines result of speech synthesis.
 * @class SpeechSynthesisResult
 * Added in version 1.11.0
 */
class SpeechSynthesisResult extends _Exports__WEBPACK_IMPORTED_MODULE_0__.SynthesisResult {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {ArrayBuffer} audioData - The synthesized audio binary.
     * @param {string} errorDetails - Error details, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     * @param {number} audioDuration - The audio duration.
     */
    constructor(resultId, reason, audioData, errorDetails, properties, audioDuration) {
        super(resultId, reason, errorDetails, properties);
        this.privAudioData = audioData;
        this.privAudioDuration = audioDuration;
    }
    /**
     * The synthesized audio data
     * @member SpeechSynthesisResult.prototype.audioData
     * @function
     * @public
     * @returns {ArrayBuffer} The synthesized audio data.
     */
    get audioData() {
        return this.privAudioData;
    }
    /**
     * The time duration of synthesized audio, in ticks (100 nanoseconds).
     * @member SpeechSynthesisResult.prototype.audioDuration
     * @function
     * @public
     * @returns {number} The time duration of synthesized audio.
     */
    get audioDuration() {
        return this.privAudioDuration;
    }
}

//# sourceMappingURL=SpeechSynthesisResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisVisemeEventArgs.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisVisemeEventArgs.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechSynthesisVisemeEventArgs": () => (/* binding */ SpeechSynthesisVisemeEventArgs)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines contents of speech synthesis viseme event.
 * @class SpeechSynthesisVisemeEventArgs
 * Added in version 1.16.0
 */
class SpeechSynthesisVisemeEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} audioOffset - The audio offset.
     * @param {number} visemeId - The viseme ID.
     * @param {string} animation - The animation, could be in svg or other format.
     */
    constructor(audioOffset, visemeId, animation) {
        this.privAudioOffset = audioOffset;
        this.privVisemeId = visemeId;
        this.privAnimation = animation;
    }
    /**
     * Specifies the audio offset.
     * @member SpeechSynthesisVisemeEventArgs.prototype.audioOffset
     * @function
     * @public
     * @returns {number} the audio offset.
     */
    get audioOffset() {
        return this.privAudioOffset;
    }
    /**
     * Specifies the viseme ID.
     * @member SpeechSynthesisVisemeEventArgs.prototype.visemeId
     * @function
     * @public
     * @returns {number} the viseme ID.
     */
    get visemeId() {
        return this.privVisemeId;
    }
    /**
     * Specifies the animation.
     * @member SpeechSynthesisVisemeEventArgs.prototype.animation
     * @function
     * @public
     * @returns {string} the animation, could be in svg or other format.
     */
    get animation() {
        return this.privAnimation;
    }
}

//# sourceMappingURL=SpeechSynthesisVisemeEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisWordBoundaryEventArgs.js":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisWordBoundaryEventArgs.js ***!
  \****************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechSynthesisWordBoundaryEventArgs": () => (/* binding */ SpeechSynthesisWordBoundaryEventArgs)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines contents of speech synthesis word boundary event.
 * @class SpeechSynthesisWordBoundaryEventArgs
 * Added in version 1.11.0
 */
class SpeechSynthesisWordBoundaryEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} audioOffset - The audio offset.
     * @param {number} duration - The audio duration.
     * @param {string} text - The text.
     * @param {number} wordLength - The length of the word.
     * @param {number} textOffset - The text offset.
     * @param {SpeechSynthesisBoundaryType} boundaryType - The boundary type
     */
    constructor(audioOffset, duration, text, wordLength, textOffset, boundaryType) {
        this.privAudioOffset = audioOffset;
        this.privDuration = duration;
        this.privText = text;
        this.privWordLength = wordLength;
        this.privTextOffset = textOffset;
        this.privBoundaryType = boundaryType;
    }
    /**
     * Specifies the audio offset.
     * @member SpeechSynthesisWordBoundaryEventArgs.prototype.audioOffset
     * @function
     * @public
     * @returns {number} the audio offset.
     */
    get audioOffset() {
        return this.privAudioOffset;
    }
    /**
     * Specifies the duration, in ticks (100 nanoseconds).
     * @member SpeechSynthesisWordBoundaryEventArgs.prototype.duration
     * @function
     * @public
     * @returns {number} Duration in 100 nanosecond increments.
     */
    get duration() {
        return this.privDuration;
    }
    /**
     * Specifies the text of the word boundary event.
     * @member SpeechSynthesisWordBoundaryEventArgs.prototype.text
     * @function
     * @public
     * @returns {string} the text.
     */
    get text() {
        return this.privText;
    }
    /**
     * Specifies the word length
     * @member SpeechSynthesisWordBoundaryEventArgs.prototype.wordLength
     * @function
     * @public
     * @returns {number} the word length
     */
    get wordLength() {
        return this.privWordLength;
    }
    /**
     * Specifies the text offset.
     * @member SpeechSynthesisWordBoundaryEventArgs.prototype.textOffset
     * @function
     * @public
     * @returns {number} the text offset.
     */
    get textOffset() {
        return this.privTextOffset;
    }
    /**
     * Specifies the boundary type.
     * @member SpeechSynthesisWordBoundaryEventArgs.prototype.boundaryType
     * @function
     * @public
     * @returns {SpeechSynthesisBoundaryType} the boundary type.
     */
    get boundaryType() {
        return this.privBoundaryType;
    }
}

//# sourceMappingURL=SpeechSynthesisWordBoundaryEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesizer.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesizer.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechSynthesizer": () => (/* binding */ SpeechSynthesizer),
/* harmony export */   "SynthesisRequest": () => (/* binding */ SynthesisRequest)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeechSynthesisConnectionFactory.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesizerConfig.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisAdapterBase.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveSubscriptionKeyAuthentication.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/CognitiveTokenAuthentication.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SynthesisRestAdapter.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Queue.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Guid.js");
/* harmony import */ var _Audio_AudioFileWriter__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./Audio/AudioFileWriter */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioFileWriter.js");
/* harmony import */ var _Audio_AudioOutputFormat__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./Audio/AudioOutputFormat */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputFormat.js");
/* harmony import */ var _Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioOutputStream.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioConfig.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisOutputFormat.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/PushAudioOutputStreamCallback.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SynthesisVoicesResult.js");
/* eslint-disable @typescript-eslint/no-empty-function */
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};







/**
 * Defines the class SpeechSynthesizer for text to speech.
 * Updated in version 1.16.0
 * @class SpeechSynthesizer
 */
class SpeechSynthesizer {
    /**
     * SpeechSynthesizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - An set of initial properties for this synthesizer.
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the synthesizer.
     */
    constructor(speechConfig, audioConfig) {
        const speechConfigImpl = speechConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNull(speechConfigImpl, "speechConfig");
        if (audioConfig !== null) {
            if (audioConfig === undefined) {
                this.audioConfig = (typeof window === "undefined") ? undefined : _Exports__WEBPACK_IMPORTED_MODULE_1__.AudioConfig.fromDefaultSpeakerOutput();
            }
            else {
                this.audioConfig = audioConfig;
            }
        }
        this.privProperties = speechConfigImpl.properties.clone();
        this.privDisposed = false;
        this.privSynthesizing = false;
        this.privConnectionFactory = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_2__.SpeechSynthesisConnectionFactory();
        this.synthesisRequestQueue = new _common_Exports__WEBPACK_IMPORTED_MODULE_3__.Queue();
        this.implCommonSynthesizeSetup();
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member SpeechSynthesizer.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.SpeechServiceAuthorization_Token);
    }
    /**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member SpeechSynthesizer.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */
    set authorizationToken(token) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(token, "token");
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.SpeechServiceAuthorization_Token, token);
    }
    /**
     * The collection of properties and their values defined for this SpeechSynthesizer.
     * @member SpeechSynthesizer.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this SpeechSynthesizer.
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * Indicates if auto detect source language is enabled
     * @member SpeechSynthesizer.prototype.properties
     * @function
     * @public
     * @returns {boolean} if auto detect source language is enabled
     */
    get autoDetectSourceLanguage() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages) === _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.AutoDetectSourceLanguagesOpenRangeOptionName;
    }
    /**
     * SpeechSynthesizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - an set of initial properties for this synthesizer
     * @param {AutoDetectSourceLanguageConfig} autoDetectSourceLanguageConfig - An source language detection configuration associated with the synthesizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the synthesizer
     */
    static FromConfig(speechConfig, autoDetectSourceLanguageConfig, audioConfig) {
        const speechConfigImpl = speechConfig;
        autoDetectSourceLanguageConfig.properties.mergeTo(speechConfigImpl.properties);
        return new SpeechSynthesizer(speechConfig, audioConfig);
    }
    buildSsml(text) {
        const languageToDefaultVoice = {
            ["af-ZA"]: "af-ZA-AdriNeural",
            ["am-ET"]: "am-ET-AmehaNeural",
            ["ar-AE"]: "ar-AE-FatimaNeural",
            ["ar-BH"]: "ar-BH-AliNeural",
            ["ar-DZ"]: "ar-DZ-AminaNeural",
            ["ar-EG"]: "ar-EG-SalmaNeural",
            ["ar-IQ"]: "ar-IQ-BasselNeural",
            ["ar-JO"]: "ar-JO-SanaNeural",
            ["ar-KW"]: "ar-KW-FahedNeural",
            ["ar-LY"]: "ar-LY-ImanNeural",
            ["ar-MA"]: "ar-MA-JamalNeural",
            ["ar-QA"]: "ar-QA-AmalNeural",
            ["ar-SA"]: "ar-SA-HamedNeural",
            ["ar-SY"]: "ar-SY-AmanyNeural",
            ["ar-TN"]: "ar-TN-HediNeural",
            ["ar-YE"]: "ar-YE-MaryamNeural",
            ["bg-BG"]: "bg-BG-BorislavNeural",
            ["bn-BD"]: "bn-BD-NabanitaNeural",
            ["bn-IN"]: "bn-IN-BashkarNeural",
            ["ca-ES"]: "ca-ES-JoanaNeural",
            ["cs-CZ"]: "cs-CZ-AntoninNeural",
            ["cy-GB"]: "cy-GB-AledNeural",
            ["da-DK"]: "da-DK-ChristelNeural",
            ["de-AT"]: "de-AT-IngridNeural",
            ["de-CH"]: "de-CH-JanNeural",
            ["de-DE"]: "de-DE-KatjaNeural",
            ["el-GR"]: "el-GR-AthinaNeural",
            ["en-AU"]: "en-AU-NatashaNeural",
            ["en-CA"]: "en-CA-ClaraNeural",
            ["en-GB"]: "en-GB-LibbyNeural",
            ["en-HK"]: "en-HK-SamNeural",
            ["en-IE"]: "en-IE-ConnorNeural",
            ["en-IN"]: "en-IN-NeerjaNeural",
            ["en-KE"]: "en-KE-AsiliaNeural",
            ["en-NG"]: "en-NG-AbeoNeural",
            ["en-NZ"]: "en-NZ-MitchellNeural",
            ["en-PH"]: "en-PH-JamesNeural",
            ["en-SG"]: "en-SG-LunaNeural",
            ["en-TZ"]: "en-TZ-ElimuNeural",
            ["en-US"]: "en-US-JennyNeural",
            ["en-ZA"]: "en-ZA-LeahNeural",
            ["es-AR"]: "es-AR-ElenaNeural",
            ["es-BO"]: "es-BO-MarceloNeural",
            ["es-CL"]: "es-CL-CatalinaNeural",
            ["es-CO"]: "es-CO-GonzaloNeural",
            ["es-CR"]: "es-CR-JuanNeural",
            ["es-CU"]: "es-CU-BelkysNeural",
            ["es-DO"]: "es-DO-EmilioNeural",
            ["es-EC"]: "es-EC-AndreaNeural",
            ["es-ES"]: "es-ES-AlvaroNeural",
            ["es-GQ"]: "es-GQ-JavierNeural",
            ["es-GT"]: "es-GT-AndresNeural",
            ["es-HN"]: "es-HN-CarlosNeural",
            ["es-MX"]: "es-MX-DaliaNeural",
            ["es-NI"]: "es-NI-FedericoNeural",
            ["es-PA"]: "es-PA-MargaritaNeural",
            ["es-PE"]: "es-PE-AlexNeural",
            ["es-PR"]: "es-PR-KarinaNeural",
            ["es-PY"]: "es-PY-MarioNeural",
            ["es-SV"]: "es-SV-LorenaNeural",
            ["es-US"]: "es-US-AlonsoNeural",
            ["es-UY"]: "es-UY-MateoNeural",
            ["es-VE"]: "es-VE-PaolaNeural",
            ["et-EE"]: "et-EE-AnuNeural",
            ["fa-IR"]: "fa-IR-DilaraNeural",
            ["fi-FI"]: "fi-FI-SelmaNeural",
            ["fil-PH"]: "fil-PH-AngeloNeural",
            ["fr-BE"]: "fr-BE-CharlineNeural",
            ["fr-CA"]: "fr-CA-SylvieNeural",
            ["fr-CH"]: "fr-CH-ArianeNeural",
            ["fr-FR"]: "fr-FR-DeniseNeural",
            ["ga-IE"]: "ga-IE-ColmNeural",
            ["gl-ES"]: "gl-ES-RoiNeural",
            ["gu-IN"]: "gu-IN-DhwaniNeural",
            ["he-IL"]: "he-IL-AvriNeural",
            ["hi-IN"]: "hi-IN-MadhurNeural",
            ["hr-HR"]: "hr-HR-GabrijelaNeural",
            ["hu-HU"]: "hu-HU-NoemiNeural",
            ["id-ID"]: "id-ID-ArdiNeural",
            ["is-IS"]: "is-IS-GudrunNeural",
            ["it-IT"]: "it-IT-IsabellaNeural",
            ["ja-JP"]: "ja-JP-NanamiNeural",
            ["jv-ID"]: "jv-ID-DimasNeural",
            ["kk-KZ"]: "kk-KZ-AigulNeural",
            ["km-KH"]: "km-KH-PisethNeural",
            ["kn-IN"]: "kn-IN-GaganNeural",
            ["ko-KR"]: "ko-KR-SunHiNeural",
            ["lo-LA"]: "lo-LA-ChanthavongNeural",
            ["lt-LT"]: "lt-LT-LeonasNeural",
            ["lv-LV"]: "lv-LV-EveritaNeural",
            ["mk-MK"]: "mk-MK-AleksandarNeural",
            ["ml-IN"]: "ml-IN-MidhunNeural",
            ["mr-IN"]: "mr-IN-AarohiNeural",
            ["ms-MY"]: "ms-MY-OsmanNeural",
            ["mt-MT"]: "mt-MT-GraceNeural",
            ["my-MM"]: "my-MM-NilarNeural",
            ["nb-NO"]: "nb-NO-PernilleNeural",
            ["nl-BE"]: "nl-BE-ArnaudNeural",
            ["nl-NL"]: "nl-NL-ColetteNeural",
            ["pl-PL"]: "pl-PL-AgnieszkaNeural",
            ["ps-AF"]: "ps-AF-GulNawazNeural",
            ["pt-BR"]: "pt-BR-FranciscaNeural",
            ["pt-PT"]: "pt-PT-DuarteNeural",
            ["ro-RO"]: "ro-RO-AlinaNeural",
            ["ru-RU"]: "ru-RU-SvetlanaNeural",
            ["si-LK"]: "si-LK-SameeraNeural",
            ["sk-SK"]: "sk-SK-LukasNeural",
            ["sl-SI"]: "sl-SI-PetraNeural",
            ["so-SO"]: "so-SO-MuuseNeural",
            ["sr-RS"]: "sr-RS-NicholasNeural",
            ["su-ID"]: "su-ID-JajangNeural",
            ["sv-SE"]: "sv-SE-SofieNeural",
            ["sw-KE"]: "sw-KE-RafikiNeural",
            ["sw-TZ"]: "sw-TZ-DaudiNeural",
            ["ta-IN"]: "ta-IN-PallaviNeural",
            ["ta-LK"]: "ta-LK-KumarNeural",
            ["ta-SG"]: "ta-SG-AnbuNeural",
            ["te-IN"]: "te-IN-MohanNeural",
            ["th-TH"]: "th-TH-PremwadeeNeural",
            ["tr-TR"]: "tr-TR-AhmetNeural",
            ["uk-UA"]: "uk-UA-OstapNeural",
            ["ur-IN"]: "ur-IN-GulNeural",
            ["ur-PK"]: "ur-PK-AsadNeural",
            ["uz-UZ"]: "uz-UZ-MadinaNeural",
            ["vi-VN"]: "vi-VN-HoaiMyNeural",
            ["zh-CN"]: "zh-CN-XiaoxiaoNeural",
            ["zh-HK"]: "zh-HK-HiuMaanNeural",
            ["zh-TW"]: "zh-TW-HsiaoChenNeural",
            ["zu-ZA"]: "zu-ZA-ThandoNeural",
        };
        let language = this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.SpeechServiceConnection_SynthLanguage, "en-US");
        let voice = this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.SpeechServiceConnection_SynthVoice, "");
        let ssml = SpeechSynthesizer.XMLEncode(text);
        if (this.autoDetectSourceLanguage) {
            language = "en-US";
        }
        else {
            voice = voice || languageToDefaultVoice[language];
        }
        if (voice) {
            ssml = `<voice name='${voice}'>${ssml}</voice>`;
        }
        ssml = `<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${language}'>${ssml}</speak>`;
        return ssml;
    }
    /**
     * Executes speech synthesis on plain text.
     * The task returns the synthesis result.
     * @member SpeechSynthesizer.prototype.speakTextAsync
     * @function
     * @public
     * @param text - Text to be synthesized.
     * @param cb - Callback that received the SpeechSynthesisResult.
     * @param err - Callback invoked in case of an error.
     * @param stream - AudioOutputStream to receive the synthesized audio.
     */
    speakTextAsync(text, cb, err, stream) {
        this.speakImpl(text, false, cb, err, stream);
    }
    /**
     * Executes speech synthesis on SSML.
     * The task returns the synthesis result.
     * @member SpeechSynthesizer.prototype.speakSsmlAsync
     * @function
     * @public
     * @param ssml - SSML to be synthesized.
     * @param cb - Callback that received the SpeechSynthesisResult.
     * @param err - Callback invoked in case of an error.
     * @param stream - AudioOutputStream to receive the synthesized audio.
     */
    speakSsmlAsync(ssml, cb, err, stream) {
        this.speakImpl(ssml, true, cb, err, stream);
    }
    /**
     * Get list of synthesis voices available.
     * The task returns the synthesis voice result.
     * @member SpeechSynthesizer.prototype.getVoicesAsync
     * @function
     * @async
     * @public
     * @param locale - Locale of voices in BCP-47 format; if left empty, get all available voices.
     * @return {Promise<SynthesisVoicesResult>} - Promise of a SynthesisVoicesResult.
     */
    getVoicesAsync(locale = "") {
        return __awaiter(this, void 0, void 0, function* () {
            return this.getVoices(locale);
        });
    }
    /**
     * Dispose of associated resources.
     * @member SpeechSynthesizer.prototype.close
     * @function
     * @public
     */
    close(cb, err) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privDisposed);
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_6__.marshalPromiseToCallbacks)(this.dispose(true), cb, err);
    }
    /**
     * @Internal
     * Do not use externally, object returned will change without warning or notice.
     */
    get internalData() {
        return this.privAdapter;
    }
    /**
     * This method performs cleanup of resources.
     * The Boolean parameter disposing indicates whether the method is called
     * from Dispose (if disposing is true) or from the finalizer (if disposing is false).
     * Derived classes should override this method to dispose resource if needed.
     * @member SpeechSynthesizer.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - Flag to request disposal.
     */
    dispose(disposing) {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privDisposed) {
                return;
            }
            if (disposing) {
                if (this.privAdapter) {
                    yield this.privAdapter.dispose();
                }
            }
            this.privDisposed = true;
        });
    }
    //
    // ################################################################################################################
    // IMPLEMENTATION.
    // Move to independent class
    // ################################################################################################################
    //
    createSynthesizerConfig(speechConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_7__.SynthesizerConfig(speechConfig, this.privProperties);
    }
    // Creates the synthesis adapter
    createSynthesisAdapter(authentication, connectionFactory, audioConfig, synthesizerConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_8__.SynthesisAdapterBase(authentication, connectionFactory, synthesizerConfig, this, this.audioConfig);
    }
    implCommonSynthesizeSetup() {
        let osPlatform = (typeof window !== "undefined") ? "Browser" : "Node";
        let osName = "unknown";
        let osVersion = "unknown";
        if (typeof navigator !== "undefined") {
            osPlatform = osPlatform + "/" + navigator.platform;
            osName = navigator.userAgent;
            osVersion = navigator.appVersion;
        }
        const synthesizerConfig = this.createSynthesizerConfig(new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_9__.SpeechServiceConfig(new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_9__.Context(new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_9__.OS(osPlatform, osName, osVersion))));
        const subscriptionKey = this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.SpeechServiceConnection_Key, undefined);
        const authentication = (subscriptionKey && subscriptionKey !== "") ?
            new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_10__.CognitiveSubscriptionKeyAuthentication(subscriptionKey) :
            new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_11__.CognitiveTokenAuthentication(() => {
                const authorizationToken = this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.SpeechServiceAuthorization_Token, undefined);
                return Promise.resolve(authorizationToken);
            }, () => {
                const authorizationToken = this.privProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.SpeechServiceAuthorization_Token, undefined);
                return Promise.resolve(authorizationToken);
            });
        this.privAdapter = this.createSynthesisAdapter(authentication, this.privConnectionFactory, this.audioConfig, synthesizerConfig);
        this.privAdapter.audioOutputFormat = _Audio_AudioOutputFormat__WEBPACK_IMPORTED_MODULE_12__.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(_Exports__WEBPACK_IMPORTED_MODULE_13__.SpeechSynthesisOutputFormat[this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_4__.PropertyId.SpeechServiceConnection_SynthOutputFormat, undefined)]);
        this.privRestAdapter = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_14__.SynthesisRestAdapter(synthesizerConfig, authentication);
    }
    speakImpl(text, IsSsml, cb, err, dataStream) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privDisposed);
            const requestId = (0,_common_Exports__WEBPACK_IMPORTED_MODULE_15__.createNoDashGuid)();
            let audioDestination;
            if (dataStream instanceof _Exports__WEBPACK_IMPORTED_MODULE_16__.PushAudioOutputStreamCallback) {
                audioDestination = new _Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_17__.PushAudioOutputStreamImpl(dataStream);
            }
            else if (dataStream instanceof _Audio_AudioOutputStream__WEBPACK_IMPORTED_MODULE_17__.PullAudioOutputStream) {
                audioDestination = dataStream;
            }
            else if (dataStream !== undefined) {
                audioDestination = new _Audio_AudioFileWriter__WEBPACK_IMPORTED_MODULE_18__.AudioFileWriter(dataStream);
            }
            else {
                audioDestination = undefined;
            }
            this.synthesisRequestQueue.enqueue(new SynthesisRequest(requestId, text, IsSsml, (e) => {
                this.privSynthesizing = false;
                if (!!cb) {
                    try {
                        cb(e);
                    }
                    catch (e) {
                        if (!!err) {
                            err(e);
                        }
                    }
                }
                cb = undefined;
                /* eslint-disable no-empty */
                this.adapterSpeak().catch(() => { });
            }, (e) => {
                if (!!err) {
                    err(e);
                }
            }, audioDestination));
            /* eslint-disable no-empty-function */
            this.adapterSpeak().catch(() => { });
        }
        catch (error) {
            if (!!err) {
                if (error instanceof Error) {
                    const typedError = error;
                    err(typedError.name + ": " + typedError.message);
                }
                else {
                    err(error);
                }
            }
            // Destroy the synthesizer.
            /* eslint-disable no-empty */
            this.dispose(true).catch(() => { });
        }
    }
    getVoices(locale) {
        return __awaiter(this, void 0, void 0, function* () {
            const requestId = (0,_common_Exports__WEBPACK_IMPORTED_MODULE_15__.createNoDashGuid)();
            const response = yield this.privRestAdapter.getVoicesList(requestId);
            if (response.ok && Array.isArray(response.json)) {
                let json = response.json;
                if (!!locale && locale.length > 0) {
                    json = json.filter((item) => !!item.Locale && item.Locale.toLowerCase() === locale.toLowerCase());
                }
                return new _Exports__WEBPACK_IMPORTED_MODULE_19__.SynthesisVoicesResult(requestId, json, undefined);
            }
            else {
                return new _Exports__WEBPACK_IMPORTED_MODULE_19__.SynthesisVoicesResult(requestId, undefined, `Error: ${response.status}: ${response.statusText}`);
            }
        });
    }
    adapterSpeak() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.privDisposed && !this.privSynthesizing) {
                this.privSynthesizing = true;
                const request = yield this.synthesisRequestQueue.dequeue();
                return this.privAdapter.Speak(request.text, request.isSSML, request.requestId, request.cb, request.err, request.dataStream);
            }
        });
    }
    static XMLEncode(text) {
        return text.replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;")
            .replace(/"/g, "&quot;")
            .replace(/'/g, "&apos;");
    }
}
class SynthesisRequest {
    constructor(requestId, text, isSSML, cb, err, dataStream) {
        this.requestId = requestId;
        this.text = text;
        this.isSSML = isSSML;
        this.cb = cb;
        this.err = err;
        this.dataStream = dataStream;
    }
}

//# sourceMappingURL=SpeechSynthesizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechTranslationConfig.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechTranslationConfig.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SpeechTranslationConfig": () => (/* binding */ SpeechTranslationConfig),
/* harmony export */   "SpeechTranslationConfigImpl": () => (/* binding */ SpeechTranslationConfigImpl)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechConfig.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/OutputFormat.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ProfanityOption.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechSynthesisOutputFormat.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */



/**
 * Speech translation configuration.
 * @class SpeechTranslationConfig
 */
class SpeechTranslationConfig extends _Exports__WEBPACK_IMPORTED_MODULE_0__.SpeechConfig {
    /**
     * Creates an instance of recognizer config.
     */
    constructor() {
        super();
    }
    /**
     * Static instance of SpeechTranslationConfig returned by passing a subscription key and service region.
     * @member SpeechTranslationConfig.fromSubscription
     * @function
     * @public
     * @param {string} subscriptionKey - The subscription key.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechTranslationConfig} The speech translation config.
     */
    static fromSubscription(subscriptionKey, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(subscriptionKey, "subscriptionKey");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(region, "region");
        const ret = new SpeechTranslationConfigImpl();
        ret.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Key, subscriptionKey);
        ret.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Region, region);
        return ret;
    }
    /**
     * Static instance of SpeechTranslationConfig returned by passing authorization token and service region.
     * Note: The caller needs to ensure that the authorization token is valid. Before the authorization token
     * expires, the caller needs to refresh it by setting the property authorizationToken with a new
     * valid token. Otherwise, all the recognizers created by this SpeechTranslationConfig instance
     * will encounter errors during recognition.
     * As configuration values are copied when creating a new recognizer, the new token value will not apply
     * to recognizers that have already been created.
     * For recognizers that have been created before, you need to set authorization token of the corresponding recognizer
     * to refresh the token. Otherwise, the recognizers will encounter errors during recognition.
     * @member SpeechTranslationConfig.fromAuthorizationToken
     * @function
     * @public
     * @param {string} authorizationToken - The authorization token.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechTranslationConfig} The speech translation config.
     */
    static fromAuthorizationToken(authorizationToken, region) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(authorizationToken, "authorizationToken");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(region, "region");
        const ret = new SpeechTranslationConfigImpl();
        ret.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceAuthorization_Token, authorizationToken);
        ret.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Region, region);
        return ret;
    }
    /**
     * Creates an instance of the speech config with specified host and subscription key.
     * This method is intended only for users who use a non-default service host. Standard resource path will be assumed.
     * For services with a non-standard resource path or no path at all, use fromEndpoint instead.
     * Note: Query parameters are not allowed in the host URI and must be set by other APIs.
     * Note: To use an authorization token with fromHost, use fromHost(URL),
     * and then set the AuthorizationToken property on the created SpeechConfig instance.
     * Note: Added in version 1.9.0.
     * @member SpeechConfig.fromHost
     * @function
     * @public
     * @param {URL} host - The service endpoint to connect to. Format is "protocol://host:port" where ":port" is optional.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization token must be set.
     * @returns {SpeechConfig} A speech factory instance.
     */
    static fromHost(hostName, subscriptionKey) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNull(hostName, "hostName");
        const speechImpl = new SpeechTranslationConfigImpl();
        speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Host, hostName.protocol + "//" + hostName.hostname + (hostName.port === "" ? "" : ":" + hostName.port));
        if (undefined !== subscriptionKey) {
            speechImpl.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Key, subscriptionKey);
        }
        return speechImpl;
    }
    /**
     * Creates an instance of the speech translation config with specified endpoint and subscription key.
     * This method is intended only for users who use a non-standard service endpoint or paramters.
     * Note: The query properties specified in the endpoint URL are not changed, even if they are
     * set by any other APIs. For example, if language is defined in the uri as query parameter
     * "language=de-DE", and also set by the speechRecognitionLanguage property, the language
     * setting in uri takes precedence, and the effective language is "de-DE".
     * Only the properties that are not specified in the endpoint URL can be set by other APIs.
     * Note: To use authorization token with fromEndpoint, pass an empty string to the subscriptionKey in the
     * fromEndpoint method, and then set authorizationToken="token" on the created SpeechConfig instance to
     * use the authorization token.
     * @member SpeechTranslationConfig.fromEndpoint
     * @function
     * @public
     * @param {URL} endpoint - The service endpoint to connect to.
     * @param {string} subscriptionKey - The subscription key.
     * @returns {SpeechTranslationConfig} A speech config instance.
     */
    static fromEndpoint(endpoint, subscriptionKey) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNull(endpoint, "endpoint");
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNull(subscriptionKey, "subscriptionKey");
        const ret = new SpeechTranslationConfigImpl();
        ret.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Endpoint, endpoint.href);
        ret.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Key, subscriptionKey);
        return ret;
    }
}
/**
 * @private
 * @class SpeechTranslationConfigImpl
 */
class SpeechTranslationConfigImpl extends SpeechTranslationConfig {
    constructor() {
        super();
        this.privSpeechProperties = new _Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyCollection();
        this.outputFormat = _Exports__WEBPACK_IMPORTED_MODULE_4__.OutputFormat.Simple;
    }
    /**
     * Gets/Sets the authorization token.
     * If this is set, subscription key is ignored.
     * User needs to make sure the provided authorization token is valid and not expired.
     * @member SpeechTranslationConfigImpl.prototype.authorizationToken
     * @function
     * @public
     * @param {string} value - The authorization token.
     */
    set authorizationToken(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(value, "value");
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceAuthorization_Token, value);
    }
    /**
     * Sets the speech recognition language.
     * @member SpeechTranslationConfigImpl.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @param {string} value - The authorization token.
     */
    set speechRecognitionLanguage(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(value, "value");
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_RecoLanguage, value);
    }
    /**
     * Gets the speech recognition language.
     * @member SpeechTranslationConfigImpl.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @return {string} The speechRecognitionLanguage.
     */
    get speechRecognitionLanguage() {
        return this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_RecoLanguage]);
    }
    /**
     * @member SpeechTranslationConfigImpl.prototype.subscriptionKey
     * @function
     * @public
     */
    get subscriptionKey() {
        return this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Key]);
    }
    /**
     * Gets the output format
     * @member SpeechTranslationConfigImpl.prototype.outputFormat
     * @function
     * @public
     */
    get outputFormat() {
        // eslint-disable-next-line
        return _Exports__WEBPACK_IMPORTED_MODULE_4__.OutputFormat[this.privSpeechProperties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.OutputFormatPropertyName, undefined)];
    }
    /**
     * Gets/Sets the output format
     * @member SpeechTranslationConfigImpl.prototype.outputFormat
     * @function
     * @public
     */
    set outputFormat(value) {
        this.privSpeechProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.OutputFormatPropertyName, _Exports__WEBPACK_IMPORTED_MODULE_4__.OutputFormat[value]);
    }
    /**
     * Gets the endpoint id.
     * @member SpeechTranslationConfigImpl.prototype.endpointId
     * @function
     * @public
     */
    get endpointId() {
        return this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_EndpointId);
    }
    /**
     * Gets/Sets the endpoint id.
     * @member SpeechTranslationConfigImpl.prototype.endpointId
     * @function
     * @public
     */
    set endpointId(value) {
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_EndpointId, value);
    }
    /**
     * Add a (text) target language to translate into.
     * @member SpeechTranslationConfigImpl.prototype.addTargetLanguage
     * @function
     * @public
     * @param {string} value - The language such as de-DE
     */
    addTargetLanguage(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(value, "value");
        const languages = this.targetLanguages;
        languages.push(value);
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_TranslationToLanguages, languages.join(","));
    }
    /**
     * Gets the (text) target language to translate into.
     * @member SpeechTranslationConfigImpl.prototype.targetLanguages
     * @function
     * @public
     * @param {string} value - The language such as de-DE
     */
    get targetLanguages() {
        if (this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_TranslationToLanguages, undefined) !== undefined) {
            return this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",");
        }
        else {
            return [];
        }
    }
    /**
     * Gets the voice name.
     * @member SpeechTranslationConfigImpl.prototype.voiceName
     * @function
     * @public
     */
    get voiceName() {
        return this.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_TranslationVoice]);
    }
    /**
     * Gets/Sets the voice of the translated language, enable voice synthesis output.
     * @member SpeechTranslationConfigImpl.prototype.voiceName
     * @function
     * @public
     * @param {string} value - The name of the voice.
     */
    set voiceName(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(value, "value");
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_TranslationVoice, value);
    }
    /**
     * Provides the region.
     * @member SpeechTranslationConfigImpl.prototype.region
     * @function
     * @public
     * @returns {string} The region.
     */
    get region() {
        return this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_Region);
    }
    setProxy(proxyHostName, proxyPort, proxyUserName, proxyPassword) {
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_ProxyHostName], proxyHostName);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_ProxyPort], proxyPort);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_ProxyUserName], proxyUserName);
        this.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_ProxyPassword], proxyPassword);
    }
    /**
     * Gets an arbitrary property value.
     * @member SpeechTranslationConfigImpl.prototype.getProperty
     * @function
     * @public
     * @param {string} name - The name of the property.
     * @param {string} def - The default value of the property in case it is not set.
     * @returns {string} The value of the property.
     */
    getProperty(name, def) {
        return this.privSpeechProperties.getProperty(name, def);
    }
    /**
     * Gets/Sets an arbitrary property value.
     * @member SpeechTranslationConfigImpl.prototype.setProperty
     * @function
     * @public
     * @param {string | PropertyId} name - The name of the property to set.
     * @param {string} value - The value of the property.
     */
    setProperty(name, value) {
        this.privSpeechProperties.setProperty(name, value);
    }
    /**
     * Provides access to custom properties.
     * @member SpeechTranslationConfigImpl.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The properties.
     */
    get properties() {
        return this.privSpeechProperties;
    }
    /**
     * Dispose of associated resources.
     * @member SpeechTranslationConfigImpl.prototype.close
     * @function
     * @public
     */
    close() {
        return;
    }
    setServiceProperty(name, value) {
        const currentProperties = JSON.parse(this.privSpeechProperties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.ServicePropertiesPropertyName, "{}"));
        currentProperties[name] = value;
        this.privSpeechProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.ServicePropertiesPropertyName, JSON.stringify(currentProperties));
    }
    setProfanity(profanity) {
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceResponse_ProfanityOption, _Exports__WEBPACK_IMPORTED_MODULE_6__.ProfanityOption[profanity]);
    }
    enableAudioLogging() {
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_EnableAudioLogging, "true");
    }
    requestWordLevelTimestamps() {
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps, "true");
    }
    enableDictation() {
        this.privSpeechProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.ForceDictationPropertyName, "true");
    }
    get speechSynthesisLanguage() {
        return this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_SynthLanguage);
    }
    set speechSynthesisLanguage(language) {
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_SynthLanguage, language);
    }
    get speechSynthesisVoiceName() {
        return this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_SynthVoice);
    }
    set speechSynthesisVoiceName(voice) {
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_SynthVoice, voice);
    }
    get speechSynthesisOutputFormat() {
        // eslint-disable-next-line
        return _Exports__WEBPACK_IMPORTED_MODULE_7__.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_SynthOutputFormat, undefined)];
    }
    set speechSynthesisOutputFormat(format) {
        this.privSpeechProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_SynthOutputFormat, _Exports__WEBPACK_IMPORTED_MODULE_7__.SpeechSynthesisOutputFormat[format]);
    }
}

//# sourceMappingURL=SpeechTranslationConfig.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SynthesisResult.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SynthesisResult.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SynthesisResult": () => (/* binding */ SynthesisResult)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Base class for synthesis results
 * @class SynthesisResult
 * Added in version 1.20.0
 */
class SynthesisResult {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} errorDetails - Error details, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */
    constructor(resultId, reason, errorDetails, properties) {
        this.privResultId = resultId;
        this.privReason = reason;
        this.privErrorDetails = errorDetails;
        this.privProperties = properties;
    }
    /**
     * Specifies the result identifier.
     * @member SynthesisResult.prototype.resultId
     * @function
     * @public
     * @returns {string} Specifies the result identifier.
     */
    get resultId() {
        return this.privResultId;
    }
    /**
     * Specifies status of the result.
     * @member SynthesisResult.prototype.reason
     * @function
     * @public
     * @returns {ResultReason} Specifies status of the result.
     */
    get reason() {
        return this.privReason;
    }
    /**
     * In case of an unsuccessful synthesis, provides details of the occurred error.
     * @member SynthesisResult.prototype.errorDetails
     * @function
     * @public
     * @returns {string} a brief description of an error.
     */
    get errorDetails() {
        return this.privErrorDetails;
    }
    /**
     * The set of properties exposed in the result.
     * @member SynthesisResult.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The set of properties exposed in the result.
     */
    get properties() {
        return this.privProperties;
    }
}

//# sourceMappingURL=SynthesisResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SynthesisVoicesResult.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SynthesisVoicesResult.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SynthesisVoicesResult": () => (/* binding */ SynthesisVoicesResult)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SynthesisResult.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceInfo.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Defines result of speech synthesis.
 * @class SynthesisVoicesResult
 * Added in version 1.20.0
 */
class SynthesisVoicesResult extends _Exports__WEBPACK_IMPORTED_MODULE_0__.SynthesisResult {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param requestId - result id for request.
     * @param json - json payload from endpoint.
     */
    constructor(requestId, json, errorDetails) {
        if (Array.isArray(json)) {
            super(requestId, _Exports__WEBPACK_IMPORTED_MODULE_1__.ResultReason.VoicesListRetrieved, undefined, new _Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyCollection());
            this.privVoices = [];
            for (const item of json) {
                this.privVoices.push(new _Exports__WEBPACK_IMPORTED_MODULE_3__.VoiceInfo(item));
            }
        }
        else {
            super(requestId, _Exports__WEBPACK_IMPORTED_MODULE_1__.ResultReason.Canceled, errorDetails ? errorDetails : "Error information unavailable", new _Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyCollection());
        }
    }
    /**
     * The list of voices
     * @member SynthesisVoicesResult.prototype.voices
     * @function
     * @public
     * @returns {VoiceInfo[]} List of synthesized voices.
     */
    get voices() {
        return this.privVoices;
    }
}

//# sourceMappingURL=SynthesisVoicesResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/Conversation.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/Conversation.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Conversation": () => (/* binding */ Conversation),
/* harmony export */   "ConversationImpl": () => (/* binding */ ConversationImpl)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionConfig.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorInterfaces.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationManager.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorRecognizer.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationParticipantsChangedEventArgs.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ParticipantChangedReason.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationEventArgs.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ProfanityOption.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/IParticipant.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/* eslint-disable max-classes-per-file */




class Conversation {
    constructor() {
        return;
    }
    /**
     * Create a conversation
     * @param speechConfig
     * @param cb
     * @param err
     */
    static createConversationAsync(speechConfig, arg2, arg3, arg4) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(speechConfig, _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}", "config"));
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(speechConfig.region, _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}", "SpeechServiceConnection_Region"));
        if (!speechConfig.subscriptionKey && !speechConfig.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceAuthorization_Token])) {
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(speechConfig.subscriptionKey, _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}", "SpeechServiceConnection_Key"));
        }
        let conversationImpl;
        let cb;
        let err;
        if (typeof arg2 === "string") {
            conversationImpl = new ConversationImpl(speechConfig, arg2);
            // eslint-disable-next-line @typescript-eslint/no-empty-function
            (0,_common_Exports__WEBPACK_IMPORTED_MODULE_3__.marshalPromiseToCallbacks)((() => __awaiter(this, void 0, void 0, function* () { }))(), arg3, arg4);
        }
        else {
            conversationImpl = new ConversationImpl(speechConfig);
            cb = arg2;
            err = arg3;
            conversationImpl.createConversationAsync((() => {
                if (!!cb) {
                    cb();
                }
            }), (error) => {
                if (!!err) {
                    err(error);
                }
            });
        }
        return conversationImpl;
    }
}
class ConversationImpl extends Conversation {
    /**
     * Create a conversation impl
     * @param speechConfig
     * @param {string} id - optional conversationId
     */
    constructor(speechConfig, id) {
        super();
        this.privErrors = _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__.ConversationConnectionConfig.restErrors;
        /** websocket callbacks */
        /* eslint-disable @typescript-eslint/typedef */
        this.onConnected = (e) => {
            var _a;
            this.privIsConnected = true;
            try {
                if (!!((_a = this.privConversationTranslator) === null || _a === void 0 ? void 0 : _a.sessionStarted)) {
                    this.privConversationTranslator.sessionStarted(this.privConversationTranslator, e);
                }
            }
            catch (e) {
                //
            }
        };
        this.onDisconnected = (e) => {
            var _a;
            try {
                if (!!((_a = this.privConversationTranslator) === null || _a === void 0 ? void 0 : _a.sessionStopped)) {
                    this.privConversationTranslator.sessionStopped(this.privConversationTranslator, e);
                }
            }
            catch (e) {
                //
            }
            finally {
                void this.close(false);
            }
        };
        this.onCanceled = (r, e) => {
            var _a;
            try {
                if (!!((_a = this.privConversationTranslator) === null || _a === void 0 ? void 0 : _a.canceled)) {
                    this.privConversationTranslator.canceled(this.privConversationTranslator, e);
                }
            }
            catch (e) {
                //
            }
        };
        this.onParticipantUpdateCommandReceived = (r, e) => {
            try {
                const updatedParticipant = this.privParticipants.getParticipant(e.id);
                if (updatedParticipant !== undefined) {
                    switch (e.key) {
                        case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorCommandTypes.changeNickname:
                            updatedParticipant.displayName = e.value;
                            break;
                        case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorCommandTypes.setUseTTS:
                            updatedParticipant.isUsingTts = e.value;
                            break;
                        case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorCommandTypes.setProfanityFiltering:
                            updatedParticipant.profanity = e.value;
                            break;
                        case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorCommandTypes.setMute:
                            updatedParticipant.isMuted = e.value;
                            break;
                        case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorCommandTypes.setTranslateToLanguages:
                            updatedParticipant.translateToLanguages = e.value;
                            break;
                    }
                    this.privParticipants.addOrUpdateParticipant(updatedParticipant);
                    if (!!this.privConversationTranslator) {
                        this.privConversationTranslator.participantsChanged(this.privConversationTranslator, new _Exports__WEBPACK_IMPORTED_MODULE_5__.ConversationParticipantsChangedEventArgs(_Exports__WEBPACK_IMPORTED_MODULE_6__.ParticipantChangedReason.Updated, [this.toParticipant(updatedParticipant)], e.sessionId));
                    }
                }
            }
            catch (e) {
                //
            }
        };
        this.onLockRoomCommandReceived = () => {
            // TODO
        };
        this.onMuteAllCommandReceived = (r, e) => {
            try {
                this.privParticipants.participants.forEach((p) => p.isMuted = (p.isHost ? false : e.isMuted));
                if (!!this.privConversationTranslator) {
                    this.privConversationTranslator.participantsChanged(this.privConversationTranslator, new _Exports__WEBPACK_IMPORTED_MODULE_5__.ConversationParticipantsChangedEventArgs(_Exports__WEBPACK_IMPORTED_MODULE_6__.ParticipantChangedReason.Updated, this.toParticipants(false), e.sessionId));
                }
            }
            catch (e) {
                //
            }
        };
        this.onParticipantJoinCommandReceived = (r, e) => {
            try {
                const newParticipant = this.privParticipants.addOrUpdateParticipant(e.participant);
                if (newParticipant !== undefined) {
                    if (!!this.privConversationTranslator) {
                        this.privConversationTranslator.participantsChanged(this.privConversationTranslator, new _Exports__WEBPACK_IMPORTED_MODULE_5__.ConversationParticipantsChangedEventArgs(_Exports__WEBPACK_IMPORTED_MODULE_6__.ParticipantChangedReason.JoinedConversation, [this.toParticipant(newParticipant)], e.sessionId));
                    }
                }
            }
            catch (e) {
                //
            }
        };
        this.onParticipantLeaveCommandReceived = (r, e) => {
            try {
                const ejectedParticipant = this.privParticipants.getParticipant(e.participant.id);
                if (ejectedParticipant !== undefined) {
                    // remove the participant from the internal participants list
                    this.privParticipants.deleteParticipant(e.participant.id);
                    if (!!this.privConversationTranslator) {
                        // notify subscribers that the participant has left the conversation
                        this.privConversationTranslator.participantsChanged(this.privConversationTranslator, new _Exports__WEBPACK_IMPORTED_MODULE_5__.ConversationParticipantsChangedEventArgs(_Exports__WEBPACK_IMPORTED_MODULE_6__.ParticipantChangedReason.LeftConversation, [this.toParticipant(ejectedParticipant)], e.sessionId));
                    }
                }
            }
            catch (e) {
                //
            }
        };
        this.onTranslationReceived = (r, e) => {
            try {
                switch (e.command) {
                    case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorMessageTypes.final:
                        if (!!this.privConversationTranslator) {
                            this.privConversationTranslator.transcribed(this.privConversationTranslator, new _Exports__WEBPACK_IMPORTED_MODULE_7__.ConversationTranslationEventArgs(e.payload, undefined, e.sessionId));
                        }
                        break;
                    case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorMessageTypes.partial:
                        if (!!this.privConversationTranslator) {
                            this.privConversationTranslator.transcribing(this.privConversationTranslator, new _Exports__WEBPACK_IMPORTED_MODULE_7__.ConversationTranslationEventArgs(e.payload, undefined, e.sessionId));
                        }
                        break;
                    case _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorMessageTypes.instantMessage:
                        if (!!this.privConversationTranslator) {
                            this.privConversationTranslator.textMessageReceived(this.privConversationTranslator, new _Exports__WEBPACK_IMPORTED_MODULE_7__.ConversationTranslationEventArgs(e.payload, undefined, e.sessionId));
                        }
                        break;
                }
            }
            catch (e) {
                //
            }
        };
        this.onParticipantsListReceived = (r, e) => {
            var _a;
            try {
                // check if the session token needs to be updated
                if (e.sessionToken !== undefined && e.sessionToken !== null) {
                    this.privRoom.token = e.sessionToken;
                }
                // save the participants
                this.privParticipants.participants = [...e.participants];
                // enable the conversation
                if (this.privParticipants.me !== undefined) {
                    this.privIsReady = true;
                }
                if (!!this.privConversationTranslator) {
                    this.privConversationTranslator.participantsChanged(this.privConversationTranslator, new _Exports__WEBPACK_IMPORTED_MODULE_5__.ConversationParticipantsChangedEventArgs(_Exports__WEBPACK_IMPORTED_MODULE_6__.ParticipantChangedReason.JoinedConversation, this.toParticipants(true), e.sessionId));
                }
                // if this is the host, update the nickname if needed
                if (this.me.isHost) {
                    const nickname = (_a = this.privConversationTranslator) === null || _a === void 0 ? void 0 : _a.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.ConversationTranslator_Name);
                    if (nickname !== undefined && nickname.length > 0 && nickname !== this.me.displayName) {
                        // issue a change nickname request
                        this.changeNicknameAsync(nickname);
                    }
                }
            }
            catch (e) {
                //
            }
        };
        this.onConversationExpiration = (r, e) => {
            try {
                if (!!this.privConversationTranslator) {
                    this.privConversationTranslator.conversationExpiration(this.privConversationTranslator, e);
                }
            }
            catch (e) {
                //
            }
        };
        this.privIsConnected = false;
        this.privIsDisposed = false;
        this.privConversationId = "";
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_8__.PropertyCollection();
        this.privManager = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_9__.ConversationManager();
        // check the speech language
        const language = speechConfig.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_RecoLanguage]);
        if (!language) {
            speechConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_RecoLanguage], _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__.ConversationConnectionConfig.defaultLanguageCode);
        }
        this.privLanguage = speechConfig.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_RecoLanguage]);
        if (!id) {
            // check the target language(s)
            if (speechConfig.targetLanguages.length === 0) {
                speechConfig.addTargetLanguage(this.privLanguage);
            }
            // check the profanity setting: speech and conversationTranslator should be in sync
            const profanity = speechConfig.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceResponse_ProfanityOption]);
            if (!profanity) {
                speechConfig.setProfanity(_Exports__WEBPACK_IMPORTED_MODULE_10__.ProfanityOption.Masked);
            }
            // check the nickname: it should pass this regex: ^\w+([\s-][\w\(\)]+)*$"
            // TODO: specify the regex required. Nicknames must be unique or get the duplicate nickname error
            // TODO: check what the max length is and if a truncation is required or if the service handles it without an error
            let hostNickname = speechConfig.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.ConversationTranslator_Name]);
            if (hostNickname === undefined || hostNickname === null) {
                hostNickname = "Host";
            }
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrTooLong(hostNickname, "nickname", 50);
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrTooShort(hostNickname, "nickname", 2);
            speechConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.ConversationTranslator_Name], hostNickname);
        }
        else {
            this.privConversationId = id;
        }
        // save the speech config for future usage
        this.privConfig = speechConfig;
        // save the config properties
        const configImpl = speechConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNull(configImpl, "speechConfig");
        this.privProperties = configImpl.properties.clone();
        this.privIsConnected = false;
        this.privParticipants = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.InternalParticipants();
        this.privIsReady = false;
        this.privTextMessageMaxLength = 1000;
    }
    // get the internal data about a conversation
    get room() {
        return this.privRoom;
    }
    // get the wrapper for connecting to the websockets
    get connection() {
        return this.privConversationRecognizer; // this.privConnection;
    }
    // get the config
    get config() {
        return this.privConfig;
    }
    // get the conversation Id
    get conversationId() {
        return this.privRoom ? this.privRoom.roomId : this.privConversationId;
    }
    // get the properties
    get properties() {
        return this.privProperties;
    }
    // get the speech language
    get speechRecognitionLanguage() {
        return this.privLanguage;
    }
    get isMutedByHost() {
        var _a, _b;
        return ((_a = this.privParticipants.me) === null || _a === void 0 ? void 0 : _a.isHost) ? false : (_b = this.privParticipants.me) === null || _b === void 0 ? void 0 : _b.isMuted;
    }
    get isConnected() {
        return this.privIsConnected && this.privIsReady;
    }
    get participants() {
        return this.toParticipants(true);
    }
    get me() {
        return this.toParticipant(this.privParticipants.me);
    }
    get host() {
        return this.toParticipant(this.privParticipants.host);
    }
    get transcriberRecognizer() {
        return this.privTranscriberRecognizer;
    }
    get conversationInfo() {
        const convId = this.conversationId;
        const p = this.participants.map((part) => ({
            id: part.id,
            preferredLanguage: part.preferredLanguage,
            voice: part.voice
        }));
        const props = {};
        for (const key of _common_speech_Exports__WEBPACK_IMPORTED_MODULE_1__.ConversationConnectionConfig.transcriptionEventKeys) {
            const val = this.properties.getProperty(key, "");
            if (val !== "") {
                props[key] = val;
            }
        }
        const info = { id: convId, participants: p, conversationProperties: props };
        return info;
    }
    get canSend() {
        var _a;
        return this.privIsConnected && !((_a = this.privParticipants.me) === null || _a === void 0 ? void 0 : _a.isMuted);
    }
    get canSendAsHost() {
        var _a;
        return this.privIsConnected && ((_a = this.privParticipants.me) === null || _a === void 0 ? void 0 : _a.isHost);
    }
    // get / set the speech auth token
    // eslint-disable-next-line @typescript-eslint/member-ordering
    get authorizationToken() {
        return this.privToken;
    }
    set authorizationToken(value) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(value, "authorizationToken");
        this.privToken = value;
    }
    set conversationTranslator(conversationTranslator) {
        this.privConversationTranslator = conversationTranslator;
    }
    /**
     * Create a new conversation as Host
     * @param cb
     * @param err
     */
    createConversationAsync(cb, err) {
        try {
            if (!!this.privConversationRecognizer) {
                this.handleError(new Error(this.privErrors.permissionDeniedStart), err);
            }
            this.privManager.createOrJoin(this.privProperties, undefined, ((room) => {
                if (!room) {
                    this.handleError(new Error(this.privErrors.permissionDeniedConnect), err);
                }
                this.privRoom = room;
                this.handleCallback(cb, err);
            }), ((error) => {
                this.handleError(error, err);
            }));
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Starts a new conversation as host.
     * @param cb
     * @param err
     */
    startConversationAsync(cb, err) {
        try {
            // check if there is already a recognizer
            if (!!this.privConversationRecognizer) {
                this.handleError(new Error(this.privErrors.permissionDeniedStart), err);
            }
            // check if there is conversation data available
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedConnect);
            // connect to the conversation websocket
            this.privParticipants.meId = this.privRoom.participantId;
            this.privConversationRecognizer = _common_speech_Exports__WEBPACK_IMPORTED_MODULE_11__.ConversationRecognizerFactory.fromConfig(this, this.privConfig);
            // Because ConversationTranslator manually sets up and manages the connection, Conversation
            // has to forward serviceRecognizer connection events that usually get passed automatically
            this.privConversationRecognizer.connected = this.onConnected;
            this.privConversationRecognizer.disconnected = this.onDisconnected;
            this.privConversationRecognizer.canceled = this.onCanceled;
            this.privConversationRecognizer.participantUpdateCommandReceived = this.onParticipantUpdateCommandReceived;
            this.privConversationRecognizer.lockRoomCommandReceived = this.onLockRoomCommandReceived;
            this.privConversationRecognizer.muteAllCommandReceived = this.onMuteAllCommandReceived;
            this.privConversationRecognizer.participantJoinCommandReceived = this.onParticipantJoinCommandReceived;
            this.privConversationRecognizer.participantLeaveCommandReceived = this.onParticipantLeaveCommandReceived;
            this.privConversationRecognizer.translationReceived = this.onTranslationReceived;
            this.privConversationRecognizer.participantsListReceived = this.onParticipantsListReceived;
            this.privConversationRecognizer.conversationExpiration = this.onConversationExpiration;
            this.privConversationRecognizer.connect(this.privRoom.token, (() => {
                this.handleCallback(cb, err);
            }), ((error) => {
                this.handleError(error, err);
            }));
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Join a conversation as a participant.
     * @param { IParticipant } participant - participant to add
     * @param cb
     * @param err
     */
    addParticipantAsync(participant, cb, err) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(participant, "Participant");
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_3__.marshalPromiseToCallbacks)(this.addParticipantImplAsync(participant), cb, err);
    }
    /**
     * Join a conversation as a participant.
     * @param conversation
     * @param nickname
     * @param lang
     * @param cb
     * @param err
     */
    joinConversationAsync(conversationId, nickname, lang, cb, err) {
        try {
            // TODO
            // if (!!this.privConversationRecognizer) {
            //     throw new Error(this.privErrors.permissionDeniedStart);
            // }
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(conversationId, this.privErrors.invalidArgs.replace("{arg}", "conversationId"));
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(nickname, this.privErrors.invalidArgs.replace("{arg}", "nickname"));
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(lang, this.privErrors.invalidArgs.replace("{arg}", "language"));
            // join the conversation
            this.privManager.createOrJoin(this.privProperties, conversationId, ((room) => {
                _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(room, this.privErrors.permissionDeniedConnect);
                this.privRoom = room;
                this.privConfig.authorizationToken = room.cognitiveSpeechAuthToken;
                // join callback
                if (!!cb) {
                    cb(room.cognitiveSpeechAuthToken);
                }
            }), ((error) => {
                this.handleError(error, err);
            }));
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Deletes a conversation
     * @param cb
     * @param err
     */
    deleteConversationAsync(cb, err) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_3__.marshalPromiseToCallbacks)(this.deleteConversationImplAsync(), cb, err);
    }
    deleteConversationImplAsync() {
        return __awaiter(this, void 0, void 0, function* () {
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(this.privProperties, this.privErrors.permissionDeniedConnect);
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(this.privRoom.token, this.privErrors.permissionDeniedConnect);
            yield this.privManager.leave(this.privProperties, this.privRoom.token);
            this.dispose();
        });
    }
    /**
     * Issues a request to close the client websockets
     * @param cb
     * @param err
     */
    endConversationAsync(cb, err) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_3__.marshalPromiseToCallbacks)(this.endConversationImplAsync(), cb, err);
    }
    endConversationImplAsync() {
        return this.close(true);
    }
    /**
     * Issues a request to lock the conversation
     * @param cb
     * @param err
     */
    lockConversationAsync(cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privIsDisposed);
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
            if (!this.canSendAsHost) {
                this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}", "lock")), err);
            }
            if (!!this.privConversationRecognizer) {
                this.privConversationRecognizer.sendRequest(this.getLockCommand(true), (() => {
                    this.handleCallback(cb, err);
                }), ((error) => {
                    this.handleError(error, err);
                }));
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Issues a request to mute the conversation
     * @param cb
     * @param err
     */
    muteAllParticipantsAsync(cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privIsDisposed);
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer, this.privErrors.permissionDeniedSend);
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
            // check the user's permissions
            if (!this.canSendAsHost) {
                this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}", "mute")), err);
            }
            if (!!this.privConversationRecognizer) {
                this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(true), (() => {
                    this.handleCallback(cb, err);
                }), ((error) => {
                    this.handleError(error, err);
                }));
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Issues a request to mute a participant in the conversation
     * @param userId
     * @param cb
     * @param err
     */
    muteParticipantAsync(userId, cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privIsDisposed);
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(userId, this.privErrors.invalidArgs.replace("{arg}", "userId"));
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
            // check the connection is open (host + participant can perform the mute command)
            if (!this.canSend) {
                this.handleError(new Error(this.privErrors.permissionDeniedSend), err);
            }
            // if not host, check the participant is not muting another participant
            if (!this.me.isHost && this.me.id !== userId) {
                this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}", "mute")), err);
            }
            // check the user exists
            const exists = this.privParticipants.getParticipantIndex(userId);
            if (exists === -1) {
                this.handleError(new Error(this.privErrors.invalidParticipantRequest), err);
            }
            if (!!this.privConversationRecognizer) {
                this.privConversationRecognizer.sendRequest(this.getMuteCommand(userId, true), (() => {
                    this.handleCallback(cb, err);
                }), ((error) => {
                    this.handleError(error, err);
                }));
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Issues a request to remove a participant from the conversation
     * @param userId
     * @param cb
     * @param err
     */
    removeParticipantAsync(userId, cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privIsDisposed);
            if (!!this.privTranscriberRecognizer && userId.hasOwnProperty("id")) {
                // Assume this is a transcription participant
                (0,_common_Exports__WEBPACK_IMPORTED_MODULE_3__.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(userId), cb, err);
            }
            else {
                _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());
                _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
                if (!this.canSendAsHost) {
                    this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}", "remove")), err);
                }
                let participantId = "";
                if (typeof userId === "string") {
                    participantId = userId;
                }
                else if (userId.hasOwnProperty("id")) {
                    const participant = userId;
                    participantId = participant.id;
                }
                else if (userId.hasOwnProperty("userId")) {
                    const user = userId;
                    participantId = user.userId;
                }
                _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(participantId, this.privErrors.invalidArgs.replace("{arg}", "userId"));
                // check the participant exists
                const index = this.participants.findIndex((p) => p.id === participantId);
                if (index === -1) {
                    this.handleError(new Error(this.privErrors.invalidParticipantRequest), err);
                }
                if (!!this.privConversationRecognizer) {
                    this.privConversationRecognizer.sendRequest(this.getEjectCommand(participantId), (() => {
                        this.handleCallback(cb, err);
                    }), ((error) => {
                        this.handleError(error, err);
                    }));
                }
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Issues a request to unlock the conversation
     * @param cb
     * @param err
     */
    unlockConversationAsync(cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privIsDisposed);
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
            if (!this.canSendAsHost) {
                this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}", "unlock")), err);
            }
            if (!!this.privConversationRecognizer) {
                this.privConversationRecognizer.sendRequest(this.getLockCommand(false), (() => {
                    this.handleCallback(cb, err);
                }), ((error) => {
                    this.handleError(error, err);
                }));
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Issues a request to unmute all participants in the conversation
     * @param cb
     * @param err
     */
    unmuteAllParticipantsAsync(cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privIsDisposed);
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
            if (!this.canSendAsHost) {
                this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}", "unmute all")), err);
            }
            if (!!this.privConversationRecognizer) {
                this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(false), (() => {
                    this.handleCallback(cb, err);
                }), ((error) => {
                    this.handleError(error, err);
                }));
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Issues a request to unmute a participant in the conversation
     * @param userId
     * @param cb
     * @param err
     */
    unmuteParticipantAsync(userId, cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privIsDisposed);
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(userId, this.privErrors.invalidArgs.replace("{arg}", "userId"));
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
            // check the connection is open (host + participant can perform the mute command)
            if (!this.canSend) {
                this.handleError(new Error(this.privErrors.permissionDeniedSend), err);
            }
            // if not host, check the participant is not muting another participant
            if (!this.me.isHost && this.me.id !== userId) {
                this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}", "mute")), err);
            }
            // check the user exists
            const exists = this.privParticipants.getParticipantIndex(userId);
            if (exists === -1) {
                this.handleError(new Error(this.privErrors.invalidParticipantRequest), err);
            }
            if (!!this.privConversationRecognizer) {
                this.privConversationRecognizer.sendRequest(this.getMuteCommand(userId, false), (() => {
                    this.handleCallback(cb, err);
                }), ((error) => {
                    this.handleError(error, err);
                }));
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Send a text message
     * @param message
     * @param cb
     * @param err
     */
    sendTextMessageAsync(message, cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privIsDisposed);
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(message, this.privErrors.invalidArgs.replace("{arg}", "message"));
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
            if (!this.canSend) {
                this.handleError(new Error(this.privErrors.permissionDeniedSend), err);
            }
            // TODO: is a max length check required?
            if (message.length > this.privTextMessageMaxLength) {
                this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}", "message length")), err);
            }
            if (!!this.privConversationRecognizer) {
                this.privConversationRecognizer.sendRequest(this.getMessageCommand(message), (() => {
                    this.handleCallback(cb, err);
                }), ((error) => {
                    this.handleError(error, err);
                }));
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Set translated to languages
     * @param {string[]} languages - languages to translate to
     * @param cb
     * @param err
     */
    setTranslatedLanguagesAsync(languages, cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privIsDisposed);
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfArrayEmptyOrWhitespace(languages, this.privErrors.invalidArgs.replace("{arg}", "languages"));
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
            if (!this.canSend) {
                this.handleError(new Error(this.privErrors.permissionDeniedSend), err);
            }
            if (!!this.privConversationRecognizer) {
                this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(languages), (() => {
                    this.handleCallback(cb, err);
                }), ((error) => {
                    this.handleError(error, err);
                }));
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Change nickname
     * @param {string} nickname - new nickname for the room
     * @param cb
     * @param err
     */
    changeNicknameAsync(nickname, cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privIsDisposed);
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(nickname, this.privErrors.invalidArgs.replace("{arg}", "nickname"));
            _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrUndefined(this.privRoom, this.privErrors.permissionDeniedSend);
            if (!this.canSend) {
                this.handleError(new Error(this.privErrors.permissionDeniedSend), err);
            }
            if (!!this.privConversationRecognizer) {
                this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(nickname), (() => {
                    this.handleCallback(cb, err);
                }), ((error) => {
                    this.handleError(error, err);
                }));
            }
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    isDisposed() {
        return this.privIsDisposed;
    }
    dispose() {
        if (this.isDisposed) {
            return;
        }
        this.privIsDisposed = true;
        if (!!this.config) {
            this.config.close();
        }
        this.privConfig = undefined;
        this.privLanguage = undefined;
        this.privProperties = undefined;
        this.privRoom = undefined;
        this.privToken = undefined;
        this.privManager = undefined;
        this.privIsConnected = false;
        this.privIsReady = false;
        this.privParticipants = undefined;
    }
    connectTranscriberRecognizer(recognizer) {
        return __awaiter(this, void 0, void 0, function* () {
            if (!!this.privTranscriberRecognizer) {
                yield this.privTranscriberRecognizer.close();
            }
            yield recognizer.enforceAudioGating();
            this.privTranscriberRecognizer = recognizer;
            this.privTranscriberRecognizer.conversation = this;
        });
    }
    getKeepAlive() {
        const nickname = (!!this.me) ? this.me.displayName : "default_nickname";
        return JSON.stringify({
            id: "0",
            nickname,
            participantId: this.privRoom.participantId,
            roomId: this.privRoom.roomId,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorMessageTypes.keepAlive
        });
    }
    /* eslint-enable @typescript-eslint/typedef */
    addParticipantImplAsync(participant) {
        const newParticipant = this.privParticipants.addOrUpdateParticipant(participant);
        if (newParticipant !== undefined) {
            if (!!this.privTranscriberRecognizer) {
                const conversationInfo = this.conversationInfo;
                conversationInfo.participants = [participant];
                return this.privTranscriberRecognizer.pushConversationEvent(conversationInfo, "join");
            }
        }
    }
    removeParticipantImplAsync(participant) {
        this.privParticipants.deleteParticipant(participant.id);
        const conversationInfo = this.conversationInfo;
        conversationInfo.participants = [participant];
        return this.privTranscriberRecognizer.pushConversationEvent(conversationInfo, "leave");
    }
    close(dispose) {
        var _a;
        return __awaiter(this, void 0, void 0, function* () {
            try {
                this.privIsConnected = false;
                yield ((_a = this.privConversationRecognizer) === null || _a === void 0 ? void 0 : _a.close());
                this.privConversationRecognizer = undefined;
                if (!!this.privConversationTranslator) {
                    this.privConversationTranslator.dispose();
                }
            }
            catch (e) {
                // ignore error
                throw e;
            }
            if (dispose) {
                this.dispose();
            }
        });
    }
    /** Helpers */
    handleCallback(cb, err) {
        if (!!cb) {
            try {
                cb();
            }
            catch (e) {
                if (!!err) {
                    err(e);
                }
            }
            cb = undefined;
        }
    }
    handleError(error, err) {
        if (!!err) {
            if (error instanceof Error) {
                const typedError = error;
                err(typedError.name + ": " + typedError.message);
            }
            else {
                err(error);
            }
        }
    }
    /** Participant Helpers */
    toParticipants(includeHost) {
        const participants = this.privParticipants.participants.map((p) => (this.toParticipant(p)));
        if (!includeHost) {
            return participants.filter((p) => p.isHost === false);
        }
        else {
            return participants;
        }
    }
    toParticipant(p) {
        return new _Exports__WEBPACK_IMPORTED_MODULE_12__.Participant(p.id, p.avatar, p.displayName, p.isHost, p.isMuted, p.isUsingTts, p.preferredLanguage, p.voice);
    }
    getMuteAllCommand(isMuted) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId, "conversationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId, "participantId");
        return JSON.stringify({
            command: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorCommandTypes.setMuteAll,
            participantId: this.privRoom.participantId,
            roomid: this.privRoom.roomId,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorMessageTypes.participantCommand,
            value: isMuted
        });
    }
    getMuteCommand(participantId, isMuted) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId, "conversationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(participantId, "participantId");
        return JSON.stringify({
            command: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorCommandTypes.setMute,
            // eslint-disable-next-line object-shorthand
            participantId: participantId,
            roomid: this.privRoom.roomId,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorMessageTypes.participantCommand,
            value: isMuted
        });
    }
    getLockCommand(isLocked) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId, "conversationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId, "participantId");
        return JSON.stringify({
            command: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorCommandTypes.setLockState,
            participantId: this.privRoom.participantId,
            roomid: this.privRoom.roomId,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorMessageTypes.participantCommand,
            value: isLocked
        });
    }
    getEjectCommand(participantId) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId, "conversationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(participantId, "participantId");
        return JSON.stringify({
            command: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorCommandTypes.ejectParticipant,
            // eslint-disable-next-line object-shorthand
            participantId: participantId,
            roomid: this.privRoom.roomId,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorMessageTypes.participantCommand,
        });
    }
    getSetTranslateToLanguagesCommand(languages) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId, "conversationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId, "participantId");
        return JSON.stringify({
            command: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorCommandTypes.setTranslateToLanguages,
            participantId: this.privRoom.participantId,
            roomid: this.privRoom.roomId,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorMessageTypes.participantCommand,
            value: languages
        });
    }
    getChangeNicknameCommand(nickname) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId, "conversationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(nickname, "nickname");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId, "participantId");
        return JSON.stringify({
            command: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorCommandTypes.changeNickname,
            nickname,
            participantId: this.privRoom.participantId,
            roomid: this.privRoom.roomId,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorMessageTypes.participantCommand,
            value: nickname
        });
    }
    getMessageCommand(message) {
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId, "conversationId");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId, "participantId");
        _Contracts__WEBPACK_IMPORTED_MODULE_0__.Contracts.throwIfNullOrWhitespace(message, "message");
        return JSON.stringify({
            participantId: this.privRoom.participantId,
            roomId: this.privRoom.roomId,
            text: message,
            type: _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.ConversationTranslatorMessageTypes.instantMessage
        });
    }
}

//# sourceMappingURL=Conversation.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationCommon.js":
/*!************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationCommon.js ***!
  \************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationCommon": () => (/* binding */ ConversationCommon)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
class ConversationCommon {
    constructor(audioConfig) {
        this.privAudioConfig = audioConfig;
    }
    handleCallback(cb, err) {
        if (!!cb) {
            try {
                cb();
            }
            catch (e) {
                if (!!err) {
                    err(e);
                }
            }
            cb = undefined;
        }
    }
    handleError(error, err) {
        if (!!err) {
            if (error instanceof Error) {
                const typedError = error;
                err(typedError.name + ": " + typedError.message);
            }
            else {
                err(error);
            }
        }
    }
}

//# sourceMappingURL=ConversationCommon.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationExpirationEventArgs.js":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationExpirationEventArgs.js ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationExpirationEventArgs": () => (/* binding */ ConversationExpirationEventArgs)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.

class ConversationExpirationEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__.SessionEventArgs {
    constructor(expirationTime, sessionId) {
        super(sessionId);
        this.privExpirationTime = expirationTime;
    }
    /** How much longer until the conversation expires (in minutes). */
    get expirationTime() {
        return this.privExpirationTime;
    }
}

//# sourceMappingURL=ConversationExpirationEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationParticipantsChangedEventArgs.js":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationParticipantsChangedEventArgs.js ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationParticipantsChangedEventArgs": () => (/* binding */ ConversationParticipantsChangedEventArgs)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.

class ConversationParticipantsChangedEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__.SessionEventArgs {
    constructor(reason, participants, sessionId) {
        super(sessionId);
        this.privReason = reason;
        this.privParticipant = participants;
    }
    get reason() {
        return this.privReason;
    }
    get participants() {
        return this.privParticipant;
    }
}

//# sourceMappingURL=ConversationParticipantsChangedEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranscriber.js":
/*!*****************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranscriber.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationTranscriber": () => (/* binding */ ConversationTranscriber)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/TranscriberRecognizer.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Connection.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




class ConversationTranscriber {
    /**
     * ConversationTranscriber constructor.
     * @constructor
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */
    constructor(audioConfig) {
        this.privAudioConfig = audioConfig;
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyCollection();
        this.privRecognizer = undefined;
        this.privDisposedRecognizer = false;
    }
    /**
     * Gets the spoken language of recognition.
     * @member ConversationTranscriber.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @returns {string} The spoken language of recognition.
     */
    get speechRecognitionLanguage() {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceConnection_RecoLanguage);
    }
    /**
     * The collection of properties and their values defined for this ConversationTranscriber.
     * @member ConversationTranscriber.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this ConversationTranscriber.
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * @Internal
     * Internal data member to support fromRecognizer* pattern methods on other classes.
     * Do not use externally, object returned will change without warning or notice.
     */
    get internalData() {
        return this.privRecognizer.internalData;
    }
    /**
     * @Deprecated
     * @Obsolete
     * Please use the Connection.fromRecognizer pattern to obtain a connection object
     */
    get connection() {
        return _Exports__WEBPACK_IMPORTED_MODULE_3__.Connection.fromRecognizer(this.privRecognizer);
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member ConversationTranscriber.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceAuthorization_Token);
    }
    /**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member ConversationTranscriber.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */
    set authorizationToken(token) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(token, "token");
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_2__.PropertyId.SpeechServiceAuthorization_Token, token);
    }
    /**
     * @param {Conversation} conversation - conversation to be recognized
     */
    joinConversationAsync(conversation, cb, err) {
        const conversationImpl = conversation;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(conversationImpl, "Conversation");
        // ref the conversation object
        // create recognizer and subscribe to recognizer events
        this.privRecognizer = new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.TranscriberRecognizer(conversation.config, this.privAudioConfig);
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(this.privRecognizer, "Recognizer");
        this.privRecognizer.connectCallbacks(this);
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_5__.marshalPromiseToCallbacks)(conversationImpl.connectTranscriberRecognizer(this.privRecognizer), cb, err);
    }
    /**
     * Starts conversation transcription, until stopTranscribingAsync() is called.
     * User must subscribe to events to receive transcription results.
     * @member ConversationTranscriber.prototype.startTranscribingAsync
     * @function
     * @public
     * @param cb - Callback invoked once the transcription has started.
     * @param err - Callback invoked in case of an error.
     */
    startTranscribingAsync(cb, err) {
        this.privRecognizer.startContinuousRecognitionAsync(cb, err);
    }
    /**
     * Starts conversation transcription, until stopTranscribingAsync() is called.
     * User must subscribe to events to receive transcription results.
     * @member ConversationTranscriber.prototype.stopTranscribingAsync
     * @function
     * @public
     * @param cb - Callback invoked once the transcription has started.
     * @param err - Callback invoked in case of an error.
     */
    stopTranscribingAsync(cb, err) {
        this.privRecognizer.stopContinuousRecognitionAsync(cb, err);
    }
    /**
     * Leave the current conversation. After this is called, you will no longer receive any events.
     */
    leaveConversationAsync(cb, err) {
        this.privRecognizer.disconnectCallbacks();
        // eslint-disable-next-line
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_5__.marshalPromiseToCallbacks)((() => __awaiter(this, void 0, void 0, function* () { return; }))(), cb, err);
    }
    /**
     * closes all external resources held by an instance of this class.
     * @member ConversationTranscriber.prototype.close
     * @function
     * @public
     */
    close(cb, errorCb) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedRecognizer);
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_5__.marshalPromiseToCallbacks)(this.dispose(true), cb, errorCb);
    }
    /**
     * Disposes any resources held by the object.
     * @member ConversationTranscriber.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - true if disposing the object.
     */
    dispose(disposing) {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privDisposedRecognizer) {
                return;
            }
            if (!!this.privRecognizer) {
                yield this.privRecognizer.close();
                this.privRecognizer = undefined;
            }
            if (disposing) {
                this.privDisposedRecognizer = true;
            }
        });
    }
}

//# sourceMappingURL=ConversationTranscriber.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationCanceledEventArgs.js":
/*!**********************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationCanceledEventArgs.js ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationTranslationCanceledEventArgs": () => (/* binding */ ConversationTranslationCanceledEventArgs)
/* harmony export */ });
/* harmony import */ var _CancellationEventArgsBase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../CancellationEventArgsBase */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationEventArgsBase.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.

class ConversationTranslationCanceledEventArgs extends _CancellationEventArgsBase__WEBPACK_IMPORTED_MODULE_0__.CancellationEventArgsBase {
}

//# sourceMappingURL=ConversationTranslationCanceledEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationEventArgs.js":
/*!**************************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationEventArgs.js ***!
  \**************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationTranslationEventArgs": () => (/* binding */ ConversationTranslationEventArgs)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionEventArgs.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.

class ConversationTranslationEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__.RecognitionEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {ConversationTranslationResult} result - The translation recognition result.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */
    constructor(result, offset, sessionId) {
        super(offset, sessionId);
        this.privResult = result;
    }
    /**
     * Specifies the recognition result.
     * @returns {ConversationTranslationResult} the recognition result.
     */
    get result() {
        return this.privResult;
    }
}

//# sourceMappingURL=ConversationTranslationEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationResult.js":
/*!***********************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationResult.js ***!
  \***********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationTranslationResult": () => (/* binding */ ConversationTranslationResult)
/* harmony export */ });
/* harmony import */ var _TranslationRecognitionResult__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../TranslationRecognitionResult */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionResult.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.

class ConversationTranslationResult extends _TranslationRecognitionResult__WEBPACK_IMPORTED_MODULE_0__.TranslationRecognitionResult {
    constructor(participantId, translations, originalLanguage, resultId, reason, text, duration, offset, errorDetails, json, properties) {
        super(translations, resultId, reason, text, duration, offset, undefined, undefined, errorDetails, json, properties);
        this.privId = participantId;
        this.privOrigLang = originalLanguage;
    }
    /**
     * The unique identifier for the participant this result is for.
     */
    get participantId() {
        return this.privId;
    }
    /**
     * The original language this result was in.
     */
    get originalLang() {
        return this.privOrigLang;
    }
}

//# sourceMappingURL=ConversationTranslationResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslator.js":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslator.js ***!
  \****************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ConversationTranslator": () => (/* binding */ ConversationTranslator),
/* harmony export */   "SpeechState": () => (/* binding */ SpeechState)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationConnectionConfig.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _common_speech_Transcription_ConversationTranslatorConnectionFactory__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common.speech/Transcription/ConversationTranslatorConnectionFactory */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Transcription/ConversationTranslatorConnectionFactory.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognizer.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechTranslationConfig.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ProfanityOption.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ServicePropertyChannel.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioConfig.js");
/* harmony import */ var _Conversation__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./Conversation */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/Conversation.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationTranslationCanceledEventArgs.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ConversationCommon.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/* eslint-disable max-classes-per-file */







var SpeechState;
(function (SpeechState) {
    SpeechState[SpeechState["Inactive"] = 0] = "Inactive";
    SpeechState[SpeechState["Connecting"] = 1] = "Connecting";
    SpeechState[SpeechState["Connected"] = 2] = "Connected";
})(SpeechState || (SpeechState = {}));
// child class of TranslationRecognizer meant only for use with ConversationTranslator
class ConversationTranslationRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_0__.TranslationRecognizer {
    constructor(speechConfig, audioConfig, translator, convGetter) {
        super(speechConfig, audioConfig, new _common_speech_Transcription_ConversationTranslatorConnectionFactory__WEBPACK_IMPORTED_MODULE_1__.ConversationTranslatorConnectionFactory(convGetter));
        this.privSpeechState = SpeechState.Inactive;
        if (!!translator) {
            this.privTranslator = translator;
            this.sessionStarted = () => {
                this.privSpeechState = SpeechState.Connected;
            };
            this.sessionStopped = () => {
                this.privSpeechState = SpeechState.Inactive;
            };
            this.recognizing = (tr, e) => {
                if (!!this.privTranslator.recognizing) {
                    this.privTranslator.recognizing(this.privTranslator, e);
                }
            };
            // eslint-disable-next-line @typescript-eslint/no-misused-promises
            this.recognized = (tr, e) => __awaiter(this, void 0, void 0, function* () {
                var _a;
                // if there is an error connecting to the conversation service from the speech service the error will be returned in the ErrorDetails field.
                if ((_a = e.result) === null || _a === void 0 ? void 0 : _a.errorDetails) {
                    yield this.cancelSpeech();
                    // TODO: format the error message contained in 'errorDetails'
                    this.fireCancelEvent(e.result.errorDetails);
                }
                else {
                    if (!!this.privTranslator.recognized) {
                        this.privTranslator.recognized(this.privTranslator, e);
                    }
                }
                return;
            });
            // eslint-disable-next-line @typescript-eslint/no-misused-promises
            this.canceled = () => __awaiter(this, void 0, void 0, function* () {
                if (this.privSpeechState !== SpeechState.Inactive) {
                    try {
                        yield this.cancelSpeech();
                    }
                    catch (error) {
                        this.privSpeechState = SpeechState.Inactive;
                    }
                }
            });
        }
    }
    get state() {
        return this.privSpeechState;
    }
    set state(newState) {
        this.privSpeechState = newState;
    }
    onConnection() {
        this.privSpeechState = SpeechState.Connected;
    }
    onDisconnection() {
        return __awaiter(this, void 0, void 0, function* () {
            this.privSpeechState = SpeechState.Inactive;
            yield this.cancelSpeech();
        });
    }
    /**
     * Fire a cancel event
     * @param error
     */
    fireCancelEvent(error) {
        try {
            if (!!this.privTranslator.canceled) {
                const cancelEvent = new _Exports__WEBPACK_IMPORTED_MODULE_2__.ConversationTranslationCanceledEventArgs(_Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationReason.Error, error, _Exports__WEBPACK_IMPORTED_MODULE_4__.CancellationErrorCode.RuntimeError);
                this.privTranslator.canceled(this.privTranslator, cancelEvent);
            }
        }
        catch (e) {
            //
        }
    }
    cancelSpeech() {
        var _a;
        return __awaiter(this, void 0, void 0, function* () {
            try {
                this.stopContinuousRecognitionAsync();
                yield ((_a = this.privReco) === null || _a === void 0 ? void 0 : _a.disconnect());
                this.privSpeechState = SpeechState.Inactive;
            }
            catch (e) {
                // ignore the error
            }
        });
    }
}
/**
 * Join, leave or connect to a conversation.
 */
class ConversationTranslator extends _Exports__WEBPACK_IMPORTED_MODULE_5__.ConversationCommon {
    constructor(audioConfig) {
        super(audioConfig);
        this.privErrors = _common_speech_Exports__WEBPACK_IMPORTED_MODULE_6__.ConversationConnectionConfig.restErrors;
        this.privIsDisposed = false;
        this.privIsSpeaking = false;
        this.privPlaceholderKey = "abcdefghijklmnopqrstuvwxyz012345";
        this.privPlaceholderRegion = "westus";
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_7__.PropertyCollection();
    }
    get properties() {
        return this.privProperties;
    }
    get speechRecognitionLanguage() {
        return this.privSpeechRecognitionLanguage;
    }
    get participants() {
        var _a;
        return (_a = this.privConversation) === null || _a === void 0 ? void 0 : _a.participants;
    }
    get canSpeak() {
        // is there a Conversation websocket available and has the Recognizer been set up
        if (!this.privConversation.isConnected || !this.privCTRecognizer) {
            return false;
        }
        // is the user already speaking
        if (this.privIsSpeaking || this.privCTRecognizer.state === SpeechState.Connected || this.privCTRecognizer.state === SpeechState.Connecting) {
            return false;
        }
        // is the user muted
        if (this.privConversation.isMutedByHost) {
            return false;
        }
        return true;
    }
    setServiceProperty(name, value) {
        const currentProperties = JSON.parse(this.privProperties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_8__.ServicePropertiesPropertyName, "{}"));
        currentProperties[name] = value;
        this.privProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_8__.ServicePropertiesPropertyName, JSON.stringify(currentProperties));
    }
    joinConversationAsync(conversation, nickname, param1, param2, param3) {
        try {
            if (typeof conversation === "string") {
                _Contracts__WEBPACK_IMPORTED_MODULE_9__.Contracts.throwIfNullOrUndefined(conversation, this.privErrors.invalidArgs.replace("{arg}", "conversation id"));
                _Contracts__WEBPACK_IMPORTED_MODULE_9__.Contracts.throwIfNullOrWhitespace(nickname, this.privErrors.invalidArgs.replace("{arg}", "nickname"));
                if (!!this.privConversation) {
                    this.handleError(new Error(this.privErrors.permissionDeniedStart), param3);
                }
                let lang = param1;
                if (lang === undefined || lang === null || lang === "") {
                    lang = _common_speech_Exports__WEBPACK_IMPORTED_MODULE_6__.ConversationConnectionConfig.defaultLanguageCode;
                }
                // create a placeholder config
                this.privSpeechTranslationConfig = _Exports__WEBPACK_IMPORTED_MODULE_10__.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey, this.privPlaceholderRegion);
                this.privSpeechTranslationConfig.setProfanity(_Exports__WEBPACK_IMPORTED_MODULE_11__.ProfanityOption.Masked);
                this.privSpeechTranslationConfig.addTargetLanguage(lang);
                this.privSpeechTranslationConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_12__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_12__.PropertyId.SpeechServiceConnection_RecoLanguage], lang);
                this.privSpeechTranslationConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_12__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_12__.PropertyId.ConversationTranslator_Name], nickname);
                const propertyIdsToCopy = [
                    _Exports__WEBPACK_IMPORTED_MODULE_12__.PropertyId.SpeechServiceConnection_Host,
                    _Exports__WEBPACK_IMPORTED_MODULE_12__.PropertyId.ConversationTranslator_Host,
                    _Exports__WEBPACK_IMPORTED_MODULE_12__.PropertyId.SpeechServiceConnection_Endpoint,
                    _Exports__WEBPACK_IMPORTED_MODULE_12__.PropertyId.SpeechServiceConnection_ProxyHostName,
                    _Exports__WEBPACK_IMPORTED_MODULE_12__.PropertyId.SpeechServiceConnection_ProxyPassword,
                    _Exports__WEBPACK_IMPORTED_MODULE_12__.PropertyId.SpeechServiceConnection_ProxyPort,
                    _Exports__WEBPACK_IMPORTED_MODULE_12__.PropertyId.SpeechServiceConnection_ProxyUserName,
                    "ConversationTranslator_MultiChannelAudio",
                    "ConversationTranslator_Region"
                ];
                for (const prop of propertyIdsToCopy) {
                    const value = this.privProperties.getProperty(prop);
                    if (value) {
                        const key = typeof prop === "string" ? prop : _Exports__WEBPACK_IMPORTED_MODULE_12__.PropertyId[prop];
                        this.privSpeechTranslationConfig.setProperty(key, value);
                    }
                }
                const currentProperties = JSON.parse(this.privProperties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_8__.ServicePropertiesPropertyName, "{}"));
                for (const prop of Object.keys(currentProperties)) {
                    this.privSpeechTranslationConfig.setServiceProperty(prop, currentProperties[prop], _Exports__WEBPACK_IMPORTED_MODULE_13__.ServicePropertyChannel.UriQueryParameter);
                }
                // join the conversation
                this.privConversation = new _Conversation__WEBPACK_IMPORTED_MODULE_14__.ConversationImpl(this.privSpeechTranslationConfig);
                this.privConversation.conversationTranslator = this;
                this.privConversation.joinConversationAsync(conversation, nickname, lang, ((result) => {
                    if (!result) {
                        this.handleError(new Error(this.privErrors.permissionDeniedConnect), param3);
                    }
                    this.privSpeechTranslationConfig.authorizationToken = result;
                    this.privConversation.room.isHost = false;
                    // connect to the ws
                    this.privConversation.startConversationAsync((() => {
                        this.handleCallback(param2, param3);
                    }), ((error) => {
                        this.handleError(error, param3);
                    }));
                }), ((error) => {
                    this.handleError(error, param3);
                }));
            }
            else if (typeof conversation === "object") {
                _Contracts__WEBPACK_IMPORTED_MODULE_9__.Contracts.throwIfNullOrUndefined(conversation, this.privErrors.invalidArgs.replace("{arg}", "conversation id"));
                _Contracts__WEBPACK_IMPORTED_MODULE_9__.Contracts.throwIfNullOrWhitespace(nickname, this.privErrors.invalidArgs.replace("{arg}", "nickname"));
                // save the nickname
                this.privProperties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_12__.PropertyId.ConversationTranslator_Name, nickname);
                // ref the conversation object
                this.privConversation = conversation;
                // ref the conversation translator object
                this.privConversation.conversationTranslator = this;
                this.privConversation.room.isHost = true;
                _Contracts__WEBPACK_IMPORTED_MODULE_9__.Contracts.throwIfNullOrUndefined(this.privConversation, this.privErrors.permissionDeniedConnect);
                _Contracts__WEBPACK_IMPORTED_MODULE_9__.Contracts.throwIfNullOrUndefined(this.privConversation.room.token, this.privErrors.permissionDeniedConnect);
                this.privSpeechTranslationConfig = conversation.config;
                this.handleCallback(param1, param2);
            }
            else {
                this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}", "invalid conversation type")), param2);
            }
        }
        catch (error) {
            this.handleError(error, typeof param1 === "string" ? param3 : param2);
        }
    }
    /**
     * Leave the conversation
     * @param cb
     * @param err
     */
    leaveConversationAsync(cb, err) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_15__.marshalPromiseToCallbacks)((() => __awaiter(this, void 0, void 0, function* () {
            // stop the speech websocket
            yield this.cancelSpeech();
            // stop the websocket
            yield this.privConversation.endConversationImplAsync();
            // https delete request
            yield this.privConversation.deleteConversationImplAsync();
            this.dispose();
        }))(), cb, err);
    }
    /**
     * Send a text message
     * @param message
     * @param cb
     * @param err
     */
    sendTextMessageAsync(message, cb, err) {
        try {
            _Contracts__WEBPACK_IMPORTED_MODULE_9__.Contracts.throwIfNullOrUndefined(this.privConversation, this.privErrors.permissionDeniedSend);
            _Contracts__WEBPACK_IMPORTED_MODULE_9__.Contracts.throwIfNullOrWhitespace(message, this.privErrors.invalidArgs.replace("{arg}", message));
            this.privConversation.sendTextMessageAsync(message, cb, err);
        }
        catch (error) {
            this.handleError(error, err);
        }
    }
    /**
     * Start speaking
     * @param cb
     * @param err
     */
    startTranscribingAsync(cb, err) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_15__.marshalPromiseToCallbacks)((() => __awaiter(this, void 0, void 0, function* () {
            try {
                _Contracts__WEBPACK_IMPORTED_MODULE_9__.Contracts.throwIfNullOrUndefined(this.privConversation, this.privErrors.permissionDeniedSend);
                _Contracts__WEBPACK_IMPORTED_MODULE_9__.Contracts.throwIfNullOrUndefined(this.privConversation.room.token, this.privErrors.permissionDeniedConnect);
                if (this.privCTRecognizer === undefined) {
                    yield this.connectTranslatorRecognizer();
                }
                _Contracts__WEBPACK_IMPORTED_MODULE_9__.Contracts.throwIfNullOrUndefined(this.privCTRecognizer, this.privErrors.permissionDeniedSend);
                if (!this.canSpeak) {
                    this.handleError(new Error(this.privErrors.permissionDeniedSend), err);
                }
                yield this.startContinuousRecognition();
                this.privIsSpeaking = true;
            }
            catch (error) {
                this.privIsSpeaking = false;
                yield this.cancelSpeech();
                throw error;
            }
        }))(), cb, err);
    }
    /**
     * Stop speaking
     * @param cb
     * @param err
     */
    stopTranscribingAsync(cb, err) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_15__.marshalPromiseToCallbacks)((() => __awaiter(this, void 0, void 0, function* () {
            try {
                if (!this.privIsSpeaking) {
                    // stop speech
                    yield this.cancelSpeech();
                    return;
                }
                // stop the recognition but leave the websocket open
                this.privIsSpeaking = false;
                yield new Promise((resolve, reject) => {
                    this.privCTRecognizer.stopContinuousRecognitionAsync(resolve, reject);
                });
            }
            catch (error) {
                yield this.cancelSpeech();
            }
        }))(), cb, err);
    }
    isDisposed() {
        return this.privIsDisposed;
    }
    dispose(reason, success, err) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_15__.marshalPromiseToCallbacks)((() => __awaiter(this, void 0, void 0, function* () {
            if (this.isDisposed && !this.privIsSpeaking) {
                return;
            }
            yield this.cancelSpeech();
            this.privIsDisposed = true;
            this.privSpeechTranslationConfig.close();
            this.privSpeechRecognitionLanguage = undefined;
            this.privProperties = undefined;
            this.privAudioConfig = undefined;
            this.privSpeechTranslationConfig = undefined;
            this.privConversation.dispose();
            this.privConversation = undefined;
        }))(), success, err);
    }
    /**
     * Cancel the speech websocket
     */
    cancelSpeech() {
        var _a;
        return __awaiter(this, void 0, void 0, function* () {
            try {
                this.privIsSpeaking = false;
                yield ((_a = this.privCTRecognizer) === null || _a === void 0 ? void 0 : _a.onDisconnection());
                this.privCTRecognizer = undefined;
            }
            catch (e) {
                // ignore the error
            }
        });
    }
    /**
     * Connect to the speech translation recognizer.
     * Currently there is no language validation performed before sending the SpeechLanguage code to the service.
     * If it's an invalid language the raw error will be: 'Error during WebSocket handshake: Unexpected response code: 400'
     * e.g. pass in 'fr' instead of 'fr-FR', or a text-only language 'cy'
     */
    connectTranslatorRecognizer() {
        return __awaiter(this, void 0, void 0, function* () {
            try {
                if (this.privAudioConfig === undefined) {
                    this.privAudioConfig = _Exports__WEBPACK_IMPORTED_MODULE_16__.AudioConfig.fromDefaultMicrophoneInput();
                }
                // clear the temp subscription key if it's a participant joining
                if (this.privSpeechTranslationConfig.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_12__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_12__.PropertyId.SpeechServiceConnection_Key])
                    === this.privPlaceholderKey) {
                    this.privSpeechTranslationConfig.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_12__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_12__.PropertyId.SpeechServiceConnection_Key], "");
                }
                const convGetter = () => this.privConversation;
                this.privCTRecognizer = new ConversationTranslationRecognizer(this.privSpeechTranslationConfig, this.privAudioConfig, this, convGetter);
            }
            catch (error) {
                yield this.cancelSpeech();
                throw error;
            }
        });
    }
    /**
     * Handle the start speaking request
     */
    startContinuousRecognition() {
        return new Promise((resolve, reject) => {
            this.privCTRecognizer.startContinuousRecognitionAsync(resolve, reject);
        });
    }
}

//# sourceMappingURL=ConversationTranslator.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/IParticipant.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/IParticipant.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Participant": () => (/* binding */ Participant),
/* harmony export */   "User": () => (/* binding */ User)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
/* eslint-disable max-classes-per-file */

class User {
    constructor(userId) {
        this.privUserId = userId;
    }
    get userId() {
        return this.privUserId;
    }
}
class Participant {
    constructor(id, avatar, displayName, isHost, isMuted, isUsingTts, preferredLanguage, voice) {
        this.privId = id;
        this.privAvatar = avatar;
        this.privDisplayName = displayName;
        this.privIsHost = isHost;
        this.privIsMuted = isMuted;
        this.privIsUsingTts = isUsingTts;
        this.privPreferredLanguage = preferredLanguage;
        this.privVoice = voice;
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyCollection();
    }
    get avatar() {
        return this.privAvatar;
    }
    get displayName() {
        return this.privDisplayName;
    }
    get id() {
        return this.privId;
    }
    get preferredLanguage() {
        return this.privPreferredLanguage;
    }
    get isHost() {
        return this.privIsHost;
    }
    get isMuted() {
        return this.privIsMuted;
    }
    get isUsingTts() {
        return this.privIsUsingTts;
    }
    get voice() {
        return this.privVoice;
    }
    get properties() {
        return this.privProperties;
    }
    static From(id, language, voice) {
        return new Participant(id, "", id, false, false, false, language, voice);
    }
}

//# sourceMappingURL=IParticipant.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ParticipantChangedReason.js":
/*!******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Transcription/ParticipantChangedReason.js ***!
  \******************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ParticipantChangedReason": () => (/* binding */ ParticipantChangedReason)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
var ParticipantChangedReason;
(function (ParticipantChangedReason) {
    /** Participant has joined the conversation. */
    ParticipantChangedReason[ParticipantChangedReason["JoinedConversation"] = 0] = "JoinedConversation";
    /** Participant has left the conversation. This could be voluntary, or involuntary
     * (e.g. they are experiencing networking issues).
     */
    ParticipantChangedReason[ParticipantChangedReason["LeftConversation"] = 1] = "LeftConversation";
    /** The participants' state has changed (e.g. they became muted, changed their nickname). */
    ParticipantChangedReason[ParticipantChangedReason["Updated"] = 2] = "Updated";
})(ParticipantChangedReason || (ParticipantChangedReason = {}));

//# sourceMappingURL=ParticipantChangedReason.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionCanceledEventArgs.js":
/*!*******************************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionCanceledEventArgs.js ***!
  \*******************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TranslationRecognitionCanceledEventArgs": () => (/* binding */ TranslationRecognitionCanceledEventArgs)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Define payload of speech recognition canceled result events.
 * @class TranslationRecognitionCanceledEventArgs
 */
class TranslationRecognitionCanceledEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} sessionid - The session id.
     * @param {CancellationReason} cancellationReason - The cancellation reason.
     * @param {string} errorDetails - Error details, if provided.
     * @param {TranslationRecognitionResult} result - The result.
     */
    constructor(sessionid, cancellationReason, errorDetails, errorCode, result) {
        this.privCancelReason = cancellationReason;
        this.privErrorDetails = errorDetails;
        this.privResult = result;
        this.privSessionId = sessionid;
        this.privErrorCode = errorCode;
    }
    /**
     * Specifies the recognition result.
     * @member TranslationRecognitionCanceledEventArgs.prototype.result
     * @function
     * @public
     * @returns {TranslationRecognitionResult} the recognition result.
     */
    get result() {
        return this.privResult;
    }
    /**
     * Specifies the session identifier.
     * @member TranslationRecognitionCanceledEventArgs.prototype.sessionId
     * @function
     * @public
     * @returns {string} the session identifier.
     */
    get sessionId() {
        return this.privSessionId;
    }
    /**
     * The reason the recognition was canceled.
     * @member TranslationRecognitionCanceledEventArgs.prototype.reason
     * @function
     * @public
     * @returns {CancellationReason} Specifies the reason canceled.
     */
    get reason() {
        return this.privCancelReason;
    }
    /**
     * The error code in case of an unsuccessful recognition.
     * Added in version 1.1.0.
     * @return An error code that represents the error reason.
     */
    get errorCode() {
        return this.privErrorCode;
    }
    /**
     * In case of an unsuccessful recognition, provides details of the occurred error.
     * @member TranslationRecognitionCanceledEventArgs.prototype.errorDetails
     * @function
     * @public
     * @returns {string} A String that represents the error details.
     */
    get errorDetails() {
        return this.privErrorDetails;
    }
}

//# sourceMappingURL=TranslationRecognitionCanceledEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionEventArgs.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionEventArgs.js ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TranslationRecognitionEventArgs": () => (/* binding */ TranslationRecognitionEventArgs)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/RecognitionEventArgs.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Translation text result event arguments.
 * @class TranslationRecognitionEventArgs
 */
class TranslationRecognitionEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__.RecognitionEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {TranslationRecognitionResult} result - The translation recognition result.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */
    constructor(result, offset, sessionId) {
        super(offset, sessionId);
        this.privResult = result;
    }
    /**
     * Specifies the recognition result.
     * @member TranslationRecognitionEventArgs.prototype.result
     * @function
     * @public
     * @returns {TranslationRecognitionResult} the recognition result.
     */
    get result() {
        return this.privResult;
    }
}

//# sourceMappingURL=TranslationRecognitionEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionResult.js":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognitionResult.js ***!
  \********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TranslationRecognitionResult": () => (/* binding */ TranslationRecognitionResult)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SpeechRecognitionResult.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Translation text result.
 * @class TranslationRecognitionResult
 */
class TranslationRecognitionResult extends _Exports__WEBPACK_IMPORTED_MODULE_0__.SpeechRecognitionResult {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {Translations} translations - The translations.
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} language - Primary Language detected, if provided.
     * @param {string} languageDetectionConfidence - Primary Language confidence ("Unknown," "Low," "Medium," "High"...), if provided.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */
    constructor(translations, resultId, reason, text, duration, offset, language, languageDetectionConfidence, errorDetails, json, properties) {
        super(resultId, reason, text, duration, offset, language, languageDetectionConfidence, undefined, errorDetails, json, properties);
        this.privTranslations = translations;
    }
    static fromSpeechRecognitionResult(result) {
        return new TranslationRecognitionResult(undefined, result.resultId, result.reason, result.text, result.duration, result.offset, result.language, result.languageDetectionConfidence, result.errorDetails, result.json, result.properties);
    }
    /**
     * Presents the translation results. Each item in the dictionary represents
     * a translation result in one of target languages, where the key is the name
     * of the target language, in BCP-47 format, and the value is the translation
     * text in the specified language.
     * @member TranslationRecognitionResult.prototype.translations
     * @function
     * @public
     * @returns {Translations} the current translation map that holds all translations requested.
     */
    get translations() {
        return this.privTranslations;
    }
}

//# sourceMappingURL=TranslationRecognitionResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognizer.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationRecognizer.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TranslationRecognizer": () => (/* binding */ TranslationRecognizer)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationConnectionFactory.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/TranslationServiceRecognizer.js");
/* harmony import */ var _common_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common/Promise.js");
/* harmony import */ var _Connection__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Connection */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Connection.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Recognizer.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





/**
 * Translation recognizer
 * @class TranslationRecognizer
 */
class TranslationRecognizer extends _Exports__WEBPACK_IMPORTED_MODULE_0__.Recognizer {
    /**
     * Initializes an instance of the TranslationRecognizer.
     * @constructor
     * @param {SpeechTranslationConfig} speechConfig - Set of properties to configure this recognizer.
     * @param {AudioConfig} audioConfig - An optional audio config associated with the recognizer
     * @param {IConnectionFactory} connectionFactory - An optional connection factory to use to generate the endpoint URIs, headers to set, etc...
     */
    constructor(speechConfig, audioConfig, connectionFactory) {
        const configImpl = speechConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNull(configImpl, "speechConfig");
        super(audioConfig, configImpl.properties, connectionFactory || new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_2__.TranslationConnectionFactory());
        this.privDisposedTranslationRecognizer = false;
        if (this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_TranslationVoice, undefined) !== undefined) {
            _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_TranslationVoice), _Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_TranslationVoice]);
        }
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_TranslationToLanguages), _Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_TranslationToLanguages]);
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_RecoLanguage), _Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId[_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_RecoLanguage]);
    }
    /**
     * TranslationRecognizer constructor.
     * @constructor
     * @param {SpeechTranslationConfig} speechTranslationConfig - an set of initial properties for this recognizer
     * @param {AutoDetectSourceLanguageConfig} autoDetectSourceLanguageConfig - An source language detection configuration associated with the recognizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */
    static FromConfig(speechTranslationConfig, autoDetectSourceLanguageConfig, audioConfig) {
        const speechTranslationConfigImpl = speechTranslationConfig;
        autoDetectSourceLanguageConfig.properties.mergeTo(speechTranslationConfigImpl.properties);
        return new TranslationRecognizer(speechTranslationConfig, audioConfig);
    }
    /**
     * Gets the language name that was set when the recognizer was created.
     * @member TranslationRecognizer.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @returns {string} Gets the language name that was set when the recognizer was created.
     */
    get speechRecognitionLanguage() {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_RecoLanguage);
    }
    /**
     * Gets target languages for translation that were set when the recognizer was created.
     * The language is specified in BCP-47 format. The translation will provide translated text for each of language.
     * @member TranslationRecognizer.prototype.targetLanguages
     * @function
     * @public
     * @returns {string[]} Gets target languages for translation that were set when the recognizer was created.
     */
    get targetLanguages() {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",");
    }
    /**
     * Gets the name of output voice.
     * @member TranslationRecognizer.prototype.voiceName
     * @function
     * @public
     * @returns {string} the name of output voice.
     */
    get voiceName() {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer);
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_TranslationVoice, undefined);
    }
    /**
     * The collection of properties and their values defined for this TranslationRecognizer.
     * @member TranslationRecognizer.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this TranslationRecognizer.
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member TranslationRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceAuthorization_Token);
    }
    /**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member TranslationRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @param {string} value - Authorization token.
     */
    set authorizationToken(value) {
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceAuthorization_Token, value);
    }
    /**
     * Starts recognition and translation, and stops after the first utterance is recognized.
     * The task returns the translation text as result.
     * Note: recognizeOnceAsync returns when the first utterance has been recognized, so it is suitable only
     * for single shot recognition like command or query. For long-running recognition,
     * use startContinuousRecognitionAsync() instead.
     * @member TranslationRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the result when the translation has completed.
     * @param err - Callback invoked in case of an error.
     */
    recognizeOnceAsync(cb, err) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer);
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_4__.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.RecognitionMode.Conversation), cb, err);
    }
    /**
     * Starts recognition and translation, until stopContinuousRecognitionAsync() is called.
     * User must subscribe to events to receive translation results.
     * @member TranslationRecognizer.prototype.startContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback that received the translation has started.
     * @param err - Callback invoked in case of an error.
     */
    startContinuousRecognitionAsync(cb, err) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_4__.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.RecognitionMode.Conversation), cb, err);
    }
    /**
     * Stops continuous recognition and translation.
     * @member TranslationRecognizer.prototype.stopContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback that received the translation has stopped.
     * @param err - Callback invoked in case of an error.
     */
    stopContinuousRecognitionAsync(cb, err) {
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_4__.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(), cb, err);
    }
    /**
     * dynamically remove a language from list of target language
     * (can be used while recognition is ongoing)
     * @member TranslationRecognizer.prototype.removeTargetLanguage
     * @function
     * @param lang - language to be removed
     * @public
     */
    removeTargetLanguage(lang) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(lang, "language to be removed");
        if (this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_TranslationToLanguages, undefined) !== undefined) {
            const languages = this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",");
            const index = languages.indexOf(lang);
            if (index > -1) {
                languages.splice(index, 1);
                this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_TranslationToLanguages, languages.join(","));
                this.updateLanguages(languages);
            }
        }
    }
    /**
     * dynamically add a language to list of target language
     * (can be used while recognition is ongoing)
     * @member TranslationRecognizer.prototype.addTargetLanguage
     * @function
     * @param lang - language to be added
     * @public
     */
    addTargetLanguage(lang) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(lang, "language to be added");
        let languages = [];
        if (this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_TranslationToLanguages, undefined) !== undefined) {
            languages = this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",");
            if (!languages.includes(lang)) {
                languages.push(lang);
                this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_TranslationToLanguages, languages.join(","));
            }
        }
        else {
            this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_3__.PropertyId.SpeechServiceConnection_TranslationToLanguages, lang);
            languages = [lang];
        }
        this.updateLanguages(languages);
    }
    /**
     * closes all external resources held by an instance of this class.
     * @member TranslationRecognizer.prototype.close
     * @function
     * @public
     */
    close(cb, errorCb) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer);
        (0,_common_Exports__WEBPACK_IMPORTED_MODULE_4__.marshalPromiseToCallbacks)(this.dispose(true), cb, errorCb);
    }
    /**
     * handles ConnectionEstablishedEvent for conversation translation scenarios.
     * @member TranslationRecognizer.prototype.onConnection
     * @function
     * @public
     */
    // eslint-disable-next-line @typescript-eslint/no-empty-function
    onConnection() { }
    /**
     * handles disconnection events for conversation translation scenarios.
     * @member TranslationRecognizer.prototype.onDisconnection
     * @function
     * @public
     */
    // eslint-disable-next-line @typescript-eslint/no-empty-function
    onDisconnection() {
        return __awaiter(this, void 0, void 0, function* () { });
    }
    dispose(disposing) {
        const _super = Object.create(null, {
            dispose: { get: () => super.dispose }
        });
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privDisposedTranslationRecognizer) {
                return;
            }
            this.privDisposedTranslationRecognizer = true;
            if (disposing) {
                yield this.implRecognizerStop();
                yield _super.dispose.call(this, disposing);
            }
        });
    }
    createRecognizerConfig(speechConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_5__.RecognizerConfig(speechConfig, this.privProperties);
    }
    createServiceRecognizer(authentication, connectionFactory, audioConfig, recognizerConfig) {
        const configImpl = audioConfig;
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_6__.TranslationServiceRecognizer(authentication, connectionFactory, configImpl, recognizerConfig, this);
    }
    updateLanguages(languages) {
        const conn = _Connection__WEBPACK_IMPORTED_MODULE_7__.Connection.fromRecognizer(this);
        if (!!conn) {
            conn.setMessageProperty("speech.context", "translationcontext", { to: languages });
            conn.sendMessageAsync("event", JSON.stringify({
                id: "translation",
                name: "updateLanguage",
                to: languages
            }));
        }
    }
}

//# sourceMappingURL=TranslationRecognizer.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisEventArgs.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisEventArgs.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TranslationSynthesisEventArgs": () => (/* binding */ TranslationSynthesisEventArgs)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/SessionEventArgs.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Translation Synthesis event arguments
 * @class TranslationSynthesisEventArgs
 */
class TranslationSynthesisEventArgs extends _Exports__WEBPACK_IMPORTED_MODULE_0__.SessionEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {TranslationSynthesisResult} result - The translation synthesis result.
     * @param {string} sessionId - The session id.
     */
    constructor(result, sessionId) {
        super(sessionId);
        this.privResult = result;
    }
    /**
     * Specifies the translation synthesis result.
     * @member TranslationSynthesisEventArgs.prototype.result
     * @function
     * @public
     * @returns {TranslationSynthesisResult} Specifies the translation synthesis result.
     */
    get result() {
        return this.privResult;
    }
}

//# sourceMappingURL=TranslationSynthesisEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisResult.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TranslationSynthesisResult.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TranslationSynthesisResult": () => (/* binding */ TranslationSynthesisResult)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines translation synthesis result, i.e. the voice output of the translated
 * text in the target language.
 * @class TranslationSynthesisResult
 */
class TranslationSynthesisResult {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {ResultReason} reason - The synthesis reason.
     * @param {ArrayBuffer} audio - The audio data.
     */
    constructor(reason, audio) {
        this.privReason = reason;
        this.privAudio = audio;
    }
    /**
     * Translated text in the target language.
     * @member TranslationSynthesisResult.prototype.audio
     * @function
     * @public
     * @returns {ArrayBuffer} Translated audio in the target language.
     */
    get audio() {
        return this.privAudio;
    }
    /**
     * The synthesis status.
     * @member TranslationSynthesisResult.prototype.reason
     * @function
     * @public
     * @returns {ResultReason} The synthesis status.
     */
    get reason() {
        return this.privReason;
    }
}

//# sourceMappingURL=TranslationSynthesisResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Translations.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Translations.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Translations": () => (/* binding */ Translations)
/* harmony export */ });
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Represents collection of parameters and their values.
 * @class Translations
 */
class Translations {
    constructor() {
        // Use an PropertyCollection internally, just wrapping it to hide the | enum syntax it has.
        this.privMap = new _Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyCollection();
    }
    /**
     * Get the languages in the object in a String array.
     * @member Translations.prototype.languages
     * @function
     * @public
     * @returns {string[]} languages in translations object.
     */
    get languages() {
        return this.privMap.keys;
    }
    /**
     * Returns the parameter value in type String. The parameter must have the same type as String.
     * Currently only String, int and bool are allowed.
     * If the name is not available, the specified defaultValue is returned.
     * @member Translations.prototype.get
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} def - The default value which is returned if the parameter is not available in the collection.
     * @returns {string} value of the parameter.
     */
    get(key, def) {
        return this.privMap.getProperty(key, def);
    }
    /**
     * Sets the String value of the parameter specified by name.
     * @member Translations.prototype.set
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} value - The value of the parameter.
     */
    set(key, value) {
        this.privMap.setProperty(key, value);
    }
}

//# sourceMappingURL=Translations.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TurnStatusReceivedEventArgs.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/TurnStatusReceivedEventArgs.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TurnStatusReceivedEventArgs": () => (/* binding */ TurnStatusReceivedEventArgs)
/* harmony export */ });
/* harmony import */ var _common_speech_ServiceMessages_TurnStatusPayload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common.speech/ServiceMessages/TurnStatusPayload */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/ServiceMessages/TurnStatusPayload.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.

/**
 * Defines contents of received message/events.
 * @class TurnStatusReceivedEventArgs
 */
class TurnStatusReceivedEventArgs {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} turnStatus - The JSON-encoded turn status message.
     */
    constructor(turnStatus) {
        this.privTurnStatus = _common_speech_ServiceMessages_TurnStatusPayload__WEBPACK_IMPORTED_MODULE_0__.TurnStatusResponsePayload.fromJSON(turnStatus);
    }
    /**
     * Gets the interaction identifier associated with this turn status event.
     * @member TurnStatusReceivedEventArgs.prototype.interactionId
     * @function
     * @public
     * @returns {any} the received interaction id.
     */
    get interactionId() {
        return this.privTurnStatus.interactionId;
    }
    /**
     * Gets the conversation identifier associated with this turn status event.
     * @member TurnStatusReceivedEventArgs.prototype.conversationId
     * @function
     * @public
     * @returns {any} the received conversation id.
     */
    get conversationId() {
        return this.privTurnStatus.conversationId;
    }
    /**
     * Gets the received turn status code.
     * @member TurnStatusReceivedEventArgs.prototype.statusCode
     * @function
     * @public
     * @returns {number} the received turn status.
     */
    get statusCode() {
        return this.privTurnStatus.statusCode; // eslint-disable-line @typescript-eslint/no-unsafe-return
    }
}

//# sourceMappingURL=TurnStatusReceivedEventArgs.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceInfo.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceInfo.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SynthesisVoiceGender": () => (/* binding */ SynthesisVoiceGender),
/* harmony export */   "SynthesisVoiceType": () => (/* binding */ SynthesisVoiceType),
/* harmony export */   "VoiceInfo": () => (/* binding */ VoiceInfo)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines the gender of synthesis voices.
 * Added in version 1.20.0.
 */
var SynthesisVoiceGender;
(function (SynthesisVoiceGender) {
    /** Gender unknown */
    SynthesisVoiceGender[SynthesisVoiceGender["Unknown"] = 0] = "Unknown";
    /** Female voice */
    SynthesisVoiceGender[SynthesisVoiceGender["Female"] = 1] = "Female";
    /** Male voice */
    SynthesisVoiceGender[SynthesisVoiceGender["Male"] = 2] = "Male";
})(SynthesisVoiceGender || (SynthesisVoiceGender = {}));
var SynthesisVoiceType;
(function (SynthesisVoiceType) {
    SynthesisVoiceType[SynthesisVoiceType["OnlineNeural"] = 1] = "OnlineNeural";
    SynthesisVoiceType[SynthesisVoiceType["OnlineStandard"] = 2] = "OnlineStandard";
    SynthesisVoiceType[SynthesisVoiceType["OfflineNeural"] = 3] = "OfflineNeural";
    SynthesisVoiceType[SynthesisVoiceType["OfflineStandard"] = 4] = "OfflineStandard";
})(SynthesisVoiceType || (SynthesisVoiceType = {}));
/**
 * Information about Speech Synthesis voice
 * Added in version 1.20.0.
 * @class VoiceInfo
 */
class VoiceInfo {
    constructor(json) {
        this.privStyleList = [];
        this.privVoicePath = "";
        if (!!json) {
            this.privName = json.Name;
            this.privLocale = json.Locale;
            this.privShortName = json.ShortName;
            this.privLocaleName = json.LocaleName;
            this.privLocalName = json.LocalName;
            this.privVoiceType = json.VoiceType.endsWith("Standard") ? SynthesisVoiceType.OnlineStandard : SynthesisVoiceType.OnlineNeural;
            this.privGender = json.Gender === "Male" ? SynthesisVoiceGender.Male : json.Gender === "Female" ? SynthesisVoiceGender.Female : SynthesisVoiceGender.Unknown;
            if (!!json.StyleList && Array.isArray(json.StyleList)) {
                for (const style of json.StyleList) {
                    this.privStyleList.push(style);
                }
            }
        }
    }
    get name() {
        return this.privName;
    }
    get locale() {
        return this.privLocale;
    }
    get shortName() {
        return this.privShortName;
    }
    get localName() {
        return this.privLocalName;
    }
    get localeName() {
        return this.privLocaleName;
    }
    get gender() {
        return this.privGender;
    }
    get voiceType() {
        return this.privVoiceType;
    }
    get styleList() {
        return this.privStyleList;
    }
    get voicePath() {
        return this.privVoicePath;
    }
}

//# sourceMappingURL=VoiceInfo.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfile.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfile.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VoiceProfile": () => (/* binding */ VoiceProfile)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Defines Voice Profile class for Speaker Recognition
 * @class VoiceProfile
 */
class VoiceProfile {
    /**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} profileId - profileId of this Voice Profile.
     * @param {VoiceProfileType} profileType - profileType of this Voice Profile.
     */
    constructor(profileId, profileType) {
        this.privId = profileId;
        this.privProfileType = profileType;
    }
    /**
     * profileId of this Voice Profile instance
     * @member VoiceProfile.prototype.profileId
     * @function
     * @public
     * @returns {string} profileId of this Voice Profile instance.
     */
    get profileId() {
        return this.privId;
    }
    /**
     * profileType of this Voice Profile instance
     * @member VoiceProfile.prototype.profileType
     * @function
     * @public
     * @returns {VoiceProfileType} profile type of this Voice Profile instance.
     */
    get profileType() {
        return this.privProfileType;
    }
}

//# sourceMappingURL=VoiceProfile.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileClient.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileClient.js ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VoiceProfileClient": () => (/* binding */ VoiceProfileClient)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/SpeakerRecognitionConnectionFactory.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/VoiceServiceRecognizer.js");
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/RecognizerConfig.js");
/* harmony import */ var _Audio_AudioConfig__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Audio/AudioConfig */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioConfig.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Recognizer.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Audio/AudioInputStream.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyId.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfile.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileResult.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




/**
 * Defines VoiceProfileClient class for Speaker Recognition
 * Handles operations from user for Voice Profile operations (e.g. createProfile, deleteProfile)
 * @class VoiceProfileClient
 */
class VoiceProfileClient extends _Exports__WEBPACK_IMPORTED_MODULE_0__.Recognizer {
    /**
     * VoiceProfileClient constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - An set of initial properties for this synthesizer (authentication key, region, &c)
     */
    constructor(speechConfig) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(speechConfig, "speechConfig");
        const speechConfigImpl = speechConfig;
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNull(speechConfigImpl, "speechConfig");
        super(_Audio_AudioConfig__WEBPACK_IMPORTED_MODULE_2__.AudioConfig.fromStreamInput(_Exports__WEBPACK_IMPORTED_MODULE_3__.AudioInputStream.createPushStream()), speechConfigImpl.properties, new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_4__.VoiceProfileConnectionFactory());
        this.privProperties = speechConfigImpl.properties.clone();
        this.privVoiceAdapter = this.privReco;
        this.privDisposedVoiceAdapter = false;
    }
    /**
     * The collection of properties and their values defined for this VoiceProfileClient.
     * @member VoiceProfileClient.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this VoiceProfileClient.
     */
    get properties() {
        return this.privProperties;
    }
    /**
     * Gets the authorization token used to communicate with the service.
     * @member VoiceProfileClient.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */
    get authorizationToken() {
        return this.properties.getProperty(_Exports__WEBPACK_IMPORTED_MODULE_5__.PropertyId.SpeechServiceAuthorization_Token);
    }
    /**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member VoiceProfileClient.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */
    set authorizationToken(token) {
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrWhitespace(token, "token");
        this.properties.setProperty(_Exports__WEBPACK_IMPORTED_MODULE_5__.PropertyId.SpeechServiceAuthorization_Token, token);
    }
    /**
     * Create a speaker recognition voice profile
     * @member VoiceProfileClient.prototype.createProfileAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfileType} profileType Type of Voice Profile to be created
     * @param {string} lang Language string (locale) for Voice Profile
     * @return {Promise<VoiceProfile>} - Promise of a VoiceProfile.
     */
    createProfileAsync(profileType, lang) {
        return __awaiter(this, void 0, void 0, function* () {
            const profileIds = yield this.privVoiceAdapter.createProfile(profileType, lang);
            return new _Exports__WEBPACK_IMPORTED_MODULE_6__.VoiceProfile(profileIds[0], profileType);
        });
    }
    /**
     * Get current information of a voice profile
     * @member VoiceProfileClient.prototype.retrieveEnrollmentResultAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfile} profile Voice Profile to retrieve info for
     * @return {Promise<VoiceProfileEnrollmentResult>} - Promise of a VoiceProfileEnrollmentResult.
     */
    retrieveEnrollmentResultAsync(profile) {
        return __awaiter(this, void 0, void 0, function* () {
            return this.privVoiceAdapter.retrieveEnrollmentResult(profile);
        });
    }
    /**
     * Get all voice profiles on account with given voice profile type
     * @member VoiceProfileClient.prototype.getAllProfilesAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfileType} profileType profile type (identification/verification) for which to list profiles
     * @return {Promise<VoiceProfileEnrollmentResult[]>} - Promise of an array of VoiceProfileEnrollmentResults.
     */
    getAllProfilesAsync(profileType) {
        return __awaiter(this, void 0, void 0, function* () {
            return this.privVoiceAdapter.getAllProfiles(profileType);
            /*
            const result: { json: { value: EnrollmentResultJSON[] } } = await this.privAdapter.getProfiles(profileType);
            if (profileType === VoiceProfileType.TextIndependentIdentification) {
                return VoiceProfileEnrollmentResult.FromIdentificationProfileList(result.json);
            }
            return VoiceProfileEnrollmentResult.FromVerificationProfileList(result.json);
            */
        });
    }
    /**
     * Get valid authorization phrases for voice profile enrollment
     * @member VoiceProfileClient.prototype.getActivationPhrasesAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfileType} profileType Profile Type to get activation phrases for
     * @param {string} lang Language string (locale) for Voice Profile
     */
    getActivationPhrasesAsync(profileType, lang) {
        return __awaiter(this, void 0, void 0, function* () {
            return this.privVoiceAdapter.getActivationPhrases(profileType, lang);
        });
    }
    /**
     * Create a speaker recognition voice profile
     * @member VoiceProfileClient.prototype.enrollProfileAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfile} profile Voice Profile to create enrollment for
     * @param {AudioConfig} audioConfig source info from which to create enrollment
     * @return {Promise<VoiceProfileEnrollmentResult>} - Promise of a VoiceProfileEnrollmentResult.
     */
    enrollProfileAsync(profile, audioConfig) {
        return __awaiter(this, void 0, void 0, function* () {
            const configImpl = audioConfig;
            _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(configImpl, "audioConfig");
            this.audioConfig = audioConfig;
            this.privVoiceAdapter.SpeakerAudioSource = configImpl;
            return this.privVoiceAdapter.enrollProfile(profile);
        });
    }
    /**
     * Delete a speaker recognition voice profile
     * @member VoiceProfileClient.prototype.deleteProfileAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfile} profile Voice Profile to be deleted
     * @return {Promise<VoiceProfileResult>} - Promise of a VoiceProfileResult.
     */
    deleteProfileAsync(profile) {
        return __awaiter(this, void 0, void 0, function* () {
            return this.privVoiceAdapter.deleteProfile(profile);
        });
    }
    /**
     * Remove all enrollments for a speaker recognition voice profile
     * @member VoiceProfileClient.prototype.resetProfileAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfile} profile Voice Profile to be reset
     * @return {Promise<VoiceProfileResult>} - Promise of a VoiceProfileResult.
     */
    resetProfileAsync(profile) {
        return __awaiter(this, void 0, void 0, function* () {
            return this.privVoiceAdapter.resetProfile(profile);
        });
    }
    /**
     * Clean up object and close underlying connection
     * @member VoiceProfileClient.prototype.close
     * @function
     * @async
     * @public
     */
    close() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.dispose(true);
        });
    }
    createServiceRecognizer(authentication, connectionFactory, audioConfig, recognizerConfig) {
        const audioImpl = audioConfig;
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_7__.VoiceServiceRecognizer(authentication, connectionFactory, audioImpl, recognizerConfig, this);
    }
    dispose(disposing) {
        const _super = Object.create(null, {
            dispose: { get: () => super.dispose }
        });
        return __awaiter(this, void 0, void 0, function* () {
            if (this.privDisposedVoiceAdapter) {
                return;
            }
            this.privDisposedVoiceAdapter = true;
            if (disposing) {
                yield _super.dispose.call(this, disposing);
            }
        });
    }
    createRecognizerConfig(speechConfig) {
        return new _common_speech_Exports__WEBPACK_IMPORTED_MODULE_8__.RecognizerConfig(speechConfig, this.properties);
    }
    getResult(result, successReason) {
        const response = new _Exports__WEBPACK_IMPORTED_MODULE_9__.VoiceProfileResult(result.ok ? successReason : _Exports__WEBPACK_IMPORTED_MODULE_10__.ResultReason.Canceled, result.statusText);
        return (response);
    }
}

//# sourceMappingURL=VoiceProfileClient.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileEnrollmentResult.js":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileEnrollmentResult.js ***!
  \********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VoiceProfileEnrollmentCancellationDetails": () => (/* binding */ VoiceProfileEnrollmentCancellationDetails),
/* harmony export */   "VoiceProfileEnrollmentResult": () => (/* binding */ VoiceProfileEnrollmentResult)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetailsBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */


/**
 * Output format
 * @class VoiceProfileEnrollmentResult
 */
class VoiceProfileEnrollmentResult {
    constructor(reason, json, statusText) {
        this.privReason = reason;
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyCollection();
        if (this.privReason !== _Exports__WEBPACK_IMPORTED_MODULE_1__.ResultReason.Canceled) {
            if (!!json) {
                this.privDetails = JSON.parse(json);
                if (this.privDetails.enrollmentStatus.toLowerCase() === "enrolling") {
                    this.privReason = _Exports__WEBPACK_IMPORTED_MODULE_1__.ResultReason.EnrollingVoiceProfile;
                }
            }
        }
        else {
            this.privErrorDetails = statusText;
            this.privProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_2__.CancellationErrorCodePropertyName, _Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCode[_Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCode.ServiceError]);
        }
    }
    get reason() {
        return this.privReason;
    }
    get enrollmentsCount() {
        return this.privDetails.enrollmentsCount;
    }
    get enrollmentsLength() {
        return this.privDetails.enrollmentsLength;
    }
    get properties() {
        return this.privProperties;
    }
    get enrollmentResultDetails() {
        return this.privDetails;
    }
    get errorDetails() {
        return this.privErrorDetails;
    }
    static FromIdentificationProfileList(json) {
        const results = [];
        for (const item of json.value) {
            const reason = item.enrollmentStatus.toLowerCase() === "enrolling" ?
                _Exports__WEBPACK_IMPORTED_MODULE_1__.ResultReason.EnrollingVoiceProfile : item.enrollmentStatus.toLowerCase() === "enrolled" ?
                _Exports__WEBPACK_IMPORTED_MODULE_1__.ResultReason.EnrolledVoiceProfile : _Exports__WEBPACK_IMPORTED_MODULE_1__.ResultReason.Canceled;
            const result = new VoiceProfileEnrollmentResult(reason, null, null);
            result.privDetails = this.getIdentificationDetails(item);
            results.push(result);
        }
        return results;
    }
    static FromVerificationProfileList(json) {
        const results = [];
        for (const item of json.value) {
            const reason = item.enrollmentStatus.toLowerCase() === "enrolling" ?
                _Exports__WEBPACK_IMPORTED_MODULE_1__.ResultReason.EnrollingVoiceProfile : item.enrollmentStatus.toLowerCase() === "enrolled" ?
                _Exports__WEBPACK_IMPORTED_MODULE_1__.ResultReason.EnrolledVoiceProfile : _Exports__WEBPACK_IMPORTED_MODULE_1__.ResultReason.Canceled;
            const result = new VoiceProfileEnrollmentResult(reason, null, null);
            result.privDetails = this.getVerificationDetails(item);
            results.push(result);
        }
        return results;
    }
    static getIdentificationDetails(json) {
        return {
            audioLength: json.audioLength ? parseFloat(json.audioLength) : 0,
            audioSpeechLength: json.audioSpeechLength ? parseFloat(json.audioSpeechLength) : 0,
            enrollmentStatus: json.enrollmentStatus,
            enrollmentsCount: json.enrollmentsCount || 0,
            enrollmentsLength: json.enrollmentsLength ? parseFloat(json.enrollmentsLength) : 0,
            enrollmentsSpeechLength: json.enrollmentsSpeechLength ? parseFloat(json.enrollmentsSpeechLength) : 0,
            profileId: json.profileId || json.identificationProfileId,
            remainingEnrollmentsSpeechLength: json.remainingEnrollmentsSpeechLength ? parseFloat(json.remainingEnrollmentsSpeechLength) : 0
        };
    }
    static getVerificationDetails(json) {
        return {
            audioLength: json.audioLength ? parseFloat(json.audioLength) : 0,
            audioSpeechLength: json.audioSpeechLength ? parseFloat(json.audioSpeechLength) : 0,
            enrollmentStatus: json.enrollmentStatus,
            enrollmentsCount: json.enrollmentsCount,
            enrollmentsLength: json.enrollmentsLength ? parseFloat(json.enrollmentsLength) : 0,
            enrollmentsSpeechLength: json.enrollmentsSpeechLength ? parseFloat(json.enrollmentsSpeechLength) : 0,
            profileId: json.profileId || json.verificationProfileId,
            remainingEnrollmentsCount: json.remainingEnrollments || json.remainingEnrollmentsCount,
            remainingEnrollmentsSpeechLength: json.remainingEnrollmentsSpeechLength ? parseFloat(json.remainingEnrollmentsSpeechLength) : 0
        };
    }
}
/**
 * @class VoiceProfileEnrollmentCancellationDetails
 */
class VoiceProfileEnrollmentCancellationDetails extends _Exports__WEBPACK_IMPORTED_MODULE_4__.CancellationDetailsBase {
    constructor(reason, errorDetails, errorCode) {
        super(reason, errorDetails, errorCode);
    }
    /**
     * Creates an instance of VoiceProfileEnrollmentCancellationDetails object for the canceled VoiceProfileEnrollmentResult.
     * @member VoiceProfileEnrollmentCancellationDetails.fromResult
     * @function
     * @public
     * @param {VoiceProfileEnrollmentResult} result - The result that was canceled.
     * @returns {VoiceProfileEnrollmentCancellationDetails} The cancellation details object being created.
     */
    static fromResult(result) {
        const reason = _Exports__WEBPACK_IMPORTED_MODULE_5__.CancellationReason.Error;
        let errorCode = _Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCode.NoError;
        if (!!result.properties) {
            errorCode = _Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCode[result.properties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_2__.CancellationErrorCodePropertyName, _Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCode[_Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCode.NoError])]; //eslint-disable-line
        }
        return new VoiceProfileEnrollmentCancellationDetails(reason, result.errorDetails, errorCode);
    }
}

//# sourceMappingURL=VoiceProfileEnrollmentResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfilePhraseResult.js":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfilePhraseResult.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VoiceProfilePhraseResult": () => (/* binding */ VoiceProfilePhraseResult)
/* harmony export */ });
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileResult.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.


/**
 * Output format
 * @class VoiceProfilePhraseResult
 */
class VoiceProfilePhraseResult extends _Exports__WEBPACK_IMPORTED_MODULE_0__.VoiceProfileResult {
    constructor(reason, statusText, type, phraseArray) {
        super(reason, statusText);
        this.privPhrases = [];
        _Contracts__WEBPACK_IMPORTED_MODULE_1__.Contracts.throwIfNullOrUndefined(phraseArray, "phrase array");
        this.privType = type;
        if (!!phraseArray && !!phraseArray[0]) {
            this.privPhrases = phraseArray;
        }
    }
    get phrases() {
        return this.privPhrases;
    }
    get type() {
        return this.privType;
    }
}

//# sourceMappingURL=VoiceProfilePhraseResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileResult.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileResult.js ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VoiceProfileCancellationDetails": () => (/* binding */ VoiceProfileCancellationDetails),
/* harmony export */   "VoiceProfileResult": () => (/* binding */ VoiceProfileResult)
/* harmony export */ });
/* harmony import */ var _common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common.speech/Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/common.speech/Exports.js");
/* harmony import */ var _Contracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Contracts */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/Contracts.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/PropertyCollection.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/ResultReason.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationErrorCodes.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationDetailsBase.js");
/* harmony import */ var _Exports__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Exports */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/CancellationReason.js");
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */



/**
 * Output format
 * @class VoiceProfileResult
 */
class VoiceProfileResult {
    constructor(reason, statusText) {
        this.privReason = reason;
        this.privProperties = new _Exports__WEBPACK_IMPORTED_MODULE_0__.PropertyCollection();
        if (reason === _Exports__WEBPACK_IMPORTED_MODULE_1__.ResultReason.Canceled) {
            _Contracts__WEBPACK_IMPORTED_MODULE_2__.Contracts.throwIfNullOrUndefined(statusText, "statusText");
            this.privErrorDetails = statusText;
            this.privProperties.setProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCodePropertyName, _Exports__WEBPACK_IMPORTED_MODULE_4__.CancellationErrorCode[_Exports__WEBPACK_IMPORTED_MODULE_4__.CancellationErrorCode.ServiceError]);
        }
    }
    get reason() {
        return this.privReason;
    }
    get properties() {
        return this.privProperties;
    }
    get errorDetails() {
        return this.privErrorDetails;
    }
}
/**
 * @class VoiceProfileCancellationDetails
 */
class VoiceProfileCancellationDetails extends _Exports__WEBPACK_IMPORTED_MODULE_5__.CancellationDetailsBase {
    constructor(reason, errorDetails, errorCode) {
        super(reason, errorDetails, errorCode);
    }
    /**
     * Creates an instance of VoiceProfileCancellationDetails object for the canceled VoiceProfileResult.
     * @member VoiceProfileCancellationDetails.fromResult
     * @function
     * @public
     * @param {VoiceProfileResult} result - The result that was canceled.
     * @returns {VoiceProfileCancellationDetails} The cancellation details object being created.
     */
    static fromResult(result) {
        const reason = _Exports__WEBPACK_IMPORTED_MODULE_6__.CancellationReason.Error;
        let errorCode = _Exports__WEBPACK_IMPORTED_MODULE_4__.CancellationErrorCode.NoError;
        if (!!result.properties) {
            errorCode = _Exports__WEBPACK_IMPORTED_MODULE_4__.CancellationErrorCode[result.properties.getProperty(_common_speech_Exports__WEBPACK_IMPORTED_MODULE_3__.CancellationErrorCodePropertyName, _Exports__WEBPACK_IMPORTED_MODULE_4__.CancellationErrorCode[_Exports__WEBPACK_IMPORTED_MODULE_4__.CancellationErrorCode.NoError])]; //eslint-disable-line
        }
        return new VoiceProfileCancellationDetails(reason, result.errorDetails, errorCode);
    }
}

//# sourceMappingURL=VoiceProfileResult.js.map


/***/ }),

/***/ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileType.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/src/sdk/VoiceProfileType.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "VoiceProfileType": () => (/* binding */ VoiceProfileType)
/* harmony export */ });
// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * Output format
 * @class VoiceProfileType
 */
var VoiceProfileType;
(function (VoiceProfileType) {
    /**
     * Text independent speaker identification
     * @member VoiceProfileType.TextIndependentIdentification
     */
    VoiceProfileType[VoiceProfileType["TextIndependentIdentification"] = 0] = "TextIndependentIdentification";
    /**
     * Text dependent speaker verification
     * @member VoiceProfileType.TextDependentVerification
     */
    VoiceProfileType[VoiceProfileType["TextDependentVerification"] = 1] = "TextDependentVerification";
    /**
     * Text independent speaker verification
     * @member VoiceProfileType.TextIndependentVerification
     */
    VoiceProfileType[VoiceProfileType["TextIndependentVerification"] = 2] = "TextIndependentVerification";
})(VoiceProfileType || (VoiceProfileType = {}));

//# sourceMappingURL=VoiceProfileType.js.map


/***/ }),

/***/ "./src/Options/models.ts":
/*!*******************************!*\
  !*** ./src/Options/models.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.models = exports.freeModels = void 0;
exports.freeModels = [
    {
        'name': 'Google: Gemma 7B (free)',
        'id': 'google/gemma-7b-it:free'
    },
    {
        'name': 'Meta: Llama 3 8B Instruct (free)',
        'id': 'meta-llama/llama-3-8b-instruct:free'
    },
    {
        'name': 'OpenChat 3.5 (free)',
        'id': 'openchat/openchat-7b:free'
    },
    {
        'name': 'Mistral 7B Instruct (free)',
        'id': 'mistralai/mistral-7b-instruct:free'
    },
];
exports.models = [
    ...exports.freeModels,
    {
        'name': 'gpt-3.5-turbo',
        'id': 'openai/gpt-3.5-turbo'
    },
    {
        'name': 'gpt-3.5-turbo-16k',
        'id': 'openai/gpt-3.5-turbo-16k'
    },
    {
        'name': 'OpenAI: GPT-4o',
        'id': 'openai/gpt-4o'
    },
    {
        'name': 'gpt-4',
        'id': 'openai/gpt-4'
    },
    {
        'name': 'gpt-4-32k',
        'id': 'openai/gpt-4-32k'
    },
    {
        'name': 'Google: Gemini Pro 1.0',
        'id': 'google/gemini-pro'
    },
    {
        'name': 'Google: PaLM 2 Chat 32k',
        'id': 'google/palm-2-chat-bison-32k'
    },
    {
        'name': 'Anthropic: Claude 3 Haiku',
        'id': 'anthropic/claude-3-haiku'
    },
    {
        'name': 'Anthropic: Claude 3 Opus',
        'id': 'anthropic/claude-3-opus'
    },
    {
        'name': 'claude-2',
        'id': 'anthropic/claude-2'
    },
    {
        'name': 'claude-instant-v1',
        'id': 'anthropic/claude-instant-v1'
    },
    {
        'name': 'PaLM 2 Bison',
        'id': 'google/palm-2-chat-bison'
    },
    {
        'name': 'Llama v2 13B Chat (beta)',
        'id': 'meta-llama/llama-2-13b-chat'
    }
];


/***/ }),

/***/ "./src/Options/util.ts":
/*!*****************************!*\
  !*** ./src/Options/util.ts ***!
  \*****************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.saveOptions = exports.getSettings = void 0;
const webextension_polyfill_1 = __importDefault(__webpack_require__(/*! webextension-polyfill */ "./node_modules/webextension-polyfill/dist/browser-polyfill.js"));
const models_1 = __webpack_require__(/*! ./models */ "./src/Options/models.ts");
function getSettings() {
    return __awaiter(this, void 0, void 0, function* () {
        let items = yield webextension_polyfill_1.default.storage.sync.get({
            "openApiKey": '',
            "openApiEndpoint": 'https://api.openai.com',
            "unsplashApiKey": '',
            "currentLanguage": 'Chinese Simplified',
            "targetLanguage": 'United States',
            "ankiDeckName": '',
            "licenseKey": '',
            "showYoutubeButton": true,
            "model": models_1.models[0]['id'],
            "freeModel": models_1.freeModels[0]['id'],
            "apiKeySelection": 'scouterFreeAI',
            "newLicenseKey": '',
            "contextMenu": false,
            "ollamaModel": 'llama2',
            "ollamaApiEndpoint": 'http://localhost:11434',
            "userId": '' //  ID
        });
        return items;
    });
}
exports.getSettings = getSettings;
function saveOptions(values) {
    return __awaiter(this, void 0, void 0, function* () {
        // 
        const entries = Object.entries(values);
        // 
        for (const [key, value] of entries) {
            console.log(`Key: ${key}, Value: ${value}`);
            yield webextension_polyfill_1.default.storage.sync.set({
                [key]: value,
            });
        }
    });
}
exports.saveOptions = saveOptions;


/***/ }),

/***/ "./src/background/index.ts":
/*!*********************************!*\
  !*** ./src/background/index.ts ***!
  \*********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
const webextension_polyfill_1 = __importDefault(__webpack_require__(/*! webextension-polyfill */ "./node_modules/webextension-polyfill/dist/browser-polyfill.js"));
const util_1 = __webpack_require__(/*! ../util */ "./src/util.ts");
const unsplash_js_1 = __webpack_require__(/*! unsplash-js */ "./node_modules/unsplash-js/dist/unsplash-js.esm.js");
const util_2 = __webpack_require__(/*! ../Options/util */ "./src/Options/util.ts");
// import { models } from '../options/models'
const util_3 = __webpack_require__(/*! ../util */ "./src/util.ts");
const util_4 = __webpack_require__(/*! ../util */ "./src/util.ts");
// content script  false 
// let isContinue = true
let userId;
try {
    (0, util_4.getUserInfo)().then((userInfo) => {
        userId = userInfo.userId;
    });
}
catch (error) {
    console.log(error);
}
let controller = new AbortController();
// 
webextension_polyfill_1.default.runtime.onInstalled.addListener(function () {
    // amplitude.track("install")
});
// 
webextension_polyfill_1.default.runtime.setUninstallURL("https://docs.google.com/forms/d/e/1FAIpQLSdobGQN3O0Ck4fVrgfvRZMme3de-2OaEp1pFtibZkU0koc37w/viewform?usp=sf_link");
// 
webextension_polyfill_1.default.action.onClicked.addListener(function (tab) {
    console.log('');
    // browser.runtime.openOptionsPage(); // Options
});
// 
webextension_polyfill_1.default.contextMenus.create({
    id: "2",
    title: "Run last prompt",
    contexts: ["selection"],
}, () => {
    webextension_polyfill_1.default.runtime.lastError;
});
webextension_polyfill_1.default.contextMenus.create({
    id: "1",
    title: "Open",
    contexts: ["selection"],
}, () => {
    webextension_polyfill_1.default.runtime.lastError;
});
// 
webextension_polyfill_1.default.contextMenus.onClicked.addListener(function (info, _tab) {
    return __awaiter(this, void 0, void 0, function* () {
        const runPrompt = info.menuItemId === '2' ? true : false;
        sendMessageToContent(runPrompt);
    });
});
//  tab 
webextension_polyfill_1.default.tabs.onUpdated.addListener(function (tabId, changeInfo, tab) {
    if (changeInfo.url) {
        if (changeInfo.url.indexOf('youtube.com')) {
            webextension_polyfill_1.default.tabs.sendMessage(tabId, {
                type: 'tabOnUpdated', data: {
                    locateInYouTube: true
                }
            });
        }
    }
});
// 
webextension_polyfill_1.default.commands.onCommand.addListener(function (command) {
    if (command === 'RunLastPrompt') {
        // 
        sendMessageToContent();
    }
    if (command === 'Open') {
        // 
        sendMessageToContent(false);
    }
});
let popupPort;
//  GPT 
webextension_polyfill_1.default.runtime.onConnect.addListener(port => {
    //  content script 
    console.log('------------');
    console.log(port);
    if (port.name === 'fromPopupCard') {
        popupPort = port;
        console.log("port.name === 'fromPopupCard'");
    }
    // amplitude.init(process.env.AMPLITUDE_KEY as string);
    // amplitude.track('executivePrompt');
    //  content script 
    port.onMessage.addListener((msg) => __awaiter(void 0, void 0, void 0, function* () {
        console.log('', msg);
        // 
        if (msg.type === 'StopTheConversation') {
            // isContinue = false
            controller.abort();
        }
        if (msg.type === 'getKnowledge') {
            //  API Key 
            // let openApiKey: string, apiKeySelection: string, model: string, licenseKey: string, currentLanguage, openApiEndpoint: string, targetLanguage = ''
            (0, util_2.getSettings)().then((result) => {
                //   GPT 
                controller.abort();
                controller = new AbortController();
                // let messages = msg.messages
                console.log('getAIParameter:');
                (0, util_4.getAIParameter)(msg.messages).then((result) => {
                    var _a;
                    const openApiEndpoint = (_a = result.data) === null || _a === void 0 ? void 0 : _a.chatCompletions.url;
                    if (!result.data || openApiEndpoint === undefined) {
                        port.postMessage({ 'type': 'sendGPTData', 'status': 'invalid_api_key', 'content': ' API Key error. Please modify and try again..' });
                    }
                    else {
                        let body = result.data.chatCompletions.body;
                        // body.messages = messages
                        const init = {
                            method: 'POST',
                            signal: controller.signal,
                            headers: result.data.chatCompletions.headers,
                            body: JSON.stringify(body),
                        };
                        const ApiType = result.apiKeySelection;
                        console.log('ApiType:');
                        console.log(ApiType);
                        console.log('body:');
                        console.log(body);
                        if (ApiType === 'chatGPTWeb') {
                            port.postMessage({ 'type': 'sendGPTData', 'status': 'done', 'content': ' ChatGPT Web is temporarily not supported. Please switch to another method.' });
                        }
                        else {
                            (0, util_3.fetchSSE)(openApiEndpoint, init, {
                                onMessage: (data) => {
                                    // 
                                    // if (ApiType === 'chatGPTWeb') {
                                    //   if ('is_completion' in data !== true) {
                                    //     port.postMessage({ 'type': 'sendGPTData', 'ApiType': ApiType, 'status': 'process', 'content': data.message.content.parts[0] })
                                    //   }
                                    // } else {
                                    //   if (data.choices[0].finish_reason !== 'stop') {
                                    //     port.postMessage({ 'type': 'sendGPTData', 'ApiType': ApiType, 'status': 'process', 'content': data.choices[0].delta.content ? data.choices[0].delta.content : '' })
                                    //   }
                                    // }
                                    if (data.choices.length > 0) {
                                        const finish_reason = data.choices[0].finish_reason;
                                        if (ApiType === 'ollama') {
                                            port.postMessage({ 'type': 'sendGPTData', 'ApiType': ApiType, 'status': 'process', 'content': data });
                                        }
                                        else {
                                            if (finish_reason !== 'stop') {
                                                port.postMessage({ 'type': 'sendGPTData', 'ApiType': ApiType, 'status': 'process', 'content': data.choices[0].delta.content ? data.choices[0].delta.content : '' });
                                            }
                                            if ((ApiType === 'scouterFreeAI' || ApiType === 'licenseKey') && finish_reason === 'error') {
                                                port.postMessage({ 'type': 'sendGPTData', 'ApiType': ApiType, 'status': 'process', 'content': `error: ${data.choices[0].error.message}` });
                                            }
                                        }
                                    }
                                },
                                onEnd: () => {
                                    //  SSE 
                                    port.postMessage({ 'type': 'sendGPTData', 'status': 'done', 'content': '' });
                                },
                                onError: error => {
                                    // 
                                    console.log(error);
                                    if (error.message.indexOf('aborted') >= 0) {
                                        // 
                                    }
                                    else {
                                        const tips = 'Sorry, an error happened, please retry.';
                                        port.postMessage({ 'type': 'sendGPTData', 'status': 'error', 'content': tips + '(' + error.message + ')', 'code': error.message });
                                        //  ChatGPT Web  401  token
                                        (0, util_3.getChatGPTSession)();
                                    }
                                }
                            }, ApiType);
                        }
                    }
                }).catch((error) => {
                    port.postMessage({ 'type': 'sendGPTData', 'status': 'error', 'content': error ? ' ' + error : ' Something went wrong, please try again later.' });
                });
                //
            });
        }
        if (msg.type === 'getDictionaryData') {
            // 
            const result = yield (0, util_1.getDictionaryData)(msg.keyWord);
            port.postMessage(result);
        }
        if (msg.type === 'UPDATE_POPUP_CARD') {
            popupPort.postMessage(msg);
            // port.postMessage(msg);
        }
    }));
});
// 
webextension_polyfill_1.default.runtime.onMessage.addListener(handleMessage);
function handleMessage(request, sender, sendResponse) {
    console.log("Message from the content script: " +
        request.type);
    // Define sendResponse as an async function
    const asyncSendResponse = (response) => __awaiter(this, void 0, void 0, function* () {
        try {
            yield sendResponse(response);
        }
        catch (error) {
            console.error(error);
        }
    });
    if (request.type === 'getUnsplashImages') {
        console.log('background getUnsplashImages:');
        // 
        if (request.keyWord) {
            // port.postMessage({ 'type': 'sendImgData', 'status': 'end', 'imgs': imgs })
            (0, util_1.unsplashSearchPhotos)("t8eOwEDwJEGJe7mYWDleFDBK_EM0SaF1hK_4KYfcD_8", request.keyWord).then((imgs) => {
                // port.postMessage({ 'type': 'sendImgData', 'status': 'end', 'imgs': imgs })
                asyncSendResponse({ type: 'sendImgData', status: 'end', 'imgs': imgs });
            }).catch((error) => {
                console.log(error);
            });
        }
        return true;
    }
    if (request.type === 'addNote') {
        console.log('addNote');
        // Unsplash
        const unsplash = (0, unsplash_js_1.createApi)({
            accessKey: "t8eOwEDwJEGJe7mYWDleFDBK_EM0SaF1hK_4KYfcD_8"
        });
        if (request.messages.unsplash_download_location !== undefined && request.messages.unsplash_download_location !== '') {
            unsplash.photos.trackDownload({ downloadLocation: request.messages.unsplash_download_location, }).then((result) => console.log(result));
        }
        (0, util_1.ankiAction)(request.messages.anki_action_type, 6, request.messages.anki_arguments).then((result) => {
            // 
            asyncSendResponse({ type: 'addToAnki', result: 'success', data: result.result, error: result.error });
        })
            .catch((error) => {
            console.error(error);
            asyncSendResponse({ type: 'addToAnki', result: 'failure', error: error.error });
        });
        // Return true to inform sendResponse that you will be calling it asynchronously
        return true;
    }
    // 
    if (request.type === 'setModel') {
        const isAnkiSpace = request.messages.isAnkiSpace;
        //  DeckName
        (0, util_1.getDefaultDeckName)().then((result) => __awaiter(this, void 0, void 0, function* () {
            let defaultDeckName = result.defaultDeckName;
            if (defaultDeckName === '' || defaultDeckName === undefined) {
                defaultDeckName = 'Default';
            }
            //  model 
            try {
                const modelNames = yield (0, util_1.ankiAction)('modelNames', 6);
                console.log('modelNames:');
                console.log(modelNames);
                if (!modelNames.error) {
                    const models = [
                        {
                            'modelName': 'Scouter',
                            'cardTemplates': [
                                {
                                    'name': 'Card1',
                                    'Front': '{{Front}}',
                                    'Back': `{{Front}}
                  <hr id=answer>
                  {{Back}}`
                                }
                            ],
                            'inOrderFields': ["Front", "Back"],
                            'isAnkiSpace': false
                        },
                        {
                            'modelName': 'Scouter Cloze Text',
                            'cardTemplates': [
                                {
                                    'name': 'Card2',
                                    'Front': '{{cloze:Text}}',
                                    'Back': `{{cloze:Text}}
                            <br>{{More}}`
                                }
                            ],
                            'inOrderFields': ["Text", "More"],
                            'isAnkiSpace': true
                        }
                    ];
                    //  content
                    //  model  content  Anki
                    let modelData = [];
                    let promises = models.map((model) => {
                        return new Promise((resolve, reject) => {
                            if (modelNames.result.includes(model.modelName)) {
                                //  Scouter Model  Model 
                                (0, util_1.ankiAction)('modelFieldNames', 6, { 'modelName': model.modelName }).then((result) => {
                                    if (result.result.length < 2) {
                                        //  2 
                                        modelData.push({ 'modelName': model.modelName, 'field1': result.result[0], 'field2': null, 'isAnkiSpace': model.isAnkiSpace });
                                    }
                                    else {
                                        modelData.push({ 'modelName': model.modelName, 'field1': result.result[0], 'field2': result.result[1], 'isAnkiSpace': model.isAnkiSpace });
                                    }
                                    resolve(); // Resolve the Promise
                                });
                            }
                            else {
                                //  Scouter  Model
                                (0, util_1.ankiAction)('createModel', 6, {
                                    'modelName': model.modelName,
                                    'inOrderFields': model.inOrderFields,
                                    'cardTemplates': model.cardTemplates,
                                    'isCloze': model.isAnkiSpace,
                                    'css': util_3.cardStyle
                                }).then((result) => {
                                    if (!result.error) {
                                        modelData.push({ 'modelName': model.modelName, 'field1': result.result.flds[0].name, 'field2': result.result.flds[1].name, 'isAnkiSpace': model.isAnkiSpace });
                                    }
                                    resolve(); // Resolve the Promise
                                });
                            }
                        });
                    });
                    //  Promise 
                    Promise.all(promises).then(() => {
                        console.log(modelData);
                        asyncSendResponse({ type: 'setModel', result: 'success', data: { 'defaultDeckName': defaultDeckName, 'modelData': modelData }, error: result.error });
                    }).catch((error) => {
                        console.error('Error:', error);
                    });
                }
            }
            catch (error) {
                asyncSendResponse({ type: 'setModel', result: 'failure', error: error });
            }
        }));
        // browser.storage.sync.get({ 'ankiDeckName': 'Default' }).then((result) => {
        // })
        return true;
    }
    if (request.type === 'guiEditNote') {
        (0, util_1.ankiAction)(request.messages.anki_action_type, 6, request.messages.anki_arguments).then((result) => {
            // 
            asyncSendResponse({ type: 'guiEditNote', result: 'success', data: result.result, error: result.error });
        })
            .catch((error) => {
            console.error(error);
            asyncSendResponse({ type: 'guiEditNote', result: 'failure', error: error.error });
        });
        // Return true to inform sendResponse that you will be calling it asynchronously
        return true;
    }
    if (request.type === 'ankiAction') {
        (0, util_1.ankiAction)(request.messages.anki_action_type, 6, request.messages.anki_arguments).then((result) => {
            // 
            asyncSendResponse(result);
        }).catch((error) => {
            asyncSendResponse(error);
        });
        return true;
    }
    if (request.type === 'amplitudeTrack') {
        fetch('https://api.amplitude.com/2/httpapi', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                api_key: "ed720e33b4190ef29a0718a040bbb55a",
                events: [
                    {
                        user_id: userId,
                        event_type: request.name,
                    }
                ]
            })
        })
            .then(response => response.json())
            .then(data => console.log(data))
            .catch((error) => {
            console.error('Error:', error);
        });
        // return true;
    }
    if (request.type === 'getUserStatus') {
        //  License Key
        (0, util_2.getSettings)().then((result) => {
            const licenseKey = result.licenseKey;
            //  Key 
            const data = (0, util_4.getBalance)(licenseKey);
            asyncSendResponse(data);
            console.log(data);
            return true;
        });
    }
    if (request.type === 'getUserInfo') {
        (0, util_4.getUserInfo)().then((userInfo) => {
            asyncSendResponse(userInfo);
        });
        return true;
    }
    if (request.type === 'generationsImages') {
        const data = (0, util_4.generationsImages)(request.data.prompt);
        asyncSendResponse(data);
        return true;
    }
    if (request.type === 'UPDATE_POPUP_CARD') {
        console.log('sendMessage');
        popupPort.postMessage(request);
    }
}
const sendMessageToContent = (runPrompt) => {
    let needToRunPrompt = runPrompt;
    if (needToRunPrompt === undefined) {
        needToRunPrompt = true;
    }
    webextension_polyfill_1.default.tabs.query({ active: true, currentWindow: true }).then((tabs) => {
        var _a;
        const activeTab = tabs[0];
        let tID = (_a = activeTab.id) !== null && _a !== void 0 ? _a : -1;
        if (activeTab && activeTab.id !== undefined) {
            let b = webextension_polyfill_1.default.tabs.sendMessage(tID, { type: 'open-scouter', runPrompt: needToRunPrompt });
            //  content_script.js 
            // b.catch(e => {
            //   console.log(e);
            //   console.log('catch');
            //   browser.scripting.executeScript({
            //     target: { tabId: tID },
            //     files: ["js/vendor.js", "js/content_script.js"],
            //   }).then(() => {
            //     console.log('chrome.scripting.executeScript');
            //   }).then(() => {
            //     browser.tabs.sendMessage(tID, { type: 'open-scouter' })
            //   })
            // })
        }
    });
};


/***/ }),

/***/ "./src/lib/lang.ts":
/*!*************************!*\
  !*** ./src/lib/lang.ts ***!
  \*************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.fetchcurrentLanguage = exports.languageCodes = exports.lang = void 0;
const webextension_polyfill_1 = __importDefault(__webpack_require__(/*! webextension-polyfill */ "./node_modules/webextension-polyfill/dist/browser-polyfill.js"));
// 
exports.lang = {
    'Arabic': {
        'name': '',
        'id': 'Arabic',
        'Prompt1': {
            'explanation': '         '
        },
        'Prompt2': {
            'translate': '   ',
            'explanation': '  '
        },
        'Prompt3': {
            'validation': '         .             . :'
        },
        'audioURL': 'https://dict.youdao.com/dictvoice?le=ar&type=0&audio='
    },
    'Chinese Simplified': {
        'name': '',
        'id': 'Chinese Simplified',
        'Prompt1': {
            'explanation': ''
        },
        'Prompt2': {
            'translate': '',
            'explanation': ''
        },
        'Prompt3': {
            'validation': ''
        },
        'audioURL': 'https://dict.youdao.com/dictvoice?le=zh&type=0&audio='
    },
    'Chinese Traditional': {
        'name': '',
        'id': 'Chinese Traditional',
        'Prompt1': {
            'explanation': ''
        },
        'Prompt2': {
            'translate': '',
            'explanation': ''
        },
        'Prompt3': {
            'validation': ''
        },
        'audioURL': 'https://dict.youdao.com/dictvoice?le=zh&type=0&audio='
    },
    'Dutch': {
        'name': 'Nederlands',
        'id': 'Dutch',
        'Prompt1': {
            'explanation': 'Gebruik het Nederlands om de betekenis van woorden en hun grammaticale rol in de zin uit te leggen'
        },
        'Prompt2': {
            'translate': 'Vertaal de zin naar het Nederlands',
            'explanation': 'Leg de grammaticale kennis uit'
        },
        'Prompt3': {
            'validation': 'Als taalexpert, controleer de zin die ik heb gegeven. Als de zin onjuist is, wijs dan de fout aan in het Nederlands en geef de gecorrigeerde zin. Zin:'
        },
        'audioURL': 'https://dict.youdao.com/dictvoice?le=nl&type=0&audio='
    },
    'United States': {
        'name': 'English',
        'id': 'United States',
        'Prompt1': {
            'explanation': 'Use English to explain the meaning and grammatical role of words in sentences'
        },
        'Prompt2': {
            'translate': 'Translate sentences into English',
            'explanation': 'Explain grammatical knowledge'
        },
        'Prompt3': {
            'validation': 'As a language expert, please check the sentences I provided. If the sentence is incorrect, then point out the error in English and provide the corrected sentence. Sentence:'
        },
        'audioURL': 'https://dict.youdao.com/dictvoice?type=0&audio='
    },
    'United Kingdom': {
        'name': 'English',
        'id': 'United Kingdom',
        'Prompt1': {
            'explanation': 'Use English to explain the meaning and grammatical role of words in sentences'
        },
        'Prompt2': {
            'translate': 'Translate sentences into English',
            'explanation': 'Explain grammatical knowledge'
        },
        'Prompt3': {
            'validation': 'As a language expert, please check the sentences I provided. If the sentence is incorrect, then point out the error in English and provide the corrected sentence. Sentence:'
        },
        'audioURL': 'https://dict.youdao.com/dictvoice?type=1&audio='
    },
    'French': {
        'name': 'Franais',
        'id': 'French',
        'Prompt1': {
            'explanation': 'Utilisez le franais pour expliquer la signification des mots et leur rle grammatical dans la phrase'
        },
        'Prompt2': {
            'translate': 'Traduisez la phrase en franais',
            'explanation': 'Expliquez les connaissances grammaticales'
        },
        'Prompt3': {
            'validation': "En tant qu'expert en langues, veuillez vrifier la phrase que j'ai fournie. Si la phrase est incorrecte, veuillez indiquer l'erreur en franais et fournir la phrase corrige.La phrase: "
        },
        'audioURL': 'https://dict.youdao.com/dictvoice?le=fr&type=0&audio='
    },
    'German': {
        'name': 'Deutsch',
        'id': 'German',
        'Prompt1': {
            'explanation': 'Verwenden Sie Deutsch, um die Bedeutung von Wrtern und ihre grammatikalische Rolle im Satz zu erklren'
        },
        'Prompt2': {
            'translate': 'bersetzen Sie den Satz ins Deutsche',
            'explanation': 'Erklren Sie grammatikalische Kenntnisse'
        },
        'Prompt3': {
            'validation': 'Als Sprachexperte berprfen Sie bitte den von mir bereitgestellten Satz. Wenn der Satz falsch ist, geben Sie bitte den Fehler auf Deutsch an und geben Sie den korrigierten Satz an. Der Satz:'
        },
        'audioURL': 'https://dict.youdao.com/dictvoice?le=de&type=0&audio='
    },
    'Hindi': {
        'name': '',
        'id': 'Hindi',
        'Prompt1': {
            'explanation': '                 '
        },
        'Prompt2': {
            'translate': '     ',
            'explanation': '    '
        },
        'Prompt3': {
            'validation': '    ,             ,              :'
        },
        'audioURL': 'https://dict.youdao.com/dictvoice?le=hi&type=0&audio='
    },
    'Indonesian': {
        'name': 'Bahasa Indonesia',
        'id': 'Indonesian',
        'Prompt1': {
            'explanation': 'Menggunakan bahasa Indonesia untuk menjelaskan makna kata dan peran gramatikalnya dalam kalimat'
        },
        'Prompt2': {
            'translate': 'Menerjemahkan kalimat ke dalam bahasa Indonesia',
            'explanation': 'Menjelaskan pengetahuan tata bahasa'
        },
        'Prompt3': {
            'validation': 'Sebagai ahli bahasa, mohon periksa kalimat yang saya berikan. Jika kalimat tidak benar, tolong tunjukkan kesalahannya dalam bahasa Indonesia dan berikan kalimat yang benar. Kalimat:'
        },
        'audioURL': 'https://dict.youdao.com/dictvoice?le=id&type=0&audio='
    },
    'Italian': {
        'name': 'Italiano',
        'id': 'Italian',
        'Prompt1': {
            'explanation': 'Usa l\'italiano per spiegare il significato delle parole e il loro ruolo grammaticale nella frase'
        },
        'Prompt2': {
            'translate': 'Tradurre la frase in italiano',
            'explanation': 'Spiegazione della conoscenza grammaticale'
        },
        'Prompt3': {
            'validation': 'In quanto esperto di lingua, controlla la frase che ho fornito. Se la frase non  corretta, indica l\'errore in italiano e fornisci la frase corretta. Frase:'
        },
        'audioURL': 'https://dict.youdao.com/dictvoice?le=it&type=0&audio='
    },
    'Japanese': {
        'name': '',
        'id': 'Japanese',
        'Prompt1': {
            'explanation': ''
        },
        'Prompt2': {
            'translate': '',
            'explanation': ''
        },
        'Prompt3': {
            'validation': ''
        },
        'audioURL': 'https://dict.youdao.com/dictvoice?le=jap&type=0&audio='
    },
    'Korean': {
        'name': '',
        'id': 'Korean',
        'Prompt1': {
            'explanation': '        .'
        },
        'Prompt2': {
            'translate': '  .',
            'explanation': '  '
        },
        'Prompt3': {
            'validation': '     .   ,       . : '
        },
        'audioURL': 'https://dict.youdao.com/dictvoice?le=ko&type=0&audio='
    },
    'Portuguese': {
        'name': 'Portugus',
        'id': 'Portuguese',
        'Prompt1': {
            'explanation': 'Usar o portugus para explicar o significado das palavras e o papel gramatical delas na frase'
        },
        'Prompt2': {
            'translate': 'Traduza a frase para o portugus',
            'explanation': 'Explicao do conhecimento gramatical'
        },
        'Prompt3': {
            'validation': 'Como especialista em linguagem, verifique a frase que eu forneci. Se a frase estiver incorreta, indique o erro em portugus e fornea a frase corrigida. Frase: '
        },
        'audioURL': 'https://dict.youdao.com/dictvoice?le=pt&type=0&audio='
    },
    'Russian': {
        'name': '',
        'id': 'Russian',
        'Prompt1': {
            'explanation': '  ,          '
        },
        'Prompt2': {
            'translate': '    ',
            'explanation': '  '
        },
        'Prompt3': {
            'validation': '    , ,  ,   .   ,  ,         . :'
        },
        'audioURL': 'https://dict.youdao.com/dictvoice?le=ru&type=0&audio='
    },
    'Spanish': {
        'name': 'Espaol',
        'id': 'Spanish',
        'Prompt1': {
            'explanation': 'Utilice el espaol para explicar el significado de las palabras y su funcin gramatical en la oracin'
        },
        'Prompt2': {
            'translate': 'Traducir la oracin al espaol',
            'explanation': 'Explicacin de conocimientos gramaticales'
        },
        'Prompt3': {
            'validation': 'Como experto en idiomas, por favor, compruebe la oracin que he proporcionado. Si la oracin es incorrecta, por favor, indique el error en espaol y proporcione la oracin corregida. Oracin:'
        },
        'audioURL': 'https://dict.youdao.com/dictvoice?le=es&type=0&audio='
    },
    'Turkish': {
        'name': 'Trke',
        'id': 'Turkish',
        'Prompt1': {
            'explanation': 'Kelimelerin anlamn ve cmledeki dilbilgisel roln aklamak iin Trkeyi kullann'
        },
        'Prompt2': {
            'translate': 'Cmleyi Trkeye evirin',
            'explanation': 'Dilbilgisi bilgisi aklamas'
        },
        'Prompt3': {
            'validation': 'Dil uzman olarak, ltfen sunduum cmleyi kontrol edin. Eer cmle yanlsa, ltfen hatay Trke olarak belirtin ve dzeltilmi cmleyi salayn. Cmle:'
        },
        'audioURL': 'https://dict.youdao.com/dictvoice?le=tr&type=0&audio='
    }
};
exports.languageCodes = {
    "Arabic": "ar-AE-FatimaNeural",
    "Chinese Simplified": "zh-CN-XiaoxiaoNeural",
    "Chinese Traditional": "zh-TW-HsiaoChenNeural",
    "Dutch": "nl-NL-ColetteNeural",
    "English": "en-US-AriaNeural",
    "United States": "en-US-AriaNeural",
    "United Kingdom": "en-GB-LibbyNeural",
    "French": "fr-FR-DeniseNeural",
    "German": "de-DE-KatjaNeural",
    "Hindi": "hi-IN-MadhurNeural",
    "Indonesian": "id-ID-ArdiNeural",
    "Italian": "it-IT-ElsaNeural",
    "Japanese": "ja-JP-NanamiNeural",
    "Korean": "ko-KR-SunHiNeural",
    "Portuguese": "pt-BR-FranciscaNeural",
    "Russian": "ru-RU-SvetlanaNeural",
    "Spanish": "es-ES-ElviraNeural",
    "Turkish": "tr-TR-AhmetNeural"
};
// 
const fetchcurrentLanguage = () => __awaiter(void 0, void 0, void 0, function* () {
    let r = null;
    yield webextension_polyfill_1.default.storage.sync.get({ 'currentLanguage': 'Chinese Simplified', 'targetLanguage': 'United States' }).then((result) => {
        // 
        let c = exports.lang['Chinese Simplified'];
        let t = exports.lang['United States'];
        c = switchLang(result.currentLanguage);
        t = switchLang(result.targetLanguage);
        r = { 'current': c, 'target': t };
    });
    return r;
});
exports.fetchcurrentLanguage = fetchcurrentLanguage;
const switchLang = (str) => {
    switch (str) {
        case 'Arabic':
            return exports.lang['Arabic'];
        case 'Chinese Simplified':
            return exports.lang['Chinese Simplified'];
        case 'Chinese Traditional':
            return exports.lang['Chinese Traditional'];
        case 'Dutch':
            return exports.lang['Dutch'];
        case 'United States':
            return exports.lang['United States'];
        case 'English':
            return exports.lang['United States'];
        case 'United Kingdom':
            return exports.lang['United Kingdom'];
        case 'French':
            return exports.lang['French'];
        case 'German':
            return exports.lang['German'];
        case 'Hindi':
            return exports.lang['Hindi'];
        case 'Indonesian':
            return exports.lang['Indonesian'];
        case 'Italian':
            return exports.lang['Italian'];
        case 'Japanese':
            return exports.lang['Japanese'];
        case 'Korean':
            return exports.lang['Korean'];
        case 'Portuguese':
            return exports.lang['Portuguese'];
        case 'Russian':
            return exports.lang['Russian'];
        case 'Spanish':
            return exports.lang['Spanish'];
        case 'Turkish':
            return exports.lang['Turkish'];
        default:
            return exports.lang['Chinese Simplified'];
    }
};


/***/ }),

/***/ "./src/util.ts":
/*!*********************!*\
  !*** ./src/util.ts ***!
  \*********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.cardStyle = exports.getUserInfo = exports.getBalance = exports.fetchSSE = exports.getChatGPTSession = exports.textToSpeechDownload = exports.playTextToSpeech = exports.getDefaultDeckName = exports.getChatGPTWebToken = exports.getAIParameter = exports.generationsImages = exports.getDictionaryData = exports.unsplashSearchPhotos = exports.ankiAction = void 0;
const webextension_polyfill_1 = __importDefault(__webpack_require__(/*! webextension-polyfill */ "./node_modules/webextension-polyfill/dist/browser-polyfill.js"));
const unsplash_js_1 = __webpack_require__(/*! unsplash-js */ "./node_modules/unsplash-js/dist/unsplash-js.esm.js");
const sdk = __importStar(__webpack_require__(/*! microsoft-cognitiveservices-speech-sdk */ "./node_modules/microsoft-cognitiveservices-speech-sdk/distrib/es2015/microsoft.cognitiveservices.speech.sdk.js"));
const uuid_1 = __webpack_require__(/*! uuid */ "./node_modules/uuid/dist/commonjs-browser/index.js");
const util_1 = __webpack_require__(/*! ./Options/util */ "./src/Options/util.ts");
const iso_639_1_1 = __importDefault(__webpack_require__(/*! iso-639-1 */ "./node_modules/iso-639-1/src/index.js"));
const lang_1 = __webpack_require__(/*! ./lib/lang */ "./src/lib/lang.ts");
const eventsource_parser_1 = __webpack_require__(/*! eventsource-parser */ "./node_modules/eventsource-parser/dist/index.js");
//  Anki
function ankiAction(action, version, params = {}) {
    return new Promise((resolve, reject) => {
        fetch('http://127.0.0.1:8765', {
            method: "POST",
            body: JSON.stringify({ "action": action, "version": version, "params": params })
        }).then(response => response.json()).then((data) => {
            // console.log(data);
            resolve(data);
        }).catch((error) => {
            reject({ 'result': [], 'error': 'Please open the Anki client and install the Anki-Connect plugin before trying again.' });
        });
    });
}
exports.ankiAction = ankiAction;
//  unsplash 
function unsplashSearchPhotos(API_KEY, query) {
    return new Promise((resolve, reject) => {
        const unsplash = (0, unsplash_js_1.createApi)({
            accessKey: API_KEY,
        });
        unsplash.search.getPhotos({
            query: query,
        }).then((data) => {
            // console.log(data);
            var _a, _b;
            if (((_a = data.response) === null || _a === void 0 ? void 0 : _a.results.length) === 0) {
                resolve([]);
            }
            else {
                resolve((_b = data.response) === null || _b === void 0 ? void 0 : _b.results);
            }
        }).catch((error) => {
            reject(error);
        });
    });
}
exports.unsplashSearchPhotos = unsplashSearchPhotos;
// 
const getDictionaryData = (keyWord) => __awaiter(void 0, void 0, void 0, function* () {
    // 
    const Settings = yield (0, util_1.getSettings)();
    const targetLanguage = Settings.targetLanguage;
    // 
    let url = new URL('https://dict.youdao.com/jsonapi');
    let params = {
        xmlVersion: '5.1',
        le: iso_639_1_1.default.getCode(targetLanguage),
        q: keyWord
    };
    url.search = new URLSearchParams(params).toString();
    const ErrorMsg = ' Sorry, No Results Found for this Word.';
    const ErrorResult = { 'type': 'sendGPTData', 'status': 'error', 'content': ErrorMsg, 'chatId': '' };
    return fetch(url)
        .then(response => {
        if (!response.ok) {
            return ErrorResult;
        }
        return response.json(); //  JSON 
    })
        .then(data => {
        let msg = '';
        switch (targetLanguage) {
            case 'Spanish':
                if ('multle' in data) {
                    msg = keyWord + ' /' + data.multle.word[0].phone + '/' + '\n' + data.multle.word[0].trs[0].tr[0].l.i[0];
                }
                else if ('fanyi' in data) {
                    msg = data.fanyi.tran;
                }
                if ('multle' in data || 'fanyi' in data) {
                    return { 'type': 'sendGPTData', 'status': 'done', 'content': msg, 'chatId': '' };
                }
                else {
                    return ErrorResult;
                }
            case 'French':
                if ('fc' in data) {
                    msg = keyWord + ' /' + data.fc.word[0].phone + '/' + '\n' + data.fc.word[0].trs[0].tr[0].l.i[0];
                }
                else if ('fanyi' in data) {
                    msg = data.fanyi.tran;
                }
                if ('fc' in data || 'fanyi' in data) {
                    return { 'type': 'sendGPTData', 'status': 'done', 'content': msg, 'chatId': '' };
                }
                else {
                    return ErrorResult;
                }
            case 'Japanese':
                if ('jc' in data) {
                    msg = keyWord + ' /' + data.jc.word[0]["return-phrase"].l.i + '/' + '\n' + data.jc.word[0].trs[0].tr[0].l.i[0];
                    return { 'type': 'sendGPTData', 'status': 'done', 'content': msg, 'chatId': '' };
                }
                else if ('fanyi' in data) {
                    msg = data.fanyi.tran;
                    return { 'type': 'sendGPTData', 'status': 'done', 'content': msg, 'chatId': '' };
                }
                else if ('jaTransPjm' in data) {
                    msg = data.jaTransPjm.fanyi.tran;
                    return { 'type': 'sendGPTData', 'status': 'done', 'content': msg, 'chatId': '' };
                }
                else if ('newjc' in data) {
                    msg = data.newjc.word.sense[0].phrList[0].jmsy;
                    return { 'type': 'sendGPTData', 'status': 'done', 'content': msg, 'chatId': '' };
                }
                else {
                    return ErrorResult;
                }
                break;
            default:
                // English
                if ('ec' in data) {
                    msg = keyWord + ' /' + data.ec.word[0].usphone + '/' + '\n' + data.ec.word[0].trs[0].tr[0].l.i[0];
                }
                else if ('fanyi' in data) {
                    msg = data.fanyi.tran;
                }
                if ('ec' in data || 'fanyi' in data) {
                    return { 'type': 'sendGPTData', 'status': 'done', 'content': msg, 'chatId': '' };
                }
                else {
                    return ErrorResult;
                }
                break;
        }
    })
        .catch(error => {
        console.log(error);
        return ErrorResult;
    });
});
exports.getDictionaryData = getDictionaryData;
// AI 
function generationsImages(prompt) {
    return new Promise((resolve, reject) => {
        getAIParameter([]).then((result) => {
            var _a;
            const openApiEndpoint = (_a = result.data) === null || _a === void 0 ? void 0 : _a.imagesGenerations.url;
            if (!result.data || openApiEndpoint === undefined) {
            }
            else {
                //  open router  aiproxy 
                if (result.apiKeySelection === 'licenseKey' || (openApiEndpoint === null || openApiEndpoint === void 0 ? void 0 : openApiEndpoint.indexOf('api.aiproxy')) >= 0) {
                    resolve({ 'succeeded': false, data: [] });
                }
                const body = {
                    "prompt": prompt,
                    "n": 2,
                    "size": "512x512"
                };
                const headers = result.data.imagesGenerations.headers;
                fetch(openApiEndpoint, {
                    method: "POST",
                    body: JSON.stringify(body),
                    headers: headers
                }).then((response) => __awaiter(this, void 0, void 0, function* () {
                    if (!response.ok) {
                        resolve({ 'succeeded': false, 'data': {} });
                    }
                    response.json().then((data) => {
                        if (data.status === "notRunning") {
                            // azure
                            const stringList = openApiEndpoint.split('/openai/');
                            const url = stringList[0] + '/openai/' + 'operations/images/' + data.id + '?api-version=2023-06-01-preview';
                            const intervalId = setInterval(() => {
                                fetch(url, {
                                    method: "GET",
                                    headers: headers
                                })
                                    .then(response => response.json())
                                    .then(data => {
                                    if (data.status === 'succeeded') {
                                        resolve({ 'succeeded': true, 'data': data.result });
                                        clearInterval(intervalId); // 
                                    }
                                    if (data.status === 'failed') {
                                        //
                                        resolve({ 'succeeded': false, 'data': data.error });
                                        clearInterval(intervalId); // 
                                    }
                                });
                            }, 1000);
                        }
                        else {
                            if ('error' in data) {
                                resolve({ 'succeeded': false, 'data': data.error });
                            }
                            else {
                                resolve({ 'succeeded': true, 'data': data });
                            }
                        }
                    });
                })).catch((error) => {
                    console.log(error);
                    resolve({ 'succeeded': false, 'data': error });
                });
            }
        });
    });
}
exports.generationsImages = generationsImages;
function getAIParameter(messages) {
    return new Promise((resolve, reject) => {
        const defaultOpenApiEndpoint = 'https://api.openai.com';
        (0, util_1.getSettings)().then((result) => {
            const apiKeySelection = result.apiKeySelection;
            const licenseKey = result.licenseKey;
            let openApiKey = result.openApiKey;
            const currentLanguage = result.currentLanguage;
            const targetLanguage = result.targetLanguage;
            const model = result.model;
            const freeModel = result.freeModel;
            let openApiEndpoint = result.openApiEndpoint;
            if (openApiEndpoint.length < 5) {
                openApiEndpoint = defaultOpenApiEndpoint;
            }
            let headers = {};
            let body;
            let imgOpenApiEndpoint = '';
            switch (apiKeySelection) {
                case 'scouterFreeAI':
                    // scouter  AI
                    openApiEndpoint = 'https://openrouter.ai/api/v1/chat/completions';
                    imgOpenApiEndpoint = 'https://openrouter.ai/api/v1/images/generations';
                    openApiKey = licenseKey;
                    headers = {
                        'Authorization': 'Bearer ' + "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",
                        'Content-Type': 'application/json',
                        'HTTP-Referer': 'https://notes.dabing.one/',
                        'X-Title': 'ScouterFreeAI'
                    };
                    body = {
                        "model": freeModel,
                        "messages": messages,
                        "temperature": 0.7,
                        "max_tokens": 420,
                        "top_p": 1,
                        "frequency_penalty": 0,
                        "presence_penalty": 2,
                        "stream": true
                    };
                    resolve({
                        'result': 'success',
                        'apiKeySelection': apiKeySelection,
                        'data': {
                            'chatCompletions': {
                                'url': openApiEndpoint,
                                'headers': headers,
                                'body': body
                            },
                            'imagesGenerations': {
                                'url': imgOpenApiEndpoint,
                                'headers': headers,
                            }
                        }
                    });
                    break;
                case 'licenseKey':
                    // openrouter
                    openApiKey = licenseKey;
                    if (openApiKey.length < 5) {
                        resolve({
                            'result': 'failure',
                            'apiKeySelection': apiKeySelection,
                            'data': null
                        });
                    }
                    openApiEndpoint = 'https://openrouter.ai/api/v1/chat/completions';
                    imgOpenApiEndpoint = 'https://openrouter.ai/api/v1/images/generations';
                    headers = {
                        'Authorization': 'Bearer ' + openApiKey,
                        'Content-Type': 'application/json',
                        'HTTP-Referer': 'https://notes.dabing.one/',
                        'X-Title': 'Scouter'
                    };
                    body = {
                        "model": model,
                        "messages": messages,
                        "temperature": 0.7,
                        "max_tokens": 420,
                        "top_p": 1,
                        "frequency_penalty": 0,
                        "presence_penalty": 2,
                        "stream": true
                    };
                    resolve({
                        'result': 'success',
                        'apiKeySelection': apiKeySelection,
                        'data': {
                            'chatCompletions': {
                                'url': openApiEndpoint,
                                'headers': headers,
                                'body': body
                            },
                            'imagesGenerations': {
                                'url': imgOpenApiEndpoint,
                                'headers': headers,
                            }
                        }
                    });
                    break;
                case 'ollama':
                    headers = { 'Content-Type': 'application/json', };
                    openApiEndpoint = result.ollamaApiEndpoint;
                    //  \ 
                    if (openApiEndpoint.slice(-1) === "/") {
                        openApiEndpoint = openApiEndpoint.slice(0, -1);
                    }
                    imgOpenApiEndpoint = '';
                    openApiEndpoint += '/api/chat';
                    body = {
                        "model": result.ollamaModel,
                        "messages": messages,
                        // "temperature": 0.7,
                        // "max_tokens": 420,
                        // "top_p": 1,
                        // "frequency_penalty": 0,
                        // "presence_penalty": 2,
                        // "stream": true
                    };
                    resolve({
                        'result': 'success',
                        'apiKeySelection': apiKeySelection,
                        'data': {
                            'chatCompletions': {
                                'url': openApiEndpoint,
                                'headers': headers,
                                'body': body
                            },
                            'imagesGenerations': {
                                'url': imgOpenApiEndpoint,
                                'headers': headers,
                            }
                        }
                    });
                    break;
                case 'myOwnOpenAiKey':
                    //  Key
                    if (openApiKey.length < 5) {
                        resolve({
                            'result': 'failure',
                            'apiKeySelection': apiKeySelection,
                            'data': null
                        });
                    }
                    if (openApiEndpoint.indexOf('azure.com') > -1) {
                        // Azure
                        // 'https://YOURDEPLOYMENTS.openai.azure.com/openai/deployments/YOURDEPLOYMENTS/chat/completions?api-version=2023-03-15-preview'
                        const stringList = openApiEndpoint.split('/openai/');
                        imgOpenApiEndpoint = stringList[0] + '/openai/' + 'images/generations:submit?api-version=2023-06-01-preview';
                        headers = { 'api-key': openApiKey, 'Content-Type': 'application/json', };
                        body = {
                            "model": "gpt-35-turbo",
                            "messages": messages,
                            "temperature": 0.7,
                            "max_tokens": 420,
                            "top_p": 1,
                            "frequency_penalty": 0,
                            "presence_penalty": 2,
                            "stream": true
                        };
                    }
                    else if (openApiEndpoint.indexOf('api.pawan.krd') > -1) {
                        // pawan
                        let model = 'pai-001';
                        const regex = /\/\/[^\/]+\/([^\/]+)\//;
                        const match = openApiEndpoint.match(regex);
                        if (match) {
                            model = match[1];
                        }
                        headers = { 'Authorization': 'Bearer ' + openApiKey, 'Content-Type': 'application/json', };
                        //  v1 
                        openApiEndpoint = openApiEndpoint.replace('v1', '');
                        //  \ 
                        if (openApiEndpoint.slice(-1) === "/") {
                            openApiEndpoint = openApiEndpoint.slice(0, -1);
                        }
                        imgOpenApiEndpoint = openApiEndpoint + '/v1/images/generations';
                        openApiEndpoint += '/v1/chat/completions';
                        body = {
                            "model": model,
                            "messages": messages,
                            "temperature": 0.7,
                            "max_tokens": 420,
                            "top_p": 1,
                            "frequency_penalty": 0,
                            "presence_penalty": 2,
                            "stream": true
                        };
                        resolve({
                            'result': 'success',
                            'apiKeySelection': apiKeySelection,
                            'data': {
                                'chatCompletions': {
                                    'url': openApiEndpoint,
                                    'headers': headers,
                                    'body': body
                                },
                                'imagesGenerations': {
                                    'url': imgOpenApiEndpoint,
                                    'headers': headers,
                                }
                            }
                        });
                    }
                    else {
                        // OpenAI
                        headers = { 'Authorization': 'Bearer ' + openApiKey, 'Content-Type': 'application/json', };
                        //  \ 
                        if (openApiEndpoint.slice(-1) === "/") {
                            openApiEndpoint = openApiEndpoint.slice(0, -1);
                        }
                        imgOpenApiEndpoint = openApiEndpoint + '/v1/images/generations';
                        openApiEndpoint += '/v1/chat/completions';
                        body = {
                            "model": "gpt-3.5-turbo",
                            "messages": messages,
                            "temperature": 0.7,
                            "max_tokens": 420,
                            "top_p": 1,
                            "frequency_penalty": 0,
                            "presence_penalty": 2,
                            "stream": true
                        };
                    }
                    resolve({
                        'result': 'success',
                        'apiKeySelection': apiKeySelection,
                        'data': {
                            'chatCompletions': {
                                'url': openApiEndpoint,
                                'headers': headers,
                                'body': body
                            },
                            'imagesGenerations': {
                                'url': imgOpenApiEndpoint,
                                'headers': headers,
                            }
                        }
                    });
                    break;
                default:
                    // chatGPT Web
                    //  token
                    getChatGPTWebToken().then(token => {
                        const newMessages = messages.map((item) => {
                            return {
                                id: (0, uuid_1.v4)(),
                                role: item.role,
                                content: {
                                    content_type: 'text',
                                    parts: [item.content],
                                },
                            };
                        });
                        openApiEndpoint = 'https://chat.openai.com/backend-api/conversation';
                        imgOpenApiEndpoint = 'https://openrouter.ai/api/v1/images/generations';
                        headers = {
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer ' + token
                        };
                        body = {
                            action: 'next',
                            messages: newMessages,
                            model: 'text-davinci-002-render-sha',
                            parent_message_id: (0, uuid_1.v4)(),
                            history_and_training_disabled: true,
                        };
                        resolve({
                            'result': 'success',
                            'apiKeySelection': apiKeySelection,
                            'data': {
                                'chatCompletions': {
                                    'url': openApiEndpoint,
                                    'headers': headers,
                                    'body': body
                                },
                                'imagesGenerations': {
                                    'url': imgOpenApiEndpoint,
                                    'headers': headers,
                                }
                            }
                        });
                    }).catch(error => {
                        // 
                        reject(error + ' Please Ensure that You Are Logged into [ChatGPT](https://chat.openai.com/).');
                    });
                    break;
            }
        });
    });
}
exports.getAIParameter = getAIParameter;
function getChatGPTWebToken() {
    return __awaiter(this, void 0, void 0, function* () {
        console.log('getChatGPTWebToken');
        return new Promise((resolve, reject) => {
            webextension_polyfill_1.default.storage.local.get(['authData']).then((result) => __awaiter(this, void 0, void 0, function* () {
                const authData = result.authData;
                const now = new Date().getTime();
                if (authData && authData.token && authData.expiry && authData.expiry > now) {
                    resolve(authData.token);
                }
                else {
                    try {
                        // const response = await fetch('https://chat.openai.com/api/auth/session');
                        // if (!response.ok) {
                        //   reject("Couldn't fetch the token");
                        //   throw new Error("Couldn't fetch the token");
                        // }
                        // const data = await response.json();
                        // if ('accessToken' in data !== true) {
                        //   reject("Couldn't fetch the token");
                        // }
                        // const updatedAuthData = {
                        //   token: data.accessToken,
                        //   expiry: Date.parse(data.expires)
                        // }
                        // browser.storage.local.set({ authData: updatedAuthData }).then(() => {
                        //   resolve(updatedAuthData.token);
                        // })
                        (0, exports.getChatGPTSession)().then(token => {
                            resolve(token);
                        }).catch(error => {
                            reject(error);
                        });
                    }
                    catch (error) {
                        reject(error);
                    }
                }
            }));
        });
    });
}
exports.getChatGPTWebToken = getChatGPTWebToken;
//  Anki  Deck 
function getDefaultDeckName() {
    return new Promise((resolve, reject) => {
        let defaultDeckName = '';
        //  Deck Name
        webextension_polyfill_1.default.storage.sync.get(["ankiDeckName"]).then((result) => __awaiter(this, void 0, void 0, function* () {
            // console.log('result:');
            // console.log(result);
            if (result.ankiDeckName) {
                // 
                defaultDeckName = result.ankiDeckName;
            }
            else {
                // 
                //  Anki 
                defaultDeckName = yield ankiAction('deckNames', 6).then((result) => {
                    // 
                    return result.result[0];
                }).catch((error) => {
                    // console.log(error);
                    return '';
                });
            }
            resolve({ 'defaultDeckName': defaultDeckName });
        }));
    });
}
exports.getDefaultDeckName = getDefaultDeckName;
const playTextToSpeech = (text, voice, targetLanguage) => {
    if (navigator.userAgent.indexOf('Firefox') >= 0) {
        const audioUrl = lang_1.lang[targetLanguage]['audioURL'];
        let audio = new Audio(audioUrl + text);
        audio.addEventListener('loadeddata', (event) => {
            audio.play();
        });
    }
    else {
        const audioConfig = sdk.AudioConfig.fromDefaultSpeakerOutput();
        const speechConfig = sdk.SpeechConfig.fromSubscription("51675ff213a64c3896bc95141c6c54dd", "eastus");
        speechConfig.speechSynthesisVoiceName = voice;
        speechConfig.speechSynthesisOutputFormat = sdk.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3;
        const synthesizer = new sdk.SpeechSynthesizer(speechConfig, audioConfig);
        synthesizer.speakTextAsync(text, function (result) {
            if (result.reason === sdk.ResultReason.SynthesizingAudioCompleted) {
                // console.log('synthesis finished.');
            }
            else {
                console.error('Speech synthesis canceled, ' + result.errorDetails + '\nDid you set the speech resource key and region values?');
            }
            synthesizer.close();
        }, function (err) {
            synthesizer.close();
        });
    }
};
exports.playTextToSpeech = playTextToSpeech;
const textToSpeechDownload = (text, voice) => {
    const pullStream = sdk.AudioOutputStream.createPullStream();
    const audioConfig = sdk.AudioConfig.fromStreamOutput(pullStream);
    const speechConfig = sdk.SpeechConfig.fromSubscription("51675ff213a64c3896bc95141c6c54dd", "eastus");
    speechConfig.speechSynthesisVoiceName = voice;
    speechConfig.speechSynthesisOutputFormat = sdk.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3;
    const synthesizer = new sdk.SpeechSynthesizer(speechConfig, audioConfig);
    synthesizer.speakTextAsync(text, function (result) {
        return __awaiter(this, void 0, void 0, function* () {
            synthesizer.close();
            if (result.reason === sdk.ResultReason.SynthesizingAudioCompleted) {
                let allChunks = [];
                let chunk;
                do {
                    const audioBuffer = new ArrayBuffer(16000);
                    const chunkCount = yield pullStream.read(audioBuffer);
                    chunk = audioBuffer.slice(0, chunkCount);
                    if (chunkCount > 0) {
                        allChunks.push(chunk);
                    }
                } while (chunk.byteLength > 0);
                let blob = new Blob(allChunks, { 'type': 'audio/mp3' });
                let url = window.URL.createObjectURL(blob);
                let a = document.createElement('a');
                document.body.appendChild(a);
                a.style.display = 'none';
                a.href = url;
                a.download = `Audio_${new Date().getTime()}.mp3`;
                a.click();
                window.URL.revokeObjectURL(url);
                document.body.removeChild(a);
            }
            else {
                console.error(`TTS Failed: ${result.errorDetails}`);
            }
            pullStream.close();
        });
    }, function (error) {
        console.error(`TTS Failed: ${error}`);
        synthesizer.close();
        pullStream.close();
    });
};
exports.textToSpeechDownload = textToSpeechDownload;
const getChatGPTSession = () => __awaiter(void 0, void 0, void 0, function* () {
    // const URL = 'https://chat.openai.com/api/auth/session'
    // try {
    //   const response = await fetch(URL);
    //   // 200
    //   if (!response.ok) {
    //     throw new Error(`HTTP error, status = ${response.status}`);
    //   }
    //   // JSON
    //   const data = await response.json();
    //   return data;
    // } catch (error) {
    //   console.error(`Failed to fetch session: ${error}`);
    //   throw error; // /
    // }
    const response = yield fetch('https://chat.openai.com/api/auth/session');
    if (!response.ok) {
        return "Couldn't fetch the token";
        throw new Error("Couldn't fetch the token");
    }
    const data = yield response.json();
    if ('accessToken' in data !== true) {
        return "Couldn't fetch the token";
    }
    const updatedAuthData = {
        token: data.accessToken,
        expiry: Date.parse(data.expires)
    };
    webextension_polyfill_1.default.storage.local.set({ authData: updatedAuthData }).then(() => {
        return updatedAuthData.token;
    });
});
exports.getChatGPTSession = getChatGPTSession;
const fetchSSE = (url, requestInit, options, apiType) => __awaiter(void 0, void 0, void 0, function* () {
    var _a;
    const { onMessage, onEnd, onError } = options;
    try {
        const response = yield fetch(url, requestInit);
        if (!response.ok) {
            onError && onError(new Error(`HTTP error, status = ${response.status}`));
            return;
        }
        const parser = (0, eventsource_parser_1.createParser)((event) => {
            if (event.type === 'event') {
                try {
                    if (event.data !== '[DONE]') {
                        const data = JSON.parse(event.data);
                        onMessage && onMessage(data);
                    }
                }
                catch (_a) {
                    onError && onError(new Error('Failed to parse SSE event data'));
                }
            }
        });
        const reader = (_a = response.body) === null || _a === void 0 ? void 0 : _a.getReader();
        if (reader !== undefined) {
            try {
                while (true) {
                    const { done, value } = yield reader.read();
                    if (done) {
                        onEnd && onEnd();
                        break;
                    }
                    const str = new TextDecoder().decode(value);
                    if (apiType === 'ollama') {
                        let contents = '';
                        const jsonStrings = str.trim().split('\n');
                        jsonStrings.forEach(jsonStr => {
                            try {
                                //  JSON 
                                const jsonObject = JSON.parse(jsonStr);
                                if (jsonObject.message && jsonObject.message.content) {
                                    contents += jsonObject.message.content;
                                }
                            }
                            catch (error) {
                                console.error("Parsing error:", error);
                                // 
                            }
                        });
                        onMessage && onMessage(contents);
                    }
                    else {
                        parser.feed(str);
                    }
                }
            }
            finally {
                reader.releaseLock();
            }
            parser.reset();
        }
    }
    catch (error) {
        onError && onError(new Error(`Fetch request failed: ${error}`));
    }
});
exports.fetchSSE = fetchSSE;
// export const playTextToSpeech = async (text: string, voice: string) => {
//   const speechConfig = sdk.SpeechConfig.fromSubscription(process.env.AZURE_TTS_API_KEY as string, process.env.AZURE_TTS_SPEECH_REGION as string);
//   speechConfig.speechSynthesisVoiceName = voice;
//   speechConfig.speechSynthesisOutputFormat = sdk.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm;
//   const synthesizer = new sdk.SpeechSynthesizer(speechConfig, undefined);
//   await new Promise((resolve, reject) => {
//     synthesizer.speakTextAsync(
//       text,
//       function (result) {
//         if (result.reason === sdk.ResultReason.SynthesizingAudioCompleted) {
//           const audio = new Audio(URL.createObjectURL(new Blob([result.audioData])));
//           audio.play();
//           resolve(true);
//         } else {
//           reject(
//             'Speech synthesis canceled, ' + result.errorDetails + '\nDid you set the speech resource key and region values?'
//           );
//         }
//       },
//       function (err) {
//         reject('err - ' + err);
//       }
//     );
//   }).finally(() => {
//     synthesizer.close();
//   });
// };
const getBalance = (apiKey) => {
    return new Promise((resolve, reject) => {
        const url = 'https://openrouter.ai/api/v1/auth/key';
        const headers = { 'Authorization': 'Bearer ' + apiKey, 'Content-Type': 'application/json', };
        fetch(url, {
            headers: headers
        }).then((response) => {
            response.json().then((data) => {
                resolve(data);
            });
        });
    });
};
exports.getBalance = getBalance;
const checkLicenseKey = (key) => __awaiter(void 0, void 0, void 0, function* () {
    console.log('checkLicenseKey from lemonsqueezy:');
    let verified = false;
    //  Lemonsqueezy  Key
    const response = yield fetch('https://api.lemonsqueezy.com/v1/licenses/validate', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            license_key: key,
        })
    });
    const data = yield response.json(); // 
    verified = data.valid;
    console.log(verified);
    if (!verified) {
        console.log('checkLicenseKey from dabing:');
        const res = yield fetch('https://api.scouter.dabing.one/api/checktLicenseKey', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                key: key,
            })
        });
        const data = yield res.json();
        verified = data.verified;
        if (!res.ok) {
            throw new Error(data.message);
        }
    }
    console.log(verified);
    return verified;
});
const getUserInfo = () => {
    console.log('getUserInfo');
    return new Promise((resolve, reject) => {
        (0, util_1.getSettings)().then((result) => __awaiter(void 0, void 0, void 0, function* () {
            if (webextension_polyfill_1.default.runtime.lastError) {
                reject(chrome.runtime.lastError);
            }
            let verified = false;
            if (result.newLicenseKey) {
                console.log('result.newLicenseKey:');
                console.log(true);
                verified = yield checkLicenseKey(result.newLicenseKey);
                console.log('getUserInfo result:');
                console.log(verified);
            }
            //  ID
            let uniqueId;
            if (result.userId) {
                uniqueId = result.userId;
            }
            else {
                uniqueId = (0, uuid_1.v4)();
                webextension_polyfill_1.default.storage.sync.set({ userId: uniqueId }).then(() => {
                    if (chrome.runtime.lastError) {
                        reject(webextension_polyfill_1.default.runtime.lastError);
                    }
                    else {
                        // resolve(uniqueId);
                    }
                });
            }
            const response = { 'userId': uniqueId, 'verified': verified, 'contextMenu': result.contextMenu, 'showYoutubeButton': result.showYoutubeButton };
            console.log('response:');
            console.log(response);
            resolve(response);
        }));
    });
};
exports.getUserInfo = getUserInfo;
/* () | Card styles may be updated with each version iteration, (deleting the text in the parentheses can pause the auto-update). */
exports.cardStyle = `

  .card {
    font-family: arial;
    font-size: 18px;
    color: rgb(0 0 0 / 84%);
    background-color: white;
    text-align: left;
    line-height: 1.6;
  }

  blockquote {
    border-left: 5px solid #ccc;
    padding: 8px 16px;
    margin-left:0;
    margin-right:0;
		background-color: rgb(0 0 0 / 4%);
  }

  a {
    text-decoration: underline;
  }

  img {
    max-height: 320px;
  }

  .ankiSpace {
    color:#F08A24;
  }

  .keyWord {
    color:#F08A24;
  }

  table {
    border: 1px solid #ccc;
    border-collapse: collapse;
    margin:0;
    padding:0;
    width: 100%;
  }

  table tr {
    border: 1px solid #ddd;
    padding: 5px;
  }

  table th, table td {
    padding: 10px;
    text-align: left;
  }

  table th {
    letter-spacing: 1px;
    text-transform: uppercase;
  }`;


/***/ }),

/***/ "./node_modules/unsplash-js/dist/unsplash-js.esm.js":
/*!**********************************************************!*\
  !*** ./node_modules/unsplash-js/dist/unsplash-js.esm.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Language": () => (/* binding */ Language),
/* harmony export */   "OrderBy": () => (/* binding */ OrderBy),
/* harmony export */   "_internals": () => (/* binding */ internals),
/* harmony export */   "createApi": () => (/* binding */ createApi)
/* harmony export */ });
/* harmony import */ var content_type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! content-type */ "./node_modules/content-type/index.js");


function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends.apply(this, arguments);
}

function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}

var checkIsString = /*#__PURE__*/getRefinement(function (value) {
  return typeof value === 'string' ? value : null;
});
var isDefined = function isDefined(x) {
  return x !== null && x !== undefined;
};
function getRefinement(getB) {
  return function (a) {
    return isDefined(getB(a));
  };
}
var checkIsNonEmptyArray = function checkIsNonEmptyArray(a) {
  return a.length > 0;
};

/** Takes a dictionary containing nullish values and returns a dictionary of all the defined
 * (non-nullish) values.
 */

var compactDefined = function compactDefined(obj) {
  return Object.keys(obj).reduce(function (acc, key) {
    var _ref;

    var value = obj[key];
    return _extends({}, acc, isDefined(value) ? (_ref = {}, _ref[key] = value, _ref) : {});
  }, {});
};
function flow() {
  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {
    fns[_key] = arguments[_key];
  }

  var len = fns.length - 1;
  return function () {
    for (var _len2 = arguments.length, x = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      x[_key2] = arguments[_key2];
    }

    var y = fns[0].apply(this, x);

    for (var i = 1; i <= len; i++) {
      y = fns[i].call(this, y);
    }

    return y;
  };
}

var checkIsObject = /*#__PURE__*/getRefinement(function (response) {
  return isDefined(response) && typeof response === 'object' && !Array.isArray(response) ? response : null;
});
var checkIsErrors = /*#__PURE__*/getRefinement(function (errors) {
  return Array.isArray(errors) && errors.every(checkIsString) && checkIsNonEmptyArray(errors) ? errors : null;
});
var checkIsApiError = /*#__PURE__*/getRefinement(function (response) {
  return checkIsObject(response) && 'errors' in response && checkIsErrors(response.errors) ? {
    errors: response.errors
  } : null;
});
var getErrorForBadStatusCode = function getErrorForBadStatusCode(jsonResponse) {
  if (checkIsApiError(jsonResponse)) {
    return {
      errors: jsonResponse.errors,
      source: 'api'
    };
  } else {
    return {
      errors: ['Responded with a status code outside the 2xx range, and the response body is not recognisable.'],
      source: 'decoding'
    };
  }
};
var DecodingError = function DecodingError(message) {
  this.message = message;
};

var CONTENT_TYPE_RESPONSE_HEADER = 'content-type';
var CONTENT_TYPE_JSON = 'application/json';

var checkIsJsonResponse = function checkIsJsonResponse(response) {
  var contentTypeHeader = response.headers.get(CONTENT_TYPE_RESPONSE_HEADER);
  return isDefined(contentTypeHeader) && (0,content_type__WEBPACK_IMPORTED_MODULE_0__.parse)(contentTypeHeader).type === CONTENT_TYPE_JSON;
};
/**
 * Note: restrict the type of JSON to `AnyJson` so that `any` doesn't leak downstream.
 */


var getJsonResponse = function getJsonResponse(response) {
  if (checkIsJsonResponse(response)) {
    return response.json()["catch"](function (_err) {
      throw new DecodingError('unable to parse JSON response.');
    });
  } else {
    throw new DecodingError('expected JSON response from server.');
  }
};

var handleFetchResponse = function handleFetchResponse(handleResponse) {
  return function (response) {
    return (response.ok ? handleResponse({
      response: response
    }).then(function (handledResponse) {
      return {
        type: 'success',
        status: response.status,
        response: handledResponse,
        originalResponse: response
      };
    }) : getJsonResponse(response).then(function (jsonResponse) {
      return _extends({
        type: 'error',
        status: response.status
      }, getErrorForBadStatusCode(jsonResponse), {
        originalResponse: response
      });
    }))["catch"](function (error) {
      /**
       * We want to separate expected decoding errors from unknown ones. We do so by throwing a custom
       * `DecodingError` whenever we encounter one within `handleFetchResponse` and catch them all
       * here. This allows us to easily handle all of these errors at once. Unexpected errors are not
       * caught, so that they bubble up and fail loudly.
       *
       * Note: Ideally we'd use an Either type, but this does the job without introducing dependencies
       * like `fp-ts`.
       */
      if (error instanceof DecodingError) {
        return {
          type: 'error',
          source: 'decoding',
          status: response.status,
          originalResponse: response,
          errors: [error.message]
        };
      } else {
        throw error;
      }
    });
  };
};
var castResponse = function castResponse() {
  return function (_ref) {
    var response = _ref.response;
    return getJsonResponse(response);
  };
};

var addQueryToUrl = function addQueryToUrl(query) {
  return function (url) {
    Object.keys(query).forEach(function (queryKey) {
      return url.searchParams.set(queryKey, query[queryKey].toString());
    });
  };
};

var addPathnameToUrl = function addPathnameToUrl(pathname) {
  return function (url) {
    // When there is no existing pathname, the value is `/`. Appending would give us a URL with two
    // forward slashes. This is why we replace the value in that scenario.
    if (url.pathname === '/') {
      url.pathname = pathname;
    } else {
      url.pathname += pathname;
    }
  };
};

var buildUrl = function buildUrl(_ref) {
  var pathname = _ref.pathname,
      query = _ref.query;
  return function (apiUrl) {
    var url = new URL(apiUrl);
    addPathnameToUrl(pathname)(url);
    addQueryToUrl(query)(url);
    return url.toString();
  };
};

var getQueryFromSearchParams = function getQueryFromSearchParams(searchParams) {
  var query = {};
  searchParams.forEach(function (value, key) {
    query[key] = value;
  });
  return query;
};

var parseQueryAndPathname = function parseQueryAndPathname(url) {
  var _URL = new URL(url),
      pathname = _URL.pathname,
      searchParams = _URL.searchParams;

  var query = getQueryFromSearchParams(searchParams);
  return {
    query: query,
    pathname: pathname === '/' ? undefined : pathname
  };
};

/**
 * helper used to type-check the arguments, and add default params for all requests
 */

var createRequestHandler = function createRequestHandler(fn) {
  return function (a, additionalFetchOptions) {
    if (additionalFetchOptions === void 0) {
      additionalFetchOptions = {};
    }

    var _fn = fn(a),
        headers = _fn.headers,
        query = _fn.query,
        baseReqParams = _objectWithoutPropertiesLoose(_fn, ["headers", "query"]);

    return _extends({}, baseReqParams, additionalFetchOptions, {
      query: query,
      headers: _extends({}, headers, additionalFetchOptions.headers)
    });
  };
};
var makeEndpoint = function makeEndpoint(endpoint) {
  return endpoint;
};
var initMakeRequest = function initMakeRequest(_ref) {
  var accessKey = _ref.accessKey,
      _ref$apiVersion = _ref.apiVersion,
      apiVersion = _ref$apiVersion === void 0 ? 'v1' : _ref$apiVersion,
      _ref$apiUrl = _ref.apiUrl,
      apiUrl = _ref$apiUrl === void 0 ? 'https://api.unsplash.com' : _ref$apiUrl,
      generalHeaders = _ref.headers,
      providedFetch = _ref.fetch,
      generalFetchOptions = _objectWithoutPropertiesLoose(_ref, ["accessKey", "apiVersion", "apiUrl", "headers", "fetch"]);

  return function (_ref2) {
    var handleResponse = _ref2.handleResponse,
        handleRequest = _ref2.handleRequest;
    return flow(handleRequest, function (_ref3) {
      var pathname = _ref3.pathname,
          query = _ref3.query,
          _ref3$method = _ref3.method,
          method = _ref3$method === void 0 ? 'GET' : _ref3$method,
          endpointHeaders = _ref3.headers,
          body = _ref3.body,
          signal = _ref3.signal;
      var url = buildUrl({
        pathname: pathname,
        query: query
      })(apiUrl);

      var fetchOptions = _extends({
        method: method,
        headers: _extends({}, generalHeaders, endpointHeaders, {
          'Accept-Version': apiVersion
        }, isDefined(accessKey) ? {
          Authorization: "Client-ID " + accessKey
        } : {}),
        body: body,
        signal: signal
      }, generalFetchOptions);

      var fetchToUse = providedFetch != null ? providedFetch : fetch;
      return fetchToUse(url, fetchOptions).then(handleFetchResponse(handleResponse));
    });
  };
};

var TOTAL_RESPONSE_HEADER = 'x-total';

var getTotalFromApiFeedResponse = function getTotalFromApiFeedResponse(response) {
  var totalsStr = response.headers.get(TOTAL_RESPONSE_HEADER);

  if (isDefined(totalsStr)) {
    var total = parseInt(totalsStr);

    if (Number.isInteger(total)) {
      return total;
    } else {
      throw new DecodingError("expected " + TOTAL_RESPONSE_HEADER + " header to be valid integer.");
    }
  } else {
    throw new DecodingError("expected " + TOTAL_RESPONSE_HEADER + " header to exist.");
  }
};

var handleFeedResponse = function handleFeedResponse() {
  return function (_ref) {
    var response = _ref.response;
    return castResponse()({
      response: response
    }).then(function (results) {
      return {
        results: results,
        total: getTotalFromApiFeedResponse(response)
      };
    });
  };
};

var getCollections = function getCollections(collectionIds) {
  return isDefined(collectionIds) ? {
    collections: collectionIds.join()
  } : {};
};
var getTopics = function getTopics(topicIds) {
  return isDefined(topicIds) ? {
    topics: topicIds.join()
  } : {};
};
var getFeedParams = function getFeedParams(_ref) {
  var page = _ref.page,
      perPage = _ref.perPage,
      orderBy = _ref.orderBy;
  return compactDefined({
    per_page: perPage,
    order_by: orderBy,
    page: page
  });
};

var COLLECTIONS_PATH_PREFIX = '/collections';
var getPhotos = /*#__PURE__*/function () {
  var getPathname = function getPathname(_ref) {
    var collectionId = _ref.collectionId;
    return COLLECTIONS_PATH_PREFIX + "/" + collectionId + "/photos";
  };

  return makeEndpoint({
    getPathname: getPathname,
    handleRequest: createRequestHandler(function (_ref2) {
      var collectionId = _ref2.collectionId,
          orientation = _ref2.orientation,
          paginationParams = _objectWithoutPropertiesLoose(_ref2, ["collectionId", "orientation"]);

      return {
        pathname: getPathname({
          collectionId: collectionId
        }),
        query: compactDefined(_extends({}, getFeedParams(paginationParams), {
          orientation: orientation
        }))
      };
    }),
    handleResponse: handleFeedResponse()
  });
}();
var get = /*#__PURE__*/function () {
  var getPathname = function getPathname(_ref3) {
    var collectionId = _ref3.collectionId;
    return COLLECTIONS_PATH_PREFIX + "/" + collectionId;
  };

  return makeEndpoint({
    getPathname: getPathname,
    handleRequest: createRequestHandler(function (_ref4) {
      var collectionId = _ref4.collectionId;
      return {
        pathname: getPathname({
          collectionId: collectionId
        }),
        query: {}
      };
    }),
    handleResponse: castResponse()
  });
}();
var list = /*#__PURE__*/function () {
  var getPathname = function getPathname() {
    return COLLECTIONS_PATH_PREFIX;
  };

  return makeEndpoint({
    getPathname: getPathname,
    handleRequest: createRequestHandler(function (paginationParams) {
      if (paginationParams === void 0) {
        paginationParams = {};
      }

      return {
        pathname: getPathname(),
        query: getFeedParams(paginationParams)
      };
    }),
    handleResponse: handleFeedResponse()
  });
}();
var getRelated = /*#__PURE__*/function () {
  var getPathname = function getPathname(_ref5) {
    var collectionId = _ref5.collectionId;
    return COLLECTIONS_PATH_PREFIX + "/" + collectionId + "/related";
  };

  return makeEndpoint({
    getPathname: getPathname,
    handleRequest: createRequestHandler(function (_ref6) {
      var collectionId = _ref6.collectionId;
      return {
        pathname: getPathname({
          collectionId: collectionId
        }),
        query: {}
      };
    }),
    handleResponse: castResponse()
  });
}();

var index = {
  __proto__: null,
  getPhotos: getPhotos,
  get: get,
  list: list,
  getRelated: getRelated
};

var PHOTOS_PATH_PREFIX = '/photos';
var list$1 = /*#__PURE__*/function () {
  var _getPathname = function getPathname() {
    return PHOTOS_PATH_PREFIX;
  };

  return makeEndpoint({
    // Wrapper uses type trick to allow 0 args
    getPathname: function getPathname(_params) {
      return _getPathname();
    },
    handleRequest: createRequestHandler(function (feedParams) {
      if (feedParams === void 0) {
        feedParams = {};
      }

      return {
        pathname: PHOTOS_PATH_PREFIX,
        query: compactDefined(getFeedParams(feedParams))
      };
    }),
    handleResponse: handleFeedResponse()
  });
}();
var get$1 = /*#__PURE__*/function () {
  var getPathname = function getPathname(_ref) {
    var photoId = _ref.photoId;
    return PHOTOS_PATH_PREFIX + "/" + photoId;
  };

  return makeEndpoint({
    getPathname: getPathname,
    handleRequest: createRequestHandler(function (_ref2) {
      var photoId = _ref2.photoId;
      return {
        pathname: getPathname({
          photoId: photoId
        }),
        query: {}
      };
    }),
    handleResponse: castResponse()
  });
}();
var getStats = /*#__PURE__*/function () {
  var getPathname = function getPathname(_ref3) {
    var photoId = _ref3.photoId;
    return PHOTOS_PATH_PREFIX + "/" + photoId + "/statistics";
  };

  return makeEndpoint({
    getPathname: getPathname,
    handleRequest: createRequestHandler(function (_ref4) {
      var photoId = _ref4.photoId;
      return {
        pathname: getPathname({
          photoId: photoId
        }),
        query: {}
      };
    }),
    handleResponse: castResponse()
  });
}();
var getRandom = /*#__PURE__*/function () {
  var getPathname = function getPathname() {
    return PHOTOS_PATH_PREFIX + "/random";
  };

  return makeEndpoint({
    getPathname: getPathname,
    handleRequest: createRequestHandler(function (_temp) {
      var _ref5 = _temp === void 0 ? {} : _temp,
          collectionIds = _ref5.collectionIds,
          contentFilter = _ref5.contentFilter,
          topicIds = _ref5.topicIds,
          queryParams = _objectWithoutPropertiesLoose(_ref5, ["collectionIds", "contentFilter", "topicIds"]);

      return {
        pathname: getPathname(),
        query: compactDefined(_extends({}, queryParams, {
          content_filter: contentFilter
        }, getCollections(collectionIds), getTopics(topicIds))),
        headers: {
          /**
           * Avoid response caching
           */
          'cache-control': 'no-cache'
        }
      };
    }),
    handleResponse: castResponse()
  });
}();
var trackDownload = {
  handleRequest: /*#__PURE__*/createRequestHandler(function (_ref6) {
    var downloadLocation = _ref6.downloadLocation;

    var _parseQueryAndPathnam = parseQueryAndPathname(downloadLocation),
        pathname = _parseQueryAndPathnam.pathname,
        query = _parseQueryAndPathnam.query;

    if (!isDefined(pathname)) {
      throw new Error('Could not parse pathname from url.');
    }

    return {
      pathname: pathname,
      query: compactDefined(query)
    };
  }),
  handleResponse: /*#__PURE__*/castResponse()
};

var index$1 = {
  __proto__: null,
  list: list$1,
  get: get$1,
  getStats: getStats,
  getRandom: getRandom,
  trackDownload: trackDownload
};

var SEARCH_PATH_PREFIX = "/search";
var getPhotos$1 = /*#__PURE__*/function () {
  var _getPathname = function getPathname() {
    return SEARCH_PATH_PREFIX + "/photos";
  };

  return makeEndpoint({
    // Wrapper uses type trick to allow 0 args
    getPathname: function getPathname(_params) {
      return _getPathname();
    },
    handleRequest: createRequestHandler(function (_ref) {
      var query = _ref.query,
          page = _ref.page,
          perPage = _ref.perPage,
          orderBy = _ref.orderBy,
          collectionIds = _ref.collectionIds,
          lang = _ref.lang,
          contentFilter = _ref.contentFilter,
          filters = _objectWithoutPropertiesLoose(_ref, ["query", "page", "perPage", "orderBy", "collectionIds", "lang", "contentFilter"]);

      return {
        pathname: _getPathname(),
        query: compactDefined(_extends({
          query: query,
          content_filter: contentFilter,
          lang: lang,
          order_by: orderBy
        }, getFeedParams({
          page: page,
          perPage: perPage
        }), getCollections(collectionIds), filters))
      };
    }),
    handleResponse: castResponse()
  });
}();
var getCollections$1 = /*#__PURE__*/function () {
  var _getPathname2 = function getPathname() {
    return SEARCH_PATH_PREFIX + "/collections";
  };

  return makeEndpoint({
    // Wrapper uses type trick to allow 0 args
    getPathname: function getPathname(_params) {
      return _getPathname2();
    },
    handleRequest: createRequestHandler(function (_ref2) {
      var query = _ref2.query,
          paginationParams = _objectWithoutPropertiesLoose(_ref2, ["query"]);

      return {
        pathname: _getPathname2(),
        query: _extends({
          query: query
        }, getFeedParams(paginationParams))
      };
    }),
    handleResponse: castResponse()
  });
}();
var getUsers = /*#__PURE__*/function () {
  var _getPathname3 = function getPathname() {
    return SEARCH_PATH_PREFIX + "/users";
  };

  return makeEndpoint({
    // Wrapper uses type trick to allow 0 args
    getPathname: function getPathname(_params) {
      return _getPathname3();
    },
    handleRequest: createRequestHandler(function (_ref3) {
      var query = _ref3.query,
          paginationParams = _objectWithoutPropertiesLoose(_ref3, ["query"]);

      return {
        pathname: _getPathname3(),
        query: _extends({
          query: query
        }, getFeedParams(paginationParams))
      };
    }),
    handleResponse: castResponse()
  });
}();

var index$2 = {
  __proto__: null,
  getPhotos: getPhotos$1,
  getCollections: getCollections$1,
  getUsers: getUsers
};

var USERS_PATH_PREFIX = '/users';
var get$2 = /*#__PURE__*/function () {
  var getPathname = function getPathname(_ref) {
    var username = _ref.username;
    return USERS_PATH_PREFIX + "/" + username;
  };

  return makeEndpoint({
    getPathname: getPathname,
    handleRequest: createRequestHandler(function (_ref2) {
      var username = _ref2.username;
      return {
        pathname: getPathname({
          username: username
        }),
        query: {}
      };
    }),
    handleResponse: castResponse()
  });
}();
var getPhotos$2 = /*#__PURE__*/function () {
  var getPathname = function getPathname(_ref3) {
    var username = _ref3.username;
    return USERS_PATH_PREFIX + "/" + username + "/photos";
  };

  return makeEndpoint({
    getPathname: getPathname,
    handleRequest: createRequestHandler(function (_ref4) {
      var username = _ref4.username,
          stats = _ref4.stats,
          orientation = _ref4.orientation,
          paginationParams = _objectWithoutPropertiesLoose(_ref4, ["username", "stats", "orientation"]);

      return {
        pathname: getPathname({
          username: username
        }),
        query: compactDefined(_extends({}, getFeedParams(paginationParams), {
          orientation: orientation,
          stats: stats
        }))
      };
    }),
    handleResponse: handleFeedResponse()
  });
}();
var getLikes = /*#__PURE__*/function () {
  var getPathname = function getPathname(_ref5) {
    var username = _ref5.username;
    return USERS_PATH_PREFIX + "/" + username + "/likes";
  };

  return makeEndpoint({
    getPathname: getPathname,
    handleRequest: createRequestHandler(function (_ref6) {
      var username = _ref6.username,
          orientation = _ref6.orientation,
          paginationParams = _objectWithoutPropertiesLoose(_ref6, ["username", "orientation"]);

      return {
        pathname: getPathname({
          username: username
        }),
        query: compactDefined(_extends({}, getFeedParams(paginationParams), {
          orientation: orientation
        }))
      };
    }),
    handleResponse: handleFeedResponse()
  });
}();
var getCollections$2 = /*#__PURE__*/function () {
  var getPathname = function getPathname(_ref7) {
    var username = _ref7.username;
    return USERS_PATH_PREFIX + "/" + username + "/collections";
  };

  return makeEndpoint({
    getPathname: getPathname,
    handleRequest: createRequestHandler(function (_ref8) {
      var username = _ref8.username,
          paginationParams = _objectWithoutPropertiesLoose(_ref8, ["username"]);

      return {
        pathname: getPathname({
          username: username
        }),
        query: getFeedParams(paginationParams)
      };
    }),
    handleResponse: handleFeedResponse()
  });
}();

var index$3 = {
  __proto__: null,
  get: get$2,
  getPhotos: getPhotos$2,
  getLikes: getLikes,
  getCollections: getCollections$2
};

var BASE_TOPIC_PATH = '/topics';

var getTopicPath = function getTopicPath(_ref) {
  var topicIdOrSlug = _ref.topicIdOrSlug;
  return BASE_TOPIC_PATH + "/" + topicIdOrSlug;
};

var list$2 = /*#__PURE__*/makeEndpoint({
  getPathname: getTopicPath,
  handleRequest: function handleRequest(_ref2) {
    var page = _ref2.page,
        perPage = _ref2.perPage,
        orderBy = _ref2.orderBy,
        topicIdsOrSlugs = _ref2.topicIdsOrSlugs;
    return {
      pathname: BASE_TOPIC_PATH,
      query: compactDefined(_extends({}, getFeedParams({
        page: page,
        perPage: perPage
      }), {
        ids: topicIdsOrSlugs == null ? void 0 : topicIdsOrSlugs.join(','),
        order_by: orderBy
      }))
    };
  },
  handleResponse: /*#__PURE__*/handleFeedResponse()
});
var get$3 = /*#__PURE__*/makeEndpoint({
  getPathname: getTopicPath,
  handleRequest: function handleRequest(_ref3) {
    var topicIdOrSlug = _ref3.topicIdOrSlug;
    return {
      pathname: getTopicPath({
        topicIdOrSlug: topicIdOrSlug
      }),
      query: {}
    };
  },
  handleResponse: /*#__PURE__*/castResponse()
});
var getPhotos$3 = /*#__PURE__*/function () {
  var getPathname = /*#__PURE__*/flow(getTopicPath, function (topicPath) {
    return topicPath + "/photos";
  });
  return makeEndpoint({
    getPathname: getPathname,
    handleRequest: function handleRequest(_ref4) {
      var topicIdOrSlug = _ref4.topicIdOrSlug,
          orientation = _ref4.orientation,
          feedParams = _objectWithoutPropertiesLoose(_ref4, ["topicIdOrSlug", "orientation"]);

      return {
        pathname: getPathname({
          topicIdOrSlug: topicIdOrSlug
        }),
        query: compactDefined(_extends({}, getFeedParams(feedParams), {
          orientation: orientation
        }))
      };
    },
    handleResponse: handleFeedResponse()
  });
}();

var index$4 = {
  __proto__: null,
  list: list$2,
  get: get$3,
  getPhotos: getPhotos$3
};

var trackNonHotLinkedPhotoView = function trackNonHotLinkedPhotoView(_ref) {
  var appId = _ref.appId;
  return function (_ref2) {
    var photoId = _ref2.photoId;
    var ids = !Array.isArray(photoId) ? [photoId] : photoId;

    if (ids.length > 20) {
      throw new Error('You cannot track more than 20 photos at once. Please try again with fewer photos.');
    }

    return fetch("views.unsplash.com/v?photo_id=" + ids.join() + "&app_id=" + appId);
  };
};



var internals = {
  __proto__: null,
  collections: index,
  photos: index$1,
  search: index$2,
  users: index$3,
  topics: index$4,
  trackNonHotLinkedPhotoView: trackNonHotLinkedPhotoView
};

var Language;

(function (Language) {
  Language["Afrikaans"] = "af";
  Language["Amharic"] = "am";
  Language["Arabic"] = "ar";
  Language["Azerbaijani"] = "az";
  Language["Belarusian"] = "be";
  Language["Bulgarian"] = "bg";
  Language["Bengali"] = "bn";
  Language["Bosnian"] = "bs";
  Language["Catalan"] = "ca";
  Language["Cebuano"] = "ceb";
  Language["Corsican"] = "co";
  Language["Czech"] = "cs";
  Language["Welsh"] = "cy";
  Language["Danish"] = "da";
  Language["German"] = "de";
  Language["Greek"] = "el";
  Language["English"] = "en";
  Language["Esperanto"] = "eo";
  Language["Spanish"] = "es";
  Language["Estonian"] = "et";
  Language["Basque"] = "eu";
  Language["Persian"] = "fa";
  Language["Finnish"] = "fi";
  Language["French"] = "fr";
  Language["Frisian"] = "fy";
  Language["Irish"] = "ga";
  Language["ScotsGaelic"] = "gd";
  Language["Galician"] = "gl";
  Language["Gujarati"] = "gu";
  Language["Hausa"] = "ha";
  Language["Hawaiian"] = "haw";
  Language["Hindi"] = "hi";
  Language["Hmong"] = "hmn";
  Language["Croatian"] = "hr";
  Language["HaitianCreole"] = "ht";
  Language["Hungarian"] = "hu";
  Language["Armenian"] = "hy";
  Language["Indonesian"] = "id";
  Language["Igbo"] = "ig";
  Language["Icelandic"] = "is";
  Language["Italian"] = "it";
  Language["Hebrew"] = "iw";
  Language["Japanese"] = "ja";
  Language["Javanese"] = "jw";
  Language["Georgian"] = "ka";
  Language["Kazakh"] = "kk";
  Language["Khmer"] = "km";
  Language["Kannada"] = "kn";
  Language["Korean"] = "ko";
  Language["Kurdish"] = "ku";
  Language["Kyrgyz"] = "ky";
  Language["Latin"] = "la";
  Language["Luxembourgish"] = "lb";
  Language["Lao"] = "lo";
  Language["Lithuanian"] = "lt";
  Language["Latvian"] = "lv";
  Language["Malagasy"] = "mg";
  Language["Maori"] = "mi";
  Language["Macedonian"] = "mk";
  Language["Malayalam"] = "ml";
  Language["Mongolian"] = "mn";
  Language["Marathi"] = "mr";
  Language["Malay"] = "ms";
  Language["Maltese"] = "mt";
  Language["Myanmar"] = "my";
  Language["Nepali"] = "ne";
  Language["Dutch"] = "nl";
  Language["Norwegian"] = "no";
  Language["Nyanja"] = "ny";
  Language["Oriya"] = "or";
  Language["Punjabi"] = "pa";
  Language["Polish"] = "pl";
  Language["Pashto"] = "ps";
  Language["Portuguese"] = "pt";
  Language["Romanian"] = "ro";
  Language["Russian"] = "ru";
  Language["Kinyarwanda"] = "rw";
  Language["Sindhi"] = "sd";
  Language["Sinhala"] = "si";
  Language["Slovak"] = "sk";
  Language["Slovenian"] = "sl";
  Language["Samoan"] = "sm";
  Language["Shona"] = "sn";
  Language["Somali"] = "so";
  Language["Albanian"] = "sq";
  Language["Serbian"] = "sr";
  Language["Sesotho"] = "st";
  Language["Sundanese"] = "su";
  Language["Swedish"] = "sv";
  Language["Swahili"] = "sw";
  Language["Tamil"] = "ta";
  Language["Telugu"] = "te";
  Language["Tajik"] = "tg";
  Language["Thai"] = "th";
  Language["Turkmen"] = "tk";
  Language["Filipino"] = "tl";
  Language["Turkish"] = "tr";
  Language["Tatar"] = "tt";
  Language["Uighur"] = "ug";
  Language["Ukrainian"] = "uk";
  Language["Urdu"] = "ur";
  Language["Uzbek"] = "uz";
  Language["Vietnamese"] = "vi";
  Language["Xhosa"] = "xh";
  Language["Yiddish"] = "yi";
  Language["Yoruba"] = "yo";
  Language["ChineseSimplified"] = "zh";
  Language["ChineseTraditional"] = "zh-TW";
  Language["Zulu"] = "zu";
})(Language || (Language = {}));

var OrderBy;

(function (OrderBy) {
  OrderBy["LATEST"] = "latest";
  OrderBy["POPULAR"] = "popular";
  OrderBy["VIEWS"] = "views";
  OrderBy["DOWNLOADS"] = "downloads";
  OrderBy["OLDEST"] = "oldest";
})(OrderBy || (OrderBy = {}));

var createApi = /*#__PURE__*/flow(initMakeRequest, function (makeRequest) {
  return {
    photos: {
      get: makeRequest(get$1),
      list: makeRequest(list$1),
      getStats: makeRequest(getStats),
      getRandom: makeRequest(getRandom),
      trackDownload: makeRequest(trackDownload)
    },
    users: {
      getPhotos: makeRequest(getPhotos$2),
      getCollections: makeRequest(getCollections$2),
      getLikes: makeRequest(getLikes),
      get: makeRequest(get$2)
    },
    search: {
      getCollections: makeRequest(getCollections$1),
      getPhotos: makeRequest(getPhotos$1),
      getUsers: makeRequest(getUsers)
    },
    collections: {
      getPhotos: makeRequest(getPhotos),
      get: makeRequest(get),
      list: makeRequest(list),
      getRelated: makeRequest(getRelated)
    },
    topics: {
      list: makeRequest(list$2),
      get: makeRequest(get$3),
      getPhotos: makeRequest(getPhotos$3)
    }
  };
});


//# sourceMappingURL=unsplash-js.esm.js.map


/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
Object.defineProperty(exports, "NIL", ({
  enumerable: true,
  get: function get() {
    return _nil.default;
  }
}));
Object.defineProperty(exports, "parse", ({
  enumerable: true,
  get: function get() {
    return _parse.default;
  }
}));
Object.defineProperty(exports, "stringify", ({
  enumerable: true,
  get: function get() {
    return _stringify.default;
  }
}));
Object.defineProperty(exports, "v1", ({
  enumerable: true,
  get: function get() {
    return _v.default;
  }
}));
Object.defineProperty(exports, "v3", ({
  enumerable: true,
  get: function get() {
    return _v2.default;
  }
}));
Object.defineProperty(exports, "v4", ({
  enumerable: true,
  get: function get() {
    return _v3.default;
  }
}));
Object.defineProperty(exports, "v5", ({
  enumerable: true,
  get: function get() {
    return _v4.default;
  }
}));
Object.defineProperty(exports, "validate", ({
  enumerable: true,
  get: function get() {
    return _validate.default;
  }
}));
Object.defineProperty(exports, "version", ({
  enumerable: true,
  get: function get() {
    return _version.default;
  }
}));

var _v = _interopRequireDefault(__webpack_require__(/*! ./v1.js */ "./node_modules/uuid/dist/commonjs-browser/v1.js"));

var _v2 = _interopRequireDefault(__webpack_require__(/*! ./v3.js */ "./node_modules/uuid/dist/commonjs-browser/v3.js"));

var _v3 = _interopRequireDefault(__webpack_require__(/*! ./v4.js */ "./node_modules/uuid/dist/commonjs-browser/v4.js"));

var _v4 = _interopRequireDefault(__webpack_require__(/*! ./v5.js */ "./node_modules/uuid/dist/commonjs-browser/v5.js"));

var _nil = _interopRequireDefault(__webpack_require__(/*! ./nil.js */ "./node_modules/uuid/dist/commonjs-browser/nil.js"));

var _version = _interopRequireDefault(__webpack_require__(/*! ./version.js */ "./node_modules/uuid/dist/commonjs-browser/version.js"));

var _validate = _interopRequireDefault(__webpack_require__(/*! ./validate.js */ "./node_modules/uuid/dist/commonjs-browser/validate.js"));

var _stringify = _interopRequireDefault(__webpack_require__(/*! ./stringify.js */ "./node_modules/uuid/dist/commonjs-browser/stringify.js"));

var _parse = _interopRequireDefault(__webpack_require__(/*! ./parse.js */ "./node_modules/uuid/dist/commonjs-browser/parse.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/md5.js":
/*!********************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/md5.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

/*
 * Browser-compatible JavaScript MD5
 *
 * Modification of JavaScript MD5
 * https://github.com/blueimp/JavaScript-MD5
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * https://opensource.org/licenses/MIT
 *
 * Based on
 * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message
 * Digest Algorithm, as defined in RFC 1321.
 * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for more info.
 */
function md5(bytes) {
  if (typeof bytes === 'string') {
    const msg = unescape(encodeURIComponent(bytes)); // UTF8 escape

    bytes = new Uint8Array(msg.length);

    for (let i = 0; i < msg.length; ++i) {
      bytes[i] = msg.charCodeAt(i);
    }
  }

  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));
}
/*
 * Convert an array of little-endian words to an array of bytes
 */


function md5ToHexEncodedArray(input) {
  const output = [];
  const length32 = input.length * 32;
  const hexTab = '0123456789abcdef';

  for (let i = 0; i < length32; i += 8) {
    const x = input[i >> 5] >>> i % 32 & 0xff;
    const hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);
    output.push(hex);
  }

  return output;
}
/**
 * Calculate output length with padding and bit length
 */


function getOutputLength(inputLength8) {
  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;
}
/*
 * Calculate the MD5 of an array of little-endian words, and a bit length.
 */


function wordsToMd5(x, len) {
  /* append padding */
  x[len >> 5] |= 0x80 << len % 32;
  x[getOutputLength(len) - 1] = len;
  let a = 1732584193;
  let b = -271733879;
  let c = -1732584194;
  let d = 271733878;

  for (let i = 0; i < x.length; i += 16) {
    const olda = a;
    const oldb = b;
    const oldc = c;
    const oldd = d;
    a = md5ff(a, b, c, d, x[i], 7, -680876936);
    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);
    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);
    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);
    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);
    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);
    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);
    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);
    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);
    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);
    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);
    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);
    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);
    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);
    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);
    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);
    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);
    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);
    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);
    b = md5gg(b, c, d, a, x[i], 20, -373897302);
    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);
    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);
    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);
    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);
    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);
    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);
    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);
    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);
    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);
    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);
    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);
    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);
    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);
    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);
    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);
    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);
    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);
    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);
    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);
    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);
    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);
    d = md5hh(d, a, b, c, x[i], 11, -358537222);
    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);
    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);
    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);
    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);
    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);
    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);
    a = md5ii(a, b, c, d, x[i], 6, -198630844);
    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);
    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);
    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);
    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);
    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);
    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);
    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);
    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);
    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);
    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);
    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);
    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);
    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);
    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);
    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);
    a = safeAdd(a, olda);
    b = safeAdd(b, oldb);
    c = safeAdd(c, oldc);
    d = safeAdd(d, oldd);
  }

  return [a, b, c, d];
}
/*
 * Convert an array bytes to an array of little-endian words
 * Characters >255 have their high-byte silently ignored.
 */


function bytesToWords(input) {
  if (input.length === 0) {
    return [];
  }

  const length8 = input.length * 8;
  const output = new Uint32Array(getOutputLength(length8));

  for (let i = 0; i < length8; i += 8) {
    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;
  }

  return output;
}
/*
 * Add integers, wrapping at 2^32. This uses 16-bit operations internally
 * to work around bugs in some JS interpreters.
 */


function safeAdd(x, y) {
  const lsw = (x & 0xffff) + (y & 0xffff);
  const msw = (x >> 16) + (y >> 16) + (lsw >> 16);
  return msw << 16 | lsw & 0xffff;
}
/*
 * Bitwise rotate a 32-bit number to the left.
 */


function bitRotateLeft(num, cnt) {
  return num << cnt | num >>> 32 - cnt;
}
/*
 * These functions implement the four basic operations the algorithm uses.
 */


function md5cmn(q, a, b, x, s, t) {
  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);
}

function md5ff(a, b, c, d, x, s, t) {
  return md5cmn(b & c | ~b & d, a, b, x, s, t);
}

function md5gg(a, b, c, d, x, s, t) {
  return md5cmn(b & d | c & ~d, a, b, x, s, t);
}

function md5hh(a, b, c, d, x, s, t) {
  return md5cmn(b ^ c ^ d, a, b, x, s, t);
}

function md5ii(a, b, c, d, x, s, t) {
  return md5cmn(c ^ (b | ~d), a, b, x, s, t);
}

var _default = md5;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/native.js":
/*!***********************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/native.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;
const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);
var _default = {
  randomUUID
};
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/nil.js":
/*!********************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/nil.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;
var _default = '00000000-0000-0000-0000-000000000000';
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/parse.js":
/*!**********************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/parse.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _validate = _interopRequireDefault(__webpack_require__(/*! ./validate.js */ "./node_modules/uuid/dist/commonjs-browser/validate.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function parse(uuid) {
  if (!(0, _validate.default)(uuid)) {
    throw TypeError('Invalid UUID');
  }

  let v;
  const arr = new Uint8Array(16); // Parse ########-....-....-....-............

  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;
  arr[1] = v >>> 16 & 0xff;
  arr[2] = v >>> 8 & 0xff;
  arr[3] = v & 0xff; // Parse ........-####-....-....-............

  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;
  arr[5] = v & 0xff; // Parse ........-....-####-....-............

  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;
  arr[7] = v & 0xff; // Parse ........-....-....-####-............

  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;
  arr[9] = v & 0xff; // Parse ........-....-....-....-############
  // (Use "/" to avoid 32-bit truncation when bit-shifting high-order bytes)

  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;
  arr[11] = v / 0x100000000 & 0xff;
  arr[12] = v >>> 24 & 0xff;
  arr[13] = v >>> 16 & 0xff;
  arr[14] = v >>> 8 & 0xff;
  arr[15] = v & 0xff;
  return arr;
}

var _default = parse;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/regex.js":
/*!**********************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/regex.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;
var _default = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/rng.js":
/*!********************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/rng.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = rng;
// Unique ID creation requires a high quality random # generator. In the browser we therefore
// require the crypto API and do not support built-in fallback to lower quality random number
// generators (like Math.random()).
let getRandomValues;
const rnds8 = new Uint8Array(16);

function rng() {
  // lazy load so that environments that need to polyfill have a chance to do so
  if (!getRandomValues) {
    // getRandomValues needs to be invoked in a context where "this" is a Crypto implementation.
    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);

    if (!getRandomValues) {
      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');
    }
  }

  return getRandomValues(rnds8);
}

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/sha1.js":
/*!*********************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/sha1.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

// Adapted from Chris Veness' SHA1 code at
// http://www.movable-type.co.uk/scripts/sha1.html
function f(s, x, y, z) {
  switch (s) {
    case 0:
      return x & y ^ ~x & z;

    case 1:
      return x ^ y ^ z;

    case 2:
      return x & y ^ x & z ^ y & z;

    case 3:
      return x ^ y ^ z;
  }
}

function ROTL(x, n) {
  return x << n | x >>> 32 - n;
}

function sha1(bytes) {
  const K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];
  const H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];

  if (typeof bytes === 'string') {
    const msg = unescape(encodeURIComponent(bytes)); // UTF8 escape

    bytes = [];

    for (let i = 0; i < msg.length; ++i) {
      bytes.push(msg.charCodeAt(i));
    }
  } else if (!Array.isArray(bytes)) {
    // Convert Array-like to Array
    bytes = Array.prototype.slice.call(bytes);
  }

  bytes.push(0x80);
  const l = bytes.length / 4 + 2;
  const N = Math.ceil(l / 16);
  const M = new Array(N);

  for (let i = 0; i < N; ++i) {
    const arr = new Uint32Array(16);

    for (let j = 0; j < 16; ++j) {
      arr[j] = bytes[i * 64 + j * 4] << 24 | bytes[i * 64 + j * 4 + 1] << 16 | bytes[i * 64 + j * 4 + 2] << 8 | bytes[i * 64 + j * 4 + 3];
    }

    M[i] = arr;
  }

  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);
  M[N - 1][14] = Math.floor(M[N - 1][14]);
  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;

  for (let i = 0; i < N; ++i) {
    const W = new Uint32Array(80);

    for (let t = 0; t < 16; ++t) {
      W[t] = M[i][t];
    }

    for (let t = 16; t < 80; ++t) {
      W[t] = ROTL(W[t - 3] ^ W[t - 8] ^ W[t - 14] ^ W[t - 16], 1);
    }

    let a = H[0];
    let b = H[1];
    let c = H[2];
    let d = H[3];
    let e = H[4];

    for (let t = 0; t < 80; ++t) {
      const s = Math.floor(t / 20);
      const T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[t] >>> 0;
      e = d;
      d = c;
      c = ROTL(b, 30) >>> 0;
      b = a;
      a = T;
    }

    H[0] = H[0] + a >>> 0;
    H[1] = H[1] + b >>> 0;
    H[2] = H[2] + c >>> 0;
    H[3] = H[3] + d >>> 0;
    H[4] = H[4] + e >>> 0;
  }

  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];
}

var _default = sha1;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/stringify.js":
/*!**************************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/stringify.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;
exports.unsafeStringify = unsafeStringify;

var _validate = _interopRequireDefault(__webpack_require__(/*! ./validate.js */ "./node_modules/uuid/dist/commonjs-browser/validate.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Convert array of 16 byte values to UUID string format of the form:
 * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
 */
const byteToHex = [];

for (let i = 0; i < 256; ++i) {
  byteToHex.push((i + 0x100).toString(16).slice(1));
}

function unsafeStringify(arr, offset = 0) {
  // Note: Be careful editing this code!  It's been tuned for performance
  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434
  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();
}

function stringify(arr, offset = 0) {
  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one
  // of the following:
  // - One or more input array values don't map to a hex octet (leading to
  // "undefined" in the uuid)
  // - Invalid input values for the RFC `version` or `variant` fields

  if (!(0, _validate.default)(uuid)) {
    throw TypeError('Stringified UUID is invalid');
  }

  return uuid;
}

var _default = stringify;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/v1.js":
/*!*******************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/v1.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _rng = _interopRequireDefault(__webpack_require__(/*! ./rng.js */ "./node_modules/uuid/dist/commonjs-browser/rng.js"));

var _stringify = __webpack_require__(/*! ./stringify.js */ "./node_modules/uuid/dist/commonjs-browser/stringify.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// **`v1()` - Generate time-based UUID**
//
// Inspired by https://github.com/LiosK/UUID.js
// and http://docs.python.org/library/uuid.html
let _nodeId;

let _clockseq; // Previous uuid creation time


let _lastMSecs = 0;
let _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details

function v1(options, buf, offset) {
  let i = buf && offset || 0;
  const b = buf || new Array(16);
  options = options || {};
  let node = options.node || _nodeId;
  let clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not
  // specified.  We do this lazily to minimize issues related to insufficient
  // system entropy.  See #189

  if (node == null || clockseq == null) {
    const seedBytes = options.random || (options.rng || _rng.default)();

    if (node == null) {
      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)
      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];
    }

    if (clockseq == null) {
      // Per 4.2.2, randomize (14 bit) clockseq
      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;
    }
  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,
  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so
  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'
  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.


  let msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock
  // cycle to simulate higher resolution clock

  let nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)

  const dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression

  if (dt < 0 && options.clockseq === undefined) {
    clockseq = clockseq + 1 & 0x3fff;
  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new
  // time interval


  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {
    nsecs = 0;
  } // Per 4.2.1.2 Throw error if too many uuids are requested


  if (nsecs >= 10000) {
    throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");
  }

  _lastMSecs = msecs;
  _lastNSecs = nsecs;
  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch

  msecs += 12219292800000; // `time_low`

  const tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;
  b[i++] = tl >>> 24 & 0xff;
  b[i++] = tl >>> 16 & 0xff;
  b[i++] = tl >>> 8 & 0xff;
  b[i++] = tl & 0xff; // `time_mid`

  const tmh = msecs / 0x100000000 * 10000 & 0xfffffff;
  b[i++] = tmh >>> 8 & 0xff;
  b[i++] = tmh & 0xff; // `time_high_and_version`

  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version

  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)

  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`

  b[i++] = clockseq & 0xff; // `node`

  for (let n = 0; n < 6; ++n) {
    b[i + n] = node[n];
  }

  return buf || (0, _stringify.unsafeStringify)(b);
}

var _default = v1;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/v3.js":
/*!*******************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/v3.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _v = _interopRequireDefault(__webpack_require__(/*! ./v35.js */ "./node_modules/uuid/dist/commonjs-browser/v35.js"));

var _md = _interopRequireDefault(__webpack_require__(/*! ./md5.js */ "./node_modules/uuid/dist/commonjs-browser/md5.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const v3 = (0, _v.default)('v3', 0x30, _md.default);
var _default = v3;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/v35.js":
/*!********************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/v35.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.URL = exports.DNS = void 0;
exports["default"] = v35;

var _stringify = __webpack_require__(/*! ./stringify.js */ "./node_modules/uuid/dist/commonjs-browser/stringify.js");

var _parse = _interopRequireDefault(__webpack_require__(/*! ./parse.js */ "./node_modules/uuid/dist/commonjs-browser/parse.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function stringToBytes(str) {
  str = unescape(encodeURIComponent(str)); // UTF8 escape

  const bytes = [];

  for (let i = 0; i < str.length; ++i) {
    bytes.push(str.charCodeAt(i));
  }

  return bytes;
}

const DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';
exports.DNS = DNS;
const URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';
exports.URL = URL;

function v35(name, version, hashfunc) {
  function generateUUID(value, namespace, buf, offset) {
    var _namespace;

    if (typeof value === 'string') {
      value = stringToBytes(value);
    }

    if (typeof namespace === 'string') {
      namespace = (0, _parse.default)(namespace);
    }

    if (((_namespace = namespace) === null || _namespace === void 0 ? void 0 : _namespace.length) !== 16) {
      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');
    } // Compute hash of namespace and value, Per 4.3
    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =
    // hashfunc([...namespace, ... value])`


    let bytes = new Uint8Array(16 + value.length);
    bytes.set(namespace);
    bytes.set(value, namespace.length);
    bytes = hashfunc(bytes);
    bytes[6] = bytes[6] & 0x0f | version;
    bytes[8] = bytes[8] & 0x3f | 0x80;

    if (buf) {
      offset = offset || 0;

      for (let i = 0; i < 16; ++i) {
        buf[offset + i] = bytes[i];
      }

      return buf;
    }

    return (0, _stringify.unsafeStringify)(bytes);
  } // Function#name is not settable on some platforms (#270)


  try {
    generateUUID.name = name; // eslint-disable-next-line no-empty
  } catch (err) {} // For CommonJS default export support


  generateUUID.DNS = DNS;
  generateUUID.URL = URL;
  return generateUUID;
}

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/v4.js":
/*!*******************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/v4.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _native = _interopRequireDefault(__webpack_require__(/*! ./native.js */ "./node_modules/uuid/dist/commonjs-browser/native.js"));

var _rng = _interopRequireDefault(__webpack_require__(/*! ./rng.js */ "./node_modules/uuid/dist/commonjs-browser/rng.js"));

var _stringify = __webpack_require__(/*! ./stringify.js */ "./node_modules/uuid/dist/commonjs-browser/stringify.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function v4(options, buf, offset) {
  if (_native.default.randomUUID && !buf && !options) {
    return _native.default.randomUUID();
  }

  options = options || {};

  const rnds = options.random || (options.rng || _rng.default)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`


  rnds[6] = rnds[6] & 0x0f | 0x40;
  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided

  if (buf) {
    offset = offset || 0;

    for (let i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }

    return buf;
  }

  return (0, _stringify.unsafeStringify)(rnds);
}

var _default = v4;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/v5.js":
/*!*******************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/v5.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _v = _interopRequireDefault(__webpack_require__(/*! ./v35.js */ "./node_modules/uuid/dist/commonjs-browser/v35.js"));

var _sha = _interopRequireDefault(__webpack_require__(/*! ./sha1.js */ "./node_modules/uuid/dist/commonjs-browser/sha1.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const v5 = (0, _v.default)('v5', 0x50, _sha.default);
var _default = v5;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/validate.js":
/*!*************************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/validate.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _regex = _interopRequireDefault(__webpack_require__(/*! ./regex.js */ "./node_modules/uuid/dist/commonjs-browser/regex.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function validate(uuid) {
  return typeof uuid === 'string' && _regex.default.test(uuid);
}

var _default = validate;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/commonjs-browser/version.js":
/*!************************************************************!*\
  !*** ./node_modules/uuid/dist/commonjs-browser/version.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _validate = _interopRequireDefault(__webpack_require__(/*! ./validate.js */ "./node_modules/uuid/dist/commonjs-browser/validate.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function version(uuid) {
  if (!(0, _validate.default)(uuid)) {
    throw TypeError('Invalid UUID');
  }

  return parseInt(uuid.slice(14, 15), 16);
}

var _default = version;
exports["default"] = _default;

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/native.js":
/*!******************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/native.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  randomUUID
});

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/regex.js":
/*!*****************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/regex.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/rng.js":
/*!***************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/rng.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ rng)
/* harmony export */ });
// Unique ID creation requires a high quality random # generator. In the browser we therefore
// require the crypto API and do not support built-in fallback to lower quality random number
// generators (like Math.random()).
let getRandomValues;
const rnds8 = new Uint8Array(16);
function rng() {
  // lazy load so that environments that need to polyfill have a chance to do so
  if (!getRandomValues) {
    // getRandomValues needs to be invoked in a context where "this" is a Crypto implementation.
    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);

    if (!getRandomValues) {
      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');
    }
  }

  return getRandomValues(rnds8);
}

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/stringify.js":
/*!*********************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/stringify.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "unsafeStringify": () => (/* binding */ unsafeStringify)
/* harmony export */ });
/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ "./node_modules/uuid/dist/esm-browser/validate.js");

/**
 * Convert array of 16 byte values to UUID string format of the form:
 * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
 */

const byteToHex = [];

for (let i = 0; i < 256; ++i) {
  byteToHex.push((i + 0x100).toString(16).slice(1));
}

function unsafeStringify(arr, offset = 0) {
  // Note: Be careful editing this code!  It's been tuned for performance
  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434
  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();
}

function stringify(arr, offset = 0) {
  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one
  // of the following:
  // - One or more input array values don't map to a hex octet (leading to
  // "undefined" in the uuid)
  // - Invalid input values for the RFC `version` or `variant` fields

  if (!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__["default"])(uuid)) {
    throw TypeError('Stringified UUID is invalid');
  }

  return uuid;
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (stringify);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/v4.js":
/*!**************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/v4.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _native_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./native.js */ "./node_modules/uuid/dist/esm-browser/native.js");
/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rng.js */ "./node_modules/uuid/dist/esm-browser/rng.js");
/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stringify.js */ "./node_modules/uuid/dist/esm-browser/stringify.js");




function v4(options, buf, offset) {
  if (_native_js__WEBPACK_IMPORTED_MODULE_0__["default"].randomUUID && !buf && !options) {
    return _native_js__WEBPACK_IMPORTED_MODULE_0__["default"].randomUUID();
  }

  options = options || {};
  const rnds = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_1__["default"])(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`

  rnds[6] = rnds[6] & 0x0f | 0x40;
  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided

  if (buf) {
    offset = offset || 0;

    for (let i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }

    return buf;
  }

  return (0,_stringify_js__WEBPACK_IMPORTED_MODULE_2__.unsafeStringify)(rnds);
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (v4);

/***/ }),

/***/ "./node_modules/uuid/dist/esm-browser/validate.js":
/*!********************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/validate.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _regex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regex.js */ "./node_modules/uuid/dist/esm-browser/regex.js");


function validate(uuid) {
  return typeof uuid === 'string' && _regex_js__WEBPACK_IMPORTED_MODULE_0__["default"].test(uuid);
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (validate);

/***/ }),

/***/ "./node_modules/webextension-polyfill/dist/browser-polyfill.js":
/*!*********************************************************************!*\
  !*** ./node_modules/webextension-polyfill/dist/browser-polyfill.js ***!
  \*********************************************************************/
/***/ (function(module, exports) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {
  if (true) {
    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [module], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
		__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
		(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
		__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  } else { var mod; }
})(typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : this, function (module) {
  /* webextension-polyfill - v0.10.0 - Fri Aug 12 2022 19:42:44 */

  /* -*- Mode: indent-tabs-mode: nil; js-indent-level: 2 -*- */

  /* vim: set sts=2 sw=2 et tw=80: */

  /* This Source Code Form is subject to the terms of the Mozilla Public
   * License, v. 2.0. If a copy of the MPL was not distributed with this
   * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
  "use strict";

  if (!globalThis.chrome?.runtime?.id) {
    throw new Error("This script should only be loaded in a browser extension.");
  }

  if (typeof globalThis.browser === "undefined" || Object.getPrototypeOf(globalThis.browser) !== Object.prototype) {
    const CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE = "The message port closed before a response was received."; // Wrapping the bulk of this polyfill in a one-time-use function is a minor
    // optimization for Firefox. Since Spidermonkey does not fully parse the
    // contents of a function until the first time it's called, and since it will
    // never actually need to be called, this allows the polyfill to be included
    // in Firefox nearly for free.

    const wrapAPIs = extensionAPIs => {
      // NOTE: apiMetadata is associated to the content of the api-metadata.json file
      // at build time by replacing the following "include" with the content of the
      // JSON file.
      const apiMetadata = {
        "alarms": {
          "clear": {
            "minArgs": 0,
            "maxArgs": 1
          },
          "clearAll": {
            "minArgs": 0,
            "maxArgs": 0
          },
          "get": {
            "minArgs": 0,
            "maxArgs": 1
          },
          "getAll": {
            "minArgs": 0,
            "maxArgs": 0
          }
        },
        "bookmarks": {
          "create": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "get": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "getChildren": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "getRecent": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "getSubTree": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "getTree": {
            "minArgs": 0,
            "maxArgs": 0
          },
          "move": {
            "minArgs": 2,
            "maxArgs": 2
          },
          "remove": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "removeTree": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "search": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "update": {
            "minArgs": 2,
            "maxArgs": 2
          }
        },
        "browserAction": {
          "disable": {
            "minArgs": 0,
            "maxArgs": 1,
            "fallbackToNoCallback": true
          },
          "enable": {
            "minArgs": 0,
            "maxArgs": 1,
            "fallbackToNoCallback": true
          },
          "getBadgeBackgroundColor": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "getBadgeText": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "getPopup": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "getTitle": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "openPopup": {
            "minArgs": 0,
            "maxArgs": 0
          },
          "setBadgeBackgroundColor": {
            "minArgs": 1,
            "maxArgs": 1,
            "fallbackToNoCallback": true
          },
          "setBadgeText": {
            "minArgs": 1,
            "maxArgs": 1,
            "fallbackToNoCallback": true
          },
          "setIcon": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "setPopup": {
            "minArgs": 1,
            "maxArgs": 1,
            "fallbackToNoCallback": true
          },
          "setTitle": {
            "minArgs": 1,
            "maxArgs": 1,
            "fallbackToNoCallback": true
          }
        },
        "browsingData": {
          "remove": {
            "minArgs": 2,
            "maxArgs": 2
          },
          "removeCache": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "removeCookies": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "removeDownloads": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "removeFormData": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "removeHistory": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "removeLocalStorage": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "removePasswords": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "removePluginData": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "settings": {
            "minArgs": 0,
            "maxArgs": 0
          }
        },
        "commands": {
          "getAll": {
            "minArgs": 0,
            "maxArgs": 0
          }
        },
        "contextMenus": {
          "remove": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "removeAll": {
            "minArgs": 0,
            "maxArgs": 0
          },
          "update": {
            "minArgs": 2,
            "maxArgs": 2
          }
        },
        "cookies": {
          "get": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "getAll": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "getAllCookieStores": {
            "minArgs": 0,
            "maxArgs": 0
          },
          "remove": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "set": {
            "minArgs": 1,
            "maxArgs": 1
          }
        },
        "devtools": {
          "inspectedWindow": {
            "eval": {
              "minArgs": 1,
              "maxArgs": 2,
              "singleCallbackArg": false
            }
          },
          "panels": {
            "create": {
              "minArgs": 3,
              "maxArgs": 3,
              "singleCallbackArg": true
            },
            "elements": {
              "createSidebarPane": {
                "minArgs": 1,
                "maxArgs": 1
              }
            }
          }
        },
        "downloads": {
          "cancel": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "download": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "erase": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "getFileIcon": {
            "minArgs": 1,
            "maxArgs": 2
          },
          "open": {
            "minArgs": 1,
            "maxArgs": 1,
            "fallbackToNoCallback": true
          },
          "pause": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "removeFile": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "resume": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "search": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "show": {
            "minArgs": 1,
            "maxArgs": 1,
            "fallbackToNoCallback": true
          }
        },
        "extension": {
          "isAllowedFileSchemeAccess": {
            "minArgs": 0,
            "maxArgs": 0
          },
          "isAllowedIncognitoAccess": {
            "minArgs": 0,
            "maxArgs": 0
          }
        },
        "history": {
          "addUrl": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "deleteAll": {
            "minArgs": 0,
            "maxArgs": 0
          },
          "deleteRange": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "deleteUrl": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "getVisits": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "search": {
            "minArgs": 1,
            "maxArgs": 1
          }
        },
        "i18n": {
          "detectLanguage": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "getAcceptLanguages": {
            "minArgs": 0,
            "maxArgs": 0
          }
        },
        "identity": {
          "launchWebAuthFlow": {
            "minArgs": 1,
            "maxArgs": 1
          }
        },
        "idle": {
          "queryState": {
            "minArgs": 1,
            "maxArgs": 1
          }
        },
        "management": {
          "get": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "getAll": {
            "minArgs": 0,
            "maxArgs": 0
          },
          "getSelf": {
            "minArgs": 0,
            "maxArgs": 0
          },
          "setEnabled": {
            "minArgs": 2,
            "maxArgs": 2
          },
          "uninstallSelf": {
            "minArgs": 0,
            "maxArgs": 1
          }
        },
        "notifications": {
          "clear": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "create": {
            "minArgs": 1,
            "maxArgs": 2
          },
          "getAll": {
            "minArgs": 0,
            "maxArgs": 0
          },
          "getPermissionLevel": {
            "minArgs": 0,
            "maxArgs": 0
          },
          "update": {
            "minArgs": 2,
            "maxArgs": 2
          }
        },
        "pageAction": {
          "getPopup": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "getTitle": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "hide": {
            "minArgs": 1,
            "maxArgs": 1,
            "fallbackToNoCallback": true
          },
          "setIcon": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "setPopup": {
            "minArgs": 1,
            "maxArgs": 1,
            "fallbackToNoCallback": true
          },
          "setTitle": {
            "minArgs": 1,
            "maxArgs": 1,
            "fallbackToNoCallback": true
          },
          "show": {
            "minArgs": 1,
            "maxArgs": 1,
            "fallbackToNoCallback": true
          }
        },
        "permissions": {
          "contains": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "getAll": {
            "minArgs": 0,
            "maxArgs": 0
          },
          "remove": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "request": {
            "minArgs": 1,
            "maxArgs": 1
          }
        },
        "runtime": {
          "getBackgroundPage": {
            "minArgs": 0,
            "maxArgs": 0
          },
          "getPlatformInfo": {
            "minArgs": 0,
            "maxArgs": 0
          },
          "openOptionsPage": {
            "minArgs": 0,
            "maxArgs": 0
          },
          "requestUpdateCheck": {
            "minArgs": 0,
            "maxArgs": 0
          },
          "sendMessage": {
            "minArgs": 1,
            "maxArgs": 3
          },
          "sendNativeMessage": {
            "minArgs": 2,
            "maxArgs": 2
          },
          "setUninstallURL": {
            "minArgs": 1,
            "maxArgs": 1
          }
        },
        "sessions": {
          "getDevices": {
            "minArgs": 0,
            "maxArgs": 1
          },
          "getRecentlyClosed": {
            "minArgs": 0,
            "maxArgs": 1
          },
          "restore": {
            "minArgs": 0,
            "maxArgs": 1
          }
        },
        "storage": {
          "local": {
            "clear": {
              "minArgs": 0,
              "maxArgs": 0
            },
            "get": {
              "minArgs": 0,
              "maxArgs": 1
            },
            "getBytesInUse": {
              "minArgs": 0,
              "maxArgs": 1
            },
            "remove": {
              "minArgs": 1,
              "maxArgs": 1
            },
            "set": {
              "minArgs": 1,
              "maxArgs": 1
            }
          },
          "managed": {
            "get": {
              "minArgs": 0,
              "maxArgs": 1
            },
            "getBytesInUse": {
              "minArgs": 0,
              "maxArgs": 1
            }
          },
          "sync": {
            "clear": {
              "minArgs": 0,
              "maxArgs": 0
            },
            "get": {
              "minArgs": 0,
              "maxArgs": 1
            },
            "getBytesInUse": {
              "minArgs": 0,
              "maxArgs": 1
            },
            "remove": {
              "minArgs": 1,
              "maxArgs": 1
            },
            "set": {
              "minArgs": 1,
              "maxArgs": 1
            }
          }
        },
        "tabs": {
          "captureVisibleTab": {
            "minArgs": 0,
            "maxArgs": 2
          },
          "create": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "detectLanguage": {
            "minArgs": 0,
            "maxArgs": 1
          },
          "discard": {
            "minArgs": 0,
            "maxArgs": 1
          },
          "duplicate": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "executeScript": {
            "minArgs": 1,
            "maxArgs": 2
          },
          "get": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "getCurrent": {
            "minArgs": 0,
            "maxArgs": 0
          },
          "getZoom": {
            "minArgs": 0,
            "maxArgs": 1
          },
          "getZoomSettings": {
            "minArgs": 0,
            "maxArgs": 1
          },
          "goBack": {
            "minArgs": 0,
            "maxArgs": 1
          },
          "goForward": {
            "minArgs": 0,
            "maxArgs": 1
          },
          "highlight": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "insertCSS": {
            "minArgs": 1,
            "maxArgs": 2
          },
          "move": {
            "minArgs": 2,
            "maxArgs": 2
          },
          "query": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "reload": {
            "minArgs": 0,
            "maxArgs": 2
          },
          "remove": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "removeCSS": {
            "minArgs": 1,
            "maxArgs": 2
          },
          "sendMessage": {
            "minArgs": 2,
            "maxArgs": 3
          },
          "setZoom": {
            "minArgs": 1,
            "maxArgs": 2
          },
          "setZoomSettings": {
            "minArgs": 1,
            "maxArgs": 2
          },
          "update": {
            "minArgs": 1,
            "maxArgs": 2
          }
        },
        "topSites": {
          "get": {
            "minArgs": 0,
            "maxArgs": 0
          }
        },
        "webNavigation": {
          "getAllFrames": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "getFrame": {
            "minArgs": 1,
            "maxArgs": 1
          }
        },
        "webRequest": {
          "handlerBehaviorChanged": {
            "minArgs": 0,
            "maxArgs": 0
          }
        },
        "windows": {
          "create": {
            "minArgs": 0,
            "maxArgs": 1
          },
          "get": {
            "minArgs": 1,
            "maxArgs": 2
          },
          "getAll": {
            "minArgs": 0,
            "maxArgs": 1
          },
          "getCurrent": {
            "minArgs": 0,
            "maxArgs": 1
          },
          "getLastFocused": {
            "minArgs": 0,
            "maxArgs": 1
          },
          "remove": {
            "minArgs": 1,
            "maxArgs": 1
          },
          "update": {
            "minArgs": 2,
            "maxArgs": 2
          }
        }
      };

      if (Object.keys(apiMetadata).length === 0) {
        throw new Error("api-metadata.json has not been included in browser-polyfill");
      }
      /**
       * A WeakMap subclass which creates and stores a value for any key which does
       * not exist when accessed, but behaves exactly as an ordinary WeakMap
       * otherwise.
       *
       * @param {function} createItem
       *        A function which will be called in order to create the value for any
       *        key which does not exist, the first time it is accessed. The
       *        function receives, as its only argument, the key being created.
       */


      class DefaultWeakMap extends WeakMap {
        constructor(createItem, items = undefined) {
          super(items);
          this.createItem = createItem;
        }

        get(key) {
          if (!this.has(key)) {
            this.set(key, this.createItem(key));
          }

          return super.get(key);
        }

      }
      /**
       * Returns true if the given object is an object with a `then` method, and can
       * therefore be assumed to behave as a Promise.
       *
       * @param {*} value The value to test.
       * @returns {boolean} True if the value is thenable.
       */


      const isThenable = value => {
        return value && typeof value === "object" && typeof value.then === "function";
      };
      /**
       * Creates and returns a function which, when called, will resolve or reject
       * the given promise based on how it is called:
       *
       * - If, when called, `chrome.runtime.lastError` contains a non-null object,
       *   the promise is rejected with that value.
       * - If the function is called with exactly one argument, the promise is
       *   resolved to that value.
       * - Otherwise, the promise is resolved to an array containing all of the
       *   function's arguments.
       *
       * @param {object} promise
       *        An object containing the resolution and rejection functions of a
       *        promise.
       * @param {function} promise.resolve
       *        The promise's resolution function.
       * @param {function} promise.reject
       *        The promise's rejection function.
       * @param {object} metadata
       *        Metadata about the wrapped method which has created the callback.
       * @param {boolean} metadata.singleCallbackArg
       *        Whether or not the promise is resolved with only the first
       *        argument of the callback, alternatively an array of all the
       *        callback arguments is resolved. By default, if the callback
       *        function is invoked with only a single argument, that will be
       *        resolved to the promise, while all arguments will be resolved as
       *        an array if multiple are given.
       *
       * @returns {function}
       *        The generated callback function.
       */


      const makeCallback = (promise, metadata) => {
        return (...callbackArgs) => {
          if (extensionAPIs.runtime.lastError) {
            promise.reject(new Error(extensionAPIs.runtime.lastError.message));
          } else if (metadata.singleCallbackArg || callbackArgs.length <= 1 && metadata.singleCallbackArg !== false) {
            promise.resolve(callbackArgs[0]);
          } else {
            promise.resolve(callbackArgs);
          }
        };
      };

      const pluralizeArguments = numArgs => numArgs == 1 ? "argument" : "arguments";
      /**
       * Creates a wrapper function for a method with the given name and metadata.
       *
       * @param {string} name
       *        The name of the method which is being wrapped.
       * @param {object} metadata
       *        Metadata about the method being wrapped.
       * @param {integer} metadata.minArgs
       *        The minimum number of arguments which must be passed to the
       *        function. If called with fewer than this number of arguments, the
       *        wrapper will raise an exception.
       * @param {integer} metadata.maxArgs
       *        The maximum number of arguments which may be passed to the
       *        function. If called with more than this number of arguments, the
       *        wrapper will raise an exception.
       * @param {boolean} metadata.singleCallbackArg
       *        Whether or not the promise is resolved with only the first
       *        argument of the callback, alternatively an array of all the
       *        callback arguments is resolved. By default, if the callback
       *        function is invoked with only a single argument, that will be
       *        resolved to the promise, while all arguments will be resolved as
       *        an array if multiple are given.
       *
       * @returns {function(object, ...*)}
       *       The generated wrapper function.
       */


      const wrapAsyncFunction = (name, metadata) => {
        return function asyncFunctionWrapper(target, ...args) {
          if (args.length < metadata.minArgs) {
            throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);
          }

          if (args.length > metadata.maxArgs) {
            throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);
          }

          return new Promise((resolve, reject) => {
            if (metadata.fallbackToNoCallback) {
              // This API method has currently no callback on Chrome, but it return a promise on Firefox,
              // and so the polyfill will try to call it with a callback first, and it will fallback
              // to not passing the callback if the first call fails.
              try {
                target[name](...args, makeCallback({
                  resolve,
                  reject
                }, metadata));
              } catch (cbError) {
                console.warn(`${name} API method doesn't seem to support the callback parameter, ` + "falling back to call it without a callback: ", cbError);
                target[name](...args); // Update the API method metadata, so that the next API calls will not try to
                // use the unsupported callback anymore.

                metadata.fallbackToNoCallback = false;
                metadata.noCallback = true;
                resolve();
              }
            } else if (metadata.noCallback) {
              target[name](...args);
              resolve();
            } else {
              target[name](...args, makeCallback({
                resolve,
                reject
              }, metadata));
            }
          });
        };
      };
      /**
       * Wraps an existing method of the target object, so that calls to it are
       * intercepted by the given wrapper function. The wrapper function receives,
       * as its first argument, the original `target` object, followed by each of
       * the arguments passed to the original method.
       *
       * @param {object} target
       *        The original target object that the wrapped method belongs to.
       * @param {function} method
       *        The method being wrapped. This is used as the target of the Proxy
       *        object which is created to wrap the method.
       * @param {function} wrapper
       *        The wrapper function which is called in place of a direct invocation
       *        of the wrapped method.
       *
       * @returns {Proxy<function>}
       *        A Proxy object for the given method, which invokes the given wrapper
       *        method in its place.
       */


      const wrapMethod = (target, method, wrapper) => {
        return new Proxy(method, {
          apply(targetMethod, thisObj, args) {
            return wrapper.call(thisObj, target, ...args);
          }

        });
      };

      let hasOwnProperty = Function.call.bind(Object.prototype.hasOwnProperty);
      /**
       * Wraps an object in a Proxy which intercepts and wraps certain methods
       * based on the given `wrappers` and `metadata` objects.
       *
       * @param {object} target
       *        The target object to wrap.
       *
       * @param {object} [wrappers = {}]
       *        An object tree containing wrapper functions for special cases. Any
       *        function present in this object tree is called in place of the
       *        method in the same location in the `target` object tree. These
       *        wrapper methods are invoked as described in {@see wrapMethod}.
       *
       * @param {object} [metadata = {}]
       *        An object tree containing metadata used to automatically generate
       *        Promise-based wrapper functions for asynchronous. Any function in
       *        the `target` object tree which has a corresponding metadata object
       *        in the same location in the `metadata` tree is replaced with an
       *        automatically-generated wrapper function, as described in
       *        {@see wrapAsyncFunction}
       *
       * @returns {Proxy<object>}
       */

      const wrapObject = (target, wrappers = {}, metadata = {}) => {
        let cache = Object.create(null);
        let handlers = {
          has(proxyTarget, prop) {
            return prop in target || prop in cache;
          },

          get(proxyTarget, prop, receiver) {
            if (prop in cache) {
              return cache[prop];
            }

            if (!(prop in target)) {
              return undefined;
            }

            let value = target[prop];

            if (typeof value === "function") {
              // This is a method on the underlying object. Check if we need to do
              // any wrapping.
              if (typeof wrappers[prop] === "function") {
                // We have a special-case wrapper for this method.
                value = wrapMethod(target, target[prop], wrappers[prop]);
              } else if (hasOwnProperty(metadata, prop)) {
                // This is an async method that we have metadata for. Create a
                // Promise wrapper for it.
                let wrapper = wrapAsyncFunction(prop, metadata[prop]);
                value = wrapMethod(target, target[prop], wrapper);
              } else {
                // This is a method that we don't know or care about. Return the
                // original method, bound to the underlying object.
                value = value.bind(target);
              }
            } else if (typeof value === "object" && value !== null && (hasOwnProperty(wrappers, prop) || hasOwnProperty(metadata, prop))) {
              // This is an object that we need to do some wrapping for the children
              // of. Create a sub-object wrapper for it with the appropriate child
              // metadata.
              value = wrapObject(value, wrappers[prop], metadata[prop]);
            } else if (hasOwnProperty(metadata, "*")) {
              // Wrap all properties in * namespace.
              value = wrapObject(value, wrappers[prop], metadata["*"]);
            } else {
              // We don't need to do any wrapping for this property,
              // so just forward all access to the underlying object.
              Object.defineProperty(cache, prop, {
                configurable: true,
                enumerable: true,

                get() {
                  return target[prop];
                },

                set(value) {
                  target[prop] = value;
                }

              });
              return value;
            }

            cache[prop] = value;
            return value;
          },

          set(proxyTarget, prop, value, receiver) {
            if (prop in cache) {
              cache[prop] = value;
            } else {
              target[prop] = value;
            }

            return true;
          },

          defineProperty(proxyTarget, prop, desc) {
            return Reflect.defineProperty(cache, prop, desc);
          },

          deleteProperty(proxyTarget, prop) {
            return Reflect.deleteProperty(cache, prop);
          }

        }; // Per contract of the Proxy API, the "get" proxy handler must return the
        // original value of the target if that value is declared read-only and
        // non-configurable. For this reason, we create an object with the
        // prototype set to `target` instead of using `target` directly.
        // Otherwise we cannot return a custom object for APIs that
        // are declared read-only and non-configurable, such as `chrome.devtools`.
        //
        // The proxy handlers themselves will still use the original `target`
        // instead of the `proxyTarget`, so that the methods and properties are
        // dereferenced via the original targets.

        let proxyTarget = Object.create(target);
        return new Proxy(proxyTarget, handlers);
      };
      /**
       * Creates a set of wrapper functions for an event object, which handles
       * wrapping of listener functions that those messages are passed.
       *
       * A single wrapper is created for each listener function, and stored in a
       * map. Subsequent calls to `addListener`, `hasListener`, or `removeListener`
       * retrieve the original wrapper, so that  attempts to remove a
       * previously-added listener work as expected.
       *
       * @param {DefaultWeakMap<function, function>} wrapperMap
       *        A DefaultWeakMap object which will create the appropriate wrapper
       *        for a given listener function when one does not exist, and retrieve
       *        an existing one when it does.
       *
       * @returns {object}
       */


      const wrapEvent = wrapperMap => ({
        addListener(target, listener, ...args) {
          target.addListener(wrapperMap.get(listener), ...args);
        },

        hasListener(target, listener) {
          return target.hasListener(wrapperMap.get(listener));
        },

        removeListener(target, listener) {
          target.removeListener(wrapperMap.get(listener));
        }

      });

      const onRequestFinishedWrappers = new DefaultWeakMap(listener => {
        if (typeof listener !== "function") {
          return listener;
        }
        /**
         * Wraps an onRequestFinished listener function so that it will return a
         * `getContent()` property which returns a `Promise` rather than using a
         * callback API.
         *
         * @param {object} req
         *        The HAR entry object representing the network request.
         */


        return function onRequestFinished(req) {
          const wrappedReq = wrapObject(req, {}
          /* wrappers */
          , {
            getContent: {
              minArgs: 0,
              maxArgs: 0
            }
          });
          listener(wrappedReq);
        };
      });
      const onMessageWrappers = new DefaultWeakMap(listener => {
        if (typeof listener !== "function") {
          return listener;
        }
        /**
         * Wraps a message listener function so that it may send responses based on
         * its return value, rather than by returning a sentinel value and calling a
         * callback. If the listener function returns a Promise, the response is
         * sent when the promise either resolves or rejects.
         *
         * @param {*} message
         *        The message sent by the other end of the channel.
         * @param {object} sender
         *        Details about the sender of the message.
         * @param {function(*)} sendResponse
         *        A callback which, when called with an arbitrary argument, sends
         *        that value as a response.
         * @returns {boolean}
         *        True if the wrapped listener returned a Promise, which will later
         *        yield a response. False otherwise.
         */


        return function onMessage(message, sender, sendResponse) {
          let didCallSendResponse = false;
          let wrappedSendResponse;
          let sendResponsePromise = new Promise(resolve => {
            wrappedSendResponse = function (response) {
              didCallSendResponse = true;
              resolve(response);
            };
          });
          let result;

          try {
            result = listener(message, sender, wrappedSendResponse);
          } catch (err) {
            result = Promise.reject(err);
          }

          const isResultThenable = result !== true && isThenable(result); // If the listener didn't returned true or a Promise, or called
          // wrappedSendResponse synchronously, we can exit earlier
          // because there will be no response sent from this listener.

          if (result !== true && !isResultThenable && !didCallSendResponse) {
            return false;
          } // A small helper to send the message if the promise resolves
          // and an error if the promise rejects (a wrapped sendMessage has
          // to translate the message into a resolved promise or a rejected
          // promise).


          const sendPromisedResult = promise => {
            promise.then(msg => {
              // send the message value.
              sendResponse(msg);
            }, error => {
              // Send a JSON representation of the error if the rejected value
              // is an instance of error, or the object itself otherwise.
              let message;

              if (error && (error instanceof Error || typeof error.message === "string")) {
                message = error.message;
              } else {
                message = "An unexpected error occurred";
              }

              sendResponse({
                __mozWebExtensionPolyfillReject__: true,
                message
              });
            }).catch(err => {
              // Print an error on the console if unable to send the response.
              console.error("Failed to send onMessage rejected reply", err);
            });
          }; // If the listener returned a Promise, send the resolved value as a
          // result, otherwise wait the promise related to the wrappedSendResponse
          // callback to resolve and send it as a response.


          if (isResultThenable) {
            sendPromisedResult(result);
          } else {
            sendPromisedResult(sendResponsePromise);
          } // Let Chrome know that the listener is replying.


          return true;
        };
      });

      const wrappedSendMessageCallback = ({
        reject,
        resolve
      }, reply) => {
        if (extensionAPIs.runtime.lastError) {
          // Detect when none of the listeners replied to the sendMessage call and resolve
          // the promise to undefined as in Firefox.
          // See https://github.com/mozilla/webextension-polyfill/issues/130
          if (extensionAPIs.runtime.lastError.message === CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE) {
            resolve();
          } else {
            reject(new Error(extensionAPIs.runtime.lastError.message));
          }
        } else if (reply && reply.__mozWebExtensionPolyfillReject__) {
          // Convert back the JSON representation of the error into
          // an Error instance.
          reject(new Error(reply.message));
        } else {
          resolve(reply);
        }
      };

      const wrappedSendMessage = (name, metadata, apiNamespaceObj, ...args) => {
        if (args.length < metadata.minArgs) {
          throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);
        }

        if (args.length > metadata.maxArgs) {
          throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);
        }

        return new Promise((resolve, reject) => {
          const wrappedCb = wrappedSendMessageCallback.bind(null, {
            resolve,
            reject
          });
          args.push(wrappedCb);
          apiNamespaceObj.sendMessage(...args);
        });
      };

      const staticWrappers = {
        devtools: {
          network: {
            onRequestFinished: wrapEvent(onRequestFinishedWrappers)
          }
        },
        runtime: {
          onMessage: wrapEvent(onMessageWrappers),
          onMessageExternal: wrapEvent(onMessageWrappers),
          sendMessage: wrappedSendMessage.bind(null, "sendMessage", {
            minArgs: 1,
            maxArgs: 3
          })
        },
        tabs: {
          sendMessage: wrappedSendMessage.bind(null, "sendMessage", {
            minArgs: 2,
            maxArgs: 3
          })
        }
      };
      const settingMetadata = {
        clear: {
          minArgs: 1,
          maxArgs: 1
        },
        get: {
          minArgs: 1,
          maxArgs: 1
        },
        set: {
          minArgs: 1,
          maxArgs: 1
        }
      };
      apiMetadata.privacy = {
        network: {
          "*": settingMetadata
        },
        services: {
          "*": settingMetadata
        },
        websites: {
          "*": settingMetadata
        }
      };
      return wrapObject(extensionAPIs, staticWrappers, apiMetadata);
    }; // The build process adds a UMD wrapper around this file, which makes the
    // `module` variable available.


    module.exports = wrapAPIs(chrome);
  } else {
    module.exports = globalThis.browser;
  }
});
//# sourceMappingURL=browser-polyfill.js.map


/***/ }),

/***/ "?6483":
/*!****************************!*\
  !*** agent-base (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?0825":
/*!********************!*\
  !*** fs (ignored) ***!
  \********************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?72ad":
/*!***********************************!*\
  !*** https-proxy-agent (ignored) ***!
  \***********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?a1bf":
/*!*********************!*\
  !*** net (ignored) ***!
  \*********************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?14d6":
/*!*********************!*\
  !*** tls (ignored) ***!
  \*********************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?e42a":
/*!********************!*\
  !*** ws (ignored) ***!
  \********************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?9463":
/*!********************!*\
  !*** fs (ignored) ***!
  \********************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "./node_modules/iso-639-1/src/data.js":
/*!********************************************!*\
  !*** ./node_modules/iso-639-1/src/data.js ***!
  \********************************************/
/***/ ((module) => {

const LANGUAGES_LIST = {
  aa: {
    name: 'Afar',
    nativeName: 'Afaraf',
  },
  ab: {
    name: 'Abkhaz',
    nativeName: ' ',
  },
  ae: {
    name: 'Avestan',
    nativeName: 'avesta',
  },
  af: {
    name: 'Afrikaans',
    nativeName: 'Afrikaans',
  },
  ak: {
    name: 'Akan',
    nativeName: 'Akan',
  },
  am: {
    name: 'Amharic',
    nativeName: '',
  },
  an: {
    name: 'Aragonese',
    nativeName: 'aragons',
  },
  ar: {
    name: 'Arabic',
    nativeName: '',
  },
  as: {
    name: 'Assamese',
    nativeName: '',
  },
  av: {
    name: 'Avaric',
    nativeName: ' ',
  },
  ay: {
    name: 'Aymara',
    nativeName: 'aymar aru',
  },
  az: {
    name: 'Azerbaijani',
    nativeName: 'azrbaycan dili',
  },
  ba: {
    name: 'Bashkir',
    nativeName: ' ',
  },
  be: {
    name: 'Belarusian',
    nativeName: ' ',
  },
  bg: {
    name: 'Bulgarian',
    nativeName: ' ',
  },
  bi: {
    name: 'Bislama',
    nativeName: 'Bislama',
  },
  bm: {
    name: 'Bambara',
    nativeName: 'bamanankan',
  },
  bn: {
    name: 'Bengali',
    nativeName: '',
  },
  bo: {
    name: 'Tibetan',
    nativeName: '',
  },
  br: {
    name: 'Breton',
    nativeName: 'brezhoneg',
  },
  bs: {
    name: 'Bosnian',
    nativeName: 'bosanski jezik',
  },
  ca: {
    name: 'Catalan',
    nativeName: 'Catal',
  },
  ce: {
    name: 'Chechen',
    nativeName: ' ',
  },
  ch: {
    name: 'Chamorro',
    nativeName: 'Chamoru',
  },
  co: {
    name: 'Corsican',
    nativeName: 'corsu',
  },
  cr: {
    name: 'Cree',
    nativeName: '',
  },
  cs: {
    name: 'Czech',
    nativeName: 'etina',
  },
  cu: {
    name: 'Old Church Slavonic',
    nativeName: ' ',
  },
  cv: {
    name: 'Chuvash',
    nativeName: ' ',
  },
  cy: {
    name: 'Welsh',
    nativeName: 'Cymraeg',
  },
  da: {
    name: 'Danish',
    nativeName: 'dansk',
  },
  de: {
    name: 'German',
    nativeName: 'Deutsch',
  },
  dv: {
    name: 'Divehi',
    nativeName: '',
  },
  dz: {
    name: 'Dzongkha',
    nativeName: '',
  },
  ee: {
    name: 'Ewe',
    nativeName: 'Eegbe',
  },
  el: {
    name: 'Greek',
    nativeName: '',
  },
  en: {
    name: 'English',
    nativeName: 'English',
  },
  eo: {
    name: 'Esperanto',
    nativeName: 'Esperanto',
  },
  es: {
    name: 'Spanish',
    nativeName: 'Espaol',
  },
  et: {
    name: 'Estonian',
    nativeName: 'eesti',
  },
  eu: {
    name: 'Basque',
    nativeName: 'euskara',
  },
  fa: {
    name: 'Persian',
    nativeName: '',
  },
  ff: {
    name: 'Fula',
    nativeName: 'Fulfulde',
  },
  fi: {
    name: 'Finnish',
    nativeName: 'suomi',
  },
  fj: {
    name: 'Fijian',
    nativeName: 'vosa Vakaviti',
  },
  fo: {
    name: 'Faroese',
    nativeName: 'froyskt',
  },
  fr: {
    name: 'French',
    nativeName: 'Franais',
  },
  fy: {
    name: 'Western Frisian',
    nativeName: 'Frysk',
  },
  ga: {
    name: 'Irish',
    nativeName: 'Gaeilge',
  },
  gd: {
    name: 'Scottish Gaelic',
    nativeName: 'Gidhlig',
  },
  gl: {
    name: 'Galician',
    nativeName: 'galego',
  },
  gn: {
    name: 'Guaran',
    nativeName: "Avae'",
  },
  gu: {
    name: 'Gujarati',
    nativeName: '',
  },
  gv: {
    name: 'Manx',
    nativeName: 'Gaelg',
  },
  ha: {
    name: 'Hausa',
    nativeName: '',
  },
  he: {
    name: 'Hebrew',
    nativeName: '',
  },
  hi: {
    name: 'Hindi',
    nativeName: '',
  },
  ho: {
    name: 'Hiri Motu',
    nativeName: 'Hiri Motu',
  },
  hr: {
    name: 'Croatian',
    nativeName: 'Hrvatski',
  },
  ht: {
    name: 'Haitian',
    nativeName: 'Kreyl ayisyen',
  },
  hu: {
    name: 'Hungarian',
    nativeName: 'magyar',
  },
  hy: {
    name: 'Armenian',
    nativeName: '',
  },
  hz: {
    name: 'Herero',
    nativeName: 'Otjiherero',
  },
  ia: {
    name: 'Interlingua',
    nativeName: 'Interlingua',
  },
  id: {
    name: 'Indonesian',
    nativeName: 'Bahasa Indonesia',
  },
  ie: {
    name: 'Interlingue',
    nativeName: 'Interlingue',
  },
  ig: {
    name: 'Igbo',
    nativeName: 'Ass Igbo',
  },
  ii: {
    name: 'Nuosu',
    nativeName: ' Nuosuhxop',
  },
  ik: {
    name: 'Inupiaq',
    nativeName: 'Iupiaq',
  },
  io: {
    name: 'Ido',
    nativeName: 'Ido',
  },
  is: {
    name: 'Icelandic',
    nativeName: 'slenska',
  },
  it: {
    name: 'Italian',
    nativeName: 'Italiano',
  },
  iu: {
    name: 'Inuktitut',
    nativeName: '',
  },
  ja: {
    name: 'Japanese',
    nativeName: '',
  },
  jv: {
    name: 'Javanese',
    nativeName: 'basa Jawa',
  },
  ka: {
    name: 'Georgian',
    nativeName: '',
  },
  kg: {
    name: 'Kongo',
    nativeName: 'Kikongo',
  },
  ki: {
    name: 'Kikuyu',
    nativeName: 'Gky',
  },
  kj: {
    name: 'Kwanyama',
    nativeName: 'Kuanyama',
  },
  kk: {
    name: 'Kazakh',
    nativeName: ' ',
  },
  kl: {
    name: 'Kalaallisut',
    nativeName: 'kalaallisut',
  },
  km: {
    name: 'Khmer',
    nativeName: '',
  },
  kn: {
    name: 'Kannada',
    nativeName: '',
  },
  ko: {
    name: 'Korean',
    nativeName: '',
  },
  kr: {
    name: 'Kanuri',
    nativeName: 'Kanuri',
  },
  ks: {
    name: 'Kashmiri',
    nativeName: '',
  },
  ku: {
    name: 'Kurdish',
    nativeName: 'Kurd',
  },
  kv: {
    name: 'Komi',
    nativeName: ' ',
  },
  kw: {
    name: 'Cornish',
    nativeName: 'Kernewek',
  },
  ky: {
    name: 'Kyrgyz',
    nativeName: '',
  },
  la: {
    name: 'Latin',
    nativeName: 'latine',
  },
  lb: {
    name: 'Luxembourgish',
    nativeName: 'Ltzebuergesch',
  },
  lg: {
    name: 'Ganda',
    nativeName: 'Luganda',
  },
  li: {
    name: 'Limburgish',
    nativeName: 'Limburgs',
  },
  ln: {
    name: 'Lingala',
    nativeName: 'Lingla',
  },
  lo: {
    name: 'Lao',
    nativeName: '',
  },
  lt: {
    name: 'Lithuanian',
    nativeName: 'lietuvi kalba',
  },
  lu: {
    name: 'Luba-Katanga',
    nativeName: 'Kiluba',
  },
  lv: {
    name: 'Latvian',
    nativeName: 'latvieu valoda',
  },
  mg: {
    name: 'Malagasy',
    nativeName: 'fiteny malagasy',
  },
  mh: {
    name: 'Marshallese',
    nativeName: 'Kajin Maje',
  },
  mi: {
    name: 'Mori',
    nativeName: 'te reo Mori',
  },
  mk: {
    name: 'Macedonian',
    nativeName: ' ',
  },
  ml: {
    name: 'Malayalam',
    nativeName: '',
  },
  mn: {
    name: 'Mongolian',
    nativeName: ' ',
  },
  mr: {
    name: 'Marathi',
    nativeName: '',
  },
  ms: {
    name: 'Malay',
    nativeName: 'Bahasa Melayu',
  },
  mt: {
    name: 'Maltese',
    nativeName: 'Malti',
  },
  my: {
    name: 'Burmese',
    nativeName: '',
  },
  na: {
    name: 'Nauru',
    nativeName: 'Dorerin Naoero',
  },
  nb: {
    name: 'Norwegian Bokml',
    nativeName: 'Norsk bokml',
  },
  nd: {
    name: 'Northern Ndebele',
    nativeName: 'isiNdebele',
  },
  ne: {
    name: 'Nepali',
    nativeName: '',
  },
  ng: {
    name: 'Ndonga',
    nativeName: 'Owambo',
  },
  nl: {
    name: 'Dutch',
    nativeName: 'Nederlands',
  },
  nn: {
    name: 'Norwegian Nynorsk',
    nativeName: 'Norsk nynorsk',
  },
  no: {
    name: 'Norwegian',
    nativeName: 'Norsk',
  },
  nr: {
    name: 'Southern Ndebele',
    nativeName: 'isiNdebele',
  },
  nv: {
    name: 'Navajo',
    nativeName: 'Din bizaad',
  },
  ny: {
    name: 'Chichewa',
    nativeName: 'chiChea',
  },
  oc: {
    name: 'Occitan',
    nativeName: 'occitan',
  },
  oj: {
    name: 'Ojibwe',
    nativeName: '',
  },
  om: {
    name: 'Oromo',
    nativeName: 'Afaan Oromoo',
  },
  or: {
    name: 'Oriya',
    nativeName: '',
  },
  os: {
    name: 'Ossetian',
    nativeName: ' ',
  },
  pa: {
    name: 'Panjabi',
    nativeName: '',
  },
  pi: {
    name: 'Pli',
    nativeName: '',
  },
  pl: {
    name: 'Polish',
    nativeName: 'Polski',
  },
  ps: {
    name: 'Pashto',
    nativeName: '',
  },
  pt: {
    name: 'Portuguese',
    nativeName: 'Portugus',
  },
  qu: {
    name: 'Quechua',
    nativeName: 'Runa Simi',
  },
  rm: {
    name: 'Romansh',
    nativeName: 'rumantsch grischun',
  },
  rn: {
    name: 'Kirundi',
    nativeName: 'Ikirundi',
  },
  ro: {
    name: 'Romanian',
    nativeName: 'Romn',
  },
  ru: {
    name: 'Russian',
    nativeName: '',
  },
  rw: {
    name: 'Kinyarwanda',
    nativeName: 'Ikinyarwanda',
  },
  sa: {
    name: 'Sanskrit',
    nativeName: '',
  },
  sc: {
    name: 'Sardinian',
    nativeName: 'sardu',
  },
  sd: {
    name: 'Sindhi',
    nativeName: '',
  },
  se: {
    name: 'Northern Sami',
    nativeName: 'Davvismegiella',
  },
  sg: {
    name: 'Sango',
    nativeName: 'yng t sng',
  },
  si: {
    name: 'Sinhala',
    nativeName: '',
  },
  sk: {
    name: 'Slovak',
    nativeName: 'slovenina',
  },
  sl: {
    name: 'Slovenian',
    nativeName: 'slovenina',
  },
  sm: {
    name: 'Samoan',
    nativeName: "gagana fa'a Samoa",
  },
  sn: {
    name: 'Shona',
    nativeName: 'chiShona',
  },
  so: {
    name: 'Somali',
    nativeName: 'Soomaaliga',
  },
  sq: {
    name: 'Albanian',
    nativeName: 'Shqip',
  },
  sr: {
    name: 'Serbian',
    nativeName: ' ',
  },
  ss: {
    name: 'Swati',
    nativeName: 'SiSwati',
  },
  st: {
    name: 'Southern Sotho',
    nativeName: 'Sesotho',
  },
  su: {
    name: 'Sundanese',
    nativeName: 'Basa Sunda',
  },
  sv: {
    name: 'Swedish',
    nativeName: 'Svenska',
  },
  sw: {
    name: 'Swahili',
    nativeName: 'Kiswahili',
  },
  ta: {
    name: 'Tamil',
    nativeName: '',
  },
  te: {
    name: 'Telugu',
    nativeName: '',
  },
  tg: {
    name: 'Tajik',
    nativeName: '',
  },
  th: {
    name: 'Thai',
    nativeName: '',
  },
  ti: {
    name: 'Tigrinya',
    nativeName: '',
  },
  tk: {
    name: 'Turkmen',
    nativeName: 'Trkmene',
  },
  tl: {
    name: 'Tagalog',
    nativeName: 'Wikang Tagalog',
  },
  tn: {
    name: 'Tswana',
    nativeName: 'Setswana',
  },
  to: {
    name: 'Tonga',
    nativeName: 'faka Tonga',
  },
  tr: {
    name: 'Turkish',
    nativeName: 'Trke',
  },
  ts: {
    name: 'Tsonga',
    nativeName: 'Xitsonga',
  },
  tt: {
    name: 'Tatar',
    nativeName: ' ',
  },
  tw: {
    name: 'Twi',
    nativeName: 'Twi',
  },
  ty: {
    name: 'Tahitian',
    nativeName: 'Reo Tahiti',
  },
  ug: {
    name: 'Uyghur',
    nativeName: '',
  },
  uk: {
    name: 'Ukrainian',
    nativeName: '',
  },
  ur: {
    name: 'Urdu',
    nativeName: '',
  },
  uz: {
    name: 'Uzbek',
    nativeName: '',
  },
  ve: {
    name: 'Venda',
    nativeName: 'Tshivena',
  },
  vi: {
    name: 'Vietnamese',
    nativeName: 'Ting Vit',
  },
  vo: {
    name: 'Volapk',
    nativeName: 'Volapk',
  },
  wa: {
    name: 'Walloon',
    nativeName: 'walon',
  },
  wo: {
    name: 'Wolof',
    nativeName: 'Wollof',
  },
  xh: {
    name: 'Xhosa',
    nativeName: 'isiXhosa',
  },
  yi: {
    name: 'Yiddish',
    nativeName: '',
  },
  yo: {
    name: 'Yoruba',
    nativeName: 'Yorb',
  },
  za: {
    name: 'Zhuang',
    nativeName: 'Sa cue',
  },
  zh: {
    name: 'Chinese',
    nativeName: '',
  },
  zu: {
    name: 'Zulu',
    nativeName: 'isiZulu',
  },
};

module.exports = LANGUAGES_LIST;


/***/ }),

/***/ "./node_modules/iso-639-1/src/index.js":
/*!*********************************************!*\
  !*** ./node_modules/iso-639-1/src/index.js ***!
  \*********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

const LANGUAGES_LIST = __webpack_require__(/*! ./data.js */ "./node_modules/iso-639-1/src/data.js");

const LANGUAGES = {};
const LANGUAGES_BY_NAME = {};
const LANGUAGE_CODES = [];
const LANGUAGE_NAMES = [];
const LANGUAGE_NATIVE_NAMES = [];

for (const code in LANGUAGES_LIST) {
  const { name, nativeName } = LANGUAGES_LIST[code];
  LANGUAGES[code] =
    LANGUAGES_BY_NAME[name.toLowerCase()] =
    LANGUAGES_BY_NAME[nativeName.toLowerCase()] =
      { code, name, nativeName };
  LANGUAGE_CODES.push(code);
  LANGUAGE_NAMES.push(name);
  LANGUAGE_NATIVE_NAMES.push(nativeName);
}

module.exports = class ISO6391 {
  static getLanguages(codes = []) {
    return codes.map(code =>
      ISO6391.validate(code)
        ? Object.assign({}, LANGUAGES[code])
        : { code, name: '', nativeName: '' }
    );
  }

  static getName(code) {
    return ISO6391.validate(code) ? LANGUAGES_LIST[code].name : '';
  }

  static getAllNames() {
    return LANGUAGE_NAMES.slice();
  }

  static getNativeName(code) {
    return ISO6391.validate(code) ? LANGUAGES_LIST[code].nativeName : '';
  }

  static getAllNativeNames() {
    return LANGUAGE_NATIVE_NAMES.slice();
  }

  static getCode(name) {
    name = name.toLowerCase();
    return LANGUAGES_BY_NAME.hasOwnProperty(name)
      ? LANGUAGES_BY_NAME[name].code
      : '';
  }

  static getAllCodes() {
    return LANGUAGE_CODES.slice();
  }

  static validate(code) {
    return LANGUAGES_LIST.hasOwnProperty(code);
  }
}


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./src/background/index.ts");
/******/ 	
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRDtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQ0FBZ0M7O0FBRWpDOzs7Ozs7Ozs7Ozs7Ozs7OztBQ25hQTtBQUNBO0FBQzZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ08sbUNBQW1DLHNEQUFnQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7OztBQzdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLGNBQWM7QUFDN0IsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsb0JBQW9CO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixjQUFjO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixvQkFBb0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdklBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBSSxJQUFJLFNBQUk7QUFDN0IsNEJBQTRCLCtEQUErRCxpQkFBaUI7QUFDNUc7QUFDQSxvQ0FBb0MsTUFBTSwrQkFBK0IsWUFBWTtBQUNyRixtQ0FBbUMsTUFBTSxtQ0FBbUMsWUFBWTtBQUN4RixnQ0FBZ0M7QUFDaEM7QUFDQSxLQUFLO0FBQ0w7QUFDMEs7QUFDbEc7QUFDaEM7QUFDYTtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCO0FBQ0E7QUFDQSx1RUFBdUUsNEVBQXNDO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQXlCO0FBQ2pDLFFBQVEsMEVBQXlCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw4RkFBMEM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw4RkFBMEM7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSx1RUFBbUIsS0FBSywyREFBTyxLQUFLLHNEQUFFO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpRUFBeUI7QUFDckMsNEJBQTRCLHFEQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpRUFBeUI7QUFDckM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlFQUF5QjtBQUNyQztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsdURBQXVELDRFQUFzQztBQUM3RjtBQUNBLGdCQUFnQiwwRkFBc0M7QUFDdEQsZ0JBQWdCLGdGQUE0QjtBQUM1QyxrRUFBa0UsaUZBQTJDO0FBQzdHO0FBQ0EsYUFBYTtBQUNiLGtFQUFrRSxpRkFBMkM7QUFDN0c7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7Ozs7O0FDN0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsb0NBQW9DOztBQUVyQzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6SUE7QUFDQTtBQUNBO0FBQ0E7QUFDNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDTywrQkFBK0Isc0RBQWdCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7OztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHdEQUF3RDs7QUFFekQ7Ozs7Ozs7Ozs7Ozs7Ozs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7Ozs7OztBQzNCQTtBQUNBO0FBQ3dDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLFFBQVEsd0VBQWdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsU0FBUztBQUN4QixnQkFBZ0Isc0JBQXNCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNsQ0E7QUFDQTtBQUN3QztBQUNNO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFFBQVEsd0VBQWdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLG9GQUE4QztBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZDQTtBQUNBO0FBQ0E7QUFDNkU7QUFDaUU7QUFDdkk7QUFDUDtBQUNBO0FBQ0E7QUFDQSxDQUFDLG9FQUFvRTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AseUNBQXlDLG9FQUE4QiwwQkFBMEIsbUVBQTZCO0FBQzlILGtDQUFrQyx3REFBa0I7QUFDcEQ7QUFDQTtBQUNBLGdDQUFnQywyREFBcUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHFFQUErQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQywwREFBb0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxxRkFBaUMsRUFBRSwyREFBcUI7QUFDcEc7QUFDQSx3Q0FBd0MsaUZBQTJDO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxvREFBb0QsNkRBQXVCO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDBCQUEwQjtBQUN6QyxpQkFBaUIsdUNBQXVDO0FBQ3hEO0FBQ0E7QUFDQSx1QkFBdUIsOERBQXdCO0FBQy9DLHdCQUF3QixtRUFBNkI7QUFDckQ7QUFDQSx3QkFBd0IsMkRBQXFCLCtCQUErQixxRkFBaUMsRUFBRSwyREFBcUIsQ0FBQyxtRUFBNkI7QUFDbEs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNsRkE7QUFDQTtBQUNBLGlCQUFpQixTQUFJLElBQUksU0FBSTtBQUM3Qiw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUMySDtBQUNuRjtBQUNZO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxnQ0FBZ0MsZ0RBQVU7QUFDakQ7QUFDQTtBQUNBO0FBQ0EsZUFBZSxjQUFjO0FBQzdCLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0EsUUFBUSx3RUFBZ0M7QUFDeEM7QUFDQSxRQUFRLHdFQUFnQztBQUN4QyxzREFBc0QsdUZBQW1DO0FBQ3pGO0FBQ0EsUUFBUSw2REFBcUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQSwyQ0FBMkMsaUZBQTJDO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0EsUUFBUSx5RUFBaUM7QUFDekMsb0NBQW9DLGlGQUEyQztBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsb0JBQW9CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1REFBdUQ7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaUVBQXlCO0FBQ3JDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpRUFBeUI7QUFDckM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpRUFBeUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLG1CQUFtQixvRUFBZ0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDRFQUF3QjtBQUMzQztBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDeElBO0FBQ0E7QUFDd0M7QUFDTTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLFFBQVEsd0VBQWdDO0FBQ3hDLG9DQUFvQyxvRkFBOEM7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxnRkFBMEM7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BDQTtBQUNBO0FBQ0E7QUFDK0g7QUFDdkY7QUFDZ0Y7QUFDeEg7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsY0FBYztBQUMvQjtBQUNBO0FBQ0EsUUFBUSx5RUFBaUM7QUFDekMsUUFBUSx5RUFBaUM7QUFDekM7QUFDQSwrQkFBK0IsK0VBQXlDO0FBQ3hFLCtCQUErQixxRkFBK0M7QUFDOUUsK0JBQStCLDRFQUFzQztBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxLQUFLO0FBQ3BCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsY0FBYztBQUMvQjtBQUNBO0FBQ0EsUUFBUSw2REFBcUI7QUFDN0I7QUFDQSwrQkFBK0IsaUZBQTJDO0FBQzFFO0FBQ0EsbUNBQW1DLDRFQUFzQztBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxLQUFLO0FBQ3BCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsY0FBYztBQUMvQjtBQUNBO0FBQ0EsUUFBUSw2REFBcUI7QUFDN0I7QUFDQSwrQkFBK0IsNkVBQXVDO0FBQ3RFO0FBQ0EsbUNBQW1DLDRFQUFzQztBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixjQUFjO0FBQy9CO0FBQ0E7QUFDQSxRQUFRLDZEQUFxQjtBQUM3QixRQUFRLHlFQUFpQztBQUN6QztBQUNBLCtCQUErQiwrRUFBeUM7QUFDeEUsK0JBQStCLHFGQUErQztBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLGtDQUFrQyx3REFBa0I7QUFDcEQsa0RBQWtEO0FBQ2xELDRCQUE0Qix5REFBbUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxpRkFBMkM7QUFDbEc7QUFDQTtBQUNBLCtDQUErQyw0RUFBc0M7QUFDckY7QUFDQTtBQUNBLCtDQUErQywrRUFBeUM7QUFDeEY7QUFDQTtBQUNBLCtDQUErQyxpRkFBMkM7QUFDMUY7QUFDQTtBQUNBLHdDQUF3QyxpRkFBMkM7QUFDbkY7QUFDQTtBQUNBLCtDQUErQyxxRkFBK0M7QUFDOUY7QUFDQTtBQUNBLHdDQUF3QyxxRkFBK0M7QUFDdkY7QUFDQTtBQUNBLCtDQUErQyxrR0FBNEQ7QUFDM0c7QUFDQTtBQUNBLHdDQUF3QyxrR0FBNEQ7QUFDcEc7QUFDQTtBQUNBLGVBQWUsa0RBQVksaUNBQWlDLDRFQUF3QjtBQUNwRjtBQUNBO0FBQ0Esd0NBQXdDLDRFQUF3QixFQUFFLGtEQUFZO0FBQzlFO0FBQ0E7QUFDQSwrQ0FBK0MsbUZBQTZDO0FBQzVGO0FBQ0E7QUFDQSx3Q0FBd0MsbUZBQTZDO0FBQ3JGO0FBQ0E7QUFDQSxRQUFRLDZEQUFxQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsZ0RBQVUsQ0FBQyxzRkFBZ0Q7QUFDcEYseUJBQXlCLGdEQUFVLENBQUMsa0ZBQTRDO0FBQ2hGLHlCQUF5QixnREFBVSxDQUFDLHNGQUFnRDtBQUNwRix5QkFBeUIsZ0RBQVUsQ0FBQyxzRkFBZ0Q7QUFDcEY7QUFDQTtBQUNBLDZFQUE2RSxpRkFBNkIsS0FBSztBQUMvRztBQUNBLHdDQUF3QyxpRkFBNkI7QUFDckU7QUFDQTtBQUNBLHdDQUF3QyxzRkFBZ0QsRUFBRSxxREFBZTtBQUN6RztBQUNBO0FBQ0Esd0NBQXdDLDJGQUFxRDtBQUM3RjtBQUNBO0FBQ0Esd0NBQXdDLGlHQUEyRDtBQUNuRztBQUNBO0FBQ0Esd0NBQXdDLDhFQUEwQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxzRkFBZ0Q7QUFDL0Y7QUFDQTtBQUNBLHdDQUF3QyxzRkFBZ0Q7QUFDeEY7QUFDQTtBQUNBLCtDQUErQyxtRkFBNkM7QUFDNUY7QUFDQTtBQUNBLHdDQUF3QyxtRkFBNkM7QUFDckY7QUFDQTtBQUNBLGVBQWUsaUVBQTJCLGlDQUFpQywwRkFBb0Q7QUFDL0g7QUFDQTtBQUNBLHdDQUF3QywwRkFBb0QsRUFBRSxpRUFBMkI7QUFDekg7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN2T0E7QUFDQTtBQUN5RTtBQUNsRSxpREFBaUQsaUZBQXlCO0FBQ2pGOztBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNOQTtBQUNBO0FBQ0E7QUFDaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDTyx5Q0FBeUMsMERBQW9CO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBLGVBQWUseUJBQXlCO0FBQ3hDLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIseUJBQXlCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7O0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdENBO0FBQ0E7QUFDOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDTyxzQ0FBc0MsdURBQWlCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsY0FBYztBQUM3QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsb0JBQW9CO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3hDQTtBQUNBO0FBQ0EsaUJBQWlCLFNBQUksSUFBSSxTQUFJO0FBQzdCLDRCQUE0QiwrREFBK0QsaUJBQWlCO0FBQzVHO0FBQ0Esb0NBQW9DLE1BQU0sK0JBQStCLFlBQVk7QUFDckYsbUNBQW1DLE1BQU0sbUNBQW1DLFlBQVk7QUFDeEYsZ0NBQWdDO0FBQ2hDO0FBQ0EsS0FBSztBQUNMO0FBQzBKO0FBQzVGO0FBQ3RCO0FBQzBCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ08sK0JBQStCLGdEQUFVO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLGVBQWUsY0FBYztBQUM3QixlQUFlLGFBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsUUFBUSw2REFBcUI7QUFDN0IsUUFBUSx5RUFBaUMseUNBQXlDLHFGQUErQyxHQUFHLGdEQUFVLENBQUMscUZBQStDO0FBQzlMLDREQUE0RCwyRUFBdUI7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsY0FBYztBQUM3QixlQUFlLGdDQUFnQztBQUMvQyxlQUFlLGFBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBLFFBQVEsaUVBQXlCO0FBQ2pDLDJDQUEyQyxtRkFBNkM7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBLDJDQUEyQyxpRkFBMkM7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQSxRQUFRLHlFQUFpQztBQUN6QyxvQ0FBb0MsaUZBQTJDO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQSxRQUFRLGlFQUF5QjtBQUNqQywyQ0FBMkMscUZBQStDO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixjQUFjO0FBQy9CO0FBQ0E7QUFDQSxRQUFRLGlFQUF5QjtBQUNqQyx3Q0FBd0MsNEVBQXdCLEVBQUUsa0RBQVksQ0FBQyx5REFBbUIsT0FBTyxrREFBWSxDQUFDLHlEQUFtQjtBQUN6SSxtQkFBbUIseURBQW1CO0FBQ3RDO0FBQ0E7QUFDQSxtQkFBbUIsMkRBQXFCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG9CQUFvQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwwRUFBeUIsNkJBQTZCLCtFQUEyQjtBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwwRUFBeUIsMENBQTBDLGdGQUE0QjtBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMEVBQXlCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5QkFBeUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsNkRBQXFCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUF5QjtBQUNqQyxRQUFRLDBFQUF5QjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLG1CQUFtQixvRUFBZ0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDJFQUF1QjtBQUMxQztBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7Ozs7O0FDck9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7OztBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGtFQUFrRTs7QUFFbkU7Ozs7Ozs7Ozs7Ozs7Ozs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGVBQWUsdUJBQXVCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix1QkFBdUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7OztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxrRUFBa0U7O0FBRW5FOzs7Ozs7Ozs7Ozs7Ozs7OztBQzVOQTtBQUNBO0FBQzRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxvQ0FBb0Ms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Q0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCw0RUFBNEU7QUFDekk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0QsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDQTtBQUNBLHlDQUF5QyxtREFBSztBQUM5QztBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxzQkFBc0I7QUFDdEI7QUFDQSwwQkFBMEI7QUFDMUIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBLFNBQVM7QUFDVDtBQUNBLFVBQVUsSUFBSTtBQUNkO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCx5Q0FBeUM7QUFDekM7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCx5Q0FBeUM7QUFDekM7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCx5Q0FBeUM7QUFDekM7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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LFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFT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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOzs7QUFHQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsQ0FBQztBQUNEOzs7Ozs7Ozs7OztBQ3B2Q0E7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7OztBQ0FBOzs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7OztBQ0FBOzs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOzs7Ozs7Ozs7OztBQy90QkEsdUJBQXVCLG1CQUFPLENBQUMsdURBQVc7O0FBRTFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxVQUFVLG1CQUFtQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7VUMxREE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTs7VUFFQTtVQUNBOztVQUVBO1VBQ0E7VUFDQTs7Ozs7V0N0QkE7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLGlDQUFpQyxXQUFXO1dBQzVDO1dBQ0E7Ozs7O1dDUEE7V0FDQTtXQUNBO1dBQ0E7V0FDQSx5Q0FBeUMsd0NBQXdDO1dBQ2pGO1dBQ0E7V0FDQTs7Ozs7V0NQQTs7Ozs7V0NBQTtXQUNBO1dBQ0E7V0FDQSx1REFBdUQsaUJBQWlCO1dBQ3hFO1dBQ0EsZ0RBQWdELGFBQWE7V0FDN0Q7Ozs7O1VFTkE7VUFDQTtVQUNBO1VBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9iZW50L3NyYy9icm93c2VyLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL2JlbnQvc3JjL2NvcmUuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvY29udGVudC10eXBlL2luZGV4LmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL2V2ZW50c291cmNlLXBhcnNlci9kaXN0L2luZGV4LmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L21pY3Jvc29mdC5jb2duaXRpdmVzZXJ2aWNlcy5zcGVlY2guc2RrLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uYnJvd3Nlci9Db25zb2xlTG9nZ2luZ0xpc3RlbmVyLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uYnJvd3Nlci9GaWxlQXVkaW9Tb3VyY2UuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5icm93c2VyL01pY0F1ZGlvU291cmNlLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uYnJvd3Nlci9QQ01SZWNvcmRlci5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLmJyb3dzZXIvUHJveHlJbmZvLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uYnJvd3Nlci9SZXBsYXlhYmxlQXVkaW9Ob2RlLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uYnJvd3Nlci9SZXN0Q29uZmlnQmFzZS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLmJyb3dzZXIvUmVzdE1lc3NhZ2VBZGFwdGVyLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uYnJvd3Nlci9XZWJzb2NrZXRDb25uZWN0aW9uLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uYnJvd3Nlci9XZWJzb2NrZXRNZXNzYWdlQWRhcHRlci5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9BZGRlZExtSW50ZW50LmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0FnZW50Q29uZmlnLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0NvZ25pdGl2ZVN1YnNjcmlwdGlvbktleUF1dGhlbnRpY2F0aW9uLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0NvZ25pdGl2ZVRva2VuQXV0aGVudGljYXRpb24uanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvQ29ubmVjdGlvbkZhY3RvcnlCYXNlLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0NvbnZlcnNhdGlvblNlcnZpY2VSZWNvZ25pemVyLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0RpYWxvZ0Nvbm5lY3RvckZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvRGlhbG9nU2VydmljZUFkYXB0ZXIuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvRGlhbG9nU2VydmljZVR1cm5TdGF0ZS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9EaWFsb2dTZXJ2aWNlVHVyblN0YXRlTWFuYWdlci5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9EeW5hbWljR3JhbW1hckJ1aWxkZXIuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvRHluYW1pY0dyYW1tYXJJbnRlcmZhY2VzLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0VudW1UcmFuc2xhdGlvbi5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9FeHBvcnRzLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0hlYWRlck5hbWVzLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0lBdXRoZW50aWNhdGlvbi5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9JQ29ubmVjdGlvbkZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvSVN5bnRoZXNpc0Nvbm5lY3Rpb25GYWN0b3J5LmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0ludGVudENvbm5lY3Rpb25GYWN0b3J5LmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL0ludGVudFNlcnZpY2VSZWNvZ25pemVyLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1F1ZXJ5UGFyYW1ldGVyTmFtZXMuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvUmVjb2duaXRpb25FdmVudHMuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvUmVjb2duaXplckNvbmZpZy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9SZXF1ZXN0U2Vzc2lvbi5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TZXJ2aWNlTWVzc2FnZXMvQWN0aXZpdHlSZXNwb25zZVBheWxvYWQuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL0RldGFpbGVkU3BlZWNoUGhyYXNlLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NlcnZpY2VNZXNzYWdlcy9FbnVtcy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TZXJ2aWNlTWVzc2FnZXMvSW50ZW50UmVzcG9uc2UuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL1NpbXBsZVNwZWVjaFBocmFzZS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TZXJ2aWNlTWVzc2FnZXMvU3BlYWtlclJlc3BvbnNlLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NlcnZpY2VNZXNzYWdlcy9TcGVlY2hEZXRlY3RlZC5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TZXJ2aWNlTWVzc2FnZXMvU3BlZWNoSHlwb3RoZXNpcy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TZXJ2aWNlTWVzc2FnZXMvU3BlZWNoS2V5d29yZC5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TZXJ2aWNlTWVzc2FnZXMvU3ludGhlc2lzQXVkaW9NZXRhZGF0YS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TZXJ2aWNlTWVzc2FnZXMvVHJhbnNsYXRpb25IeXBvdGhlc2lzLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NlcnZpY2VNZXNzYWdlcy9UcmFuc2xhdGlvblBocmFzZS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TZXJ2aWNlTWVzc2FnZXMvVHJhbnNsYXRpb25TeW50aGVzaXNFbmQuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL1R1cm5TdGF0dXNQYXlsb2FkLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NlcnZpY2VSZWNvZ25pemVyQmFzZS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIuSW50ZXJuYWwuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU3BlYWtlclJlY29nbml0aW9uQ29uZmlnLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NwZWFrZXJSZWNvZ25pdGlvbkNvbm5lY3Rpb25GYWN0b3J5LmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NwZWFrZXJTZXJ2aWNlUmVjb2duaXplci5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TcGVlY2hDb25uZWN0aW9uRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TcGVlY2hDb25uZWN0aW9uTWVzc2FnZS5JbnRlcm5hbC5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9TcGVlY2hDb250ZXh0LmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NwZWVjaFNlcnZpY2VJbnRlcmZhY2VzLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NwZWVjaFNlcnZpY2VSZWNvZ25pemVyLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1NwZWVjaFN5bnRoZXNpc0Nvbm5lY3Rpb25GYWN0b3J5LmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1N5bnRoZXNpc0FkYXB0ZXJCYXNlLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1N5bnRoZXNpc0NvbnRleHQuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU3ludGhlc2lzRXZlbnRzLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1N5bnRoZXNpc1Jlc3RBZGFwdGVyLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1N5bnRoZXNpc1R1cm4uanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvU3ludGhlc2l6ZXJDb25maWcuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNjcmliZXJDb25uZWN0aW9uRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9UcmFuc2NyaXB0aW9uL0NvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNjcmlwdGlvbi9Db252ZXJzYXRpb25Db25uZWN0aW9uRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9UcmFuc2NyaXB0aW9uL0NvbnZlcnNhdGlvbkNvbm5lY3Rpb25NZXNzYWdlLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1RyYW5zY3JpcHRpb24vQ29udmVyc2F0aW9uTWFuYWdlci5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9UcmFuc2NyaXB0aW9uL0NvbnZlcnNhdGlvblJlcXVlc3RTZXNzaW9uLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1RyYW5zY3JpcHRpb24vQ29udmVyc2F0aW9uU2VydmljZUFkYXB0ZXIuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNjcmlwdGlvbi9Db252ZXJzYXRpb25UcmFuc2xhdG9yQ29ubmVjdGlvbkZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNjcmlwdGlvbi9Db252ZXJzYXRpb25UcmFuc2xhdG9yRXZlbnRBcmdzLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1RyYW5zY3JpcHRpb24vQ29udmVyc2F0aW9uVHJhbnNsYXRvckludGVyZmFjZXMuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNjcmlwdGlvbi9Db252ZXJzYXRpb25UcmFuc2xhdG9yUmVjb2duaXplci5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9UcmFuc2NyaXB0aW9uL0NvbnZlcnNhdGlvbldlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNjcmlwdGlvbi9FeHBvcnRzLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1RyYW5zY3JpcHRpb24vU2VydmljZU1lc3NhZ2VzL0NvbW1hbmRSZXNwb25zZVBheWxvYWQuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNjcmlwdGlvbi9TZXJ2aWNlTWVzc2FnZXMvUGFydGljaXBhbnRSZXNwb25zZVBheWxvYWQuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNjcmlwdGlvbi9TZXJ2aWNlTWVzc2FnZXMvVHJhbnNsYXRpb25SZXNwb25zZVBheWxvYWQuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNjcmlwdGlvbi9UcmFuc2NyaWJlclJlY29nbml6ZXIuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNjcmlwdGlvblNlcnZpY2VSZWNvZ25pemVyLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1RyYW5zbGF0aW9uQ29ubmVjdGlvbkZhY3RvcnkuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5zcGVlY2gvVHJhbnNsYXRpb25TZXJ2aWNlUmVjb2duaXplci5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9UcmFuc2xhdGlvblN0YXR1cy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLnNwZWVjaC9Wb2ljZVNlcnZpY2VSZWNvZ25pemVyLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uc3BlZWNoL1dlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9BdWRpb1NvdXJjZUV2ZW50cy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL0JhY2tncm91bmRFcnJvci5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL0NodW5rZWRBcnJheUJ1ZmZlclN0cmVhbS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL0Nvbm5lY3Rpb25FdmVudHMuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9Db25uZWN0aW9uTWVzc2FnZS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL0Nvbm5lY3Rpb25PcGVuUmVzcG9uc2UuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9EZWZlcnJhbE1hcC5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL0RpYWxvZ0V2ZW50cy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL0Vycm9yLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vRXZlbnRTb3VyY2UuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9FdmVudHMuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9HdWlkLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vSUNvbm5lY3Rpb24uanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9MaXN0LmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vUGxhdGZvcm1FdmVudC5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL1Byb21pc2UuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9RdWV1ZS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL1Jhd1dlYnNvY2tldE1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi9SaWZmUGNtRW5jb2Rlci5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL1N0cmVhbS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uL1N0cmluZ1V0aWxzLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24vVGltZW91dC5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0FjdGl2aXR5UmVjZWl2ZWRFdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9BdWRpby9BdWRpb0NvbmZpZy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0F1ZGlvL0F1ZGlvRmlsZVdyaXRlci5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0F1ZGlvL0F1ZGlvSW5wdXRTdHJlYW0uanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9BdWRpby9BdWRpb091dHB1dEZvcm1hdC5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0F1ZGlvL0F1ZGlvT3V0cHV0U3RyZWFtLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvQXVkaW8vQXVkaW9TdHJlYW1Gb3JtYXQuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9BdWRpby9CYXNlQXVkaW9QbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9BdWRpby9QdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvQXVkaW8vUHVzaEF1ZGlvT3V0cHV0U3RyZWFtQ2FsbGJhY2suanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9BdWRpby9TcGVha2VyQXVkaW9EZXN0aW5hdGlvbi5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0F1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0F1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZVJlc3VsdC5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0JvdEZyYW1ld29ya0NvbmZpZy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0NhbmNlbGxhdGlvbkRldGFpbHMuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9DYW5jZWxsYXRpb25EZXRhaWxzQmFzZS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0NhbmNlbGxhdGlvbkVycm9yQ29kZXMuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9DYW5jZWxsYXRpb25FdmVudEFyZ3NCYXNlLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvQ2FuY2VsbGF0aW9uUmVhc29uLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvQ29ubmVjdGlvbi5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0Nvbm5lY3Rpb25FdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Db25uZWN0aW9uTWVzc2FnZS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0Nvbm5lY3Rpb25NZXNzYWdlRXZlbnRBcmdzLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvQ29udHJhY3RzLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvQ29udmVyc2F0aW9uVHJhbnNjcmlwdGlvbkNhbmNlbGVkRXZlbnRBcmdzLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvQ3VzdG9tQ29tbWFuZHNDb25maWcuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9EaWFnbm9zdGljcy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0RpYWxvZ1NlcnZpY2VDb25maWcuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9EaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvRXhwb3J0cy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0ludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9JbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0ludGVudFJlY29nbml0aW9uUmVzdWx0LmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvSW50ZW50UmVjb2duaXplci5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0tleXdvcmRSZWNvZ25pdGlvbk1vZGVsLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvTGFuZ3VhZ2VJZE1vZGUuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9MYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbC5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL05vTWF0Y2hEZXRhaWxzLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvTm9NYXRjaFJlYXNvbi5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL091dHB1dEZvcm1hdC5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1BocmFzZUxpc3RHcmFtbWFyLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvUHJvZmFuaXR5T3B0aW9uLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRDb25maWcuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Qcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYWRpbmdTeXN0ZW0uanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Qcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYW51bGFyaXR5LmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRSZXN1bHQuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Qcm9wZXJ0eUNvbGxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Qcm9wZXJ0eUlkLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvUmVjb2duaXRpb25FdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9SZWNvZ25pdGlvblJlc3VsdC5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1JlY29nbml6ZXIuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9SZXN1bHRSZWFzb24uanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9TZXJ2aWNlRXZlbnRBcmdzLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvU2VydmljZVByb3BlcnR5Q2hhbm5lbC5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1Nlc3Npb25FdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Tb3VyY2VMYW5ndWFnZUNvbmZpZy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NwZWFrZXJJZGVudGlmaWNhdGlvbk1vZGVsLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvU3BlYWtlclJlY29nbml0aW9uUmVzdWx0LmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvU3BlYWtlclJlY29nbml6ZXIuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9TcGVha2VyVmVyaWZpY2F0aW9uTW9kZWwuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9TcGVlY2hDb25maWcuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9TcGVlY2hSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvU3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9TcGVlY2hSZWNvZ25pdGlvblJlc3VsdC5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NwZWVjaFJlY29nbml6ZXIuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9TcGVlY2hTeW50aGVzaXNCb29rbWFya0V2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NwZWVjaFN5bnRoZXNpc0JvdW5kYXJ5VHlwZS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NwZWVjaFN5bnRoZXNpc0V2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NwZWVjaFN5bnRoZXNpc1Jlc3VsdC5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NwZWVjaFN5bnRoZXNpc1Zpc2VtZUV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NwZWVjaFN5bnRoZXNpc1dvcmRCb3VuZGFyeUV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1NwZWVjaFN5bnRoZXNpemVyLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvU3BlZWNoVHJhbnNsYXRpb25Db25maWcuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9TeW50aGVzaXNSZXN1bHQuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9TeW50aGVzaXNWb2ljZXNSZXN1bHQuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9UcmFuc2NyaXB0aW9uL0NvbnZlcnNhdGlvbi5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1RyYW5zY3JpcHRpb24vQ29udmVyc2F0aW9uQ29tbW9uLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVHJhbnNjcmlwdGlvbi9Db252ZXJzYXRpb25FeHBpcmF0aW9uRXZlbnRBcmdzLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVHJhbnNjcmlwdGlvbi9Db252ZXJzYXRpb25QYXJ0aWNpcGFudHNDaGFuZ2VkRXZlbnRBcmdzLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVHJhbnNjcmlwdGlvbi9Db252ZXJzYXRpb25UcmFuc2NyaWJlci5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1RyYW5zY3JpcHRpb24vQ29udmVyc2F0aW9uVHJhbnNsYXRpb25DYW5jZWxlZEV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1RyYW5zY3JpcHRpb24vQ29udmVyc2F0aW9uVHJhbnNsYXRpb25FdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9UcmFuc2NyaXB0aW9uL0NvbnZlcnNhdGlvblRyYW5zbGF0aW9uUmVzdWx0LmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVHJhbnNjcmlwdGlvbi9Db252ZXJzYXRpb25UcmFuc2xhdG9yLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVHJhbnNjcmlwdGlvbi9JUGFydGljaXBhbnQuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9UcmFuc2NyaXB0aW9uL1BhcnRpY2lwYW50Q2hhbmdlZFJlYXNvbi5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1RyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1RyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9UcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0LmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVHJhbnNsYXRpb25SZWNvZ25pemVyLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9zZGsvVHJhbnNsYXRpb25TeW50aGVzaXNFdmVudEFyZ3MuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9UcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdC5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1RyYW5zbGF0aW9ucy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1R1cm5TdGF0dXNSZWNlaXZlZEV2ZW50QXJncy5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1ZvaWNlSW5mby5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1ZvaWNlUHJvZmlsZS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1ZvaWNlUHJvZmlsZUNsaWVudC5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL1ZvaWNlUHJvZmlsZUVucm9sbG1lbnRSZXN1bHQuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Wb2ljZVByb2ZpbGVQaHJhc2VSZXN1bHQuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Wb2ljZVByb2ZpbGVSZXN1bHQuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL3Nkay9Wb2ljZVByb2ZpbGVUeXBlLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vc3JjL09wdGlvbnMvbW9kZWxzLnRzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vc3JjL09wdGlvbnMvdXRpbC50cyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL3NyYy9iYWNrZ3JvdW5kL2luZGV4LnRzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vc3JjL2xpYi9sYW5nLnRzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vc3JjL3V0aWwudHMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvdW5zcGxhc2gtanMvZGlzdC91bnNwbGFzaC1qcy5lc20uanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2NvbW1vbmpzLWJyb3dzZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2NvbW1vbmpzLWJyb3dzZXIvbWQ1LmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9jb21tb25qcy1icm93c2VyL25hdGl2ZS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvY29tbW9uanMtYnJvd3Nlci9uaWwuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2NvbW1vbmpzLWJyb3dzZXIvcGFyc2UuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2NvbW1vbmpzLWJyb3dzZXIvcmVnZXguanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2NvbW1vbmpzLWJyb3dzZXIvcm5nLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9jb21tb25qcy1icm93c2VyL3NoYTEuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2NvbW1vbmpzLWJyb3dzZXIvc3RyaW5naWZ5LmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9jb21tb25qcy1icm93c2VyL3YxLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9jb21tb25qcy1icm93c2VyL3YzLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9jb21tb25qcy1icm93c2VyL3YzNS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvY29tbW9uanMtYnJvd3Nlci92NC5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvY29tbW9uanMtYnJvd3Nlci92NS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvY29tbW9uanMtYnJvd3Nlci92YWxpZGF0ZS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvY29tbW9uanMtYnJvd3Nlci92ZXJzaW9uLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9uYXRpdmUuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3JlZ2V4LmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9ybmcuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3N0cmluZ2lmeS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdjQuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3ZhbGlkYXRlLmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL3dlYmV4dGVuc2lvbi1wb2x5ZmlsbC9kaXN0L2Jyb3dzZXItcG9seWZpbGwuanMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvaWdub3JlZHwvVXNlcnMvamlhbmd6aWxvbmcv5a2m5LmgL21pbnBnL0xlYXJuaW5nLUVuZ2xpc2gvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uYnJvd3NlcnxhZ2VudC1iYXNlIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyL2lnbm9yZWR8L1VzZXJzL2ppYW5nemlsb25nL+WtpuS5oC9taW5wZy9MZWFybmluZy1FbmdsaXNoL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvY29tbW9uLmJyb3dzZXJ8ZnMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvaWdub3JlZHwvVXNlcnMvamlhbmd6aWxvbmcv5a2m5LmgL21pbnBnL0xlYXJuaW5nLUVuZ2xpc2gvbm9kZV9tb2R1bGVzL21pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrL2Rpc3RyaWIvZXMyMDE1L3NyYy9jb21tb24uYnJvd3NlcnxodHRwcy1wcm94eS1hZ2VudCIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci9pZ25vcmVkfC9Vc2Vycy9qaWFuZ3ppbG9uZy/lrabkuaAvbWlucGcvTGVhcm5pbmctRW5nbGlzaC9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5icm93c2VyfG5ldCIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci9pZ25vcmVkfC9Vc2Vycy9qaWFuZ3ppbG9uZy/lrabkuaAvbWlucGcvTGVhcm5pbmctRW5nbGlzaC9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5icm93c2VyfHRscyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci9pZ25vcmVkfC9Vc2Vycy9qaWFuZ3ppbG9uZy/lrabkuaAvbWlucGcvTGVhcm5pbmctRW5nbGlzaC9ub2RlX21vZHVsZXMvbWljcm9zb2Z0LWNvZ25pdGl2ZXNlcnZpY2VzLXNwZWVjaC1zZGsvZGlzdHJpYi9lczIwMTUvc3JjL2NvbW1vbi5icm93c2VyfHdzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyL2lnbm9yZWR8L1VzZXJzL2ppYW5nemlsb25nL+WtpuS5oC9taW5wZy9MZWFybmluZy1FbmdsaXNoL25vZGVfbW9kdWxlcy9taWNyb3NvZnQtY29nbml0aXZlc2VydmljZXMtc3BlZWNoLXNkay9kaXN0cmliL2VzMjAxNS9zcmMvc2RrL0F1ZGlvfGZzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vbm9kZV9tb2R1bGVzL2lzby02MzktMS9zcmMvZGF0YS5qcyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL25vZGVfbW9kdWxlcy9pc28tNjM5LTEvc3JjL2luZGV4LmpzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvd2VicGFjay9iZWZvcmUtc3RhcnR1cCIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvd2VicGFjay9hZnRlci1zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuLyogZ2xvYmFsIGZldGNoLCBidG9hLCBIZWFkZXJzICovXG5jb25zdCBjb3JlID0gcmVxdWlyZSgnLi9jb3JlJylcblxuY2xhc3MgU3RhdHVzRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yIChyZXMsIC4uLnBhcmFtcykge1xuICAgIHN1cGVyKC4uLnBhcmFtcylcblxuICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgU3RhdHVzRXJyb3IpXG4gICAgfVxuXG4gICAgdGhpcy5uYW1lID0gJ1N0YXR1c0Vycm9yJ1xuICAgIHRoaXMubWVzc2FnZSA9IHJlcy5zdGF0dXNNZXNzYWdlXG4gICAgdGhpcy5zdGF0dXNDb2RlID0gcmVzLnN0YXR1c1xuICAgIHRoaXMucmVzID0gcmVzXG4gICAgdGhpcy5qc29uID0gcmVzLmpzb24uYmluZChyZXMpXG4gICAgdGhpcy50ZXh0ID0gcmVzLnRleHQuYmluZChyZXMpXG4gICAgdGhpcy5hcnJheUJ1ZmZlciA9IHJlcy5hcnJheUJ1ZmZlci5iaW5kKHJlcylcbiAgICBsZXQgYnVmZmVyXG4gICAgY29uc3QgZ2V0ID0gKCkgPT4ge1xuICAgICAgaWYgKCFidWZmZXIpIGJ1ZmZlciA9IHRoaXMuYXJyYXlCdWZmZXIoKVxuICAgICAgcmV0dXJuIGJ1ZmZlclxuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3Jlc3BvbnNlQm9keScsIHsgZ2V0IH0pXG4gICAgLy8gbWF0Y2ggTm9kZS5qcyBoZWFkZXJzIG9iamVjdFxuICAgIHRoaXMuaGVhZGVycyA9IHt9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgcmVzLmhlYWRlcnMuZW50cmllcygpKSB7XG4gICAgICB0aGlzLmhlYWRlcnNba2V5LnRvTG93ZXJDYXNlKCldID0gdmFsdWVcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgbWtyZXF1ZXN0ID0gKHN0YXR1c0NvZGVzLCBtZXRob2QsIGVuY29kaW5nLCBoZWFkZXJzLCBiYXNldXJsKSA9PiBhc3luYyAoX3VybCwgYm9keSwgX2hlYWRlcnMgPSB7fSkgPT4ge1xuICBfdXJsID0gYmFzZXVybCArIChfdXJsIHx8ICcnKVxuICBsZXQgcGFyc2VkID0gbmV3IFVSTChfdXJsKVxuXG4gIGlmICghaGVhZGVycykgaGVhZGVycyA9IHt9XG4gIGlmIChwYXJzZWQudXNlcm5hbWUpIHtcbiAgICBoZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmFzaWMgJyArIGJ0b2EocGFyc2VkLnVzZXJuYW1lICsgJzonICsgcGFyc2VkLnBhc3N3b3JkKVxuICAgIHBhcnNlZCA9IG5ldyBVUkwocGFyc2VkLnByb3RvY29sICsgJy8vJyArIHBhcnNlZC5ob3N0ICsgcGFyc2VkLnBhdGhuYW1lICsgcGFyc2VkLnNlYXJjaClcbiAgfVxuICBpZiAocGFyc2VkLnByb3RvY29sICE9PSAnaHR0cHM6JyAmJiBwYXJzZWQucHJvdG9jb2wgIT09ICdodHRwOicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gcHJvdG9jb2wsICR7cGFyc2VkLnByb3RvY29sfWApXG4gIH1cblxuICBpZiAoYm9keSkge1xuICAgIGlmIChib2R5IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgfHxcbiAgICAgIEFycmF5QnVmZmVyLmlzVmlldyhib2R5KSB8fFxuICAgICAgdHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnXG4gICAgKSB7XG4gICAgICAvLyBub29wXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYm9keSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGJvZHkgPSBKU09OLnN0cmluZ2lmeShib2R5KVxuICAgICAgaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbidcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGJvZHkgdHlwZS4nKVxuICAgIH1cbiAgfVxuXG4gIF9oZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAuLi4oaGVhZGVycyB8fCB7fSksIC4uLl9oZWFkZXJzIH0pXG5cbiAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKHBhcnNlZCwgeyBtZXRob2QsIGhlYWRlcnM6IF9oZWFkZXJzLCBib2R5IH0pXG4gIHJlc3Auc3RhdHVzQ29kZSA9IHJlc3Auc3RhdHVzXG5cbiAgaWYgKCFzdGF0dXNDb2Rlcy5oYXMocmVzcC5zdGF0dXMpKSB7XG4gICAgdGhyb3cgbmV3IFN0YXR1c0Vycm9yKHJlc3ApXG4gIH1cblxuICBpZiAoZW5jb2RpbmcgPT09ICdqc29uJykgcmV0dXJuIHJlc3AuanNvbigpXG4gIGVsc2UgaWYgKGVuY29kaW5nID09PSAnYnVmZmVyJykgcmV0dXJuIHJlc3AuYXJyYXlCdWZmZXIoKVxuICBlbHNlIGlmIChlbmNvZGluZyA9PT0gJ3N0cmluZycpIHJldHVybiByZXNwLnRleHQoKVxuICBlbHNlIHJldHVybiByZXNwXG59XG5cbm1vZHVsZS5leHBvcnRzID0gY29yZShta3JlcXVlc3QpXG4iLCIndXNlIHN0cmljdCdcbmNvbnN0IGVuY29kaW5ncyA9IG5ldyBTZXQoWydqc29uJywgJ2J1ZmZlcicsICdzdHJpbmcnXSlcblxubW9kdWxlLmV4cG9ydHMgPSBta3JlcXVlc3QgPT4gKC4uLmFyZ3MpID0+IHtcbiAgY29uc3Qgc3RhdHVzQ29kZXMgPSBuZXcgU2V0KClcbiAgbGV0IG1ldGhvZFxuICBsZXQgZW5jb2RpbmdcbiAgbGV0IGhlYWRlcnNcbiAgbGV0IGJhc2V1cmwgPSAnJ1xuXG4gIGFyZ3MuZm9yRWFjaChhcmcgPT4ge1xuICAgIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKGFyZy50b1VwcGVyQ2FzZSgpID09PSBhcmcpIHtcbiAgICAgICAgaWYgKG1ldGhvZCkge1xuICAgICAgICAgIGNvbnN0IG1zZyA9IGBDYW4ndCBzZXQgbWV0aG9kIHRvICR7YXJnfSwgYWxyZWFkeSBzZXQgdG8gJHttZXRob2R9LmBcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1ldGhvZCA9IGFyZ1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZy5zdGFydHNXaXRoKCdodHRwOicpIHx8IGFyZy5zdGFydHNXaXRoKCdodHRwczonKSkge1xuICAgICAgICBiYXNldXJsID0gYXJnXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZW5jb2RpbmdzLmhhcyhhcmcpKSB7XG4gICAgICAgICAgZW5jb2RpbmcgPSBhcmdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZW5jb2RpbmcsICR7YXJnfWApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG4gICAgICBzdGF0dXNDb2Rlcy5hZGQoYXJnKVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGFyZykgfHwgYXJnIGluc3RhbmNlb2YgU2V0KSB7XG4gICAgICAgIGFyZy5mb3JFYWNoKGNvZGUgPT4gc3RhdHVzQ29kZXMuYWRkKGNvZGUpKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGhlYWRlcnMpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBzZXQgaGVhZGVycyB0d2ljZS4nKVxuICAgICAgICB9XG4gICAgICAgIGhlYWRlcnMgPSBhcmdcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHR5cGU6ICR7dHlwZW9mIGFyZ31gKVxuICAgIH1cbiAgfSlcblxuICBpZiAoIW1ldGhvZCkgbWV0aG9kID0gJ0dFVCdcbiAgaWYgKHN0YXR1c0NvZGVzLnNpemUgPT09IDApIHtcbiAgICBzdGF0dXNDb2Rlcy5hZGQoMjAwKVxuICB9XG5cbiAgcmV0dXJuIG1rcmVxdWVzdChzdGF0dXNDb2RlcywgbWV0aG9kLCBlbmNvZGluZywgaGVhZGVycywgYmFzZXVybClcbn1cbiIsIi8qIVxuICogY29udGVudC10eXBlXG4gKiBDb3B5cmlnaHQoYykgMjAxNSBEb3VnbGFzIENocmlzdG9waGVyIFdpbHNvblxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuJ3VzZSBzdHJpY3QnXG5cbi8qKlxuICogUmVnRXhwIHRvIG1hdGNoICooIFwiO1wiIHBhcmFtZXRlciApIGluIFJGQyA3MjMxIHNlYyAzLjEuMS4xXG4gKlxuICogcGFyYW1ldGVyICAgICA9IHRva2VuIFwiPVwiICggdG9rZW4gLyBxdW90ZWQtc3RyaW5nIClcbiAqIHRva2VuICAgICAgICAgPSAxKnRjaGFyXG4gKiB0Y2hhciAgICAgICAgID0gXCIhXCIgLyBcIiNcIiAvIFwiJFwiIC8gXCIlXCIgLyBcIiZcIiAvIFwiJ1wiIC8gXCIqXCJcbiAqICAgICAgICAgICAgICAgLyBcIitcIiAvIFwiLVwiIC8gXCIuXCIgLyBcIl5cIiAvIFwiX1wiIC8gXCJgXCIgLyBcInxcIiAvIFwiflwiXG4gKiAgICAgICAgICAgICAgIC8gRElHSVQgLyBBTFBIQVxuICogICAgICAgICAgICAgICA7IGFueSBWQ0hBUiwgZXhjZXB0IGRlbGltaXRlcnNcbiAqIHF1b3RlZC1zdHJpbmcgPSBEUVVPVEUgKiggcWR0ZXh0IC8gcXVvdGVkLXBhaXIgKSBEUVVPVEVcbiAqIHFkdGV4dCAgICAgICAgPSBIVEFCIC8gU1AgLyAleDIxIC8gJXgyMy01QiAvICV4NUQtN0UgLyBvYnMtdGV4dFxuICogb2JzLXRleHQgICAgICA9ICV4ODAtRkZcbiAqIHF1b3RlZC1wYWlyICAgPSBcIlxcXCIgKCBIVEFCIC8gU1AgLyBWQ0hBUiAvIG9icy10ZXh0IClcbiAqL1xudmFyIFBBUkFNX1JFR0VYUCA9IC87ICooWyEjJCUmJyorLl5fYHx+MC05QS1aYS16LV0rKSAqPSAqKFwiKD86W1xcdTAwMGJcXHUwMDIwXFx1MDAyMVxcdTAwMjMtXFx1MDA1YlxcdTAwNWQtXFx1MDA3ZVxcdTAwODAtXFx1MDBmZl18XFxcXFtcXHUwMDBiXFx1MDAyMC1cXHUwMGZmXSkqXCJ8WyEjJCUmJyorLl5fYHx+MC05QS1aYS16LV0rKSAqL2cgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb250cm9sLXJlZ2V4XG52YXIgVEVYVF9SRUdFWFAgPSAvXltcXHUwMDBiXFx1MDAyMC1cXHUwMDdlXFx1MDA4MC1cXHUwMGZmXSskLyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbnZhciBUT0tFTl9SRUdFWFAgPSAvXlshIyQlJicqKy5eX2B8fjAtOUEtWmEtei1dKyQvXG5cbi8qKlxuICogUmVnRXhwIHRvIG1hdGNoIHF1b3RlZC1wYWlyIGluIFJGQyA3MjMwIHNlYyAzLjIuNlxuICpcbiAqIHF1b3RlZC1wYWlyID0gXCJcXFwiICggSFRBQiAvIFNQIC8gVkNIQVIgLyBvYnMtdGV4dCApXG4gKiBvYnMtdGV4dCAgICA9ICV4ODAtRkZcbiAqL1xudmFyIFFFU0NfUkVHRVhQID0gL1xcXFwoW1xcdTAwMGJcXHUwMDIwLVxcdTAwZmZdKS9nIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29udHJvbC1yZWdleFxuXG4vKipcbiAqIFJlZ0V4cCB0byBtYXRjaCBjaGFycyB0aGF0IG11c3QgYmUgcXVvdGVkLXBhaXIgaW4gUkZDIDcyMzAgc2VjIDMuMi42XG4gKi9cbnZhciBRVU9URV9SRUdFWFAgPSAvKFtcXFxcXCJdKS9nXG5cbi8qKlxuICogUmVnRXhwIHRvIG1hdGNoIHR5cGUgaW4gUkZDIDcyMzEgc2VjIDMuMS4xLjFcbiAqXG4gKiBtZWRpYS10eXBlID0gdHlwZSBcIi9cIiBzdWJ0eXBlXG4gKiB0eXBlICAgICAgID0gdG9rZW5cbiAqIHN1YnR5cGUgICAgPSB0b2tlblxuICovXG52YXIgVFlQRV9SRUdFWFAgPSAvXlshIyQlJicqKy5eX2B8fjAtOUEtWmEtei1dK1xcL1shIyQlJicqKy5eX2B8fjAtOUEtWmEtei1dKyQvXG5cbi8qKlxuICogTW9kdWxlIGV4cG9ydHMuXG4gKiBAcHVibGljXG4gKi9cblxuZXhwb3J0cy5mb3JtYXQgPSBmb3JtYXRcbmV4cG9ydHMucGFyc2UgPSBwYXJzZVxuXG4vKipcbiAqIEZvcm1hdCBvYmplY3QgdG8gbWVkaWEgdHlwZS5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKiBAcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0IChvYmopIHtcbiAgaWYgKCFvYmogfHwgdHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdhcmd1bWVudCBvYmogaXMgcmVxdWlyZWQnKVxuICB9XG5cbiAgdmFyIHBhcmFtZXRlcnMgPSBvYmoucGFyYW1ldGVyc1xuICB2YXIgdHlwZSA9IG9iai50eXBlXG5cbiAgaWYgKCF0eXBlIHx8ICFUWVBFX1JFR0VYUC50ZXN0KHR5cGUpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCB0eXBlJylcbiAgfVxuXG4gIHZhciBzdHJpbmcgPSB0eXBlXG5cbiAgLy8gYXBwZW5kIHBhcmFtZXRlcnNcbiAgaWYgKHBhcmFtZXRlcnMgJiYgdHlwZW9mIHBhcmFtZXRlcnMgPT09ICdvYmplY3QnKSB7XG4gICAgdmFyIHBhcmFtXG4gICAgdmFyIHBhcmFtcyA9IE9iamVjdC5rZXlzKHBhcmFtZXRlcnMpLnNvcnQoKVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJhbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHBhcmFtID0gcGFyYW1zW2ldXG5cbiAgICAgIGlmICghVE9LRU5fUkVHRVhQLnRlc3QocGFyYW0pKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgcGFyYW1ldGVyIG5hbWUnKVxuICAgICAgfVxuXG4gICAgICBzdHJpbmcgKz0gJzsgJyArIHBhcmFtICsgJz0nICsgcXN0cmluZyhwYXJhbWV0ZXJzW3BhcmFtXSlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3RyaW5nXG59XG5cbi8qKlxuICogUGFyc2UgbWVkaWEgdHlwZSB0byBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSBzdHJpbmdcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqIEBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZSAoc3RyaW5nKSB7XG4gIGlmICghc3RyaW5nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYXJndW1lbnQgc3RyaW5nIGlzIHJlcXVpcmVkJylcbiAgfVxuXG4gIC8vIHN1cHBvcnQgcmVxL3Jlcy1saWtlIG9iamVjdHMgYXMgYXJndW1lbnRcbiAgdmFyIGhlYWRlciA9IHR5cGVvZiBzdHJpbmcgPT09ICdvYmplY3QnXG4gICAgPyBnZXRjb250ZW50dHlwZShzdHJpbmcpXG4gICAgOiBzdHJpbmdcblxuICBpZiAodHlwZW9mIGhlYWRlciAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdhcmd1bWVudCBzdHJpbmcgaXMgcmVxdWlyZWQgdG8gYmUgYSBzdHJpbmcnKVxuICB9XG5cbiAgdmFyIGluZGV4ID0gaGVhZGVyLmluZGV4T2YoJzsnKVxuICB2YXIgdHlwZSA9IGluZGV4ICE9PSAtMVxuICAgID8gaGVhZGVyLnNsaWNlKDAsIGluZGV4KS50cmltKClcbiAgICA6IGhlYWRlci50cmltKClcblxuICBpZiAoIVRZUEVfUkVHRVhQLnRlc3QodHlwZSkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIG1lZGlhIHR5cGUnKVxuICB9XG5cbiAgdmFyIG9iaiA9IG5ldyBDb250ZW50VHlwZSh0eXBlLnRvTG93ZXJDYXNlKCkpXG5cbiAgLy8gcGFyc2UgcGFyYW1ldGVyc1xuICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgdmFyIGtleVxuICAgIHZhciBtYXRjaFxuICAgIHZhciB2YWx1ZVxuXG4gICAgUEFSQU1fUkVHRVhQLmxhc3RJbmRleCA9IGluZGV4XG5cbiAgICB3aGlsZSAoKG1hdGNoID0gUEFSQU1fUkVHRVhQLmV4ZWMoaGVhZGVyKSkpIHtcbiAgICAgIGlmIChtYXRjaC5pbmRleCAhPT0gaW5kZXgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBwYXJhbWV0ZXIgZm9ybWF0JylcbiAgICAgIH1cblxuICAgICAgaW5kZXggKz0gbWF0Y2hbMF0ubGVuZ3RoXG4gICAgICBrZXkgPSBtYXRjaFsxXS50b0xvd2VyQ2FzZSgpXG4gICAgICB2YWx1ZSA9IG1hdGNoWzJdXG5cbiAgICAgIGlmICh2YWx1ZS5jaGFyQ29kZUF0KDApID09PSAweDIyIC8qIFwiICovKSB7XG4gICAgICAgIC8vIHJlbW92ZSBxdW90ZXNcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgxLCAtMSlcblxuICAgICAgICAvLyByZW1vdmUgZXNjYXBlc1xuICAgICAgICBpZiAodmFsdWUuaW5kZXhPZignXFxcXCcpICE9PSAtMSkge1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZShRRVNDX1JFR0VYUCwgJyQxJylcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBvYmoucGFyYW1ldGVyc1trZXldID0gdmFsdWVcbiAgICB9XG5cbiAgICBpZiAoaW5kZXggIT09IGhlYWRlci5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgcGFyYW1ldGVyIGZvcm1hdCcpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9ialxufVxuXG4vKipcbiAqIEdldCBjb250ZW50LXR5cGUgZnJvbSByZXEvcmVzIG9iamVjdHMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9XG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGdldGNvbnRlbnR0eXBlIChvYmopIHtcbiAgdmFyIGhlYWRlclxuXG4gIGlmICh0eXBlb2Ygb2JqLmdldEhlYWRlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIHJlcy1saWtlXG4gICAgaGVhZGVyID0gb2JqLmdldEhlYWRlcignY29udGVudC10eXBlJylcbiAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqLmhlYWRlcnMgPT09ICdvYmplY3QnKSB7XG4gICAgLy8gcmVxLWxpa2VcbiAgICBoZWFkZXIgPSBvYmouaGVhZGVycyAmJiBvYmouaGVhZGVyc1snY29udGVudC10eXBlJ11cbiAgfVxuXG4gIGlmICh0eXBlb2YgaGVhZGVyICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2NvbnRlbnQtdHlwZSBoZWFkZXIgaXMgbWlzc2luZyBmcm9tIG9iamVjdCcpXG4gIH1cblxuICByZXR1cm4gaGVhZGVyXG59XG5cbi8qKlxuICogUXVvdGUgYSBzdHJpbmcgaWYgbmVjZXNzYXJ5LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWxcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcXN0cmluZyAodmFsKSB7XG4gIHZhciBzdHIgPSBTdHJpbmcodmFsKVxuXG4gIC8vIG5vIG5lZWQgdG8gcXVvdGUgdG9rZW5zXG4gIGlmIChUT0tFTl9SRUdFWFAudGVzdChzdHIpKSB7XG4gICAgcmV0dXJuIHN0clxuICB9XG5cbiAgaWYgKHN0ci5sZW5ndGggPiAwICYmICFURVhUX1JFR0VYUC50ZXN0KHN0cikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIHBhcmFtZXRlciB2YWx1ZScpXG4gIH1cblxuICByZXR1cm4gJ1wiJyArIHN0ci5yZXBsYWNlKFFVT1RFX1JFR0VYUCwgJ1xcXFwkMScpICsgJ1wiJ1xufVxuXG4vKipcbiAqIENsYXNzIHRvIHJlcHJlc2VudCBhIGNvbnRlbnQgdHlwZS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIENvbnRlbnRUeXBlICh0eXBlKSB7XG4gIHRoaXMucGFyYW1ldGVycyA9IE9iamVjdC5jcmVhdGUobnVsbClcbiAgdGhpcy50eXBlID0gdHlwZVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmZ1bmN0aW9uIGNyZWF0ZVBhcnNlcihvblBhcnNlKSB7XG4gIGxldCBpc0ZpcnN0Q2h1bms7XG4gIGxldCBidWZmZXI7XG4gIGxldCBzdGFydGluZ1Bvc2l0aW9uO1xuICBsZXQgc3RhcnRpbmdGaWVsZExlbmd0aDtcbiAgbGV0IGV2ZW50SWQ7XG4gIGxldCBldmVudE5hbWU7XG4gIGxldCBkYXRhO1xuICByZXNldCgpO1xuICByZXR1cm4ge1xuICAgIGZlZWQsXG4gICAgcmVzZXRcbiAgfTtcbiAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgaXNGaXJzdENodW5rID0gdHJ1ZTtcbiAgICBidWZmZXIgPSBcIlwiO1xuICAgIHN0YXJ0aW5nUG9zaXRpb24gPSAwO1xuICAgIHN0YXJ0aW5nRmllbGRMZW5ndGggPSAtMTtcbiAgICBldmVudElkID0gdm9pZCAwO1xuICAgIGV2ZW50TmFtZSA9IHZvaWQgMDtcbiAgICBkYXRhID0gXCJcIjtcbiAgfVxuICBmdW5jdGlvbiBmZWVkKGNodW5rKSB7XG4gICAgYnVmZmVyID0gYnVmZmVyID8gYnVmZmVyICsgY2h1bmsgOiBjaHVuaztcbiAgICBpZiAoaXNGaXJzdENodW5rICYmIGhhc0JvbShidWZmZXIpKSB7XG4gICAgICBidWZmZXIgPSBidWZmZXIuc2xpY2UoQk9NLmxlbmd0aCk7XG4gICAgfVxuICAgIGlzRmlyc3RDaHVuayA9IGZhbHNlO1xuICAgIGNvbnN0IGxlbmd0aCA9IGJ1ZmZlci5sZW5ndGg7XG4gICAgbGV0IHBvc2l0aW9uID0gMDtcbiAgICBsZXQgZGlzY2FyZFRyYWlsaW5nTmV3bGluZSA9IGZhbHNlO1xuICAgIHdoaWxlIChwb3NpdGlvbiA8IGxlbmd0aCkge1xuICAgICAgaWYgKGRpc2NhcmRUcmFpbGluZ05ld2xpbmUpIHtcbiAgICAgICAgaWYgKGJ1ZmZlcltwb3NpdGlvbl0gPT09IFwiXFxuXCIpIHtcbiAgICAgICAgICArK3Bvc2l0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGRpc2NhcmRUcmFpbGluZ05ld2xpbmUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGxldCBsaW5lTGVuZ3RoID0gLTE7XG4gICAgICBsZXQgZmllbGRMZW5ndGggPSBzdGFydGluZ0ZpZWxkTGVuZ3RoO1xuICAgICAgbGV0IGNoYXJhY3RlcjtcbiAgICAgIGZvciAobGV0IGluZGV4ID0gc3RhcnRpbmdQb3NpdGlvbjsgbGluZUxlbmd0aCA8IDAgJiYgaW5kZXggPCBsZW5ndGg7ICsraW5kZXgpIHtcbiAgICAgICAgY2hhcmFjdGVyID0gYnVmZmVyW2luZGV4XTtcbiAgICAgICAgaWYgKGNoYXJhY3RlciA9PT0gXCI6XCIgJiYgZmllbGRMZW5ndGggPCAwKSB7XG4gICAgICAgICAgZmllbGRMZW5ndGggPSBpbmRleCAtIHBvc2l0aW9uO1xuICAgICAgICB9IGVsc2UgaWYgKGNoYXJhY3RlciA9PT0gXCJcXHJcIikge1xuICAgICAgICAgIGRpc2NhcmRUcmFpbGluZ05ld2xpbmUgPSB0cnVlO1xuICAgICAgICAgIGxpbmVMZW5ndGggPSBpbmRleCAtIHBvc2l0aW9uO1xuICAgICAgICB9IGVsc2UgaWYgKGNoYXJhY3RlciA9PT0gXCJcXG5cIikge1xuICAgICAgICAgIGxpbmVMZW5ndGggPSBpbmRleCAtIHBvc2l0aW9uO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobGluZUxlbmd0aCA8IDApIHtcbiAgICAgICAgc3RhcnRpbmdQb3NpdGlvbiA9IGxlbmd0aCAtIHBvc2l0aW9uO1xuICAgICAgICBzdGFydGluZ0ZpZWxkTGVuZ3RoID0gZmllbGRMZW5ndGg7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhcnRpbmdQb3NpdGlvbiA9IDA7XG4gICAgICAgIHN0YXJ0aW5nRmllbGRMZW5ndGggPSAtMTtcbiAgICAgIH1cbiAgICAgIHBhcnNlRXZlbnRTdHJlYW1MaW5lKGJ1ZmZlciwgcG9zaXRpb24sIGZpZWxkTGVuZ3RoLCBsaW5lTGVuZ3RoKTtcbiAgICAgIHBvc2l0aW9uICs9IGxpbmVMZW5ndGggKyAxO1xuICAgIH1cbiAgICBpZiAocG9zaXRpb24gPT09IGxlbmd0aCkge1xuICAgICAgYnVmZmVyID0gXCJcIjtcbiAgICB9IGVsc2UgaWYgKHBvc2l0aW9uID4gMCkge1xuICAgICAgYnVmZmVyID0gYnVmZmVyLnNsaWNlKHBvc2l0aW9uKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gcGFyc2VFdmVudFN0cmVhbUxpbmUobGluZUJ1ZmZlciwgaW5kZXgsIGZpZWxkTGVuZ3RoLCBsaW5lTGVuZ3RoKSB7XG4gICAgaWYgKGxpbmVMZW5ndGggPT09IDApIHtcbiAgICAgIGlmIChkYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgb25QYXJzZSh7XG4gICAgICAgICAgdHlwZTogXCJldmVudFwiLFxuICAgICAgICAgIGlkOiBldmVudElkLFxuICAgICAgICAgIGV2ZW50OiBldmVudE5hbWUgfHwgdm9pZCAwLFxuICAgICAgICAgIGRhdGE6IGRhdGEuc2xpY2UoMCwgLTEpXG4gICAgICAgICAgLy8gcmVtb3ZlIHRyYWlsaW5nIG5ld2xpbmVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGF0YSA9IFwiXCI7XG4gICAgICAgIGV2ZW50SWQgPSB2b2lkIDA7XG4gICAgICB9XG4gICAgICBldmVudE5hbWUgPSB2b2lkIDA7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG5vVmFsdWUgPSBmaWVsZExlbmd0aCA8IDA7XG4gICAgY29uc3QgZmllbGQgPSBsaW5lQnVmZmVyLnNsaWNlKGluZGV4LCBpbmRleCArIChub1ZhbHVlID8gbGluZUxlbmd0aCA6IGZpZWxkTGVuZ3RoKSk7XG4gICAgbGV0IHN0ZXAgPSAwO1xuICAgIGlmIChub1ZhbHVlKSB7XG4gICAgICBzdGVwID0gbGluZUxlbmd0aDtcbiAgICB9IGVsc2UgaWYgKGxpbmVCdWZmZXJbaW5kZXggKyBmaWVsZExlbmd0aCArIDFdID09PSBcIiBcIikge1xuICAgICAgc3RlcCA9IGZpZWxkTGVuZ3RoICsgMjtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RlcCA9IGZpZWxkTGVuZ3RoICsgMTtcbiAgICB9XG4gICAgY29uc3QgcG9zaXRpb24gPSBpbmRleCArIHN0ZXA7XG4gICAgY29uc3QgdmFsdWVMZW5ndGggPSBsaW5lTGVuZ3RoIC0gc3RlcDtcbiAgICBjb25zdCB2YWx1ZSA9IGxpbmVCdWZmZXIuc2xpY2UocG9zaXRpb24sIHBvc2l0aW9uICsgdmFsdWVMZW5ndGgpLnRvU3RyaW5nKCk7XG4gICAgaWYgKGZpZWxkID09PSBcImRhdGFcIikge1xuICAgICAgZGF0YSArPSB2YWx1ZSA/IFwiXCIuY29uY2F0KHZhbHVlLCBcIlxcblwiKSA6IFwiXFxuXCI7XG4gICAgfSBlbHNlIGlmIChmaWVsZCA9PT0gXCJldmVudFwiKSB7XG4gICAgICBldmVudE5hbWUgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKGZpZWxkID09PSBcImlkXCIgJiYgIXZhbHVlLmluY2x1ZGVzKFwiXFwwXCIpKSB7XG4gICAgICBldmVudElkID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmIChmaWVsZCA9PT0gXCJyZXRyeVwiKSB7XG4gICAgICBjb25zdCByZXRyeSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICBpZiAoIU51bWJlci5pc05hTihyZXRyeSkpIHtcbiAgICAgICAgb25QYXJzZSh7XG4gICAgICAgICAgdHlwZTogXCJyZWNvbm5lY3QtaW50ZXJ2YWxcIixcbiAgICAgICAgICB2YWx1ZTogcmV0cnlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5jb25zdCBCT00gPSBbMjM5LCAxODcsIDE5MV07XG5mdW5jdGlvbiBoYXNCb20oYnVmZmVyKSB7XG4gIHJldHVybiBCT00uZXZlcnkoKGNoYXJDb2RlLCBpbmRleCkgPT4gYnVmZmVyLmNoYXJDb2RlQXQoaW5kZXgpID09PSBjaGFyQ29kZSk7XG59XG5leHBvcnRzLmNyZWF0ZVBhcnNlciA9IGNyZWF0ZVBhcnNlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBDb25zb2xlTG9nZ2luZ0xpc3RlbmVyIH0gZnJvbSBcIi4vc3JjL2NvbW1vbi5icm93c2VyL0V4cG9ydHNcIjtcbmltcG9ydCB7IEV2ZW50cyB9IGZyb20gXCIuL3NyYy9jb21tb24vRXhwb3J0c1wiO1xuLy8gQ29tbW9uLlN0b3JhZ2UuU2V0TG9jYWxTdG9yYWdlKG5ldyBDb21tb24uQnJvd3Nlci5Mb2NhbFN0b3JhZ2UoKSk7XG4vLyBDb21tb24uU3RvcmFnZS5TZXRTZXNzaW9uU3RvcmFnZShuZXcgQ29tbW9uLkJyb3dzZXIuU2Vzc2lvblN0b3JhZ2UoKSk7XG5FdmVudHMuaW5zdGFuY2UuYXR0YWNoQ29uc29sZUxpc3RlbmVyKG5ldyBDb25zb2xlTG9nZ2luZ0xpc3RlbmVyKCkpO1xuLy8gU3BlZWNoIFNESyBBUElcbmV4cG9ydCAqIGZyb20gXCIuL3NyYy9zZGsvRXhwb3J0c1wiO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1taWNyb3NvZnQuY29nbml0aXZlc2VydmljZXMuc3BlZWNoLnNkay5qcy5tYXBcbiIsIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudCAqL1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgKiBhcyBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCB7IExvZ0xldmVsIH0gZnJvbSBcIi4uL3Nkay9Mb2dMZXZlbFwiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4uL3Nkay9Db250cmFjdHNcIjtcbmV4cG9ydCBjbGFzcyBDb25zb2xlTG9nZ2luZ0xpc3RlbmVyIHtcbiAgICBjb25zdHJ1Y3Rvcihsb2dMZXZlbEZpbHRlciA9IExvZ0xldmVsLk5vbmUpIHtcbiAgICAgICAgdGhpcy5wcml2TG9nUGF0aCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wcml2RW5hYmxlQ29uc29sZU91dHB1dCA9IHRydWU7XG4gICAgICAgIHRoaXMucHJpdkxvZ0xldmVsRmlsdGVyID0gbG9nTGV2ZWxGaWx0ZXI7XG4gICAgfVxuICAgIHNldCBsb2dQYXRoKHBhdGgpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoZnMub3BlblN5bmMsIFwiXFxuRmlsZSBTeXN0ZW0gYWNjZXNzIG5vdCBhdmFpbGFibGVcIik7XG4gICAgICAgIHRoaXMucHJpdkxvZ1BhdGggPSBwYXRoO1xuICAgIH1cbiAgICBzZXQgZW5hYmxlQ29uc29sZU91dHB1dChlbmFibGVPdXRwdXQpIHtcbiAgICAgICAgdGhpcy5wcml2RW5hYmxlQ29uc29sZU91dHB1dCA9IGVuYWJsZU91dHB1dDtcbiAgICB9XG4gICAgb25FdmVudChldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQuZXZlbnRUeXBlID49IHRoaXMucHJpdkxvZ0xldmVsRmlsdGVyKSB7XG4gICAgICAgICAgICBjb25zdCBsb2cgPSB0aGlzLnRvU3RyaW5nKGV2ZW50KTtcbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkxvZ1BhdGgpIHtcbiAgICAgICAgICAgICAgICBmcy53cml0ZUZpbGVTeW5jKHRoaXMucHJpdkxvZ1BhdGgsIGxvZyArIFwiXFxuXCIsIHsgZmxhZzogXCJhK1wiIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkVuYWJsZUNvbnNvbGVPdXRwdXQpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmV2ZW50VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIExvZ0xldmVsLkRlYnVnOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcobG9nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIExvZ0xldmVsLkluZm86XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKGxvZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBMb2dMZXZlbC5XYXJuaW5nOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybihsb2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTG9nTGV2ZWwuRXJyb3I6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihsb2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobG9nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1N0cmluZyhldmVudCkge1xuICAgICAgICBjb25zdCBsb2dGcmFnbWVudHMgPSBbXG4gICAgICAgICAgICBgJHtldmVudC5ldmVudFRpbWV9YCxcbiAgICAgICAgICAgIGAke2V2ZW50Lm5hbWV9YCxcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgZSA9IGV2ZW50O1xuICAgICAgICBmb3IgKGNvbnN0IHByb3AgaW4gZSkge1xuICAgICAgICAgICAgaWYgKHByb3AgJiYgZXZlbnQuaGFzT3duUHJvcGVydHkocHJvcCkgJiZcbiAgICAgICAgICAgICAgICBwcm9wICE9PSBcImV2ZW50VGltZVwiICYmIHByb3AgIT09IFwiZXZlbnRUeXBlXCIgJiZcbiAgICAgICAgICAgICAgICBwcm9wICE9PSBcImV2ZW50SWRcIiAmJiBwcm9wICE9PSBcIm5hbWVcIiAmJlxuICAgICAgICAgICAgICAgIHByb3AgIT09IFwiY29uc3RydWN0b3JcIikge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGVbcHJvcF07XG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlVG9Mb2cgPSBcIjxOVUxMPlwiO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgKHZhbHVlKSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUb0xvZyA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvTG9nID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxvZ0ZyYWdtZW50cy5wdXNoKGAke3Byb3B9OiAke3ZhbHVlVG9Mb2d9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxvZ0ZyYWdtZW50cy5qb2luKFwiIHwgXCIpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29uc29sZUxvZ2dpbmdMaXN0ZW5lci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBjb25uZWN0aXZpdHksIHR5cGUsIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQXVkaW9Tb3VyY2VFcnJvckV2ZW50LCBBdWRpb1NvdXJjZUluaXRpYWxpemluZ0V2ZW50LCBBdWRpb1NvdXJjZU9mZkV2ZW50LCBBdWRpb1NvdXJjZVJlYWR5RXZlbnQsIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGVkRXZlbnQsIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGluZ0V2ZW50LCBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50LCBBdWRpb1N0cmVhbU5vZGVFcnJvckV2ZW50LCBDaHVua2VkQXJyYXlCdWZmZXJTdHJlYW0sIGNyZWF0ZU5vRGFzaEd1aWQsIERlZmVycmVkLCBFdmVudHMsIEV2ZW50U291cmNlLCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQXVkaW9TdHJlYW1Gb3JtYXQgfSBmcm9tIFwiLi4vc2RrL0F1ZGlvL0F1ZGlvU3RyZWFtRm9ybWF0XCI7XG5leHBvcnQgY2xhc3MgRmlsZUF1ZGlvU291cmNlIHtcbiAgICBjb25zdHJ1Y3RvcihmaWxlLCBmaWxlbmFtZSwgYXVkaW9Tb3VyY2VJZCkge1xuICAgICAgICB0aGlzLnByaXZTdHJlYW1zID0ge307XG4gICAgICAgIHRoaXMucHJpdkhlYWRlckVuZCA9IDQ0O1xuICAgICAgICB0aGlzLnByaXZJZCA9IGF1ZGlvU291cmNlSWQgPyBhdWRpb1NvdXJjZUlkIDogY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZFdmVudHMgPSBuZXcgRXZlbnRTb3VyY2UoKTtcbiAgICAgICAgdGhpcy5wcml2U291cmNlID0gZmlsZTtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIEJsb2IgIT09IFwidW5kZWZpbmVkXCIgJiYgdGhpcy5wcml2U291cmNlIGluc3RhbmNlb2YgQmxvYikge1xuICAgICAgICAgICAgdGhpcy5wcml2RmlsZW5hbWUgPSBmaWxlLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnByaXZGaWxlbmFtZSA9IGZpbGVuYW1lIHx8IFwidW5rbm93bi53YXZcIjtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZWFkIHRoZSBoZWFkZXIuXG4gICAgICAgIHRoaXMucHJpdkF1ZGlvRm9ybWF0UHJvbWlzZSA9IHRoaXMucmVhZEhlYWRlcigpO1xuICAgIH1cbiAgICBnZXQgZm9ybWF0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Gb3JtYXRQcm9taXNlO1xuICAgIH1cbiAgICB0dXJuT24oKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZGaWxlbmFtZS5sYXN0SW5kZXhPZihcIi53YXZcIikgIT09IHRoaXMucHJpdkZpbGVuYW1lLmxlbmd0aCAtIDQpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gdGhpcy5wcml2RmlsZW5hbWUgKyBcIiBpcyBub3Qgc3VwcG9ydGVkLiBPbmx5IFdBVkUgZmlsZXMgYXJlIGFsbG93ZWQgYXQgdGhlIG1vbWVudC5cIjtcbiAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9Tb3VyY2VFcnJvckV2ZW50KGVycm9yTXNnLCBcIlwiKSk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3JNc2cpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9Tb3VyY2VJbml0aWFsaXppbmdFdmVudCh0aGlzLnByaXZJZCkpOyAvLyBubyBzdHJlYW0gaWRcbiAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1NvdXJjZVJlYWR5RXZlbnQodGhpcy5wcml2SWQpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklkO1xuICAgIH1cbiAgICBhdHRhY2goYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9TdHJlYW1Ob2RlQXR0YWNoaW5nRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB5aWVsZCB0aGlzLnVwbG9hZChhdWRpb05vZGVJZCk7XG4gICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGVkRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBkZXRhY2g6ICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnJlYWRFbmRlZCgpO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wcml2U3RyZWFtc1thdWRpb05vZGVJZF07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudCh0aGlzLnByaXZJZCwgYXVkaW9Ob2RlSWQpKTtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy50dXJuT2ZmKCk7XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaWQ6ICgpID0+IGF1ZGlvTm9kZUlkLFxuICAgICAgICAgICAgICAgIHJlYWQ6ICgpID0+IHN0cmVhbS5yZWFkKCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRldGFjaChhdWRpb05vZGVJZCkge1xuICAgICAgICBpZiAoYXVkaW9Ob2RlSWQgJiYgdGhpcy5wcml2U3RyZWFtc1thdWRpb05vZGVJZF0pIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlN0cmVhbXNbYXVkaW9Ob2RlSWRdLmNsb3NlKCk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5wcml2U3RyZWFtc1thdWRpb05vZGVJZF07XG4gICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU3RyZWFtTm9kZURldGFjaGVkRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHVybk9mZigpIHtcbiAgICAgICAgZm9yIChjb25zdCBzdHJlYW1JZCBpbiB0aGlzLnByaXZTdHJlYW1zKSB7XG4gICAgICAgICAgICBpZiAoc3RyZWFtSWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLnByaXZTdHJlYW1zW3N0cmVhbUlkXTtcbiAgICAgICAgICAgICAgICBpZiAoc3RyZWFtICYmICFzdHJlYW0uaXNDbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9Tb3VyY2VPZmZFdmVudCh0aGlzLnByaXZJZCkpOyAvLyBubyBzdHJlYW0gbm93XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0IGV2ZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkV2ZW50cztcbiAgICB9XG4gICAgZ2V0IGRldmljZUluZm8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb0Zvcm1hdFByb21pc2UudGhlbigocmVzdWx0KSA9PiAoUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIGJpdHNwZXJzYW1wbGU6IHJlc3VsdC5iaXRzUGVyU2FtcGxlLFxuICAgICAgICAgICAgY2hhbm5lbGNvdW50OiByZXN1bHQuY2hhbm5lbHMsXG4gICAgICAgICAgICBjb25uZWN0aXZpdHk6IGNvbm5lY3Rpdml0eS5Vbmtub3duLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyOiBcIlNwZWVjaCBTREtcIixcbiAgICAgICAgICAgIG1vZGVsOiBcIkZpbGVcIixcbiAgICAgICAgICAgIHNhbXBsZXJhdGU6IHJlc3VsdC5zYW1wbGVzUGVyU2VjLFxuICAgICAgICAgICAgdHlwZTogdHlwZS5GaWxlLFxuICAgICAgICB9KSkpO1xuICAgIH1cbiAgICByZWFkSGVhZGVyKCkge1xuICAgICAgICAvLyBSZWFkIHRoZSB3YXZlIGhlYWRlci5cbiAgICAgICAgY29uc3QgbWF4SGVhZGVyU2l6ZSA9IDQyOTY7XG4gICAgICAgIGNvbnN0IGhlYWRlciA9IHRoaXMucHJpdlNvdXJjZS5zbGljZSgwLCBtYXhIZWFkZXJTaXplKTtcbiAgICAgICAgY29uc3QgaGVhZGVyUmVzdWx0ID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIGNvbnN0IHByb2Nlc3NIZWFkZXIgPSAoaGVhZGVyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2aWV3ID0gbmV3IERhdGFWaWV3KGhlYWRlcik7XG4gICAgICAgICAgICBjb25zdCBnZXRXb3JkID0gKGluZGV4KSA9PiBTdHJpbmcuZnJvbUNoYXJDb2RlKHZpZXcuZ2V0VWludDgoaW5kZXgpLCB2aWV3LmdldFVpbnQ4KGluZGV4ICsgMSksIHZpZXcuZ2V0VWludDgoaW5kZXggKyAyKSwgdmlldy5nZXRVaW50OChpbmRleCArIDMpKTtcbiAgICAgICAgICAgIC8vIFJJRkYgNCBieXRlcy5cbiAgICAgICAgICAgIGlmIChcIlJJRkZcIiAhPT0gZ2V0V29yZCgwKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclJlc3VsdC5yZWplY3QoXCJJbnZhbGlkIFdBViBoZWFkZXIgaW4gZmlsZSwgUklGRiB3YXMgbm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGxlbmd0aCwgNCBieXRlc1xuICAgICAgICAgICAgLy8gUklGRiBUeXBlICYgZm10IDggYnl0ZXNcbiAgICAgICAgICAgIGlmIChcIldBVkVcIiAhPT0gZ2V0V29yZCg4KSB8fCBcImZtdCBcIiAhPT0gZ2V0V29yZCgxMikpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJSZXN1bHQucmVqZWN0KFwiSW52YWxpZCBXQVYgaGVhZGVyIGluIGZpbGUsIFdBVkVmbXQgd2FzIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBmb3JtYXRTaXplID0gdmlldy5nZXRJbnQzMigxNiwgdHJ1ZSk7XG4gICAgICAgICAgICBjb25zdCBjaGFubmVsQ291bnQgPSB2aWV3LmdldFVpbnQxNigyMiwgdHJ1ZSk7XG4gICAgICAgICAgICBjb25zdCBzYW1wbGVSYXRlID0gdmlldy5nZXRVaW50MzIoMjQsIHRydWUpO1xuICAgICAgICAgICAgY29uc3QgYml0c1BlclNhbXBsZSA9IHZpZXcuZ2V0VWludDE2KDM0LCB0cnVlKTtcbiAgICAgICAgICAgIC8vIENvbmZpcm0gaWYgaGVhZGVyIGlzIDQ0IGJ5dGVzIGxvbmcuXG4gICAgICAgICAgICBsZXQgcG9zID0gMzYgKyBNYXRoLm1heChmb3JtYXRTaXplIC0gMTYsIDApO1xuICAgICAgICAgICAgZm9yICg7IGdldFdvcmQocG9zKSAhPT0gXCJkYXRhXCI7IHBvcyArPSAyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBvcyA+IG1heEhlYWRlclNpemUgLSA4KSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlclJlc3VsdC5yZWplY3QoXCJJbnZhbGlkIFdBViBoZWFkZXIgaW4gZmlsZSwgZGF0YSBibG9jayB3YXMgbm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcml2SGVhZGVyRW5kID0gcG9zICsgODtcbiAgICAgICAgICAgIGhlYWRlclJlc3VsdC5yZXNvbHZlKEF1ZGlvU3RyZWFtRm9ybWF0LmdldFdhdmVGb3JtYXRQQ00oc2FtcGxlUmF0ZSwgYml0c1BlclNhbXBsZSwgY2hhbm5lbENvdW50KSk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBCbG9iICE9PSBcInVuZGVmaW5lZFwiICYmIGhlYWRlciBpbnN0YW5jZW9mIEJsb2IpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICByZWFkZXIub25sb2FkID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICBwcm9jZXNzSGVhZGVyKGhlYWRlcik7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGhlYWRlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBoID0gaGVhZGVyO1xuICAgICAgICAgICAgcHJvY2Vzc0hlYWRlcihoLmJ1ZmZlci5zbGljZShoLmJ5dGVPZmZzZXQsIGguYnl0ZU9mZnNldCArIGguYnl0ZUxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoZWFkZXJSZXN1bHQucHJvbWlzZTtcbiAgICB9XG4gICAgdXBsb2FkKGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBvbmVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBgRXJyb3Igb2NjdXJyZWQgd2hpbGUgcHJvY2Vzc2luZyAnJHt0aGlzLnByaXZGaWxlbmFtZX0nLiAke2Vycm9yfWA7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVFcnJvckV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCwgZXJyb3JNc2cpKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNc2cpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy50dXJuT24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXQgPSB5aWVsZCB0aGlzLnByaXZBdWRpb0Zvcm1hdFByb21pc2U7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gbmV3IENodW5rZWRBcnJheUJ1ZmZlclN0cmVhbShmb3JtYXQuYXZnQnl0ZXNQZXJTZWMgLyAxMCwgYXVkaW9Ob2RlSWQpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlN0cmVhbXNbYXVkaW9Ob2RlSWRdID0gc3RyZWFtO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rID0gdGhpcy5wcml2U291cmNlLnNsaWNlKHRoaXMucHJpdkhlYWRlckVuZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvY2Vzc0ZpbGUgPSAoYnVmZikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RyZWFtLmlzQ2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIG91dHB1dCBzdHJlYW0gd2FzIGNsb3NlZCAoc29tZWJvZHkgY2FsbGVkIFR1cm5PZmYpLiBXZSdyZSBkb25lIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLndyaXRlU3RyZWFtQ2h1bmsoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyOiBidWZmLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNFbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZVJlY2VpdmVkOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgQmxvYiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjaHVuayBpbnN0YW5jZW9mIEJsb2IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSAoZXYpID0+IG9uZXJyb3IoZXYudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVCdWZmZXIgPSBldmVudC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0ZpbGUoZmlsZUJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihjaHVuayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NGaWxlKGMuYnVmZmVyLnNsaWNlKGMuYnl0ZU9mZnNldCwgYy5ieXRlT2Zmc2V0ICsgYy5ieXRlTGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzdHJlYW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIG9uZXJyb3IoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvbkV2ZW50KGV2ZW50KSB7XG4gICAgICAgIHRoaXMucHJpdkV2ZW50cy5vbkV2ZW50KGV2ZW50KTtcbiAgICAgICAgRXZlbnRzLmluc3RhbmNlLm9uRXZlbnQoZXZlbnQpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RmlsZUF1ZGlvU291cmNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IGNvbm5lY3Rpdml0eSwgdHlwZSB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IEF1ZGlvU291cmNlRXJyb3JFdmVudCwgQXVkaW9Tb3VyY2VJbml0aWFsaXppbmdFdmVudCwgQXVkaW9Tb3VyY2VPZmZFdmVudCwgQXVkaW9Tb3VyY2VSZWFkeUV2ZW50LCBBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50LCBBdWRpb1N0cmVhbU5vZGVBdHRhY2hpbmdFdmVudCwgQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudCwgQXVkaW9TdHJlYW1Ob2RlRXJyb3JFdmVudCwgQ2h1bmtlZEFycmF5QnVmZmVyU3RyZWFtLCBjcmVhdGVOb0Rhc2hHdWlkLCBEZWZlcnJlZCwgRXZlbnRzLCBFdmVudFNvdXJjZSwgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IEF1ZGlvU3RyZWFtRm9ybWF0LCBBdWRpb1N0cmVhbUZvcm1hdEltcGwsIH0gZnJvbSBcIi4uL3Nkay9BdWRpby9BdWRpb1N0cmVhbUZvcm1hdFwiO1xuZXhwb3J0IGNvbnN0IEF1ZGlvV29ya2xldFNvdXJjZVVSTFByb3BlcnR5TmFtZSA9IFwiTUlDUk9QSE9ORS1Xb3JrbGV0U291cmNlVXJsXCI7XG5leHBvcnQgY2xhc3MgTWljQXVkaW9Tb3VyY2Uge1xuICAgIGNvbnN0cnVjdG9yKHByaXZSZWNvcmRlciwgZGV2aWNlSWQsIGF1ZGlvU291cmNlSWQsIG1lZGlhU3RyZWFtKSB7XG4gICAgICAgIHRoaXMucHJpdlJlY29yZGVyID0gcHJpdlJlY29yZGVyO1xuICAgICAgICB0aGlzLmRldmljZUlkID0gZGV2aWNlSWQ7XG4gICAgICAgIHRoaXMucHJpdlN0cmVhbXMgPSB7fTtcbiAgICAgICAgdGhpcy5wcml2T3V0cHV0Q2h1bmtTaXplID0gTWljQXVkaW9Tb3VyY2UuQVVESU9GT1JNQVQuYXZnQnl0ZXNQZXJTZWMgLyAxMDtcbiAgICAgICAgdGhpcy5wcml2SWQgPSBhdWRpb1NvdXJjZUlkID8gYXVkaW9Tb3VyY2VJZCA6IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2RXZlbnRzID0gbmV3IEV2ZW50U291cmNlKCk7XG4gICAgICAgIHRoaXMucHJpdk1lZGlhU3RyZWFtID0gbWVkaWFTdHJlYW0gfHwgbnVsbDtcbiAgICAgICAgdGhpcy5wcml2SXNDbG9zaW5nID0gZmFsc2U7XG4gICAgfVxuICAgIGdldCBmb3JtYXQoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoTWljQXVkaW9Tb3VyY2UuQVVESU9GT1JNQVQpO1xuICAgIH1cbiAgICB0dXJuT24oKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZJbml0aWFsaXplRGVmZXJyYWwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZJbml0aWFsaXplRGVmZXJyYWwucHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZJbml0aWFsaXplRGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQXVkaW9Db250ZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVkRXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZJbml0aWFsaXplRGVmZXJyYWwucmVqZWN0KHR5cGVkRXJyb3IubmFtZSArIFwiOiBcIiArIHR5cGVkRXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZJbml0aWFsaXplRGVmZXJyYWwucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZJbml0aWFsaXplRGVmZXJyYWwucHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuYXYgPSB3aW5kb3cubmF2aWdhdG9yO1xuICAgICAgICBsZXQgZ2V0VXNlck1lZGlhID0gKFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgbmF2LmdldFVzZXJNZWRpYSB8fFxuICAgICAgICAgICAgbmF2LndlYmtpdEdldFVzZXJNZWRpYSB8fFxuICAgICAgICAgICAgbmF2Lm1vekdldFVzZXJNZWRpYSB8fFxuICAgICAgICAgICAgbmF2Lm1zR2V0VXNlck1lZGlhKTtcbiAgICAgICAgaWYgKCEhbmF2Lm1lZGlhRGV2aWNlcykge1xuICAgICAgICAgICAgZ2V0VXNlck1lZGlhID0gKGNvbnN0cmFpbnRzLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgICAgICBuYXYubWVkaWFEZXZpY2VzXG4gICAgICAgICAgICAgICAgICAgIC5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHN1Y2Nlc3NDYWxsYmFjaylcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yQ2FsbGJhY2spO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWdldFVzZXJNZWRpYSkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBcIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBnZXRVc2VyTWVkaWEuXCI7XG4gICAgICAgICAgICB0aGlzLnByaXZJbml0aWFsaXplRGVmZXJyYWwucmVqZWN0KGVycm9yTXNnKTtcbiAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9Tb3VyY2VFcnJvckV2ZW50KGVycm9yTXNnLCBcIlwiKSk7IC8vIG1pYyBpbml0aWFsaXplZCBlcnJvciAtIG5vIHN0cmVhbWlkIGF0IHRoaXMgcG9pbnRcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1NvdXJjZUluaXRpYWxpemluZ0V2ZW50KHRoaXMucHJpdklkKSk7IC8vIG5vIHN0cmVhbSBpZFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZNZWRpYVN0cmVhbSAmJiB0aGlzLnByaXZNZWRpYVN0cmVhbS5hY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1NvdXJjZVJlYWR5RXZlbnQodGhpcy5wcml2SWQpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2SW5pdGlhbGl6ZURlZmVycmFsLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGdldFVzZXJNZWRpYSh7IGF1ZGlvOiB0aGlzLmRldmljZUlkID8geyBkZXZpY2VJZDogdGhpcy5kZXZpY2VJZCB9IDogdHJ1ZSwgdmlkZW86IGZhbHNlIH0sIChtZWRpYVN0cmVhbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TWVkaWFTdHJlYW0gPSBtZWRpYVN0cmVhbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9Tb3VyY2VSZWFkeUV2ZW50KHRoaXMucHJpdklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZJbml0aWFsaXplRGVmZXJyYWwucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gYEVycm9yIG9jY3VycmVkIGR1cmluZyBtaWNyb3Bob25lIGluaXRpYWxpemF0aW9uOiAke2Vycm9yfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZJbml0aWFsaXplRGVmZXJyYWwucmVqZWN0KGVycm9yTXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9Tb3VyY2VFcnJvckV2ZW50KHRoaXMucHJpdklkLCBlcnJvck1zZykpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkNvbnRleHQuc3RhdGUgPT09IFwic3VzcGVuZGVkXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBOT1RFOiBPbiBpT1MsIHRoZSBXZWIgQXVkaW8gQVBJIHJlcXVpcmVzIHNvdW5kcyB0byBiZSB0cmlnZ2VyZWQgZnJvbSBhbiBleHBsaWNpdCB1c2VyIGFjdGlvbi5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vV2ViQXVkaW8vd2ViLWF1ZGlvLWFwaS9pc3N1ZXMvNzkwXG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udGV4dC5yZXN1bWUoKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihuZXh0KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKHJlYXNvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZJbml0aWFsaXplRGVmZXJyYWwucmVqZWN0KGBGYWlsZWQgdG8gaW5pdGlhbGl6ZSBhdWRpbyBjb250ZXh0OiAke3JlYXNvbn1gKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcml2SW5pdGlhbGl6ZURlZmVycmFsLnByb21pc2U7XG4gICAgfVxuICAgIGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SWQ7XG4gICAgfVxuICAgIGF0dGFjaChhdWRpb05vZGVJZCkge1xuICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGluZ0V2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW4oYXVkaW9Ob2RlSWQpLnRoZW4oKHN0cmVhbSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkZXRhY2g6ICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLnJlYWRFbmRlZCgpO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wcml2U3RyZWFtc1thdWRpb05vZGVJZF07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudCh0aGlzLnByaXZJZCwgYXVkaW9Ob2RlSWQpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudHVybk9mZigpO1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGlkOiAoKSA9PiBhdWRpb05vZGVJZCxcbiAgICAgICAgICAgICAgICByZWFkOiAoKSA9PiBzdHJlYW0ucmVhZCgpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRldGFjaChhdWRpb05vZGVJZCkge1xuICAgICAgICBpZiAoYXVkaW9Ob2RlSWQgJiYgdGhpcy5wcml2U3RyZWFtc1thdWRpb05vZGVJZF0pIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlN0cmVhbXNbYXVkaW9Ob2RlSWRdLmNsb3NlKCk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5wcml2U3RyZWFtc1thdWRpb05vZGVJZF07XG4gICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU3RyZWFtTm9kZURldGFjaGVkRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHVybk9mZigpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc3RyZWFtSWQgaW4gdGhpcy5wcml2U3RyZWFtcykge1xuICAgICAgICAgICAgICAgIGlmIChzdHJlYW1JZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLnByaXZTdHJlYW1zW3N0cmVhbUlkXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU291cmNlT2ZmRXZlbnQodGhpcy5wcml2SWQpKTsgLy8gbm8gc3RyZWFtIG5vd1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkluaXRpYWxpemVEZWZlcnJhbCkge1xuICAgICAgICAgICAgICAgIC8vIENvcnJlY3RseSBoYW5kbGUgd2hlbiBicm93c2VyIGZvcmNlcyBtaWMgb2ZmIGJlZm9yZSB0dXJuT24oKSBjb21wbGV0ZXNcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2F3YWl0LXRoZW5hYmxlXG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2SW5pdGlhbGl6ZURlZmVycmFsO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkluaXRpYWxpemVEZWZlcnJhbCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCB0aGlzLmRlc3Ryb3lBdWRpb0NvbnRleHQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBldmVudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFdmVudHM7XG4gICAgfVxuICAgIGdldCBkZXZpY2VJbmZvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNaWNyb3Bob25lTGFiZWwoKS50aGVuKChsYWJlbCkgPT4gKHtcbiAgICAgICAgICAgIGJpdHNwZXJzYW1wbGU6IE1pY0F1ZGlvU291cmNlLkFVRElPRk9STUFULmJpdHNQZXJTYW1wbGUsXG4gICAgICAgICAgICBjaGFubmVsY291bnQ6IE1pY0F1ZGlvU291cmNlLkFVRElPRk9STUFULmNoYW5uZWxzLFxuICAgICAgICAgICAgY29ubmVjdGl2aXR5OiBjb25uZWN0aXZpdHkuVW5rbm93bixcbiAgICAgICAgICAgIG1hbnVmYWN0dXJlcjogXCJTcGVlY2ggU0RLXCIsXG4gICAgICAgICAgICBtb2RlbDogbGFiZWwsXG4gICAgICAgICAgICBzYW1wbGVyYXRlOiBNaWNBdWRpb1NvdXJjZS5BVURJT0ZPUk1BVC5zYW1wbGVzUGVyU2VjLFxuICAgICAgICAgICAgdHlwZTogdHlwZS5NaWNyb3Bob25lcyxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgICBpZiAobmFtZSA9PT0gQXVkaW9Xb3JrbGV0U291cmNlVVJMUHJvcGVydHlOYW1lKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZSZWNvcmRlci5zZXRXb3JrbGV0VXJsKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb3BlcnR5ICdcIiArIG5hbWUgKyBcIicgaXMgbm90IHN1cHBvcnRlZCBvbiBNaWNyb3Bob25lLlwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRNaWNyb3Bob25lTGFiZWwoKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRNaWNyb3Bob25lTmFtZSA9IFwibWljcm9waG9uZVwiO1xuICAgICAgICAvLyBJZiB3ZSBkaWQgdGhpcyBhbHJlYWR5LCByZXR1cm4gdGhlIHZhbHVlLlxuICAgICAgICBpZiAodGhpcy5wcml2TWljcm9waG9uZUxhYmVsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5wcml2TWljcm9waG9uZUxhYmVsKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGUgc3RyZWFtIGlzbid0IGN1cnJlbnRseSBydW5uaW5nLCB3ZSBjYW4ndCBxdWVyeSBkZXZpY2VzIGJlY2F1c2Ugc2VjdXJpdHkuXG4gICAgICAgIGlmICh0aGlzLnByaXZNZWRpYVN0cmVhbSA9PT0gdW5kZWZpbmVkIHx8ICF0aGlzLnByaXZNZWRpYVN0cmVhbS5hY3RpdmUpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGVmYXVsdE1pY3JvcGhvbmVOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTZXR1cCBhIGRlZmF1bHRcbiAgICAgICAgdGhpcy5wcml2TWljcm9waG9uZUxhYmVsID0gZGVmYXVsdE1pY3JvcGhvbmVOYW1lO1xuICAgICAgICAvLyBHZXQgdGhlIGlkIG9mIHRoZSBkZXZpY2UgcnVubmluZyB0aGUgYXVkaW8gdHJhY2suXG4gICAgICAgIGNvbnN0IG1pY3JvcGhvbmVEZXZpY2VJZCA9IHRoaXMucHJpdk1lZGlhU3RyZWFtLmdldFRyYWNrcygpWzBdLmdldFNldHRpbmdzKCkuZGV2aWNlSWQ7XG4gICAgICAgIC8vIElmIHRoZSBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBnZXR0aW5nIHRoZSBkZXZpY2UgSUQsIHNldCBhIGRlZmF1bHQgYW5kIHJldHVybi5cbiAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbWljcm9waG9uZURldmljZUlkKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMucHJpdk1pY3JvcGhvbmVMYWJlbCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgLy8gRW51bWVyYXRlIHRoZSBtZWRpYSBkZXZpY2VzLlxuICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKS50aGVuKChkZXZpY2VzKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGRldmljZSBvZiBkZXZpY2VzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRldmljZS5kZXZpY2VJZCA9PT0gbWljcm9waG9uZURldmljZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIHRoZSBkZXZpY2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TWljcm9waG9uZUxhYmVsID0gZGV2aWNlLmxhYmVsO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHRoaXMucHJpdk1pY3JvcGhvbmVMYWJlbCk7XG4gICAgICAgIH0sICgpID0+IGRlZmVycmVkLnJlc29sdmUodGhpcy5wcml2TWljcm9waG9uZUxhYmVsKSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cbiAgICBsaXN0ZW4oYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMudHVybk9uKCk7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBuZXcgQ2h1bmtlZEFycmF5QnVmZmVyU3RyZWFtKHRoaXMucHJpdk91dHB1dENodW5rU2l6ZSwgYXVkaW9Ob2RlSWQpO1xuICAgICAgICAgICAgdGhpcy5wcml2U3RyZWFtc1thdWRpb05vZGVJZF0gPSBzdHJlYW07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY29yZGVyLnJlY29yZCh0aGlzLnByaXZDb250ZXh0LCB0aGlzLnByaXZNZWRpYVN0cmVhbSwgc3RyZWFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQXVkaW9TdHJlYW1Ob2RlRXJyb3JFdmVudCh0aGlzLnByaXZJZCwgYXVkaW9Ob2RlSWQsIGVycm9yKSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBzdHJlYW07XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgb25FdmVudChldmVudCkge1xuICAgICAgICB0aGlzLnByaXZFdmVudHMub25FdmVudChldmVudCk7XG4gICAgICAgIEV2ZW50cy5pbnN0YW5jZS5vbkV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgY3JlYXRlQXVkaW9Db250ZXh0KCkge1xuICAgICAgICBpZiAoISF0aGlzLnByaXZDb250ZXh0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2Q29udGV4dCA9IEF1ZGlvU3RyZWFtRm9ybWF0SW1wbC5nZXRBdWRpb0NvbnRleHQoTWljQXVkaW9Tb3VyY2UuQVVESU9GT1JNQVQuc2FtcGxlc1BlclNlYyk7XG4gICAgfVxuICAgIGRlc3Ryb3lBdWRpb0NvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJpdkNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByaXZSZWNvcmRlci5yZWxlYXNlTWVkaWFSZXNvdXJjZXModGhpcy5wcml2Q29udGV4dCk7XG4gICAgICAgICAgICAvLyBUaGlzIHBhdHRlcm4gYnJvdWdodCB0byB5b3UgYnkgYSBidWcgaW4gdGhlIFR5cGVTY3JpcHQgY29tcGlsZXIgd2hlcmUgaXRcbiAgICAgICAgICAgIC8vIGNvbmZ1c2VzIHRoZSAoXCJjbG9zZVwiIGluIHRoaXMucHJpdkNvbnRleHQpIHdpdGggdGhpcy5wcml2Q29udGV4dCBhbHdheXMgYmVpbmcgbnVsbCBhcyB0aGUgYWx0ZXJuYXRlLlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8xMTQ5OFxuICAgICAgICAgICAgbGV0IGhhc0Nsb3NlID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoXCJjbG9zZVwiIGluIHRoaXMucHJpdkNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICBoYXNDbG9zZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGFzQ2xvc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJpdklzQ2xvc2luZykge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgYXVkaW8gY29udGV4dCBjbG9zZSBtYXkgdGFrZSBlbm91Z2ggdGltZSB0aGF0IHRoZSBjbG9zZSBpcyBjYWxsZWQgdHdpY2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2SXNDbG9zaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2Q29udGV4dC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb250ZXh0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2SXNDbG9zaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobnVsbCAhPT0gdGhpcy5wcml2Q29udGV4dCAmJiB0aGlzLnByaXZDb250ZXh0LnN0YXRlID09PSBcInJ1bm5pbmdcIikge1xuICAgICAgICAgICAgICAgIC8vIFN1c3BlbmQgYWN0dWFsbHkgdGFrZXMgYSBjYWxsYmFjaywgYnV0IGFuYWxvZ291cyB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyByZXN1bWUgbWV0aG9kLCBpdCdsbCBiZSBvbmx5IGZpcmVkIGlmIHN1c3BlbmQgaXMgY2FsbGVkXG4gICAgICAgICAgICAgICAgLy8gaW4gYSBkaXJlY3QgcmVzcG9uc2UgdG8gYSB1c2VyIGFjdGlvbi4gVGhlIGxhdGVyIGlzIG5vdCBhbHdheXNcbiAgICAgICAgICAgICAgICAvLyB0aGUgY2FzZSwgYXMgVHVybk9mZiBpcyBhbHNvIGNhbGxlZCwgd2hlbiB3ZSByZWNlaXZlIGFuXG4gICAgICAgICAgICAgICAgLy8gZW5kLW9mLXNwZWVjaCBtZXNzYWdlIGZyb20gdGhlIHNlcnZpY2UuIFNvLCBkb2luZyBhIGJlc3QgZWZmb3J0XG4gICAgICAgICAgICAgICAgLy8gZmlyZS1hbmQtZm9yZ2V0IGhlcmUuXG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2Q29udGV4dC5zdXNwZW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbk1pY0F1ZGlvU291cmNlLkFVRElPRk9STUFUID0gQXVkaW9TdHJlYW1Gb3JtYXQuZ2V0RGVmYXVsdElucHV0Rm9ybWF0KCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1pY0F1ZGlvU291cmNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBSaWZmUGNtRW5jb2RlciB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIFBjbVJlY29yZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihzdG9wSW5wdXRPblJlbGVhc2UpIHtcbiAgICAgICAgdGhpcy5wcml2U3RvcElucHV0T25SZWxlYXNlID0gc3RvcElucHV0T25SZWxlYXNlO1xuICAgIH1cbiAgICByZWNvcmQoY29udGV4dCwgbWVkaWFTdHJlYW0sIG91dHB1dFN0cmVhbSkge1xuICAgICAgICBjb25zdCBkZXNpcmVkU2FtcGxlUmF0ZSA9IDE2MDAwO1xuICAgICAgICBjb25zdCB3YXZlU3RyZWFtRW5jb2RlciA9IG5ldyBSaWZmUGNtRW5jb2Rlcihjb250ZXh0LnNhbXBsZVJhdGUsIGRlc2lyZWRTYW1wbGVSYXRlKTtcbiAgICAgICAgY29uc3QgbWljSW5wdXQgPSBjb250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKG1lZGlhU3RyZWFtKTtcbiAgICAgICAgY29uc3QgYXR0YWNoU2NyaXB0UHJvY2Vzc29yID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1mdW5jdGlvbi1yZXR1cm4tdHlwZVxuICAgICAgICAgICAgY29uc3Qgc2NyaXB0Tm9kZSA9ICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGJ1ZmZlclNpemUgPSAwO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZVNjcmlwdFByb2Nlc3NvcihidWZmZXJTaXplLCAxLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlYmtpdCAoPD0gdmVyc2lvbiAzMSkgcmVxdWlyZXMgYSB2YWxpZCBidWZmZXJTaXplLlxuICAgICAgICAgICAgICAgICAgICBidWZmZXJTaXplID0gMjA0ODtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGF1ZGlvU2FtcGxlUmF0ZSA9IGNvbnRleHQuc2FtcGxlUmF0ZTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGJ1ZmZlclNpemUgPCAxNjM4NCAmJiBhdWRpb1NhbXBsZVJhdGUgPj0gKDIgKiBkZXNpcmVkU2FtcGxlUmF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlclNpemUgPDw9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpb1NhbXBsZVJhdGUgPj49IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuY3JlYXRlU2NyaXB0UHJvY2Vzc29yKGJ1ZmZlclNpemUsIDEsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKCk7XG4gICAgICAgICAgICBzY3JpcHROb2RlLm9uYXVkaW9wcm9jZXNzID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXRGcmFtZSA9IGV2ZW50LmlucHV0QnVmZmVyLmdldENoYW5uZWxEYXRhKDApO1xuICAgICAgICAgICAgICAgIGlmIChvdXRwdXRTdHJlYW0gJiYgIW91dHB1dFN0cmVhbS5pc0Nsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB3YXZlRnJhbWUgPSB3YXZlU3RyZWFtRW5jb2Rlci5lbmNvZGUoaW5wdXRGcmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIXdhdmVGcmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0U3RyZWFtLndyaXRlU3RyZWFtQ2h1bmsoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogd2F2ZUZyYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRW5kOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lUmVjZWl2ZWQ6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBtaWNJbnB1dC5jb25uZWN0KHNjcmlwdE5vZGUpO1xuICAgICAgICAgICAgc2NyaXB0Tm9kZS5jb25uZWN0KGNvbnRleHQuZGVzdGluYXRpb24pO1xuICAgICAgICAgICAgdGhpcy5wcml2TWVkaWFSZXNvdXJjZXMgPSB7XG4gICAgICAgICAgICAgICAgc2NyaXB0UHJvY2Vzc29yTm9kZTogc2NyaXB0Tm9kZSxcbiAgICAgICAgICAgICAgICBzb3VyY2U6IG1pY0lucHV0LFxuICAgICAgICAgICAgICAgIHN0cmVhbTogbWVkaWFTdHJlYW0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICAvLyBodHRwczovL3dlYmF1ZGlvLmdpdGh1Yi5pby93ZWItYXVkaW8tYXBpLyNhdWRpb3dvcmtsZXRcbiAgICAgICAgLy8gVXNpbmcgQXVkaW9Xb3JrbGV0IHRvIGltcHJvdmUgYXVkaW8gcXVhbGl0eSBhbmQgYXZvaWQgYXVkaW8gZ2xpdGNoZXMgZHVlIHRvIGJsb2NraW5nIHRoZSBVSSB0aHJlYWRcbiAgICAgICAgaWYgKCEhY29udGV4dC5hdWRpb1dvcmtsZXQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wcml2U3BlZWNoUHJvY2Vzc29yU2NyaXB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgd29ya2xldFNjcmlwdCA9IGBjbGFzcyBTUCBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvciB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3MoaW5wdXRzLCBvdXRwdXRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dCA9IGlucHV0c1swXTtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCBpbnB1dC5sZW5ndGg7IGNoYW5uZWwgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbY2hhbm5lbF0gPSBpbnB1dFtjaGFubmVsXTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9ydC5wb3N0TWVzc2FnZShvdXRwdXRbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyUHJvY2Vzc29yKCdzcGVlY2gtcHJvY2Vzc29yJywgU1ApO2A7XG4gICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFt3b3JrbGV0U2NyaXB0XSwgeyB0eXBlOiBcImFwcGxpY2F0aW9uL2phdmFzY3JpcHQ7IGNoYXJzZXQ9dXRmLThcIiB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9jZXNzb3JTY3JpcHQgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGV4dC5hdWRpb1dvcmtsZXRcbiAgICAgICAgICAgICAgICAuYWRkTW9kdWxlKHRoaXMucHJpdlNwZWVjaFByb2Nlc3NvclNjcmlwdClcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgd29ya2xldE5vZGUgPSBuZXcgQXVkaW9Xb3JrbGV0Tm9kZShjb250ZXh0LCBcInNwZWVjaC1wcm9jZXNzb3JcIik7XG4gICAgICAgICAgICAgICAgd29ya2xldE5vZGUucG9ydC5vbm1lc3NhZ2UgPSAoZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRGcmFtZSA9IGV2LmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRwdXRTdHJlYW0gJiYgIW91dHB1dFN0cmVhbS5pc0Nsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2F2ZUZyYW1lID0gd2F2ZVN0cmVhbUVuY29kZXIuZW5jb2RlKGlucHV0RnJhbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhd2F2ZUZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0U3RyZWFtLndyaXRlU3RyZWFtQ2h1bmsoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXI6IHdhdmVGcmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lUmVjZWl2ZWQ6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIG1pY0lucHV0LmNvbm5lY3Qod29ya2xldE5vZGUpO1xuICAgICAgICAgICAgICAgIHdvcmtsZXROb2RlLmNvbm5lY3QoY29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TWVkaWFSZXNvdXJjZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHNjcmlwdFByb2Nlc3Nvck5vZGU6IHdvcmtsZXROb2RlLFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IG1pY0lucHV0LFxuICAgICAgICAgICAgICAgICAgICBzdHJlYW06IG1lZGlhU3RyZWFtLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXR0YWNoU2NyaXB0UHJvY2Vzc29yKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXR0YWNoU2NyaXB0UHJvY2Vzc29yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gc3RhcnQgYXVkaW8gd29ya2xldCBub2RlIGZvciBQQ01SZWNvcmRlcjogJHtlcnJ9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVsZWFzZU1lZGlhUmVzb3VyY2VzKGNvbnRleHQpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdk1lZGlhUmVzb3VyY2VzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2TWVkaWFSZXNvdXJjZXMuc2NyaXB0UHJvY2Vzc29yTm9kZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdk1lZGlhUmVzb3VyY2VzLnNjcmlwdFByb2Nlc3Nvck5vZGUuZGlzY29ubmVjdChjb250ZXh0LmRlc3RpbmF0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZNZWRpYVJlc291cmNlcy5zY3JpcHRQcm9jZXNzb3JOb2RlID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZNZWRpYVJlc291cmNlcy5zb3VyY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZNZWRpYVJlc291cmNlcy5zb3VyY2UuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZTdG9wSW5wdXRPblJlbGVhc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TWVkaWFSZXNvdXJjZXMuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB0cmFjay5zdG9wKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZNZWRpYVJlc291cmNlcy5zb3VyY2UgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNldFdvcmtsZXRVcmwodXJsKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFByb2Nlc3NvclNjcmlwdCA9IHVybDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBDTVJlY29yZGVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBQcm9wZXJ0eUlkIH0gZnJvbSBcIi4uL3Nkay9FeHBvcnRzXCI7XG5leHBvcnQgY2xhc3MgUHJveHlJbmZvIHtcbiAgICBjb25zdHJ1Y3Rvcihwcm94eUhvc3ROYW1lLCBwcm94eVBvcnQsIHByb3h5VXNlck5hbWUsIHByb3h5UGFzc3dvcmQpIHtcbiAgICAgICAgdGhpcy5wcml2UHJveHlIb3N0TmFtZSA9IHByb3h5SG9zdE5hbWU7XG4gICAgICAgIHRoaXMucHJpdlByb3h5UG9ydCA9IHByb3h5UG9ydDtcbiAgICAgICAgdGhpcy5wcml2UHJveHlVc2VyTmFtZSA9IHByb3h5VXNlck5hbWU7XG4gICAgICAgIHRoaXMucHJpdlByb3h5UGFzc3dvcmQgPSBwcm94eVBhc3N3b3JkO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVBhcmFtZXRlcnMocGFyYW1ldGVycykge1xuICAgICAgICByZXR1cm4gbmV3IFByb3h5SW5mbyhwYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlIb3N0TmFtZSksIHBhcnNlSW50KHBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVBvcnQpLCAxMCksIHBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVVzZXJOYW1lKSwgcGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5UGFzc3dvcmQpKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21SZWNvZ25pemVyQ29uZmlnKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gdGhpcy5mcm9tUGFyYW1ldGVycyhjb25maWcucGFyYW1ldGVycyk7XG4gICAgfVxuICAgIGdldCBIb3N0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3h5SG9zdE5hbWU7XG4gICAgfVxuICAgIGdldCBQb3J0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJveHlQb3J0O1xuICAgIH1cbiAgICBnZXQgVXNlck5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm94eVVzZXJOYW1lO1xuICAgIH1cbiAgICBnZXQgUGFzc3dvcmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm94eVBhc3N3b3JkO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJveHlJbmZvLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgY2xhc3MgUmVwbGF5YWJsZUF1ZGlvTm9kZSB7XG4gICAgY29uc3RydWN0b3IoYXVkaW9Tb3VyY2UsIGJ5dGVzUGVyU2Vjb25kKSB7XG4gICAgICAgIHRoaXMucHJpdkJ1ZmZlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5wcml2UmVwbGF5T2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5wcml2TGFzdFNocmlua09mZnNldCA9IDA7XG4gICAgICAgIHRoaXMucHJpdkJ1ZmZlclN0YXJ0T2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5wcml2QnVmZmVyU2VyaWFsID0gMDtcbiAgICAgICAgdGhpcy5wcml2QnVmZmVyZWRCeXRlcyA9IDA7XG4gICAgICAgIHRoaXMucHJpdlJlcGxheSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZMYXN0Q2h1bmtBY3F1aXJlZFRpbWUgPSAwO1xuICAgICAgICB0aGlzLnByaXZBdWRpb05vZGUgPSBhdWRpb1NvdXJjZTtcbiAgICAgICAgdGhpcy5wcml2Qnl0ZXNQZXJTZWNvbmQgPSBieXRlc1BlclNlY29uZDtcbiAgICB9XG4gICAgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb05vZGUuaWQoKTtcbiAgICB9XG4gICAgLy8gUmVhZHMgYW5kIHJldHVybnMgdGhlIG5leHQgY2h1bmsgb2YgYXVkaW8gYnVmZmVyLlxuICAgIC8vIElmIHJlcGxheSBvZiBleGlzdGluZyBidWZmZXJzIGFyZSBuZWVkZWQsIHJlYWQoKSB3aWxsIGZpcnN0IHNlZWsgYW5kIHJlcGxheVxuICAgIC8vIGV4aXN0aW5nIGNvbnRlbnQsIGFuZCB1cG9pbiBjb21wbGV0aW9uIGl0IHdpbGwgcmVhZCBuZXcgY29udGVudCBmcm9tIHRoZSB1bmRlcmx5aW5nXG4gICAgLy8gYXVkaW8gbm9kZSwgc2F2aW5nIHRoYXQgY29udGVudCBpbnRvIHRoZSByZXBsYXlhYmxlIGJ1ZmZlcnMuXG4gICAgcmVhZCgpIHtcbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSByZXBsYXkgcmVxdWVzdCB0byBob25vci5cbiAgICAgICAgaWYgKCEhdGhpcy5wcml2UmVwbGF5ICYmIHRoaXMucHJpdkJ1ZmZlcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBzdGFydCBwb2ludCBpbiB0aGUgYnVmZmVycy5cbiAgICAgICAgICAgIC8vIE9mZnNldHMgYXJlIGluIDEwMG5zIGluY3JlbWVudHMuXG4gICAgICAgICAgICAvLyBTbyBob3cgbWFueSBieXRlcyBkbyB3ZSBuZWVkIHRvIHNlZWsgdG8gZ2V0IHRoZSByaWdodCBvZmZzZXQ/XG4gICAgICAgICAgICBjb25zdCBvZmZzZXRUb1NlZWsgPSB0aGlzLnByaXZSZXBsYXlPZmZzZXQgLSB0aGlzLnByaXZCdWZmZXJTdGFydE9mZnNldDtcbiAgICAgICAgICAgIGxldCBieXRlc1RvU2VlayA9IE1hdGgucm91bmQob2Zmc2V0VG9TZWVrICogdGhpcy5wcml2Qnl0ZXNQZXJTZWNvbmQgKiAxZS03KTtcbiAgICAgICAgICAgIGlmICgwICE9PSAoYnl0ZXNUb1NlZWsgJSAyKSkge1xuICAgICAgICAgICAgICAgIGJ5dGVzVG9TZWVrKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoaSA8IHRoaXMucHJpdkJ1ZmZlcnMubGVuZ3RoICYmIGJ5dGVzVG9TZWVrID49IHRoaXMucHJpdkJ1ZmZlcnNbaV0uY2h1bmsuYnVmZmVyLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBieXRlc1RvU2VlayAtPSB0aGlzLnByaXZCdWZmZXJzW2krK10uY2h1bmsuYnVmZmVyLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaSA8IHRoaXMucHJpdkJ1ZmZlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmV0VmFsID0gdGhpcy5wcml2QnVmZmVyc1tpXS5jaHVuay5idWZmZXIuc2xpY2UoYnl0ZXNUb1NlZWspO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcGxheU9mZnNldCArPSAocmV0VmFsLmJ5dGVMZW5ndGggLyB0aGlzLnByaXZCeXRlc1BlclNlY29uZCkgKiAxZSs3O1xuICAgICAgICAgICAgICAgIC8vIElmIHdlJ3ZlIHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgYnVmZmVycywgc3RvcCByZXBsYXlpbmcuXG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IHRoaXMucHJpdkJ1ZmZlcnMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXBsYXkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogcmV0VmFsLFxuICAgICAgICAgICAgICAgICAgICBpc0VuZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVSZWNlaXZlZDogdGhpcy5wcml2QnVmZmVyc1tpXS5jaHVuay50aW1lUmVjZWl2ZWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvTm9kZS5yZWFkKClcbiAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LmJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkJ1ZmZlcnMucHVzaChuZXcgQnVmZmVyRW50cnkocmVzdWx0LCB0aGlzLnByaXZCdWZmZXJTZXJpYWwrKywgdGhpcy5wcml2QnVmZmVyZWRCeXRlcykpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkJ1ZmZlcmVkQnl0ZXMgKz0gcmVzdWx0LmJ1ZmZlci5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRldGFjaCgpIHtcbiAgICAgICAgdGhpcy5wcml2QnVmZmVycyA9IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvTm9kZS5kZXRhY2goKTtcbiAgICB9XG4gICAgcmVwbGF5KCkge1xuICAgICAgICBpZiAodGhpcy5wcml2QnVmZmVycyAmJiAwICE9PSB0aGlzLnByaXZCdWZmZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5wcml2UmVwbGF5ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlcGxheU9mZnNldCA9IHRoaXMucHJpdkxhc3RTaHJpbmtPZmZzZXQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gU2hyaW5rcyB0aGUgZXhpc3RpbmcgYXVkaW8gYnVmZmVycyB0byBzdGFydCBhdCB0aGUgbmV3IG9mZnNldCwgb3IgYXQgdGhlXG4gICAgLy8gYmVnaW5uaW5nIG9mIHRoZSBidWZmZXIgY2xvc2VzdCB0byB0aGUgcmVxdWVzdGVkIG9mZnNldC5cbiAgICAvLyBBIHJlcGxheSByZXF1ZXN0IHdpbGwgc3RhcnQgZnJvbSB0aGUgbGFzdCBzaHJpbmsgcG9pbnQuXG4gICAgc2hyaW5rQnVmZmVycyhvZmZzZXQpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdkJ1ZmZlcnMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLnByaXZCdWZmZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdkxhc3RTaHJpbmtPZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIC8vIEZpbmQgdGhlIHN0YXJ0IHBvaW50IGluIHRoZSBidWZmZXJzLlxuICAgICAgICAvLyBPZmZzZXRzIGFyZSBpbiAxMDBucyBpbmNyZW1lbnRzLlxuICAgICAgICAvLyBTbyBob3cgbWFueSBieXRlcyBkbyB3ZSBuZWVkIHRvIHNlZWsgdG8gZ2V0IHRoZSByaWdodCBvZmZzZXQ/XG4gICAgICAgIGNvbnN0IG9mZnNldFRvU2VlayA9IG9mZnNldCAtIHRoaXMucHJpdkJ1ZmZlclN0YXJ0T2Zmc2V0O1xuICAgICAgICBsZXQgYnl0ZXNUb1NlZWsgPSBNYXRoLnJvdW5kKG9mZnNldFRvU2VlayAqIHRoaXMucHJpdkJ5dGVzUGVyU2Vjb25kICogMWUtNyk7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLnByaXZCdWZmZXJzLmxlbmd0aCAmJiBieXRlc1RvU2VlayA+PSB0aGlzLnByaXZCdWZmZXJzW2ldLmNodW5rLmJ1ZmZlci5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICBieXRlc1RvU2VlayAtPSB0aGlzLnByaXZCdWZmZXJzW2krK10uY2h1bmsuYnVmZmVyLmJ5dGVMZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2QnVmZmVyU3RhcnRPZmZzZXQgPSBNYXRoLnJvdW5kKG9mZnNldCAtICgoYnl0ZXNUb1NlZWsgLyB0aGlzLnByaXZCeXRlc1BlclNlY29uZCkgKiAxZSs3KSk7XG4gICAgICAgIHRoaXMucHJpdkJ1ZmZlcnMgPSB0aGlzLnByaXZCdWZmZXJzLnNsaWNlKGkpO1xuICAgIH1cbiAgICAvLyBGaW5kcyB0aGUgdGltZSBhIGJ1ZmZlciBvZiBhdWRpbyB3YXMgZmlyc3Qgc2VlbiBieSBvZmZzZXQuXG4gICAgZmluZFRpbWVBdE9mZnNldChvZmZzZXQpIHtcbiAgICAgICAgaWYgKG9mZnNldCA8IHRoaXMucHJpdkJ1ZmZlclN0YXJ0T2Zmc2V0IHx8IHRoaXMucHJpdkJ1ZmZlcnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLnByaXZCdWZmZXJzKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydE9mZnNldCA9ICh2YWx1ZS5ieXRlT2Zmc2V0IC8gdGhpcy5wcml2Qnl0ZXNQZXJTZWNvbmQpICogMWU3O1xuICAgICAgICAgICAgY29uc3QgZW5kT2Zmc2V0ID0gc3RhcnRPZmZzZXQgKyAoKHZhbHVlLmNodW5rLmJ1ZmZlci5ieXRlTGVuZ3RoIC8gdGhpcy5wcml2Qnl0ZXNQZXJTZWNvbmQpICogMWU3KTtcbiAgICAgICAgICAgIGlmIChvZmZzZXQgPj0gc3RhcnRPZmZzZXQgJiYgb2Zmc2V0IDw9IGVuZE9mZnNldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5jaHVuay50aW1lUmVjZWl2ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxufVxuLy8gUHJpbWFyeSB1c2Ugb2YgdGhpcyBjbGFzcyBpcyB0byBoZWxwIGRlYnVnZ2luZyBwcm9ibGVtcyB3aXRoIHRoZSByZXBsYXlcbi8vIGNvZGUuIElmIHRoZSBtZW1vcnkgY29zdCBvZiBhbGxvYyAvIGRlYWxsb2MgZ2V0cyB0b28gbXVjaCwgZHJvcCBpdCBhbmQganVzdCB1c2Vcbi8vIHRoZSBBcnJheUJ1ZmZlciBkaXJlY3RseS5cbmNsYXNzIEJ1ZmZlckVudHJ5IHtcbiAgICBjb25zdHJ1Y3RvcihjaHVuaywgc2VyaWFsLCBieXRlT2Zmc2V0KSB7XG4gICAgICAgIHRoaXMuY2h1bmsgPSBjaHVuaztcbiAgICAgICAgdGhpcy5zZXJpYWwgPSBzZXJpYWw7XG4gICAgICAgIHRoaXMuYnl0ZU9mZnNldCA9IGJ5dGVPZmZzZXQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZXBsYXlhYmxlQXVkaW9Ob2RlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgY2xhc3MgUmVzdENvbmZpZ0Jhc2Uge1xuICAgIHN0YXRpYyBnZXQgcmVxdWVzdE9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiBSZXN0Q29uZmlnQmFzZS5wcml2RGVmYXVsdFJlcXVlc3RPcHRpb25zO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGNvbmZpZ1BhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIFJlc3RDb25maWdCYXNlLnByaXZEZWZhdWx0UGFyYW1zO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IHJlc3RFcnJvcnMoKSB7XG4gICAgICAgIHJldHVybiBSZXN0Q29uZmlnQmFzZS5wcml2UmVzdEVycm9ycztcbiAgICB9XG59XG5SZXN0Q29uZmlnQmFzZS5wcml2RGVmYXVsdFJlcXVlc3RPcHRpb25zID0ge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICB9LFxuICAgIGlnbm9yZUNhY2hlOiBmYWxzZSxcbiAgICB0aW1lb3V0OiAxMDAwMCxcbn07XG5SZXN0Q29uZmlnQmFzZS5wcml2UmVzdEVycm9ycyA9IHtcbiAgICBhdXRoSW52YWxpZFN1YnNjcmlwdGlvbktleTogXCJZb3UgbXVzdCBzcGVjaWZ5IGVpdGhlciBhbiBhdXRoZW50aWNhdGlvbiB0b2tlbiB0byB1c2UsIG9yIGEgQ29nbml0aXZlIFNwZWVjaCBzdWJzY3JpcHRpb24ga2V5LlwiLFxuICAgIGF1dGhJbnZhbGlkU3Vic2NyaXB0aW9uUmVnaW9uOiBcIllvdSBtdXN0IHNwZWNpZnkgdGhlIENvZ25pdGl2ZSBTcGVlY2ggcmVnaW9uIHRvIHVzZS5cIixcbiAgICBpbnZhbGlkQXJnczogXCJSZXF1aXJlZCBpbnB1dCBub3QgZm91bmQ6IHthcmd9LlwiLFxuICAgIGludmFsaWRDcmVhdGVKb2luQ29udmVyc2F0aW9uUmVzcG9uc2U6IFwiQ3JlYXRpbmcvSm9pbmluZyBjb252ZXJzYXRpb24gZmFpbGVkIHdpdGggSFRUUCB7c3RhdHVzfS5cIixcbiAgICBpbnZhbGlkUGFydGljaXBhbnRSZXF1ZXN0OiBcIlRoZSByZXF1ZXN0ZWQgcGFydGljaXBhbnQgd2FzIG5vdCBmb3VuZC5cIixcbiAgICBwZXJtaXNzaW9uRGVuaWVkQ29ubmVjdDogXCJSZXF1aXJlZCBjcmVkZW50aWFscyBub3QgZm91bmQuXCIsXG4gICAgcGVybWlzc2lvbkRlbmllZENvbnZlcnNhdGlvbjogXCJJbnZhbGlkIG9wZXJhdGlvbjogb25seSB0aGUgaG9zdCBjYW4ge2NvbW1hbmR9IHRoZSBjb252ZXJzYXRpb24uXCIsXG4gICAgcGVybWlzc2lvbkRlbmllZFBhcnRpY2lwYW50OiBcIkludmFsaWQgb3BlcmF0aW9uOiBvbmx5IHRoZSBob3N0IGNhbiB7Y29tbWFuZH0gYSBwYXJ0aWNpcGFudC5cIixcbiAgICBwZXJtaXNzaW9uRGVuaWVkU2VuZDogXCJJbnZhbGlkIG9wZXJhdGlvbjogdGhlIGNvbnZlcnNhdGlvbiBpcyBub3QgaW4gYSBjb25uZWN0ZWQgc3RhdGUuXCIsXG4gICAgcGVybWlzc2lvbkRlbmllZFN0YXJ0OiBcIkludmFsaWQgb3BlcmF0aW9uOiB0aGVyZSBpcyBhbHJlYWR5IGFuIGFjdGl2ZSBjb252ZXJzYXRpb24uXCIsXG59O1xuUmVzdENvbmZpZ0Jhc2UucHJpdkRlZmF1bHRQYXJhbXMgPSB7XG4gICAgYXBpVmVyc2lvbjogXCJhcGktdmVyc2lvblwiLFxuICAgIGF1dGhvcml6YXRpb246IFwiQXV0aG9yaXphdGlvblwiLFxuICAgIGNsaWVudEFwcElkOiBcIlgtQ2xpZW50QXBwSWRcIixcbiAgICBjb250ZW50VHlwZUtleTogXCJDb250ZW50LVR5cGVcIixcbiAgICBjb3JyZWxhdGlvbklkOiBcIlgtQ29ycmVsYXRpb25JZFwiLFxuICAgIGxhbmd1YWdlQ29kZTogXCJsYW5ndWFnZVwiLFxuICAgIG5pY2tuYW1lOiBcIm5pY2tuYW1lXCIsXG4gICAgcHJvZmFuaXR5OiBcInByb2Zhbml0eVwiLFxuICAgIHJlcXVlc3RJZDogXCJYLVJlcXVlc3RJZFwiLFxuICAgIHJvb21JZDogXCJyb29taWRcIixcbiAgICBzZXNzaW9uVG9rZW46IFwidG9rZW5cIixcbiAgICBzdWJzY3JpcHRpb25LZXk6IFwiT2NwLUFwaW0tU3Vic2NyaXB0aW9uLUtleVwiLFxuICAgIHN1YnNjcmlwdGlvblJlZ2lvbjogXCJPY3AtQXBpbS1TdWJzY3JpcHRpb24tUmVnaW9uXCIsXG4gICAgdG9rZW46IFwiWC1DYXBpdG9Ub2tlblwiLFxufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVzdENvbmZpZ0Jhc2UuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IGJlbnQgZnJvbSBcImJlbnRcIjtcbmltcG9ydCB7IEFyZ3VtZW50TnVsbEVycm9yLCBEZWZlcnJlZCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuZXhwb3J0IHZhciBSZXN0UmVxdWVzdFR5cGU7XG4oZnVuY3Rpb24gKFJlc3RSZXF1ZXN0VHlwZSkge1xuICAgIFJlc3RSZXF1ZXN0VHlwZVtcIkdldFwiXSA9IFwiR0VUXCI7XG4gICAgUmVzdFJlcXVlc3RUeXBlW1wiUG9zdFwiXSA9IFwiUE9TVFwiO1xuICAgIFJlc3RSZXF1ZXN0VHlwZVtcIkRlbGV0ZVwiXSA9IFwiREVMRVRFXCI7XG4gICAgUmVzdFJlcXVlc3RUeXBlW1wiRmlsZVwiXSA9IFwiZmlsZVwiO1xufSkoUmVzdFJlcXVlc3RUeXBlIHx8IChSZXN0UmVxdWVzdFR5cGUgPSB7fSkpO1xuLy8gYWNjZXB0IHJlc3Qgb3BlcmF0aW9ucyB2aWEgcmVxdWVzdCBtZXRob2QgYW5kIHJldHVybiBhYnN0cmFjdGVkIG9iamVjdHMgZnJvbSBzZXJ2ZXIgcmVzcG9uc2VcbmV4cG9ydCBjbGFzcyBSZXN0TWVzc2FnZUFkYXB0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ1BhcmFtcykge1xuICAgICAgICBpZiAoIWNvbmZpZ1BhcmFtcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwiY29uZmlnUGFyYW1zXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdkhlYWRlcnMgPSBjb25maWdQYXJhbXMuaGVhZGVycztcbiAgICAgICAgdGhpcy5wcml2SWdub3JlQ2FjaGUgPSBjb25maWdQYXJhbXMuaWdub3JlQ2FjaGU7XG4gICAgfVxuICAgIHN0YXRpYyBleHRyYWN0SGVhZGVyVmFsdWUoaGVhZGVyS2V5LCBoZWFkZXJzKSB7XG4gICAgICAgIGxldCBoZWFkZXJWYWx1ZSA9IFwiXCI7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBhcnIgPSBoZWFkZXJzLnRyaW0oKS5zcGxpdCgvW1xcclxcbl0rLyk7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJNYXAgPSB7fTtcbiAgICAgICAgICAgIGFyci5mb3JFYWNoKChsaW5lKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KFwiOiBcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gcGFydHMuc2hpZnQoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcGFydHMuam9pbihcIjogXCIpO1xuICAgICAgICAgICAgICAgIGhlYWRlck1hcFtoZWFkZXJdID0gdmFsdWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGhlYWRlclZhbHVlID0gaGVhZGVyTWFwW2hlYWRlcktleS50b0xvd2VyQ2FzZSgpXTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gaWdub3JlIHRoZSBlcnJvclxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoZWFkZXJWYWx1ZTtcbiAgICB9XG4gICAgc2V0IG9wdGlvbnMoY29uZmlnUGFyYW1zKSB7XG4gICAgICAgIHRoaXMucHJpdkhlYWRlcnMgPSBjb25maWdQYXJhbXMuaGVhZGVycztcbiAgICAgICAgdGhpcy5wcml2SWdub3JlQ2FjaGUgPSBjb25maWdQYXJhbXMuaWdub3JlQ2FjaGU7XG4gICAgfVxuICAgIHNldEhlYWRlcnMoa2V5LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZIZWFkZXJzW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmVxdWVzdChtZXRob2QsIHVyaSwgcXVlcnlQYXJhbXMgPSB7fSwgYm9keSA9IG51bGwpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VSZWNlaXZlZERlZmVycmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RDb21tYW5kID0gbWV0aG9kID09PSBSZXN0UmVxdWVzdFR5cGUuRmlsZSA/IFwiUE9TVFwiIDogbWV0aG9kO1xuICAgICAgICBjb25zdCBoYW5kbGVSZXN0UmVzcG9uc2UgPSAoZGF0YSwgaiA9IHt9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkID0gZGF0YTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoaiksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogSlNPTi5zdHJpbmdpZnkoZGF0YS5oZWFkZXJzKSxcbiAgICAgICAgICAgICAgICBqc29uOiBqLFxuICAgICAgICAgICAgICAgIG9rOiBkYXRhLnN0YXR1c0NvZGUgPj0gMjAwICYmIGRhdGEuc3RhdHVzQ29kZSA8IDMwMCxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiBqLmVycm9yID8gai5lcnJvci5tZXNzYWdlIDogZC5zdGF0dXNUZXh0ID8gZC5zdGF0dXNUZXh0IDogZC5zdGF0dXNNZXNzYWdlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzZW5kID0gKHBvc3REYXRhKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZW5kUmVxdWVzdCA9IGJlbnQodXJpLCByZXF1ZXN0Q29tbWFuZCwgdGhpcy5wcml2SGVhZGVycywgMjAwLCAyMDEsIDIwMiwgMjA0LCA0MDAsIDQwMSwgNDAyLCA0MDMsIDQwNCk7XG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSB0aGlzLnF1ZXJ5UGFyYW1zKHF1ZXJ5UGFyYW1zKSA9PT0gXCJcIiA/IFwiXCIgOiBgPyR7dGhpcy5xdWVyeVBhcmFtcyhxdWVyeVBhcmFtcyl9YDtcbiAgICAgICAgICAgIHNlbmRSZXF1ZXN0KHBhcmFtcywgcG9zdERhdGEpLnRoZW4oKGRhdGEpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBpZiAobWV0aG9kID09PSBSZXN0UmVxdWVzdFR5cGUuRGVsZXRlIHx8IGRhdGEuc3RhdHVzQ29kZSA9PT0gMjA0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE5vIEpTT04gZnJvbSBEZWxldGUgYW5kIHJlc2V0ICgyMDQpIG9wZXJhdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VSZWNlaXZlZERlZmVycmFsLnJlc29sdmUoaGFuZGxlUmVzdFJlc3BvbnNlKGRhdGEpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqID0geWllbGQgZGF0YS5qc29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZVJlY2VpdmVkRGVmZXJyYWwucmVzb2x2ZShoYW5kbGVSZXN0UmVzcG9uc2UoZGF0YSwgaikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VSZWNlaXZlZERlZmVycmFsLnJlc29sdmUoaGFuZGxlUmVzdFJlc3BvbnNlKGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICByZXNwb25zZVJlY2VpdmVkRGVmZXJyYWwucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5wcml2SWdub3JlQ2FjaGUpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkhlYWRlcnNbXCJDYWNoZS1Db250cm9sXCJdID0gXCJuby1jYWNoZVwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXRob2QgPT09IFJlc3RSZXF1ZXN0VHlwZS5Qb3N0ICYmIGJvZHkpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkhlYWRlcnNbXCJjb250ZW50LXR5cGVcIl0gPSBcImFwcGxpY2F0aW9uL2pzb25cIjtcbiAgICAgICAgICAgIHRoaXMucHJpdkhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl0gPSBcImFwcGxpY2F0aW9uL2pzb25cIjtcbiAgICAgICAgfVxuICAgICAgICBzZW5kKGJvZHkpO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2VSZWNlaXZlZERlZmVycmFsLnByb21pc2U7XG4gICAgfVxuICAgIHF1ZXJ5UGFyYW1zKHBhcmFtcyA9IHt9KSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhwYXJhbXMpXG4gICAgICAgICAgICAubWFwKChrKSA9PiBlbmNvZGVVUklDb21wb25lbnQoaykgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbXNba10pKVxuICAgICAgICAgICAgLmpvaW4oXCImXCIpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVzdE1lc3NhZ2VBZGFwdGVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IEFyZ3VtZW50TnVsbEVycm9yLCBjcmVhdGVOb0Rhc2hHdWlkLCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgV2Vic29ja2V0TWVzc2FnZUFkYXB0ZXIgfSBmcm9tIFwiLi9XZWJzb2NrZXRNZXNzYWdlQWRhcHRlclwiO1xuZXhwb3J0IGNsYXNzIFdlYnNvY2tldENvbm5lY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHVyaSwgcXVlcnlQYXJhbWV0ZXJzLCBoZWFkZXJzLCBtZXNzYWdlRm9ybWF0dGVyLCBwcm94eUluZm8sIGVuYWJsZUNvbXByZXNzaW9uID0gZmFsc2UsIGNvbm5lY3Rpb25JZCkge1xuICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgIGlmICghdXJpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXJyb3IoXCJ1cmlcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFtZXNzYWdlRm9ybWF0dGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXJyb3IoXCJtZXNzYWdlRm9ybWF0dGVyXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdk1lc3NhZ2VGb3JtYXR0ZXIgPSBtZXNzYWdlRm9ybWF0dGVyO1xuICAgICAgICBsZXQgcXVlcnlQYXJhbXMgPSBcIlwiO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGlmIChxdWVyeVBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFyYW1OYW1lIGluIHF1ZXJ5UGFyYW1ldGVycykge1xuICAgICAgICAgICAgICAgIGlmIChwYXJhbU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlQYXJhbXMgKz0gKChpID09PSAwKSAmJiAodXJpLmluZGV4T2YoXCI/XCIpID09PSAtMSkpID8gXCI/XCIgOiBcIiZcIjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zICs9IGtleTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbCA9IHF1ZXJ5UGFyYW1ldGVyc1twYXJhbU5hbWVdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBlbmNvZGVVUklDb21wb25lbnQodmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zICs9IGA9JHt2YWx9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChoZWFkZXJzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGhlYWRlck5hbWUgaW4gaGVhZGVycykge1xuICAgICAgICAgICAgICAgIGlmIChoZWFkZXJOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zICs9ICgoaSA9PT0gMCkgJiYgKHVyaS5pbmRleE9mKFwiP1wiKSA9PT0gLTEpKSA/IFwiP1wiIDogXCImXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IGVuY29kZVVSSUNvbXBvbmVudChoZWFkZXJzW2hlYWRlck5hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlQYXJhbXMgKz0gYCR7aGVhZGVyTmFtZX09JHt2YWx9YDtcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZVcmkgPSB1cmkgKyBxdWVyeVBhcmFtcztcbiAgICAgICAgdGhpcy5wcml2SWQgPSBjb25uZWN0aW9uSWQgPyBjb25uZWN0aW9uSWQgOiBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlQWRhcHRlciA9IG5ldyBXZWJzb2NrZXRNZXNzYWdlQWRhcHRlcih0aGlzLnByaXZVcmksIHRoaXMuaWQsIHRoaXMucHJpdk1lc3NhZ2VGb3JtYXR0ZXIsIHByb3h5SW5mbywgaGVhZGVycywgZW5hYmxlQ29tcHJlc3Npb24pO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2VBZGFwdGVyKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2VBZGFwdGVyLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpc0Rpc3Bvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNEaXNwb3NlZDtcbiAgICB9XG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SWQ7XG4gICAgfVxuICAgIGdldCB1cmkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZVcmk7XG4gICAgfVxuICAgIHN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2VBZGFwdGVyLnN0YXRlO1xuICAgIH1cbiAgICBvcGVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2VBZGFwdGVyLm9wZW4oKTtcbiAgICB9XG4gICAgc2VuZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZUFkYXB0ZXIuc2VuZChtZXNzYWdlKTtcbiAgICB9XG4gICAgcmVhZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlQWRhcHRlci5yZWFkKCk7XG4gICAgfVxuICAgIGdldCBldmVudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZUFkYXB0ZXIuZXZlbnRzO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9V2Vic29ja2V0Q29ubmVjdGlvbi5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgKiBhcyBuZXQgZnJvbSBcIm5ldFwiO1xuaW1wb3J0ICogYXMgdGxzIGZyb20gXCJ0bHNcIjtcbmltcG9ydCBBZ2VudCBmcm9tIFwiYWdlbnQtYmFzZVwiO1xuaW1wb3J0IEh0dHBzUHJveHlBZ2VudCBmcm9tIFwiaHR0cHMtcHJveHktYWdlbnRcIjtcbmltcG9ydCB3cyBmcm9tIFwid3NcIjtcbmltcG9ydCB7IEhlYWRlck5hbWVzIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvSGVhZGVyTmFtZXNcIjtcbmltcG9ydCB7IEFyZ3VtZW50TnVsbEVycm9yLCBCYWNrZ3JvdW5kRXZlbnQsIENvbm5lY3Rpb25DbG9zZWRFdmVudCwgQ29ubmVjdGlvbkVycm9yRXZlbnQsIENvbm5lY3Rpb25Fc3RhYmxpc2hlZEV2ZW50LCBDb25uZWN0aW9uTWVzc2FnZVJlY2VpdmVkRXZlbnQsIENvbm5lY3Rpb25NZXNzYWdlU2VudEV2ZW50LCBDb25uZWN0aW9uT3BlblJlc3BvbnNlLCBDb25uZWN0aW9uU3RhcnRFdmVudCwgQ29ubmVjdGlvblN0YXRlLCBEZWZlcnJlZCwgRXZlbnRzLCBFdmVudFNvdXJjZSwgTWVzc2FnZVR5cGUsIFF1ZXVlLCBSYXdXZWJzb2NrZXRNZXNzYWdlLCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIFdlYnNvY2tldE1lc3NhZ2VBZGFwdGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih1cmksIGNvbm5lY3Rpb25JZCwgbWVzc2FnZUZvcm1hdHRlciwgcHJveHlJbmZvLCBoZWFkZXJzLCBlbmFibGVDb21wcmVzc2lvbikge1xuICAgICAgICBpZiAoIXVyaSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwidXJpXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbWVzc2FnZUZvcm1hdHRlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwibWVzc2FnZUZvcm1hdHRlclwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb3h5SW5mbyA9IHByb3h5SW5mbztcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkV2ZW50cyA9IG5ldyBFdmVudFNvdXJjZSgpO1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uSWQgPSBjb25uZWN0aW9uSWQ7XG4gICAgICAgIHRoaXMucHJpdk1lc3NhZ2VGb3JtYXR0ZXIgPSBtZXNzYWdlRm9ybWF0dGVyO1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uU3RhdGUgPSBDb25uZWN0aW9uU3RhdGUuTm9uZTtcbiAgICAgICAgdGhpcy5wcml2VXJpID0gdXJpO1xuICAgICAgICB0aGlzLnByaXZIZWFkZXJzID0gaGVhZGVycztcbiAgICAgICAgdGhpcy5wcml2RW5hYmxlQ29tcHJlc3Npb24gPSBlbmFibGVDb21wcmVzc2lvbjtcbiAgICAgICAgLy8gQWRkIHRoZSBjb25uZWN0aW9uIElEIHRvIHRoZSBoZWFkZXJzXG4gICAgICAgIHRoaXMucHJpdkhlYWRlcnNbSGVhZGVyTmFtZXMuQ29ubmVjdGlvbklkXSA9IHRoaXMucHJpdkNvbm5lY3Rpb25JZDtcbiAgICAgICAgdGhpcy5wcml2TGFzdEVycm9yUmVjZWl2ZWQgPSBcIlwiO1xuICAgIH1cbiAgICBnZXQgc3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uU3RhdGU7XG4gICAgfVxuICAgIG9wZW4oKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uU3RhdGUgPT09IENvbm5lY3Rpb25TdGF0ZS5EaXNjb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgQ2Fubm90IG9wZW4gYSBjb25uZWN0aW9uIHRoYXQgaXMgaW4gJHt0aGlzLnByaXZDb25uZWN0aW9uU3RhdGV9IHN0YXRlYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hEZWZlcnJhbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hEZWZlcnJhbC5wcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hEZWZlcnJhbCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICB0aGlzLnByaXZDZXJ0aWZpY2F0ZVZhbGlkYXRlZERlZmVycmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25TdGF0ZSA9IENvbm5lY3Rpb25TdGF0ZS5Db25uZWN0aW5nO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBXZWJTb2NrZXQgIT09IFwidW5kZWZpbmVkXCIgJiYgIVdlYnNvY2tldE1lc3NhZ2VBZGFwdGVyLmZvcmNlTnBtV2ViU29ja2V0KSB7XG4gICAgICAgICAgICAgICAgLy8gQnJvd3NlciBoYW5kbGVzIGNlcnQgY2hlY2tzLlxuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNlcnRpZmljYXRlVmFsaWRhdGVkRGVmZXJyYWwucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdldlYnNvY2tldENsaWVudCA9IG5ldyBXZWJTb2NrZXQodGhpcy5wcml2VXJpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7IGhlYWRlcnM6IHRoaXMucHJpdkhlYWRlcnMsIHBlck1lc3NhZ2VEZWZsYXRlOiB0aGlzLnByaXZFbmFibGVDb21wcmVzc2lvbiB9O1xuICAgICAgICAgICAgICAgIC8vIFRoZSBvY3NwIGxpYnJhcnkgd2lsbCBoYW5kbGUgdmFsaWRhdGlvbiBmb3IgdXMgYW5kIGZhaWwgdGhlIGNvbm5lY3Rpb24gaWYgbmVlZGVkLlxuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNlcnRpZmljYXRlVmFsaWRhdGVkRGVmZXJyYWwucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuYWdlbnQgPSB0aGlzLmdldEFnZW50KCk7XG4gICAgICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9jb2duaXRpdmUtc2VydmljZXMtc3BlZWNoLXNkay1qcy9pc3N1ZXMvNDY1XG4gICAgICAgICAgICAgICAgLy8gV2hpY2ggaXMgcm9vdCBjYXVzZWQgYnkgaHR0cHM6Ly9naXRodWIuY29tL1Rvb1RhbGxOYXRlL25vZGUtYWdlbnQtYmFzZS9pc3N1ZXMvNjFcbiAgICAgICAgICAgICAgICBjb25zdCB1cmkgPSBuZXcgVVJMKHRoaXMucHJpdlVyaSk7XG4gICAgICAgICAgICAgICAgbGV0IHByb3RvY29sID0gdXJpLnByb3RvY29sO1xuICAgICAgICAgICAgICAgIGlmICgocHJvdG9jb2wgPT09IG51bGwgfHwgcHJvdG9jb2wgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb3RvY29sLnRvTG9jYWxlTG93ZXJDYXNlKCkpID09PSBcIndzczpcIikge1xuICAgICAgICAgICAgICAgICAgICBwcm90b2NvbCA9IFwiaHR0cHM6XCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm90b2NvbCA9PT0gbnVsbCB8fCBwcm90b2NvbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJvdG9jb2wudG9Mb2NhbGVMb3dlckNhc2UoKSkgPT09IFwid3M6XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2wgPSBcImh0dHA6XCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgICAgICAgICBvcHRpb25zLmFnZW50LnByb3RvY29sID0gcHJvdG9jb2w7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50ID0gbmV3IHdzKHRoaXMucHJpdlVyaSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByaXZXZWJzb2NrZXRDbGllbnQuYmluYXJ5VHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlY2VpdmluZ01lc3NhZ2VRdWV1ZSA9IG5ldyBRdWV1ZSgpO1xuICAgICAgICAgICAgdGhpcy5wcml2RGlzY29ubmVjdERlZmVycmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgICAgICB0aGlzLnByaXZTZW5kTWVzc2FnZVF1ZXVlID0gbmV3IFF1ZXVlKCk7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NTZW5kUXVldWUoKS5jYXRjaCgocmVhc29uKSA9PiB7XG4gICAgICAgICAgICAgICAgRXZlbnRzLmluc3RhbmNlLm9uRXZlbnQobmV3IEJhY2tncm91bmRFdmVudChyZWFzb24pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaERlZmVycmFsLnJlc29sdmUobmV3IENvbm5lY3Rpb25PcGVuUmVzcG9uc2UoNTAwLCBlcnJvcikpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hEZWZlcnJhbC5wcm9taXNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25FdmVudChuZXcgQ29ubmVjdGlvblN0YXJ0RXZlbnQodGhpcy5wcml2Q29ubmVjdGlvbklkLCB0aGlzLnByaXZVcmkpKTtcbiAgICAgICAgdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50Lm9ub3BlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJpdkNlcnRpZmljYXRlVmFsaWRhdGVkRGVmZXJyYWwucHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uU3RhdGUgPSBDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGVkO1xuICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgQ29ubmVjdGlvbkVzdGFibGlzaGVkRXZlbnQodGhpcy5wcml2Q29ubmVjdGlvbklkKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaERlZmVycmFsLnJlc29sdmUobmV3IENvbm5lY3Rpb25PcGVuUmVzcG9uc2UoMjAwLCBcIlwiKSk7XG4gICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoRGVmZXJyYWwucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByaXZXZWJzb2NrZXRDbGllbnQub25lcnJvciA9IChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IENvbm5lY3Rpb25FcnJvckV2ZW50KHRoaXMucHJpdkNvbm5lY3Rpb25JZCwgZS5tZXNzYWdlLCBlLnR5cGUpKTtcbiAgICAgICAgICAgIHRoaXMucHJpdkxhc3RFcnJvclJlY2VpdmVkID0gZS5tZXNzYWdlO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByaXZXZWJzb2NrZXRDbGllbnQub25jbG9zZSA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2Q29ubmVjdGlvblN0YXRlID09PSBDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25TdGF0ZSA9IENvbm5lY3Rpb25TdGF0ZS5EaXNjb25uZWN0ZWQ7XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5vbkV2ZW50KG5ldyBDb25uZWN0aW9uRXN0YWJsaXNoRXJyb3JFdmVudCh0aGlzLmNvbm5lY3Rpb25JZCwgZS5jb2RlLCBlLnJlYXNvbikpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hEZWZlcnJhbC5yZXNvbHZlKG5ldyBDb25uZWN0aW9uT3BlblJlc3BvbnNlKGUuY29kZSwgZS5yZWFzb24gKyBcIiBcIiArIHRoaXMucHJpdkxhc3RFcnJvclJlY2VpdmVkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uU3RhdGUgPSBDb25uZWN0aW9uU3RhdGUuRGlzY29ubmVjdGVkO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdldlYnNvY2tldENsaWVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBDb25uZWN0aW9uQ2xvc2VkRXZlbnQodGhpcy5wcml2Q29ubmVjdGlvbklkLCBlLmNvZGUsIGUucmVhc29uKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uQ2xvc2UoZS5jb2RlLCBlLnJlYXNvbikuY2F0Y2goKHJlYXNvbikgPT4ge1xuICAgICAgICAgICAgICAgIEV2ZW50cy5pbnN0YW5jZS5vbkV2ZW50KG5ldyBCYWNrZ3JvdW5kRXZlbnQocmVhc29uKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50Lm9ubWVzc2FnZSA9IChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXR3b3JrUmVjZWl2ZWRUaW1lID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25TdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkNvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgLy8gbGV0IGlkID0gKyt0aGlzLmlkQ291bnRlcjtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNlaXZpbmdNZXNzYWdlUXVldWUuZW5xdWV1ZUZyb21Qcm9taXNlKGRlZmVycmVkLnByb21pc2UpO1xuICAgICAgICAgICAgICAgIGlmIChlLmRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByYXdNZXNzYWdlID0gbmV3IFJhd1dlYnNvY2tldE1lc3NhZ2UoTWVzc2FnZVR5cGUuQmluYXJ5LCBlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZNZXNzYWdlRm9ybWF0dGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAudG9Db25uZWN0aW9uTWVzc2FnZShyYXdNZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGNvbm5lY3Rpb25NZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IENvbm5lY3Rpb25NZXNzYWdlUmVjZWl2ZWRFdmVudCh0aGlzLnByaXZDb25uZWN0aW9uSWQsIG5ldHdvcmtSZWNlaXZlZFRpbWUsIGNvbm5lY3Rpb25NZXNzYWdlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGNvbm5lY3Rpb25NZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBFdmVudHMgZm9yIHRoZXNlID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChgSW52YWxpZCBiaW5hcnkgbWVzc2FnZSBmb3JtYXQuIEVycm9yOiAke2Vycm9yfWApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhd01lc3NhZ2UgPSBuZXcgUmF3V2Vic29ja2V0TWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZNZXNzYWdlRm9ybWF0dGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAudG9Db25uZWN0aW9uTWVzc2FnZShyYXdNZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGNvbm5lY3Rpb25NZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IENvbm5lY3Rpb25NZXNzYWdlUmVjZWl2ZWRFdmVudCh0aGlzLnByaXZDb25uZWN0aW9uSWQsIG5ldHdvcmtSZWNlaXZlZFRpbWUsIGNvbm5lY3Rpb25NZXNzYWdlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGNvbm5lY3Rpb25NZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBFdmVudHMgZm9yIHRoZXNlID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChgSW52YWxpZCB0ZXh0IG1lc3NhZ2UgZm9ybWF0LiBFcnJvcjogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaERlZmVycmFsLnByb21pc2U7XG4gICAgfVxuICAgIHNlbmQobWVzc2FnZSkge1xuICAgICAgICBpZiAodGhpcy5wcml2Q29ubmVjdGlvblN0YXRlICE9PSBDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYENhbm5vdCBzZW5kIG9uIGNvbm5lY3Rpb24gdGhhdCBpcyBpbiAke0Nvbm5lY3Rpb25TdGF0ZVt0aGlzLnByaXZDb25uZWN0aW9uU3RhdGVdfSBzdGF0ZWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VTZW5kU3RhdHVzRGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZVNlbmREZWZlcnJhbCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICB0aGlzLnByaXZTZW5kTWVzc2FnZVF1ZXVlLmVucXVldWVGcm9tUHJvbWlzZShtZXNzYWdlU2VuZERlZmVycmFsLnByb21pc2UpO1xuICAgICAgICB0aGlzLnByaXZNZXNzYWdlRm9ybWF0dGVyXG4gICAgICAgICAgICAuZnJvbUNvbm5lY3Rpb25NZXNzYWdlKG1lc3NhZ2UpXG4gICAgICAgICAgICAudGhlbigocmF3TWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgbWVzc2FnZVNlbmREZWZlcnJhbC5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBNZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIFJhd1dlYnNvY2tldE1lc3NhZ2U6IHJhd01lc3NhZ2UsXG4gICAgICAgICAgICAgICAgc2VuZFN0YXR1c0RlZmVycmFsOiBtZXNzYWdlU2VuZFN0YXR1c0RlZmVycmFsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgbWVzc2FnZVNlbmREZWZlcnJhbC5yZWplY3QoYEVycm9yIGZvcm1hdHRpbmcgdGhlIG1lc3NhZ2UuICR7ZXJyb3J9YCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbWVzc2FnZVNlbmRTdGF0dXNEZWZlcnJhbC5wcm9taXNlO1xuICAgIH1cbiAgICByZWFkKCkge1xuICAgICAgICBpZiAodGhpcy5wcml2Q29ubmVjdGlvblN0YXRlICE9PSBDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYENhbm5vdCByZWFkIG9uIGNvbm5lY3Rpb24gdGhhdCBpcyBpbiAke3RoaXMucHJpdkNvbm5lY3Rpb25TdGF0ZX0gc3RhdGVgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVjZWl2aW5nTWVzc2FnZVF1ZXVlLmRlcXVldWUoKTtcbiAgICB9XG4gICAgY2xvc2UocmVhc29uKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZXZWJzb2NrZXRDbGllbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uU3RhdGUgIT09IENvbm5lY3Rpb25TdGF0ZS5EaXNjb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZXZWJzb2NrZXRDbGllbnQuY2xvc2UoMTAwMCwgcmVhc29uID8gcmVhc29uIDogXCJOb3JtYWwgY2xvc3VyZSBieSBjbGllbnRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkRpc2Nvbm5lY3REZWZlcnJhbC5wcm9taXNlO1xuICAgIH1cbiAgICBnZXQgZXZlbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbkV2ZW50cztcbiAgICB9XG4gICAgc2VuZFJhd01lc3NhZ2Uoc2VuZEl0ZW0pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIGluZGljYXRlcyB3ZSBhcmUgZHJhaW5pbmcgdGhlIHF1ZXVlIGFuZCBpdCBjYW1lIHdpdGggbm8gbWVzc2FnZTtcbiAgICAgICAgICAgIGlmICghc2VuZEl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IENvbm5lY3Rpb25NZXNzYWdlU2VudEV2ZW50KHRoaXMucHJpdkNvbm5lY3Rpb25JZCwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCBzZW5kSXRlbS5NZXNzYWdlKSk7XG4gICAgICAgICAgICAvLyBhZGQgYSBjaGVjayBmb3IgdGhlIHdzIHJlYWR5c3RhdGUgaW4gb3JkZXIgdG8gc3RvcCB0aGUgcmVkIGNvbnNvbGUgZXJyb3IgJ1dlYlNvY2tldCBpcyBhbHJlYWR5IGluIENMT1NJTkcgb3IgQ0xPU0VEIHN0YXRlJyBhcHBlYXJpbmdcbiAgICAgICAgICAgIGlmICh0aGlzLmlzV2Vic29ja2V0T3Blbikge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50LnNlbmQoc2VuZEl0ZW0uUmF3V2Vic29ja2V0TWVzc2FnZS5wYXlsb2FkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIndlYnNvY2tldCBzZW5kIGVycm9yOiBXZWJzb2NrZXQgbm90IHJlYWR5IFwiICsgdGhpcy5wcml2Q29ubmVjdGlvbklkICsgXCIgXCIgKyBzZW5kSXRlbS5NZXNzYWdlLmlkICsgXCIgXCIgKyBuZXcgRXJyb3IoKS5zdGFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgd2Vic29ja2V0IHNlbmQgZXJyb3I6ICR7ZX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbkNsb3NlKGNvZGUsIHJlYXNvbikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgY2xvc2VSZWFzb24gPSBgQ29ubmVjdGlvbiBjbG9zZWQuICR7Y29kZX06ICR7cmVhc29ufWA7XG4gICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uU3RhdGUgPSBDb25uZWN0aW9uU3RhdGUuRGlzY29ubmVjdGVkO1xuICAgICAgICAgICAgdGhpcy5wcml2RGlzY29ubmVjdERlZmVycmFsLnJlc29sdmUoKTtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdlJlY2VpdmluZ01lc3NhZ2VRdWV1ZS5kcmFpbkFuZERpc3Bvc2UoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IEV2ZW50cyBmb3IgdGhlc2UgP1xuICAgICAgICAgICAgICAgIC8vIExvZ2dlci5pbnN0YW5jZS5vbkV2ZW50KG5ldyBMb2dnaW5nRXZlbnQoTG9nVHlwZS5XYXJuaW5nLCBudWxsLCBgRmFpbGVkIHRvIHByb2Nlc3MgcmVjZWl2ZWQgbWVzc2FnZS4gUmVhc29uOiAke2Nsb3NlUmVhc29ufSwgTWVzc2FnZTogJHtKU09OLnN0cmluZ2lmeShwZW5kaW5nUmVjZWl2ZUl0ZW0pfWApKTtcbiAgICAgICAgICAgIH0sIGNsb3NlUmVhc29uKTtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdlNlbmRNZXNzYWdlUXVldWUuZHJhaW5BbmREaXNwb3NlKChwZW5kaW5nU2VuZEl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBwZW5kaW5nU2VuZEl0ZW0uc2VuZFN0YXR1c0RlZmVycmFsLnJlamVjdChjbG9zZVJlYXNvbik7XG4gICAgICAgICAgICB9LCBjbG9zZVJlYXNvbik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwcm9jZXNzU2VuZFF1ZXVlKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtVG9TZW5kID0gdGhpcy5wcml2U2VuZE1lc3NhZ2VRdWV1ZS5kZXF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VuZEl0ZW0gPSB5aWVsZCBpdGVtVG9TZW5kO1xuICAgICAgICAgICAgICAgIC8vIGluZGljYXRlcyB3ZSBhcmUgZHJhaW5pbmcgdGhlIHF1ZXVlIGFuZCBpdCBjYW1lIHdpdGggbm8gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICBpZiAoIXNlbmRJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5zZW5kUmF3TWVzc2FnZShzZW5kSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIHNlbmRJdGVtLnNlbmRTdGF0dXNEZWZlcnJhbC5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChzZW5kRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZEl0ZW0uc2VuZFN0YXR1c0RlZmVycmFsLnJlamVjdChzZW5kRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9uRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkV2ZW50cy5vbkV2ZW50KGV2ZW50KTtcbiAgICAgICAgRXZlbnRzLmluc3RhbmNlLm9uRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgZ2V0QWdlbnQoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvdW5ib3VuZC1tZXRob2RcbiAgICAgICAgY29uc3QgYWdlbnQgPSBuZXcgQWdlbnQuQWdlbnQodGhpcy5jcmVhdGVDb25uZWN0aW9uKTtcbiAgICAgICAgaWYgKHRoaXMucHJveHlJbmZvICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMucHJveHlJbmZvLkhvc3ROYW1lICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMucHJveHlJbmZvLlBvcnQgPiAwKSB7XG4gICAgICAgICAgICBhZ2VudC5wcm94eUluZm8gPSB0aGlzLnByb3h5SW5mbztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWdlbnQ7XG4gICAgfVxuICAgIHN0YXRpYyBHZXRQcm94eUFnZW50KHByb3h5SW5mbykge1xuICAgICAgICBjb25zdCBodHRwUHJveHlPcHRpb25zID0ge1xuICAgICAgICAgICAgaG9zdDogcHJveHlJbmZvLkhvc3ROYW1lLFxuICAgICAgICAgICAgcG9ydDogcHJveHlJbmZvLlBvcnQsXG4gICAgICAgIH07XG4gICAgICAgIGlmICghIXByb3h5SW5mby5Vc2VyTmFtZSkge1xuICAgICAgICAgICAgaHR0cFByb3h5T3B0aW9ucy5oZWFkZXJzID0ge1xuICAgICAgICAgICAgICAgIFwiUHJveHktQXV0aGVudGljYXRpb25cIjogXCJCYXNpYyBcIiArIG5ldyBCdWZmZXIoYCR7cHJveHlJbmZvLlVzZXJOYW1lfTokeyhwcm94eUluZm8uUGFzc3dvcmQgPT09IHVuZGVmaW5lZCkgPyBcIlwiIDogcHJveHlJbmZvLlBhc3N3b3JkfWApLnRvU3RyaW5nKFwiYmFzZTY0XCIpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGh0dHBQcm94eU9wdGlvbnMuaGVhZGVycyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGh0dHBQcm94eU9wdGlvbnMuaGVhZGVycy5yZXF1ZXN0T0NTUCA9IFwidHJ1ZVwiO1xuICAgICAgICBjb25zdCBodHRwUHJveHlBZ2VudCA9IG5ldyBIdHRwc1Byb3h5QWdlbnQoaHR0cFByb3h5T3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBodHRwUHJveHlBZ2VudDtcbiAgICB9XG4gICAgY3JlYXRlQ29ubmVjdGlvbihyZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBzb2NrZXRQcm9taXNlO1xuICAgICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKSwge1xuICAgICAgICAgICAgcmVxdWVzdE9DU1A6IHRydWUsXG4gICAgICAgICAgICBzZXJ2ZXJuYW1lOiBvcHRpb25zLmhvc3RcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghIXRoaXMucHJveHlJbmZvKSB7XG4gICAgICAgICAgICBjb25zdCBodHRwUHJveHlBZ2VudCA9IFdlYnNvY2tldE1lc3NhZ2VBZGFwdGVyLkdldFByb3h5QWdlbnQodGhpcy5wcm94eUluZm8pO1xuICAgICAgICAgICAgY29uc3QgYmFzZUFnZW50ID0gaHR0cFByb3h5QWdlbnQ7XG4gICAgICAgICAgICBzb2NrZXRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGJhc2VBZ2VudC5jYWxsYmFjayhyZXF1ZXN0LCBvcHRpb25zLCAoZXJyb3IsIHNvY2tldCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISFlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoc29ja2V0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoISFvcHRpb25zLnNlY3VyZUVuZHBvaW50KSB7XG4gICAgICAgICAgICAgICAgc29ja2V0UHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSh0bHMuY29ubmVjdChvcHRpb25zKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzb2NrZXRQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKG5ldC5jb25uZWN0KG9wdGlvbnMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc29ja2V0UHJvbWlzZTtcbiAgICB9XG4gICAgZ2V0IGlzV2Vic29ja2V0T3BlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdldlYnNvY2tldENsaWVudCAmJiB0aGlzLnByaXZXZWJzb2NrZXRDbGllbnQucmVhZHlTdGF0ZSA9PT0gdGhpcy5wcml2V2Vic29ja2V0Q2xpZW50Lk9QRU47XG4gICAgfVxufVxuV2Vic29ja2V0TWVzc2FnZUFkYXB0ZXIuZm9yY2VOcG1XZWJTb2NrZXQgPSBmYWxzZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9V2Vic29ja2V0TWVzc2FnZUFkYXB0ZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogQGNsYXNzIEFkZGVkTG1JbnRlbnRcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgQWRkZWRMbUludGVudCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0gbW9kZWxJbXBsIC0gVGhlIG1vZGVsLlxuICAgICAqIEBwYXJhbSBpbnRlbnROYW1lIC0gVGhlIGludGVudCBuYW1lLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG1vZGVsSW1wbCwgaW50ZW50TmFtZSkge1xuICAgICAgICB0aGlzLm1vZGVsSW1wbCA9IG1vZGVsSW1wbDtcbiAgICAgICAgdGhpcy5pbnRlbnROYW1lID0gaW50ZW50TmFtZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFkZGVkTG1JbnRlbnQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgSlNPTiB1c2VkIGluIHRoZSBhZ2VudC5jb25maWcgbWVzc2FnZSBzZW50IHRvIHRoZSBzcGVlY2ggc2VydmljZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEFnZW50Q29uZmlnIHtcbiAgICB0b0pzb25TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLmlQcml2Q29uZmlnKTtcbiAgICB9XG4gICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pUHJpdkNvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0dGVyIGZvciB0aGUgYWdlbnQuY29uZmlnIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gdmFsdWUgYSBKU09OIHNlcmlhbGl6YWJsZSBvYmplY3QuXG4gICAgICovXG4gICAgc2V0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaVByaXZDb25maWcgPSB2YWx1ZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFnZW50Q29uZmlnLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBBcmd1bWVudE51bGxFcnJvciwgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IEhlYWRlck5hbWVzIH0gZnJvbSBcIi4vSGVhZGVyTmFtZXNcIjtcbmltcG9ydCB7IEF1dGhJbmZvIH0gZnJvbSBcIi4vSUF1dGhlbnRpY2F0aW9uXCI7XG4vKipcbiAqIEBjbGFzc1xuICovXG5leHBvcnQgY2xhc3MgQ29nbml0aXZlU3Vic2NyaXB0aW9uS2V5QXV0aGVudGljYXRpb24ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoZSBDb2duaXRpdmVTdWJzY3JpcHRpb25LZXlBdXRoZW50aWNhdGlvbiBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3Vic2NyaXB0aW9uS2V5IC0gVGhlIHN1YnNjcmlwdGlvbiBrZXlcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzdWJzY3JpcHRpb25LZXkpIHtcbiAgICAgICAgaWYgKCFzdWJzY3JpcHRpb25LZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcInN1YnNjcmlwdGlvbktleVwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZBdXRoSW5mbyA9IG5ldyBBdXRoSW5mbyhIZWFkZXJOYW1lcy5BdXRoS2V5LCBzdWJzY3JpcHRpb25LZXkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIHRoZSBzdWJzY3JpcHRpb24ga2V5LlxuICAgICAqIEBtZW1iZXJcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGF1dGhGZXRjaEV2ZW50SWQgLSBUaGUgaWQgdG8gZmV0Y2guXG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgIGZldGNoKGF1dGhGZXRjaEV2ZW50SWQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnByaXZBdXRoSW5mbyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIHN1YnNjcmlwdGlvbiBrZXkuXG4gICAgICogQG1lbWJlclxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXV0aEZldGNoRXZlbnRJZCAtIFRoZSBpZCB0byBmZXRjaC5cbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgZmV0Y2hPbkV4cGlyeShhdXRoRmV0Y2hFdmVudElkKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5wcml2QXV0aEluZm8pO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29nbml0aXZlU3Vic2NyaXB0aW9uS2V5QXV0aGVudGljYXRpb24uanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IEFyZ3VtZW50TnVsbEVycm9yIH0gZnJvbSBcIi4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBBdXRoSW5mbyB9IGZyb20gXCIuL0lBdXRoZW50aWNhdGlvblwiO1xuaW1wb3J0IHsgSGVhZGVyTmFtZXMgfSBmcm9tIFwiLi9IZWFkZXJOYW1lc1wiO1xuZXhwb3J0IGNsYXNzIENvZ25pdGl2ZVRva2VuQXV0aGVudGljYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGZldGNoQ2FsbGJhY2ssIGZldGNoT25FeHBpcnlDYWxsYmFjaykge1xuICAgICAgICBpZiAoIWZldGNoQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcImZldGNoQ2FsbGJhY2tcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmZXRjaE9uRXhwaXJ5Q2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcImZldGNoT25FeHBpcnlDYWxsYmFja1wiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZGZXRjaENhbGxiYWNrID0gZmV0Y2hDYWxsYmFjaztcbiAgICAgICAgdGhpcy5wcml2RmV0Y2hPbkV4cGlyeUNhbGxiYWNrID0gZmV0Y2hPbkV4cGlyeUNhbGxiYWNrO1xuICAgIH1cbiAgICBmZXRjaChhdXRoRmV0Y2hFdmVudElkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZGZXRjaENhbGxiYWNrKGF1dGhGZXRjaEV2ZW50SWQpLnRoZW4oKHRva2VuKSA9PiBuZXcgQXV0aEluZm8oSGVhZGVyTmFtZXMuQXV0aG9yaXphdGlvbiwgdG9rZW4gPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IENvZ25pdGl2ZVRva2VuQXV0aGVudGljYXRpb24ucHJpdlRva2VuUHJlZml4ICsgdG9rZW4pKTtcbiAgICB9XG4gICAgZmV0Y2hPbkV4cGlyeShhdXRoRmV0Y2hFdmVudElkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZGZXRjaE9uRXhwaXJ5Q2FsbGJhY2soYXV0aEZldGNoRXZlbnRJZCkudGhlbigodG9rZW4pID0+IG5ldyBBdXRoSW5mbyhIZWFkZXJOYW1lcy5BdXRob3JpemF0aW9uLCB0b2tlbiA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogQ29nbml0aXZlVG9rZW5BdXRoZW50aWNhdGlvbi5wcml2VG9rZW5QcmVmaXggKyB0b2tlbikpO1xuICAgIH1cbn1cbkNvZ25pdGl2ZVRva2VuQXV0aGVudGljYXRpb24ucHJpdlRva2VuUHJlZml4ID0gXCJiZWFyZXIgXCI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvZ25pdGl2ZVRva2VuQXV0aGVudGljYXRpb24uanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFNlcnZpY2VQcm9wZXJ0aWVzUHJvcGVydHlOYW1lLCB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IFByb3BlcnR5SWQgfSBmcm9tIFwiLi4vc2RrL0V4cG9ydHNcIjtcbmltcG9ydCB7IFF1ZXJ5UGFyYW1ldGVyTmFtZXMgfSBmcm9tIFwiLi9RdWVyeVBhcmFtZXRlck5hbWVzXCI7XG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbkZhY3RvcnlCYXNlIHtcbiAgICBzdGF0aWMgZ2V0SG9zdFN1ZmZpeChyZWdpb24pIHtcbiAgICAgICAgaWYgKCEhcmVnaW9uKSB7XG4gICAgICAgICAgICBpZiAocmVnaW9uLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChcImNoaW5hXCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiLmF6dXJlLmNuXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVnaW9uLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChcInVzZ292XCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiLmF6dXJlLnVzXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiLm1pY3Jvc29mdC5jb21cIjtcbiAgICB9XG4gICAgc2V0Q29tbW9uVXJsUGFyYW1zKGNvbmZpZywgcXVlcnlQYXJhbXMsIGVuZHBvaW50KSB7XG4gICAgICAgIGNvbnN0IHByb3BlcnR5SWRUb1BhcmFtZXRlck1hcCA9IG5ldyBNYXAoW1xuICAgICAgICAgICAgW1Byb3BlcnR5SWQuU3BlZWNoX1NlZ21lbnRhdGlvblNpbGVuY2VUaW1lb3V0TXMsIFF1ZXJ5UGFyYW1ldGVyTmFtZXMuU2VnbWVudGF0aW9uU2lsZW5jZVRpbWVvdXRNc10sXG4gICAgICAgICAgICBbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmFibGVBdWRpb0xvZ2dpbmcsIFF1ZXJ5UGFyYW1ldGVyTmFtZXMuRW5hYmxlQXVkaW9Mb2dnaW5nXSxcbiAgICAgICAgICAgIFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZFNpbGVuY2VUaW1lb3V0TXMsIFF1ZXJ5UGFyYW1ldGVyTmFtZXMuRW5kU2lsZW5jZVRpbWVvdXRNc10sXG4gICAgICAgICAgICBbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Jbml0aWFsU2lsZW5jZVRpbWVvdXRNcywgUXVlcnlQYXJhbWV0ZXJOYW1lcy5Jbml0aWFsU2lsZW5jZVRpbWVvdXRNc10sXG4gICAgICAgICAgICBbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUG9zdFByb2Nlc3NpbmdPcHRpb24sIFF1ZXJ5UGFyYW1ldGVyTmFtZXMuUG9zdHByb2Nlc3NpbmddLFxuICAgICAgICAgICAgW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1Byb2Zhbml0eU9wdGlvbiwgUXVlcnlQYXJhbWV0ZXJOYW1lcy5Qcm9mYW5pdHldLFxuICAgICAgICAgICAgW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RXb3JkTGV2ZWxUaW1lc3RhbXBzLCBRdWVyeVBhcmFtZXRlck5hbWVzLkVuYWJsZVdvcmRMZXZlbFRpbWVzdGFtcHNdLFxuICAgICAgICAgICAgW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1N0YWJsZVBhcnRpYWxSZXN1bHRUaHJlc2hvbGQsIFF1ZXJ5UGFyYW1ldGVyTmFtZXMuU3RhYmxlSW50ZXJtZWRpYXRlVGhyZXNob2xkXSxcbiAgICAgICAgXSk7XG4gICAgICAgIHByb3BlcnR5SWRUb1BhcmFtZXRlck1hcC5mb3JFYWNoKChwYXJhbWV0ZXJOYW1lLCBwcm9wZXJ0eUlkKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldFVybFBhcmFtZXRlcihwcm9wZXJ0eUlkLCBwYXJhbWV0ZXJOYW1lLCBjb25maWcsIHF1ZXJ5UGFyYW1zLCBlbmRwb2ludCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzZXJ2aWNlUHJvcGVydGllcyA9IEpTT04ucGFyc2UoY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoU2VydmljZVByb3BlcnRpZXNQcm9wZXJ0eU5hbWUsIFwie31cIikpO1xuICAgICAgICBPYmplY3Qua2V5cyhzZXJ2aWNlUHJvcGVydGllcykuZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW3ZhbHVlXSA9IHNlcnZpY2VQcm9wZXJ0aWVzW3ZhbHVlXTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNldFVybFBhcmFtZXRlcihwcm9wSWQsIHBhcmFtZXRlck5hbWUsIGNvbmZpZywgcXVlcnlQYXJhbXMsIGVuZHBvaW50KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkocHJvcElkLCB1bmRlZmluZWQpO1xuICAgICAgICAvLyBGSVhNRTogVGhlIC5zZWFyY2goKSBjaGVjayB3aWxsIGluY29ycmVjdGx5IG1hdGNoIHBhcmFtZXRlciBuYW1lIGFueXdoZXJlIGluIHRoZSBzdHJpbmdcbiAgICAgICAgLy8gICAgICAgIGluY2x1ZGluZyBlLmcuIHRoZSBwYXRoIHBvcnRpb24sIG9yIGV2ZW4gYXMgYSBzdWJzdHJpbmcgb2Ygb3RoZXIgcXVlcnkgcGFyYW1ldGVyc1xuICAgICAgICBpZiAodmFsdWUgJiYgKCFlbmRwb2ludCB8fCBlbmRwb2ludC5zZWFyY2gocGFyYW1ldGVyTmFtZSkgPT09IC0xKSkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbXNbcGFyYW1ldGVyTmFtZV0gPSB2YWx1ZS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db25uZWN0aW9uRmFjdG9yeUJhc2UuanMubWFwXG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IE91dHB1dEZvcm1hdCwgUHJvcGVydHlDb2xsZWN0aW9uLCBQcm9wZXJ0eUlkLCBSZXN1bHRSZWFzb24sIFNwZWVjaFJlY29nbml0aW9uUmVzdWx0IH0gZnJvbSBcIi4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBEZXRhaWxlZFNwZWVjaFBocmFzZSwgRW51bVRyYW5zbGF0aW9uLCBPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUsIFJlY29nbml0aW9uU3RhdHVzLCBTZXJ2aWNlUmVjb2duaXplckJhc2UsIFNpbXBsZVNwZWVjaFBocmFzZSwgU3BlZWNoSHlwb3RoZXNpcyB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbmV4cG9ydCBjbGFzcyBDb252ZXJzYXRpb25TZXJ2aWNlUmVjb2duaXplciBleHRlbmRzIFNlcnZpY2VSZWNvZ25pemVyQmFzZSB7XG4gICAgY29uc3RydWN0b3IoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb1NvdXJjZSwgcmVjb2duaXplckNvbmZpZywgcmVjb2duaXplcikge1xuICAgICAgICBzdXBlcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCByZWNvZ25pemVyKTtcbiAgICAgICAgdGhpcy5oYW5kbGVTcGVlY2hQaHJhc2VNZXNzYWdlID0gKHRleHRCb2R5KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7IHJldHVybiB0aGlzLmhhbmRsZVNwZWVjaFBocmFzZSh0ZXh0Qm9keSk7IH0pO1xuICAgICAgICB0aGlzLmhhbmRsZVNwZWVjaEh5cG90aGVzaXNNZXNzYWdlID0gKHRleHRCb2R5KSA9PiB0aGlzLmhhbmRsZVNwZWVjaEh5cG90aGVzaXModGV4dEJvZHkpO1xuICAgIH1cbiAgICBwcm9jZXNzVHlwZVNwZWNpZmljTWVzc2FnZXMoY29ubmVjdGlvbk1lc3NhZ2UpIHtcbiAgICAgICAgdm9pZCBjb25uZWN0aW9uTWVzc2FnZTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBoYW5kbGVSZWNvZ25pemVkQ2FsbGJhY2socmVzdWx0LCBvZmZzZXQsIHNlc3Npb25JZCkge1xuICAgICAgICB2b2lkIHJlc3VsdDtcbiAgICAgICAgdm9pZCBvZmZzZXQ7XG4gICAgICAgIHZvaWQgc2Vzc2lvbklkO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGhhbmRsZVJlY29nbml6aW5nQ2FsbGJhY2socmVzdWx0LCBkdXJhdGlvbiwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHZvaWQgcmVzdWx0O1xuICAgICAgICB2b2lkIGR1cmF0aW9uO1xuICAgICAgICB2b2lkIHNlc3Npb25JZDtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwcm9jZXNzU3BlZWNoTWVzc2FnZXMoY29ubmVjdGlvbk1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGxldCBwcm9jZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHN3aXRjaCAoY29ubmVjdGlvbk1lc3NhZ2UucGF0aC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcInNwZWVjaC5oeXBvdGhlc2lzXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcInNwZWVjaC5mcmFnbWVudFwiOlxuICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLmhhbmRsZVNwZWVjaEh5cG90aGVzaXNNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVNwZWVjaEh5cG90aGVzaXNNZXNzYWdlKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwic3BlZWNoLnBocmFzZVwiOlxuICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLmhhbmRsZVNwZWVjaFBocmFzZU1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuaGFuZGxlU3BlZWNoUGhyYXNlTWVzc2FnZShjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJvY2Vzc2VkO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2FuY2VsUmVjb2duaXRpb24oc2Vzc2lvbklkLCByZXF1ZXN0SWQsIGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3JDb2RlLCBlcnJvcikge1xuICAgICAgICAvLyBJbXBsZW1lbnRpbmcgdG8gYWxsb3cgaW5oZXJpdGFuY2VcbiAgICAgICAgdm9pZCBzZXNzaW9uSWQ7XG4gICAgICAgIHZvaWQgcmVxdWVzdElkO1xuICAgICAgICB2b2lkIGNhbmNlbGxhdGlvblJlYXNvbjtcbiAgICAgICAgdm9pZCBlcnJvckNvZGU7XG4gICAgICAgIHZvaWQgZXJyb3I7XG4gICAgfVxuICAgIGhhbmRsZVNwZWVjaFBocmFzZSh0ZXh0Qm9keSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3Qgc2ltcGxlID0gU2ltcGxlU3BlZWNoUGhyYXNlLmZyb21KU09OKHRleHRCb2R5KTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdFJlYXNvbiA9IEVudW1UcmFuc2xhdGlvbi5pbXBsVHJhbnNsYXRlUmVjb2duaXRpb25SZXN1bHQoc2ltcGxlLlJlY29nbml0aW9uU3RhdHVzKTtcbiAgICAgICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRQcm9wcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgIHJlc3VsdFByb3BzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHQsIHRleHRCb2R5KTtcbiAgICAgICAgICAgIGNvbnN0IHNpbXBsZU9mZnNldCA9IHNpbXBsZS5PZmZzZXQgKyB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0O1xuICAgICAgICAgICAgbGV0IG9mZnNldCA9IHNpbXBsZU9mZnNldDtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uUGhyYXNlUmVjb2duaXplZCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0ICsgc2ltcGxlLk9mZnNldCArIHNpbXBsZS5EdXJhdGlvbik7XG4gICAgICAgICAgICBpZiAoUmVzdWx0UmVhc29uLkNhbmNlbGVkID09PSByZXN1bHRSZWFzb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxSZWFzb24gPSBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZUNhbmNlbFJlc3VsdChzaW1wbGUuUmVjb2duaXRpb25TdGF0dXMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbmNlbGxhdGlvbkVycm9yQ29kZSA9IEVudW1UcmFuc2xhdGlvbi5pbXBsVHJhbnNsYXRlQ2FuY2VsRXJyb3JDb2RlKHNpbXBsZS5SZWNvZ25pdGlvblN0YXR1cyk7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5jYW5jZWxSZWNvZ25pdGlvbkxvY2FsKGNhbmNlbFJlYXNvbiwgY2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZUVycm9yRGV0YWlscyhjYW5jZWxsYXRpb25FcnJvckNvZGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmlzU3BlZWNoRW5kZWQgJiYgcmVzdWx0UmVhc29uID09PSBSZXN1bHRSZWFzb24uTm9NYXRjaCAmJiBzaW1wbGUuUmVjb2duaXRpb25TdGF0dXMgIT09IFJlY29nbml0aW9uU3RhdHVzLkluaXRpYWxTaWxlbmNlVGltZW91dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUpID09PSBPdXRwdXRGb3JtYXRbT3V0cHV0Rm9ybWF0LlNpbXBsZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIHJlc3VsdFJlYXNvbiwgc2ltcGxlLkRpc3BsYXlUZXh0LCBzaW1wbGUuRHVyYXRpb24sIHNpbXBsZU9mZnNldCwgc2ltcGxlLkxhbmd1YWdlLCBzaW1wbGUuTGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlLCBzaW1wbGUuU3BlYWtlcklkLCB1bmRlZmluZWQsIHRleHRCb2R5LCByZXN1bHRQcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWxlZCA9IERldGFpbGVkU3BlZWNoUGhyYXNlLmZyb21KU09OKHRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsT2Zmc2V0ID0gZGV0YWlsZWQuT2Zmc2V0ICsgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uY3VycmVudFR1cm5BdWRpb09mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNldENvcnJlY3RlZEpzb24gPSBkZXRhaWxlZC5nZXRKc29uV2l0aENvcnJlY3RlZE9mZnNldHModG90YWxPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uUmVzdWx0KHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgcmVzdWx0UmVhc29uLCBkZXRhaWxlZC5UZXh0LCBkZXRhaWxlZC5EdXJhdGlvbiwgdG90YWxPZmZzZXQsIGRldGFpbGVkLkxhbmd1YWdlLCBkZXRhaWxlZC5MYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2UsIGRldGFpbGVkLlNwZWFrZXJJZCwgdW5kZWZpbmVkLCBvZmZzZXRDb3JyZWN0ZWRKc29uLCByZXN1bHRQcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSByZXN1bHQub2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmVjb2duaXplZENhbGxiYWNrKHJlc3VsdCwgb2Zmc2V0LCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGhhbmRsZVNwZWVjaEh5cG90aGVzaXModGV4dEJvZHkpIHtcbiAgICAgICAgY29uc3QgaHlwb3RoZXNpcyA9IFNwZWVjaEh5cG90aGVzaXMuZnJvbUpTT04odGV4dEJvZHkpO1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBoeXBvdGhlc2lzLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQ7XG4gICAgICAgIGNvbnN0IHJlc3VsdFByb3BzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICByZXN1bHRQcm9wcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uUmVzdWx0LCB0ZXh0Qm9keSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIFJlc3VsdFJlYXNvbi5SZWNvZ25pemluZ1NwZWVjaCwgaHlwb3RoZXNpcy5UZXh0LCBoeXBvdGhlc2lzLkR1cmF0aW9uLCBvZmZzZXQsIGh5cG90aGVzaXMuTGFuZ3VhZ2UsIGh5cG90aGVzaXMuTGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlLCBoeXBvdGhlc2lzLlNwZWFrZXJJZCwgdW5kZWZpbmVkLCB0ZXh0Qm9keSwgcmVzdWx0UHJvcHMpO1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkh5cG90aGVzaXMob2Zmc2V0KTtcbiAgICAgICAgdGhpcy5oYW5kbGVSZWNvZ25pemluZ0NhbGxiYWNrKHJlc3VsdCwgaHlwb3RoZXNpcy5EdXJhdGlvbiwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvblNlcnZpY2VSZWNvZ25pemVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtY2xhc3Nlcy1wZXItZmlsZSAqL1xuaW1wb3J0IHsgUHJveHlJbmZvLCBXZWJzb2NrZXRDb25uZWN0aW9uLCB9IGZyb20gXCIuLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCI7XG5pbXBvcnQgeyBPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBEaWFsb2dTZXJ2aWNlQ29uZmlnLCBPdXRwdXRGb3JtYXQsIFByb3BlcnR5SWQgfSBmcm9tIFwiLi4vc2RrL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb25GYWN0b3J5QmFzZSB9IGZyb20gXCIuL0Nvbm5lY3Rpb25GYWN0b3J5QmFzZVwiO1xuaW1wb3J0IHsgV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlciB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbmltcG9ydCB7IEhlYWRlck5hbWVzIH0gZnJvbSBcIi4vSGVhZGVyTmFtZXNcIjtcbmltcG9ydCB7IFF1ZXJ5UGFyYW1ldGVyTmFtZXMgfSBmcm9tIFwiLi9RdWVyeVBhcmFtZXRlck5hbWVzXCI7XG5leHBvcnQgY2xhc3MgRGlhbG9nQ29ubmVjdGlvbkZhY3RvcnkgZXh0ZW5kcyBDb25uZWN0aW9uRmFjdG9yeUJhc2Uge1xuICAgIGNyZWF0ZShjb25maWcsIGF1dGhJbmZvLCBjb25uZWN0aW9uSWQpIHtcbiAgICAgICAgY29uc3QgYXBwbGljYXRpb25JZCA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0FwcGxpY2F0aW9uSWQsIFwiXCIpO1xuICAgICAgICBjb25zdCBkaWFsb2dUeXBlID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25fRGlhbG9nVHlwZSk7XG4gICAgICAgIGNvbnN0IHJlZ2lvbiA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVnaW9uKTtcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2UgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSwgXCJlbi1VU1wiKTtcbiAgICAgICAgY29uc3QgcmVxdWVzdFR1cm5TdGF0dXMgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9SZXF1ZXN0X0JvdF9TdGF0dXNfTWVzc2FnZXMsIFwidHJ1ZVwiKTtcbiAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7fTtcbiAgICAgICAgcXVlcnlQYXJhbXNbSGVhZGVyTmFtZXMuQ29ubmVjdGlvbklkXSA9IGNvbm5lY3Rpb25JZDtcbiAgICAgICAgcXVlcnlQYXJhbXNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5Gb3JtYXRdID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCBPdXRwdXRGb3JtYXRbT3V0cHV0Rm9ybWF0LlNpbXBsZV0pLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuTGFuZ3VhZ2VdID0gbGFuZ3VhZ2U7XG4gICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuUmVxdWVzdEJvdFN0YXR1c01lc3NhZ2VzXSA9IHJlcXVlc3RUdXJuU3RhdHVzO1xuICAgICAgICBpZiAoYXBwbGljYXRpb25JZCkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbXNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5Cb3RJZF0gPSBhcHBsaWNhdGlvbklkO1xuICAgICAgICAgICAgaWYgKGRpYWxvZ1R5cGUgPT09IERpYWxvZ1NlcnZpY2VDb25maWcuRGlhbG9nVHlwZXMuQ3VzdG9tQ29tbWFuZHMpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtc1tIZWFkZXJOYW1lcy5DdXN0b21Db21tYW5kc0FwcElkXSA9IGFwcGxpY2F0aW9uSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzb3VyY2VJbmZpeCA9IGRpYWxvZ1R5cGUgPT09IERpYWxvZ1NlcnZpY2VDb25maWcuRGlhbG9nVHlwZXMuQ3VzdG9tQ29tbWFuZHMgPyBcImNvbW1hbmRzL1wiXG4gICAgICAgICAgICA6IFwiXCI7XG4gICAgICAgIGNvbnN0IHZlcnNpb24gPSBkaWFsb2dUeXBlID09PSBEaWFsb2dTZXJ2aWNlQ29uZmlnLkRpYWxvZ1R5cGVzLkN1c3RvbUNvbW1hbmRzID8gXCJ2MVwiXG4gICAgICAgICAgICA6IGRpYWxvZ1R5cGUgPT09IERpYWxvZ1NlcnZpY2VDb25maWcuRGlhbG9nVHlwZXMuQm90RnJhbWV3b3JrID8gXCJ2M1wiXG4gICAgICAgICAgICAgICAgOiBcInYwXCI7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7fTtcbiAgICAgICAgaWYgKGF1dGhJbmZvLnRva2VuICE9IG51bGwgJiYgYXV0aEluZm8udG9rZW4gIT09IFwiXCIpIHtcbiAgICAgICAgICAgIGhlYWRlcnNbYXV0aEluZm8uaGVhZGVyTmFtZV0gPSBhdXRoSW5mby50b2tlbjtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgVVJMIHVzZWQgZm9yIGNvbm5lY3Rpb24gaXMgY2hvc2VuIGluIGEgcHJpb3JpdHkgb3JkZXIgb2Ygc3BlY2lmaWNhdGlvbjpcbiAgICAgICAgLy8gIDEuIElmIGEgY3VzdG9tIGVuZHBvaW50IGlzIHByb3ZpZGVkLCB0aGF0IFVSTCBpcyB1c2VkIHZlcmJhdGltLlxuICAgICAgICAvLyAgMi4gSWYgYSBjdXN0b20gaG9zdCBpcyBwcm92aWRlZCAoZS5nLiBcIndzczovL215LmN1c3RvbS5lbmRwb2ludC5jb206MTEyM1wiKSwgYSBVUkwgaXMgY29uc3RydWN0ZWQgZnJvbSBpdC5cbiAgICAgICAgLy8gIDMuIElmIG5vIGN1c3RvbSBjb25uZWN0aW9uIGRldGFpbHMgYXJlIHByb3ZpZGVkLCBhIFVSTCBpcyBjb25zdHJ1Y3RlZCBmcm9tIGRlZmF1bHQgdmFsdWVzLlxuICAgICAgICBsZXQgZW5kcG9pbnQgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50LCBcIlwiKTtcbiAgICAgICAgaWYgKCFlbmRwb2ludCkge1xuICAgICAgICAgICAgY29uc3QgaG9zdFN1ZmZpeCA9IENvbm5lY3Rpb25GYWN0b3J5QmFzZS5nZXRIb3N0U3VmZml4KHJlZ2lvbik7XG4gICAgICAgICAgICBjb25zdCBob3N0ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Ib3N0LCBgd3NzOi8vJHtyZWdpb259LiR7RGlhbG9nQ29ubmVjdGlvbkZhY3RvcnkuQmFzZVVybH0ke2hvc3RTdWZmaXh9YCk7XG4gICAgICAgICAgICBjb25zdCBzdGFuZGFyZGl6ZWRIb3N0ID0gaG9zdC5lbmRzV2l0aChcIi9cIikgPyBob3N0IDogaG9zdCArIFwiL1wiO1xuICAgICAgICAgICAgZW5kcG9pbnQgPSBgJHtzdGFuZGFyZGl6ZWRIb3N0fSR7cmVzb3VyY2VJbmZpeH0ke0RpYWxvZ0Nvbm5lY3Rpb25GYWN0b3J5LkFwaUtleX0vJHt2ZXJzaW9ufWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRDb21tb25VcmxQYXJhbXMoY29uZmlnLCBxdWVyeVBhcmFtcywgZW5kcG9pbnQpO1xuICAgICAgICBjb25zdCBlbmFibGVDb21wcmVzc2lvbiA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFwiU1BFRUNILUVuYWJsZVdlYnNvY2tldENvbXByZXNzaW9uXCIsIFwiZmFsc2VcIikgPT09IFwidHJ1ZVwiO1xuICAgICAgICByZXR1cm4gbmV3IFdlYnNvY2tldENvbm5lY3Rpb24oZW5kcG9pbnQsIHF1ZXJ5UGFyYW1zLCBoZWFkZXJzLCBuZXcgV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlcigpLCBQcm94eUluZm8uZnJvbVJlY29nbml6ZXJDb25maWcoY29uZmlnKSwgZW5hYmxlQ29tcHJlc3Npb24sIGNvbm5lY3Rpb25JZCk7XG4gICAgfVxufVxuRGlhbG9nQ29ubmVjdGlvbkZhY3RvcnkuQXBpS2V5ID0gXCJhcGlcIjtcbkRpYWxvZ0Nvbm5lY3Rpb25GYWN0b3J5LkJhc2VVcmwgPSBcImNvbnZhaS5zcGVlY2hcIjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGlhbG9nQ29ubmVjdG9yRmFjdG9yeS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBSZXBsYXlhYmxlQXVkaW9Ob2RlIH0gZnJvbSBcIi4uL2NvbW1vbi5icm93c2VyL0V4cG9ydHNcIjtcbmltcG9ydCB7IFNlbmRpbmdBZ2VudENvbnRleHRNZXNzYWdlRXZlbnQgfSBmcm9tIFwiLi4vY29tbW9uL0RpYWxvZ0V2ZW50c1wiO1xuaW1wb3J0IHsgQmFja2dyb3VuZEV2ZW50LCBjcmVhdGVHdWlkLCBjcmVhdGVOb0Rhc2hHdWlkLCBEZWZlcnJlZCwgRXZlbnRzLCBFdmVudFNvdXJjZSwgTWVzc2FnZVR5cGUsIFNlcnZpY2VFdmVudCwgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbCB9IGZyb20gXCIuLi9zZGsvQXVkaW8vQXVkaW9PdXRwdXRGb3JtYXRcIjtcbmltcG9ydCB7IEFjdGl2aXR5UmVjZWl2ZWRFdmVudEFyZ3MsIENhbmNlbGxhdGlvbkVycm9yQ29kZSwgQ2FuY2VsbGF0aW9uUmVhc29uLCBEaWFsb2dTZXJ2aWNlQ29uZmlnLCBQcm9wZXJ0eUNvbGxlY3Rpb24sIFByb3BlcnR5SWQsIFJlY29nbml0aW9uRXZlbnRBcmdzLCBSZXN1bHRSZWFzb24sIFNlc3Npb25FdmVudEFyZ3MsIFNwZWVjaFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MsIFNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzLCBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdCwgVHVyblN0YXR1c1JlY2VpdmVkRXZlbnRBcmdzLCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgRGlhbG9nU2VydmljZVR1cm5TdGF0ZU1hbmFnZXIgfSBmcm9tIFwiLi9EaWFsb2dTZXJ2aWNlVHVyblN0YXRlTWFuYWdlclwiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBFbnVtVHJhbnNsYXRpb24sIFJlY29nbml0aW9uU3RhdHVzLCBTZXJ2aWNlUmVjb2duaXplckJhc2UsIFNpbXBsZVNwZWVjaFBocmFzZSwgU3BlZWNoRGV0ZWN0ZWQsIFNwZWVjaEh5cG90aGVzaXMsIFNwZWVjaEtleXdvcmQsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQWN0aXZpdHlQYXlsb2FkUmVzcG9uc2UgfSBmcm9tIFwiLi9TZXJ2aWNlTWVzc2FnZXMvQWN0aXZpdHlSZXNwb25zZVBheWxvYWRcIjtcbmltcG9ydCB7IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlIH0gZnJvbSBcIi4vU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UuSW50ZXJuYWxcIjtcbmV4cG9ydCBjbGFzcyBEaWFsb2dTZXJ2aWNlQWRhcHRlciBleHRlbmRzIFNlcnZpY2VSZWNvZ25pemVyQmFzZSB7XG4gICAgY29uc3RydWN0b3IoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb1NvdXJjZSwgcmVjb2duaXplckNvbmZpZywgZGlhbG9nU2VydmljZUNvbm5lY3Rvcikge1xuICAgICAgICBzdXBlcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCBkaWFsb2dTZXJ2aWNlQ29ubmVjdG9yKTtcbiAgICAgICAgdGhpcy5wcml2RXZlbnRzID0gbmV3IEV2ZW50U291cmNlKCk7XG4gICAgICAgIHRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IgPSBkaWFsb2dTZXJ2aWNlQ29ubmVjdG9yO1xuICAgICAgICB0aGlzLnJlY2VpdmVNZXNzYWdlT3ZlcnJpZGUgPSAoKSA9PiB0aGlzLnJlY2VpdmVEaWFsb2dNZXNzYWdlT3ZlcnJpZGUoKTtcbiAgICAgICAgdGhpcy5wcml2VHVyblN0YXRlTWFuYWdlciA9IG5ldyBEaWFsb2dTZXJ2aWNlVHVyblN0YXRlTWFuYWdlcigpO1xuICAgICAgICB0aGlzLnJlY29nbml6ZU92ZXJyaWRlID1cbiAgICAgICAgICAgIChyZWNvTW9kZSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSA9PiB0aGlzLmxpc3Rlbk9uY2UocmVjb01vZGUsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgICAgIHRoaXMucG9zdENvbm5lY3RJbXBsT3ZlcnJpZGUgPSAoY29ubmVjdGlvbikgPT4gdGhpcy5kaWFsb2dDb25uZWN0SW1wbChjb25uZWN0aW9uKTtcbiAgICAgICAgdGhpcy5jb25maWdDb25uZWN0aW9uT3ZlcnJpZGUgPSAoY29ubmVjdGlvbikgPT4gdGhpcy5jb25maWdDb25uZWN0aW9uKGNvbm5lY3Rpb24pO1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RPdmVycmlkZSA9ICgpID0+IHRoaXMucHJpdkRpc2Nvbm5lY3QoKTtcbiAgICAgICAgdGhpcy5wcml2RGlhbG9nQXVkaW9Tb3VyY2UgPSBhdWRpb1NvdXJjZTtcbiAgICAgICAgdGhpcy5hZ2VudENvbmZpZ1NlbnQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2TGFzdFJlc3VsdCA9IG51bGw7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbkV2ZW50cy5hdHRhY2goKGNvbm5lY3Rpb25FdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb25FdmVudC5uYW1lID09PSBcIkNvbm5lY3Rpb25DbG9zZWRFdmVudFwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBpbnRlcmFjdGlvbkd1aWQgPSBjcmVhdGVHdWlkKCk7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgICAgICBjb25zdCBhZ2VudE1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgY29udGV4dDoge1xuICAgICAgICAgICAgICAgICAgICBpbnRlcmFjdGlvbklkOiBpbnRlcmFjdGlvbkd1aWRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbiAgICAgICAgICAgICAgICBtZXNzYWdlUGF5bG9hZDogSlNPTi5wYXJzZShtZXNzYWdlKSxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiAwLjVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBhZ2VudE1lc3NhZ2VKc29uID0gSlNPTi5zdHJpbmdpZnkoYWdlbnRNZXNzYWdlKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgeWllbGQgY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBcImFnZW50XCIsIHJlcXVlc3RJZCwgXCJhcHBsaWNhdGlvbi9qc29uXCIsIGFnZW50TWVzc2FnZUpzb24pKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHByaXZEaXNjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgeWllbGQgdGhpcy5jYW5jZWxSZWNvZ25pdGlvbih0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBDYW5jZWxsYXRpb25FcnJvckNvZGUuTm9FcnJvciwgXCJEaXNjb25uZWN0aW5nXCIpO1xuICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFnZW50Q29uZmlnU2VudCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcHJvY2Vzc1R5cGVTcGVjaWZpY01lc3NhZ2VzKGNvbm5lY3Rpb25NZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdFByb3BzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICBpZiAoY29ubmVjdGlvbk1lc3NhZ2UubWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLlRleHQpIHtcbiAgICAgICAgICAgIHJlc3VsdFByb3BzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHQsIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICBsZXQgcHJvY2Vzc2VkO1xuICAgICAgICBzd2l0Y2ggKGNvbm5lY3Rpb25NZXNzYWdlLnBhdGgudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgY2FzZSBcInNwZWVjaC5waHJhc2VcIjpcbiAgICAgICAgICAgICAgICBjb25zdCBzcGVlY2hQaHJhc2UgPSBTaW1wbGVTcGVlY2hQaHJhc2UuZnJvbUpTT04oY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uUGhyYXNlUmVjb2duaXplZCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0ICsgc3BlZWNoUGhyYXNlLk9mZnNldCArIHNwZWVjaFBocmFzZS5EdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKHNwZWVjaFBocmFzZS5SZWNvZ25pdGlvblN0YXR1cyAhPT0gUmVjb2duaXRpb25TdGF0dXMuVG9vTWFueVJlcXVlc3RzICYmIHNwZWVjaFBocmFzZS5SZWNvZ25pdGlvblN0YXR1cyAhPT0gUmVjb2duaXRpb25TdGF0dXMuRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJncyA9IHRoaXMuZmlyZUV2ZW50Rm9yUmVzdWx0KHNwZWVjaFBocmFzZSwgcmVzdWx0UHJvcHMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZMYXN0UmVzdWx0ID0gYXJncy5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IucmVjb2duaXplZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnJlY29nbml6ZWQodGhpcy5wcml2RGlhbG9nU2VydmljZUNvbm5lY3RvciwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzcGVlY2guaHlwb3RoZXNpc1wiOlxuICAgICAgICAgICAgICAgIGNvbnN0IGh5cG90aGVzaXMgPSBTcGVlY2hIeXBvdGhlc2lzLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBoeXBvdGhlc2lzLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQ7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uUmVzdWx0KHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgUmVzdWx0UmVhc29uLlJlY29nbml6aW5nU3BlZWNoLCBoeXBvdGhlc2lzLlRleHQsIGh5cG90aGVzaXMuRHVyYXRpb24sIG9mZnNldCwgaHlwb3RoZXNpcy5MYW5ndWFnZSwgaHlwb3RoZXNpcy5MYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2UsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSwgcmVzdWx0UHJvcHMpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uSHlwb3RoZXNpcyhvZmZzZXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV2ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzKHJlc3VsdCwgaHlwb3RoZXNpcy5EdXJhdGlvbiwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnJlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnJlY29nbml6aW5nKHRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IsIGV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzcGVlY2gua2V5d29yZFwiOlxuICAgICAgICAgICAgICAgIGNvbnN0IGtleXdvcmQgPSBTcGVlY2hLZXl3b3JkLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQodGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBrZXl3b3JkLlN0YXR1cyA9PT0gXCJBY2NlcHRlZFwiID8gUmVzdWx0UmVhc29uLlJlY29nbml6ZWRLZXl3b3JkIDogUmVzdWx0UmVhc29uLk5vTWF0Y2gsIGtleXdvcmQuVGV4dCwga2V5d29yZC5EdXJhdGlvbiwga2V5d29yZC5PZmZzZXQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHksIHJlc3VsdFByb3BzKTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5d29yZC5TdGF0dXMgIT09IFwiQWNjZXB0ZWRcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZMYXN0UmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncyhyZXN1bHQsIHJlc3VsdC5kdXJhdGlvbiwgcmVzdWx0LnJlc3VsdElkKTtcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnJlY29nbml6ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IucmVjb2duaXplZCh0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLCBldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYXVkaW9cIjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvUmVxdWVzdElkID0gY29ubmVjdGlvbk1lc3NhZ2UucmVxdWVzdElkLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm4gPSB0aGlzLnByaXZUdXJuU3RhdGVNYW5hZ2VyLkdldFR1cm4oYXVkaW9SZXF1ZXN0SWQpO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW1wdHkgYmluYXJ5IG1lc3NhZ2Ugc2lnbmFscyBlbmQgb2Ygc3RyZWFtLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uTWVzc2FnZS5iaW5hcnlCb2R5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVybi5lbmRBdWRpb1N0cmVhbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVybi5hdWRpb1N0cmVhbS53cml0ZShjb25uZWN0aW9uTWVzc2FnZS5iaW5hcnlCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcm9jZXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInJlc3BvbnNlXCI6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJlc3BvbnNlTWVzc2FnZShjb25uZWN0aW9uTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlZmZlcmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIGRlZmZlcmFsLnJlc29sdmUocHJvY2Vzc2VkKTtcbiAgICAgICAgcmV0dXJuIGRlZmZlcmFsLnByb21pc2U7XG4gICAgfVxuICAgIC8vIENhbmNlbHMgcmVjb2duaXRpb24uXG4gICAgY2FuY2VsUmVjb2duaXRpb24oc2Vzc2lvbklkLCByZXF1ZXN0SWQsIGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3JDb2RlLCBlcnJvcikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1JlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25TdG9wUmVjb2duaXppbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IuY2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMuc2V0UHJvcGVydHkoQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBDYW5jZWxsYXRpb25FcnJvckNvZGVbZXJyb3JDb2RlXSk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FuY2VsRXZlbnQgPSBuZXcgU3BlZWNoUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncyhjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yLCBlcnJvckNvZGUsIHVuZGVmaW5lZCwgc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLmNhbmNlbGVkKHRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IsIGNhbmNlbEV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uUmVzdWx0KHVuZGVmaW5lZCwgLy8gUmVzdWx0SWRcbiAgICAgICAgICAgICAgICAgICAgUmVzdWx0UmVhc29uLkNhbmNlbGVkLCB1bmRlZmluZWQsIC8vIFRleHRcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBEdXJhdGlvblxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsIC8vIE9mZnNldFxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsIC8vIExhbmd1YWdlXG4gICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gTGFuZ3VhZ2UgRGV0ZWN0aW9uIENvbmZpZGVuY2VcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBTcGVha2VyIElkXG4gICAgICAgICAgICAgICAgICAgIGVycm9yLCB1bmRlZmluZWQsIC8vIEpzb25cbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllcyk7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF9iKSB7IH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsaXN0ZW5PbmNlKHJlY29Nb2RlLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcucmVjb2duaXRpb25Nb2RlID0gcmVjb01vZGU7XG4gICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2sgPSBzdWNjZXNzQ2FsbGJhY2s7XG4gICAgICAgICAgICB0aGlzLnByaXZFcnJvckNhbGxiYWNrID0gZXJyb3JDYWxsYmFjaztcbiAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnN0YXJ0TmV3UmVjb2duaXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmxpc3RlbkZvclNlcnZpY2VUZWxlbWV0cnkodGhpcy5wcml2RGlhbG9nQXVkaW9Tb3VyY2UuZXZlbnRzKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcucGFyYW1ldGVycy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaF9TZXNzaW9uSWQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAvLyBTdGFydCB0aGUgY29ubmVjdGlvbiB0byB0aGUgc2VydmljZS4gVGhlIHByb21pc2UgdGhpcyB3aWxsIGNyZWF0ZSBpcyBzdG9yZWQgYW5kIHdpbGwgYmUgdXNlZCBieSBjb25maWd1cmVDb25uZWN0aW9uKCkuXG4gICAgICAgICAgICBjb25zdCBjb25Qcm9taXNlID0gdGhpcy5jb25uZWN0SW1wbCgpO1xuICAgICAgICAgICAgY29uc3QgcHJlQXVkaW9Qcm9taXNlID0gdGhpcy5zZW5kUHJlQXVkaW9NZXNzYWdlcygpO1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHlpZWxkIHRoaXMucHJpdkRpYWxvZ0F1ZGlvU291cmNlLmF0dGFjaCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5hdWRpb05vZGVJZCk7XG4gICAgICAgICAgICBjb25zdCBmb3JtYXQgPSB5aWVsZCB0aGlzLnByaXZEaWFsb2dBdWRpb1NvdXJjZS5mb3JtYXQ7XG4gICAgICAgICAgICBjb25zdCBkZXZpY2VJbmZvID0geWllbGQgdGhpcy5wcml2RGlhbG9nQXVkaW9Tb3VyY2UuZGV2aWNlSW5mbztcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvTm9kZSA9IG5ldyBSZXBsYXlhYmxlQXVkaW9Ob2RlKG5vZGUsIGZvcm1hdC5hdmdCeXRlc1BlclNlYyk7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkF1ZGlvU291cmNlQXR0YWNoQ29tcGxldGVkKGF1ZGlvTm9kZSwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5TcGVlY2hTZXJ2aWNlQ29uZmlnLkNvbnRleHQuYXVkaW8gPSB7IHNvdXJjZTogZGV2aWNlSW5mbyB9O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB5aWVsZCBjb25Qcm9taXNlO1xuICAgICAgICAgICAgICAgIHlpZWxkIHByZUF1ZGlvUHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuY2FuY2VsUmVjb2duaXRpb24odGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIENhbmNlbGxhdGlvblJlYXNvbi5FcnJvciwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLkNvbm5lY3Rpb25GYWlsdXJlLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvblN0YXJ0RXZlbnRBcmdzID0gbmV3IFNlc3Npb25FdmVudEFyZ3ModGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlJlY29nbml6ZXIuc2Vzc2lvblN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyLnNlc3Npb25TdGFydGVkKHRoaXMucHJpdlJlY29nbml6ZXIsIHNlc3Npb25TdGFydEV2ZW50QXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhdWRpb1NlbmRQcm9taXNlID0gdGhpcy5zZW5kQXVkaW8oYXVkaW9Ob2RlKTtcbiAgICAgICAgICAgIC8vIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICBhdWRpb1NlbmRQcm9taXNlLnRoZW4oKCkgPT4geyB9LCAoZXJyb3IpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmNhbmNlbFJlY29nbml0aW9uKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBDYW5jZWxsYXRpb25SZWFzb24uRXJyb3IsIENhbmNlbGxhdGlvbkVycm9yQ29kZS5SdW50aW1lRXJyb3IsIGVycm9yKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIEVzdGFibGlzaGVzIGEgd2Vic29ja2V0IGNvbm5lY3Rpb24gdG8gdGhlIGVuZCBwb2ludC5cbiAgICBkaWFsb2dDb25uZWN0SW1wbChjb25uZWN0aW9uKSB7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Mb29wID0gdGhpcy5zdGFydE1lc3NhZ2VMb29wKCk7XG4gICAgICAgIHJldHVybiBjb25uZWN0aW9uO1xuICAgIH1cbiAgICByZWNlaXZlRGlhbG9nTWVzc2FnZU92ZXJyaWRlKCkge1xuICAgICAgICAvLyB3ZSB3b24ndCByZWx5IG9uIHRoZSBjYXNjYWRpbmcgcHJvbWlzZXMgb2YgdGhlIGNvbm5lY3Rpb24gc2luY2Ugd2Ugd2FudCB0byBjb250aW51YWxseSBiZSBhdmFpbGFibGUgdG8gcmVjZWl2ZSBtZXNzYWdlc1xuICAgICAgICBjb25zdCBjb21tdW5pY2F0aW9uQ3VzdG9kaWFuID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIGNvbnN0IGxvb3AgPSAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzRGlzcG9zZWQgPSB0aGlzLmlzRGlzcG9zZWQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXJtaW5hdGVNZXNzYWdlTG9vcCA9ICghdGhpcy5pc0Rpc3Bvc2VkKCkgJiYgdGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzRGlzcG9zZWQgfHwgdGVybWluYXRlTWVzc2FnZUxvb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UncmUgZG9uZS5cbiAgICAgICAgICAgICAgICAgICAgY29tbXVuaWNhdGlvbkN1c3RvZGlhbi5yZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHlpZWxkIHRoaXMuZmV0Y2hDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHlpZWxkIGNvbm5lY3Rpb24ucmVhZCgpO1xuICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9vcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uTWVzc2FnZSA9IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlLmZyb21Db25uZWN0aW9uTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbm5lY3Rpb25NZXNzYWdlLnBhdGgudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidHVybi5zdGFydFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXF1ZXN0SWQgPSBjb25uZWN0aW9uTWVzc2FnZS5yZXF1ZXN0SWQudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdWRpb1Nlc3Npb25SZXFJZCA9IHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHR1cm4gc3RhcnRlZCBieSB0aGUgc2VydmljZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0dXJuUmVxdWVzdElkICE9PSBhdWRpb1Nlc3Npb25SZXFJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZUdXJuU3RhdGVNYW5hZ2VyLlN0YXJ0VHVybih0dXJuUmVxdWVzdElkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uU2VydmljZVR1cm5TdGFydFJlc3BvbnNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzcGVlY2guc3RhcnRkZXRlY3RlZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlZWNoU3RhcnREZXRlY3RlZCA9IFNwZWVjaERldGVjdGVkLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZWVjaFN0YXJ0RXZlbnRBcmdzID0gbmV3IFJlY29nbml0aW9uRXZlbnRBcmdzKHNwZWVjaFN0YXJ0RGV0ZWN0ZWQuT2Zmc2V0LCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2UmVjb2duaXplci5zcGVlY2hTdGFydERldGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjb2duaXplci5zcGVlY2hTdGFydERldGVjdGVkKHRoaXMucHJpdlJlY29nbml6ZXIsIHNwZWVjaFN0YXJ0RXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3BlZWNoLmVuZGRldGVjdGVkXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQganNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbiA9IGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3Qgd2FzIGVtcHR5LCB0aGUgSlNPTiByZXR1cm5lZCBpcyBlbXB0eS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uID0gXCJ7IE9mZnNldDogMCB9XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGVlY2hTdG9wRGV0ZWN0ZWQgPSBTcGVlY2hEZXRlY3RlZC5mcm9tSlNPTihqc29uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uU2VydmljZVJlY29nbml6ZWQoc3BlZWNoU3RvcERldGVjdGVkLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlZWNoU3RvcEV2ZW50QXJncyA9IG5ldyBSZWNvZ25pdGlvbkV2ZW50QXJncyhzcGVlY2hTdG9wRGV0ZWN0ZWQuT2Zmc2V0ICsgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uY3VycmVudFR1cm5BdWRpb09mZnNldCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlJlY29nbml6ZXIuc3BlZWNoRW5kRGV0ZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyLnNwZWVjaEVuZERldGVjdGVkKHRoaXMucHJpdlJlY29nbml6ZXIsIHNwZWVjaFN0b3BFdmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0dXJuLmVuZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5FbmRSZXF1ZXN0SWQgPSBjb25uZWN0aW9uTWVzc2FnZS5yZXF1ZXN0SWQudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdWRpb1Nlc3Npb25SZXFJZCA9IHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHR1cm4gc3RhcnRlZCBieSB0aGUgc2VydmljZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0dXJuRW5kUmVxdWVzdElkICE9PSBhdWRpb1Nlc3Npb25SZXFJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZUdXJuU3RhdGVNYW5hZ2VyLkNvbXBsZXRlVHVybih0dXJuRW5kUmVxdWVzdElkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF1ZGlvIHNlc3Npb24gdHVyblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXNzaW9uU3RvcEV2ZW50QXJncyA9IG5ldyBTZXNzaW9uRXZlbnRBcmdzKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uU2VydmljZVR1cm5FbmRSZXNwb25zZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5pc0NvbnRpbnVvdXNSZWNvZ25pdGlvbiB8fCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1NwZWVjaEVuZGVkIHx8ICF0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1JlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZSZWNvZ25pemVyLnNlc3Npb25TdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjb2duaXplci5zZXNzaW9uU3RvcHBlZCh0aGlzLnByaXZSZWNvZ25pemVyLCBzZXNzaW9uU3RvcEV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVwb3J0IHJlc3VsdCB0byBwcm9taXNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2sgJiYgdGhpcy5wcml2TGFzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2sodGhpcy5wcml2TGFzdFJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TGFzdFJlc3VsdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RXJyb3JDYWxsYmFjayhlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IGludm9rZSB0aGUgY2FsbCBiYWNrIG9uY2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgaWYgaXQncyBzdWNjZXNzZnVsIGRvbid0IGludm9rZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVycm9yIGFmdGVyIHRoYXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZFcnJvckNhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZCA9IHlpZWxkIHRoaXMucHJvY2Vzc1R5cGVTcGVjaWZpY01lc3NhZ2VzKGNvbm5lY3Rpb25NZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXByb2Nlc3NlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnNlcnZpY2VFdmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VydmljZUV2ZW50cy5vbkV2ZW50KG5ldyBTZXJ2aWNlRXZlbnQoY29ubmVjdGlvbk1lc3NhZ2UucGF0aC50b0xvd2VyQ2FzZSgpLCBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXQgPSBsb29wKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMudGVybWluYXRlTWVzc2FnZUxvb3AgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbW11bmljYXRpb25DdXN0b2RpYW4ucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgbG9vcCgpLmNhdGNoKChyZWFzb24pID0+IHtcbiAgICAgICAgICAgIEV2ZW50cy5pbnN0YW5jZS5vbkV2ZW50KG5ldyBCYWNrZ3JvdW5kRXZlbnQocmVhc29uKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY29tbXVuaWNhdGlvbkN1c3RvZGlhbi5wcm9taXNlO1xuICAgIH1cbiAgICBzdGFydE1lc3NhZ2VMb29wKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCA9IGZhbHNlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnJlY2VpdmVEaWFsb2dNZXNzYWdlT3ZlcnJpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuY2FuY2VsUmVjb2duaXRpb24odGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIENhbmNlbGxhdGlvblJlYXNvbi5FcnJvciwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLlJ1bnRpbWVFcnJvciwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gVGFrZXMgYW4gZXN0YWJsaXNoZWQgd2Vic29ja2V0IGNvbm5lY3Rpb24gdG8gdGhlIGVuZHBvaW50IGFuZCBzZW5kcyBzcGVlY2ggY29uZmlndXJhdGlvbiBpbmZvcm1hdGlvbi5cbiAgICBjb25maWdDb25uZWN0aW9uKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRlcm1pbmF0ZU1lc3NhZ2VMb29wKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIkNvbm5lY3Rpb24gdG8gc2VydmljZSB0ZXJtaW5hdGVkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHlpZWxkIHRoaXMuc2VuZFNwZWVjaFNlcnZpY2VDb25maWcoY29ubmVjdGlvbiwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24sIHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcuU3BlZWNoU2VydmljZUNvbmZpZy5zZXJpYWxpemUoKSk7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnNlbmRBZ2VudENvbmZpZyhjb25uZWN0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2VuZFByZUF1ZGlvTWVzc2FnZXMoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uID0geWllbGQgdGhpcy5mZXRjaENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMuYWRkS2V5d29yZENvbnRleHREYXRhKCk7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnNlbmRTcGVlY2hDb250ZXh0KGNvbm5lY3Rpb24sIHRydWUpO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5zZW5kQWdlbnRDb250ZXh0KGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5zZW5kV2F2ZUhlYWRlcihjb25uZWN0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNlbmRBZ2VudENvbmZpZyhjb25uZWN0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLmFnZW50Q29uZmlnICYmICF0aGlzLmFnZW50Q29uZmlnU2VudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdlJlY29nbml6ZXJDb25maWdcbiAgICAgICAgICAgICAgICAucGFyYW1ldGVyc1xuICAgICAgICAgICAgICAgIC5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9EaWFsb2dUeXBlKSA9PT0gRGlhbG9nU2VydmljZUNvbmZpZy5EaWFsb2dUeXBlcy5DdXN0b21Db21tYW5kcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuYWdlbnRDb25maWcuZ2V0KCk7XG4gICAgICAgICAgICAgICAgY29uZmlnLmJvdEluZm8uY29tbWFuZHNDdWx0dXJlID0gdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlLCBcImVuLXVzXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWdlbnRDb25maWcuc2V0KGNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IFNlbmRpbmdBZ2VudENvbnRleHRNZXNzYWdlRXZlbnQodGhpcy5hZ2VudENvbmZpZykpO1xuICAgICAgICAgICAgY29uc3QgYWdlbnRDb25maWdKc29uID0gdGhpcy5hZ2VudENvbmZpZy50b0pzb25TdHJpbmcoKTtcbiAgICAgICAgICAgIC8vIGd1YXJkIGFnYWluc3Qgc2VuZGluZyB0aGlzIG11bHRpcGxlIHRpbWVzIG9uIG9uZSBjb25uZWN0aW9uXG4gICAgICAgICAgICB0aGlzLmFnZW50Q29uZmlnU2VudCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBcImFnZW50LmNvbmZpZ1wiLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIFwiYXBwbGljYXRpb24vanNvblwiLCBhZ2VudENvbmZpZ0pzb24pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNlbmRBZ2VudENvbnRleHQoY29ubmVjdGlvbikge1xuICAgICAgICBjb25zdCBndWlkID0gY3JlYXRlR3VpZCgpO1xuICAgICAgICBjb25zdCBzcGVlY2hBY3Rpdml0eVRlbXBsYXRlID0gdGhpcy5wcml2RGlhbG9nU2VydmljZUNvbm5lY3Rvci5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX1NwZWVjaF9BY3Rpdml0eV9UZW1wbGF0ZSk7XG4gICAgICAgIGNvbnN0IGFnZW50Q29udGV4dCA9IHtcbiAgICAgICAgICAgIGNoYW5uZWxEYXRhOiBcIlwiLFxuICAgICAgICAgICAgY29udGV4dDoge1xuICAgICAgICAgICAgICAgIGludGVyYWN0aW9uSWQ6IGd1aWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXNzYWdlUGF5bG9hZDogdHlwZW9mIHNwZWVjaEFjdGl2aXR5VGVtcGxhdGUgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHNwZWVjaEFjdGl2aXR5VGVtcGxhdGUsXG4gICAgICAgICAgICB2ZXJzaW9uOiAwLjVcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYWdlbnRDb250ZXh0SnNvbiA9IEpTT04uc3RyaW5naWZ5KGFnZW50Q29udGV4dCk7XG4gICAgICAgIHJldHVybiBjb25uZWN0aW9uLnNlbmQobmV3IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlKE1lc3NhZ2VUeXBlLlRleHQsIFwic3BlZWNoLmFnZW50LmNvbnRleHRcIiwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBcImFwcGxpY2F0aW9uL2pzb25cIiwgYWdlbnRDb250ZXh0SnNvbikpO1xuICAgIH1cbiAgICBmaXJlRXZlbnRGb3JSZXN1bHQoc2VydmljZVJlc3VsdCwgcHJvcGVydGllcykge1xuICAgICAgICBjb25zdCByZXN1bHRSZWFzb24gPSBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZVJlY29nbml0aW9uUmVzdWx0KHNlcnZpY2VSZXN1bHQuUmVjb2duaXRpb25TdGF0dXMpO1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBzZXJ2aWNlUmVzdWx0Lk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQ7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIHJlc3VsdFJlYXNvbiwgc2VydmljZVJlc3VsdC5EaXNwbGF5VGV4dCwgc2VydmljZVJlc3VsdC5EdXJhdGlvbiwgb2Zmc2V0LCBzZXJ2aWNlUmVzdWx0Lkxhbmd1YWdlLCBzZXJ2aWNlUmVzdWx0Lkxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIEpTT04uc3RyaW5naWZ5KHNlcnZpY2VSZXN1bHQpLCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgY29uc3QgZXYgPSBuZXcgU3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3MocmVzdWx0LCBvZmZzZXQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgIHJldHVybiBldjtcbiAgICB9XG4gICAgaGFuZGxlUmVzcG9uc2VNZXNzYWdlKHJlc3BvbnNlTWVzc2FnZSkge1xuICAgICAgICAvLyBcInJlc3BvbnNlXCIgbWVzc2FnZXMgY2FuIGNvbnRhaW4gZWl0aGVyIFwibWVzc2FnZVwiIChhY3Rpdml0eSkgb3IgXCJNZXNzYWdlU3RhdHVzXCIgZGF0YS4gRmlyZSB0aGUgYXBwcm9wcmlhdGVcbiAgICAgICAgLy8gZXZlbnQgYWNjb3JkaW5nIHRvIHRoZSBtZXNzYWdlIHR5cGUgdGhhdCdzIHNwZWNpZmllZC5cbiAgICAgICAgY29uc3QgcmVzcG9uc2VQYXlsb2FkID0gSlNPTi5wYXJzZShyZXNwb25zZU1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlUGF5bG9hZC5tZXNzYWdlVHlwZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICBjYXNlIFwibWVzc2FnZVwiOlxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlUmVxdWVzdElkID0gcmVzcG9uc2VNZXNzYWdlLnJlcXVlc3RJZC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2aXR5UGF5bG9hZCA9IEFjdGl2aXR5UGF5bG9hZFJlc3BvbnNlLmZyb21KU09OKHJlc3BvbnNlTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdHVybiA9IHRoaXMucHJpdlR1cm5TdGF0ZU1hbmFnZXIuR2V0VHVybihyZXNwb25zZVJlcXVlc3RJZCk7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBjb252ZXJzYXRpb24gSWRcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZpdHlQYXlsb2FkLmNvbnZlcnNhdGlvbklkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUFnZW50Q29uZmlnID0gdGhpcy5hZ2VudENvbmZpZy5nZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQWdlbnRDb25maWcuYm90SW5mby5jb252ZXJzYXRpb25JZCA9IGFjdGl2aXR5UGF5bG9hZC5jb252ZXJzYXRpb25JZDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZ2VudENvbmZpZy5zZXQodXBkYXRlQWdlbnRDb25maWcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBwdWxsQXVkaW9PdXRwdXRTdHJlYW0gPSB0dXJuLnByb2Nlc3NBY3Rpdml0eVBheWxvYWQoYWN0aXZpdHlQYXlsb2FkLCBBdWRpb091dHB1dEZvcm1hdEltcGwuZnJvbVNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZyh0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aE91dHB1dEZvcm1hdCwgdW5kZWZpbmVkKSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2aXR5ID0gbmV3IEFjdGl2aXR5UmVjZWl2ZWRFdmVudEFyZ3MoYWN0aXZpdHlQYXlsb2FkLm1lc3NhZ2VQYXlsb2FkLCBwdWxsQXVkaW9PdXRwdXRTdHJlYW0pO1xuICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IuYWN0aXZpdHlSZWNlaXZlZCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RGlhbG9nU2VydmljZUNvbm5lY3Rvci5hY3Rpdml0eVJlY2VpdmVkKHRoaXMucHJpdkRpYWxvZ1NlcnZpY2VDb25uZWN0b3IsIGFjdGl2aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm1lc3NhZ2VzdGF0dXNcIjpcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnR1cm5TdGF0dXNSZWNlaXZlZCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RGlhbG9nU2VydmljZUNvbm5lY3Rvci50dXJuU3RhdHVzUmVjZWl2ZWQodGhpcy5wcml2RGlhbG9nU2VydmljZUNvbm5lY3RvciwgbmV3IFR1cm5TdGF0dXNSZWNlaXZlZEV2ZW50QXJncyhyZXNwb25zZU1lc3NhZ2UudGV4dEJvZHkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBFdmVudHMuaW5zdGFuY2Uub25FdmVudChuZXcgQmFja2dyb3VuZEV2ZW50KGBVbmV4cGVjdGVkIHJlc3BvbnNlIG9mIHR5cGUgJHtyZXNwb25zZVBheWxvYWQubWVzc2FnZVR5cGV9LiBJZ25vcmluZy5gKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25FdmVudChldmVudCkge1xuICAgICAgICB0aGlzLnByaXZFdmVudHMub25FdmVudChldmVudCk7XG4gICAgICAgIEV2ZW50cy5pbnN0YW5jZS5vbkV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgYWRkS2V5d29yZENvbnRleHREYXRhKCkge1xuICAgICAgICBjb25zdCBrZXl3b3JkUHJvcGVydHlWYWx1ZSA9IHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShcIlNQRUVDSC1LZXl3b3Jkc1RvRGV0ZWN0XCIpO1xuICAgICAgICBpZiAoa2V5d29yZFByb3BlcnR5VmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGtleXdvcmRPZmZzZXRQcm9wZXJ0eVZhbHVlID0gdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5wYXJhbWV0ZXJzXG4gICAgICAgICAgICAuZ2V0UHJvcGVydHkoXCJTUEVFQ0gtS2V5d29yZHNUb0RldGVjdC1PZmZzZXRzXCIpO1xuICAgICAgICBjb25zdCBrZXl3b3JkRHVyYXRpb25Qcm9wZXJ0eVZhbHVlID0gdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5wYXJhbWV0ZXJzXG4gICAgICAgICAgICAuZ2V0UHJvcGVydHkoXCJTUEVFQ0gtS2V5d29yZHNUb0RldGVjdC1EdXJhdGlvbnNcIik7XG4gICAgICAgIGNvbnN0IGtleXdvcmRzID0ga2V5d29yZFByb3BlcnR5VmFsdWUuc3BsaXQoXCI7XCIpO1xuICAgICAgICBjb25zdCBrZXl3b3JkT2Zmc2V0cyA9IGtleXdvcmRPZmZzZXRQcm9wZXJ0eVZhbHVlID09PSB1bmRlZmluZWQgPyBbXSA6IGtleXdvcmRPZmZzZXRQcm9wZXJ0eVZhbHVlLnNwbGl0KFwiO1wiKTtcbiAgICAgICAgY29uc3Qga2V5d29yZER1cmF0aW9ucyA9IGtleXdvcmREdXJhdGlvblByb3BlcnR5VmFsdWUgPT09IHVuZGVmaW5lZCA/IFtdIDoga2V5d29yZER1cmF0aW9uUHJvcGVydHlWYWx1ZS5zcGxpdChcIjtcIik7XG4gICAgICAgIGNvbnN0IGtleXdvcmREZWZpbml0aW9uQXJyYXkgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXl3b3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZGVmaW5pdGlvbiA9IHt9O1xuICAgICAgICAgICAgZGVmaW5pdGlvbi50ZXh0ID0ga2V5d29yZHNbaV07XG4gICAgICAgICAgICBpZiAoaSA8IGtleXdvcmRPZmZzZXRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGRlZmluaXRpb24ub2Zmc2V0ID0gTnVtYmVyKGtleXdvcmRPZmZzZXRzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpIDwga2V5d29yZER1cmF0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uLmR1cmF0aW9uID0gTnVtYmVyKGtleXdvcmREdXJhdGlvbnNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAga2V5d29yZERlZmluaXRpb25BcnJheS5wdXNoKGRlZmluaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3BlZWNoQ29udGV4dC5zZXRTZWN0aW9uKFwiaW52b2NhdGlvblNvdXJjZVwiLCBcIlZvaWNlQWN0aXZhdGlvbldpdGhLZXl3b3JkXCIpO1xuICAgICAgICB0aGlzLnNwZWVjaENvbnRleHQuc2V0U2VjdGlvbihcImtleXdvcmREZXRlY3Rpb25cIiwgW3tcbiAgICAgICAgICAgICAgICBjbGllbnREZXRlY3RlZEtleXdvcmRzOiBrZXl3b3JkRGVmaW5pdGlvbkFycmF5LFxuICAgICAgICAgICAgICAgIG9uUmVqZWN0OiB7IGFjdGlvbjogXCJFbmRPZlR1cm5cIiB9LFxuICAgICAgICAgICAgICAgIHR5cGU6IFwic3RhcnRUcmlnZ2VyXCJcbiAgICAgICAgICAgIH1dKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURpYWxvZ1NlcnZpY2VBZGFwdGVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBBdWRpb091dHB1dEZvcm1hdEltcGwgfSBmcm9tIFwiLi4vc2RrL0F1ZGlvL0F1ZGlvT3V0cHV0Rm9ybWF0XCI7XG5pbXBvcnQgeyBBdWRpb091dHB1dFN0cmVhbSB9IGZyb20gXCIuLi9zZGsvQXVkaW8vQXVkaW9PdXRwdXRTdHJlYW1cIjtcbmltcG9ydCB7IE1lc3NhZ2VEYXRhU3RyZWFtVHlwZSB9IGZyb20gXCIuL1NlcnZpY2VNZXNzYWdlcy9BY3Rpdml0eVJlc3BvbnNlUGF5bG9hZFwiO1xuZXhwb3J0IGNsYXNzIERpYWxvZ1NlcnZpY2VUdXJuU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKG1hbmFnZXIsIHJlcXVlc3RJZCkge1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0SWQgPSByZXF1ZXN0SWQ7XG4gICAgICAgIHRoaXMucHJpdklzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvU3RyZWFtID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcml2VHVybk1hbmFnZXIgPSBtYW5hZ2VyO1xuICAgICAgICB0aGlzLnJlc2V0VHVybkVuZFRpbWVvdXQoKTtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvU3RyZWFtKCkge1xuICAgICAgICAvLyBDYWxsZWQgd2hlbiBpcyBuZWVkZWQgdG8gc3RyZWFtLlxuICAgICAgICB0aGlzLnJlc2V0VHVybkVuZFRpbWVvdXQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvU3RyZWFtO1xuICAgIH1cbiAgICBwcm9jZXNzQWN0aXZpdHlQYXlsb2FkKHBheWxvYWQsIGF1ZGlvRm9ybWF0KSB7XG4gICAgICAgIGlmIChwYXlsb2FkLm1lc3NhZ2VEYXRhU3RyZWFtVHlwZSA9PT0gTWVzc2FnZURhdGFTdHJlYW1UeXBlLlRleHRUb1NwZWVjaEF1ZGlvKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZBdWRpb1N0cmVhbSA9IEF1ZGlvT3V0cHV0U3RyZWFtLmNyZWF0ZVB1bGxTdHJlYW0oKTtcbiAgICAgICAgICAgIHRoaXMucHJpdkF1ZGlvU3RyZWFtLmZvcm1hdCA9IChhdWRpb0Zvcm1hdCAhPT0gdW5kZWZpbmVkKSA/IGF1ZGlvRm9ybWF0IDogQXVkaW9PdXRwdXRGb3JtYXRJbXBsLmdldERlZmF1bHRPdXRwdXRGb3JtYXQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9TdHJlYW07XG4gICAgfVxuICAgIGVuZEF1ZGlvU3RyZWFtKCkge1xuICAgICAgICBpZiAodGhpcy5wcml2QXVkaW9TdHJlYW0gIT09IG51bGwgJiYgIXRoaXMucHJpdkF1ZGlvU3RyZWFtLmlzQ2xvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZBdWRpb1N0cmVhbS5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbXBsZXRlKCkge1xuICAgICAgICBpZiAodGhpcy5wcml2VGltZW91dFRva2VuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5wcml2VGltZW91dFRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVuZEF1ZGlvU3RyZWFtKCk7XG4gICAgfVxuICAgIHJlc2V0VHVybkVuZFRpbWVvdXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZUaW1lb3V0VG9rZW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnRcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnByaXZUaW1lb3V0VG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdlRpbWVvdXRUb2tlbiA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcml2VHVybk1hbmFnZXIuQ29tcGxldGVUdXJuKHRoaXMucHJpdlJlcXVlc3RJZCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0sIDIwMDApO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGlhbG9nU2VydmljZVR1cm5TdGF0ZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgSW52YWxpZE9wZXJhdGlvbkVycm9yIH0gZnJvbSBcIi4uL2NvbW1vbi9FcnJvclwiO1xuaW1wb3J0IHsgRGlhbG9nU2VydmljZVR1cm5TdGF0ZSB9IGZyb20gXCIuL0RpYWxvZ1NlcnZpY2VUdXJuU3RhdGVcIjtcbmV4cG9ydCBjbGFzcyBEaWFsb2dTZXJ2aWNlVHVyblN0YXRlTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJpdlR1cm5NYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgU3RhcnRUdXJuKGlkKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZUdXJuTWFwLmhhcyhpZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXJyb3IoXCJTZXJ2aWNlIGVycm9yOiBUaGVyZSBpcyBhbHJlYWR5IGEgdHVybiB3aXRoIGlkOlwiICsgaWQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHR1cm5TdGF0ZSA9IG5ldyBEaWFsb2dTZXJ2aWNlVHVyblN0YXRlKHRoaXMsIGlkKTtcbiAgICAgICAgdGhpcy5wcml2VHVybk1hcC5zZXQoaWQsIHR1cm5TdGF0ZSk7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUdXJuTWFwLmdldChpZCk7XG4gICAgfVxuICAgIEdldFR1cm4oaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlR1cm5NYXAuZ2V0KGlkKTtcbiAgICB9XG4gICAgQ29tcGxldGVUdXJuKGlkKSB7XG4gICAgICAgIGlmICghdGhpcy5wcml2VHVybk1hcC5oYXMoaWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiU2VydmljZSBlcnJvcjogUmVjZWl2ZWQgdHVybiBlbmQgZm9yIGFuIHVua25vd24gdHVybiBpZDpcIiArIGlkKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0dXJuU3RhdGUgPSB0aGlzLnByaXZUdXJuTWFwLmdldChpZCk7XG4gICAgICAgIHR1cm5TdGF0ZS5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLnByaXZUdXJuTWFwLmRlbGV0ZShpZCk7XG4gICAgICAgIHJldHVybiB0dXJuU3RhdGU7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EaWFsb2dTZXJ2aWNlVHVyblN0YXRlTWFuYWdlci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBSZXNwb25zaWJsZSBmb3IgYnVpbGRpbmcgdGhlIG9iamVjdCB0byBiZSBzZW50IHRvIHRoZSBzcGVlY2ggc2VydmljZSB0byBzdXBwb3J0IGR5bmFtaWMgZ3JhbW1hcnMuXG4gKiBAY2xhc3MgRHluYW1pY0dyYW1tYXJCdWlsZGVyXG4gKi9cbmV4cG9ydCBjbGFzcyBEeW5hbWljR3JhbW1hckJ1aWxkZXIge1xuICAgIC8vIEFkZHMgb25lIG1vcmUgcmVmZXJlbmNlIHBocmFzZXMgdG8gdGhlIGR5bmFtaWMgZ3JhbW1hciB0byBzZW5kLlxuICAgIC8vIEFsbCBhZGRlZCBwaHJhc2VzIGFyZSBnZW5lcmljIHBocmFzZXMuXG4gICAgYWRkUGhyYXNlKHBocmFzZSkge1xuICAgICAgICBpZiAoIXRoaXMucHJpdlBocmFzZXMpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlBocmFzZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGhyYXNlIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlBocmFzZXMgPSB0aGlzLnByaXZQaHJhc2VzLmNvbmNhdChwaHJhc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2UGhyYXNlcy5wdXNoKHBocmFzZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQ2xlYXJzIGFsbCBwaHJhc2VzIHN0b3JlZCBpbiB0aGUgY3VycmVudCBvYmplY3QuXG4gICAgY2xlYXJQaHJhc2VzKCkge1xuICAgICAgICB0aGlzLnByaXZQaHJhc2VzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLyBBZGRzIG9uZSBvciBtb3JlIHJlZmVyZW5jZSBncmFtbWFycyB0byB0aGUgY3VycmVudCBncmFtbWFyLlxuICAgIGFkZFJlZmVyZW5jZUdyYW1tYXIoZ3JhbW1hcikge1xuICAgICAgICBpZiAoIXRoaXMucHJpdkdyYW1tYXJzKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZHcmFtbWFycyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChncmFtbWFyIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkdyYW1tYXJzID0gdGhpcy5wcml2R3JhbW1hcnMuY29uY2F0KGdyYW1tYXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2R3JhbW1hcnMucHVzaChncmFtbWFyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBjbGVhcnMgYWxsIGdyYW1tYXJzIHN0b3JlZCBvbiB0aGUgcmVjb2duaXplci5cbiAgICBjbGVhckdyYW1tYXJzKCkge1xuICAgICAgICB0aGlzLnByaXZHcmFtbWFycyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLy8gR2VuZXJhdGVzIGFuIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIGR5bmFtaWMgZ3JhbW1hciB1c2VkIGJ5IHRoZSBTcGVlY2ggU2VydmljZS5cbiAgICAvLyBUaGlzIGlzIGRvbmUgYnkgYnVpbGRpbmcgYW4gb2JqZWN0IHdpdGggdGhlIGNvcnJlY3QgbGF5b3V0IGJhc2VkIG9uIHRoZSBwaHJhc2VzIGFuZCByZWZlcmVuY2UgZ3JhbW1hcnMgYWRkZWQgdG8gdGhpcyBpbnN0YW5jZVxuICAgIC8vIG9mIGEgRHluYW1pY0dyYW1tYXJCdWlsZGVyXG4gICAgZ2VuZXJhdGVHcmFtbWFyT2JqZWN0KCkge1xuICAgICAgICBpZiAodGhpcy5wcml2R3JhbW1hcnMgPT09IHVuZGVmaW5lZCAmJiB0aGlzLnByaXZQaHJhc2VzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmV0T2JqID0ge307XG4gICAgICAgIHJldE9iai5SZWZlcmVuY2VHcmFtbWFycyA9IHRoaXMucHJpdkdyYW1tYXJzO1xuICAgICAgICBpZiAodW5kZWZpbmVkICE9PSB0aGlzLnByaXZQaHJhc2VzICYmIDAgIT09IHRoaXMucHJpdlBocmFzZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCByZXRQaHJhc2VzID0gW107XG4gICAgICAgICAgICB0aGlzLnByaXZQaHJhc2VzLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0UGhyYXNlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgVGV4dDogdmFsdWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldE9iai5Hcm91cHMgPSBbeyBUeXBlOiBcIkdlbmVyaWNcIiwgSXRlbXM6IHJldFBocmFzZXMgfV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldE9iajtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUR5bmFtaWNHcmFtbWFyQnVpbGRlci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EeW5hbWljR3JhbW1hckludGVyZmFjZXMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENhbmNlbGxhdGlvbkVycm9yQ29kZSwgQ2FuY2VsbGF0aW9uUmVhc29uLCBSZXN1bHRSZWFzb24gfSBmcm9tIFwiLi4vc2RrL0V4cG9ydHNcIjtcbmltcG9ydCB7IFJlY29nbml0aW9uU3RhdHVzIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIEVudW1UcmFuc2xhdGlvbiB7XG4gICAgc3RhdGljIGltcGxUcmFuc2xhdGVSZWNvZ25pdGlvblJlc3VsdChyZWNvZ25pdGlvblN0YXR1cykge1xuICAgICAgICBsZXQgcmVhc29uID0gUmVzdWx0UmVhc29uLkNhbmNlbGVkO1xuICAgICAgICBzd2l0Y2ggKHJlY29nbml0aW9uU3RhdHVzKSB7XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLlN1Y2Nlc3M6XG4gICAgICAgICAgICAgICAgcmVhc29uID0gUmVzdWx0UmVhc29uLlJlY29nbml6ZWRTcGVlY2g7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLk5vTWF0Y2g6XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLkluaXRpYWxTaWxlbmNlVGltZW91dDpcbiAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25TdGF0dXMuQmFiYmxlVGltZW91dDpcbiAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25TdGF0dXMuRW5kT2ZEaWN0YXRpb246XG4gICAgICAgICAgICAgICAgcmVhc29uID0gUmVzdWx0UmVhc29uLk5vTWF0Y2g7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLkVycm9yOlxuICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvblN0YXR1cy5CYWRSZXF1ZXN0OlxuICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvblN0YXR1cy5Gb3JiaWRkZW46XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IFJlc3VsdFJlYXNvbi5DYW5jZWxlZDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVhc29uO1xuICAgIH1cbiAgICBzdGF0aWMgaW1wbFRyYW5zbGF0ZUNhbmNlbFJlc3VsdChyZWNvZ25pdGlvblN0YXR1cykge1xuICAgICAgICBsZXQgcmVhc29uID0gQ2FuY2VsbGF0aW9uUmVhc29uLkVuZE9mU3RyZWFtO1xuICAgICAgICBzd2l0Y2ggKHJlY29nbml0aW9uU3RhdHVzKSB7XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLlN1Y2Nlc3M6XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLkVuZE9mRGljdGF0aW9uOlxuICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvblN0YXR1cy5Ob01hdGNoOlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IENhbmNlbGxhdGlvblJlYXNvbi5FbmRPZlN0cmVhbTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25TdGF0dXMuSW5pdGlhbFNpbGVuY2VUaW1lb3V0OlxuICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvblN0YXR1cy5CYWJibGVUaW1lb3V0OlxuICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvblN0YXR1cy5FcnJvcjpcbiAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25TdGF0dXMuQmFkUmVxdWVzdDpcbiAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25TdGF0dXMuRm9yYmlkZGVuOlxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWFzb24gPSBDYW5jZWxsYXRpb25SZWFzb24uRXJyb3I7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlYXNvbjtcbiAgICB9XG4gICAgc3RhdGljIGltcGxUcmFuc2xhdGVDYW5jZWxFcnJvckNvZGUocmVjb2duaXRpb25TdGF0dXMpIHtcbiAgICAgICAgbGV0IHJlYXNvbiA9IENhbmNlbGxhdGlvbkVycm9yQ29kZS5Ob0Vycm9yO1xuICAgICAgICBzd2l0Y2ggKHJlY29nbml0aW9uU3RhdHVzKSB7XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLkVycm9yOlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IENhbmNlbGxhdGlvbkVycm9yQ29kZS5TZXJ2aWNlRXJyb3I7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uU3RhdHVzLlRvb01hbnlSZXF1ZXN0czpcbiAgICAgICAgICAgICAgICByZWFzb24gPSBDYW5jZWxsYXRpb25FcnJvckNvZGUuVG9vTWFueVJlcXVlc3RzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvblN0YXR1cy5CYWRSZXF1ZXN0OlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IENhbmNlbGxhdGlvbkVycm9yQ29kZS5CYWRSZXF1ZXN0UGFyYW1ldGVycztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25TdGF0dXMuRm9yYmlkZGVuOlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IENhbmNlbGxhdGlvbkVycm9yQ29kZS5Gb3JiaWRkZW47XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IENhbmNlbGxhdGlvbkVycm9yQ29kZS5Ob0Vycm9yO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWFzb247XG4gICAgfVxuICAgIHN0YXRpYyBpbXBsVHJhbnNsYXRlRXJyb3JEZXRhaWxzKGNhbmNlbGxhdGlvbkVycm9yQ29kZSkge1xuICAgICAgICBsZXQgZXJyb3JEZXRhaWxzID0gXCJUaGUgc3BlZWNoIHNlcnZpY2UgZW5jb3VudGVyZWQgYW4gaW50ZXJuYWwgZXJyb3IgYW5kIGNvdWxkIG5vdCBjb250aW51ZS5cIjtcbiAgICAgICAgc3dpdGNoIChjYW5jZWxsYXRpb25FcnJvckNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLkZvcmJpZGRlbjpcbiAgICAgICAgICAgICAgICBlcnJvckRldGFpbHMgPSBcIlRoZSByZWNvZ25pemVyIGlzIHVzaW5nIGEgZnJlZSBzdWJzY3JpcHRpb24gdGhhdCByYW4gb3V0IG9mIHF1b3RhLlwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDYW5jZWxsYXRpb25FcnJvckNvZGUuQmFkUmVxdWVzdFBhcmFtZXRlcnM6XG4gICAgICAgICAgICAgICAgZXJyb3JEZXRhaWxzID0gXCJJbnZhbGlkIHBhcmFtZXRlciBvciB1bnN1cHBvcnRlZCBhdWRpbyBmb3JtYXQgaW4gdGhlIHJlcXVlc3QuXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENhbmNlbGxhdGlvbkVycm9yQ29kZS5Ub29NYW55UmVxdWVzdHM6XG4gICAgICAgICAgICAgICAgZXJyb3JEZXRhaWxzID0gXCJUaGUgbnVtYmVyIG9mIHBhcmFsbGVsIHJlcXVlc3RzIGV4Y2VlZGVkIHRoZSBudW1iZXIgb2YgYWxsb3dlZCBjb25jdXJyZW50IHRyYW5zY3JpcHRpb25zLlwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXJyb3JEZXRhaWxzO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RW51bVRyYW5zbGF0aW9uLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vLyBNYWtlIHN1cmUgbm90IHRvIGV4cG9ydCBpbnRlcm5hbCBtb2R1bGVzLlxuLy9cbmV4cG9ydCAqIGZyb20gXCIuL0NvZ25pdGl2ZVN1YnNjcmlwdGlvbktleUF1dGhlbnRpY2F0aW9uXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9Db2duaXRpdmVUb2tlbkF1dGhlbnRpY2F0aW9uXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9JQXV0aGVudGljYXRpb25cIjtcbmV4cG9ydCAqIGZyb20gXCIuL0lDb25uZWN0aW9uRmFjdG9yeVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSVN5bnRoZXNpc0Nvbm5lY3Rpb25GYWN0b3J5XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9JbnRlbnRDb25uZWN0aW9uRmFjdG9yeVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vU3BlYWtlclJlY29nbml0aW9uQ29ubmVjdGlvbkZhY3RvcnlcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1JlY29nbml0aW9uRXZlbnRzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TZXJ2aWNlUmVjb2duaXplckJhc2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0NvbnZlcnNhdGlvblNlcnZpY2VSZWNvZ25pemVyXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9SZWNvZ25pemVyQ29uZmlnXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TcGVlY2hTZXJ2aWNlSW50ZXJmYWNlc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vU3BlZWNoQ29ubmVjdGlvbkZhY3RvcnlcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1RyYW5zY3JpYmVyQ29ubmVjdGlvbkZhY3RvcnlcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1RyYW5zbGF0aW9uQ29ubmVjdGlvbkZhY3RvcnlcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NwZWVjaFN5bnRoZXNpc0Nvbm5lY3Rpb25GYWN0b3J5XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9FbnVtVHJhbnNsYXRpb25cIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NlcnZpY2VNZXNzYWdlcy9FbnVtc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vU2VydmljZU1lc3NhZ2VzL1RyYW5zbGF0aW9uU3ludGhlc2lzRW5kXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TZXJ2aWNlTWVzc2FnZXMvVHJhbnNsYXRpb25IeXBvdGhlc2lzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TZXJ2aWNlTWVzc2FnZXMvVHJhbnNsYXRpb25QaHJhc2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1RyYW5zbGF0aW9uU2VydmljZVJlY29nbml6ZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NlcnZpY2VNZXNzYWdlcy9TcGVlY2hEZXRlY3RlZFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vU2VydmljZU1lc3NhZ2VzL1NwZWVjaEh5cG90aGVzaXNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NlcnZpY2VNZXNzYWdlcy9TcGVlY2hLZXl3b3JkXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TcGVlY2hTZXJ2aWNlUmVjb2duaXplclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vVHJhbnNjcmlwdGlvblNlcnZpY2VSZWNvZ25pemVyXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TZXJ2aWNlTWVzc2FnZXMvRGV0YWlsZWRTcGVlY2hQaHJhc2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NlcnZpY2VNZXNzYWdlcy9TaW1wbGVTcGVlY2hQaHJhc2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0FkZGVkTG1JbnRlbnRcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0ludGVudFNlcnZpY2VSZWNvZ25pemVyXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TZXJ2aWNlTWVzc2FnZXMvSW50ZW50UmVzcG9uc2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NlcnZpY2VNZXNzYWdlcy9TcGVha2VyUmVzcG9uc2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1JlcXVlc3RTZXNzaW9uXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TcGVlY2hDb250ZXh0XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9EeW5hbWljR3JhbW1hckJ1aWxkZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0R5bmFtaWNHcmFtbWFySW50ZXJmYWNlc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vRGlhbG9nU2VydmljZUFkYXB0ZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0FnZW50Q29uZmlnXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9UcmFuc2NyaXB0aW9uL0V4cG9ydHNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NlcnZpY2VNZXNzYWdlcy9TeW50aGVzaXNBdWRpb01ldGFkYXRhXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TeW50aGVzaXNUdXJuXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TeW50aGVzaXNBZGFwdGVyQmFzZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vU3ludGhlc2lzUmVzdEFkYXB0ZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1N5bnRoZXNpemVyQ29uZmlnXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TeW50aGVzaXNDb250ZXh0XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9TcGVha2VyUmVjb2duaXRpb25Db25maWdcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1NwZWFrZXJTZXJ2aWNlUmVjb2duaXplclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vVm9pY2VTZXJ2aWNlUmVjb2duaXplclwiO1xuZXhwb3J0IGNvbnN0IE91dHB1dEZvcm1hdFByb3BlcnR5TmFtZSA9IFwiT3V0cHV0Rm9ybWF0XCI7XG5leHBvcnQgY29uc3QgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lID0gXCJDYW5jZWxsYXRpb25FcnJvckNvZGVcIjtcbmV4cG9ydCBjb25zdCBTZXJ2aWNlUHJvcGVydGllc1Byb3BlcnR5TmFtZSA9IFwiU2VydmljZVByb3BlcnRpZXNcIjtcbmV4cG9ydCBjb25zdCBGb3JjZURpY3RhdGlvblByb3BlcnR5TmFtZSA9IFwiRm9yY2VEaWN0YXRpb25cIjtcbmV4cG9ydCBjb25zdCBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VzT3BlblJhbmdlT3B0aW9uTmFtZSA9IFwiT3BlblJhbmdlXCI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV4cG9ydHMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmV4cG9ydCBjbGFzcyBIZWFkZXJOYW1lcyB7XG59XG5IZWFkZXJOYW1lcy5BdXRoS2V5ID0gXCJPY3AtQXBpbS1TdWJzY3JpcHRpb24tS2V5XCI7XG5IZWFkZXJOYW1lcy5BdXRob3JpemF0aW9uID0gXCJBdXRob3JpemF0aW9uXCI7XG5IZWFkZXJOYW1lcy5TcElEQXV0aEtleSA9IFwiQXBpbS1TdWJzY3JpcHRpb24tSWRcIjtcbkhlYWRlck5hbWVzLkNvbm5lY3Rpb25JZCA9IFwiWC1Db25uZWN0aW9uSWRcIjtcbkhlYWRlck5hbWVzLkNvbnRlbnRUeXBlID0gXCJDb250ZW50LVR5cGVcIjtcbkhlYWRlck5hbWVzLkN1c3RvbUNvbW1hbmRzQXBwSWQgPSBcIlgtQ29tbWFuZHNBcHBJZFwiO1xuSGVhZGVyTmFtZXMuUGF0aCA9IFwiUGF0aFwiO1xuSGVhZGVyTmFtZXMuUmVxdWVzdElkID0gXCJYLVJlcXVlc3RJZFwiO1xuSGVhZGVyTmFtZXMuUmVxdWVzdFN0cmVhbUlkID0gXCJYLVN0cmVhbUlkXCI7XG5IZWFkZXJOYW1lcy5SZXF1ZXN0VGltZXN0YW1wID0gXCJYLVRpbWVzdGFtcFwiO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1IZWFkZXJOYW1lcy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuZXhwb3J0IGNsYXNzIEF1dGhJbmZvIHtcbiAgICBjb25zdHJ1Y3RvcihoZWFkZXJOYW1lLCB0b2tlbikge1xuICAgICAgICB0aGlzLnByaXZIZWFkZXJOYW1lID0gaGVhZGVyTmFtZTtcbiAgICAgICAgdGhpcy5wcml2VG9rZW4gPSB0b2tlbjtcbiAgICB9XG4gICAgZ2V0IGhlYWRlck5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZIZWFkZXJOYW1lO1xuICAgIH1cbiAgICBnZXQgdG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUb2tlbjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUlBdXRoZW50aWNhdGlvbi5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JQ29ubmVjdGlvbkZhY3RvcnkuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SVN5bnRoZXNpc0Nvbm5lY3Rpb25GYWN0b3J5LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBQcm94eUluZm8sIFdlYnNvY2tldENvbm5lY3Rpb24sIH0gZnJvbSBcIi4uL2NvbW1vbi5icm93c2VyL0V4cG9ydHNcIjtcbmltcG9ydCB7IFByb3BlcnR5SWQgfSBmcm9tIFwiLi4vc2RrL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb25GYWN0b3J5QmFzZSB9IGZyb20gXCIuL0Nvbm5lY3Rpb25GYWN0b3J5QmFzZVwiO1xuaW1wb3J0IHsgV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlciwgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBIZWFkZXJOYW1lcyB9IGZyb20gXCIuL0hlYWRlck5hbWVzXCI7XG5leHBvcnQgY2xhc3MgSW50ZW50Q29ubmVjdGlvbkZhY3RvcnkgZXh0ZW5kcyBDb25uZWN0aW9uRmFjdG9yeUJhc2Uge1xuICAgIGNyZWF0ZShjb25maWcsIGF1dGhJbmZvLCBjb25uZWN0aW9uSWQpIHtcbiAgICAgICAgbGV0IGVuZHBvaW50ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCk7XG4gICAgICAgIGlmICghZW5kcG9pbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlZ2lvbiA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSW50ZW50UmVnaW9uKTtcbiAgICAgICAgICAgIGNvbnN0IGhvc3RTdWZmaXggPSBDb25uZWN0aW9uRmFjdG9yeUJhc2UuZ2V0SG9zdFN1ZmZpeChyZWdpb24pO1xuICAgICAgICAgICAgY29uc3QgaG9zdCA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSG9zdCwgXCJ3c3M6Ly9cIiArIHJlZ2lvbiArIFwiLnNyLnNwZWVjaFwiICsgaG9zdFN1ZmZpeCk7XG4gICAgICAgICAgICBlbmRwb2ludCA9IGhvc3QgKyBcIi9zcGVlY2gvcmVjb2duaXRpb24vaW50ZXJhY3RpdmUvY29nbml0aXZlc2VydmljZXMvdjFcIjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHtcbiAgICAgICAgICAgIGZvcm1hdDogXCJzaW1wbGVcIixcbiAgICAgICAgICAgIGxhbmd1YWdlOiBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSksXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0Q29tbW9uVXJsUGFyYW1zKGNvbmZpZywgcXVlcnlQYXJhbXMsIGVuZHBvaW50KTtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHt9O1xuICAgICAgICBpZiAoYXV0aEluZm8udG9rZW4gIT09IHVuZGVmaW5lZCAmJiBhdXRoSW5mby50b2tlbiAhPT0gXCJcIikge1xuICAgICAgICAgICAgaGVhZGVyc1thdXRoSW5mby5oZWFkZXJOYW1lXSA9IGF1dGhJbmZvLnRva2VuO1xuICAgICAgICB9XG4gICAgICAgIGhlYWRlcnNbSGVhZGVyTmFtZXMuQ29ubmVjdGlvbklkXSA9IGNvbm5lY3Rpb25JZDtcbiAgICAgICAgY29uZmlnLnBhcmFtZXRlcnMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9VcmwsIGVuZHBvaW50KTtcbiAgICAgICAgY29uc3QgZW5hYmxlQ29tcHJlc3Npb24gPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShcIlNQRUVDSC1FbmFibGVXZWJzb2NrZXRDb21wcmVzc2lvblwiLCBcImZhbHNlXCIpID09PSBcInRydWVcIjtcbiAgICAgICAgcmV0dXJuIG5ldyBXZWJzb2NrZXRDb25uZWN0aW9uKGVuZHBvaW50LCBxdWVyeVBhcmFtcywgaGVhZGVycywgbmV3IFdlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIoKSwgUHJveHlJbmZvLmZyb21SZWNvZ25pemVyQ29uZmlnKGNvbmZpZyksIGVuYWJsZUNvbXByZXNzaW9uLCBjb25uZWN0aW9uSWQpO1xuICAgIH1cbiAgICBnZXRTcGVlY2hSZWdpb25Gcm9tSW50ZW50UmVnaW9uKGludGVudFJlZ2lvbikge1xuICAgICAgICBzd2l0Y2ggKGludGVudFJlZ2lvbikge1xuICAgICAgICAgICAgY2FzZSBcIldlc3QgVVNcIjpcbiAgICAgICAgICAgIGNhc2UgXCJVUyBXZXN0XCI6XG4gICAgICAgICAgICBjYXNlIFwid2VzdHVzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidXN3ZXN0XCI7XG4gICAgICAgICAgICBjYXNlIFwiV2VzdCBVUyAyXCI6XG4gICAgICAgICAgICBjYXNlIFwiVVMgV2VzdCAyXCI6XG4gICAgICAgICAgICBjYXNlIFwid2VzdHVzMlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcInVzd2VzdDJcIjtcbiAgICAgICAgICAgIGNhc2UgXCJTb3V0aCBDZW50cmFsIFVTXCI6XG4gICAgICAgICAgICBjYXNlIFwiVVMgU291dGggQ2VudHJhbFwiOlxuICAgICAgICAgICAgY2FzZSBcInNvdXRoY2VudHJhbHVzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidXNzb3V0aGNlbnRyYWxcIjtcbiAgICAgICAgICAgIGNhc2UgXCJXZXN0IENlbnRyYWwgVVNcIjpcbiAgICAgICAgICAgIGNhc2UgXCJVUyBXZXN0IENlbnRyYWxcIjpcbiAgICAgICAgICAgIGNhc2UgXCJ3ZXN0Y2VudHJhbHVzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidXN3ZXN0Y2VudHJhbFwiO1xuICAgICAgICAgICAgY2FzZSBcIkVhc3QgVVNcIjpcbiAgICAgICAgICAgIGNhc2UgXCJVUyBFYXN0XCI6XG4gICAgICAgICAgICBjYXNlIFwiZWFzdHVzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidXNlYXN0XCI7XG4gICAgICAgICAgICBjYXNlIFwiRWFzdCBVUyAyXCI6XG4gICAgICAgICAgICBjYXNlIFwiVVMgRWFzdCAyXCI6XG4gICAgICAgICAgICBjYXNlIFwiZWFzdHVzMlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcInVzZWFzdDJcIjtcbiAgICAgICAgICAgIGNhc2UgXCJXZXN0IEV1cm9wZVwiOlxuICAgICAgICAgICAgY2FzZSBcIkV1cm9wZSBXZXN0XCI6XG4gICAgICAgICAgICBjYXNlIFwid2VzdGV1cm9wZVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImV1cm9wZXdlc3RcIjtcbiAgICAgICAgICAgIGNhc2UgXCJOb3J0aCBFdXJvcGVcIjpcbiAgICAgICAgICAgIGNhc2UgXCJFdXJvcGUgTm9ydGhcIjpcbiAgICAgICAgICAgIGNhc2UgXCJub3J0aGV1cm9wZVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImV1cm9wZW5vcnRoXCI7XG4gICAgICAgICAgICBjYXNlIFwiQnJhemlsIFNvdXRoXCI6XG4gICAgICAgICAgICBjYXNlIFwiU291dGggQnJhemlsXCI6XG4gICAgICAgICAgICBjYXNlIFwic291dGhicmF6aWxcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJicmF6aWxzb3V0aFwiO1xuICAgICAgICAgICAgY2FzZSBcIkF1c3RyYWxpYSBFYXN0XCI6XG4gICAgICAgICAgICBjYXNlIFwiRWFzdCBBdXN0cmFsaWFcIjpcbiAgICAgICAgICAgIGNhc2UgXCJlYXN0YXVzdHJhbGlhXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXVzdHJhbGlhZWFzdFwiO1xuICAgICAgICAgICAgY2FzZSBcIlNvdXRoZWFzdCBBc2lhXCI6XG4gICAgICAgICAgICBjYXNlIFwiQXNpYSBTb3V0aGVhc3RcIjpcbiAgICAgICAgICAgIGNhc2UgXCJzb3V0aGVhc3Rhc2lhXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXNpYXNvdXRoZWFzdFwiO1xuICAgICAgICAgICAgY2FzZSBcIkVhc3QgQXNpYVwiOlxuICAgICAgICAgICAgY2FzZSBcIkFzaWEgRWFzdFwiOlxuICAgICAgICAgICAgY2FzZSBcImVhc3Rhc2lhXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXNpYWVhc3RcIjtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGludGVudFJlZ2lvbjtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW50ZW50Q29ubmVjdGlvbkZhY3RvcnkuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IERlZmVycmVkLCBNZXNzYWdlVHlwZSwgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IENhbmNlbGxhdGlvbkVycm9yQ29kZSwgSW50ZW50UmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncywgSW50ZW50UmVjb2duaXRpb25FdmVudEFyZ3MsIEludGVudFJlY29nbml0aW9uUmVzdWx0LCBQcm9wZXJ0eUNvbGxlY3Rpb24sIFByb3BlcnR5SWQsIFJlc3VsdFJlYXNvbiwgfSBmcm9tIFwiLi4vc2RrL0V4cG9ydHNcIjtcbmltcG9ydCB7IENhbmNlbGxhdGlvbkVycm9yQ29kZVByb3BlcnR5TmFtZSwgRW51bVRyYW5zbGF0aW9uLCBJbnRlbnRSZXNwb25zZSwgU2VydmljZVJlY29nbml6ZXJCYXNlLCBTaW1wbGVTcGVlY2hQaHJhc2UsIFNwZWVjaEh5cG90aGVzaXMsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgSW50ZW50U2VydmljZVJlY29nbml6ZXIgZXh0ZW5kcyBTZXJ2aWNlUmVjb2duaXplckJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Tb3VyY2UsIHJlY29nbml6ZXJDb25maWcsIHJlY29nbml6ZXIpIHtcbiAgICAgICAgc3VwZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb1NvdXJjZSwgcmVjb2duaXplckNvbmZpZywgcmVjb2duaXplcik7XG4gICAgICAgIHRoaXMucHJpdkludGVudFJlY29nbml6ZXIgPSByZWNvZ25pemVyO1xuICAgICAgICB0aGlzLnByaXZJbnRlbnREYXRhU2VudCA9IGZhbHNlO1xuICAgIH1cbiAgICBzZXRJbnRlbnRzKGFkZGVkSW50ZW50cywgdW1icmVsbGFJbnRlbnQpIHtcbiAgICAgICAgdGhpcy5wcml2QWRkZWRMbUludGVudHMgPSBhZGRlZEludGVudHM7XG4gICAgICAgIHRoaXMucHJpdlVtYnJlbGxhSW50ZW50ID0gdW1icmVsbGFJbnRlbnQ7XG4gICAgICAgIHRoaXMucHJpdkludGVudERhdGFTZW50ID0gdHJ1ZTtcbiAgICB9XG4gICAgcHJvY2Vzc1R5cGVTcGVjaWZpY01lc3NhZ2VzKGNvbm5lY3Rpb25NZXNzYWdlKSB7XG4gICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgIGxldCBldjtcbiAgICAgICAgbGV0IHByb2Nlc3NlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCByZXN1bHRQcm9wcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgaWYgKGNvbm5lY3Rpb25NZXNzYWdlLm1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5UZXh0KSB7XG4gICAgICAgICAgICByZXN1bHRQcm9wcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uUmVzdWx0LCBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChjb25uZWN0aW9uTWVzc2FnZS5wYXRoLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGNhc2UgXCJzcGVlY2guaHlwb3RoZXNpc1wiOlxuICAgICAgICAgICAgICAgIGNvbnN0IHNwZWVjaEh5cG90aGVzaXMgPSBTcGVlY2hIeXBvdGhlc2lzLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgSW50ZW50UmVjb2duaXRpb25SZXN1bHQodW5kZWZpbmVkLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIFJlc3VsdFJlYXNvbi5SZWNvZ25pemluZ0ludGVudCwgc3BlZWNoSHlwb3RoZXNpcy5UZXh0LCBzcGVlY2hIeXBvdGhlc2lzLkR1cmF0aW9uLCBzcGVlY2hIeXBvdGhlc2lzLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQsIHNwZWVjaEh5cG90aGVzaXMuTGFuZ3VhZ2UsIHNwZWVjaEh5cG90aGVzaXMuTGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlLCB1bmRlZmluZWQsIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5LCByZXN1bHRQcm9wcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25IeXBvdGhlc2lzKHJlc3VsdC5vZmZzZXQpO1xuICAgICAgICAgICAgICAgIGV2ID0gbmV3IEludGVudFJlY29nbml0aW9uRXZlbnRBcmdzKHJlc3VsdCwgc3BlZWNoSHlwb3RoZXNpcy5PZmZzZXQgKyB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0LCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkludGVudFJlY29nbml6ZXIucmVjb2duaXppbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkludGVudFJlY29nbml6ZXIucmVjb2duaXppbmcodGhpcy5wcml2SW50ZW50UmVjb2duaXplciwgZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcm9jZXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInNwZWVjaC5waHJhc2VcIjpcbiAgICAgICAgICAgICAgICBjb25zdCBzaW1wbGUgPSBTaW1wbGVTcGVlY2hQaHJhc2UuZnJvbUpTT04oY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBJbnRlbnRSZWNvZ25pdGlvblJlc3VsdCh1bmRlZmluZWQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgRW51bVRyYW5zbGF0aW9uLmltcGxUcmFuc2xhdGVSZWNvZ25pdGlvblJlc3VsdChzaW1wbGUuUmVjb2duaXRpb25TdGF0dXMpLCBzaW1wbGUuRGlzcGxheVRleHQsIHNpbXBsZS5EdXJhdGlvbiwgc2ltcGxlLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQsIHNpbXBsZS5MYW5ndWFnZSwgc2ltcGxlLkxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSwgdW5kZWZpbmVkLCBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSwgcmVzdWx0UHJvcHMpO1xuICAgICAgICAgICAgICAgIGV2ID0gbmV3IEludGVudFJlY29nbml0aW9uRXZlbnRBcmdzKHJlc3VsdCwgcmVzdWx0Lm9mZnNldCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzZW5kRXZlbnQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkludGVudFJlY29nbml6ZXIucmVjb2duaXplZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZJbnRlbnRSZWNvZ25pemVyLnJlY29nbml6ZWQodGhpcy5wcml2SW50ZW50UmVjb2duaXplciwgZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlcG9ydCByZXN1bHQgdG8gcHJvbWlzZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZFcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkVycm9yQ2FsbGJhY2soZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSBpbnZva2UgdGhlIGNhbGwgYmFjayBvbmNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGlmIGl0J3Mgc3VjY2Vzc2Z1bCBkb24ndCBpbnZva2UgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlcnJvciBhZnRlciB0aGF0LlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RXJyb3JDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gSWYgaW50ZW50IGRhdGEgd2FzIHNlbnQsIHRoZSB0ZXJtaW5hbCByZXN1bHQgZm9yIHRoaXMgcmVjb2duaXplciBpcyBhbiBpbnRlbnQgYmVpbmcgZm91bmQuXG4gICAgICAgICAgICAgICAgLy8gSWYgbm8gaW50ZW50IGRhdGEgd2FzIHNlbnQsIHRoZSB0ZXJtaW5hbCBldmVudCBpcyBzcGVlY2ggcmVjb2duaXRpb24gYmVpbmcgc3VjY2Vzc2Z1bC5cbiAgICAgICAgICAgICAgICBpZiAoZmFsc2UgPT09IHRoaXMucHJpdkludGVudERhdGFTZW50IHx8IFJlc3VsdFJlYXNvbi5Ob01hdGNoID09PSBldi5yZXN1bHQucmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFkdmFuY2UgdGhlIGJ1ZmZlcnMuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uUGhyYXNlUmVjb2duaXplZChldi5vZmZzZXQgKyBldi5yZXN1bHQuZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBzZW5kRXZlbnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNxdWlycmVsIGF3YXkgdGhlIGFyZ3MsIHdoZW4gdGhlIHJlc3BvbnNlIGV2ZW50IGFycml2ZXMgaXQgd2lsbCBidWlsZCB1cG9uIHRoZW1cbiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRoZW4gcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlBlbmRpbmdJbnRlbnRBcmdzID0gZXY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicmVzcG9uc2VcIjpcbiAgICAgICAgICAgICAgICAvLyBSZXNwb25zZSBmcm9tIExVSVNcbiAgICAgICAgICAgICAgICBldiA9IHRoaXMucHJpdlBlbmRpbmdJbnRlbnRBcmdzO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlBlbmRpbmdJbnRlbnRBcmdzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGV2KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcIlwiID09PSBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjb25kaXRpb24gaGFwcGVucyBpZiB0aGVyZSBpcyBub3RoaW5nIGJ1dCBzaWxlbmNlIGluIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXVkaW8gc2VudCB0byB0aGUgc2VydmljZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBPZGQuLi4gTm90IHN1cmUgdGhpcyBjYW4gaGFwcGVuXG4gICAgICAgICAgICAgICAgICAgIGV2ID0gbmV3IEludGVudFJlY29nbml0aW9uRXZlbnRBcmdzKG5ldyBJbnRlbnRSZWNvZ25pdGlvblJlc3VsdCgpLCAwLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlbnRSZXNwb25zZSA9IEludGVudFJlc3BvbnNlLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAvLyBJZiBMVUlTIGRpZG4ndCByZXR1cm4gYW55dGhpbmcsIHNlbmQgdGhlIGV4aXN0aW5nIGV2ZW50LCBlbHNlXG4gICAgICAgICAgICAgICAgLy8gbW9kaWZ5IGl0IHRvIHNob3cgdGhlIG1hdGNoLlxuICAgICAgICAgICAgICAgIC8vIFNlZSBpZiB0aGUgaW50ZW50IGZvdW5kIGlzIGluIHRoZSBsaXN0IG9mIGludGVudHMgYXNrZWQgZm9yLlxuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBpbnRlbnRSZXNwb25zZSAmJiAhIWludGVudFJlc3BvbnNlLnRvcFNjb3JpbmdJbnRlbnQgJiYgISFpbnRlbnRSZXNwb25zZS50b3BTY29yaW5nSW50ZW50LmludGVudCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWRkZWRJbnRlbnQgPSB0aGlzLnByaXZBZGRlZExtSW50ZW50c1tpbnRlbnRSZXNwb25zZS50b3BTY29yaW5nSW50ZW50LmludGVudF07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZVbWJyZWxsYUludGVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRlZEludGVudCA9IHRoaXMucHJpdlVtYnJlbGxhSW50ZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghIWFkZGVkSW50ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnRlbnRJZCA9IGFkZGVkSW50ZW50ID09PSB1bmRlZmluZWQgfHwgYWRkZWRJbnRlbnQuaW50ZW50TmFtZSA9PT0gdW5kZWZpbmVkID8gaW50ZW50UmVzcG9uc2UudG9wU2NvcmluZ0ludGVudC5pbnRlbnQgOiBhZGRlZEludGVudC5pbnRlbnROYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlYXNvbiA9IGV2LnJlc3VsdC5yZWFzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodW5kZWZpbmVkICE9PSBpbnRlbnRJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbiA9IFJlc3VsdFJlYXNvbi5SZWNvZ25pemVkSW50ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlLCBwcm9wZXJ0aWVzIGlzIHNldC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSAodW5kZWZpbmVkICE9PSBldi5yZXN1bHQucHJvcGVydGllcykgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2LnJlc3VsdC5wcm9wZXJ0aWVzIDogbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkxhbmd1YWdlVW5kZXJzdGFuZGluZ1NlcnZpY2VSZXNwb25zZV9Kc29uUmVzdWx0LCBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBldiA9IG5ldyBJbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncyhuZXcgSW50ZW50UmVjb2duaXRpb25SZXN1bHQoaW50ZW50SWQsIGV2LnJlc3VsdC5yZXN1bHRJZCwgcmVhc29uLCBldi5yZXN1bHQudGV4dCwgZXYucmVzdWx0LmR1cmF0aW9uLCBldi5yZXN1bHQub2Zmc2V0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgZXYucmVzdWx0LmVycm9yRGV0YWlscywgZXYucmVzdWx0Lmpzb24sIHByb3BlcnRpZXMpLCBldi5vZmZzZXQsIGV2LnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25QaHJhc2VSZWNvZ25pemVkKGV2Lm9mZnNldCArIGV2LnJlc3VsdC5kdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2SW50ZW50UmVjb2duaXplci5yZWNvZ25pemVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZJbnRlbnRSZWNvZ25pemVyLnJlY29nbml6ZWQodGhpcy5wcml2SW50ZW50UmVjb2duaXplciwgZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyByZXBvcnQgcmVzdWx0IHRvIHByb21pc2UuXG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2soZXYucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2RXJyb3JDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkVycm9yQ2FsbGJhY2soZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSBpbnZva2UgdGhlIGNhbGwgYmFjayBvbmNlLlxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgaWYgaXQncyBzdWNjZXNzZnVsIGRvbid0IGludm9rZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gZXJyb3IgYWZ0ZXIgdGhhdC5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZFcnJvckNhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcm9jZXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWZmZXJhbCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICBkZWZmZXJhbC5yZXNvbHZlKHByb2Nlc3NlZCk7XG4gICAgICAgIHJldHVybiBkZWZmZXJhbC5wcm9taXNlO1xuICAgIH1cbiAgICAvLyBDYW5jZWxzIHJlY29nbml0aW9uLlxuICAgIGNhbmNlbFJlY29nbml0aW9uKHNlc3Npb25JZCwgcmVxdWVzdElkLCBjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yQ29kZSwgZXJyb3IpIHtcbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgcHJvcGVydGllcy5zZXRQcm9wZXJ0eShDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIENhbmNlbGxhdGlvbkVycm9yQ29kZVtlcnJvckNvZGVdKTtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2SW50ZW50UmVjb2duaXplci5jYW5jZWxlZCkge1xuICAgICAgICAgICAgY29uc3QgY2FuY2VsRXZlbnQgPSBuZXcgSW50ZW50UmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncyhjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yLCBlcnJvckNvZGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBzZXNzaW9uSWQpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZJbnRlbnRSZWNvZ25pemVyLmNhbmNlbGVkKHRoaXMucHJpdkludGVudFJlY29nbml6ZXIsIGNhbmNlbEV2ZW50KTtcbiAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoISF0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBJbnRlbnRSZWNvZ25pdGlvblJlc3VsdCh1bmRlZmluZWQsIC8vIEludGVudCBJZFxuICAgICAgICAgICAgcmVxdWVzdElkLCBSZXN1bHRSZWFzb24uQ2FuY2VsZWQsIHVuZGVmaW5lZCwgLy8gVGV4dFxuICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBEdXJhdGlvblxuICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBPZmZzZXRcbiAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gTGFuZ3VhZ2VcbiAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gTGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlXG4gICAgICAgICAgICBlcnJvciwgdW5kZWZpbmVkLCAvLyBKc29uXG4gICAgICAgICAgICBwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2IpIHsgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlbnRTZXJ2aWNlUmVjb2duaXplci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuZXhwb3J0IGNsYXNzIFF1ZXJ5UGFyYW1ldGVyTmFtZXMge1xufVxuUXVlcnlQYXJhbWV0ZXJOYW1lcy5Cb3RJZCA9IFwiYm90aWRcIjtcblF1ZXJ5UGFyYW1ldGVyTmFtZXMuQ3VzdG9tU3BlZWNoRGVwbG95bWVudElkID0gXCJjaWRcIjtcblF1ZXJ5UGFyYW1ldGVyTmFtZXMuQ3VzdG9tVm9pY2VEZXBsb3ltZW50SWQgPSBcImRlcGxveW1lbnRJZFwiO1xuUXVlcnlQYXJhbWV0ZXJOYW1lcy5FbmFibGVBdWRpb0xvZ2dpbmcgPSBcInN0b3JlQXVkaW9cIjtcblF1ZXJ5UGFyYW1ldGVyTmFtZXMuRW5hYmxlTGFuZ3VhZ2VJZCA9IFwibGlkRW5hYmxlZFwiO1xuUXVlcnlQYXJhbWV0ZXJOYW1lcy5FbmFibGVXb3JkTGV2ZWxUaW1lc3RhbXBzID0gXCJ3b3JkTGV2ZWxUaW1lc3RhbXBzXCI7XG5RdWVyeVBhcmFtZXRlck5hbWVzLkVuZFNpbGVuY2VUaW1lb3V0TXMgPSBcImVuZFNpbGVuY2VUaW1lb3V0TXNcIjtcblF1ZXJ5UGFyYW1ldGVyTmFtZXMuU2VnbWVudGF0aW9uU2lsZW5jZVRpbWVvdXRNcyA9IFwic2VnbWVudGF0aW9uU2lsZW5jZVRpbWVvdXRNc1wiO1xuUXVlcnlQYXJhbWV0ZXJOYW1lcy5Gb3JtYXQgPSBcImZvcm1hdFwiO1xuUXVlcnlQYXJhbWV0ZXJOYW1lcy5Jbml0aWFsU2lsZW5jZVRpbWVvdXRNcyA9IFwiaW5pdGlhbFNpbGVuY2VUaW1lb3V0TXNcIjtcblF1ZXJ5UGFyYW1ldGVyTmFtZXMuTGFuZ3VhZ2UgPSBcImxhbmd1YWdlXCI7XG5RdWVyeVBhcmFtZXRlck5hbWVzLlByb2Zhbml0eSA9IFwicHJvZmFuaXR5XCI7XG5RdWVyeVBhcmFtZXRlck5hbWVzLlJlcXVlc3RCb3RTdGF0dXNNZXNzYWdlcyA9IFwiZW5hYmxlQm90TWVzc2FnZVN0YXR1c1wiO1xuUXVlcnlQYXJhbWV0ZXJOYW1lcy5TdGFibGVJbnRlcm1lZGlhdGVUaHJlc2hvbGQgPSBcInN0YWJsZUludGVybWVkaWF0ZVRocmVzaG9sZFwiO1xuUXVlcnlQYXJhbWV0ZXJOYW1lcy5TdGFibGVUcmFuc2xhdGlvbiA9IFwic3RhYmxlVHJhbnNsYXRpb25cIjtcblF1ZXJ5UGFyYW1ldGVyTmFtZXMuVGVzdEhvb2tzID0gXCJ0ZXN0aG9va3NcIjtcblF1ZXJ5UGFyYW1ldGVyTmFtZXMuUG9zdHByb2Nlc3NpbmcgPSBcInBvc3Rwcm9jZXNzaW5nXCI7XG5RdWVyeVBhcmFtZXRlck5hbWVzLkN0c01lZXRpbmdJZCA9IFwibWVldGluZ0lkXCI7XG5RdWVyeVBhcmFtZXRlck5hbWVzLkN0c0RldmljZUlkID0gXCJkZXZpY2VJZFwiO1xuUXVlcnlQYXJhbWV0ZXJOYW1lcy5DdHNJc1BhcnRpY2lwYW50ID0gXCJpc1BhcnRpY2lwYW50XCI7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVF1ZXJ5UGFyYW1ldGVyTmFtZXMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5pbXBvcnQgeyBFdmVudFR5cGUsIFBsYXRmb3JtRXZlbnQgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmV4cG9ydCBjbGFzcyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50IGV4dGVuZHMgUGxhdGZvcm1FdmVudCB7XG4gICAgY29uc3RydWN0b3IoZXZlbnROYW1lLCByZXF1ZXN0SWQsIHNlc3Npb25JZCwgZXZlbnRUeXBlID0gRXZlbnRUeXBlLkluZm8pIHtcbiAgICAgICAgc3VwZXIoZXZlbnROYW1lLCBldmVudFR5cGUpO1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0SWQgPSByZXF1ZXN0SWQ7XG4gICAgICAgIHRoaXMucHJpdlNlc3Npb25JZCA9IHNlc3Npb25JZDtcbiAgICB9XG4gICAgZ2V0IHJlcXVlc3RJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlcXVlc3RJZDtcbiAgICB9XG4gICAgZ2V0IHNlc3Npb25JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNlc3Npb25JZDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUmVjb2duaXRpb25UcmlnZ2VyZWRFdmVudCBleHRlbmRzIFNwZWVjaFJlY29nbml0aW9uRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKHJlcXVlc3RJZCwgc2Vzc2lvbklkLCBhdWRpb1NvdXJjZUlkLCBhdWRpb05vZGVJZCkge1xuICAgICAgICBzdXBlcihcIlJlY29nbml0aW9uVHJpZ2dlcmVkRXZlbnRcIiwgcmVxdWVzdElkLCBzZXNzaW9uSWQpO1xuICAgICAgICB0aGlzLnByaXZBdWRpb1NvdXJjZUlkID0gYXVkaW9Tb3VyY2VJZDtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlSWQgPSBhdWRpb05vZGVJZDtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvU291cmNlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb1NvdXJjZUlkO1xuICAgIH1cbiAgICBnZXQgYXVkaW9Ob2RlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb05vZGVJZDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgTGlzdGVuaW5nU3RhcnRlZEV2ZW50IGV4dGVuZHMgU3BlZWNoUmVjb2duaXRpb25FdmVudCB7XG4gICAgY29uc3RydWN0b3IocmVxdWVzdElkLCBzZXNzaW9uSWQsIGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHN1cGVyKFwiTGlzdGVuaW5nU3RhcnRlZEV2ZW50XCIsIHJlcXVlc3RJZCwgc2Vzc2lvbklkKTtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCA9IGF1ZGlvU291cmNlSWQ7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvTm9kZUlkID0gYXVkaW9Ob2RlSWQ7XG4gICAgfVxuICAgIGdldCBhdWRpb1NvdXJjZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Tb3VyY2VJZDtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvTm9kZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Ob2RlSWQ7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENvbm5lY3RpbmdUb1NlcnZpY2VFdmVudCBleHRlbmRzIFNwZWVjaFJlY29nbml0aW9uRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKHJlcXVlc3RJZCwgYXV0aEZldGNoRXZlbnRpZCwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHN1cGVyKFwiQ29ubmVjdGluZ1RvU2VydmljZUV2ZW50XCIsIHJlcXVlc3RJZCwgc2Vzc2lvbklkKTtcbiAgICAgICAgdGhpcy5wcml2QXV0aEZldGNoRXZlbnRpZCA9IGF1dGhGZXRjaEV2ZW50aWQ7XG4gICAgfVxuICAgIGdldCBhdXRoRmV0Y2hFdmVudGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXV0aEZldGNoRXZlbnRpZDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUmVjb2duaXRpb25TdGFydGVkRXZlbnQgZXh0ZW5kcyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihyZXF1ZXN0SWQsIGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkLCBhdXRoRmV0Y2hFdmVudElkLCBzZXNzaW9uSWQpIHtcbiAgICAgICAgc3VwZXIoXCJSZWNvZ25pdGlvblN0YXJ0ZWRFdmVudFwiLCByZXF1ZXN0SWQsIHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvU291cmNlSWQgPSBhdWRpb1NvdXJjZUlkO1xuICAgICAgICB0aGlzLnByaXZBdWRpb05vZGVJZCA9IGF1ZGlvTm9kZUlkO1xuICAgICAgICB0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkID0gYXV0aEZldGNoRXZlbnRJZDtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvU291cmNlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb1NvdXJjZUlkO1xuICAgIH1cbiAgICBnZXQgYXVkaW9Ob2RlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb05vZGVJZDtcbiAgICB9XG4gICAgZ2V0IGF1dGhGZXRjaEV2ZW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkO1xuICAgIH1cbn1cbmV4cG9ydCB2YXIgUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzO1xuKGZ1bmN0aW9uIChSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXMpIHtcbiAgICBSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1wiU3VjY2Vzc1wiXSA9IDBdID0gXCJTdWNjZXNzXCI7XG4gICAgUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1JlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tcIkF1ZGlvU291cmNlRXJyb3JcIl0gPSAxXSA9IFwiQXVkaW9Tb3VyY2VFcnJvclwiO1xuICAgIFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbXCJBdWRpb1NvdXJjZVRpbWVvdXRcIl0gPSAyXSA9IFwiQXVkaW9Tb3VyY2VUaW1lb3V0XCI7XG4gICAgUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1JlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tcIkF1dGhUb2tlbkZldGNoRXJyb3JcIl0gPSAzXSA9IFwiQXV0aFRva2VuRmV0Y2hFcnJvclwiO1xuICAgIFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbXCJBdXRoVG9rZW5GZXRjaFRpbWVvdXRcIl0gPSA0XSA9IFwiQXV0aFRva2VuRmV0Y2hUaW1lb3V0XCI7XG4gICAgUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1JlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tcIlVuQXV0aG9yaXplZFwiXSA9IDVdID0gXCJVbkF1dGhvcml6ZWRcIjtcbiAgICBSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1wiQ29ubmVjdFRpbWVvdXRcIl0gPSA2XSA9IFwiQ29ubmVjdFRpbWVvdXRcIjtcbiAgICBSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbUmVjb2duaXRpb25Db21wbGV0aW9uU3RhdHVzW1wiQ29ubmVjdEVycm9yXCJdID0gN10gPSBcIkNvbm5lY3RFcnJvclwiO1xuICAgIFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbXCJDbGllbnRSZWNvZ25pdGlvbkFjdGl2aXR5VGltZW91dFwiXSA9IDhdID0gXCJDbGllbnRSZWNvZ25pdGlvbkFjdGl2aXR5VGltZW91dFwiO1xuICAgIFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1c1tSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXNbXCJVbmtub3duRXJyb3JcIl0gPSA5XSA9IFwiVW5rbm93bkVycm9yXCI7XG59KShSZWNvZ25pdGlvbkNvbXBsZXRpb25TdGF0dXMgfHwgKFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1cyA9IHt9KSk7XG5leHBvcnQgY2xhc3MgUmVjb2duaXRpb25FbmRlZEV2ZW50IGV4dGVuZHMgU3BlZWNoUmVjb2duaXRpb25FdmVudCB7XG4gICAgY29uc3RydWN0b3IocmVxdWVzdElkLCBhdWRpb1NvdXJjZUlkLCBhdWRpb05vZGVJZCwgYXV0aEZldGNoRXZlbnRJZCwgc2Vzc2lvbklkLCBzZXJ2aWNlVGFnLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgIHN1cGVyKFwiUmVjb2duaXRpb25FbmRlZEV2ZW50XCIsIHJlcXVlc3RJZCwgc2Vzc2lvbklkLCBzdGF0dXMgPT09IFJlY29nbml0aW9uQ29tcGxldGlvblN0YXR1cy5TdWNjZXNzID8gRXZlbnRUeXBlLkluZm8gOiBFdmVudFR5cGUuRXJyb3IpO1xuICAgICAgICB0aGlzLnByaXZBdWRpb1NvdXJjZUlkID0gYXVkaW9Tb3VyY2VJZDtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlSWQgPSBhdWRpb05vZGVJZDtcbiAgICAgICAgdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCA9IGF1dGhGZXRjaEV2ZW50SWQ7XG4gICAgICAgIHRoaXMucHJpdlN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgdGhpcy5wcml2RXJyb3IgPSBlcnJvcjtcbiAgICAgICAgdGhpcy5wcml2U2VydmljZVRhZyA9IHNlcnZpY2VUYWc7XG4gICAgfVxuICAgIGdldCBhdWRpb1NvdXJjZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Tb3VyY2VJZDtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvTm9kZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Ob2RlSWQ7XG4gICAgfVxuICAgIGdldCBhdXRoRmV0Y2hFdmVudElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZDtcbiAgICB9XG4gICAgZ2V0IHNlcnZpY2VUYWcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTZXJ2aWNlVGFnO1xuICAgIH1cbiAgICBnZXQgc3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3RhdHVzO1xuICAgIH1cbiAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvcjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlY29nbml0aW9uRXZlbnRzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtY2xhc3Nlcy1wZXItZmlsZSAqL1xuaW1wb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuZXhwb3J0IHZhciBSZWNvZ25pdGlvbk1vZGU7XG4oZnVuY3Rpb24gKFJlY29nbml0aW9uTW9kZSkge1xuICAgIFJlY29nbml0aW9uTW9kZVtSZWNvZ25pdGlvbk1vZGVbXCJJbnRlcmFjdGl2ZVwiXSA9IDBdID0gXCJJbnRlcmFjdGl2ZVwiO1xuICAgIFJlY29nbml0aW9uTW9kZVtSZWNvZ25pdGlvbk1vZGVbXCJDb252ZXJzYXRpb25cIl0gPSAxXSA9IFwiQ29udmVyc2F0aW9uXCI7XG4gICAgUmVjb2duaXRpb25Nb2RlW1JlY29nbml0aW9uTW9kZVtcIkRpY3RhdGlvblwiXSA9IDJdID0gXCJEaWN0YXRpb25cIjtcbn0pKFJlY29nbml0aW9uTW9kZSB8fCAoUmVjb2duaXRpb25Nb2RlID0ge30pKTtcbmV4cG9ydCB2YXIgU3BlZWNoUmVzdWx0Rm9ybWF0O1xuKGZ1bmN0aW9uIChTcGVlY2hSZXN1bHRGb3JtYXQpIHtcbiAgICBTcGVlY2hSZXN1bHRGb3JtYXRbU3BlZWNoUmVzdWx0Rm9ybWF0W1wiU2ltcGxlXCJdID0gMF0gPSBcIlNpbXBsZVwiO1xuICAgIFNwZWVjaFJlc3VsdEZvcm1hdFtTcGVlY2hSZXN1bHRGb3JtYXRbXCJEZXRhaWxlZFwiXSA9IDFdID0gXCJEZXRhaWxlZFwiO1xufSkoU3BlZWNoUmVzdWx0Rm9ybWF0IHx8IChTcGVlY2hSZXN1bHRGb3JtYXQgPSB7fSkpO1xuZXhwb3J0IGNsYXNzIFJlY29nbml6ZXJDb25maWcge1xuICAgIGNvbnN0cnVjdG9yKHNwZWVjaFNlcnZpY2VDb25maWcsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoU2VydmljZUNvbmZpZyA9IHNwZWVjaFNlcnZpY2VDb25maWcgPyBzcGVlY2hTZXJ2aWNlQ29uZmlnIDogbmV3IFNwZWVjaFNlcnZpY2VDb25maWcobmV3IENvbnRleHQobnVsbCkpO1xuICAgICAgICB0aGlzLnByaXZQYXJhbWV0ZXJzID0gcGFyYW1ldGVycztcbiAgICAgICAgdGhpcy5wcml2TWF4UmV0cnlDb3VudCA9IHBhcnNlSW50KHBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoXCJTUEVFQ0gtRXJyb3ItTWF4UmV0cnlDb3VudFwiLCBcIjRcIiksIDEwKTtcbiAgICAgICAgdGhpcy5wcml2TGFuZ3VhZ2VJZE1vZGUgPSBwYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fTGFuZ3VhZ2VJZE1vZGUsIHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIGdldCBwYXJhbWV0ZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFyYW1ldGVycztcbiAgICB9XG4gICAgZ2V0IHJlY29nbml0aW9uTW9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlY29nbml0aW9uTW9kZTtcbiAgICB9XG4gICAgc2V0IHJlY29nbml0aW9uTW9kZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZSZWNvZ25pdGlvbk1vZGUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5wcml2UmVjb2duaXRpb25BY3Rpdml0eVRpbWVvdXQgPSB2YWx1ZSA9PT0gUmVjb2duaXRpb25Nb2RlLkludGVyYWN0aXZlID8gODAwMCA6IDI1MDAwO1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hTZXJ2aWNlQ29uZmlnLlJlY29nbml0aW9uID0gUmVjb2duaXRpb25Nb2RlW3ZhbHVlXTtcbiAgICB9XG4gICAgZ2V0IFNwZWVjaFNlcnZpY2VDb25maWcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hTZXJ2aWNlQ29uZmlnO1xuICAgIH1cbiAgICBnZXQgcmVjb2duaXRpb25BY3Rpdml0eVRpbWVvdXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWNvZ25pdGlvbkFjdGl2aXR5VGltZW91dDtcbiAgICB9XG4gICAgZ2V0IGlzQ29udGludW91c1JlY29nbml0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVjb2duaXRpb25Nb2RlICE9PSBSZWNvZ25pdGlvbk1vZGUuSW50ZXJhY3RpdmU7XG4gICAgfVxuICAgIGdldCBsYW5ndWFnZUlkTW9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkxhbmd1YWdlSWRNb2RlO1xuICAgIH1cbiAgICBnZXQgYXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0F1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZXMsIHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIGdldCByZWNvZ25pdGlvbkVuZHBvaW50VmVyc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29nbml0aW9uRW5kcG9pbnRWZXJzaW9uLCB1bmRlZmluZWQpO1xuICAgIH1cbiAgICBnZXQgc291cmNlTGFuZ3VhZ2VNb2RlbHMoKSB7XG4gICAgICAgIGNvbnN0IG1vZGVscyA9IFtdO1xuICAgICAgICBsZXQgbW9kZWxzRXhpc3QgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuYXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxhbmd1YWdlIG9mIHRoaXMuYXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlcy5zcGxpdChcIixcIikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXN0b21Qcm9wZXJ0eSA9IGxhbmd1YWdlICsgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludElkLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9kZWxJZCA9IHRoaXMucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShjdXN0b21Qcm9wZXJ0eSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICBpZiAobW9kZWxJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVscy5wdXNoKHsgbGFuZ3VhZ2UsIGVuZHBvaW50OiBtb2RlbElkIH0pO1xuICAgICAgICAgICAgICAgICAgICBtb2RlbHNFeGlzdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtb2RlbHMucHVzaCh7IGxhbmd1YWdlLCBlbmRwb2ludDogXCJcIiB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1vZGVsc0V4aXN0ID8gbW9kZWxzIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBnZXQgbWF4UmV0cnlDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdk1heFJldHJ5Q291bnQ7XG4gICAgfVxufVxuLy8gVGhlIGNvbmZpZyBpcyBzZXJpYWxpemVkIGFuZCBzZW50IGFzIHRoZSBTcGVlY2guQ29uZmlnXG5leHBvcnQgY2xhc3MgU3BlZWNoU2VydmljZUNvbmZpZyB7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIH1cbiAgICBzZXJpYWxpemUoKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLCAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VtZW50ID0ge307XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrIGluIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgaykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50W2sgJiYgay5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIGsuc3Vic3RyaW5nKDEpXSA9IHZhbHVlW2tdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXBsYWNlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBDb250ZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0O1xuICAgIH1cbiAgICBnZXQgUmVjb2duaXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlY29nbml0aW9uO1xuICAgIH1cbiAgICBzZXQgUmVjb2duaXRpb24odmFsdWUpIHtcbiAgICAgICAgdGhpcy5yZWNvZ25pdGlvbiA9IHZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKG9zKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtID0gbmV3IFN5c3RlbSgpO1xuICAgICAgICB0aGlzLm9zID0gb3M7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFN5c3RlbSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIE5vdGU6IGJlbG93IHdpbGwgYmUgcGF0Y2hlZCBmb3Igb2ZmaWNpYWwgYnVpbGRzLlxuICAgICAgICBjb25zdCBTUEVFQ0hTREtfQ0xJRU5UU0RLX1ZFUlNJT04gPSBcIjEuMzAuMVwiO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlNwZWVjaFNES1wiO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBTUEVFQ0hTREtfQ0xJRU5UU0RLX1ZFUlNJT047XG4gICAgICAgIHRoaXMuYnVpbGQgPSBcIkphdmFTY3JpcHRcIjtcbiAgICAgICAgdGhpcy5sYW5nID0gXCJKYXZhU2NyaXB0XCI7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE9TIHtcbiAgICBjb25zdHJ1Y3RvcihwbGF0Zm9ybSwgbmFtZSwgdmVyc2lvbikge1xuICAgICAgICB0aGlzLnBsYXRmb3JtID0gcGxhdGZvcm07XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIERldmljZSB7XG4gICAgY29uc3RydWN0b3IobWFudWZhY3R1cmVyLCBtb2RlbCwgdmVyc2lvbikge1xuICAgICAgICB0aGlzLm1hbnVmYWN0dXJlciA9IG1hbnVmYWN0dXJlcjtcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgIH1cbn1cbmV4cG9ydCB2YXIgY29ubmVjdGl2aXR5O1xuKGZ1bmN0aW9uIChjb25uZWN0aXZpdHkpIHtcbiAgICBjb25uZWN0aXZpdHlbXCJCbHVldG9vdGhcIl0gPSBcIkJsdWV0b290aFwiO1xuICAgIGNvbm5lY3Rpdml0eVtcIldpcmVkXCJdID0gXCJXaXJlZFwiO1xuICAgIGNvbm5lY3Rpdml0eVtcIldpRmlcIl0gPSBcIldpRmlcIjtcbiAgICBjb25uZWN0aXZpdHlbXCJDZWxsdWxhclwiXSA9IFwiQ2VsbHVsYXJcIjtcbiAgICBjb25uZWN0aXZpdHlbXCJJbkJ1aWx0XCJdID0gXCJJbkJ1aWx0XCI7XG4gICAgY29ubmVjdGl2aXR5W1wiVW5rbm93blwiXSA9IFwiVW5rbm93blwiO1xufSkoY29ubmVjdGl2aXR5IHx8IChjb25uZWN0aXZpdHkgPSB7fSkpO1xuZXhwb3J0IHZhciB0eXBlO1xuKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgdHlwZVtcIlBob25lXCJdID0gXCJQaG9uZVwiO1xuICAgIHR5cGVbXCJTcGVha2VyXCJdID0gXCJTcGVha2VyXCI7XG4gICAgdHlwZVtcIkNhclwiXSA9IFwiQ2FyXCI7XG4gICAgdHlwZVtcIkhlYWRzZXRcIl0gPSBcIkhlYWRzZXRcIjtcbiAgICB0eXBlW1wiVGhlcm1vc3RhdFwiXSA9IFwiVGhlcm1vc3RhdFwiO1xuICAgIHR5cGVbXCJNaWNyb3Bob25lc1wiXSA9IFwiTWljcm9waG9uZXNcIjtcbiAgICB0eXBlW1wiRGVza3Bob25lXCJdID0gXCJEZXNrcGhvbmVcIjtcbiAgICB0eXBlW1wiUmVtb3RlQ29udHJvbFwiXSA9IFwiUmVtb3RlQ29udHJvbFwiO1xuICAgIHR5cGVbXCJVbmtub3duXCJdID0gXCJVbmtub3duXCI7XG4gICAgdHlwZVtcIkZpbGVcIl0gPSBcIkZpbGVcIjtcbiAgICB0eXBlW1wiU3RyZWFtXCJdID0gXCJTdHJlYW1cIjtcbn0pKHR5cGUgfHwgKHR5cGUgPSB7fSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWNvZ25pemVyQ29uZmlnLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IGNyZWF0ZU5vRGFzaEd1aWQsIERlZmVycmVkLCBFdmVudHMgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbm5lY3RpbmdUb1NlcnZpY2VFdmVudCwgTGlzdGVuaW5nU3RhcnRlZEV2ZW50LCBSZWNvZ25pdGlvblN0YXJ0ZWRFdmVudCwgUmVjb2duaXRpb25UcmlnZ2VyZWRFdmVudCwgfSBmcm9tIFwiLi9SZWNvZ25pdGlvbkV2ZW50c1wiO1xuaW1wb3J0IHsgU2VydmljZVRlbGVtZXRyeUxpc3RlbmVyIH0gZnJvbSBcIi4vU2VydmljZVRlbGVtZXRyeUxpc3RlbmVyLkludGVybmFsXCI7XG5leHBvcnQgY2xhc3MgUmVxdWVzdFNlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvU291cmNlSWQpIHtcbiAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZEZXRhY2hhYmxlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzLnByaXZJc0F1ZGlvTm9kZURldGFjaGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdklzUmVjb2duaXppbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2SXNTcGVlY2hFbmRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZUdXJuU3RhcnRBdWRpb09mZnNldCA9IDA7XG4gICAgICAgIHRoaXMucHJpdkxhc3RSZWNvT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5wcml2SHlwb3RoZXNpc1JlY2VpdmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkJ5dGVzU2VudCA9IDA7XG4gICAgICAgIHRoaXMucHJpdlJlY29nTnVtYmVyID0gMDtcbiAgICAgICAgdGhpcy5wcml2SW5UdXJuID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25BdHRlbXB0cyA9IDA7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvU291cmNlSWQgPSBhdWRpb1NvdXJjZUlkO1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0SWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvTm9kZUlkID0gY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZUdXJuRGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgLy8gV2UncmUgbm90IGluIGEgdHVybiwgc28gcmVzb2x2ZS5cbiAgICAgICAgdGhpcy5wcml2VHVybkRlZmVycmFsLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0IHNlc3Npb25JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNlc3Npb25JZDtcbiAgICB9XG4gICAgZ2V0IHJlcXVlc3RJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlcXVlc3RJZDtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvTm9kZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Ob2RlSWQ7XG4gICAgfVxuICAgIGdldCB0dXJuQ29tcGxldGlvblByb21pc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUdXJuRGVmZXJyYWwucHJvbWlzZTtcbiAgICB9XG4gICAgZ2V0IGlzU3BlZWNoRW5kZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc1NwZWVjaEVuZGVkO1xuICAgIH1cbiAgICBnZXQgaXNSZWNvZ25pemluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklzUmVjb2duaXppbmc7XG4gICAgfVxuICAgIGdldCBjdXJyZW50VHVybkF1ZGlvT2Zmc2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VHVyblN0YXJ0QXVkaW9PZmZzZXQ7XG4gICAgfVxuICAgIGdldCByZWNvZ051bWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlY29nTnVtYmVyO1xuICAgIH1cbiAgICBnZXQgbnVtQ29ubmVjdGlvbkF0dGVtcHRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbkF0dGVtcHRzO1xuICAgIH1cbiAgICAvLyBUaGUgbnVtYmVyIG9mIGJ5dGVzIHNlbnQgZm9yIHRoZSBjdXJyZW50IGNvbm5lY3Rpb24uXG4gICAgLy8gQ291bnRlciBpcyByZXNldCB0byAwIGVhY2ggdGltZSBhIGNvbm5lY3Rpb24gaXMgZXN0YWJsaXNoZWQuXG4gICAgZ2V0IGJ5dGVzU2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkJ5dGVzU2VudDtcbiAgICB9XG4gICAgbGlzdGVuRm9yU2VydmljZVRlbGVtZXRyeShldmVudFNvdXJjZSkge1xuICAgICAgICBpZiAoISF0aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkRldGFjaGFibGVzLnB1c2goZXZlbnRTb3VyY2UuYXR0YWNoTGlzdGVuZXIodGhpcy5wcml2U2VydmljZVRlbGVtZXRyeUxpc3RlbmVyKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhcnROZXdSZWNvZ25pdGlvbigpIHtcbiAgICAgICAgdGhpcy5wcml2SXNTcGVlY2hFbmRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZJc1JlY29nbml6aW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wcml2VHVyblN0YXJ0QXVkaW9PZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnByaXZMYXN0UmVjb09mZnNldCA9IDA7XG4gICAgICAgIHRoaXMucHJpdlJlY29nTnVtYmVyKys7XG4gICAgICAgIHRoaXMucHJpdlNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lciA9IG5ldyBTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIodGhpcy5wcml2UmVxdWVzdElkLCB0aGlzLnByaXZBdWRpb1NvdXJjZUlkLCB0aGlzLnByaXZBdWRpb05vZGVJZCk7XG4gICAgICAgIHRoaXMub25FdmVudChuZXcgUmVjb2duaXRpb25UcmlnZ2VyZWRFdmVudCh0aGlzLnJlcXVlc3RJZCwgdGhpcy5wcml2U2Vzc2lvbklkLCB0aGlzLnByaXZBdWRpb1NvdXJjZUlkLCB0aGlzLnByaXZBdWRpb05vZGVJZCkpO1xuICAgIH1cbiAgICBvbkF1ZGlvU291cmNlQXR0YWNoQ29tcGxldGVkKGF1ZGlvTm9kZSwgaXNFcnJvcikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlID0gYXVkaW9Ob2RlO1xuICAgICAgICAgICAgdGhpcy5wcml2SXNBdWRpb05vZGVEZXRhY2hlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGlzRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLm9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgTGlzdGVuaW5nU3RhcnRlZEV2ZW50KHRoaXMucHJpdlJlcXVlc3RJZCwgdGhpcy5wcml2U2Vzc2lvbklkLCB0aGlzLnByaXZBdWRpb1NvdXJjZUlkLCB0aGlzLnByaXZBdWRpb05vZGVJZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb25QcmVDb25uZWN0aW9uU3RhcnQoYXV0aEZldGNoRXZlbnRJZCwgY29ubmVjdGlvbklkKSB7XG4gICAgICAgIHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQgPSBhdXRoRmV0Y2hFdmVudElkO1xuICAgICAgICB0aGlzLnByaXZTZXNzaW9uSWQgPSBjb25uZWN0aW9uSWQ7XG4gICAgICAgIHRoaXMub25FdmVudChuZXcgQ29ubmVjdGluZ1RvU2VydmljZUV2ZW50KHRoaXMucHJpdlJlcXVlc3RJZCwgdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCwgdGhpcy5wcml2U2Vzc2lvbklkKSk7XG4gICAgfVxuICAgIG9uQXV0aENvbXBsZXRlZChpc0Vycm9yKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoaXNFcnJvcikge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMub25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgIG9uQ29ubmVjdGlvbkVzdGFibGlzaENvbXBsZXRlZChzdGF0dXNDb2RlLCByZWFzb24pIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXNDb2RlID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IFJlY29nbml0aW9uU3RhcnRlZEV2ZW50KHRoaXMucmVxdWVzdElkLCB0aGlzLnByaXZBdWRpb1NvdXJjZUlkLCB0aGlzLnByaXZBdWRpb05vZGVJZCwgdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCwgdGhpcy5wcml2U2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2QXVkaW9Ob2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkF1ZGlvTm9kZS5yZXBsYXkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2VHVyblN0YXJ0QXVkaW9PZmZzZXQgPSB0aGlzLnByaXZMYXN0UmVjb09mZnNldDtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZCeXRlc1NlbnQgPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHN0YXR1c0NvZGUgPT09IDQwMykge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMub25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb25TZXJ2aWNlVHVybkVuZFJlc3BvbnNlKGNvbnRpbnVvdXNSZWNvZ25pdGlvbikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdGhpcy5wcml2VHVybkRlZmVycmFsLnJlc29sdmUoKTtcbiAgICAgICAgICAgIGlmICghY29udGludW91c1JlY29nbml0aW9uIHx8IHRoaXMuaXNTcGVlY2hFbmRlZCkge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMub25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkluVHVybiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU3RhcnQgYSBuZXcgcmVxdWVzdCBzZXQuXG4gICAgICAgICAgICAgICAgdGhpcy5wcml2VHVyblN0YXJ0QXVkaW9PZmZzZXQgPSB0aGlzLnByaXZMYXN0UmVjb09mZnNldDtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZBdWRpb05vZGUucmVwbGF5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvblNwZWVjaENvbnRleHQoKSB7XG4gICAgICAgIHRoaXMucHJpdlJlcXVlc3RJZCA9IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICB9XG4gICAgb25TZXJ2aWNlVHVyblN0YXJ0UmVzcG9uc2UoKSB7XG4gICAgICAgIGlmICghIXRoaXMucHJpdlR1cm5EZWZlcnJhbCAmJiAhIXRoaXMucHJpdkluVHVybikge1xuICAgICAgICAgICAgLy8gV2hhdD8gSG93IGFyZSB3ZSBzdGFydGluZyBhIHR1cm4gd2l0aCBhbm90aGVyIG5vdCBkb25lP1xuICAgICAgICAgICAgdGhpcy5wcml2VHVybkRlZmVycmFsLnJlamVjdChcIkFub3RoZXIgdHVybiBzdGFydGVkIGJlZm9yZSBjdXJyZW50IGNvbXBsZXRlZC5cIik7XG4gICAgICAgICAgICAvLyBBdm9pZCBVbmhhbmRsZWRQcm9taXNlUmVqZWN0aW9uIGlmIHByaXZUdXJuRGVmZXJyYWwgaXMgbm90IGJlaW5nIGF3YWl0ZWRcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgICAgICAgICAgIHRoaXMucHJpdlR1cm5EZWZlcnJhbC5wcm9taXNlLnRoZW4oKS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdkluVHVybiA9IHRydWU7XG4gICAgICAgIHRoaXMucHJpdlR1cm5EZWZlcnJhbCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgIH1cbiAgICBvbkh5cG90aGVzaXMob2Zmc2V0KSB7XG4gICAgICAgIGlmICghdGhpcy5wcml2SHlwb3RoZXNpc1JlY2VpdmVkKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZIeXBvdGhlc2lzUmVjZWl2ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wcml2U2VydmljZVRlbGVtZXRyeUxpc3RlbmVyLmh5cG90aGVzaXNSZWNlaXZlZCh0aGlzLnByaXZBdWRpb05vZGUuZmluZFRpbWVBdE9mZnNldChvZmZzZXQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvblBocmFzZVJlY29nbml6ZWQob2Zmc2V0KSB7XG4gICAgICAgIHRoaXMucHJpdlNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lci5waHJhc2VSZWNlaXZlZCh0aGlzLnByaXZBdWRpb05vZGUuZmluZFRpbWVBdE9mZnNldChvZmZzZXQpKTtcbiAgICAgICAgdGhpcy5vblNlcnZpY2VSZWNvZ25pemVkKG9mZnNldCk7XG4gICAgfVxuICAgIG9uU2VydmljZVJlY29nbml6ZWQob2Zmc2V0KSB7XG4gICAgICAgIHRoaXMucHJpdkxhc3RSZWNvT2Zmc2V0ID0gb2Zmc2V0O1xuICAgICAgICB0aGlzLnByaXZIeXBvdGhlc2lzUmVjZWl2ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlLnNocmlua0J1ZmZlcnMob2Zmc2V0KTtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkF0dGVtcHRzID0gMDtcbiAgICB9XG4gICAgb25BdWRpb1NlbnQoYnl0ZXNTZW50KSB7XG4gICAgICAgIHRoaXMucHJpdkJ5dGVzU2VudCArPSBieXRlc1NlbnQ7XG4gICAgfVxuICAgIG9uUmV0cnlDb25uZWN0aW9uKCkge1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uQXR0ZW1wdHMrKztcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wcml2SXNEaXNwb3NlZCkge1xuICAgICAgICAgICAgICAgIC8vIHdlIHNob3VsZCBoYXZlIGNvbXBsZXRlZCBieSBub3cuIElmIHdlIGRpZCBub3QgaXRzIGFuIHVua25vd24gZXJyb3IuXG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBkZXRhY2hhYmxlIG9mIHRoaXMucHJpdkRldGFjaGFibGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGRldGFjaGFibGUuZGV0YWNoKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlNlcnZpY2VUZWxlbWV0cnlMaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZJc1JlY29nbml6aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRUZWxlbWV0cnkoKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIuaGFzVGVsZW1ldHJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2U2VydmljZVRlbGVtZXRyeUxpc3RlbmVyLmdldFRlbGVtZXRyeSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25TdG9wUmVjb2duaXppbmcoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLm9uQ29tcGxldGUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIFNob3VsZCBiZSBjYWxsZWQgd2l0aCB0aGUgYXVkaW9Ob2RlIGZvciB0aGlzIHNlc3Npb24gaGFzIGluZGljYXRlZCB0aGF0IGl0IGlzIG91dCBvZiBzcGVlY2guXG4gICAgb25TcGVlY2hFbmRlZCgpIHtcbiAgICAgICAgdGhpcy5wcml2SXNTcGVlY2hFbmRlZCA9IHRydWU7XG4gICAgfVxuICAgIG9uRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2U2VydmljZVRlbGVtZXRyeUxpc3RlbmVyKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZTZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIub25FdmVudChldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgRXZlbnRzLmluc3RhbmNlLm9uRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgICBvbkNvbXBsZXRlKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2SXNSZWNvZ25pemluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdklzUmVjb2duaXppbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmRldGFjaEF1ZGlvTm9kZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGV0YWNoQXVkaW9Ob2RlKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZJc0F1ZGlvTm9kZURldGFjaGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNBdWRpb05vZGVEZXRhY2hlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdkF1ZGlvTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZBdWRpb05vZGUuZGV0YWNoKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlcXVlc3RTZXNzaW9uLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vLyByZXNwb25zZVxuZXhwb3J0IGNsYXNzIEFjdGl2aXR5UGF5bG9hZFJlc3BvbnNlIHtcbiAgICBjb25zdHJ1Y3Rvcihqc29uKSB7XG4gICAgICAgIHRoaXMucHJpdkFjdGl2aXR5UmVzcG9uc2UgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICByZXR1cm4gbmV3IEFjdGl2aXR5UGF5bG9hZFJlc3BvbnNlKGpzb24pO1xuICAgIH1cbiAgICBnZXQgY29udmVyc2F0aW9uSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBY3Rpdml0eVJlc3BvbnNlLmNvbnZlcnNhdGlvbklkO1xuICAgIH1cbiAgICBnZXQgbWVzc2FnZURhdGFTdHJlYW1UeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QWN0aXZpdHlSZXNwb25zZS5tZXNzYWdlRGF0YVN0cmVhbVR5cGU7XG4gICAgfVxuICAgIGdldCBtZXNzYWdlUGF5bG9hZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkFjdGl2aXR5UmVzcG9uc2UubWVzc2FnZVBheWxvYWQ7XG4gICAgfVxuICAgIGdldCB2ZXJzaW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QWN0aXZpdHlSZXNwb25zZS52ZXJzaW9uO1xuICAgIH1cbn1cbmV4cG9ydCB2YXIgTWVzc2FnZURhdGFTdHJlYW1UeXBlO1xuKGZ1bmN0aW9uIChNZXNzYWdlRGF0YVN0cmVhbVR5cGUpIHtcbiAgICBNZXNzYWdlRGF0YVN0cmVhbVR5cGVbTWVzc2FnZURhdGFTdHJlYW1UeXBlW1wiTm9uZVwiXSA9IDBdID0gXCJOb25lXCI7XG4gICAgTWVzc2FnZURhdGFTdHJlYW1UeXBlW01lc3NhZ2VEYXRhU3RyZWFtVHlwZVtcIlRleHRUb1NwZWVjaEF1ZGlvXCJdID0gMV0gPSBcIlRleHRUb1NwZWVjaEF1ZGlvXCI7XG59KShNZXNzYWdlRGF0YVN0cmVhbVR5cGUgfHwgKE1lc3NhZ2VEYXRhU3RyZWFtVHlwZSA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFjdGl2aXR5UmVzcG9uc2VQYXlsb2FkLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBSZWNvZ25pdGlvblN0YXR1cyB9IGZyb20gXCIuLi9FeHBvcnRzXCI7XG5leHBvcnQgY2xhc3MgRGV0YWlsZWRTcGVlY2hQaHJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKGpzb24pIHtcbiAgICAgICAgdGhpcy5wcml2RGV0YWlsZWRTcGVlY2hQaHJhc2UgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgICAgICB0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZS5SZWNvZ25pdGlvblN0YXR1cyA9IFJlY29nbml0aW9uU3RhdHVzW3RoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzXTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEZXRhaWxlZFNwZWVjaFBocmFzZShqc29uKTtcbiAgICB9XG4gICAgZ2V0SnNvbldpdGhDb3JyZWN0ZWRPZmZzZXRzKGJhc2VPZmZzZXQpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2RGV0YWlsZWRTcGVlY2hQaHJhc2UuTkJlc3QpIHtcbiAgICAgICAgICAgIGxldCBmaXJzdFdvcmRPZmZzZXQ7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBocmFzZSBvZiB0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZS5OQmVzdCkge1xuICAgICAgICAgICAgICAgIGlmICghIXBocmFzZS5Xb3JkcyAmJiAhIXBocmFzZS5Xb3Jkc1swXSkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdFdvcmRPZmZzZXQgPSBwaHJhc2UuV29yZHNbMF0uT2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoISFmaXJzdFdvcmRPZmZzZXQgJiYgZmlyc3RXb3JkT2Zmc2V0IDwgYmFzZU9mZnNldCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGJhc2VPZmZzZXQgLSBmaXJzdFdvcmRPZmZzZXQ7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBkZXRhaWxzIG9mIHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlLk5CZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIWRldGFpbHMuV29yZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiBkZXRhaWxzLldvcmRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZC5PZmZzZXQgKz0gb2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghIWRldGFpbHMuRGlzcGxheVdvcmRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2YgZGV0YWlscy5EaXNwbGF5V29yZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JkLk9mZnNldCArPSBvZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlKTtcbiAgICB9XG4gICAgZ2V0IFJlY29nbml0aW9uU3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RGV0YWlsZWRTcGVlY2hQaHJhc2UuUmVjb2duaXRpb25TdGF0dXM7XG4gICAgfVxuICAgIGdldCBOQmVzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlLk5CZXN0O1xuICAgIH1cbiAgICBnZXQgRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZS5EdXJhdGlvbjtcbiAgICB9XG4gICAgZ2V0IE9mZnNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlLk9mZnNldDtcbiAgICB9XG4gICAgZ2V0IExhbmd1YWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RGV0YWlsZWRTcGVlY2hQaHJhc2UuUHJpbWFyeUxhbmd1YWdlID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiB0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZS5QcmltYXJ5TGFuZ3VhZ2UuTGFuZ3VhZ2U7XG4gICAgfVxuICAgIGdldCBMYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZS5QcmltYXJ5TGFuZ3VhZ2UgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlLlByaW1hcnlMYW5ndWFnZS5Db25maWRlbmNlO1xuICAgIH1cbiAgICBnZXQgVGV4dCgpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2RGV0YWlsZWRTcGVlY2hQaHJhc2UuTkJlc3QgJiYgdGhpcy5wcml2RGV0YWlsZWRTcGVlY2hQaHJhc2UuTkJlc3RbMF0pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZS5OQmVzdFswXS5EaXNwbGF5IHx8IHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlLk5CZXN0WzBdLkRpc3BsYXlUZXh0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEZXRhaWxlZFNwZWVjaFBocmFzZS5EaXNwbGF5VGV4dDtcbiAgICB9XG4gICAgZ2V0IFNwZWFrZXJJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkRldGFpbGVkU3BlZWNoUGhyYXNlLlNwZWFrZXJJZDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURldGFpbGVkU3BlZWNoUGhyYXNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIEBjbGFzcyBTeW50aGVzaXNTdGF0dXNcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCB2YXIgU3ludGhlc2lzU3RhdHVzO1xuKGZ1bmN0aW9uIChTeW50aGVzaXNTdGF0dXMpIHtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVzcG9uc2UgY29udGFpbnMgdmFsaWQgYXVkaW8gZGF0YS5cbiAgICAgKiBAbWVtYmVyIFN5bnRoZXNpc1N0YXR1cy5TdWNjZXNzXG4gICAgICovXG4gICAgU3ludGhlc2lzU3RhdHVzW1N5bnRoZXNpc1N0YXR1c1tcIlN1Y2Nlc3NcIl0gPSAwXSA9IFwiU3VjY2Vzc1wiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgZW5kIG9mIGF1ZGlvIGRhdGEuIE5vIHZhbGlkIGF1ZGlvIGRhdGEgaXMgaW5jbHVkZWQgaW4gdGhlIG1lc3NhZ2UuXG4gICAgICogQG1lbWJlciBTeW50aGVzaXNTdGF0dXMuU3ludGhlc2lzRW5kXG4gICAgICovXG4gICAgU3ludGhlc2lzU3RhdHVzW1N5bnRoZXNpc1N0YXR1c1tcIlN5bnRoZXNpc0VuZFwiXSA9IDFdID0gXCJTeW50aGVzaXNFbmRcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgYW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHN5bnRoZXNpcyBkYXRhIHByb2Nlc3NpbmcuXG4gICAgICogQG1lbWJlciBTeW50aGVzaXNTdGF0dXMuRXJyb3JcbiAgICAgKi9cbiAgICBTeW50aGVzaXNTdGF0dXNbU3ludGhlc2lzU3RhdHVzW1wiRXJyb3JcIl0gPSAyXSA9IFwiRXJyb3JcIjtcbn0pKFN5bnRoZXNpc1N0YXR1cyB8fCAoU3ludGhlc2lzU3RhdHVzID0ge30pKTtcbmV4cG9ydCB2YXIgUmVjb2duaXRpb25TdGF0dXM7XG4oZnVuY3Rpb24gKFJlY29nbml0aW9uU3RhdHVzKSB7XG4gICAgUmVjb2duaXRpb25TdGF0dXNbUmVjb2duaXRpb25TdGF0dXNbXCJTdWNjZXNzXCJdID0gMF0gPSBcIlN1Y2Nlc3NcIjtcbiAgICBSZWNvZ25pdGlvblN0YXR1c1tSZWNvZ25pdGlvblN0YXR1c1tcIk5vTWF0Y2hcIl0gPSAxXSA9IFwiTm9NYXRjaFwiO1xuICAgIFJlY29nbml0aW9uU3RhdHVzW1JlY29nbml0aW9uU3RhdHVzW1wiSW5pdGlhbFNpbGVuY2VUaW1lb3V0XCJdID0gMl0gPSBcIkluaXRpYWxTaWxlbmNlVGltZW91dFwiO1xuICAgIFJlY29nbml0aW9uU3RhdHVzW1JlY29nbml0aW9uU3RhdHVzW1wiQmFiYmxlVGltZW91dFwiXSA9IDNdID0gXCJCYWJibGVUaW1lb3V0XCI7XG4gICAgUmVjb2duaXRpb25TdGF0dXNbUmVjb2duaXRpb25TdGF0dXNbXCJFcnJvclwiXSA9IDRdID0gXCJFcnJvclwiO1xuICAgIFJlY29nbml0aW9uU3RhdHVzW1JlY29nbml0aW9uU3RhdHVzW1wiRW5kT2ZEaWN0YXRpb25cIl0gPSA1XSA9IFwiRW5kT2ZEaWN0YXRpb25cIjtcbiAgICBSZWNvZ25pdGlvblN0YXR1c1tSZWNvZ25pdGlvblN0YXR1c1tcIlRvb01hbnlSZXF1ZXN0c1wiXSA9IDZdID0gXCJUb29NYW55UmVxdWVzdHNcIjtcbiAgICBSZWNvZ25pdGlvblN0YXR1c1tSZWNvZ25pdGlvblN0YXR1c1tcIkJhZFJlcXVlc3RcIl0gPSA3XSA9IFwiQmFkUmVxdWVzdFwiO1xuICAgIFJlY29nbml0aW9uU3RhdHVzW1JlY29nbml0aW9uU3RhdHVzW1wiRm9yYmlkZGVuXCJdID0gOF0gPSBcIkZvcmJpZGRlblwiO1xufSkoUmVjb2duaXRpb25TdGF0dXMgfHwgKFJlY29nbml0aW9uU3RhdHVzID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RW51bXMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8vIHJlc3BvbnNlXG5leHBvcnQgY2xhc3MgSW50ZW50UmVzcG9uc2Uge1xuICAgIGNvbnN0cnVjdG9yKGpzb24pIHtcbiAgICAgICAgaWYgKGpzb24gPT09IFwiXCIpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkludGVudFJlc3BvbnNlID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnByaXZJbnRlbnRSZXNwb25zZSA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbnRlbnRSZXNwb25zZShqc29uKTtcbiAgICB9XG4gICAgZ2V0IHF1ZXJ5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SW50ZW50UmVzcG9uc2UucXVlcnk7XG4gICAgfVxuICAgIGdldCB0b3BTY29yaW5nSW50ZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SW50ZW50UmVzcG9uc2UudG9wU2NvcmluZ0ludGVudDtcbiAgICB9XG4gICAgZ2V0IGVudGl0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SW50ZW50UmVzcG9uc2UuZW50aXRpZXM7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlbnRSZXNwb25zZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUmVjb2duaXRpb25TdGF0dXMgfSBmcm9tIFwiLi4vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIFNpbXBsZVNwZWVjaFBocmFzZSB7XG4gICAgY29uc3RydWN0b3IoanNvbikge1xuICAgICAgICB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgICAgICB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UuUmVjb2duaXRpb25TdGF0dXMgPSBSZWNvZ25pdGlvblN0YXR1c1t0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UuUmVjb2duaXRpb25TdGF0dXNdO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICByZXR1cm4gbmV3IFNpbXBsZVNwZWVjaFBocmFzZShqc29uKTtcbiAgICB9XG4gICAgZ2V0IFJlY29nbml0aW9uU3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U2ltcGxlU3BlZWNoUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzO1xuICAgIH1cbiAgICBnZXQgRGlzcGxheVRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UuRGlzcGxheVRleHQ7XG4gICAgfVxuICAgIGdldCBPZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UuT2Zmc2V0O1xuICAgIH1cbiAgICBnZXQgRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UuRHVyYXRpb247XG4gICAgfVxuICAgIGdldCBMYW5ndWFnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNpbXBsZVNwZWVjaFBocmFzZS5QcmltYXJ5TGFuZ3VhZ2UgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHRoaXMucHJpdlNpbXBsZVNwZWVjaFBocmFzZS5QcmltYXJ5TGFuZ3VhZ2UuTGFuZ3VhZ2U7XG4gICAgfVxuICAgIGdldCBMYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UuUHJpbWFyeUxhbmd1YWdlID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UuUHJpbWFyeUxhbmd1YWdlLkNvbmZpZGVuY2U7XG4gICAgfVxuICAgIGdldCBTcGVha2VySWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTaW1wbGVTcGVlY2hQaHJhc2UuU3BlYWtlcklkO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U2ltcGxlU3BlZWNoUGhyYXNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtY2xhc3Nlcy1wZXItZmlsZSAqL1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVha2VyUmVzcG9uc2UuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmV4cG9ydCBjbGFzcyBTcGVlY2hEZXRlY3RlZCB7XG4gICAgY29uc3RydWN0b3IoanNvbikge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hTdGFydERldGVjdGVkID0gSlNPTi5wYXJzZShqc29uKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTcGVlY2hEZXRlY3RlZChqc29uKTtcbiAgICB9XG4gICAgZ2V0IE9mZnNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFN0YXJ0RGV0ZWN0ZWQuT2Zmc2V0O1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoRGV0ZWN0ZWQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmV4cG9ydCBjbGFzcyBTcGVlY2hIeXBvdGhlc2lzIHtcbiAgICBjb25zdHJ1Y3Rvcihqc29uKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaEh5cG90aGVzaXMgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICByZXR1cm4gbmV3IFNwZWVjaEh5cG90aGVzaXMoanNvbik7XG4gICAgfVxuICAgIGdldCBUZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoSHlwb3RoZXNpcy5UZXh0O1xuICAgIH1cbiAgICBnZXQgT2Zmc2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoSHlwb3RoZXNpcy5PZmZzZXQ7XG4gICAgfVxuICAgIGdldCBEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaEh5cG90aGVzaXMuRHVyYXRpb247XG4gICAgfVxuICAgIGdldCBMYW5ndWFnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaEh5cG90aGVzaXMuUHJpbWFyeUxhbmd1YWdlID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiB0aGlzLnByaXZTcGVlY2hIeXBvdGhlc2lzLlByaW1hcnlMYW5ndWFnZS5MYW5ndWFnZTtcbiAgICB9XG4gICAgZ2V0IExhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaEh5cG90aGVzaXMuUHJpbWFyeUxhbmd1YWdlID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiB0aGlzLnByaXZTcGVlY2hIeXBvdGhlc2lzLlByaW1hcnlMYW5ndWFnZS5Db25maWRlbmNlO1xuICAgIH1cbiAgICBnZXQgU3BlYWtlcklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoSHlwb3RoZXNpcy5TcGVha2VySWQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hIeXBvdGhlc2lzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgY2xhc3MgU3BlZWNoS2V5d29yZCB7XG4gICAgY29uc3RydWN0b3IoanNvbikge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hLZXl3b3JkID0gSlNPTi5wYXJzZShqc29uKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTcGVlY2hLZXl3b3JkKGpzb24pO1xuICAgIH1cbiAgICBnZXQgU3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoS2V5d29yZC5TdGF0dXM7XG4gICAgfVxuICAgIGdldCBUZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoS2V5d29yZC5UZXh0O1xuICAgIH1cbiAgICBnZXQgT2Zmc2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoS2V5d29yZC5PZmZzZXQ7XG4gICAgfVxuICAgIGdldCBEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaEtleXdvcmQuRHVyYXRpb247XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hLZXl3b3JkLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgdmFyIE1ldGFkYXRhVHlwZTtcbihmdW5jdGlvbiAoTWV0YWRhdGFUeXBlKSB7XG4gICAgTWV0YWRhdGFUeXBlW1wiV29yZEJvdW5kYXJ5XCJdID0gXCJXb3JkQm91bmRhcnlcIjtcbiAgICBNZXRhZGF0YVR5cGVbXCJCb29rbWFya1wiXSA9IFwiQm9va21hcmtcIjtcbiAgICBNZXRhZGF0YVR5cGVbXCJWaXNlbWVcIl0gPSBcIlZpc2VtZVwiO1xuICAgIE1ldGFkYXRhVHlwZVtcIlNlbnRlbmNlQm91bmRhcnlcIl0gPSBcIlNlbnRlbmNlQm91bmRhcnlcIjtcbiAgICBNZXRhZGF0YVR5cGVbXCJTZXNzaW9uRW5kXCJdID0gXCJTZXNzaW9uRW5kXCI7XG59KShNZXRhZGF0YVR5cGUgfHwgKE1ldGFkYXRhVHlwZSA9IHt9KSk7XG5leHBvcnQgY2xhc3MgU3ludGhlc2lzQXVkaW9NZXRhZGF0YSB7XG4gICAgY29uc3RydWN0b3IoanNvbikge1xuICAgICAgICB0aGlzLnByaXZTeW50aGVzaXNBdWRpb01ldGFkYXRhID0gSlNPTi5wYXJzZShqc29uKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTeW50aGVzaXNBdWRpb01ldGFkYXRhKGpzb24pO1xuICAgIH1cbiAgICBnZXQgTWV0YWRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTeW50aGVzaXNBdWRpb01ldGFkYXRhLk1ldGFkYXRhO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ludGhlc2lzQXVkaW9NZXRhZGF0YS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgVHJhbnNsYXRpb25TdGF0dXMgfSBmcm9tIFwiLi4vVHJhbnNsYXRpb25TdGF0dXNcIjtcbmV4cG9ydCBjbGFzcyBUcmFuc2xhdGlvbkh5cG90aGVzaXMge1xuICAgIGNvbnN0cnVjdG9yKGpzb24pIHtcbiAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25IeXBvdGhlc2lzID0gSlNPTi5wYXJzZShqc29uKTtcbiAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25IeXBvdGhlc2lzLlRyYW5zbGF0aW9uLlRyYW5zbGF0aW9uU3RhdHVzID0gVHJhbnNsYXRpb25TdGF0dXNbdGhpcy5wcml2VHJhbnNsYXRpb25IeXBvdGhlc2lzLlRyYW5zbGF0aW9uLlRyYW5zbGF0aW9uU3RhdHVzXTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2xhdGlvbkh5cG90aGVzaXMoanNvbik7XG4gICAgfVxuICAgIGdldCBEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9uSHlwb3RoZXNpcy5EdXJhdGlvbjtcbiAgICB9XG4gICAgZ2V0IE9mZnNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9uSHlwb3RoZXNpcy5PZmZzZXQ7XG4gICAgfVxuICAgIGdldCBUZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VHJhbnNsYXRpb25IeXBvdGhlc2lzLlRleHQ7XG4gICAgfVxuICAgIGdldCBUcmFuc2xhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9uSHlwb3RoZXNpcy5UcmFuc2xhdGlvbjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9uSHlwb3RoZXNpcy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4uLy4uL3Nkay9Db250cmFjdHNcIjtcbmltcG9ydCB7IFJlY29nbml0aW9uU3RhdHVzIH0gZnJvbSBcIi4uL0V4cG9ydHNcIjtcbmltcG9ydCB7IFRyYW5zbGF0aW9uU3RhdHVzIH0gZnJvbSBcIi4uL1RyYW5zbGF0aW9uU3RhdHVzXCI7XG5leHBvcnQgY2xhc3MgVHJhbnNsYXRpb25QaHJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKHBocmFzZSkge1xuICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZSA9IHBocmFzZTtcbiAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25QaHJhc2UuUmVjb2duaXRpb25TdGF0dXMgPSBSZWNvZ25pdGlvblN0YXR1c1t0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5SZWNvZ25pdGlvblN0YXR1c107XG4gICAgICAgIGlmICh0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5UcmFuc2xhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5UcmFuc2xhdGlvbi5UcmFuc2xhdGlvblN0YXR1cyA9IFRyYW5zbGF0aW9uU3RhdHVzW3RoaXMucHJpdlRyYW5zbGF0aW9uUGhyYXNlLlRyYW5zbGF0aW9uLlRyYW5zbGF0aW9uU3RhdHVzXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICByZXR1cm4gbmV3IFRyYW5zbGF0aW9uUGhyYXNlKEpTT04ucGFyc2UoanNvbikpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVRyYW5zbGF0aW9uUmVzcG9uc2UodHJhbnNsYXRpb25SZXNwb25zZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZCh0cmFuc2xhdGlvblJlc3BvbnNlLCBcInRyYW5zbGF0aW9uUmVzcG9uc2VcIik7XG4gICAgICAgIGNvbnN0IHBocmFzZSA9IHRyYW5zbGF0aW9uUmVzcG9uc2UuU3BlZWNoUGhyYXNlO1xuICAgICAgICB0cmFuc2xhdGlvblJlc3BvbnNlLlNwZWVjaFBocmFzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgcGhyYXNlLlRyYW5zbGF0aW9uID0gdHJhbnNsYXRpb25SZXNwb25zZTtcbiAgICAgICAgcGhyYXNlLlRleHQgPSBwaHJhc2UuRGlzcGxheVRleHQ7XG4gICAgICAgIHJldHVybiBuZXcgVHJhbnNsYXRpb25QaHJhc2UocGhyYXNlKTtcbiAgICB9XG4gICAgZ2V0IFJlY29nbml0aW9uU3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VHJhbnNsYXRpb25QaHJhc2UuUmVjb2duaXRpb25TdGF0dXM7XG4gICAgfVxuICAgIGdldCBPZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5PZmZzZXQ7XG4gICAgfVxuICAgIGdldCBEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9uUGhyYXNlLkR1cmF0aW9uO1xuICAgIH1cbiAgICBnZXQgVGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRyYW5zbGF0aW9uUGhyYXNlLlRleHQ7XG4gICAgfVxuICAgIGdldCBMYW5ndWFnZSgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5wcml2VHJhbnNsYXRpb25QaHJhc2UuUHJpbWFyeUxhbmd1YWdlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuTGFuZ3VhZ2U7XG4gICAgfVxuICAgIGdldCBDb25maWRlbmNlKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiAoX2EgPSB0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5QcmltYXJ5TGFuZ3VhZ2UpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5Db25maWRlbmNlO1xuICAgIH1cbiAgICBnZXQgVHJhbnNsYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUcmFuc2xhdGlvblBocmFzZS5UcmFuc2xhdGlvbjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9uUGhyYXNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBTeW50aGVzaXNTdGF0dXMgfSBmcm9tIFwiLi4vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIFRyYW5zbGF0aW9uU3ludGhlc2lzRW5kIHtcbiAgICBjb25zdHJ1Y3Rvcihqc29uKSB7XG4gICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc0VuZCA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgICAgIGlmICghIXRoaXMucHJpdlN5bnRoZXNpc0VuZC5TeW50aGVzaXNTdGF0dXMpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc0VuZC5TeW50aGVzaXNTdGF0dXMgPSBTeW50aGVzaXNTdGF0dXNbdGhpcy5wcml2U3ludGhlc2lzRW5kLlN5bnRoZXNpc1N0YXR1c107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhdGhpcy5wcml2U3ludGhlc2lzRW5kLlN0YXR1cykge1xuICAgICAgICAgICAgdGhpcy5wcml2U3ludGhlc2lzRW5kLlN5bnRoZXNpc1N0YXR1cyA9IFN5bnRoZXNpc1N0YXR1c1t0aGlzLnByaXZTeW50aGVzaXNFbmQuU3RhdHVzXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICByZXR1cm4gbmV3IFRyYW5zbGF0aW9uU3ludGhlc2lzRW5kKGpzb24pO1xuICAgIH1cbiAgICBnZXQgU3ludGhlc2lzU3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3ludGhlc2lzRW5kLlN5bnRoZXNpc1N0YXR1cztcbiAgICB9XG4gICAgZ2V0IEZhaWx1cmVSZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTeW50aGVzaXNFbmQuRmFpbHVyZVJlYXNvbjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9uU3ludGhlc2lzRW5kLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgY2xhc3MgVHVyblN0YXR1c1Jlc3BvbnNlUGF5bG9hZCB7XG4gICAgY29uc3RydWN0b3IoanNvbikge1xuICAgICAgICB0aGlzLnByaXZNZXNzYWdlU3RhdHVzUmVzcG9uc2UgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICByZXR1cm4gbmV3IFR1cm5TdGF0dXNSZXNwb25zZVBheWxvYWQoanNvbik7XG4gICAgfVxuICAgIGdldCBpbnRlcmFjdGlvbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TWVzc2FnZVN0YXR1c1Jlc3BvbnNlLmludGVyYWN0aW9uSWQ7XG4gICAgfVxuICAgIGdldCBjb252ZXJzYXRpb25JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdk1lc3NhZ2VTdGF0dXNSZXNwb25zZS5jb252ZXJzYXRpb25JZDtcbiAgICB9XG4gICAgZ2V0IHN0YXR1c0NvZGUoKSB7XG4gICAgICAgIC8vIFBheWxvYWRzIG1heSBjb250YWluIGEgbGltaXRlZCBzZXQgb2YgdGV4dHVhbCByZXByZXNlbnRhdGlvbnMgb3IgYSBudW1lcmljIHN0YXR1c1xuICAgICAgICAvLyBjb2RlLiBUaGUgdGV4dHVhbCB2YWx1ZXMgYXJlIGhlcmUgY29udmVydGVkIGludG8gbnVtZXJpYyBvbmVzLlxuICAgICAgICBzd2l0Y2ggKHRoaXMucHJpdk1lc3NhZ2VTdGF0dXNSZXNwb25zZS5zdGF0dXNDb2RlKSB7XG4gICAgICAgICAgICBjYXNlIFwiU3VjY2Vzc1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiAyMDA7XG4gICAgICAgICAgICBjYXNlIFwiRmFpbGVkXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDQwMDtcbiAgICAgICAgICAgIGNhc2UgXCJUaW1lZE91dFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiA0Mjk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLXJldHVyblxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZNZXNzYWdlU3RhdHVzUmVzcG9uc2Uuc3RhdHVzQ29kZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHVyblN0YXR1c1BheWxvYWQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgUmVwbGF5YWJsZUF1ZGlvTm9kZSB9IGZyb20gXCIuLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCI7XG5pbXBvcnQgeyBBcmd1bWVudE51bGxFcnJvciwgQ29ubmVjdGlvblN0YXRlLCBjcmVhdGVOb0Rhc2hHdWlkLCBFdmVudFNvdXJjZSwgTWVzc2FnZVR5cGUsIFNlcnZpY2VFdmVudCwgVGltZW91dCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBDYW5jZWxsYXRpb25SZWFzb24sIFByb3BlcnR5SWQsIFJlY29nbml0aW9uRXZlbnRBcmdzLCBTZXNzaW9uRXZlbnRBcmdzLCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQWdlbnRDb25maWcsIER5bmFtaWNHcmFtbWFyQnVpbGRlciwgUmVjb2duaXRpb25Nb2RlLCBSZXF1ZXN0U2Vzc2lvbiwgU3BlZWNoQ29udGV4dCwgU3BlZWNoRGV0ZWN0ZWQsIHR5cGUgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZSB9IGZyb20gXCIuL1NwZWVjaENvbm5lY3Rpb25NZXNzYWdlLkludGVybmFsXCI7XG5leHBvcnQgY2xhc3MgU2VydmljZVJlY29nbml6ZXJCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCByZWNvZ25pemVyKSB7XG4gICAgICAgIC8vIEEgcHJvbWlzZSBmb3IgYSBjb25maWd1cmVkIGNvbm5lY3Rpb24uXG4gICAgICAgIC8vIERvIG5vdCBjb25zdW1lIGRpcmVjdGx5LCBjYWxsIGZldGNoQ29ubmVjdGlvbiBpbnN0ZWFkLlxuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8vIEEgcHJvbWlzZSBmb3IgYSBjb25uZWN0aW9uLCBidXQgb25lIHRoYXQgaGFzIG5vdCBoYWQgdGhlIHNwZWVjaCBjb250ZXh0IHNlbnQgeWV0LlxuICAgICAgICAvLyBEbyBub3QgY29uc3VtZSBkaXJlY3RseSwgY2FsbCBmZXRjaENvbm5lY3Rpb24gaW5zdGVhZC5cbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucHJpdlNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB0aGlzLnByaXZJc0xpdmVBdWRpbyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJlY29nbml6ZU92ZXJyaWRlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnJlY29nbml6ZVNwZWFrZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuZGlzY29ubmVjdE92ZXJyaWRlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnJlY2VpdmVNZXNzYWdlT3ZlcnJpZGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc2VuZFByZVBheWxvYWRKU09OT3ZlcnJpZGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucG9zdENvbm5lY3RJbXBsT3ZlcnJpZGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuY29uZmlnQ29ubmVjdGlvbk92ZXJyaWRlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmhhbmRsZVNwZWVjaFBocmFzZU1lc3NhZ2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaGFuZGxlU3BlZWNoSHlwb3RoZXNpc01lc3NhZ2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICghYXV0aGVudGljYXRpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcImF1dGhlbnRpY2F0aW9uXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY29ubmVjdGlvbkZhY3RvcnkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcImNvbm5lY3Rpb25GYWN0b3J5XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYXVkaW9Tb3VyY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcImF1ZGlvU291cmNlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVjb2duaXplckNvbmZpZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwicmVjb2duaXplckNvbmZpZ1wiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZNdXN0UmVwb3J0RW5kT2ZTdHJlYW0gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2QXV0aGVudGljYXRpb24gPSBhdXRoZW50aWNhdGlvbjtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkZhY3RvcnkgPSBjb25uZWN0aW9uRmFjdG9yeTtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Tb3VyY2UgPSBhdWRpb1NvdXJjZTtcbiAgICAgICAgdGhpcy5wcml2UmVjb2duaXplckNvbmZpZyA9IHJlY29nbml6ZXJDb25maWc7XG4gICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2UmVjb2duaXplciA9IHJlY29nbml6ZXI7XG4gICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uID0gbmV3IFJlcXVlc3RTZXNzaW9uKHRoaXMucHJpdkF1ZGlvU291cmNlLmlkKCkpO1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRXZlbnRzID0gbmV3IEV2ZW50U291cmNlKCk7XG4gICAgICAgIHRoaXMucHJpdlNlcnZpY2VFdmVudHMgPSBuZXcgRXZlbnRTb3VyY2UoKTtcbiAgICAgICAgdGhpcy5wcml2RHluYW1pY0dyYW1tYXIgPSBuZXcgRHluYW1pY0dyYW1tYXJCdWlsZGVyKCk7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaENvbnRleHQgPSBuZXcgU3BlZWNoQ29udGV4dCh0aGlzLnByaXZEeW5hbWljR3JhbW1hcik7XG4gICAgICAgIHRoaXMucHJpdkFnZW50Q29uZmlnID0gbmV3IEFnZW50Q29uZmlnKCk7XG4gICAgICAgIGlmICh0eXBlb2YgKEJsb2IpICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiAoV29ya2VyKSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgdGhpcy5wcml2U2V0VGltZW91dCA9IFRpbWVvdXQuc2V0VGltZW91dDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbm5lY3Rpb25FdmVudHMuYXR0YWNoKChjb25uZWN0aW9uRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uRXZlbnQubmFtZSA9PT0gXCJDb25uZWN0aW9uQ2xvc2VkRXZlbnRcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb25DbG9zZWRFdmVudCA9IGNvbm5lY3Rpb25FdmVudDtcbiAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGlvbkNsb3NlZEV2ZW50LnN0YXR1c0NvZGUgPT09IDEwMDMgfHxcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbkNsb3NlZEV2ZW50LnN0YXR1c0NvZGUgPT09IDEwMDcgfHxcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbkNsb3NlZEV2ZW50LnN0YXR1c0NvZGUgPT09IDEwMDIgfHxcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbkNsb3NlZEV2ZW50LnN0YXR1c0NvZGUgPT09IDQwMDAgfHxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ubnVtQ29ubmVjdGlvbkF0dGVtcHRzID4gdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5tYXhSZXRyeUNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5jYW5jZWxSZWNvZ25pdGlvbkxvY2FsKENhbmNlbGxhdGlvblJlYXNvbi5FcnJvciwgY29ubmVjdGlvbkNsb3NlZEV2ZW50LnN0YXR1c0NvZGUgPT09IDEwMDcgPyBDYW5jZWxsYXRpb25FcnJvckNvZGUuQmFkUmVxdWVzdFBhcmFtZXRlcnMgOiBDYW5jZWxsYXRpb25FcnJvckNvZGUuQ29ubmVjdGlvbkZhaWx1cmUsIGAke2Nvbm5lY3Rpb25DbG9zZWRFdmVudC5yZWFzb259IHdlYnNvY2tldCBlcnJvciBjb2RlOiAke2Nvbm5lY3Rpb25DbG9zZWRFdmVudC5zdGF0dXNDb2RlfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHBocmFzZURldGVjdGlvbiA9IHt9O1xuICAgICAgICBpZiAocmVjb2duaXplckNvbmZpZy5hdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZUxhbmd1YWdlcyA9IHJlY29nbml6ZXJDb25maWcuYXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlcy5zcGxpdChcIixcIik7XG4gICAgICAgICAgICBsZXQgc3BlZWNoQ29udGV4dExpZE1vZGU7XG4gICAgICAgICAgICBpZiAocmVjb2duaXplckNvbmZpZy5sYW5ndWFnZUlkTW9kZSA9PT0gXCJDb250aW51b3VzXCIpIHtcbiAgICAgICAgICAgICAgICBzcGVlY2hDb250ZXh0TGlkTW9kZSA9IFwiRGV0ZWN0Q29udGludW91c1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7IC8vIHJlY29nbml6ZXJDb25maWcubGFuZ3VhZ2VJZE1vZGUgPT09IFwiQXRTdGFydFwiXG4gICAgICAgICAgICAgICAgc3BlZWNoQ29udGV4dExpZE1vZGUgPSBcIkRldGVjdEF0QXVkaW9TdGFydFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoQ29udGV4dC5zZXRTZWN0aW9uKFwibGFuZ3VhZ2VJZFwiLCB7XG4gICAgICAgICAgICAgICAgUHJpb3JpdHk6IFwiUHJpb3JpdGl6ZUxhdGVuY3lcIixcbiAgICAgICAgICAgICAgICBsYW5ndWFnZXM6IHNvdXJjZUxhbmd1YWdlcyxcbiAgICAgICAgICAgICAgICBtb2RlOiBzcGVlY2hDb250ZXh0TGlkTW9kZSxcbiAgICAgICAgICAgICAgICBvblN1Y2Nlc3M6IHsgYWN0aW9uOiBcIlJlY29nbml6ZVwiIH0sXG4gICAgICAgICAgICAgICAgb25Vbmtub3duOiB7IGFjdGlvbjogXCJOb25lXCIgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hDb250ZXh0LnNldFNlY3Rpb24oXCJwaHJhc2VPdXRwdXRcIiwge1xuICAgICAgICAgICAgICAgIGludGVyaW1SZXN1bHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFR5cGU6IFwiQXV0b1wiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwaHJhc2VSZXN1bHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFR5cGU6IFwiQWx3YXlzXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbU1vZGVscyA9IHJlY29nbml6ZXJDb25maWcuc291cmNlTGFuZ3VhZ2VNb2RlbHM7XG4gICAgICAgICAgICBpZiAoY3VzdG9tTW9kZWxzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBwaHJhc2VEZXRlY3Rpb24uY3VzdG9tTW9kZWxzID0gY3VzdG9tTW9kZWxzO1xuICAgICAgICAgICAgICAgIHBocmFzZURldGVjdGlvbi5vbkludGVyaW0gPSB7IGFjdGlvbjogXCJOb25lXCIgfTtcbiAgICAgICAgICAgICAgICBwaHJhc2VEZXRlY3Rpb24ub25TdWNjZXNzID0geyBhY3Rpb246IFwiTm9uZVwiIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNFbXB0eSA9IChvYmopID0+IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBndWFyZC1mb3ItaW4sIGJyYWNlLXN0eWxlXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHggaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIGlmICghaXNFbXB0eShwaHJhc2VEZXRlY3Rpb24pKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hDb250ZXh0LnNldFNlY3Rpb24oXCJwaHJhc2VEZXRlY3Rpb25cIiwgcGhyYXNlRGV0ZWN0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRTcGVlY2hTZWdtZW50YXRpb25UaW1lb3V0KCkge1xuICAgICAgICBjb25zdCBzcGVlY2hTZWdtZW50YXRpb25UaW1lb3V0ID0gdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoX1NlZ21lbnRhdGlvblNpbGVuY2VUaW1lb3V0TXMsIHVuZGVmaW5lZCk7XG4gICAgICAgIGlmIChzcGVlY2hTZWdtZW50YXRpb25UaW1lb3V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1vZGUgPSB0aGlzLnJlY29nbml0aW9uTW9kZSA9PT0gUmVjb2duaXRpb25Nb2RlLkNvbnZlcnNhdGlvbiA/IFwiQ09OVkVSU0FUSU9OXCIgOlxuICAgICAgICAgICAgICAgIHRoaXMucmVjb2duaXRpb25Nb2RlID09PSBSZWNvZ25pdGlvbk1vZGUuRGljdGF0aW9uID8gXCJESUNUQVRJT05cIiA6IFwiSU5URVJBQ1RJVkVcIjtcbiAgICAgICAgICAgIGNvbnN0IHNlZ21lbnRhdGlvblNpbGVuY2VUaW1lb3V0TXMgPSBwYXJzZUludChzcGVlY2hTZWdtZW50YXRpb25UaW1lb3V0LCAxMCk7XG4gICAgICAgICAgICBjb25zdCBwaHJhc2VEZXRlY3Rpb24gPSB0aGlzLnByaXZTcGVlY2hDb250ZXh0LmdldFNlY3Rpb24oXCJwaHJhc2VEZXRlY3Rpb25cIik7XG4gICAgICAgICAgICBwaHJhc2VEZXRlY3Rpb24ubW9kZSA9IG1vZGU7XG4gICAgICAgICAgICBwaHJhc2VEZXRlY3Rpb25bbW9kZV0gPSB7XG4gICAgICAgICAgICAgICAgc2VnbWVudGF0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGU6IFwiQ3VzdG9tXCIsXG4gICAgICAgICAgICAgICAgICAgIHNlZ21lbnRhdGlvblNpbGVuY2VUaW1lb3V0TXNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoQ29udGV4dC5zZXRTZWN0aW9uKFwicGhyYXNlRGV0ZWN0aW9uXCIsIHBocmFzZURldGVjdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGF1ZGlvU291cmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Tb3VyY2U7XG4gICAgfVxuICAgIGdldCBzcGVlY2hDb250ZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoQ29udGV4dDtcbiAgICB9XG4gICAgZ2V0IGR5bmFtaWNHcmFtbWFyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RHluYW1pY0dyYW1tYXI7XG4gICAgfVxuICAgIGdldCBhZ2VudENvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkFnZW50Q29uZmlnO1xuICAgIH1cbiAgICBzZXQgY29udmVyc2F0aW9uVHJhbnNsYXRvclRva2VuKHRva2VuKSB7XG4gICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcucGFyYW1ldGVycy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfVG9rZW4sIHRva2VuKTtcbiAgICB9XG4gICAgc2V0IHZvaWNlUHJvZmlsZVR5cGUodHlwZSkge1xuICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLnBhcmFtZXRlcnMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TcGVha2VySWRNb2RlLCB0eXBlKTtcbiAgICB9XG4gICAgc2V0IGF1dGhlbnRpY2F0aW9uKGF1dGgpIHtcbiAgICAgICAgdGhpcy5wcml2QXV0aGVudGljYXRpb24gPSB0aGlzLmF1dGhlbnRpY2F0aW9uO1xuICAgIH1cbiAgICBpc0Rpc3Bvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNEaXNwb3NlZDtcbiAgICB9XG4gICAgZGlzcG9zZShyZWFzb24pIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWd1cmF0aW9uUHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHlpZWxkIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWd1cmF0aW9uUHJvbWlzZTtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgY29ubmVjdGlvbi5kaXNwb3NlKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY29ubmVjdGlvbiBpcyBpbiBhIGJhZCBzdGF0ZS4gQnV0IHdlJ3JlIHRyeWluZyB0byBraWxsIGl0LCBzby4uLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IGNvbm5lY3Rpb25FdmVudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uRXZlbnRzO1xuICAgIH1cbiAgICBnZXQgc2VydmljZUV2ZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNlcnZpY2VFdmVudHM7XG4gICAgfVxuICAgIGdldCByZWNvZ25pdGlvbk1vZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLnJlY29nbml0aW9uTW9kZTtcbiAgICB9XG4gICAgcmVjb2duaXplKHJlY29Nb2RlLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbEJhY2spIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlY29nbml6ZU92ZXJyaWRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnJlY29nbml6ZU92ZXJyaWRlKHJlY29Nb2RlLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbEJhY2spO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENsZWFyIHRoZSBleGlzdGluZyBjb25maWd1cmF0aW9uIHByb21pc2UgdG8gZm9yY2UgYSByZS10cmFuc21pc3Npb24gb2YgY29uZmlnIGFuZCBjb250ZXh0LlxuICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5yZWNvZ25pdGlvbk1vZGUgPSByZWNvTW9kZTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3BlZWNoU2VnbWVudGF0aW9uVGltZW91dCgpO1xuICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrID0gc3VjY2Vzc0NhbGxiYWNrO1xuICAgICAgICAgICAgdGhpcy5wcml2RXJyb3JDYWxsYmFjayA9IGVycm9yQ2FsbEJhY2s7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zdGFydE5ld1JlY29nbml0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5saXN0ZW5Gb3JTZXJ2aWNlVGVsZW1ldHJ5KHRoaXMucHJpdkF1ZGlvU291cmNlLmV2ZW50cyk7XG4gICAgICAgICAgICAvLyBTdGFydCB0aGUgY29ubmVjdGlvbiB0byB0aGUgc2VydmljZS4gVGhlIHByb21pc2UgdGhpcyB3aWxsIGNyZWF0ZSBpcyBzdG9yZWQgYW5kIHdpbGwgYmUgdXNlZCBieSBjb25maWd1cmVDb25uZWN0aW9uKCkuXG4gICAgICAgICAgICBjb25zdCBjb25Qcm9taXNlID0gdGhpcy5jb25uZWN0SW1wbCgpO1xuICAgICAgICAgICAgbGV0IGF1ZGlvTm9kZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9TdHJlYW1Ob2RlID0geWllbGQgdGhpcy5hdWRpb1NvdXJjZS5hdHRhY2godGhpcy5wcml2UmVxdWVzdFNlc3Npb24uYXVkaW9Ob2RlSWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdCA9IHlpZWxkIHRoaXMuYXVkaW9Tb3VyY2UuZm9ybWF0O1xuICAgICAgICAgICAgICAgIGNvbnN0IGRldmljZUluZm8gPSB5aWVsZCB0aGlzLmF1ZGlvU291cmNlLmRldmljZUluZm87XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNMaXZlQXVkaW8gPSBkZXZpY2VJbmZvLnR5cGUgJiYgZGV2aWNlSW5mby50eXBlID09PSB0eXBlLk1pY3JvcGhvbmVzO1xuICAgICAgICAgICAgICAgIGF1ZGlvTm9kZSA9IG5ldyBSZXBsYXlhYmxlQXVkaW9Ob2RlKGF1ZGlvU3RyZWFtTm9kZSwgZm9ybWF0LmF2Z0J5dGVzUGVyU2VjKTtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkF1ZGlvU291cmNlQXR0YWNoQ29tcGxldGVkKGF1ZGlvTm9kZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcuU3BlZWNoU2VydmljZUNvbmZpZy5Db250ZXh0LmF1ZGlvID0geyBzb3VyY2U6IGRldmljZUluZm8gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uU3RvcFJlY29nbml6aW5nKCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHlpZWxkIGNvblByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmNhbmNlbFJlY29nbml0aW9uTG9jYWwoQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBDYW5jZWxsYXRpb25FcnJvckNvZGUuQ29ubmVjdGlvbkZhaWx1cmUsIGVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uU3RhcnRFdmVudEFyZ3MgPSBuZXcgU2Vzc2lvbkV2ZW50QXJncyh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2UmVjb2duaXplci5zZXNzaW9uU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXIuc2Vzc2lvblN0YXJ0ZWQodGhpcy5wcml2UmVjb2duaXplciwgc2Vzc2lvblN0YXJ0RXZlbnRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZvaWQgdGhpcy5yZWNlaXZlTWVzc2FnZSgpO1xuICAgICAgICAgICAgY29uc3QgYXVkaW9TZW5kUHJvbWlzZSA9IHRoaXMuc2VuZEF1ZGlvKGF1ZGlvTm9kZSk7XG4gICAgICAgICAgICBhdWRpb1NlbmRQcm9taXNlLmNhdGNoKChlcnJvcikgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuY2FuY2VsUmVjb2duaXRpb25Mb2NhbChDYW5jZWxsYXRpb25SZWFzb24uRXJyb3IsIENhbmNlbGxhdGlvbkVycm9yQ29kZS5SdW50aW1lRXJyb3IsIGVycm9yKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0b3BSZWNvZ25pemluZygpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1JlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5hdWRpb1NvdXJjZS50dXJuT2ZmKCk7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuc2VuZEZpbmFsQXVkaW8oKTtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25TdG9wUmVjb2duaXppbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24udHVybkNvbXBsZXRpb25Qcm9taXNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLmNvbm5lY3RJbXBsKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25uZWN0QXN5bmMoY2IsIGVycikge1xuICAgICAgICB0aGlzLmNvbm5lY3RJbXBsKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgKHJlYXNvbikgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLmNhbmNlbFJlY29nbml0aW9uTG9jYWwoQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBDYW5jZWxsYXRpb25FcnJvckNvZGUuTm9FcnJvciwgXCJEaXNjb25uZWN0aW5nXCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGlzY29ubmVjdE92ZXJyaWRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmRpc2Nvbm5lY3RPdmVycmlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25Qcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCAoeWllbGQgdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UpLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNlbmROZXR3b3JrTWVzc2FnZShwYXRoLCBwYXlsb2FkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gdHlwZW9mIHBheWxvYWQgPT09IFwic3RyaW5nXCIgPyBNZXNzYWdlVHlwZS5UZXh0IDogTWVzc2FnZVR5cGUuQmluYXJ5O1xuICAgICAgICAgICAgY29uc3QgY29udGVudFR5cGUgPSB0eXBlb2YgcGF5bG9hZCA9PT0gXCJzdHJpbmdcIiA/IFwiYXBwbGljYXRpb24vanNvblwiIDogXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24uc2VuZChuZXcgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UodHlwZSwgcGF0aCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBjb250ZW50VHlwZSwgcGF5bG9hZCkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0IGFjdGl2aXR5VGVtcGxhdGUobWVzc2FnZVBheWxvYWQpIHtcbiAgICAgICAgdGhpcy5wcml2QWN0aXZpdHlUZW1wbGF0ZSA9IG1lc3NhZ2VQYXlsb2FkO1xuICAgIH1cbiAgICBnZXQgYWN0aXZpdHlUZW1wbGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkFjdGl2aXR5VGVtcGxhdGU7XG4gICAgfVxuICAgIHNlbmRUZWxlbWV0cnlEYXRhKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgdGVsZW1ldHJ5RGF0YSA9IHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmdldFRlbGVtZXRyeSgpO1xuICAgICAgICAgICAgaWYgKFNlcnZpY2VSZWNvZ25pemVyQmFzZS50ZWxlbWV0cnlEYXRhRW5hYmxlZCAhPT0gdHJ1ZSB8fFxuICAgICAgICAgICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgfHxcbiAgICAgICAgICAgICAgICBudWxsID09PSB0ZWxlbWV0cnlEYXRhKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhU2VydmljZVJlY29nbml6ZXJCYXNlLnRlbGVtZXRyeURhdGEpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBTZXJ2aWNlUmVjb2duaXplckJhc2UudGVsZW1ldHJ5RGF0YSh0ZWxlbWV0cnlEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgeWllbGQgY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBcInRlbGVtZXRyeVwiLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIFwiYXBwbGljYXRpb24vanNvblwiLCB0ZWxlbWV0cnlEYXRhKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDYW5jZWxzIHJlY29nbml0aW9uLlxuICAgIGNhbmNlbFJlY29nbml0aW9uTG9jYWwoY2FuY2VsbGF0aW9uUmVhc29uLCBlcnJvckNvZGUsIGVycm9yKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1JlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25TdG9wUmVjb2duaXppbmcoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbFJlY29nbml0aW9uKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yQ29kZSwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVjZWl2ZU1lc3NhZ2UoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZJc0Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlJ3JlIGRvbmUuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB5aWVsZCBjb25uZWN0aW9uLnJlYWQoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWNlaXZlTWVzc2FnZU92ZXJyaWRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZU1lc3NhZ2VPdmVycmlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBpbmRpY2F0ZXMgd2UgYXJlIGRyYWluaW5nIHRoZSBxdWV1ZSBhbmQgaXQgY2FtZSB3aXRoIG5vIG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uaXNSZWNvZ25pemluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZU1lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTZXJ2aWNlSGFzU2VudE1lc3NhZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb25NZXNzYWdlID0gU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UuZnJvbUNvbm5lY3Rpb25NZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uTWVzc2FnZS5yZXF1ZXN0SWQudG9Mb3dlckNhc2UoKSA9PT0gdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb25uZWN0aW9uTWVzc2FnZS5wYXRoLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0dXJuLnN0YXJ0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TXVzdFJlcG9ydEVuZE9mU3RyZWFtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vblNlcnZpY2VUdXJuU3RhcnRSZXNwb25zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNwZWVjaC5zdGFydGRldGVjdGVkXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlZWNoU3RhcnREZXRlY3RlZCA9IFNwZWVjaERldGVjdGVkLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGVlY2hTdGFydEV2ZW50QXJncyA9IG5ldyBSZWNvZ25pdGlvbkV2ZW50QXJncyhzcGVlY2hTdGFydERldGVjdGVkLk9mZnNldCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZSZWNvZ25pemVyLnNwZWVjaFN0YXJ0RGV0ZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjb2duaXplci5zcGVlY2hTdGFydERldGVjdGVkKHRoaXMucHJpdlJlY29nbml6ZXIsIHNwZWVjaFN0YXJ0RXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3BlZWNoLmVuZGRldGVjdGVkXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGpzb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbiA9IGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3Qgd2FzIGVtcHR5LCB0aGUgSlNPTiByZXR1cm5lZCBpcyBlbXB0eS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbiA9IFwieyBPZmZzZXQ6IDAgfVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGVlY2hTdG9wRGV0ZWN0ZWQgPSBTcGVlY2hEZXRlY3RlZC5mcm9tSlNPTihqc29uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGVlY2hTdG9wRXZlbnRBcmdzID0gbmV3IFJlY29nbml0aW9uRXZlbnRBcmdzKHNwZWVjaFN0b3BEZXRlY3RlZC5PZmZzZXQgKyB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0LCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlJlY29nbml6ZXIuc3BlZWNoRW5kRGV0ZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVjb2duaXplci5zcGVlY2hFbmREZXRlY3RlZCh0aGlzLnByaXZSZWNvZ25pemVyLCBzcGVlY2hTdG9wRXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidHVybi5lbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnNlbmRUZWxlbWV0cnlEYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmlzU3BlZWNoRW5kZWQgJiYgdGhpcy5wcml2TXVzdFJlcG9ydEVuZE9mU3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdk11c3RSZXBvcnRFbmRPZlN0cmVhbSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmNhbmNlbFJlY29nbml0aW9uTG9jYWwoQ2FuY2VsbGF0aW9uUmVhc29uLkVuZE9mU3RyZWFtLCBDYW5jZWxsYXRpb25FcnJvckNvZGUuTm9FcnJvciwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvblN0b3BFdmVudEFyZ3MgPSBuZXcgU2Vzc2lvbkV2ZW50QXJncyh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uU2VydmljZVR1cm5FbmRSZXNwb25zZSh0aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLmlzQ29udGludW91c1JlY29nbml0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJpdlJlY29nbml6ZXJDb25maWcuaXNDb250aW51b3VzUmVjb2duaXRpb24gfHwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uaXNTcGVlY2hFbmRlZCB8fCAhdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uaXNSZWNvZ25pemluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZSZWNvZ25pemVyLnNlc3Npb25TdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyLnNlc3Npb25TdG9wcGVkKHRoaXMucHJpdlJlY29nbml6ZXIsIHNlc3Npb25TdG9wRXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uID0geWllbGQgdGhpcy5mZXRjaENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5zZW5kUHJlUGF5bG9hZEpTT04oY29ubmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh5aWVsZCB0aGlzLnByb2Nlc3NUeXBlU3BlY2lmaWNNZXNzYWdlcyhjb25uZWN0aW9uTWVzc2FnZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhlcmUgYXJlIHNvbWUgbWVzc2FnZXMgdGhhdCB0aGUgZGVyaXZlZCBjbGFzcyBoYXMgbm90IHByb2Nlc3NlZCwgZGlzcGF0Y2ggdGhlbSB0byBjb25uZWN0IGNsYXNzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlNlcnZpY2VFdmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VydmljZUV2ZW50cy5vbkV2ZW50KG5ldyBTZXJ2aWNlRXZlbnQoY29ubmVjdGlvbk1lc3NhZ2UucGF0aC50b0xvd2VyQ2FzZSgpLCBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlY2VpdmVNZXNzYWdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNlbmRTcGVlY2hDb250ZXh0KGNvbm5lY3Rpb24sIGdlbmVyYXRlTmV3UmVxdWVzdElkKSB7XG4gICAgICAgIGNvbnN0IHNwZWVjaENvbnRleHRKc29uID0gdGhpcy5zcGVlY2hDb250ZXh0LnRvSlNPTigpO1xuICAgICAgICBpZiAoZ2VuZXJhdGVOZXdSZXF1ZXN0SWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uU3BlZWNoQ29udGV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzcGVlY2hDb250ZXh0SnNvbikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24uc2VuZChuZXcgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UoTWVzc2FnZVR5cGUuVGV4dCwgXCJzcGVlY2guY29udGV4dFwiLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIFwiYXBwbGljYXRpb24vanNvblwiLCBzcGVlY2hDb250ZXh0SnNvbikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbm9PcCgpIHtcbiAgICAgICAgLy8gb3BlcmF0aW9uIG5vdCBzdXBwb3J0ZWRcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBFbmNhcHN1bGF0ZWQgZm9yIGRlcml2ZWQgc2VydmljZSByZWNvZ25pemVycyB0aGF0IG5lZWQgdG8gc2VuZCBhZGRpdGlvbmFsIEpTT05cbiAgICBzZW5kUHJlUGF5bG9hZEpTT04oY29ubmVjdGlvbiwgZ2VuZXJhdGVOZXdSZXF1ZXN0SWQgPSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZW5kUHJlUGF5bG9hZEpTT05PdmVycmlkZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZFByZVBheWxvYWRKU09OT3ZlcnJpZGUoY29ubmVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnNlbmRTcGVlY2hDb250ZXh0KGNvbm5lY3Rpb24sIGdlbmVyYXRlTmV3UmVxdWVzdElkKTtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMuc2VuZFdhdmVIZWFkZXIoY29ubmVjdGlvbik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kV2F2ZUhlYWRlcihjb25uZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBmb3JtYXQgPSB5aWVsZCB0aGlzLmF1ZGlvU291cmNlLmZvcm1hdDtcbiAgICAgICAgICAgIC8vIHRoaXMud3JpdGVCdWZmZXJUb0NvbnNvbGUoZm9ybWF0LmhlYWRlcik7XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5CaW5hcnksIFwiYXVkaW9cIiwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBcImF1ZGlvL3gtd2F2XCIsIGZvcm1hdC5oZWFkZXIpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIEVzdGFibGlzaGVzIGEgd2Vic29ja2V0IGNvbm5lY3Rpb24gdG8gdGhlIGVuZCBwb2ludC5cbiAgICBjb25uZWN0SW1wbCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25Qcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZS50aGVuKChjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24uc3RhdGUoKSA9PT0gQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U2VydmljZUhhc1NlbnRNZXNzYWdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3RJbXBsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZTtcbiAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Qcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlNlcnZpY2VIYXNTZW50TWVzc2FnZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3RJbXBsKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZSA9IHRoaXMucmV0cnlhYmxlQ29ubmVjdCgpO1xuICAgICAgICAvLyBBdHRhY2ggYW4gZW1wdHkgaGFuZGxlciB0byBhbGxvdyB0aGUgcHJvbWlzZSB0byBydW4gaW4gdGhlIGJhY2tncm91bmQgd2hpbGVcbiAgICAgICAgLy8gb3RoZXIgc3RhcnR1cCBldmVudHMgaGFwcGVuLiBJdCdsbCBldmVudHVhbGx5IGJlIGF3YWl0ZWQgb24uXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAgICAgaWYgKHRoaXMucG9zdENvbm5lY3RJbXBsT3ZlcnJpZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zdENvbm5lY3RJbXBsT3ZlcnJpZGUodGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uUHJvbWlzZTtcbiAgICB9XG4gICAgc2VuZFNwZWVjaFNlcnZpY2VDb25maWcoY29ubmVjdGlvbiwgcmVxdWVzdFNlc3Npb24sIFNwZWVjaFNlcnZpY2VDb25maWdKc29uKSB7XG4gICAgICAgIHJlcXVlc3RTZXNzaW9uLm9uU3BlZWNoQ29udGV4dCgpO1xuICAgICAgICAvLyBmaWx0ZXIgb3V0IGFueXRoaW5nIHRoYXQgaXMgbm90IHJlcXVpcmVkIGZvciB0aGUgc2VydmljZSB0byB3b3JrLlxuICAgICAgICBpZiAoU2VydmljZVJlY29nbml6ZXJCYXNlLnRlbGVtZXRyeURhdGFFbmFibGVkICE9PSB0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCB3aXRoVGVsZW1ldHJ5ID0gSlNPTi5wYXJzZShTcGVlY2hTZXJ2aWNlQ29uZmlnSnNvbik7XG4gICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9IHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgICAgICAgICAgIHN5c3RlbTogd2l0aFRlbGVtZXRyeS5jb250ZXh0LnN5c3RlbSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFNwZWVjaFNlcnZpY2VDb25maWdKc29uID0gSlNPTi5zdHJpbmdpZnkocmVwbGFjZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoXCJmMGY1ZGViYy1mOGM5LTQ4OTItYWM0Yi05MGE3YWIzNTlmZDJcIiwgXCJmYWxzZVwiKS50b0xvd2VyQ2FzZSgpID09PSBcInRydWVcIikge1xuICAgICAgICAgICAgY29uc3QganNvbiA9IEpTT04ucGFyc2UoU3BlZWNoU2VydmljZUNvbmZpZ0pzb24pO1xuICAgICAgICAgICAganNvbi5jb250ZXh0LkRpc2FibGVSZWZlcmVuY2VDaGFubmVsID0gXCJUcnVlXCI7XG4gICAgICAgICAgICBqc29uLmNvbnRleHQuTWljU3BlYyA9IFwiMV8wXzBcIjtcbiAgICAgICAgICAgIFNwZWVjaFNlcnZpY2VDb25maWdKc29uID0gSlNPTi5zdHJpbmdpZnkoanNvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFNwZWVjaFNlcnZpY2VDb25maWdKc29uKSB7XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBcInNwZWVjaC5jb25maWdcIiwgcmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBcImFwcGxpY2F0aW9uL2pzb25cIiwgU3BlZWNoU2VydmljZUNvbmZpZ0pzb24pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGZldGNoQ29ubmVjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UudGhlbigoY29ubmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGlvbi5zdGF0ZSgpID09PSBDb25uZWN0aW9uU3RhdGUuRGlzY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U2VydmljZUhhc1NlbnRNZXNzYWdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlO1xuICAgICAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbklkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTZXJ2aWNlSGFzU2VudE1lc3NhZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UgPSB0aGlzLmNvbmZpZ3VyZUNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2U7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kQXVkaW8oYXVkaW9TdHJlYW1Ob2RlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBhdWRpb0Zvcm1hdCA9IHlpZWxkIHRoaXMuYXVkaW9Tb3VyY2UuZm9ybWF0O1xuICAgICAgICAgICAgLy8gVGhlIHRpbWUgd2UgbGFzdCBzZW50IGRhdGEgdG8gdGhlIHNlcnZpY2UuXG4gICAgICAgICAgICBsZXQgbmV4dFNlbmRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIC8vIE1heCBhbW91bnQgdG8gc2VuZCBiZWZvcmUgd2Ugc3RhcnQgdG8gdGhyb3R0bGVcbiAgICAgICAgICAgIGNvbnN0IGZhc3RMYW5lU2l6ZU1zID0gdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFwiU1BFRUNILVRyYW5zbWl0TGVuZ3RoQmVmb3JUaHJvdHRsZU1zXCIsIFwiNTAwMFwiKTtcbiAgICAgICAgICAgIGNvbnN0IG1heFNlbmRVbnRocm90dGxlZEJ5dGVzID0gYXVkaW9Gb3JtYXQuYXZnQnl0ZXNQZXJTZWMgLyAxMDAwICogcGFyc2VJbnQoZmFzdExhbmVTaXplTXMsIDEwKTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0UmVjb2dOdW1iZXIgPSB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZWNvZ051bWJlcjtcbiAgICAgICAgICAgIGNvbnN0IHJlYWRBbmRVcGxvYWRDeWNsZSA9ICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBzcGVlY2ggaXMgZG9uZSwgc3RvcCBzZW5kaW5nIGF1ZGlvLlxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcml2SXNEaXNwb3NlZCAmJlxuICAgICAgICAgICAgICAgICAgICAhdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uaXNTcGVlY2hFbmRlZCAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1JlY29nbml6aW5nICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlY29nTnVtYmVyID09PSBzdGFydFJlY29nTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdWRpb1N0cmVhbUNodW5rID0geWllbGQgYXVkaW9TdHJlYW1Ob2RlLnJlYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgaGF2ZSBhIG5ldyBhdWRpbyBjaHVuayB0byB1cGxvYWQuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1NwZWVjaEVuZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBzZXJ2aWNlIGFscmVhZHkgcmVjb2duaXplZCBhdWRpbyBlbmQgdGhlbiBkb24ndCBzZW5kIGFueSBtb3JlIGF1ZGlvXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IHBheWxvYWQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzZW5kRGVsYXk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXVkaW9TdHJlYW1DaHVuayB8fCBhdWRpb1N0cmVhbUNodW5rLmlzRW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmREZWxheSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkID0gYXVkaW9TdHJlYW1DaHVuay5idWZmZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkF1ZGlvU2VudChwYXlsb2FkLmJ5dGVMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1heFNlbmRVbnRocm90dGxlZEJ5dGVzID49IHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmJ5dGVzU2VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmREZWxheSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kRGVsYXkgPSBNYXRoLm1heCgwLCBuZXh0U2VuZFRpbWUgLSBEYXRlLm5vdygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoMCAhPT0gc2VuZERlbGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmRlbGF5KHNlbmREZWxheSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBheWxvYWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTZW5kVGltZSA9IERhdGUubm93KCkgKyAocGF5bG9hZC5ieXRlTGVuZ3RoICogMTAwMCAvIChhdWRpb0Zvcm1hdC5hdmdCeXRlc1BlclNlYyAqIDIpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBBcmUgd2Ugc3RpbGwgYWxpdmU/XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcml2SXNEaXNwb3NlZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmlzU3BlZWNoRW5kZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmlzUmVjb2duaXppbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlY29nTnVtYmVyID09PSBzdGFydFJlY29nTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLnNlbmQobmV3IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlKE1lc3NhZ2VUeXBlLkJpbmFyeSwgXCJhdWRpb1wiLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIG51bGwsIHBheWxvYWQpKS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uU2VydmljZVR1cm5FbmRSZXNwb25zZSh0aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLmlzQ29udGludW91c1JlY29nbml0aW9uKS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShhdWRpb1N0cmVhbUNodW5rID09PSBudWxsIHx8IGF1ZGlvU3RyZWFtQ2h1bmsgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGF1ZGlvU3RyZWFtQ2h1bmsuaXNFbmQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy53cml0ZUJ1ZmZlclRvQ29uc29sZShwYXlsb2FkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWdhcmRsZXNzIG9mIHN1Y2Nlc3Mgb3IgZmFpbHVyZSwgc2NoZWR1bGUgdGhlIG5leHQgdXBsb2FkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSB1bmRlcmx5aW5nIGNvbm5lY3Rpb24gd2FzIGJyb2tlbiwgdGhlIG5leHQgY3ljbGUgd2lsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBhIG5ldyBjb25uZWN0aW9uIGFuZCByZS10cmFuc21pdCBtaXNzaW5nIGF1ZGlvIGF1dG9tYXRpY2FsbHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRBbmRVcGxvYWRDeWNsZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGF1ZGlvIHN0cmVhbSBoYXMgYmVlbiBjbG9zZWQsIG5vIG5lZWQgdG8gc2NoZWR1bGUgbmV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlYWQtdXBsb2FkIGN5Y2xlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcml2SXNMaXZlQXVkaW8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25TcGVlY2hFbmRlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJlYWRBbmRVcGxvYWRDeWNsZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0cnlhYmxlQ29ubmVjdCgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGxldCBpc1VuQXV0aG9yaXplZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCA9IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb25JZCA9IHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZDtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25JZCA9IChzZXNzaW9uSWQgIT09IHVuZGVmaW5lZCkgPyBzZXNzaW9uSWQgOiBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vblByZUNvbm5lY3Rpb25TdGFydCh0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkLCB0aGlzLnByaXZDb25uZWN0aW9uSWQpO1xuICAgICAgICAgICAgbGV0IGxhc3RTdGF0dXNDb2RlID0gMDtcbiAgICAgICAgICAgIGxldCBsYXN0UmVhc29uID0gXCJcIjtcbiAgICAgICAgICAgIHdoaWxlICh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5udW1Db25uZWN0aW9uQXR0ZW1wdHMgPD0gdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5tYXhSZXRyeUNvdW50KSB7XG4gICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBhdXRoIGluZm9ybWF0aW9uIGZvciB0aGUgY29ubmVjdGlvbi4gVGhpcyBpcyBhIGJpdCBvZiBvdmVya2lsbCBmb3IgdGhlIGN1cnJlbnQgQVBJIHN1cmZhY2UsIGJ1dCBsZWF2aW5nIHRoZSBwbHVtYmluZyBpbiBwbGFjZSB0byBiZSBhYmxlIHRvIHJhaXNlIGEgZGV2ZWxvcGVyLWN1c3RvbWVyXG4gICAgICAgICAgICAgICAgLy8gZmFjaW5nIGV2ZW50IHdoZW4gYSBjb25uZWN0aW9uIGZhaWxzIHRvIGxldCB0aGVtIHRyeSBhbmQgcHJvdmlkZSBuZXcgYXV0aCBpbmZvcm1hdGlvbi5cbiAgICAgICAgICAgICAgICBjb25zdCBhdXRoUHJvbWlzZSA9IGlzVW5BdXRob3JpemVkID8gdGhpcy5wcml2QXV0aGVudGljYXRpb24uZmV0Y2hPbkV4cGlyeSh0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkKSA6IHRoaXMucHJpdkF1dGhlbnRpY2F0aW9uLmZldGNoKHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1dGggPSB5aWVsZCBhdXRoUHJvbWlzZTtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkF1dGhDb21wbGV0ZWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY29ubmVjdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB0aGlzLnByaXZDb25uZWN0aW9uRmFjdG9yeS5jcmVhdGUodGhpcy5wcml2UmVjb2duaXplckNvbmZpZywgYXV0aCwgdGhpcy5wcml2Q29ubmVjdGlvbklkKTtcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2ggdGhlIHRlbGVtZXRyeSBoYW5kbGVycy5cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5saXN0ZW5Gb3JTZXJ2aWNlVGVsZW1ldHJ5KGNvbm5lY3Rpb24uZXZlbnRzKTtcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2ggdG8gdGhlIHVuZGVybHlpbmcgZXZlbnQuIE5vIG5lZWQgdG8gaG9sZCBvbnRvIHRoZSBkZXRhY2ggcG9pbnRlcnMgYXMgaW4gdGhlIGV2ZW50IHRoZSBjb25uZWN0aW9uIGdvZXMgYXdheSxcbiAgICAgICAgICAgICAgICAvLyBpdCdsbCBzdG9wIHNlbmRpbmcgZXZlbnRzLlxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uZXZlbnRzLmF0dGFjaCgoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uRXZlbnRzLm9uRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgY29ubmVjdGlvbi5vcGVuKCk7XG4gICAgICAgICAgICAgICAgLy8gMjAwID09IGV2ZXJ5dGhpbmcgaXMgZmluZS5cbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uQ29ubmVjdGlvbkVzdGFibGlzaENvbXBsZXRlZChyZXNwb25zZS5zdGF0dXNDb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gMTAwNikge1xuICAgICAgICAgICAgICAgICAgICBpc1VuQXV0aG9yaXplZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxhc3RTdGF0dXNDb2RlID0gcmVzcG9uc2Uuc3RhdHVzQ29kZTtcbiAgICAgICAgICAgICAgICBsYXN0UmVhc29uID0gcmVzcG9uc2UucmVhc29uO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uUmV0cnlDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkNvbm5lY3Rpb25Fc3RhYmxpc2hDb21wbGV0ZWQobGFzdFN0YXR1c0NvZGUsIGxhc3RSZWFzb24pO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBVbmFibGUgdG8gY29udGFjdCBzZXJ2ZXIuIFN0YXR1c0NvZGU6ICR7bGFzdFN0YXR1c0NvZGV9LCAke3RoaXMucHJpdlJlY29nbml6ZXJDb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50KX0gUmVhc29uOiAke2xhc3RSZWFzb259YCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWxheShkZWxheU1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gdGhpcy5wcml2U2V0VGltZW91dChyZXNvbHZlLCBkZWxheU1zKSk7XG4gICAgfVxuICAgIHdyaXRlQnVmZmVyVG9Db25zb2xlKGJ1ZmZlcikge1xuICAgICAgICBsZXQgb3V0ID0gXCJCdWZmZXIgU2l6ZTogXCI7XG4gICAgICAgIGlmIChudWxsID09PSBidWZmZXIpIHtcbiAgICAgICAgICAgIG91dCArPSBcIm51bGxcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHJlYWRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICAgICAgICAgIG91dCArPSBgJHtidWZmZXIuYnl0ZUxlbmd0aH1cXHJcXG5gO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWZmZXIuYnl0ZUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgb3V0ICs9IHJlYWRWaWV3W2ldLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCBcIjBcIikgKyBcIiBcIjtcbiAgICAgICAgICAgICAgICBpZiAoKChpICsgMSkgJSAxNikgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKG91dCk7XG4gICAgICAgICAgICAgICAgICAgIG91dCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUuaW5mbyhvdXQpO1xuICAgIH1cbiAgICBzZW5kRmluYWxBdWRpbygpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgeWllbGQgY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5CaW5hcnksIFwiYXVkaW9cIiwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBudWxsLCBudWxsKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBUYWtlcyBhbiBlc3RhYmxpc2hlZCB3ZWJzb2NrZXQgY29ubmVjdGlvbiB0byB0aGUgZW5kcG9pbnQgYW5kIHNlbmRzIHNwZWVjaCBjb25maWd1cmF0aW9uIGluZm9ybWF0aW9uLlxuICAgIGNvbmZpZ3VyZUNvbm5lY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uID0geWllbGQgdGhpcy5jb25uZWN0SW1wbCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnQ29ubmVjdGlvbk92ZXJyaWRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25maWdDb25uZWN0aW9uT3ZlcnJpZGUoY29ubmVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnNlbmRTcGVlY2hTZXJ2aWNlQ29uZmlnKGNvbm5lY3Rpb24sIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLCB0aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLlNwZWVjaFNlcnZpY2VDb25maWcuc2VyaWFsaXplKCkpO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5zZW5kUHJlUGF5bG9hZEpTT04oY29ubmVjdGlvbiwgZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb247XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblNlcnZpY2VSZWNvZ25pemVyQmFzZS50ZWxlbWV0cnlEYXRhRW5hYmxlZCA9IHRydWU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNlcnZpY2VSZWNvZ25pemVyQmFzZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cbmltcG9ydCB7IEF1ZGlvU291cmNlRXJyb3JFdmVudCwgQXVkaW9TdHJlYW1Ob2RlQXR0YWNoZWRFdmVudCwgQXVkaW9TdHJlYW1Ob2RlQXR0YWNoaW5nRXZlbnQsIEF1ZGlvU3RyZWFtTm9kZURldGFjaGVkRXZlbnQsIEF1ZGlvU3RyZWFtTm9kZUVycm9yRXZlbnQsIENvbm5lY3Rpb25Fc3RhYmxpc2hlZEV2ZW50LCBDb25uZWN0aW9uRXN0YWJsaXNoRXJyb3JFdmVudCwgQ29ubmVjdGlvbk1lc3NhZ2VSZWNlaXZlZEV2ZW50LCBDb25uZWN0aW9uU3RhcnRFdmVudCwgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbm5lY3RpbmdUb1NlcnZpY2VFdmVudCwgUmVjb2duaXRpb25UcmlnZ2VyZWRFdmVudCB9IGZyb20gXCIuL1JlY29nbml0aW9uRXZlbnRzXCI7XG5leHBvcnQgY2xhc3MgU2VydmljZVRlbGVtZXRyeUxpc3RlbmVyIHtcbiAgICBjb25zdHJ1Y3RvcihyZXF1ZXN0SWQsIGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2TGlzdGVuaW5nVHJpZ2dlck1ldHJpYyA9IG51bGw7XG4gICAgICAgIHRoaXMucHJpdk1pY01ldHJpYyA9IG51bGw7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hNZXRyaWMgPSBudWxsO1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0SWQgPSByZXF1ZXN0SWQ7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvU291cmNlSWQgPSBhdWRpb1NvdXJjZUlkO1xuICAgICAgICB0aGlzLnByaXZBdWRpb05vZGVJZCA9IGF1ZGlvTm9kZUlkO1xuICAgICAgICB0aGlzLnByaXZSZWNlaXZlZE1lc3NhZ2VzID0ge307XG4gICAgICAgIHRoaXMucHJpdlBocmFzZUxhdGVuY2llcyA9IFtdO1xuICAgICAgICB0aGlzLnByaXZIeXBvdGhlc2lzTGF0ZW5jaWVzID0gW107XG4gICAgfVxuICAgIHBocmFzZVJlY2VpdmVkKGF1ZGlvUmVjZWl2ZWRUaW1lKSB7XG4gICAgICAgIGlmIChhdWRpb1JlY2VpdmVkVGltZSA+IDApIHsgLy8gMCBpbmRpY2F0ZXMgdGhlIHRpbWUgaXMgdW5rbm93bi4gRHJvcCBpdC5cbiAgICAgICAgICAgIHRoaXMucHJpdlBocmFzZUxhdGVuY2llcy5wdXNoKERhdGUubm93KCkgLSBhdWRpb1JlY2VpdmVkVGltZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaHlwb3RoZXNpc1JlY2VpdmVkKGF1ZGlvUmVjZWl2ZWRUaW1lKSB7XG4gICAgICAgIGlmIChhdWRpb1JlY2VpdmVkVGltZSA+IDApIHsgLy8gMCBpbmRpY2F0ZXMgdGhlIHRpbWUgaXMgdW5rbm93bi4gRHJvcCBpdC5cbiAgICAgICAgICAgIHRoaXMucHJpdkh5cG90aGVzaXNMYXRlbmNpZXMucHVzaChEYXRlLm5vdygpIC0gYXVkaW9SZWNlaXZlZFRpbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uRXZlbnQoZSkge1xuICAgICAgICBpZiAodGhpcy5wcml2SXNEaXNwb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgUmVjb2duaXRpb25UcmlnZ2VyZWRFdmVudCAmJiBlLnJlcXVlc3RJZCA9PT0gdGhpcy5wcml2UmVxdWVzdElkKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZMaXN0ZW5pbmdUcmlnZ2VyTWV0cmljID0ge1xuICAgICAgICAgICAgICAgIEVuZDogZS5ldmVudFRpbWUsXG4gICAgICAgICAgICAgICAgTmFtZTogXCJMaXN0ZW5pbmdUcmlnZ2VyXCIsXG4gICAgICAgICAgICAgICAgU3RhcnQ6IGUuZXZlbnRUaW1lLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGluZ0V2ZW50ICYmIGUuYXVkaW9Tb3VyY2VJZCA9PT0gdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCAmJiBlLmF1ZGlvTm9kZUlkID09PSB0aGlzLnByaXZBdWRpb05vZGVJZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2TWljU3RhcnRUaW1lID0gZS5ldmVudFRpbWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50ICYmIGUuYXVkaW9Tb3VyY2VJZCA9PT0gdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCAmJiBlLmF1ZGlvTm9kZUlkID09PSB0aGlzLnByaXZBdWRpb05vZGVJZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2TWljU3RhcnRUaW1lID0gZS5ldmVudFRpbWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBdWRpb1NvdXJjZUVycm9yRXZlbnQgJiYgZS5hdWRpb1NvdXJjZUlkID09PSB0aGlzLnByaXZBdWRpb1NvdXJjZUlkKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJpdk1pY01ldHJpYykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdk1pY01ldHJpYyA9IHtcbiAgICAgICAgICAgICAgICAgICAgRW5kOiBlLmV2ZW50VGltZSxcbiAgICAgICAgICAgICAgICAgICAgRXJyb3I6IGUuZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIE5hbWU6IFwiTWljcm9waG9uZVwiLFxuICAgICAgICAgICAgICAgICAgICBTdGFydDogdGhpcy5wcml2TWljU3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBdWRpb1N0cmVhbU5vZGVFcnJvckV2ZW50ICYmIGUuYXVkaW9Tb3VyY2VJZCA9PT0gdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCAmJiBlLmF1ZGlvTm9kZUlkID09PSB0aGlzLnByaXZBdWRpb05vZGVJZCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZNaWNNZXRyaWMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZNaWNNZXRyaWMgPSB7XG4gICAgICAgICAgICAgICAgICAgIEVuZDogZS5ldmVudFRpbWUsXG4gICAgICAgICAgICAgICAgICAgIEVycm9yOiBlLmVycm9yLFxuICAgICAgICAgICAgICAgICAgICBOYW1lOiBcIk1pY3JvcGhvbmVcIixcbiAgICAgICAgICAgICAgICAgICAgU3RhcnQ6IHRoaXMucHJpdk1pY1N0YXJ0VGltZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgQXVkaW9TdHJlYW1Ob2RlRGV0YWNoZWRFdmVudCAmJiBlLmF1ZGlvU291cmNlSWQgPT09IHRoaXMucHJpdkF1ZGlvU291cmNlSWQgJiYgZS5hdWRpb05vZGVJZCA9PT0gdGhpcy5wcml2QXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wcml2TWljTWV0cmljKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TWljTWV0cmljID0ge1xuICAgICAgICAgICAgICAgICAgICBFbmQ6IGUuZXZlbnRUaW1lLFxuICAgICAgICAgICAgICAgICAgICBOYW1lOiBcIk1pY3JvcGhvbmVcIixcbiAgICAgICAgICAgICAgICAgICAgU3RhcnQ6IHRoaXMucHJpdk1pY1N0YXJ0VGltZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgQ29ubmVjdGluZ1RvU2VydmljZUV2ZW50ICYmIGUucmVxdWVzdElkID09PSB0aGlzLnByaXZSZXF1ZXN0SWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25JZCA9IGUuc2Vzc2lvbklkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgQ29ubmVjdGlvblN0YXJ0RXZlbnQgJiYgZS5jb25uZWN0aW9uSWQgPT09IHRoaXMucHJpdkNvbm5lY3Rpb25JZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblN0YXJ0VGltZSA9IGUuZXZlbnRUaW1lO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgQ29ubmVjdGlvbkVzdGFibGlzaGVkRXZlbnQgJiYgZS5jb25uZWN0aW9uSWQgPT09IHRoaXMucHJpdkNvbm5lY3Rpb25JZCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoTWV0cmljKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkVzdGFibGlzaE1ldHJpYyA9IHtcbiAgICAgICAgICAgICAgICAgICAgRW5kOiBlLmV2ZW50VGltZSxcbiAgICAgICAgICAgICAgICAgICAgSWQ6IHRoaXMucHJpdkNvbm5lY3Rpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgTmFtZTogXCJDb25uZWN0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgIFN0YXJ0OiB0aGlzLnByaXZDb25uZWN0aW9uU3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBDb25uZWN0aW9uRXN0YWJsaXNoRXJyb3JFdmVudCAmJiBlLmNvbm5lY3Rpb25JZCA9PT0gdGhpcy5wcml2Q29ubmVjdGlvbklkKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hNZXRyaWMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoTWV0cmljID0ge1xuICAgICAgICAgICAgICAgICAgICBFbmQ6IGUuZXZlbnRUaW1lLFxuICAgICAgICAgICAgICAgICAgICBFcnJvcjogdGhpcy5nZXRDb25uZWN0aW9uRXJyb3IoZS5zdGF0dXNDb2RlKSxcbiAgICAgICAgICAgICAgICAgICAgSWQ6IHRoaXMucHJpdkNvbm5lY3Rpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgTmFtZTogXCJDb25uZWN0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgIFN0YXJ0OiB0aGlzLnByaXZDb25uZWN0aW9uU3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBDb25uZWN0aW9uTWVzc2FnZVJlY2VpdmVkRXZlbnQgJiYgZS5jb25uZWN0aW9uSWQgPT09IHRoaXMucHJpdkNvbm5lY3Rpb25JZCkge1xuICAgICAgICAgICAgaWYgKGUubWVzc2FnZSAmJiBlLm1lc3NhZ2UuaGVhZGVycyAmJiBlLm1lc3NhZ2UuaGVhZGVycy5wYXRoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZSZWNlaXZlZE1lc3NhZ2VzW2UubWVzc2FnZS5oZWFkZXJzLnBhdGhdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY2VpdmVkTWVzc2FnZXNbZS5tZXNzYWdlLmhlYWRlcnMucGF0aF0gPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbWF4TWVzc2FnZXNUb1NlbmQgPSA1MDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2UmVjZWl2ZWRNZXNzYWdlc1tlLm1lc3NhZ2UuaGVhZGVycy5wYXRoXS5sZW5ndGggPCBtYXhNZXNzYWdlc1RvU2VuZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNlaXZlZE1lc3NhZ2VzW2UubWVzc2FnZS5oZWFkZXJzLnBhdGhdLnB1c2goZS5uZXR3b3JrUmVjZWl2ZWRUaW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0VGVsZW1ldHJ5KCkge1xuICAgICAgICBjb25zdCBtZXRyaWNzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIGlmICh0aGlzLnByaXZMaXN0ZW5pbmdUcmlnZ2VyTWV0cmljKSB7XG4gICAgICAgICAgICBtZXRyaWNzLnB1c2godGhpcy5wcml2TGlzdGVuaW5nVHJpZ2dlck1ldHJpYyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHJpdk1pY01ldHJpYykge1xuICAgICAgICAgICAgbWV0cmljcy5wdXNoKHRoaXMucHJpdk1pY01ldHJpYyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hNZXRyaWMpIHtcbiAgICAgICAgICAgIG1ldHJpY3MucHVzaCh0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoTWV0cmljKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcml2UGhyYXNlTGF0ZW5jaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG1ldHJpY3MucHVzaCh7XG4gICAgICAgICAgICAgICAgUGhyYXNlTGF0ZW5jeU1zOiB0aGlzLnByaXZQaHJhc2VMYXRlbmNpZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcml2SHlwb3RoZXNpc0xhdGVuY2llcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBtZXRyaWNzLnB1c2goe1xuICAgICAgICAgICAgICAgIEZpcnN0SHlwb3RoZXNpc0xhdGVuY3lNczogdGhpcy5wcml2SHlwb3RoZXNpc0xhdGVuY2llcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRlbGVtZXRyeSA9IHtcbiAgICAgICAgICAgIE1ldHJpY3M6IG1ldHJpY3MsXG4gICAgICAgICAgICBSZWNlaXZlZE1lc3NhZ2VzOiB0aGlzLnByaXZSZWNlaXZlZE1lc3NhZ2VzLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkodGVsZW1ldHJ5KTtcbiAgICAgICAgLy8gV2UgZG9udCB3YW50IHRvIHNlbmQgdGhlIHNhbWUgdGVsZW1ldHJ5IGFnYWluLiBTbyBjbGVhbiB0aG9zZSBvdXQuXG4gICAgICAgIHRoaXMucHJpdlJlY2VpdmVkTWVzc2FnZXMgPSB7fTtcbiAgICAgICAgdGhpcy5wcml2TGlzdGVuaW5nVHJpZ2dlck1ldHJpYyA9IG51bGw7XG4gICAgICAgIHRoaXMucHJpdk1pY01ldHJpYyA9IG51bGw7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Fc3RhYmxpc2hNZXRyaWMgPSBudWxsO1xuICAgICAgICB0aGlzLnByaXZQaHJhc2VMYXRlbmNpZXMgPSBbXTtcbiAgICAgICAgdGhpcy5wcml2SHlwb3RoZXNpc0xhdGVuY2llcyA9IFtdO1xuICAgICAgICByZXR1cm4ganNvbjtcbiAgICB9XG4gICAgLy8gRGV0ZXJtaW5lcyBpZiB0aGVyZSBhcmUgYW55IHRlbGVtZXRyeSBldmVudHMgdG8gc2VuZCB0byB0aGUgc2VydmljZS5cbiAgICBnZXQgaGFzVGVsZW1ldHJ5KCkge1xuICAgICAgICByZXR1cm4gKE9iamVjdC5rZXlzKHRoaXMucHJpdlJlY2VpdmVkTWVzc2FnZXMpLmxlbmd0aCAhPT0gMCB8fFxuICAgICAgICAgICAgdGhpcy5wcml2TGlzdGVuaW5nVHJpZ2dlck1ldHJpYyAhPT0gbnVsbCB8fFxuICAgICAgICAgICAgdGhpcy5wcml2TWljTWV0cmljICE9PSBudWxsIHx8XG4gICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRXN0YWJsaXNoTWV0cmljICE9PSBudWxsIHx8XG4gICAgICAgICAgICB0aGlzLnByaXZQaHJhc2VMYXRlbmNpZXMubGVuZ3RoICE9PSAwIHx8XG4gICAgICAgICAgICB0aGlzLnByaXZIeXBvdGhlc2lzTGF0ZW5jaWVzLmxlbmd0aCAhPT0gMCk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSB0cnVlO1xuICAgIH1cbiAgICBnZXRDb25uZWN0aW9uRXJyb3Ioc3RhdHVzQ29kZSkge1xuICAgICAgICAvKlxuICAgICAgICAtLSBXZWJzb2NrZXQgc3RhdHVzIGNvZGVzIC0tXG4gICAgICAgIE5vcm1hbENsb3N1cmUgPSAxMDAwLFxuICAgICAgICBFbmRwb2ludFVuYXZhaWxhYmxlID0gMTAwMSxcbiAgICAgICAgUHJvdG9jb2xFcnJvciA9IDEwMDIsXG4gICAgICAgIEludmFsaWRNZXNzYWdlVHlwZSA9IDEwMDMsXG4gICAgICAgIEVtcHR5ID0gMTAwNSxcbiAgICAgICAgSW52YWxpZFBheWxvYWREYXRhID0gMTAwNyxcbiAgICAgICAgUG9saWN5VmlvbGF0aW9uID0gMTAwOCxcbiAgICAgICAgTWVzc2FnZVRvb0JpZyA9IDEwMDksXG4gICAgICAgIE1hbmRhdG9yeUV4dGVuc2lvbiA9IDEwMTAsXG4gICAgICAgIEludGVybmFsU2VydmVyRXJyb3IgPSAxMDExXG4gICAgICAgICovXG4gICAgICAgIHN3aXRjaCAoc3RhdHVzQ29kZSkge1xuICAgICAgICAgICAgY2FzZSA0MDA6XG4gICAgICAgICAgICBjYXNlIDEwMDI6XG4gICAgICAgICAgICBjYXNlIDEwMDM6XG4gICAgICAgICAgICBjYXNlIDEwMDU6XG4gICAgICAgICAgICBjYXNlIDEwMDc6XG4gICAgICAgICAgICBjYXNlIDEwMDg6XG4gICAgICAgICAgICBjYXNlIDEwMDk6IHJldHVybiBcIkJhZFJlcXVlc3RcIjtcbiAgICAgICAgICAgIGNhc2UgNDAxOiByZXR1cm4gXCJVbmF1dGhvcml6ZWRcIjtcbiAgICAgICAgICAgIGNhc2UgNDAzOiByZXR1cm4gXCJGb3JiaWRkZW5cIjtcbiAgICAgICAgICAgIGNhc2UgNTAzOlxuICAgICAgICAgICAgY2FzZSAxMDAxOiByZXR1cm4gXCJTZXJ2ZXJVbmF2YWlsYWJsZVwiO1xuICAgICAgICAgICAgY2FzZSA1MDA6XG4gICAgICAgICAgICBjYXNlIDEwMTE6IHJldHVybiBcIlNlcnZlckVycm9yXCI7XG4gICAgICAgICAgICBjYXNlIDQwODpcbiAgICAgICAgICAgIGNhc2UgNTA0OiByZXR1cm4gXCJUaW1lb3V0XCI7XG4gICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gXCJzdGF0dXNjb2RlOlwiICsgc3RhdHVzQ29kZS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TZXJ2aWNlVGVsZW1ldHJ5TGlzdGVuZXIuSW50ZXJuYWwuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENvbnRleHQgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG5leHBvcnQgY2xhc3MgU3BlYWtlclJlY29nbml0aW9uQ29uZmlnIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0LCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIHRoaXMucHJpdkNvbnRleHQgPSBjb250ZXh0ID8gY29udGV4dCA6IG5ldyBDb250ZXh0KG51bGwpO1xuICAgICAgICB0aGlzLnByaXZQYXJhbWV0ZXJzID0gcGFyYW1ldGVycztcbiAgICB9XG4gICAgZ2V0IHBhcmFtZXRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJhbWV0ZXJzO1xuICAgIH1cbiAgICBnZXQgQ29udGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbnRleHQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVha2VyUmVjb2duaXRpb25Db25maWcuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5pbXBvcnQgeyBQcm94eUluZm8sIFdlYnNvY2tldENvbm5lY3Rpb24sIH0gZnJvbSBcIi4uL2NvbW1vbi5icm93c2VyL0V4cG9ydHNcIjtcbmltcG9ydCB7IFByb3BlcnR5SWQgfSBmcm9tIFwiLi4vc2RrL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb25GYWN0b3J5QmFzZSB9IGZyb20gXCIuL0Nvbm5lY3Rpb25GYWN0b3J5QmFzZVwiO1xuaW1wb3J0IHsgV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlciwgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBIZWFkZXJOYW1lcyB9IGZyb20gXCIuL0hlYWRlck5hbWVzXCI7XG5jbGFzcyBTcGVha2VyUmVjb2duaXRpb25Db25uZWN0aW9uRmFjdG9yeUJhc2UgZXh0ZW5kcyBDb25uZWN0aW9uRmFjdG9yeUJhc2Uge1xuICAgIGNyZWF0ZShjb25maWcsIGF1dGhJbmZvLCBlbmRwb2ludFBhdGgsIGNvbm5lY3Rpb25JZCkge1xuICAgICAgICBsZXQgZW5kcG9pbnQgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50KTtcbiAgICAgICAgaWYgKCFlbmRwb2ludCkge1xuICAgICAgICAgICAgY29uc3QgcmVnaW9uID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24pO1xuICAgICAgICAgICAgY29uc3QgaG9zdFN1ZmZpeCA9IENvbm5lY3Rpb25GYWN0b3J5QmFzZS5nZXRIb3N0U3VmZml4KHJlZ2lvbik7XG4gICAgICAgICAgICBjb25zdCBob3N0ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Ib3N0LCBgd3NzOi8vJHtyZWdpb259LnNwci1mcm9udGVuZC5zcGVlY2gke2hvc3RTdWZmaXh9YCk7XG4gICAgICAgICAgICBjb25zdCBzY2VuYXJpbyA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fU3BlYWtlcklkTW9kZSwgXCJUZXh0SW5kZXBlbmRlbnRJZGVudGlmaWNhdGlvblwiKTtcbiAgICAgICAgICAgIGVuZHBvaW50ID0gYCR7aG9zdH0vc3BlYWtlci93cy8ke3RoaXMuc2NlbmFyaW9Ub1BhdGgoc2NlbmFyaW8pfS8ke2VuZHBvaW50UGF0aH1gO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0ge1xuICAgICAgICAgICAgZm9ybWF0OiBcInNpbXBsZVwiLFxuICAgICAgICAgICAgbGFuZ3VhZ2U6IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlKSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZXRDb21tb25VcmxQYXJhbXMoY29uZmlnLCBxdWVyeVBhcmFtcywgZW5kcG9pbnQpO1xuICAgICAgICBjb25zdCBoZWFkZXJzID0ge307XG4gICAgICAgIGlmIChhdXRoSW5mby50b2tlbiAhPT0gdW5kZWZpbmVkICYmIGF1dGhJbmZvLnRva2VuICE9PSBcIlwiKSB7XG4gICAgICAgICAgICBoZWFkZXJzW2F1dGhJbmZvLmhlYWRlck5hbWVdID0gYXV0aEluZm8udG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgaGVhZGVyc1tIZWFkZXJOYW1lcy5Db25uZWN0aW9uSWRdID0gY29ubmVjdGlvbklkO1xuICAgICAgICBoZWFkZXJzW0hlYWRlck5hbWVzLlNwSURBdXRoS2V5XSA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5KTtcbiAgICAgICAgY29uZmlnLnBhcmFtZXRlcnMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9VcmwsIGVuZHBvaW50KTtcbiAgICAgICAgY29uc3QgZW5hYmxlQ29tcHJlc3Npb24gPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShcIlNQRUVDSC1FbmFibGVXZWJzb2NrZXRDb21wcmVzc2lvblwiLCBcImZhbHNlXCIpID09PSBcInRydWVcIjtcbiAgICAgICAgcmV0dXJuIG5ldyBXZWJzb2NrZXRDb25uZWN0aW9uKGVuZHBvaW50LCBxdWVyeVBhcmFtcywgaGVhZGVycywgbmV3IFdlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIoKSwgUHJveHlJbmZvLmZyb21SZWNvZ25pemVyQ29uZmlnKGNvbmZpZyksIGVuYWJsZUNvbXByZXNzaW9uLCBjb25uZWN0aW9uSWQpO1xuICAgIH1cbiAgICBzY2VuYXJpb1RvUGF0aChtb2RlKSB7XG4gICAgICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgICAgICAgY2FzZSBcIlRleHRJbmRlcGVuZGVudFZlcmlmaWNhdGlvblwiOlxuICAgICAgICAgICAgY2FzZSBcIjJcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ2ZXJpZmljYXRpb24vdGV4dC1pbmRlcGVuZGVudFwiO1xuICAgICAgICAgICAgY2FzZSBcIlRleHREZXBlbmRlbnRWZXJpZmljYXRpb25cIjpcbiAgICAgICAgICAgIGNhc2UgXCIxXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidmVyaWZpY2F0aW9uL3RleHQtZGVwZW5kZW50XCI7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBcImlkZW50aWZpY2F0aW9uL3RleHQtaW5kZXBlbmRlbnRcIjtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBTcGVha2VyUmVjb2duaXRpb25Db25uZWN0aW9uRmFjdG9yeSBleHRlbmRzIFNwZWFrZXJSZWNvZ25pdGlvbkNvbm5lY3Rpb25GYWN0b3J5QmFzZSB7XG4gICAgY3JlYXRlKGNvbmZpZywgYXV0aEluZm8sIGNvbm5lY3Rpb25JZCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuY3JlYXRlKGNvbmZpZywgYXV0aEluZm8sIFwicmVjb2duaXRpb25cIiwgY29ubmVjdGlvbklkKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgVm9pY2VQcm9maWxlQ29ubmVjdGlvbkZhY3RvcnkgZXh0ZW5kcyBTcGVha2VyUmVjb2duaXRpb25Db25uZWN0aW9uRmFjdG9yeUJhc2Uge1xuICAgIGNyZWF0ZShjb25maWcsIGF1dGhJbmZvLCBjb25uZWN0aW9uSWQpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmNyZWF0ZShjb25maWcsIGF1dGhJbmZvLCBcInByb2ZpbGVcIiwgY29ubmVjdGlvbklkKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWFrZXJSZWNvZ25pdGlvbkNvbm5lY3Rpb25GYWN0b3J5LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IFJlcGxheWFibGVBdWRpb05vZGUgfSBmcm9tIFwiLi4vY29tbW9uLmJyb3dzZXIvRXhwb3J0c1wiO1xuaW1wb3J0IHsgRGVmZXJyZWQsIE1lc3NhZ2VUeXBlLCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBDYW5jZWxsYXRpb25SZWFzb24sIFNwZWFrZXJSZWNvZ25pdGlvblJlc3VsdCwgUHJvcGVydHlDb2xsZWN0aW9uLCBQcm9wZXJ0eUlkLCBSZXN1bHRSZWFzb24sIFNlc3Npb25FdmVudEFyZ3MsIH0gZnJvbSBcIi4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIFNlcnZpY2VSZWNvZ25pemVyQmFzZSwgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZSB9IGZyb20gXCIuL1NwZWVjaENvbm5lY3Rpb25NZXNzYWdlLkludGVybmFsXCI7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBTcGVha2VyU2VydmljZVJlY29nbml6ZXIgZXh0ZW5kcyBTZXJ2aWNlUmVjb2duaXplckJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Tb3VyY2UsIHJlY29nbml6ZXJDb25maWcsIHJlY29nbml6ZXIpIHtcbiAgICAgICAgc3VwZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb1NvdXJjZSwgcmVjb2duaXplckNvbmZpZywgcmVjb2duaXplcik7XG4gICAgICAgIHRoaXMucHJpdlNwZWFrZXJSZWNvZ25pemVyID0gcmVjb2duaXplcjtcbiAgICAgICAgdGhpcy5wcml2U3BlYWtlckF1ZGlvU291cmNlID0gYXVkaW9Tb3VyY2U7XG4gICAgICAgIHRoaXMucmVjb2duaXplU3BlYWtlciA9IChtb2RlbCkgPT4gdGhpcy5yZWNvZ25pemVTcGVha2VyT25jZShtb2RlbCk7XG4gICAgICAgIHRoaXMuc2VuZFByZVBheWxvYWRKU09OT3ZlcnJpZGUgPSAoKSA9PiB0aGlzLm5vT3AoKTtcbiAgICB9XG4gICAgcHJvY2Vzc1R5cGVTcGVjaWZpY01lc3NhZ2VzKGNvbm5lY3Rpb25NZXNzYWdlKSB7XG4gICAgICAgIGxldCBwcm9jZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgcmVzdWx0UHJvcHMgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgIGlmIChjb25uZWN0aW9uTWVzc2FnZS5tZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuVGV4dCkge1xuICAgICAgICAgICAgcmVzdWx0UHJvcHMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfSnNvblJlc3VsdCwgY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAoY29ubmVjdGlvbk1lc3NhZ2UucGF0aC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICBjYXNlIFwic3BlYWtlci5yZXNwb25zZVwiOlxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gSlNPTi5wYXJzZShjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzLnN0YXR1c0NvZGUudG9Mb3dlckNhc2UoKSAhPT0gXCJzdWNjZXNzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFNwZWFrZXJSZWNvZ25pdGlvblJlc3VsdChyZXNwb25zZSwgUmVzdWx0UmVhc29uLkNhbmNlbGVkLCBDYW5jZWxsYXRpb25FcnJvckNvZGUuU2VydmljZUVycm9yLCByZXNwb25zZS5zdGF0dXMucmVhc29uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBTcGVha2VyUmVjb2duaXRpb25SZXN1bHQocmVzcG9uc2UsIFJlc3VsdFJlYXNvbi5SZWNvZ25pemVkU3BlYWtlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlJlc3VsdERlZmVycmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlc3VsdERlZmVycmFsLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmZmVyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgZGVmZmVyYWwucmVzb2x2ZShwcm9jZXNzZWQpO1xuICAgICAgICByZXR1cm4gZGVmZmVyYWwucHJvbWlzZTtcbiAgICB9XG4gICAgLy8gQ2FuY2VscyByZWNvZ25pdGlvbi5cbiAgICBjYW5jZWxSZWNvZ25pdGlvbihzZXNzaW9uSWQsIHJlcXVlc3RJZCwgY2FuY2VsbGF0aW9uUmVhc29uLCBlcnJvckNvZGUsIGVycm9yKSB7XG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgIHByb3BlcnRpZXMuc2V0UHJvcGVydHkoQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBDYW5jZWxsYXRpb25FcnJvckNvZGVbZXJyb3JDb2RlXSk7XG4gICAgICAgIGlmICghIXRoaXMucHJpdlJlc3VsdERlZmVycmFsKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgU3BlYWtlclJlY29nbml0aW9uUmVzdWx0KHtcbiAgICAgICAgICAgICAgICBzY2VuYXJpbzogdGhpcy5wcml2U3BlYWtlck1vZGVsLnNjZW5hcmlvLFxuICAgICAgICAgICAgICAgIHN0YXR1czogeyBzdGF0dXNDb2RlOiBlcnJvciwgcmVhc29uOiBlcnJvciB9XG4gICAgICAgICAgICB9LCBSZXN1bHRSZWFzb24uQ2FuY2VsZWQsIGVycm9yQ29kZSwgZXJyb3IpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXN1bHREZWZlcnJhbC5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXN1bHREZWZlcnJhbC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJlY29nbml6ZVNwZWFrZXJPbmNlKG1vZGVsKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZTcGVha2VyTW9kZWwgPSBtb2RlbDtcbiAgICAgICAgICAgIHRoaXMudm9pY2VQcm9maWxlVHlwZSA9IG1vZGVsLnNjZW5hcmlvO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZSZXN1bHREZWZlcnJhbCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlc3VsdERlZmVycmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zdGFydE5ld1JlY29nbml0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5saXN0ZW5Gb3JTZXJ2aWNlVGVsZW1ldHJ5KHRoaXMucHJpdlNwZWFrZXJBdWRpb1NvdXJjZS5ldmVudHMpO1xuICAgICAgICAgICAgdGhpcy5wcml2UmVjb2duaXplckNvbmZpZy5wYXJhbWV0ZXJzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoX1Nlc3Npb25JZCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIC8vIFN0YXJ0IHRoZSBjb25uZWN0aW9uIHRvIHRoZSBzZXJ2aWNlLiBUaGUgcHJvbWlzZSB0aGlzIHdpbGwgY3JlYXRlIGlzIHN0b3JlZCBhbmQgd2lsbCBiZSB1c2VkIGJ5IGNvbmZpZ3VyZUNvbm5lY3Rpb24oKS5cbiAgICAgICAgICAgIGNvbnN0IGNvblByb21pc2UgPSB0aGlzLmNvbm5lY3RJbXBsKCk7XG4gICAgICAgICAgICBjb25zdCBwcmVBdWRpb1Byb21pc2UgPSB0aGlzLnNlbmRQcmVBdWRpb01lc3NhZ2VzKHRoaXMuZXh0cmFjdFNwZWFrZXJDb250ZXh0KG1vZGVsKSk7XG4gICAgICAgICAgICBjb25zdCBub2RlID0geWllbGQgdGhpcy5wcml2U3BlYWtlckF1ZGlvU291cmNlLmF0dGFjaCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5hdWRpb05vZGVJZCk7XG4gICAgICAgICAgICBjb25zdCBmb3JtYXQgPSB5aWVsZCB0aGlzLnByaXZTcGVha2VyQXVkaW9Tb3VyY2UuZm9ybWF0O1xuICAgICAgICAgICAgY29uc3QgZGV2aWNlSW5mbyA9IHlpZWxkIHRoaXMucHJpdlNwZWFrZXJBdWRpb1NvdXJjZS5kZXZpY2VJbmZvO1xuICAgICAgICAgICAgY29uc3QgYXVkaW9Ob2RlID0gbmV3IFJlcGxheWFibGVBdWRpb05vZGUobm9kZSwgZm9ybWF0LmF2Z0J5dGVzUGVyU2VjKTtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uQXVkaW9Tb3VyY2VBdHRhY2hDb21wbGV0ZWQoYXVkaW9Ob2RlLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLlNwZWVjaFNlcnZpY2VDb25maWcuQ29udGV4dC5hdWRpbyA9IHsgc291cmNlOiBkZXZpY2VJbmZvIH07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHlpZWxkIGNvblByb21pc2U7XG4gICAgICAgICAgICAgICAgeWllbGQgcHJlQXVkaW9Qcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsUmVjb2duaXRpb24odGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIENhbmNlbGxhdGlvblJlYXNvbi5FcnJvciwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLkNvbm5lY3Rpb25GYWlsdXJlLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvblN0YXJ0RXZlbnRBcmdzID0gbmV3IFNlc3Npb25FdmVudEFyZ3ModGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlJlY29nbml6ZXIuc2Vzc2lvblN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyLnNlc3Npb25TdGFydGVkKHRoaXMucHJpdlJlY29nbml6ZXIsIHNlc3Npb25TdGFydEV2ZW50QXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2b2lkIHRoaXMucmVjZWl2ZU1lc3NhZ2UoKTtcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvU2VuZFByb21pc2UgPSB0aGlzLnNlbmRBdWRpbyhhdWRpb05vZGUpO1xuICAgICAgICAgICAgLy8gLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgIGF1ZGlvU2VuZFByb21pc2UudGhlbigoKSA9PiB7IH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsUmVjb2duaXRpb24odGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIENhbmNlbGxhdGlvblJlYXNvbi5FcnJvciwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLlJ1bnRpbWVFcnJvciwgZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVzdWx0RGVmZXJyYWwucHJvbWlzZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNlbmRQcmVBdWRpb01lc3NhZ2VzKGNvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5zZW5kU3BlYWtlclJlY29nbml0aW9uKGNvbm5lY3Rpb24sIGNvbnRleHQpO1xuICAgICAgICAgICAgLy8gYXdhaXQgdGhpcy5zZW5kV2F2ZUhlYWRlcihjb25uZWN0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNlbmRTcGVha2VyUmVjb2duaXRpb24oY29ubmVjdGlvbiwgY29udGV4dCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3Qgc3BlYWtlckNvbnRleHRKc29uID0gSlNPTi5zdHJpbmdpZnkoY29udGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBcInNwZWFrZXIuY29udGV4dFwiLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiLCBzcGVha2VyQ29udGV4dEpzb24pKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4dHJhY3RTcGVha2VyQ29udGV4dChtb2RlbCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmVhdHVyZXM6IHtcbiAgICAgICAgICAgICAgICBpbnRlcmltUmVzdWx0OiBcImVuYWJsZWRcIixcbiAgICAgICAgICAgICAgICBwcm9ncmVzc2l2ZURldGVjdGlvbjogXCJkaXNhYmxlZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb2ZpbGVJZHM6IG1vZGVsLnByb2ZpbGVJZHMsXG4gICAgICAgICAgICBzY2VuYXJpbzogbW9kZWwuc2NlbmFyaW8sXG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVha2VyU2VydmljZVJlY29nbml6ZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFByb3h5SW5mbywgV2Vic29ja2V0Q29ubmVjdGlvbiwgfSBmcm9tIFwiLi4vY29tbW9uLmJyb3dzZXIvRXhwb3J0c1wiO1xuaW1wb3J0IHsgRm9yY2VEaWN0YXRpb25Qcm9wZXJ0eU5hbWUsIE91dHB1dEZvcm1hdFByb3BlcnR5TmFtZSwgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBPdXRwdXRGb3JtYXQsIFByb3BlcnR5SWQgfSBmcm9tIFwiLi4vc2RrL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb25GYWN0b3J5QmFzZSB9IGZyb20gXCIuL0Nvbm5lY3Rpb25GYWN0b3J5QmFzZVwiO1xuaW1wb3J0IHsgUmVjb2duaXRpb25Nb2RlLCBXZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuaW1wb3J0IHsgSGVhZGVyTmFtZXMgfSBmcm9tIFwiLi9IZWFkZXJOYW1lc1wiO1xuaW1wb3J0IHsgUXVlcnlQYXJhbWV0ZXJOYW1lcyB9IGZyb20gXCIuL1F1ZXJ5UGFyYW1ldGVyTmFtZXNcIjtcbmV4cG9ydCBjbGFzcyBTcGVlY2hDb25uZWN0aW9uRmFjdG9yeSBleHRlbmRzIENvbm5lY3Rpb25GYWN0b3J5QmFzZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuaW50ZXJhY3RpdmVSZWxhdGl2ZVVyaSA9IFwiL3NwZWVjaC9yZWNvZ25pdGlvbi9pbnRlcmFjdGl2ZS9jb2duaXRpdmVzZXJ2aWNlcy92MVwiO1xuICAgICAgICB0aGlzLmNvbnZlcnNhdGlvblJlbGF0aXZlVXJpID0gXCIvc3BlZWNoL3JlY29nbml0aW9uL2NvbnZlcnNhdGlvbi9jb2duaXRpdmVzZXJ2aWNlcy92MVwiO1xuICAgICAgICB0aGlzLmRpY3RhdGlvblJlbGF0aXZlVXJpID0gXCIvc3BlZWNoL3JlY29nbml0aW9uL2RpY3RhdGlvbi9jb2duaXRpdmVzZXJ2aWNlcy92MVwiO1xuICAgICAgICB0aGlzLnVuaXZlcnNhbFVyaSA9IFwiL3NwZWVjaC91bml2ZXJzYWwvdlwiO1xuICAgIH1cbiAgICBjcmVhdGUoY29uZmlnLCBhdXRoSW5mbywgY29ubmVjdGlvbklkKSB7XG4gICAgICAgIGxldCBlbmRwb2ludCA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnQsIHVuZGVmaW5lZCk7XG4gICAgICAgIGNvbnN0IHJlZ2lvbiA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVnaW9uLCB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBob3N0U3VmZml4ID0gQ29ubmVjdGlvbkZhY3RvcnlCYXNlLmdldEhvc3RTdWZmaXgocmVnaW9uKTtcbiAgICAgICAgY29uc3QgaG9zdCA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSG9zdCwgXCJ3c3M6Ly9cIiArIHJlZ2lvbiArIFwiLnN0dC5zcGVlY2hcIiArIGhvc3RTdWZmaXgpO1xuICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHt9O1xuICAgICAgICBjb25zdCBlbmRwb2ludElkID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludElkLCB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBsYW5ndWFnZSA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlLCB1bmRlZmluZWQpO1xuICAgICAgICBpZiAoZW5kcG9pbnRJZCkge1xuICAgICAgICAgICAgaWYgKCFlbmRwb2ludCB8fCBlbmRwb2ludC5zZWFyY2goUXVlcnlQYXJhbWV0ZXJOYW1lcy5DdXN0b21TcGVlY2hEZXBsb3ltZW50SWQpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuQ3VzdG9tU3BlZWNoRGVwbG95bWVudElkXSA9IGVuZHBvaW50SWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGFuZ3VhZ2UpIHtcbiAgICAgICAgICAgIGlmICghZW5kcG9pbnQgfHwgZW5kcG9pbnQuc2VhcmNoKFF1ZXJ5UGFyYW1ldGVyTmFtZXMuTGFuZ3VhZ2UpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuTGFuZ3VhZ2VdID0gbGFuZ3VhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlbmRwb2ludCB8fCBlbmRwb2ludC5zZWFyY2goUXVlcnlQYXJhbWV0ZXJOYW1lcy5Gb3JtYXQpID09PSAtMSkge1xuICAgICAgICAgICAgcXVlcnlQYXJhbXNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5Gb3JtYXRdID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCBPdXRwdXRGb3JtYXRbT3V0cHV0Rm9ybWF0LlNpbXBsZV0pLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbmZpZy5hdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuRW5hYmxlTGFuZ3VhZ2VJZF0gPSBcInRydWVcIjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldENvbW1vblVybFBhcmFtcyhjb25maWcsIHF1ZXJ5UGFyYW1zLCBlbmRwb2ludCk7XG4gICAgICAgIGlmICghZW5kcG9pbnQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoY29uZmlnLnJlY29nbml0aW9uTW9kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25Nb2RlLkNvbnZlcnNhdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KEZvcmNlRGljdGF0aW9uUHJvcGVydHlOYW1lLCBcImZhbHNlXCIpID09PSBcInRydWVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQgPSBob3N0ICsgdGhpcy5kaWN0YXRpb25SZWxhdGl2ZVVyaTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcucmVjb2duaXRpb25FbmRwb2ludFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiBwYXJzZUludChjb25maWcucmVjb2duaXRpb25FbmRwb2ludFZlcnNpb24sIDEwKSA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRwb2ludCA9IGAke2hvc3R9JHt0aGlzLnVuaXZlcnNhbFVyaX0ke2NvbmZpZy5yZWNvZ25pdGlvbkVuZHBvaW50VmVyc2lvbn1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQgPSBob3N0ICsgdGhpcy5jb252ZXJzYXRpb25SZWxhdGl2ZVVyaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFJlY29nbml0aW9uTW9kZS5EaWN0YXRpb246XG4gICAgICAgICAgICAgICAgICAgIGVuZHBvaW50ID0gaG9zdCArIHRoaXMuZGljdGF0aW9uUmVsYXRpdmVVcmk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcucmVjb2duaXRpb25FbmRwb2ludFZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiBwYXJzZUludChjb25maWcucmVjb2duaXRpb25FbmRwb2ludFZlcnNpb24sIDEwKSA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvaW50ID0gYCR7aG9zdH0ke3RoaXMudW5pdmVyc2FsVXJpfSR7Y29uZmlnLnJlY29nbml0aW9uRW5kcG9pbnRWZXJzaW9ufWA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRwb2ludCA9IGhvc3QgKyB0aGlzLmludGVyYWN0aXZlUmVsYXRpdmVVcmk7IC8vIGRlZmF1bHQgaXMgaW50ZXJhY3RpdmVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoZWFkZXJzID0ge307XG4gICAgICAgIGlmIChhdXRoSW5mby50b2tlbiAhPT0gdW5kZWZpbmVkICYmIGF1dGhJbmZvLnRva2VuICE9PSBcIlwiKSB7XG4gICAgICAgICAgICBoZWFkZXJzW2F1dGhJbmZvLmhlYWRlck5hbWVdID0gYXV0aEluZm8udG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgaGVhZGVyc1tIZWFkZXJOYW1lcy5Db25uZWN0aW9uSWRdID0gY29ubmVjdGlvbklkO1xuICAgICAgICBjb25zdCBlbmFibGVDb21wcmVzc2lvbiA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFwiU1BFRUNILUVuYWJsZVdlYnNvY2tldENvbXByZXNzaW9uXCIsIFwiZmFsc2VcIikgPT09IFwidHJ1ZVwiO1xuICAgICAgICBjb25zdCB3ZWJTb2NrZXRDb25uZWN0aW9uID0gbmV3IFdlYnNvY2tldENvbm5lY3Rpb24oZW5kcG9pbnQsIHF1ZXJ5UGFyYW1zLCBoZWFkZXJzLCBuZXcgV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlcigpLCBQcm94eUluZm8uZnJvbVJlY29nbml6ZXJDb25maWcoY29uZmlnKSwgZW5hYmxlQ29tcHJlc3Npb24sIGNvbm5lY3Rpb25JZCk7XG4gICAgICAgIC8vIFNldCB0aGUgdmFsdWUgb2YgU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVXJsIHRvIHdlYlNvY2tldENvbm5lY3Rpb24udXJpIChhbmQgbm90IHRvIGBlbmRwb2ludGApLCBzaW5jZSB0aGlzIHZhbHVlIGlzIHRoZSBmaW5hbFxuICAgICAgICAvLyBVUkkgdGhhdCB3YXMgdXNlZCB0byBtYWtlIHRoZSBjb25uZWN0aW9uIChpbmNsdWRpbmcgcXVlcnkgcGFyYW1ldGVycykuXG4gICAgICAgIGNvbnN0IHVyaSA9IHdlYlNvY2tldENvbm5lY3Rpb24udXJpO1xuICAgICAgICBjb25maWcucGFyYW1ldGVycy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1VybCwgdXJpKTtcbiAgICAgICAgcmV0dXJuIHdlYlNvY2tldENvbm5lY3Rpb247XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hDb25uZWN0aW9uRmFjdG9yeS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQXJndW1lbnROdWxsRXJyb3IsIENvbm5lY3Rpb25NZXNzYWdlIH0gZnJvbSBcIi4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBIZWFkZXJOYW1lcyB9IGZyb20gXCIuL0hlYWRlck5hbWVzXCI7XG5leHBvcnQgY2xhc3MgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UgZXh0ZW5kcyBDb25uZWN0aW9uTWVzc2FnZSB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZVR5cGUsIHBhdGgsIHJlcXVlc3RJZCwgY29udGVudFR5cGUsIGJvZHksIHN0cmVhbUlkLCBhZGRpdGlvbmFsSGVhZGVycywgaWQpIHtcbiAgICAgICAgaWYgKCFwYXRoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXJyb3IoXCJwYXRoXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVxdWVzdElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnROdWxsRXJyb3IoXCJyZXF1ZXN0SWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHt9O1xuICAgICAgICBoZWFkZXJzW0hlYWRlck5hbWVzLlBhdGhdID0gcGF0aDtcbiAgICAgICAgaGVhZGVyc1tIZWFkZXJOYW1lcy5SZXF1ZXN0SWRdID0gcmVxdWVzdElkO1xuICAgICAgICBoZWFkZXJzW0hlYWRlck5hbWVzLlJlcXVlc3RUaW1lc3RhbXBdID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICBpZiAoY29udGVudFR5cGUpIHtcbiAgICAgICAgICAgIGhlYWRlcnNbSGVhZGVyTmFtZXMuQ29udGVudFR5cGVdID0gY29udGVudFR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0cmVhbUlkKSB7XG4gICAgICAgICAgICBoZWFkZXJzW0hlYWRlck5hbWVzLlJlcXVlc3RTdHJlYW1JZF0gPSBzdHJlYW1JZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWRkaXRpb25hbEhlYWRlcnMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaGVhZGVyTmFtZSBpbiBhZGRpdGlvbmFsSGVhZGVycykge1xuICAgICAgICAgICAgICAgIGlmIChoZWFkZXJOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbaGVhZGVyTmFtZV0gPSBhZGRpdGlvbmFsSGVhZGVyc1toZWFkZXJOYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlkKSB7XG4gICAgICAgICAgICBzdXBlcihtZXNzYWdlVHlwZSwgYm9keSwgaGVhZGVycywgaWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3VwZXIobWVzc2FnZVR5cGUsIGJvZHksIGhlYWRlcnMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdlBhdGggPSBwYXRoO1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0SWQgPSByZXF1ZXN0SWQ7XG4gICAgICAgIHRoaXMucHJpdkNvbnRlbnRUeXBlID0gY29udGVudFR5cGU7XG4gICAgICAgIHRoaXMucHJpdlN0cmVhbUlkID0gc3RyZWFtSWQ7XG4gICAgICAgIHRoaXMucHJpdkFkZGl0aW9uYWxIZWFkZXJzID0gYWRkaXRpb25hbEhlYWRlcnM7XG4gICAgfVxuICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGF0aDtcbiAgICB9XG4gICAgZ2V0IHJlcXVlc3RJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlcXVlc3RJZDtcbiAgICB9XG4gICAgZ2V0IGNvbnRlbnRUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29udGVudFR5cGU7XG4gICAgfVxuICAgIGdldCBzdHJlYW1JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlN0cmVhbUlkO1xuICAgIH1cbiAgICBnZXQgYWRkaXRpb25hbEhlYWRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBZGRpdGlvbmFsSGVhZGVycztcbiAgICB9XG4gICAgc3RhdGljIGZyb21Db25uZWN0aW9uTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgICAgIGxldCBwYXRoID0gbnVsbDtcbiAgICAgICAgbGV0IHJlcXVlc3RJZCA9IG51bGw7XG4gICAgICAgIGxldCBjb250ZW50VHlwZSA9IG51bGw7XG4gICAgICAgIC8vIGxldCByZXF1ZXN0VGltZXN0YW1wID0gbnVsbDtcbiAgICAgICAgbGV0IHN0cmVhbUlkID0gbnVsbDtcbiAgICAgICAgY29uc3QgYWRkaXRpb25hbEhlYWRlcnMgPSB7fTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuaGVhZGVycykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBoZWFkZXJOYW1lIGluIG1lc3NhZ2UuaGVhZGVycykge1xuICAgICAgICAgICAgICAgIGlmIChoZWFkZXJOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXJOYW1lLnRvTG93ZXJDYXNlKCkgPT09IEhlYWRlck5hbWVzLlBhdGgudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IG1lc3NhZ2UuaGVhZGVyc1toZWFkZXJOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChoZWFkZXJOYW1lLnRvTG93ZXJDYXNlKCkgPT09IEhlYWRlck5hbWVzLlJlcXVlc3RJZC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQgPSBtZXNzYWdlLmhlYWRlcnNbaGVhZGVyTmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB9IGVsc2UgaWYgKGhlYWRlck5hbWUudG9Mb3dlckNhc2UoKSA9PT0gSGVhZGVyTmFtZXMuUmVxdWVzdFRpbWVzdGFtcC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgcmVxdWVzdFRpbWVzdGFtcCA9IG1lc3NhZ2UuaGVhZGVyc1toZWFkZXJOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChoZWFkZXJOYW1lLnRvTG93ZXJDYXNlKCkgPT09IEhlYWRlck5hbWVzLkNvbnRlbnRUeXBlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlID0gbWVzc2FnZS5oZWFkZXJzW2hlYWRlck5hbWVdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRlck5hbWUudG9Mb3dlckNhc2UoKSA9PT0gSGVhZGVyTmFtZXMuUmVxdWVzdFN0cmVhbUlkLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbUlkID0gbWVzc2FnZS5oZWFkZXJzW2hlYWRlck5hbWVdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbEhlYWRlcnNbaGVhZGVyTmFtZV0gPSBtZXNzYWdlLmhlYWRlcnNbaGVhZGVyTmFtZV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShtZXNzYWdlLm1lc3NhZ2VUeXBlLCBwYXRoLCByZXF1ZXN0SWQsIGNvbnRlbnRUeXBlLCBtZXNzYWdlLmJvZHksIHN0cmVhbUlkLCBhZGRpdGlvbmFsSGVhZGVycywgbWVzc2FnZS5pZCk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hDb25uZWN0aW9uTWVzc2FnZS5JbnRlcm5hbC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBKU09OIHVzZWQgaW4gdGhlIHNwZWVjaC5jb250ZXh0IG1lc3NhZ2Ugc2VudCB0byB0aGUgc3BlZWNoIHNlcnZpY2UuXG4gKiBUaGUgZHluYW1pYyBncmFtbWFyIGlzIGFsd2F5cyByZWZyZXNoZWQgZnJvbSB0aGUgZW5jYXBzdWxhdGVkIGR5bmFtaWMgZ3JhbW1hciBvYmplY3QuXG4gKi9cbmV4cG9ydCBjbGFzcyBTcGVlY2hDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3RvcihkeW5hbWljR3JhbW1hcikge1xuICAgICAgICB0aGlzLnByaXZDb250ZXh0ID0ge307XG4gICAgICAgIHRoaXMucHJpdkR5bmFtaWNHcmFtbWFyID0gZHluYW1pY0dyYW1tYXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYSBzZWN0aW9uIG9mIHRoZSBzcGVlY2guY29udGV4dCBvYmplY3QuXG4gICAgICogQHBhcmFtIHNlY3Rpb25OYW1lIE5hbWUgb2YgdGhlIHNlY3Rpb24gdG8gZ2V0LlxuICAgICAqIEByZXR1cm4gc3RyaW5nIG9yIENvbnRleHQgSlNPTiBzZXJpYWxpemFibGUgb2JqZWN0IHRoYXQgcmVwcmVzZW50cyB0aGUgdmFsdWUuXG4gICAgICovXG4gICAgZ2V0U2VjdGlvbihzZWN0aW9uTmFtZSkge1xuICAgICAgICByZXR1cm4gKHRoaXMucHJpdkNvbnRleHRbc2VjdGlvbk5hbWVdIHx8IHt9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIHNlY3Rpb24gdG8gdGhlIHNwZWVjaC5jb250ZXh0IG9iamVjdC5cbiAgICAgKiBAcGFyYW0gc2VjdGlvbk5hbWUgTmFtZSBvZiB0aGUgc2VjdGlvbiB0byBhZGQuXG4gICAgICogQHBhcmFtIHZhbHVlIEpTT04gc2VyaWFsaXphYmxlIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgdGhlIHZhbHVlLlxuICAgICAqL1xuICAgIHNldFNlY3Rpb24oc2VjdGlvbk5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpdkNvbnRleHRbc2VjdGlvbk5hbWVdID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBJbnRlcm5hbFxuICAgICAqIFRoaXMgaXMgb25seSB1c2VkIGJ5IHByb251bmNpYXRpb24gYXNzZXNzbWVudCBjb25maWcuXG4gICAgICogRG8gbm90IHVzZSBleHRlcm5hbGx5LCBvYmplY3QgcmV0dXJuZWQgd2lsbCBjaGFuZ2Ugd2l0aG91dCB3YXJuaW5nIG9yIG5vdGljZS5cbiAgICAgKi9cbiAgICBzZXRQcm9udW5jaWF0aW9uQXNzZXNzbWVudFBhcmFtcyhwYXJhbXMpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdkNvbnRleHQucGhyYXNlRGV0ZWN0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbnRleHQucGhyYXNlRGV0ZWN0aW9uID0ge1xuICAgICAgICAgICAgICAgIGVucmljaG1lbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbnVuY2lhdGlvbkFzc2Vzc21lbnQ6IHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZDb250ZXh0LnBocmFzZURldGVjdGlvbi5lbnJpY2htZW50LnByb251bmNpYXRpb25Bc3Nlc3NtZW50ID0gSlNPTi5wYXJzZShwYXJhbXMpO1xuICAgICAgICB0aGlzLnNldFdvcmRMZXZlbFRpbWluZ3MoKTtcbiAgICAgICAgdGhpcy5wcml2Q29udGV4dC5waHJhc2VPdXRwdXQuZGV0YWlsZWQub3B0aW9ucy5wdXNoKFwiUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRcIik7XG4gICAgICAgIGlmICh0aGlzLnByaXZDb250ZXh0LnBocmFzZU91dHB1dC5kZXRhaWxlZC5vcHRpb25zLmluZGV4T2YoXCJTTlJcIikgPT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZDb250ZXh0LnBocmFzZU91dHB1dC5kZXRhaWxlZC5vcHRpb25zLnB1c2goXCJTTlJcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0V29yZExldmVsVGltaW5ncygpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdkNvbnRleHQucGhyYXNlT3V0cHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbnRleHQucGhyYXNlT3V0cHV0ID0ge1xuICAgICAgICAgICAgICAgIGRldGFpbGVkOiB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IFtdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IHt9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByaXZDb250ZXh0LnBocmFzZU91dHB1dC5kZXRhaWxlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZDb250ZXh0LnBocmFzZU91dHB1dC5kZXRhaWxlZCA9IHtcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZDb250ZXh0LnBocmFzZU91dHB1dC5mb3JtYXQgPSBcIkRldGFpbGVkXCI7XG4gICAgICAgIGlmICh0aGlzLnByaXZDb250ZXh0LnBocmFzZU91dHB1dC5kZXRhaWxlZC5vcHRpb25zLmluZGV4T2YoXCJXb3JkVGltaW5nc1wiKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbnRleHQucGhyYXNlT3V0cHV0LmRldGFpbGVkLm9wdGlvbnMucHVzaChcIldvcmRUaW1pbmdzXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3QgZGdpID0gdGhpcy5wcml2RHluYW1pY0dyYW1tYXIuZ2VuZXJhdGVHcmFtbWFyT2JqZWN0KCk7XG4gICAgICAgIHRoaXMuc2V0U2VjdGlvbihcImRnaVwiLCBkZ2kpO1xuICAgICAgICBjb25zdCByZXQgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnByaXZDb250ZXh0KTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaENvbnRleHQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoU2VydmljZUludGVyZmFjZXMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBPdXRwdXRGb3JtYXQsIFByb3BlcnR5Q29sbGVjdGlvbiwgUHJvcGVydHlJZCwgUmVzdWx0UmVhc29uLCBTcGVlY2hSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLCBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncywgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQsIH0gZnJvbSBcIi4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIERldGFpbGVkU3BlZWNoUGhyYXNlLCBFbnVtVHJhbnNsYXRpb24sIE91dHB1dEZvcm1hdFByb3BlcnR5TmFtZSwgUmVjb2duaXRpb25TdGF0dXMsIFNlcnZpY2VSZWNvZ25pemVyQmFzZSwgU2ltcGxlU3BlZWNoUGhyYXNlLCBTcGVlY2hIeXBvdGhlc2lzLCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIFNwZWVjaFNlcnZpY2VSZWNvZ25pemVyIGV4dGVuZHMgU2VydmljZVJlY29nbml6ZXJCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCBzcGVlY2hSZWNvZ25pemVyKSB7XG4gICAgICAgIHN1cGVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Tb3VyY2UsIHJlY29nbml6ZXJDb25maWcsIHNwZWVjaFJlY29nbml6ZXIpO1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hSZWNvZ25pemVyID0gc3BlZWNoUmVjb2duaXplcjtcbiAgICB9XG4gICAgcHJvY2Vzc1R5cGVTcGVjaWZpY01lc3NhZ2VzKGNvbm5lY3Rpb25NZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0UHJvcHMgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICByZXN1bHRQcm9wcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uUmVzdWx0LCBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICBsZXQgcHJvY2Vzc2VkID0gZmFsc2U7XG4gICAgICAgICAgICBzd2l0Y2ggKGNvbm5lY3Rpb25NZXNzYWdlLnBhdGgudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzcGVlY2guaHlwb3RoZXNpc1wiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJzcGVlY2guZnJhZ21lbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaHlwb3RoZXNpcyA9IFNwZWVjaEh5cG90aGVzaXMuZnJvbUpTT04oY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBoeXBvdGhlc2lzLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIFJlc3VsdFJlYXNvbi5SZWNvZ25pemluZ1NwZWVjaCwgaHlwb3RoZXNpcy5UZXh0LCBoeXBvdGhlc2lzLkR1cmF0aW9uLCBvZmZzZXQsIGh5cG90aGVzaXMuTGFuZ3VhZ2UsIGh5cG90aGVzaXMuTGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlLCB1bmRlZmluZWQsIC8vIFNwZWFrZXIgSWRcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSwgcmVzdWx0UHJvcHMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkh5cG90aGVzaXMob2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXYgPSBuZXcgU3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3MocmVzdWx0LCBoeXBvdGhlc2lzLkR1cmF0aW9uLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTcGVlY2hSZWNvZ25pemVyLnJlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFJlY29nbml6ZXIucmVjb2duaXppbmcodGhpcy5wcml2U3BlZWNoUmVjb2duaXplciwgZXYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzcGVlY2gucGhyYXNlXCI6XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpbXBsZSA9IFNpbXBsZVNwZWVjaFBocmFzZS5mcm9tSlNPTihjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdFJlYXNvbiA9IEVudW1UcmFuc2xhdGlvbi5pbXBsVHJhbnNsYXRlUmVjb2duaXRpb25SZXN1bHQoc2ltcGxlLlJlY29nbml0aW9uU3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25QaHJhc2VSZWNvZ25pemVkKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQgKyBzaW1wbGUuT2Zmc2V0ICsgc2ltcGxlLkR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFJlc3VsdFJlYXNvbi5DYW5jZWxlZCA9PT0gcmVzdWx0UmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWxSZWFzb24gPSBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZUNhbmNlbFJlc3VsdChzaW1wbGUuUmVjb2duaXRpb25TdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FuY2VsbGF0aW9uRXJyb3JDb2RlID0gRW51bVRyYW5zbGF0aW9uLmltcGxUcmFuc2xhdGVDYW5jZWxFcnJvckNvZGUoc2ltcGxlLlJlY29nbml0aW9uU3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuY2FuY2VsUmVjb2duaXRpb25Mb2NhbChjYW5jZWxSZWFzb24sIGNhbmNlbGxhdGlvbkVycm9yQ29kZSwgRW51bVRyYW5zbGF0aW9uLmltcGxUcmFuc2xhdGVFcnJvckRldGFpbHMoY2FuY2VsbGF0aW9uRXJyb3JDb2RlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1NwZWVjaEVuZGVkICYmIHJlc3VsdFJlYXNvbiA9PT0gUmVzdWx0UmVhc29uLk5vTWF0Y2ggJiYgc2ltcGxlLlJlY29nbml0aW9uU3RhdHVzICE9PSBSZWNvZ25pdGlvblN0YXR1cy5Jbml0aWFsU2lsZW5jZVRpbWVvdXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUpID09PSBPdXRwdXRGb3JtYXRbT3V0cHV0Rm9ybWF0LlNpbXBsZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uUmVzdWx0KHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgcmVzdWx0UmVhc29uLCBzaW1wbGUuRGlzcGxheVRleHQsIHNpbXBsZS5EdXJhdGlvbiwgc2ltcGxlLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQsIHNpbXBsZS5MYW5ndWFnZSwgc2ltcGxlLkxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSwgdW5kZWZpbmVkLCAvLyBTcGVha2VyIElkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHksIHJlc3VsdFByb3BzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRldGFpbGVkID0gRGV0YWlsZWRTcGVlY2hQaHJhc2UuZnJvbUpTT04oY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b3RhbE9mZnNldCA9IGRldGFpbGVkLk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNldENvcnJlY3RlZEpzb24gPSBkZXRhaWxlZC5nZXRKc29uV2l0aENvcnJlY3RlZE9mZnNldHModG90YWxPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQodGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCByZXN1bHRSZWFzb24sIGRldGFpbGVkLlJlY29nbml0aW9uU3RhdHVzID09PSBSZWNvZ25pdGlvblN0YXR1cy5TdWNjZXNzID8gZGV0YWlsZWQuTkJlc3RbMF0uRGlzcGxheSA6IHVuZGVmaW5lZCwgZGV0YWlsZWQuRHVyYXRpb24sIHRvdGFsT2Zmc2V0LCBkZXRhaWxlZC5MYW5ndWFnZSwgZGV0YWlsZWQuTGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlLCB1bmRlZmluZWQsIC8vIFNwZWFrZXIgSWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCBvZmZzZXRDb3JyZWN0ZWRKc29uLCByZXN1bHRQcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzKHJlc3VsdCwgcmVzdWx0Lm9mZnNldCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTcGVlY2hSZWNvZ25pemVyLnJlY29nbml6ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFJlY29nbml6ZXIucmVjb2duaXplZCh0aGlzLnByaXZTcGVlY2hSZWNvZ25pemVyLCBldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkVycm9yQ2FsbGJhY2soZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSBpbnZva2UgdGhlIGNhbGwgYmFjayBvbmNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBpZiBpdCdzIHN1Y2Nlc3NmdWwgZG9uJ3QgaW52b2tlIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVycm9yIGFmdGVyIHRoYXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkVycm9yQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJvY2Vzc2VkO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gQ2FuY2VscyByZWNvZ25pdGlvbi5cbiAgICBjYW5jZWxSZWNvZ25pdGlvbihzZXNzaW9uSWQsIHJlcXVlc3RJZCwgY2FuY2VsbGF0aW9uUmVhc29uLCBlcnJvckNvZGUsIGVycm9yKSB7XG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgIHByb3BlcnRpZXMuc2V0UHJvcGVydHkoQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBDYW5jZWxsYXRpb25FcnJvckNvZGVbZXJyb3JDb2RlXSk7XG4gICAgICAgIGlmICghIXRoaXMucHJpdlNwZWVjaFJlY29nbml6ZXIuY2FuY2VsZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbEV2ZW50ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MoY2FuY2VsbGF0aW9uUmVhc29uLCBlcnJvciwgZXJyb3JDb2RlLCB1bmRlZmluZWQsIHNlc3Npb25JZCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFJlY29nbml6ZXIuY2FuY2VsZWQodGhpcy5wcml2U3BlZWNoUmVjb2duaXplciwgY2FuY2VsRXZlbnQpO1xuICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghIXRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFNwZWVjaFJlY29nbml0aW9uUmVzdWx0KHJlcXVlc3RJZCwgUmVzdWx0UmVhc29uLkNhbmNlbGVkLCB1bmRlZmluZWQsIC8vIFRleHRcbiAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gRHVyYXRpb25cbiAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gT2Zmc2V0XG4gICAgICAgICAgICB1bmRlZmluZWQsIC8vIExhbmd1YWdlXG4gICAgICAgICAgICB1bmRlZmluZWQsIC8vIExhbmd1YWdlIERldGVjdGlvbiBDb25maWRlbmNlXG4gICAgICAgICAgICB1bmRlZmluZWQsIC8vIFNwZWFrZXIgSWRcbiAgICAgICAgICAgIGVycm9yLCB1bmRlZmluZWQsIC8vIEpzb25cbiAgICAgICAgICAgIHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfYikgeyB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaFNlcnZpY2VSZWNvZ25pemVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBQcm94eUluZm8sIFdlYnNvY2tldENvbm5lY3Rpb24gfSBmcm9tIFwiLi4vY29tbW9uLmJyb3dzZXIvRXhwb3J0c1wiO1xuaW1wb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29ubmVjdGlvbkZhY3RvcnlCYXNlIH0gZnJvbSBcIi4vQ29ubmVjdGlvbkZhY3RvcnlCYXNlXCI7XG5pbXBvcnQgeyBXZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuaW1wb3J0IHsgSGVhZGVyTmFtZXMgfSBmcm9tIFwiLi9IZWFkZXJOYW1lc1wiO1xuaW1wb3J0IHsgUXVlcnlQYXJhbWV0ZXJOYW1lcyB9IGZyb20gXCIuL1F1ZXJ5UGFyYW1ldGVyTmFtZXNcIjtcbmV4cG9ydCBjbGFzcyBTcGVlY2hTeW50aGVzaXNDb25uZWN0aW9uRmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc3ludGhlc2lzVXJpID0gXCIvY29nbml0aXZlc2VydmljZXMvd2Vic29ja2V0L3YxXCI7XG4gICAgfVxuICAgIGNyZWF0ZShjb25maWcsIGF1dGhJbmZvLCBjb25uZWN0aW9uSWQpIHtcbiAgICAgICAgbGV0IGVuZHBvaW50ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCwgdW5kZWZpbmVkKTtcbiAgICAgICAgY29uc3QgcmVnaW9uID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24sIHVuZGVmaW5lZCk7XG4gICAgICAgIGNvbnN0IGhvc3RTdWZmaXggPSBDb25uZWN0aW9uRmFjdG9yeUJhc2UuZ2V0SG9zdFN1ZmZpeChyZWdpb24pO1xuICAgICAgICBjb25zdCBlbmRwb2ludElkID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludElkLCB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBob3N0UHJlZml4ID0gKGVuZHBvaW50SWQgPT09IHVuZGVmaW5lZCkgPyBcInR0c1wiIDogXCJ2b2ljZVwiO1xuICAgICAgICBjb25zdCBob3N0ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Ib3N0LCBcIndzczovL1wiICsgcmVnaW9uICsgXCIuXCIgKyBob3N0UHJlZml4ICsgXCIuc3BlZWNoXCIgKyBob3N0U3VmZml4KTtcbiAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7fTtcbiAgICAgICAgaWYgKCFlbmRwb2ludCkge1xuICAgICAgICAgICAgZW5kcG9pbnQgPSBob3N0ICsgdGhpcy5zeW50aGVzaXNVcmk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHt9O1xuICAgICAgICBpZiAoYXV0aEluZm8udG9rZW4gIT09IHVuZGVmaW5lZCAmJiBhdXRoSW5mby50b2tlbiAhPT0gXCJcIikge1xuICAgICAgICAgICAgaGVhZGVyc1thdXRoSW5mby5oZWFkZXJOYW1lXSA9IGF1dGhJbmZvLnRva2VuO1xuICAgICAgICB9XG4gICAgICAgIGhlYWRlcnNbSGVhZGVyTmFtZXMuQ29ubmVjdGlvbklkXSA9IGNvbm5lY3Rpb25JZDtcbiAgICAgICAgaWYgKGVuZHBvaW50SWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaGVhZGVyc1tRdWVyeVBhcmFtZXRlck5hbWVzLkN1c3RvbVZvaWNlRGVwbG95bWVudElkXSA9IGVuZHBvaW50SWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uZmlnLnBhcmFtZXRlcnMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9VcmwsIGVuZHBvaW50KTtcbiAgICAgICAgY29uc3QgZW5hYmxlQ29tcHJlc3Npb24gPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShcIlNQRUVDSC1FbmFibGVXZWJzb2NrZXRDb21wcmVzc2lvblwiLCBcImZhbHNlXCIpID09PSBcInRydWVcIjtcbiAgICAgICAgcmV0dXJuIG5ldyBXZWJzb2NrZXRDb25uZWN0aW9uKGVuZHBvaW50LCBxdWVyeVBhcmFtcywgaGVhZGVycywgbmV3IFdlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIoKSwgUHJveHlJbmZvLmZyb21QYXJhbWV0ZXJzKGNvbmZpZy5wYXJhbWV0ZXJzKSwgZW5hYmxlQ29tcHJlc3Npb24sIGNvbm5lY3Rpb25JZCk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hTeW50aGVzaXNDb25uZWN0aW9uRmFjdG9yeS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBBcmd1bWVudE51bGxFcnJvciwgQ29ubmVjdGlvblN0YXRlLCBjcmVhdGVOb0Rhc2hHdWlkLCBFdmVudFNvdXJjZSwgTWVzc2FnZVR5cGUsIFNlcnZpY2VFdmVudCwgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IENhbmNlbGxhdGlvbkVycm9yQ29kZSwgQ2FuY2VsbGF0aW9uUmVhc29uLCBQcm9wZXJ0eUNvbGxlY3Rpb24sIFByb3BlcnR5SWQsIFJlc3VsdFJlYXNvbiwgU3BlZWNoU3ludGhlc2lzQm9va21hcmtFdmVudEFyZ3MsIFNwZWVjaFN5bnRoZXNpc0V2ZW50QXJncywgU3BlZWNoU3ludGhlc2lzUmVzdWx0LCBTcGVlY2hTeW50aGVzaXNWaXNlbWVFdmVudEFyZ3MsIFNwZWVjaFN5bnRoZXNpc1dvcmRCb3VuZGFyeUV2ZW50QXJncywgfSBmcm9tIFwiLi4vc2RrL0V4cG9ydHNcIjtcbmltcG9ydCB7IEFnZW50Q29uZmlnLCBDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIE1ldGFkYXRhVHlwZSwgU3ludGhlc2lzQXVkaW9NZXRhZGF0YSwgU3ludGhlc2lzQ29udGV4dCwgU3ludGhlc2lzVHVybiB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbmltcG9ydCB7IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlIH0gZnJvbSBcIi4vU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UuSW50ZXJuYWxcIjtcbmV4cG9ydCBjbGFzcyBTeW50aGVzaXNBZGFwdGVyQmFzZSB7XG4gICAgY29uc3RydWN0b3IoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBzeW50aGVzaXplckNvbmZpZywgc3BlZWNoU3ludGhlc2l6ZXIsIGF1ZGlvRGVzdGluYXRpb24pIHtcbiAgICAgICAgdGhpcy5zcGVha092ZXJyaWRlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnJlY2VpdmVNZXNzYWdlT3ZlcnJpZGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuY29ubmVjdEltcGxPdmVycmlkZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jb25maWdDb25uZWN0aW9uT3ZlcnJpZGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8vIEEgcHJvbWlzZSBmb3IgYSBjb25maWd1cmVkIGNvbm5lY3Rpb24uXG4gICAgICAgIC8vIERvIG5vdCBjb25zdW1lIGRpcmVjdGx5LCBjYWxsIGZldGNoQ29ubmVjdGlvbiBpbnN0ZWFkLlxuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICghYXV0aGVudGljYXRpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcImF1dGhlbnRpY2F0aW9uXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY29ubmVjdGlvbkZhY3RvcnkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcImNvbm5lY3Rpb25GYWN0b3J5XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc3ludGhlc2l6ZXJDb25maWcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcInN5bnRoZXNpemVyQ29uZmlnXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdkF1dGhlbnRpY2F0aW9uID0gYXV0aGVudGljYXRpb247XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25GYWN0b3J5ID0gY29ubmVjdGlvbkZhY3Rvcnk7XG4gICAgICAgIHRoaXMucHJpdlN5bnRoZXNpemVyQ29uZmlnID0gc3ludGhlc2l6ZXJDb25maWc7XG4gICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIgPSBzcGVlY2hTeW50aGVzaXplcjtcbiAgICAgICAgdGhpcy5wcml2U2Vzc2lvbkF1ZGlvRGVzdGluYXRpb24gPSBhdWRpb0Rlc3RpbmF0aW9uO1xuICAgICAgICB0aGlzLnByaXZTeW50aGVzaXNUdXJuID0gbmV3IFN5bnRoZXNpc1R1cm4oKTtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkV2ZW50cyA9IG5ldyBFdmVudFNvdXJjZSgpO1xuICAgICAgICB0aGlzLnByaXZTZXJ2aWNlRXZlbnRzID0gbmV3IEV2ZW50U291cmNlKCk7XG4gICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc0NvbnRleHQgPSBuZXcgU3ludGhlc2lzQ29udGV4dCh0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplcik7XG4gICAgICAgIHRoaXMucHJpdkFnZW50Q29uZmlnID0gbmV3IEFnZW50Q29uZmlnKCk7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbkV2ZW50cy5hdHRhY2goKGNvbm5lY3Rpb25FdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb25FdmVudC5uYW1lID09PSBcIkNvbm5lY3Rpb25DbG9zZWRFdmVudFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbkNsb3NlZEV2ZW50ID0gY29ubmVjdGlvbkV2ZW50O1xuICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uQ2xvc2VkRXZlbnQuc3RhdHVzQ29kZSAhPT0gMTAwMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbFN5bnRoZXNpc0xvY2FsKENhbmNlbGxhdGlvblJlYXNvbi5FcnJvciwgY29ubmVjdGlvbkNsb3NlZEV2ZW50LnN0YXR1c0NvZGUgPT09IDEwMDcgPyBDYW5jZWxsYXRpb25FcnJvckNvZGUuQmFkUmVxdWVzdFBhcmFtZXRlcnMgOiBDYW5jZWxsYXRpb25FcnJvckNvZGUuQ29ubmVjdGlvbkZhaWx1cmUsIGAke2Nvbm5lY3Rpb25DbG9zZWRFdmVudC5yZWFzb259IHdlYnNvY2tldCBlcnJvciBjb2RlOiAke2Nvbm5lY3Rpb25DbG9zZWRFdmVudC5zdGF0dXNDb2RlfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBzeW50aGVzaXNDb250ZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3ludGhlc2lzQ29udGV4dDtcbiAgICB9XG4gICAgZ2V0IGFnZW50Q29uZmlnKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QWdlbnRDb25maWc7XG4gICAgfVxuICAgIGdldCBjb25uZWN0aW9uRXZlbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbkV2ZW50cztcbiAgICB9XG4gICAgZ2V0IHNlcnZpY2VFdmVudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTZXJ2aWNlRXZlbnRzO1xuICAgIH1cbiAgICBzZXQgYWN0aXZpdHlUZW1wbGF0ZShtZXNzYWdlUGF5bG9hZCkge1xuICAgICAgICB0aGlzLnByaXZBY3Rpdml0eVRlbXBsYXRlID0gbWVzc2FnZVBheWxvYWQ7XG4gICAgfVxuICAgIGdldCBhY3Rpdml0eVRlbXBsYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QWN0aXZpdHlUZW1wbGF0ZTtcbiAgICB9XG4gICAgc2V0IGF1ZGlvT3V0cHV0Rm9ybWF0KGZvcm1hdCkge1xuICAgICAgICB0aGlzLnByaXZBdWRpb091dHB1dEZvcm1hdCA9IGZvcm1hdDtcbiAgICAgICAgdGhpcy5wcml2U3ludGhlc2lzVHVybi5hdWRpb091dHB1dEZvcm1hdCA9IGZvcm1hdDtcbiAgICAgICAgaWYgKHRoaXMucHJpdlNlc3Npb25BdWRpb0Rlc3RpbmF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlNlc3Npb25BdWRpb0Rlc3RpbmF0aW9uLmZvcm1hdCA9IGZvcm1hdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zeW50aGVzaXNDb250ZXh0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3ludGhlc2lzQ29udGV4dC5hdWRpb091dHB1dEZvcm1hdCA9IGZvcm1hdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgYWRkSGVhZGVyKGF1ZGlvLCBmb3JtYXQpIHtcbiAgICAgICAgaWYgKCFmb3JtYXQuaGFzSGVhZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gYXVkaW87XG4gICAgICAgIH1cbiAgICAgICAgZm9ybWF0LnVwZGF0ZUhlYWRlcihhdWRpby5ieXRlTGVuZ3RoKTtcbiAgICAgICAgY29uc3QgdG1wID0gbmV3IFVpbnQ4QXJyYXkoYXVkaW8uYnl0ZUxlbmd0aCArIGZvcm1hdC5oZWFkZXIuYnl0ZUxlbmd0aCk7XG4gICAgICAgIHRtcC5zZXQobmV3IFVpbnQ4QXJyYXkoZm9ybWF0LmhlYWRlciksIDApO1xuICAgICAgICB0bXAuc2V0KG5ldyBVaW50OEFycmF5KGF1ZGlvKSwgZm9ybWF0LmhlYWRlci5ieXRlTGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIHRtcC5idWZmZXI7XG4gICAgfVxuICAgIGlzRGlzcG9zZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc0Rpc3Bvc2VkO1xuICAgIH1cbiAgICBkaXNwb3NlKHJlYXNvbikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2U2Vzc2lvbkF1ZGlvRGVzdGluYXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlNlc3Npb25BdWRpb0Rlc3RpbmF0aW9uLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uID0geWllbGQgdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlO1xuICAgICAgICAgICAgICAgIHlpZWxkIGNvbm5lY3Rpb24uZGlzcG9zZShyZWFzb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29ubmVjdCgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMuY29ubmVjdEltcGwoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNlbmROZXR3b3JrTWVzc2FnZShwYXRoLCBwYXlsb2FkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gdHlwZW9mIHBheWxvYWQgPT09IFwic3RyaW5nXCIgPyBNZXNzYWdlVHlwZS5UZXh0IDogTWVzc2FnZVR5cGUuQmluYXJ5O1xuICAgICAgICAgICAgY29uc3QgY29udGVudFR5cGUgPSB0eXBlb2YgcGF5bG9hZCA9PT0gXCJzdHJpbmdcIiA/IFwiYXBwbGljYXRpb24vanNvblwiIDogXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24uc2VuZChuZXcgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UodHlwZSwgcGF0aCwgdGhpcy5wcml2U3ludGhlc2lzVHVybi5yZXF1ZXN0SWQsIGNvbnRlbnRUeXBlLCBwYXlsb2FkKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBTcGVhayh0ZXh0LCBpc1NTTUwsIHJlcXVlc3RJZCwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxCYWNrLCBhdWRpb0Rlc3RpbmF0aW9uKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBsZXQgc3NtbDtcbiAgICAgICAgICAgIGlmIChpc1NTTUwpIHtcbiAgICAgICAgICAgICAgICBzc21sID0gdGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNzbWwgPSB0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplci5idWlsZFNzbWwodGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zcGVha092ZXJyaWRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zcGVha092ZXJyaWRlKHNzbWwsIHJlcXVlc3RJZCwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxCYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjayA9IHN1Y2Nlc3NDYWxsYmFjaztcbiAgICAgICAgICAgIHRoaXMucHJpdkVycm9yQ2FsbGJhY2sgPSBlcnJvckNhbGxCYWNrO1xuICAgICAgICAgICAgdGhpcy5wcml2U3ludGhlc2lzVHVybi5zdGFydE5ld1N5bnRoZXNpcyhyZXF1ZXN0SWQsIHRleHQsIGlzU1NNTCwgYXVkaW9EZXN0aW5hdGlvbik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuY29ubmVjdEltcGwoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uID0geWllbGQgdGhpcy5mZXRjaENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnNlbmRTeW50aGVzaXNDb250ZXh0KGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuc2VuZFNzbWxNZXNzYWdlKGNvbm5lY3Rpb24sIHNzbWwsIHJlcXVlc3RJZCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3ludGhlc2lzU3RhcnRFdmVudEFyZ3MgPSBuZXcgU3BlZWNoU3ludGhlc2lzRXZlbnRBcmdzKG5ldyBTcGVlY2hTeW50aGVzaXNSZXN1bHQocmVxdWVzdElkLCBSZXN1bHRSZWFzb24uU3ludGhlc2l6aW5nQXVkaW9TdGFydGVkKSk7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIuc3ludGhlc2lzU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplci5zeW50aGVzaXNTdGFydGVkKHRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyLCBzeW50aGVzaXNTdGFydEV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5yZWNlaXZlTWVzc2FnZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbFN5bnRoZXNpc0xvY2FsKENhbmNlbGxhdGlvblJlYXNvbi5FcnJvciwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLkNvbm5lY3Rpb25GYWlsdXJlLCBlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDYW5jZWxzIHN5bnRoZXNpcy5cbiAgICBjYW5jZWxTeW50aGVzaXMocmVxdWVzdElkLCBjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yQ29kZSwgZXJyb3IpIHtcbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgcHJvcGVydGllcy5zZXRQcm9wZXJ0eShDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIENhbmNlbGxhdGlvbkVycm9yQ29kZVtlcnJvckNvZGVdKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFNwZWVjaFN5bnRoZXNpc1Jlc3VsdChyZXF1ZXN0SWQsIFJlc3VsdFJlYXNvbi5DYW5jZWxlZCwgdW5kZWZpbmVkLCBlcnJvciwgcHJvcGVydGllcyk7XG4gICAgICAgIGlmICghIXRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyLlN5bnRoZXNpc0NhbmNlbGVkKSB7XG4gICAgICAgICAgICBjb25zdCBjYW5jZWxFdmVudCA9IG5ldyBTcGVlY2hTeW50aGVzaXNFdmVudEFyZ3MocmVzdWx0KTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIuU3ludGhlc2lzQ2FuY2VsZWQodGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIsIGNhbmNlbEV2ZW50KTtcbiAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoISF0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfYikgeyB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQ2FuY2VscyBzeW50aGVzaXMuXG4gICAgY2FuY2VsU3ludGhlc2lzTG9jYWwoY2FuY2VsbGF0aW9uUmVhc29uLCBlcnJvckNvZGUsIGVycm9yKSB7XG4gICAgICAgIGlmICghIXRoaXMucHJpdlN5bnRoZXNpc1R1cm4uaXNTeW50aGVzaXppbmcpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc1R1cm4ub25TdG9wU3ludGhlc2l6aW5nKCk7XG4gICAgICAgICAgICB0aGlzLmNhbmNlbFN5bnRoZXNpcyh0aGlzLnByaXZTeW50aGVzaXNUdXJuLnJlcXVlc3RJZCwgY2FuY2VsbGF0aW9uUmVhc29uLCBlcnJvckNvZGUsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgcHJvY2Vzc1R5cGVTcGVjaWZpY01lc3NhZ2VzKGNvbm5lY3Rpb25NZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZWNlaXZlTWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHlpZWxkIHRoaXMuZmV0Y2hDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHlpZWxkIGNvbm5lY3Rpb24ucmVhZCgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlY2VpdmVNZXNzYWdlT3ZlcnJpZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWNlaXZlTWVzc2FnZU92ZXJyaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZJc0Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlJ3JlIGRvbmUuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gaW5kaWNhdGVzIHdlIGFyZSBkcmFpbmluZyB0aGUgcXVldWUgYW5kIGl0IGNhbWUgd2l0aCBubyBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJpdlN5bnRoZXNpc1R1cm4uaXNTeW50aGVzaXppbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlY2VpdmVNZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbk1lc3NhZ2UgPSBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZS5mcm9tQ29ubmVjdGlvbk1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb25NZXNzYWdlLnJlcXVlc3RJZC50b0xvd2VyQ2FzZSgpID09PSB0aGlzLnByaXZTeW50aGVzaXNUdXJuLnJlcXVlc3RJZC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY29ubmVjdGlvbk1lc3NhZ2UucGF0aC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidHVybi5zdGFydFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc1R1cm4ub25TZXJ2aWNlVHVyblN0YXJ0UmVzcG9uc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyZXNwb25zZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc1R1cm4ub25TZXJ2aWNlUmVzcG9uc2VNZXNzYWdlKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhdWRpb1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZTeW50aGVzaXNUdXJuLnN0cmVhbUlkLnRvTG93ZXJDYXNlKCkgPT09IGNvbm5lY3Rpb25NZXNzYWdlLnN0cmVhbUlkLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgISFjb25uZWN0aW9uTWVzc2FnZS5iaW5hcnlCb2R5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc1R1cm4ub25BdWRpb0NodW5rUmVjZWl2ZWQoY29ubmVjdGlvbk1lc3NhZ2UuYmluYXJ5Qm9keSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyLnN5bnRoZXNpemluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdWRpb1dpdGhIZWFkZXIgPSBTeW50aGVzaXNBZGFwdGVyQmFzZS5hZGRIZWFkZXIoY29ubmVjdGlvbk1lc3NhZ2UuYmluYXJ5Qm9keSwgdGhpcy5wcml2U3ludGhlc2lzVHVybi5hdWRpb091dHB1dEZvcm1hdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXYgPSBuZXcgU3BlZWNoU3ludGhlc2lzRXZlbnRBcmdzKG5ldyBTcGVlY2hTeW50aGVzaXNSZXN1bHQodGhpcy5wcml2U3ludGhlc2lzVHVybi5yZXF1ZXN0SWQsIFJlc3VsdFJlYXNvbi5TeW50aGVzaXppbmdBdWRpbywgYXVkaW9XaXRoSGVhZGVyKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIuc3ludGhlc2l6aW5nKHRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyLCBldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZTZXNzaW9uQXVkaW9EZXN0aW5hdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTZXNzaW9uQXVkaW9EZXN0aW5hdGlvbi53cml0ZShjb25uZWN0aW9uTWVzc2FnZS5iaW5hcnlCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhdWRpby5tZXRhZGF0YVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhTGlzdCA9IFN5bnRoZXNpc0F1ZGlvTWV0YWRhdGEuZnJvbUpTT04oY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpLk1ldGFkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbWV0YWRhdGEgb2YgbWV0YWRhdGFMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWV0YWRhdGEuVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBNZXRhZGF0YVR5cGUuV29yZEJvdW5kYXJ5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBNZXRhZGF0YVR5cGUuU2VudGVuY2VCb3VuZGFyeTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTeW50aGVzaXNUdXJuLm9uVGV4dEJvdW5kYXJ5RXZlbnQobWV0YWRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmRCb3VuZGFyeUV2ZW50QXJncyA9IG5ldyBTcGVlY2hTeW50aGVzaXNXb3JkQm91bmRhcnlFdmVudEFyZ3MobWV0YWRhdGEuRGF0YS5PZmZzZXQsIG1ldGFkYXRhLkRhdGEuRHVyYXRpb24sIG1ldGFkYXRhLkRhdGEudGV4dC5UZXh0LCBtZXRhZGF0YS5EYXRhLnRleHQuTGVuZ3RoLCBtZXRhZGF0YS5UeXBlID09PSBNZXRhZGF0YVR5cGUuV29yZEJvdW5kYXJ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5wcml2U3ludGhlc2lzVHVybi5jdXJyZW50VGV4dE9mZnNldCA6IHRoaXMucHJpdlN5bnRoZXNpc1R1cm4uY3VycmVudFNlbnRlbmNlT2Zmc2V0LCBtZXRhZGF0YS5EYXRhLnRleHQuQm91bmRhcnlUeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplci53b3JkQm91bmRhcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyLndvcmRCb3VuZGFyeSh0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplciwgd29yZEJvdW5kYXJ5RXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTWV0YWRhdGFUeXBlLkJvb2ttYXJrOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvb2ttYXJrRXZlbnRBcmdzID0gbmV3IFNwZWVjaFN5bnRoZXNpc0Jvb2ttYXJrRXZlbnRBcmdzKG1ldGFkYXRhLkRhdGEuT2Zmc2V0LCBtZXRhZGF0YS5EYXRhLkJvb2ttYXJrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplci5ib29rbWFya1JlYWNoZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyLmJvb2ttYXJrUmVhY2hlZCh0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplciwgYm9va21hcmtFdmVudEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBNZXRhZGF0YVR5cGUuVmlzZW1lOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc1R1cm4ub25WaXNlbWVNZXRhZGF0YVJlY2VpdmVkKG1ldGFkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGEuRGF0YS5Jc0xhc3RBbmltYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmlzZW1lRXZlbnRBcmdzID0gbmV3IFNwZWVjaFN5bnRoZXNpc1Zpc2VtZUV2ZW50QXJncyhtZXRhZGF0YS5EYXRhLk9mZnNldCwgbWV0YWRhdGEuRGF0YS5WaXNlbWVJZCwgdGhpcy5wcml2U3ludGhlc2lzVHVybi5nZXRBbmRDbGVhclZpc2VtZUFuaW1hdGlvbigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIudmlzZW1lUmVjZWl2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIudmlzZW1lUmVjZWl2ZWQodGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIsIHZpc2VtZUV2ZW50QXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBNZXRhZGF0YVR5cGUuU2Vzc2lvbkVuZDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTeW50aGVzaXNUdXJuLm9uU2Vzc2lvbkVuZChtZXRhZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidHVybi5lbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTeW50aGVzaXNUdXJuLm9uU2VydmljZVR1cm5FbmRSZXNwb25zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXVkaW9CdWZmZXIgPSB5aWVsZCB0aGlzLnByaXZTeW50aGVzaXNUdXJuLmdldEFsbFJlY2VpdmVkQXVkaW9XaXRoSGVhZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBTcGVlY2hTeW50aGVzaXNSZXN1bHQodGhpcy5wcml2U3ludGhlc2lzVHVybi5yZXF1ZXN0SWQsIFJlc3VsdFJlYXNvbi5TeW50aGVzaXppbmdBdWRpb0NvbXBsZXRlZCwgYXVkaW9CdWZmZXIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0aGlzLnByaXZTeW50aGVzaXNUdXJuLmF1ZGlvRHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZFcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZFcnJvckNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIuc3ludGhlc2lzQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplci5zeW50aGVzaXNDb21wbGV0ZWQodGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIsIG5ldyBTcGVlY2hTeW50aGVzaXNFdmVudEFyZ3MocmVzdWx0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnByb2Nlc3NUeXBlU3BlY2lmaWNNZXNzYWdlcyhjb25uZWN0aW9uTWVzc2FnZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGVyZSBhcmUgc29tZSBtZXNzYWdlcyB0aGF0IHRoZSBkZXJpdmVkIGNsYXNzIGhhcyBub3QgcHJvY2Vzc2VkLCBkaXNwYXRjaCB0aGVtIHRvIGNvbm5lY3QgY2xhc3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2U2VydmljZUV2ZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXJ2aWNlRXZlbnRzLm9uRXZlbnQobmV3IFNlcnZpY2VFdmVudChjb25uZWN0aW9uTWVzc2FnZS5wYXRoLnRvTG93ZXJDYXNlKCksIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZU1lc3NhZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogV2hhdCBnb2VzIGhlcmU/XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kU3ludGhlc2lzQ29udGV4dChjb25uZWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IHN5bnRoZXNpc0NvbnRleHRKc29uID0gdGhpcy5zeW50aGVzaXNDb250ZXh0LnRvSlNPTigpO1xuICAgICAgICBpZiAoc3ludGhlc2lzQ29udGV4dEpzb24pIHtcbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uLnNlbmQobmV3IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlKE1lc3NhZ2VUeXBlLlRleHQsIFwic3ludGhlc2lzLmNvbnRleHRcIiwgdGhpcy5wcml2U3ludGhlc2lzVHVybi5yZXF1ZXN0SWQsIFwiYXBwbGljYXRpb24vanNvblwiLCBzeW50aGVzaXNDb250ZXh0SnNvbikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29ubmVjdEltcGwoaXNVbkF1dGhvcml6ZWQgPSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25Qcm9taXNlLnRoZW4oKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGlvbi5zdGF0ZSgpID09PSBDb25uZWN0aW9uU3RhdGUuRGlzY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25JZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Qcm9taXNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdEltcGwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25Qcm9taXNlO1xuICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25JZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3RJbXBsKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkID0gY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uSWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc1R1cm4ub25QcmVDb25uZWN0aW9uU3RhcnQodGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCk7XG4gICAgICAgIGNvbnN0IGF1dGhQcm9taXNlID0gaXNVbkF1dGhvcml6ZWQgPyB0aGlzLnByaXZBdXRoZW50aWNhdGlvbi5mZXRjaE9uRXhwaXJ5KHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQpIDogdGhpcy5wcml2QXV0aGVudGljYXRpb24uZmV0Y2godGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCk7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Qcm9taXNlID0gYXV0aFByb21pc2UudGhlbigocmVzdWx0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZTeW50aGVzaXNUdXJuLm9uQXV0aENvbXBsZXRlZChmYWxzZSk7XG4gICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uID0gdGhpcy5wcml2Q29ubmVjdGlvbkZhY3RvcnkuY3JlYXRlKHRoaXMucHJpdlN5bnRoZXNpemVyQ29uZmlnLCByZXN1bHQsIHRoaXMucHJpdkNvbm5lY3Rpb25JZCk7XG4gICAgICAgICAgICAvLyBBdHRhY2ggdG8gdGhlIHVuZGVybHlpbmcgZXZlbnQuIE5vIG5lZWQgdG8gaG9sZCBvbnRvIHRoZSBkZXRhY2ggcG9pbnRlcnMgYXMgaW4gdGhlIGV2ZW50IHRoZSBjb25uZWN0aW9uIGdvZXMgYXdheSxcbiAgICAgICAgICAgIC8vIGl0J2xsIHN0b3Agc2VuZGluZyBldmVudHMuXG4gICAgICAgICAgICBjb25uZWN0aW9uLmV2ZW50cy5hdHRhY2goKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uRXZlbnRzLm9uRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIGNvbm5lY3Rpb24ub3BlbigpO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc1R1cm4ub25Db25uZWN0aW9uRXN0YWJsaXNoQ29tcGxldGVkKHJlc3BvbnNlLnN0YXR1c0NvZGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY29ubmVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXNDb2RlID09PSA0MDMgJiYgIWlzVW5BdXRob3JpemVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdEltcGwodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTeW50aGVzaXNUdXJuLm9uQ29ubmVjdGlvbkVzdGFibGlzaENvbXBsZXRlZChyZXNwb25zZS5zdGF0dXNDb2RlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYFVuYWJsZSB0byBjb250YWN0IHNlcnZlci4gU3RhdHVzQ29kZTogJHtyZXNwb25zZS5zdGF0dXNDb2RlfSwgJHt0aGlzLnByaXZTeW50aGVzaXplckNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnQpfSBSZWFzb246ICR7cmVzcG9uc2UucmVhc29ufWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByaXZTeW50aGVzaXNUdXJuLm9uQXV0aENvbXBsZXRlZCh0cnVlKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBBdHRhY2ggYW4gZW1wdHkgaGFuZGxlciB0byBhbGxvdyB0aGUgcHJvbWlzZSB0byBydW4gaW4gdGhlIGJhY2tncm91bmQgd2hpbGVcbiAgICAgICAgLy8gb3RoZXIgc3RhcnR1cCBldmVudHMgaGFwcGVuLiBJdCdsbCBldmVudHVhbGx5IGJlIGF3YWl0ZWQgb24uXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvblByb21pc2UuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25Qcm9taXNlO1xuICAgIH1cbiAgICBzZW5kU3BlZWNoU2VydmljZUNvbmZpZyhjb25uZWN0aW9uLCBTcGVlY2hTZXJ2aWNlQ29uZmlnSnNvbikge1xuICAgICAgICBpZiAoU3BlZWNoU2VydmljZUNvbmZpZ0pzb24pIHtcbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uLnNlbmQobmV3IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlKE1lc3NhZ2VUeXBlLlRleHQsIFwic3BlZWNoLmNvbmZpZ1wiLCB0aGlzLnByaXZTeW50aGVzaXNUdXJuLnJlcXVlc3RJZCwgXCJhcHBsaWNhdGlvbi9qc29uXCIsIFNwZWVjaFNlcnZpY2VDb25maWdKc29uKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VuZFNzbWxNZXNzYWdlKGNvbm5lY3Rpb24sIHNzbWwsIHJlcXVlc3RJZCkge1xuICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5zZW5kKG5ldyBTcGVlY2hDb25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBcInNzbWxcIiwgcmVxdWVzdElkLCBcImFwcGxpY2F0aW9uL3NzbWwreG1sXCIsIHNzbWwpKTtcbiAgICB9XG4gICAgZmV0Y2hDb25uZWN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWd1cmF0aW9uUHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWd1cmF0aW9uUHJvbWlzZS50aGVuKChjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uLnN0YXRlKCkgPT09IENvbm5lY3Rpb25TdGF0ZS5EaXNjb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25JZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlndXJhdGlvblByb21pc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlO1xuICAgICAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbklkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ3VyYXRpb25Qcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWd1cmF0aW9uUHJvbWlzZSA9IHRoaXMuY29uZmlndXJlQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWd1cmF0aW9uUHJvbWlzZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIFRha2VzIGFuIGVzdGFibGlzaGVkIHdlYnNvY2tldCBjb25uZWN0aW9uIHRvIHRoZSBlbmRwb2ludCBhbmQgc2VuZHMgc3BlZWNoIGNvbmZpZ3VyYXRpb24gaW5mb3JtYXRpb24uXG4gICAgY29uZmlndXJlQ29ubmVjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmNvbm5lY3RJbXBsKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWdDb25uZWN0aW9uT3ZlcnJpZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ0Nvbm5lY3Rpb25PdmVycmlkZShjb25uZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHlpZWxkIHRoaXMuc2VuZFNwZWVjaFNlcnZpY2VDb25maWcoY29ubmVjdGlvbiwgdGhpcy5wcml2U3ludGhlc2l6ZXJDb25maWcuU3BlZWNoU2VydmljZUNvbmZpZy5zZXJpYWxpemUoKSk7XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbjtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuU3ludGhlc2lzQWRhcHRlckJhc2UudGVsZW1ldHJ5RGF0YUVuYWJsZWQgPSB0cnVlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TeW50aGVzaXNBZGFwdGVyQmFzZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBKU09OIHVzZWQgaW4gdGhlIHN5bnRoZXNpcy5jb250ZXh0IG1lc3NhZ2Ugc2VudCB0byB0aGUgc3BlZWNoIHNlcnZpY2UuXG4gKiBUaGUgZHluYW1pYyBncmFtbWFyIGlzIGFsd2F5cyByZWZyZXNoZWQgZnJvbSB0aGUgZW5jYXBzdWxhdGVkIGR5bmFtaWMgZ3JhbW1hciBvYmplY3QuXG4gKi9cbmV4cG9ydCBjbGFzcyBTeW50aGVzaXNDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3RvcihzcGVlY2hTeW50aGVzaXplcikge1xuICAgICAgICB0aGlzLnByaXZDb250ZXh0ID0ge307XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyID0gc3BlZWNoU3ludGhlc2l6ZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBzZWN0aW9uIHRvIHRoZSBzeW50aGVzaXMuY29udGV4dCBvYmplY3QuXG4gICAgICogQHBhcmFtIHNlY3Rpb25OYW1lIE5hbWUgb2YgdGhlIHNlY3Rpb24gdG8gYWRkLlxuICAgICAqIEBwYXJhbSB2YWx1ZSBKU09OIHNlcmlhbGl6YWJsZSBvYmplY3QgdGhhdCByZXByZXNlbnRzIHRoZSB2YWx1ZS5cbiAgICAgKi9cbiAgICBzZXRTZWN0aW9uKHNlY3Rpb25OYW1lLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZDb250ZXh0W3NlY3Rpb25OYW1lXSA9IHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBhdWRpbyBvdXRwdXQgZm9ybWF0IGZvciBzeW50aGVzaXMgY29udGV4dCBnZW5lcmF0aW9uLlxuICAgICAqIEBwYXJhbSBmb3JtYXQge0F1ZGlvT3V0cHV0Rm9ybWF0SW1wbH0gdGhlIG91dHB1dCBmb3JtYXRcbiAgICAgKi9cbiAgICBzZXQgYXVkaW9PdXRwdXRGb3JtYXQoZm9ybWF0KSB7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvT3V0cHV0Rm9ybWF0ID0gZm9ybWF0O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHN5bnRoZXNpc1NlY3Rpb24gPSB0aGlzLmJ1aWxkU3ludGhlc2lzQ29udGV4dCgpO1xuICAgICAgICB0aGlzLnNldFNlY3Rpb24oXCJzeW50aGVzaXNcIiwgc3ludGhlc2lzU2VjdGlvbik7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnByaXZDb250ZXh0KTtcbiAgICB9XG4gICAgYnVpbGRTeW50aGVzaXNDb250ZXh0KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXVkaW86IHtcbiAgICAgICAgICAgICAgICBtZXRhZGF0YU9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgYm9va21hcmtFbmFibGVkOiAoISF0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplci5ib29rbWFya1JlYWNoZWQpLFxuICAgICAgICAgICAgICAgICAgICBwdW5jdHVhdGlvbkJvdW5kYXJ5RW5hYmxlZDogdGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0UHVuY3R1YXRpb25Cb3VuZGFyeSwgKCEhdGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIud29yZEJvdW5kYXJ5KSksXG4gICAgICAgICAgICAgICAgICAgIHNlbnRlbmNlQm91bmRhcnlFbmFibGVkOiB0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplci5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RTZW50ZW5jZUJvdW5kYXJ5LCBmYWxzZSksXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25FbmRFbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2aXNlbWVFbmFibGVkOiAoISF0aGlzLnByaXZTcGVlY2hTeW50aGVzaXplci52aXNlbWVSZWNlaXZlZCksXG4gICAgICAgICAgICAgICAgICAgIHdvcmRCb3VuZGFyeUVuYWJsZWQ6IHRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFdvcmRCb3VuZGFyeSwgKCEhdGhpcy5wcml2U3BlZWNoU3ludGhlc2l6ZXIud29yZEJvdW5kYXJ5KSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvdXRwdXRGb3JtYXQ6IHRoaXMucHJpdkF1ZGlvT3V0cHV0Rm9ybWF0LnJlcXVlc3RBdWRpb0Zvcm1hdFN0cmluZyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsYW5ndWFnZToge1xuICAgICAgICAgICAgICAgIGF1dG9EZXRlY3Rpb246IHRoaXMucHJpdlNwZWVjaFN5bnRoZXNpemVyLmF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ludGhlc2lzQ29udGV4dC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cbmltcG9ydCB7IEV2ZW50VHlwZSwgUGxhdGZvcm1FdmVudCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIFNwZWVjaFN5bnRoZXNpc0V2ZW50IGV4dGVuZHMgUGxhdGZvcm1FdmVudCB7XG4gICAgY29uc3RydWN0b3IoZXZlbnROYW1lLCByZXF1ZXN0SWQsIGV2ZW50VHlwZSA9IEV2ZW50VHlwZS5JbmZvKSB7XG4gICAgICAgIHN1cGVyKGV2ZW50TmFtZSwgZXZlbnRUeXBlKTtcbiAgICAgICAgdGhpcy5wcml2UmVxdWVzdElkID0gcmVxdWVzdElkO1xuICAgIH1cbiAgICBnZXQgcmVxdWVzdElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVxdWVzdElkO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBTeW50aGVzaXNUcmlnZ2VyZWRFdmVudCBleHRlbmRzIFNwZWVjaFN5bnRoZXNpc0V2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihyZXF1ZXN0SWQsIHNlc3Npb25BdWRpb0Rlc3RpbmF0aW9uSWQsIHR1cm5BdWRpb0Rlc3RpbmF0aW9uSWQpIHtcbiAgICAgICAgc3VwZXIoXCJTeW50aGVzaXNUcmlnZ2VyZWRFdmVudFwiLCByZXF1ZXN0SWQpO1xuICAgICAgICB0aGlzLnByaXZTZXNzaW9uQXVkaW9EZXN0aW5hdGlvbklkID0gc2Vzc2lvbkF1ZGlvRGVzdGluYXRpb25JZDtcbiAgICAgICAgdGhpcy5wcml2VHVybkF1ZGlvRGVzdGluYXRpb25JZCA9IHR1cm5BdWRpb0Rlc3RpbmF0aW9uSWQ7XG4gICAgfVxuICAgIGdldCBhdWRpb1Nlc3Npb25EZXN0aW5hdGlvbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U2Vzc2lvbkF1ZGlvRGVzdGluYXRpb25JZDtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvVHVybkRlc3RpbmF0aW9uSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUdXJuQXVkaW9EZXN0aW5hdGlvbklkO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDb25uZWN0aW5nVG9TeW50aGVzaXNTZXJ2aWNlRXZlbnQgZXh0ZW5kcyBTcGVlY2hTeW50aGVzaXNFdmVudCB7XG4gICAgY29uc3RydWN0b3IocmVxdWVzdElkLCBhdXRoRmV0Y2hFdmVudElkKSB7XG4gICAgICAgIHN1cGVyKFwiQ29ubmVjdGluZ1RvU3ludGhlc2lzU2VydmljZUV2ZW50XCIsIHJlcXVlc3RJZCk7XG4gICAgICAgIHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQgPSBhdXRoRmV0Y2hFdmVudElkO1xuICAgIH1cbiAgICBnZXQgYXV0aEZldGNoRXZlbnRJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQ7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFN5bnRoZXNpc1N0YXJ0ZWRFdmVudCBleHRlbmRzIFNwZWVjaFN5bnRoZXNpc0V2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihyZXF1ZXN0SWQsIGF1dGhGZXRjaEV2ZW50SWQpIHtcbiAgICAgICAgc3VwZXIoXCJTeW50aGVzaXNTdGFydGVkRXZlbnRcIiwgcmVxdWVzdElkKTtcbiAgICAgICAgdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZCA9IGF1dGhGZXRjaEV2ZW50SWQ7XG4gICAgfVxuICAgIGdldCBhdXRoRmV0Y2hFdmVudElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXV0aEZldGNoRXZlbnRJZDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN5bnRoZXNpc0V2ZW50cy5qcy5tYXBcbiIsImltcG9ydCB7IFJlc3RDb25maWdCYXNlLCBSZXN0TWVzc2FnZUFkYXB0ZXIsIFJlc3RSZXF1ZXN0VHlwZSwgfSBmcm9tIFwiLi4vY29tbW9uLmJyb3dzZXIvRXhwb3J0c1wiO1xuaW1wb3J0IHsgUHJvcGVydHlJZCwgfSBmcm9tIFwiLi4vc2RrL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb25GYWN0b3J5QmFzZSB9IGZyb20gXCIuL0Nvbm5lY3Rpb25GYWN0b3J5QmFzZVwiO1xuaW1wb3J0IHsgSGVhZGVyTmFtZXMgfSBmcm9tIFwiLi9IZWFkZXJOYW1lc1wiO1xuLyoqXG4gKiBJbXBsZW1lbnRzIG1ldGhvZHMgZm9yIHNwZWFrZXIgcmVjb2duaXRpb24gY2xhc3Nlcywgc2VuZGluZyByZXF1ZXN0cyB0byBlbmRwb2ludFxuICogYW5kIHBhcnNpbmcgcmVzcG9uc2UgaW50byBleHBlY3RlZCBmb3JtYXRcbiAqIEBjbGFzcyBTeW50aGVzaXNSZXN0QWRhcHRlclxuICovXG5leHBvcnQgY2xhc3MgU3ludGhlc2lzUmVzdEFkYXB0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgYXV0aGVudGljYXRpb24pIHtcbiAgICAgICAgbGV0IGVuZHBvaW50ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCwgdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKCFlbmRwb2ludCkge1xuICAgICAgICAgICAgY29uc3QgcmVnaW9uID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24sIFwid2VzdHVzXCIpO1xuICAgICAgICAgICAgY29uc3QgaG9zdFN1ZmZpeCA9IENvbm5lY3Rpb25GYWN0b3J5QmFzZS5nZXRIb3N0U3VmZml4KHJlZ2lvbik7XG4gICAgICAgICAgICBlbmRwb2ludCA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSG9zdCwgYGh0dHBzOi8vJHtyZWdpb259LnR0cy5zcGVlY2gke2hvc3RTdWZmaXh9YCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2VXJpID0gYCR7ZW5kcG9pbnR9L2NvZ25pdGl2ZXNlcnZpY2VzL3ZvaWNlcy9saXN0YDtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IFJlc3RDb25maWdCYXNlLnJlcXVlc3RPcHRpb25zO1xuICAgICAgICB0aGlzLnByaXZSZXN0QWRhcHRlciA9IG5ldyBSZXN0TWVzc2FnZUFkYXB0ZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMucHJpdkF1dGhlbnRpY2F0aW9uID0gYXV0aGVudGljYXRpb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGxpc3Qgdm9pY2VzIHJlcXVlc3QgdG8gZW5kcG9pbnQuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBjb25uZWN0aW9uSWQgLSBndWlkIGZvciBjb25uZWN0aW9uSWRcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxJUmVzdFJlc3BvbnNlPn0gcmVzdCByZXNwb25zZSB0byBzdGF0dXMgcmVxdWVzdFxuICAgICAqL1xuICAgIGdldFZvaWNlc0xpc3QoY29ubmVjdGlvbklkKSB7XG4gICAgICAgIHRoaXMucHJpdlJlc3RBZGFwdGVyLnNldEhlYWRlcnMoSGVhZGVyTmFtZXMuQ29ubmVjdGlvbklkLCBjb25uZWN0aW9uSWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXV0aGVudGljYXRpb24uZmV0Y2goY29ubmVjdGlvbklkKS50aGVuKChhdXRoSW5mbykgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcml2UmVzdEFkYXB0ZXIuc2V0SGVhZGVycyhhdXRoSW5mby5oZWFkZXJOYW1lLCBhdXRoSW5mby50b2tlbik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVzdEFkYXB0ZXIucmVxdWVzdChSZXN0UmVxdWVzdFR5cGUuR2V0LCB0aGlzLnByaXZVcmkpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN5bnRoZXNpc1Jlc3RBZGFwdGVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IGNyZWF0ZU5vRGFzaEd1aWQsIERlZmVycmVkLCBFdmVudHMgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IFB1bGxBdWRpb091dHB1dFN0cmVhbUltcGwgfSBmcm9tIFwiLi4vc2RrL0F1ZGlvL0F1ZGlvT3V0cHV0U3RyZWFtXCI7XG5pbXBvcnQgeyBNZXRhZGF0YVR5cGUgfSBmcm9tIFwiLi9TZXJ2aWNlTWVzc2FnZXMvU3ludGhlc2lzQXVkaW9NZXRhZGF0YVwiO1xuaW1wb3J0IHsgU3ludGhlc2lzQWRhcHRlckJhc2UgfSBmcm9tIFwiLi9TeW50aGVzaXNBZGFwdGVyQmFzZVwiO1xuaW1wb3J0IHsgQ29ubmVjdGluZ1RvU3ludGhlc2lzU2VydmljZUV2ZW50LCBTeW50aGVzaXNTdGFydGVkRXZlbnQsIFN5bnRoZXNpc1RyaWdnZXJlZEV2ZW50LCB9IGZyb20gXCIuL1N5bnRoZXNpc0V2ZW50c1wiO1xuZXhwb3J0IGNsYXNzIFN5bnRoZXNpc1R1cm4ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdklzU3ludGhlc2l6aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdklzU3ludGhlc2lzRW5kZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2Qnl0ZXNSZWNlaXZlZCA9IDA7XG4gICAgICAgIHRoaXMucHJpdkluVHVybiA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZUZXh0T2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5wcml2TmV4dFNlYXJjaFRleHRJbmRleCA9IDA7XG4gICAgICAgIHRoaXMucHJpdlNlbnRlbmNlT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5wcml2TmV4dFNlYXJjaFNlbnRlbmNlSW5kZXggPSAwO1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0SWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgIHRoaXMucHJpdlR1cm5EZWZlcnJhbCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICAvLyBXZSdyZSBub3QgaW4gYSB0dXJuLCBzbyByZXNvbHZlLlxuICAgICAgICB0aGlzLnByaXZUdXJuRGVmZXJyYWwucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXQgcmVxdWVzdElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVxdWVzdElkO1xuICAgIH1cbiAgICBnZXQgc3RyZWFtSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTdHJlYW1JZDtcbiAgICB9XG4gICAgc2V0IHN0cmVhbUlkKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpdlN0cmVhbUlkID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBhdWRpb091dHB1dEZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvT3V0cHV0Rm9ybWF0O1xuICAgIH1cbiAgICBzZXQgYXVkaW9PdXRwdXRGb3JtYXQoZm9ybWF0KSB7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvT3V0cHV0Rm9ybWF0ID0gZm9ybWF0O1xuICAgIH1cbiAgICBnZXQgdHVybkNvbXBsZXRpb25Qcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VHVybkRlZmVycmFsLnByb21pc2U7XG4gICAgfVxuICAgIGdldCBpc1N5bnRoZXNpc0VuZGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNTeW50aGVzaXNFbmRlZDtcbiAgICB9XG4gICAgZ2V0IGlzU3ludGhlc2l6aW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNTeW50aGVzaXppbmc7XG4gICAgfVxuICAgIGdldCBjdXJyZW50VGV4dE9mZnNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRleHRPZmZzZXQ7XG4gICAgfVxuICAgIGdldCBjdXJyZW50U2VudGVuY2VPZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTZW50ZW5jZU9mZnNldDtcbiAgICB9XG4gICAgLy8gVGhlIG51bWJlciBvZiBieXRlcyByZWNlaXZlZCBmb3IgY3VycmVudCB0dXJuXG4gICAgZ2V0IGJ5dGVzUmVjZWl2ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZCeXRlc1JlY2VpdmVkO1xuICAgIH1cbiAgICBnZXQgYXVkaW9EdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvRHVyYXRpb247XG4gICAgfVxuICAgIGdldEFsbFJlY2VpdmVkQXVkaW8oKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZSZWNlaXZlZEF1ZGlvKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnByaXZSZWNlaXZlZEF1ZGlvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5wcml2SXNTeW50aGVzaXNFbmRlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgdGhpcy5yZWFkQWxsQXVkaW9Gcm9tU3RyZWFtKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMucHJpdlJlY2VpdmVkQXVkaW8pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0QWxsUmVjZWl2ZWRBdWRpb1dpdGhIZWFkZXIoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZSZWNlaXZlZEF1ZGlvV2l0aEhlYWRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZSZWNlaXZlZEF1ZGlvV2l0aEhlYWRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5wcml2SXNTeW50aGVzaXNFbmRlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYXVkaW9PdXRwdXRGb3JtYXQuaGFzSGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW8gPSB5aWVsZCB0aGlzLmdldEFsbFJlY2VpdmVkQXVkaW8oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNlaXZlZEF1ZGlvV2l0aEhlYWRlciA9IFN5bnRoZXNpc0FkYXB0ZXJCYXNlLmFkZEhlYWRlcihhdWRpbywgdGhpcy5hdWRpb091dHB1dEZvcm1hdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlY2VpdmVkQXVkaW9XaXRoSGVhZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxsUmVjZWl2ZWRBdWRpbygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnROZXdTeW50aGVzaXMocmVxdWVzdElkLCByYXdUZXh0LCBpc1NTTUwsIGF1ZGlvRGVzdGluYXRpb24pIHtcbiAgICAgICAgdGhpcy5wcml2SXNTeW50aGVzaXNFbmRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZJc1N5bnRoZXNpemluZyA9IHRydWU7XG4gICAgICAgIHRoaXMucHJpdlJlcXVlc3RJZCA9IHJlcXVlc3RJZDtcbiAgICAgICAgdGhpcy5wcml2UmF3VGV4dCA9IHJhd1RleHQ7XG4gICAgICAgIHRoaXMucHJpdklzU1NNTCA9IGlzU1NNTDtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9PdXRwdXRTdHJlYW0gPSBuZXcgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtSW1wbCgpO1xuICAgICAgICB0aGlzLnByaXZBdWRpb091dHB1dFN0cmVhbS5mb3JtYXQgPSB0aGlzLnByaXZBdWRpb091dHB1dEZvcm1hdDtcbiAgICAgICAgdGhpcy5wcml2UmVjZWl2ZWRBdWRpbyA9IG51bGw7XG4gICAgICAgIHRoaXMucHJpdlJlY2VpdmVkQXVkaW9XaXRoSGVhZGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcml2Qnl0ZXNSZWNlaXZlZCA9IDA7XG4gICAgICAgIHRoaXMucHJpdlRleHRPZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnByaXZOZXh0U2VhcmNoVGV4dEluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5wcml2U2VudGVuY2VPZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnByaXZOZXh0U2VhcmNoU2VudGVuY2VJbmRleCA9IDA7XG4gICAgICAgIHRoaXMucHJpdlBhcnRpYWxWaXNlbWVBbmltYXRpb24gPSBcIlwiO1xuICAgICAgICBpZiAoYXVkaW9EZXN0aW5hdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZUdXJuQXVkaW9EZXN0aW5hdGlvbiA9IGF1ZGlvRGVzdGluYXRpb247XG4gICAgICAgICAgICB0aGlzLnByaXZUdXJuQXVkaW9EZXN0aW5hdGlvbi5mb3JtYXQgPSB0aGlzLnByaXZBdWRpb091dHB1dEZvcm1hdDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uRXZlbnQobmV3IFN5bnRoZXNpc1RyaWdnZXJlZEV2ZW50KHRoaXMucmVxdWVzdElkLCB1bmRlZmluZWQsIGF1ZGlvRGVzdGluYXRpb24gPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IGF1ZGlvRGVzdGluYXRpb24uaWQoKSkpO1xuICAgIH1cbiAgICBvblByZUNvbm5lY3Rpb25TdGFydChhdXRoRmV0Y2hFdmVudElkKSB7XG4gICAgICAgIHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQgPSBhdXRoRmV0Y2hFdmVudElkO1xuICAgICAgICB0aGlzLm9uRXZlbnQobmV3IENvbm5lY3RpbmdUb1N5bnRoZXNpc1NlcnZpY2VFdmVudCh0aGlzLnByaXZSZXF1ZXN0SWQsIHRoaXMucHJpdkF1dGhGZXRjaEV2ZW50SWQpKTtcbiAgICB9XG4gICAgb25BdXRoQ29tcGxldGVkKGlzRXJyb3IpIHtcbiAgICAgICAgaWYgKGlzRXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uQ29ubmVjdGlvbkVzdGFibGlzaENvbXBsZXRlZChzdGF0dXNDb2RlKSB7XG4gICAgICAgIGlmIChzdGF0dXNDb2RlID09PSAyMDApIHtcbiAgICAgICAgICAgIHRoaXMub25FdmVudChuZXcgU3ludGhlc2lzU3RhcnRlZEV2ZW50KHRoaXMucmVxdWVzdElkLCB0aGlzLnByaXZBdXRoRmV0Y2hFdmVudElkKSk7XG4gICAgICAgICAgICB0aGlzLnByaXZCeXRlc1JlY2VpdmVkID0gMDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uU2VydmljZVJlc3BvbnNlTWVzc2FnZShyZXNwb25zZUpzb24pIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3BvbnNlSnNvbik7XG4gICAgICAgIHRoaXMuc3RyZWFtSWQgPSByZXNwb25zZS5hdWRpby5zdHJlYW1JZDtcbiAgICB9XG4gICAgb25TZXJ2aWNlVHVybkVuZFJlc3BvbnNlKCkge1xuICAgICAgICB0aGlzLnByaXZJblR1cm4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2VHVybkRlZmVycmFsLnJlc29sdmUoKTtcbiAgICAgICAgdGhpcy5vbkNvbXBsZXRlKCk7XG4gICAgfVxuICAgIG9uU2VydmljZVR1cm5TdGFydFJlc3BvbnNlKCkge1xuICAgICAgICBpZiAoISF0aGlzLnByaXZUdXJuRGVmZXJyYWwgJiYgISF0aGlzLnByaXZJblR1cm4pIHtcbiAgICAgICAgICAgIC8vIFdoYXQ/IEhvdyBhcmUgd2Ugc3RhcnRpbmcgYSB0dXJuIHdpdGggYW5vdGhlciBub3QgZG9uZT9cbiAgICAgICAgICAgIHRoaXMucHJpdlR1cm5EZWZlcnJhbC5yZWplY3QoXCJBbm90aGVyIHR1cm4gc3RhcnRlZCBiZWZvcmUgY3VycmVudCBjb21wbGV0ZWQuXCIpO1xuICAgICAgICAgICAgLy8gQXZvaWQgVW5oYW5kbGVkUHJvbWlzZVJlamVjdGlvbiBpZiBwcml2VHVybkRlZmVycmFsIGlzIG5vdCBiZWluZyBhd2FpdGVkXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWVtcHR5LWZ1bmN0aW9uXG4gICAgICAgICAgICB0aGlzLnByaXZUdXJuRGVmZXJyYWwucHJvbWlzZS50aGVuKCkuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZJblR1cm4gPSB0cnVlO1xuICAgICAgICB0aGlzLnByaXZUdXJuRGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICB9XG4gICAgb25BdWRpb0NodW5rUmVjZWl2ZWQoZGF0YSkge1xuICAgICAgICBpZiAodGhpcy5pc1N5bnRoZXNpemluZykge1xuICAgICAgICAgICAgdGhpcy5wcml2QXVkaW9PdXRwdXRTdHJlYW0ud3JpdGUoZGF0YSk7XG4gICAgICAgICAgICB0aGlzLnByaXZCeXRlc1JlY2VpdmVkICs9IGRhdGEuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZUdXJuQXVkaW9EZXN0aW5hdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2VHVybkF1ZGlvRGVzdGluYXRpb24ud3JpdGUoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25UZXh0Qm91bmRhcnlFdmVudChtZXRhZGF0YSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVRleHRPZmZzZXQobWV0YWRhdGEuRGF0YS50ZXh0LlRleHQsIG1ldGFkYXRhLlR5cGUpO1xuICAgIH1cbiAgICBvblZpc2VtZU1ldGFkYXRhUmVjZWl2ZWQobWV0YWRhdGEpIHtcbiAgICAgICAgaWYgKG1ldGFkYXRhLkRhdGEuQW5pbWF0aW9uQ2h1bmsgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2UGFydGlhbFZpc2VtZUFuaW1hdGlvbiArPSBtZXRhZGF0YS5EYXRhLkFuaW1hdGlvbkNodW5rO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uU2Vzc2lvbkVuZChtZXRhZGF0YSkge1xuICAgICAgICB0aGlzLnByaXZBdWRpb0R1cmF0aW9uID0gbWV0YWRhdGEuRGF0YS5PZmZzZXQ7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5wcml2SXNEaXNwb3NlZCkge1xuICAgICAgICAgICAgLy8gd2Ugc2hvdWxkIGhhdmUgY29tcGxldGVkIGJ5IG5vdy4gSWYgd2UgZGlkIG5vdCBpdHMgYW4gdW5rbm93biBlcnJvci5cbiAgICAgICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uU3RvcFN5bnRoZXNpemluZygpIHtcbiAgICAgICAgdGhpcy5vbkNvbXBsZXRlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHZpc2VtZSBhbmltYXRpb24gc3RyaW5nIChtZXJnZWQgZnJvbSBhbmltYXRpb24gY2h1bmspLCBhbmQgY2xlYXJzIHRoZSBpbnRlcm5hbFxuICAgICAqIHBhcnRpYWwgYW5pbWF0aW9uLlxuICAgICAqL1xuICAgIGdldEFuZENsZWFyVmlzZW1lQW5pbWF0aW9uKCkge1xuICAgICAgICBjb25zdCBhbmltYXRpb24gPSB0aGlzLnByaXZQYXJ0aWFsVmlzZW1lQW5pbWF0aW9uO1xuICAgICAgICB0aGlzLnByaXZQYXJ0aWFsVmlzZW1lQW5pbWF0aW9uID0gXCJcIjtcbiAgICAgICAgcmV0dXJuIGFuaW1hdGlvbjtcbiAgICB9XG4gICAgb25FdmVudChldmVudCkge1xuICAgICAgICBFdmVudHMuaW5zdGFuY2Uub25FdmVudChldmVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZSB0ZXh0IGlzIGFuIFhNTChTU01MKSB0YWdcbiAgICAgKiBAcGFyYW0gdGV4dFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgc3RhdGljIGlzWG1sVGFnKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRleHQubGVuZ3RoID49IDIgJiYgdGV4dFswXSA9PT0gXCI8XCIgJiYgdGV4dFt0ZXh0Lmxlbmd0aCAtIDFdID09PSBcIj5cIjtcbiAgICB9XG4gICAgdXBkYXRlVGV4dE9mZnNldCh0ZXh0LCB0eXBlKSB7XG4gICAgICAgIGlmICh0eXBlID09PSBNZXRhZGF0YVR5cGUuV29yZEJvdW5kYXJ5KSB7XG4gICAgICAgICAgICB0aGlzLnByaXZUZXh0T2Zmc2V0ID0gdGhpcy5wcml2UmF3VGV4dC5pbmRleE9mKHRleHQsIHRoaXMucHJpdk5leHRTZWFyY2hUZXh0SW5kZXgpO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdlRleHRPZmZzZXQgPj0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdk5leHRTZWFyY2hUZXh0SW5kZXggPSB0aGlzLnByaXZUZXh0T2Zmc2V0ICsgdGV4dC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdklzU1NNTCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53aXRoaW5YbWxUYWcodGhpcy5wcml2VGV4dE9mZnNldCkgJiYgIVN5bnRoZXNpc1R1cm4uaXNYbWxUYWcodGV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGV4dE9mZnNldCh0ZXh0LCB0eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlNlbnRlbmNlT2Zmc2V0ID0gdGhpcy5wcml2UmF3VGV4dC5pbmRleE9mKHRleHQsIHRoaXMucHJpdk5leHRTZWFyY2hTZW50ZW5jZUluZGV4KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZTZW50ZW5jZU9mZnNldCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TmV4dFNlYXJjaFNlbnRlbmNlSW5kZXggPSB0aGlzLnByaXZTZW50ZW5jZU9mZnNldCArIHRleHQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZJc1NTTUwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMud2l0aGluWG1sVGFnKHRoaXMucHJpdlNlbnRlbmNlT2Zmc2V0KSAmJiAhU3ludGhlc2lzVHVybi5pc1htbFRhZyh0ZXh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUZXh0T2Zmc2V0KHRleHQsIHR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG9uQ29tcGxldGUoKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZJc1N5bnRoZXNpemluZykge1xuICAgICAgICAgICAgdGhpcy5wcml2SXNTeW50aGVzaXppbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucHJpdklzU3ludGhlc2lzRW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wcml2QXVkaW9PdXRwdXRTdHJlYW0uY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdkluVHVybiA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdlR1cm5BdWRpb0Rlc3RpbmF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZUdXJuQXVkaW9EZXN0aW5hdGlvbi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlR1cm5BdWRpb0Rlc3RpbmF0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJlYWRBbGxBdWRpb0Zyb21TdHJlYW0oKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2SXNTeW50aGVzaXNFbmRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY2VpdmVkQXVkaW8gPSBuZXcgQXJyYXlCdWZmZXIodGhpcy5ieXRlc1JlY2VpdmVkKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZBdWRpb091dHB1dFN0cmVhbS5yZWFkKHRoaXMucHJpdlJlY2VpdmVkQXVkaW8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNlaXZlZEF1ZGlvID0gbmV3IEFycmF5QnVmZmVyKDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGN1cnJlbnQgaWR4IGlzIGluIFhNTChTU01MKSB0YWdcbiAgICAgKiBAcGFyYW0gaWR4XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB3aXRoaW5YbWxUYWcoaWR4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSYXdUZXh0LmluZGV4T2YoXCI8XCIsIGlkeCArIDEpID4gdGhpcy5wcml2UmF3VGV4dC5pbmRleE9mKFwiPlwiLCBpZHggKyAxKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN5bnRoZXNpc1R1cm4uanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENvbnRleHQsIFNwZWVjaFNlcnZpY2VDb25maWcgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG5leHBvcnQgdmFyIFN5bnRoZXNpc1NlcnZpY2VUeXBlO1xuKGZ1bmN0aW9uIChTeW50aGVzaXNTZXJ2aWNlVHlwZSkge1xuICAgIFN5bnRoZXNpc1NlcnZpY2VUeXBlW1N5bnRoZXNpc1NlcnZpY2VUeXBlW1wiU3RhbmRhcmRcIl0gPSAwXSA9IFwiU3RhbmRhcmRcIjtcbiAgICBTeW50aGVzaXNTZXJ2aWNlVHlwZVtTeW50aGVzaXNTZXJ2aWNlVHlwZVtcIkN1c3RvbVwiXSA9IDFdID0gXCJDdXN0b21cIjtcbn0pKFN5bnRoZXNpc1NlcnZpY2VUeXBlIHx8IChTeW50aGVzaXNTZXJ2aWNlVHlwZSA9IHt9KSk7XG5leHBvcnQgY2xhc3MgU3ludGhlc2l6ZXJDb25maWcge1xuICAgIGNvbnN0cnVjdG9yKHNwZWVjaFNlcnZpY2VDb25maWcsIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgdGhpcy5wcml2U3ludGhlc2lzU2VydmljZVR5cGUgPSBTeW50aGVzaXNTZXJ2aWNlVHlwZS5TdGFuZGFyZDtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoU2VydmljZUNvbmZpZyA9IHNwZWVjaFNlcnZpY2VDb25maWcgPyBzcGVlY2hTZXJ2aWNlQ29uZmlnIDogbmV3IFNwZWVjaFNlcnZpY2VDb25maWcobmV3IENvbnRleHQobnVsbCkpO1xuICAgICAgICB0aGlzLnByaXZQYXJhbWV0ZXJzID0gcGFyYW1ldGVycztcbiAgICB9XG4gICAgZ2V0IHBhcmFtZXRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJhbWV0ZXJzO1xuICAgIH1cbiAgICBnZXQgc3ludGhlc2lzU2VydmljZVR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTeW50aGVzaXNTZXJ2aWNlVHlwZTtcbiAgICB9XG4gICAgc2V0IHN5bnRoZXNpc1NlcnZpY2VUeXBlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpdlN5bnRoZXNpc1NlcnZpY2VUeXBlID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBTcGVlY2hTZXJ2aWNlQ29uZmlnKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoU2VydmljZUNvbmZpZztcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN5bnRoZXNpemVyQ29uZmlnLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBQcm94eUluZm8sIFdlYnNvY2tldENvbm5lY3Rpb24sIH0gZnJvbSBcIi4uL2NvbW1vbi5icm93c2VyL0V4cG9ydHNcIjtcbmltcG9ydCB7IE91dHB1dEZvcm1hdCwgUHJvcGVydHlJZCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29ubmVjdGlvbkZhY3RvcnlCYXNlIH0gZnJvbSBcIi4vQ29ubmVjdGlvbkZhY3RvcnlCYXNlXCI7XG5pbXBvcnQgeyBPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUsIFdlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBIZWFkZXJOYW1lcyB9IGZyb20gXCIuL0hlYWRlck5hbWVzXCI7XG5pbXBvcnQgeyBRdWVyeVBhcmFtZXRlck5hbWVzIH0gZnJvbSBcIi4vUXVlcnlQYXJhbWV0ZXJOYW1lc1wiO1xuZXhwb3J0IGNsYXNzIFRyYW5zY3JpYmVyQ29ubmVjdGlvbkZhY3RvcnkgZXh0ZW5kcyBDb25uZWN0aW9uRmFjdG9yeUJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm11bHRpYXVkaW9SZWxhdGl2ZVVyaSA9IFwiL3NwZWVjaC9yZWNvZ25pdGlvbi9tdWx0aWF1ZGlvXCI7XG4gICAgfVxuICAgIGNyZWF0ZShjb25maWcsIGF1dGhJbmZvLCBjb25uZWN0aW9uSWQpIHtcbiAgICAgICAgbGV0IGVuZHBvaW50ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCwgdW5kZWZpbmVkKTtcbiAgICAgICAgY29uc3QgcmVnaW9uID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24sIFwiY2VudHJhbHVzXCIpO1xuICAgICAgICBjb25zdCBob3N0U3VmZml4ID0gQ29ubmVjdGlvbkZhY3RvcnlCYXNlLmdldEhvc3RTdWZmaXgocmVnaW9uKTtcbiAgICAgICAgY29uc3QgaG9zdERlZmF1bHQgPSBcIndzczovL3RyYW5zY3JpYmUuXCIgKyByZWdpb24gKyBcIi5jdHMuc3BlZWNoXCIgKyBob3N0U3VmZml4ICsgdGhpcy5tdWx0aWF1ZGlvUmVsYXRpdmVVcmk7XG4gICAgICAgIGNvbnN0IGhvc3QgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0hvc3QsIGhvc3REZWZhdWx0KTtcbiAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7fTtcbiAgICAgICAgdGhpcy5zZXRRdWVyeVBhcmFtcyhxdWVyeVBhcmFtcywgY29uZmlnLCBlbmRwb2ludCk7XG4gICAgICAgIGlmICghZW5kcG9pbnQpIHtcbiAgICAgICAgICAgIGVuZHBvaW50ID0gaG9zdDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoZWFkZXJzID0ge307XG4gICAgICAgIGlmIChhdXRoSW5mby50b2tlbiAhPT0gdW5kZWZpbmVkICYmIGF1dGhJbmZvLnRva2VuICE9PSBcIlwiKSB7XG4gICAgICAgICAgICBoZWFkZXJzW2F1dGhJbmZvLmhlYWRlck5hbWVdID0gYXV0aEluZm8udG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgaGVhZGVyc1tIZWFkZXJOYW1lcy5Db25uZWN0aW9uSWRdID0gY29ubmVjdGlvbklkO1xuICAgICAgICBjb25maWcucGFyYW1ldGVycy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1VybCwgZW5kcG9pbnQpO1xuICAgICAgICBjb25zdCBlbmFibGVDb21wcmVzc2lvbiA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFwiU1BFRUNILUVuYWJsZVdlYnNvY2tldENvbXByZXNzaW9uXCIsIFwiZmFsc2VcIikgPT09IFwidHJ1ZVwiO1xuICAgICAgICByZXR1cm4gbmV3IFdlYnNvY2tldENvbm5lY3Rpb24oZW5kcG9pbnQsIHF1ZXJ5UGFyYW1zLCBoZWFkZXJzLCBuZXcgV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlcigpLCBQcm94eUluZm8uZnJvbVJlY29nbml6ZXJDb25maWcoY29uZmlnKSwgZW5hYmxlQ29tcHJlc3Npb24sIGNvbm5lY3Rpb25JZCk7XG4gICAgfVxuICAgIHNldFF1ZXJ5UGFyYW1zKHF1ZXJ5UGFyYW1zLCBjb25maWcsIGVuZHBvaW50VXJsKSB7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50SWQgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50SWQsIHVuZGVmaW5lZCk7XG4gICAgICAgIGNvbnN0IGxhbmd1YWdlID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UsIHVuZGVmaW5lZCk7XG4gICAgICAgIGlmIChlbmRwb2ludElkICYmICEoUXVlcnlQYXJhbWV0ZXJOYW1lcy5DdXN0b21TcGVlY2hEZXBsb3ltZW50SWQgaW4gcXVlcnlQYXJhbXMpKSB7XG4gICAgICAgICAgICBxdWVyeVBhcmFtc1tRdWVyeVBhcmFtZXRlck5hbWVzLkN1c3RvbVNwZWVjaERlcGxveW1lbnRJZF0gPSBlbmRwb2ludElkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYW5ndWFnZSAmJiAhKFF1ZXJ5UGFyYW1ldGVyTmFtZXMuTGFuZ3VhZ2UgaW4gcXVlcnlQYXJhbXMpKSB7XG4gICAgICAgICAgICBxdWVyeVBhcmFtc1tRdWVyeVBhcmFtZXRlck5hbWVzLkxhbmd1YWdlXSA9IGxhbmd1YWdlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdvcmRMZXZlbFRpbWluZ3MgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0V29yZExldmVsVGltZXN0YW1wcywgXCJmYWxzZVwiKS50b0xvd2VyQ2FzZSgpID09PSBcInRydWVcIjtcbiAgICAgICAgY29uc3QgZGV0YWlsZWQgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUsIE91dHB1dEZvcm1hdFtPdXRwdXRGb3JtYXQuU2ltcGxlXSkgIT09IE91dHB1dEZvcm1hdFtPdXRwdXRGb3JtYXQuU2ltcGxlXTtcbiAgICAgICAgaWYgKHdvcmRMZXZlbFRpbWluZ3MgfHwgZGV0YWlsZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuRm9ybWF0XSA9IE91dHB1dEZvcm1hdFtPdXRwdXRGb3JtYXQuRGV0YWlsZWRdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRDb21tb25VcmxQYXJhbXMoY29uZmlnLCBxdWVyeVBhcmFtcywgZW5kcG9pbnRVcmwpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNjcmliZXJDb25uZWN0aW9uRmFjdG9yeS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUmVzdENvbmZpZ0Jhc2UgfSBmcm9tIFwiLi4vLi4vY29tbW9uLmJyb3dzZXIvUmVzdENvbmZpZ0Jhc2VcIjtcbmV4cG9ydCBjbGFzcyBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnIGV4dGVuZHMgUmVzdENvbmZpZ0Jhc2Uge1xuICAgIHN0YXRpYyBnZXQgaG9zdCgpIHtcbiAgICAgICAgcmV0dXJuIENvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcucHJpdkhvc3Q7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgYXBpVmVyc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIENvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcucHJpdkFwaVZlcnNpb247XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgY2xpZW50QXBwSWQoKSB7XG4gICAgICAgIHJldHVybiBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLnByaXZDbGllbnRBcHBJZDtcbiAgICB9XG4gICAgc3RhdGljIGdldCBkZWZhdWx0TGFuZ3VhZ2VDb2RlKCkge1xuICAgICAgICByZXR1cm4gQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5wcml2RGVmYXVsdExhbmd1YWdlQ29kZTtcbiAgICB9XG4gICAgc3RhdGljIGdldCByZXN0UGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIENvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcucHJpdlJlc3RQYXRoO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IHdlYlNvY2tldFBhdGgoKSB7XG4gICAgICAgIHJldHVybiBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLnByaXZXZWJTb2NrZXRQYXRoO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IHRyYW5zY3JpcHRpb25FdmVudEtleXMoKSB7XG4gICAgICAgIHJldHVybiBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLnByaXZUcmFuc2NyaXB0aW9uRXZlbnRLZXlzO1xuICAgIH1cbn1cbkNvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcucHJpdkhvc3QgPSBcImRldi5taWNyb3NvZnR0cmFuc2xhdG9yLmNvbVwiO1xuQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5wcml2UmVzdFBhdGggPSBcIi9jYXBpdG8vcm9vbVwiO1xuQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5wcml2QXBpVmVyc2lvbiA9IFwiMi4wXCI7XG5Db252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLnByaXZEZWZhdWx0TGFuZ3VhZ2VDb2RlID0gXCJlbi1VU1wiO1xuQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5wcml2Q2xpZW50QXBwSWQgPSBcIkZDNTM5QzIyLTE3NjctNEYxRi04NEJDLUI0RDgxMTExNEYxNVwiO1xuQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5wcml2V2ViU29ja2V0UGF0aCA9IFwiL2NhcGl0by90cmFuc2xhdGVcIjtcbkNvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcucHJpdlRyYW5zY3JpcHRpb25FdmVudEtleXMgPSBbXCJpQ2FsVWlkXCIsIFwiY2FsbElkXCIsIFwib3JnYW5pemVyXCIsIFwiRkxBQ1wiLCBcIk1UVXJpXCIsIFwiRGlmZmVyZW50aWF0ZUd1ZXN0U3BlYWtlcnNcIiwgXCJhdWRpb3JlY29yZGluZ1wiLCBcIlRocmVhZGlkXCIsIFwiT3JnYW5pemVyTXJpXCIsIFwiT3JnYW5pemVyVGVuYW50SWRcIiwgXCJVc2VyVG9rZW5cIl07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFByb3h5SW5mbywgV2Vic29ja2V0Q29ubmVjdGlvbiB9IGZyb20gXCIuLi8uLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCI7XG5pbXBvcnQgeyBjcmVhdGVHdWlkIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi4vLi4vc2RrL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuLi8uLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29ubmVjdGlvbkZhY3RvcnlCYXNlIH0gZnJvbSBcIi4uL0Nvbm5lY3Rpb25GYWN0b3J5QmFzZVwiO1xuaW1wb3J0IHsgQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZyB9IGZyb20gXCIuL0NvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWdcIjtcbmltcG9ydCB7IENvbnZlcnNhdGlvbldlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIgfSBmcm9tIFwiLi9Db252ZXJzYXRpb25XZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyXCI7XG4vKipcbiAqIENyZWF0ZSBhIGNvbm5lY3Rpb24gdG8gdGhlIENvbnZlcnNhdGlvbiBUcmFuc2xhdG9yIHdlYnNvY2tldCBmb3Igc2VuZGluZyBpbnN0YW50IG1lc3NhZ2VzIGFuZCBjb21tYW5kcywgYW5kIGZvciByZWNlaXZpbmcgdHJhbnNsYXRlZCBtZXNzYWdlcy5cbiAqIFRoZSBjb252ZXJzYXRpb24gbXVzdCBhbHJlYWR5IGhhdmUgYmVlbiBzdGFydGVkIG9yIGpvaW5lZC5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvbkNvbm5lY3Rpb25GYWN0b3J5IGV4dGVuZHMgQ29ubmVjdGlvbkZhY3RvcnlCYXNlIHtcbiAgICBjcmVhdGUoY29uZmlnLCBhdXRoSW5mbywgY29ubmVjdGlvbklkKSB7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50SG9zdCA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uVHJhbnNsYXRvcl9Ib3N0LCBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLmhvc3QpO1xuICAgICAgICBjb25zdCBjb3JyZWxhdGlvbklkID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25UcmFuc2xhdG9yX0NvcnJlbGF0aW9uSWQsIGNyZWF0ZUd1aWQoKSk7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gYHdzczovLyR7ZW5kcG9pbnRIb3N0fSR7Q29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy53ZWJTb2NrZXRQYXRofWA7XG4gICAgICAgIGNvbnN0IHRva2VuID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25UcmFuc2xhdG9yX1Rva2VuLCB1bmRlZmluZWQpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZCh0b2tlbiwgXCJ0b2tlblwiKTtcbiAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7fTtcbiAgICAgICAgcXVlcnlQYXJhbXNbQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5jb25maWdQYXJhbXMuYXBpVmVyc2lvbl0gPSBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLmFwaVZlcnNpb247XG4gICAgICAgIHF1ZXJ5UGFyYW1zW0NvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcuY29uZmlnUGFyYW1zLnRva2VuXSA9IHRva2VuO1xuICAgICAgICBxdWVyeVBhcmFtc1tDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLmNvbmZpZ1BhcmFtcy5jb3JyZWxhdGlvbklkXSA9IGNvcnJlbGF0aW9uSWQ7XG4gICAgICAgIGNvbnN0IGVuYWJsZUNvbXByZXNzaW9uID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoXCJTUEVFQ0gtRW5hYmxlV2Vic29ja2V0Q29tcHJlc3Npb25cIiwgXCJmYWxzZVwiKSA9PT0gXCJ0cnVlXCI7XG4gICAgICAgIHJldHVybiBuZXcgV2Vic29ja2V0Q29ubmVjdGlvbihlbmRwb2ludCwgcXVlcnlQYXJhbXMsIHt9LCBuZXcgQ29udmVyc2F0aW9uV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlcigpLCBQcm94eUluZm8uZnJvbVJlY29nbml6ZXJDb25maWcoY29uZmlnKSwgZW5hYmxlQ29tcHJlc3Npb24sIGNvbm5lY3Rpb25JZCk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db252ZXJzYXRpb25Db25uZWN0aW9uRmFjdG9yeS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQ29ubmVjdGlvbk1lc3NhZ2UgfSBmcm9tIFwiLi4vLi4vY29tbW9uL0V4cG9ydHNcIjtcbmV4cG9ydCBjbGFzcyBDb252ZXJzYXRpb25Db25uZWN0aW9uTWVzc2FnZSBleHRlbmRzIENvbm5lY3Rpb25NZXNzYWdlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlVHlwZSwgYm9keSwgaGVhZGVycywgaWQpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZVR5cGUsIGJvZHksIGhlYWRlcnMsIGlkKTtcbiAgICAgICAgY29uc3QganNvbiA9IEpTT04ucGFyc2UodGhpcy50ZXh0Qm9keSk7XG4gICAgICAgIGlmIChqc29uLnR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uTWVzc2FnZVR5cGUgPSBqc29uLnR5cGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGNvbnZlcnNhdGlvbk1lc3NhZ2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29udmVyc2F0aW9uTWVzc2FnZVR5cGU7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db252ZXJzYXRpb25Db25uZWN0aW9uTWVzc2FnZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUmVzdE1lc3NhZ2VBZGFwdGVyLCBSZXN0UmVxdWVzdFR5cGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uLmJyb3dzZXIvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4uLy4uL3Nkay9Db250cmFjdHNcIjtcbmltcG9ydCB7IFByb3BlcnR5SWQgfSBmcm9tIFwiLi4vLi4vc2RrL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcgfSBmcm9tIFwiLi9Db252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnXCI7XG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vXG4gICAgICAgIHRoaXMucHJpdlJlcXVlc3RQYXJhbXMgPSBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLmNvbmZpZ1BhcmFtcztcbiAgICAgICAgdGhpcy5wcml2RXJyb3JzID0gQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5yZXN0RXJyb3JzO1xuICAgICAgICB0aGlzLnByaXZIb3N0ID0gQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5ob3N0O1xuICAgICAgICB0aGlzLnByaXZBcGlWZXJzaW9uID0gQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5hcGlWZXJzaW9uO1xuICAgICAgICB0aGlzLnByaXZSZXN0UGF0aCA9IENvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcucmVzdFBhdGg7XG4gICAgICAgIHRoaXMucHJpdlJlc3RBZGFwdGVyID0gbmV3IFJlc3RNZXNzYWdlQWRhcHRlcih7fSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ha2UgYSBQT1NUIHJlcXVlc3QgdG8gdGhlIENvbnZlcnNhdGlvbiBNYW5hZ2VyIHNlcnZpY2UgZW5kcG9pbnQgdG8gY3JlYXRlIG9yIGpvaW4gYSBjb252ZXJzYXRpb24uXG4gICAgICogQHBhcmFtIGFyZ3NcbiAgICAgKiBAcGFyYW0gY29udmVyc2F0aW9uQ29kZVxuICAgICAqIEBwYXJhbSBjYWxsYmFja1xuICAgICAqIEBwYXJhbSBlcnJvckNhbGxiYWNrXG4gICAgICovXG4gICAgY3JlYXRlT3JKb2luKGFyZ3MsIGNvbnZlcnNhdGlvbkNvZGUsIGNiLCBlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGFyZ3MsIFwiYXJnc1wiKTtcbiAgICAgICAgICAgIGNvbnN0IGxhbmd1YWdlQ29kZSA9IGFyZ3MuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UsIENvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcuZGVmYXVsdExhbmd1YWdlQ29kZSk7XG4gICAgICAgICAgICBjb25zdCBuaWNrbmFtZSA9IGFyZ3MuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25UcmFuc2xhdG9yX05hbWUsIFwiY29udmVyc2F0aW9uX2hvc3RcIik7XG4gICAgICAgICAgICBjb25zdCBlbmRwb2ludEhvc3QgPSBhcmdzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uVHJhbnNsYXRvcl9Ib3N0LCB0aGlzLnByaXZIb3N0KTtcbiAgICAgICAgICAgIGNvbnN0IGNvcnJlbGF0aW9uSWQgPSBhcmdzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uVHJhbnNsYXRvcl9Db3JyZWxhdGlvbklkKTtcbiAgICAgICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbktleSA9IGFyZ3MuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXkpO1xuICAgICAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uUmVnaW9uID0gYXJncy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbik7XG4gICAgICAgICAgICBjb25zdCBhdXRoVG9rZW4gPSBhcmdzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4pO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKGxhbmd1YWdlQ29kZSwgXCJsYW5ndWFnZUNvZGVcIik7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2Uobmlja25hbWUsIFwibmlja25hbWVcIik7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UoZW5kcG9pbnRIb3N0LCBcImVuZHBvaW50SG9zdFwiKTtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0ge307XG4gICAgICAgICAgICBxdWVyeVBhcmFtc1t0aGlzLnByaXZSZXF1ZXN0UGFyYW1zLmFwaVZlcnNpb25dID0gdGhpcy5wcml2QXBpVmVyc2lvbjtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW3RoaXMucHJpdlJlcXVlc3RQYXJhbXMubGFuZ3VhZ2VDb2RlXSA9IGxhbmd1YWdlQ29kZTtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW3RoaXMucHJpdlJlcXVlc3RQYXJhbXMubmlja25hbWVdID0gbmlja25hbWU7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0ge307XG4gICAgICAgICAgICBpZiAoY29ycmVsYXRpb25JZCkge1xuICAgICAgICAgICAgICAgIGhlYWRlcnNbdGhpcy5wcml2UmVxdWVzdFBhcmFtcy5jb3JyZWxhdGlvbklkXSA9IGNvcnJlbGF0aW9uSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoZWFkZXJzW3RoaXMucHJpdlJlcXVlc3RQYXJhbXMuY2xpZW50QXBwSWRdID0gQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5jbGllbnRBcHBJZDtcbiAgICAgICAgICAgIGlmIChjb252ZXJzYXRpb25Db2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtc1t0aGlzLnByaXZSZXF1ZXN0UGFyYW1zLnJvb21JZF0gPSBjb252ZXJzYXRpb25Db2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoc3Vic2NyaXB0aW9uUmVnaW9uLCB0aGlzLnByaXZFcnJvcnMuYXV0aEludmFsaWRTdWJzY3JpcHRpb25SZWdpb24pO1xuICAgICAgICAgICAgICAgIGhlYWRlcnNbdGhpcy5wcml2UmVxdWVzdFBhcmFtcy5zdWJzY3JpcHRpb25SZWdpb25dID0gc3Vic2NyaXB0aW9uUmVnaW9uO1xuICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25LZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1t0aGlzLnByaXZSZXF1ZXN0UGFyYW1zLnN1YnNjcmlwdGlvbktleV0gPSBzdWJzY3JpcHRpb25LZXk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGF1dGhUb2tlbikge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW3RoaXMucHJpdlJlcXVlc3RQYXJhbXMuYXV0aG9yaXphdGlvbl0gPSBgQmVhcmVyICR7YXV0aFRva2VufWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChzdWJzY3JpcHRpb25LZXksIHRoaXMucHJpdkVycm9ycy5hdXRoSW52YWxpZFN1YnNjcmlwdGlvbktleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29uZmlnID0ge307XG4gICAgICAgICAgICBjb25maWcuaGVhZGVycyA9IGhlYWRlcnM7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXN0QWRhcHRlci5vcHRpb25zID0gY29uZmlnO1xuICAgICAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgaHR0cHM6Ly8ke2VuZHBvaW50SG9zdH0ke3RoaXMucHJpdlJlc3RQYXRofWA7XG4gICAgICAgICAgICAvLyBUT0RPOiBzdXBwb3J0IGEgcHJveHkgYW5kIGNlcnRpZmljYXRlIHZhbGlkYXRpb25cbiAgICAgICAgICAgIHRoaXMucHJpdlJlc3RBZGFwdGVyLnJlcXVlc3QoUmVzdFJlcXVlc3RUeXBlLlBvc3QsIGVuZHBvaW50LCBxdWVyeVBhcmFtcywgbnVsbCkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0SWQgPSBSZXN0TWVzc2FnZUFkYXB0ZXIuZXh0cmFjdEhlYWRlclZhbHVlKHRoaXMucHJpdlJlcXVlc3RQYXJhbXMucmVxdWVzdElkLCByZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBlcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9IHRoaXMucHJpdkVycm9ycy5pbnZhbGlkQ3JlYXRlSm9pbkNvbnZlcnNhdGlvblJlc3BvbnNlLnJlcGxhY2UoXCJ7c3RhdHVzfVwiLCByZXNwb25zZS5zdGF0dXMudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXJyTWVzc2FnZVJhdztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyTWVzc2FnZVJhdyA9IEpTT04ucGFyc2UocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlICs9IGAgWyR7ZXJyTWVzc2FnZVJhdy5lcnJvci5jb2RlfTogJHtlcnJNZXNzYWdlUmF3LmVycm9yLm1lc3NhZ2V9XWA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSArPSBgIFske3Jlc3BvbnNlLmRhdGF9XWA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlICs9IGAgJHtyZXF1ZXN0SWR9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVycihlcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY29udmVyc2F0aW9uID0gSlNPTi5wYXJzZShyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAoY29udmVyc2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbi5yZXF1ZXN0SWQgPSByZXF1ZXN0SWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYihjb252ZXJzYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlZEVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIGVycih0eXBlZEVycm9yLm5hbWUgKyBcIjogXCIgKyB0eXBlZEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFrZSBhIERFTEVURSByZXF1ZXN0IHRvIHRoZSBDb252ZXJzYXRpb24gTWFuYWdlciBzZXJ2aWNlIGVuZHBvaW50IHRvIGxlYXZlIHRoZSBjb252ZXJzYXRpb24uXG4gICAgICogQHBhcmFtIGFyZ3NcbiAgICAgKiBAcGFyYW0gc2Vzc2lvblRva2VuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAgICovXG4gICAgbGVhdmUoYXJncywgc2Vzc2lvblRva2VuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGFyZ3MsIHRoaXMucHJpdkVycm9ycy5pbnZhbGlkQXJncy5yZXBsYWNlKFwie2FyZ31cIiwgXCJjb25maWdcIikpO1xuICAgICAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShzZXNzaW9uVG9rZW4sIHRoaXMucHJpdkVycm9ycy5pbnZhbGlkQXJncy5yZXBsYWNlKFwie2FyZ31cIiwgXCJ0b2tlblwiKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZW5kcG9pbnRIb3N0ID0gYXJncy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfSG9zdCwgdGhpcy5wcml2SG9zdCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29ycmVsYXRpb25JZCA9IGFyZ3MuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25UcmFuc2xhdG9yX0NvcnJlbGF0aW9uSWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0ge307XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXNbdGhpcy5wcml2UmVxdWVzdFBhcmFtcy5hcGlWZXJzaW9uXSA9IHRoaXMucHJpdkFwaVZlcnNpb247XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXNbdGhpcy5wcml2UmVxdWVzdFBhcmFtcy5zZXNzaW9uVG9rZW5dID0gc2Vzc2lvblRva2VuO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAoY29ycmVsYXRpb25JZCkge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW3RoaXMucHJpdlJlcXVlc3RQYXJhbXMuY29ycmVsYXRpb25JZF0gPSBjb3JyZWxhdGlvbklkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjb25maWcgPSB7fTtcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVycyA9IGhlYWRlcnM7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVzdEFkYXB0ZXIub3B0aW9ucyA9IGNvbmZpZztcbiAgICAgICAgICAgICAgICBjb25zdCBlbmRwb2ludCA9IGBodHRwczovLyR7ZW5kcG9pbnRIb3N0fSR7dGhpcy5wcml2UmVzdFBhdGh9YDtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBzdXBwb3J0IGEgcHJveHkgYW5kIGNlcnRpZmljYXRlIHZhbGlkYXRpb25cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXN0QWRhcHRlci5yZXF1ZXN0KFJlc3RSZXF1ZXN0VHlwZS5EZWxldGUsIGVuZHBvaW50LCBxdWVyeVBhcmFtcywgbnVsbCkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBvbiBkZWxldGVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZWRFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QodHlwZWRFcnJvci5uYW1lICsgXCI6IFwiICsgdHlwZWRFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvbk1hbmFnZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgY3JlYXRlTm9EYXNoR3VpZCwgRGVmZXJyZWQsIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9FeHBvcnRzXCI7XG4vKipcbiAqIFBsYWNlaG9sZGVyIGNsYXNzIGZvciB0aGUgQ29udmVyc2F0aW9uIFJlcXVlc3QgU2Vzc2lvbi4gQmFzZWQgb2ZmIFJlcXVlc3RTZXNzaW9uLlxuICogVE9ETzogZGVmaW5lIHdoYXQgdGVsZW1ldHJ5IGlzIHJlcXVpcmVkLlxuICovXG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uUmVxdWVzdFNlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHNlc3Npb25JZCkge1xuICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkRldGFjaGFibGVzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIHRoaXMucHJpdlNlc3Npb25JZCA9IHNlc3Npb25JZDtcbiAgICAgICAgdGhpcy5wcml2UmVxdWVzdElkID0gY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZSZXF1ZXN0Q29tcGxldGlvbkRlZmVycmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgfVxuICAgIGdldCBzZXNzaW9uSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTZXNzaW9uSWQ7XG4gICAgfVxuICAgIGdldCByZXF1ZXN0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZXF1ZXN0SWQ7XG4gICAgfVxuICAgIGdldCBjb21wbGV0aW9uUHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlcXVlc3RDb21wbGV0aW9uRGVmZXJyYWwucHJvbWlzZTtcbiAgICB9XG4gICAgb25QcmVDb25uZWN0aW9uU3RhcnQoYXV0aEZldGNoRXZlbnRJZCwgY29ubmVjdGlvbklkKSB7XG4gICAgICAgIHRoaXMucHJpdlNlc3Npb25JZCA9IGNvbm5lY3Rpb25JZDtcbiAgICB9XG4gICAgb25BdXRoQ29tcGxldGVkKGlzRXJyb3IpIHtcbiAgICAgICAgaWYgKGlzRXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uQ29ubmVjdGlvbkVzdGFibGlzaENvbXBsZXRlZChzdGF0dXNDb2RlKSB7XG4gICAgICAgIGlmIChzdGF0dXNDb2RlID09PSAyMDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdGF0dXNDb2RlID09PSA0MDMpIHtcbiAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uU2VydmljZVR1cm5FbmRSZXNwb25zZShjb250aW51b3VzUmVjb2duaXRpb24pIHtcbiAgICAgICAgaWYgKCFjb250aW51b3VzUmVjb2duaXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdElkID0gY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJpdklzRGlzcG9zZWQpIHtcbiAgICAgICAgICAgICAgICAvLyB3ZSBzaG91bGQgaGF2ZSBjb21wbGV0ZWQgYnkgbm93LiBJZiB3ZSBkaWQgbm90IGl0cyBhbiB1bmtub3duIGVycm9yLlxuICAgICAgICAgICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGV0YWNoYWJsZSBvZiB0aGlzLnByaXZEZXRhY2hhYmxlcykge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBkZXRhY2hhYmxlLmRldGFjaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9uQ29tcGxldGUoKSB7XG4gICAgICAgIC8vXG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db252ZXJzYXRpb25SZXF1ZXN0U2Vzc2lvbi5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBDb25uZWN0aW9uU3RhdGUsIGNyZWF0ZU5vRGFzaEd1aWQsIERlZmVycmVkLCBNZXNzYWdlVHlwZSwgfSBmcm9tIFwiLi4vLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IENhbmNlbGxhdGlvbkVycm9yQ29kZSwgQ2FuY2VsbGF0aW9uUmVhc29uLCBDb252ZXJzYXRpb25FeHBpcmF0aW9uRXZlbnRBcmdzLCBDb252ZXJzYXRpb25UcmFuc2xhdGlvbkNhbmNlbGVkRXZlbnRBcmdzLCBDb252ZXJzYXRpb25UcmFuc2xhdGlvblJlc3VsdCwgUmVzdWx0UmVhc29uLCBUcmFuc2xhdGlvbnMgfSBmcm9tIFwiLi4vLi4vc2RrL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvZ25pdGl2ZVRva2VuQXV0aGVudGljYXRpb24sIFNlcnZpY2VSZWNvZ25pemVyQmFzZSB9IGZyb20gXCIuLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25Db25uZWN0aW9uTWVzc2FnZSB9IGZyb20gXCIuL0NvbnZlcnNhdGlvbkNvbm5lY3Rpb25NZXNzYWdlXCI7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25SZXF1ZXN0U2Vzc2lvbiB9IGZyb20gXCIuL0NvbnZlcnNhdGlvblJlcXVlc3RTZXNzaW9uXCI7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25SZWNlaXZlZFRyYW5zbGF0aW9uRXZlbnRBcmdzLCBMb2NrUm9vbUV2ZW50QXJncywgTXV0ZUFsbEV2ZW50QXJncywgUGFydGljaXBhbnRBdHRyaWJ1dGVFdmVudEFyZ3MsIFBhcnRpY2lwYW50RXZlbnRBcmdzLCBQYXJ0aWNpcGFudHNMaXN0RXZlbnRBcmdzIH0gZnJvbSBcIi4vQ29udmVyc2F0aW9uVHJhbnNsYXRvckV2ZW50QXJnc1wiO1xuaW1wb3J0IHsgQ29udmVyc2F0aW9uVHJhbnNsYXRvckNvbW1hbmRUeXBlcywgQ29udmVyc2F0aW9uVHJhbnNsYXRvck1lc3NhZ2VUeXBlcyB9IGZyb20gXCIuL0NvbnZlcnNhdGlvblRyYW5zbGF0b3JJbnRlcmZhY2VzXCI7XG5pbXBvcnQgeyBDb21tYW5kUmVzcG9uc2VQYXlsb2FkLCBQYXJ0aWNpcGFudFBheWxvYWRSZXNwb25zZSwgUGFydGljaXBhbnRzTGlzdFBheWxvYWRSZXNwb25zZSwgU3BlZWNoUmVzcG9uc2VQYXlsb2FkLCBUZXh0UmVzcG9uc2VQYXlsb2FkIH0gZnJvbSBcIi4vU2VydmljZU1lc3NhZ2VzL0V4cG9ydHNcIjtcbi8qKlxuICogVGhlIHNlcnZpY2UgYWRhcHRlciBoYW5kbGVzIHNlbmRpbmcgYW5kIHJlY2VpdmluZyBtZXNzYWdlcyB0byB0aGUgQ29udmVyc2F0aW9uIFRyYW5zbGF0b3Igd2Vic29ja2V0LlxuICovXG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uU2VydmljZUFkYXB0ZXIgZXh0ZW5kcyBTZXJ2aWNlUmVjb2duaXplckJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Tb3VyY2UsIHJlY29nbml6ZXJDb25maWcsIGNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IpIHtcbiAgICAgICAgc3VwZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb1NvdXJjZSwgcmVjb2duaXplckNvbmZpZywgY29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvcik7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWdQcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByaXZMYXN0UGFydGlhbFV0dGVyYW5jZUlkID0gXCJcIjtcbiAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3RvciA9IGNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3I7XG4gICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbkF1dGhlbnRpY2F0aW9uID0gYXV0aGVudGljYXRpb247XG4gICAgICAgIHRoaXMucmVjZWl2ZU1lc3NhZ2VPdmVycmlkZSA9ICgpID0+IHRoaXMucmVjZWl2ZUNvbnZlcnNhdGlvbk1lc3NhZ2VPdmVycmlkZSgpO1xuICAgICAgICB0aGlzLnJlY29nbml6ZU92ZXJyaWRlID0gKCkgPT4gdGhpcy5ub09wKCk7XG4gICAgICAgIHRoaXMucG9zdENvbm5lY3RJbXBsT3ZlcnJpZGUgPSAoY29ubmVjdGlvbikgPT4gdGhpcy5jb252ZXJzYXRpb25Db25uZWN0SW1wbChjb25uZWN0aW9uKTtcbiAgICAgICAgdGhpcy5jb25maWdDb25uZWN0aW9uT3ZlcnJpZGUgPSAoKSA9PiB0aGlzLmNvbmZpZ0Nvbm5lY3Rpb24oKTtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0T3ZlcnJpZGUgPSAoKSA9PiB0aGlzLnByaXZEaXNjb25uZWN0KCk7XG4gICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlcXVlc3RTZXNzaW9uID0gbmV3IENvbnZlcnNhdGlvblJlcXVlc3RTZXNzaW9uKGNyZWF0ZU5vRGFzaEd1aWQoKSk7XG4gICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbkNvbm5lY3Rpb25GYWN0b3J5ID0gY29ubmVjdGlvbkZhY3Rvcnk7XG4gICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbklzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaXNEaXNwb3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmlzRGlzcG9zZWQoKSB8fCB0aGlzLnByaXZDb252ZXJzYXRpb25Jc0Rpc3Bvc2VkO1xuICAgIH1cbiAgICBkaXNwb3NlKHJlYXNvbikge1xuICAgICAgICBjb25zdCBfc3VwZXIgPSBPYmplY3QuY3JlYXRlKG51bGwsIHtcbiAgICAgICAgICAgIGRpc3Bvc2U6IHsgZ2V0OiAoKSA9PiBzdXBlci5kaXNwb3NlIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25Jc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlnUHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHlpZWxkIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWdQcm9taXNlO1xuICAgICAgICAgICAgICAgIHlpZWxkIGNvbm5lY3Rpb24uZGlzcG9zZShyZWFzb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgX3N1cGVyLmRpc3Bvc2UuY2FsbCh0aGlzLCByZWFzb24pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHlpZWxkIHRoaXMuZmV0Y2hDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5zZW5kKG5ldyBDb252ZXJzYXRpb25Db25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBtZXNzYWdlKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kTWVzc2FnZUFzeW5jKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgeWllbGQgY29ubmVjdGlvbi5zZW5kKG5ldyBDb252ZXJzYXRpb25Db25uZWN0aW9uTWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBtZXNzYWdlKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwcml2RGlzY29ubmVjdCgpIHtcbiAgICAgICAgaWYgKHRoaXMudGVybWluYXRlTWVzc2FnZUxvb3ApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbmNlbFJlY29nbml0aW9uKHRoaXMucHJpdkNvbnZlcnNhdGlvblJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCwgdGhpcy5wcml2Q29udmVyc2F0aW9uUmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBDYW5jZWxsYXRpb25SZWFzb24uRXJyb3IsIENhbmNlbGxhdGlvbkVycm9yQ29kZS5Ob0Vycm9yLCBcIkRpc2Nvbm5lY3RpbmdcIik7XG4gICAgICAgIHRoaXMudGVybWluYXRlTWVzc2FnZUxvb3AgPSB0cnVlO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvcmVxdWlyZS1hd2FpdFxuICAgIHByb2Nlc3NUeXBlU3BlY2lmaWNNZXNzYWdlcygpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gQ2FuY2VscyByZWNvZ25pdGlvbi5cbiAgICBjYW5jZWxSZWNvZ25pdGlvbihzZXNzaW9uSWQsIHJlcXVlc3RJZCwgY2FuY2VsbGF0aW9uUmVhc29uLCBlcnJvckNvZGUsIGVycm9yKSB7XG4gICAgICAgIHRoaXMudGVybWluYXRlTWVzc2FnZUxvb3AgPSB0cnVlO1xuICAgICAgICBjb25zdCBjYW5jZWxFdmVudCA9IG5ldyBDb252ZXJzYXRpb25UcmFuc2xhdGlvbkNhbmNlbGVkRXZlbnRBcmdzKGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3IsIGVycm9yQ29kZSwgdW5kZWZpbmVkLCBzZXNzaW9uSWQpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci5jYW5jZWxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IuY2FuY2VsZWQodGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3RvciwgY2FuY2VsRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfYSkge1xuICAgICAgICAgICAgLy8gY29udGludWUgb24gZXJyb3JcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBFc3RhYmxpc2hlcyBhIHdlYnNvY2tldCBjb25uZWN0aW9uIHRvIHRoZSBlbmQgcG9pbnQuXG4gICAgICovXG4gICAgY29udmVyc2F0aW9uQ29ubmVjdEltcGwoY29ubmVjdGlvbikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkxvb3AgPSB0aGlzLnN0YXJ0TWVzc2FnZUxvb3AoKTtcbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvY2VzcyBpbmNvbWluZyB3ZWJzb2NrZXQgbWVzc2FnZXNcbiAgICAgKi9cbiAgICByZWNlaXZlQ29udmVyc2F0aW9uTWVzc2FnZU92ZXJyaWRlKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEaXNwb3NlZCgpIHx8IHRoaXMudGVybWluYXRlTWVzc2FnZUxvb3ApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB3ZSB3b24ndCByZWx5IG9uIHRoZSBjYXNjYWRpbmcgcHJvbWlzZXMgb2YgdGhlIGNvbm5lY3Rpb24gc2luY2Ugd2Ugd2FudCB0byBjb250aW51YWxseSBiZSBhdmFpbGFibGUgdG8gcmVjZWl2ZSBtZXNzYWdlc1xuICAgICAgICAgICAgY29uc3QgY29tbXVuaWNhdGlvbkN1c3RvZGlhbiA9IG5ldyBEZWZlcnJlZCgpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uID0geWllbGQgdGhpcy5mZXRjaENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0geWllbGQgY29ubmVjdGlvbi5yZWFkKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNEaXNwb3NlZCgpIHx8IHRoaXMudGVybWluYXRlTWVzc2FnZUxvb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UncmUgZG9uZS5cbiAgICAgICAgICAgICAgICAgICAgY29tbXVuaWNhdGlvbkN1c3RvZGlhbi5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlY2VpdmVDb252ZXJzYXRpb25NZXNzYWdlT3ZlcnJpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbklkID0gdGhpcy5wcml2Q29udmVyc2F0aW9uUmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbk1lc3NhZ2VUeXBlID0gbWVzc2FnZS5jb252ZXJzYXRpb25NZXNzYWdlVHlwZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIGxldCBzZW5kRmluYWwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbnZlcnNhdGlvbk1lc3NhZ2VUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5mb1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInBhcnRpY2lwYW50X2NvbW1hbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjb21tYW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWFuZFBheWxvYWQgPSBDb21tYW5kUmVzcG9uc2VQYXlsb2FkLmZyb21KU09OKG1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY29tbWFuZFBheWxvYWQuY29tbWFuZC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAnUGFydGljcGFudExpc3QnIGlzIHRoZSBmaXJzdCBtZXNzYWdlIHNlbnQgdG8gdGhlIHVzZXIgYWZ0ZXIgdGhlIHdlYnNvY2tldCBjb25uZWN0aW9uIGhhcyBvcGVuZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFRoZSBjb25zdW1pbmcgY2xpZW50IG11c3Qgd2FpdCBmb3IgdGhpcyBtZXNzYWdlIHRvIGFycml2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBiZWZvcmUgc3RhcnRpbmcgdG8gc2VuZCB0aGVpciBvd24gZGF0YS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJwYXJ0aWNpcGFudGxpc3RcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRpY2lwYW50c1BheWxvYWQgPSBQYXJ0aWNpcGFudHNMaXN0UGF5bG9hZFJlc3BvbnNlLmZyb21KU09OKG1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydGljaXBhbnRzUmVzdWx0ID0gcGFydGljaXBhbnRzUGF5bG9hZC5wYXJ0aWNpcGFudHMubWFwKChwKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydGljaXBhbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF2YXRhcjogcC5hdmF0YXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBwLm5pY2tuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogcC5wYXJ0aWNpcGFudElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0hvc3Q6IHAuaXNob3N0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc011dGVkOiBwLmlzbXV0ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVXNpbmdUdHM6IHAudXNldHRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRMYW5ndWFnZTogcC5sb2NhbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0aWNpcGFudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci5wYXJ0aWNpcGFudHNMaXN0UmVjZWl2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLnBhcnRpY2lwYW50c0xpc3RSZWNlaXZlZCh0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLCBuZXcgUGFydGljaXBhbnRzTGlzdEV2ZW50QXJncyhwYXJ0aWNpcGFudHNQYXlsb2FkLnJvb21pZCwgcGFydGljaXBhbnRzUGF5bG9hZC50b2tlbiwgcGFydGljaXBhbnRzUGF5bG9hZC50cmFuc2xhdGVUbywgcGFydGljaXBhbnRzUGF5bG9hZC5wcm9mYW5pdHlGaWx0ZXIsIHBhcnRpY2lwYW50c1BheWxvYWQucm9vbVByb2Zhbml0eUZpbHRlciwgcGFydGljaXBhbnRzUGF5bG9hZC5yb29tTG9ja2VkLCBwYXJ0aWNpcGFudHNQYXlsb2FkLm11dGVBbGwsIHBhcnRpY2lwYW50c1Jlc3VsdCwgc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICdTZXRUcmFuc2xhdGVUb0xhbmd1YWdlcycgcmVwcmVzZW50cyB0aGUgbGlzdCBvZiBsYW5ndWFnZXMgYmVpbmcgdXNlZCBpbiB0aGUgQ29udmVyc2F0aW9uIGJ5IGFsbCB1c2Vycyg/KS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogVGhpcyBpcyBzZW50IGF0IHRoZSBzdGFydCBvZiB0aGUgQ29udmVyc2F0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2V0dHJhbnNsYXRldG9sYW5ndWFnZXNcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IucGFydGljaXBhbnRVcGRhdGVDb21tYW5kUmVjZWl2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLnBhcnRpY2lwYW50VXBkYXRlQ29tbWFuZFJlY2VpdmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IsIG5ldyBQYXJ0aWNpcGFudEF0dHJpYnV0ZUV2ZW50QXJncyhjb21tYW5kUGF5bG9hZC5wYXJ0aWNpcGFudElkLCBDb252ZXJzYXRpb25UcmFuc2xhdG9yQ29tbWFuZFR5cGVzLnNldFRyYW5zbGF0ZVRvTGFuZ3VhZ2VzLCBjb21tYW5kUGF5bG9hZC52YWx1ZSwgc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICdTZXRQcm9mYW5pdHlGaWx0ZXJpbmcnIGxldHMgdGhlIGNsaWVudCBzZXQgdGhlIGxldmVsIG9mIHByb2Zhbml0eSBmaWx0ZXJpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIElmIHNlbnQgYnkgdGhlIHBhcnRpY2lwYW50IHRoZSBzZXR0aW5nIHdpbGwgZWZmZWN0IG9ubHkgdGhlaXIgb3duIHByb2Zhbml0eSBsZXZlbC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogSWYgc2VudCBieSB0aGUgaG9zdCwgdGhlIHNldHRpbmcgd2lsbCBlZmZlY3QgYWxsIHBhcnRpY2lwYW50cyBpbmNsdWRpbmcgdGhlIGhvc3QuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIE5vdGU6IHRoZSBwcm9mYW5pdHkgZmlsdGVycyBkaWZmZXIgZnJvbSBTcGVlY2ggU2VydmljZSAoPyk6ICdtYXJrZWQnLCAncmF3JywgJ3JlbW92ZWQnLCAndGFnZ2VkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNldHByb2Zhbml0eWZpbHRlcmluZ1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci5wYXJ0aWNpcGFudFVwZGF0ZUNvbW1hbmRSZWNlaXZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IucGFydGljaXBhbnRVcGRhdGVDb21tYW5kUmVjZWl2ZWQodGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3RvciwgbmV3IFBhcnRpY2lwYW50QXR0cmlidXRlRXZlbnRBcmdzKGNvbW1hbmRQYXlsb2FkLnBhcnRpY2lwYW50SWQsIENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMuc2V0UHJvZmFuaXR5RmlsdGVyaW5nLCBjb21tYW5kUGF5bG9hZC52YWx1ZSwgc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICdTZXRNdXRlJyBpcyBzZW50IGlmIHRoZSBwYXJ0aWNpcGFudCBoYXMgYmVlbiBtdXRlZCBieSB0aGUgaG9zdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ2hlY2sgdGhlICdwYXJ0aWNpcGFudElkJyB0byBkZXRlcm1pbmUgaWYgdGhlIGN1cnJlbnQgdXNlciBoYXMgYmVlbiBtdXRlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzZXRtdXRlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLnBhcnRpY2lwYW50VXBkYXRlQ29tbWFuZFJlY2VpdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci5wYXJ0aWNpcGFudFVwZGF0ZUNvbW1hbmRSZWNlaXZlZCh0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLCBuZXcgUGFydGljaXBhbnRBdHRyaWJ1dGVFdmVudEFyZ3MoY29tbWFuZFBheWxvYWQucGFydGljaXBhbnRJZCwgQ29udmVyc2F0aW9uVHJhbnNsYXRvckNvbW1hbmRUeXBlcy5zZXRNdXRlLCBjb21tYW5kUGF5bG9hZC52YWx1ZSwgc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICdTZXRNdXRlQWxsJyBpcyBzZW50IGlmIHRoZSBDb252ZXJzYXRpb24gaGFzIGJlZW4gbXV0ZWQgYnkgdGhlIGhvc3QuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2V0bXV0ZWFsbFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci5tdXRlQWxsQ29tbWFuZFJlY2VpdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci5tdXRlQWxsQ29tbWFuZFJlY2VpdmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IsIG5ldyBNdXRlQWxsRXZlbnRBcmdzKGNvbW1hbmRQYXlsb2FkLnZhbHVlLCBzZXNzaW9uSWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogJ1Jvb21FeHBpcmF0aW9uV2FybmluZycgaXMgc2VudCB0b3dhcmRzIHRoZSBlbmQgb2YgdGhlIENvbnZlcnNhdGlvbiBzZXNzaW9uIHRvIGdpdmUgYSB0aW1lb3V0IHdhcm5pbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicm9vbWV4cGlyYXRpb253YXJuaW5nXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLmNvbnZlcnNhdGlvbkV4cGlyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLmNvbnZlcnNhdGlvbkV4cGlyYXRpb24odGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3RvciwgbmV3IENvbnZlcnNhdGlvbkV4cGlyYXRpb25FdmVudEFyZ3MoY29tbWFuZFBheWxvYWQudmFsdWUsIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAnU2V0VXNlVHRzJyBpcyBzZW50IGFzIGEgY29uZmlybWF0aW9uIGlmIHRoZSB1c2VyIHJlcXVlc3RzIFRUUyB0byBiZSB0dXJuZWQgb24gb3Igb2ZmLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNldHVzZXR0c1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci5wYXJ0aWNpcGFudFVwZGF0ZUNvbW1hbmRSZWNlaXZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IucGFydGljaXBhbnRVcGRhdGVDb21tYW5kUmVjZWl2ZWQodGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3RvciwgbmV3IFBhcnRpY2lwYW50QXR0cmlidXRlRXZlbnRBcmdzKGNvbW1hbmRQYXlsb2FkLnBhcnRpY2lwYW50SWQsIENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMuc2V0VXNlVFRTLCBjb21tYW5kUGF5bG9hZC52YWx1ZSwgc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICdTZXRMb2NrU3RhdGUnIGlzIHNldCBpZiB0aGUgaG9zdCBoYXMgbG9ja2VkIG9yIHVubG9ja2VkIHRoZSBDb252ZXJzYXRpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2V0bG9ja3N0YXRlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLmxvY2tSb29tQ29tbWFuZFJlY2VpdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci5sb2NrUm9vbUNvbW1hbmRSZWNlaXZlZCh0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLCBuZXcgTG9ja1Jvb21FdmVudEFyZ3MoY29tbWFuZFBheWxvYWQudmFsdWUsIHNlc3Npb25JZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAnQ2hhbmdlTmlja25hbWUnIGlzIHJlY2VpdmVkIGlmIGEgdXNlciBjaGFuZ2VzIHRoZWlyIGRpc3BsYXkgbmFtZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQW55IGNhY2hlZCBwYXJ0aWNwaWFudHMgbGlzdCBzaG91bGQgYmUgdXBkYXRlZCB0byByZWZsZWN0IHRoZSBkaXNwbGF5IG5hbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2hhbmdlbmlja25hbWVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IucGFydGljaXBhbnRVcGRhdGVDb21tYW5kUmVjZWl2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLnBhcnRpY2lwYW50VXBkYXRlQ29tbWFuZFJlY2VpdmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IsIG5ldyBQYXJ0aWNpcGFudEF0dHJpYnV0ZUV2ZW50QXJncyhjb21tYW5kUGF5bG9hZC5wYXJ0aWNpcGFudElkLCBDb252ZXJzYXRpb25UcmFuc2xhdG9yQ29tbWFuZFR5cGVzLmNoYW5nZU5pY2tuYW1lLCBjb21tYW5kUGF5bG9hZC5uaWNrbmFtZSwgc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICdKb2luU2Vzc2lvbicgaXMgc2VudCB3aGVuIGEgdXNlciBqb2lucyB0aGUgQ29udmVyc2F0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImpvaW5zZXNzaW9uXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqb2luUGFydGljaXBhbnRQYXlsb2FkID0gUGFydGljaXBhbnRQYXlsb2FkUmVzcG9uc2UuZnJvbUpTT04obWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqb2luaW5nUGFydGljaXBhbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZhdGFyOiBqb2luUGFydGljaXBhbnRQYXlsb2FkLmF2YXRhcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogam9pblBhcnRpY2lwYW50UGF5bG9hZC5uaWNrbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogam9pblBhcnRpY2lwYW50UGF5bG9hZC5wYXJ0aWNpcGFudElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSG9zdDogam9pblBhcnRpY2lwYW50UGF5bG9hZC5pc2hvc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNdXRlZDogam9pblBhcnRpY2lwYW50UGF5bG9hZC5pc211dGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVXNpbmdUdHM6IGpvaW5QYXJ0aWNpcGFudFBheWxvYWQudXNldHRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWZlcnJlZExhbmd1YWdlOiBqb2luUGFydGljaXBhbnRQYXlsb2FkLmxvY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLnBhcnRpY2lwYW50Sm9pbkNvbW1hbmRSZWNlaXZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IucGFydGljaXBhbnRKb2luQ29tbWFuZFJlY2VpdmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IsIG5ldyBQYXJ0aWNpcGFudEV2ZW50QXJncyhqb2luaW5nUGFydGljaXBhbnQsIHNlc3Npb25JZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAnTGVhdmVTZXNzaW9uJyBpcyBzZW50IHdoZW4gYSB1c2VyIGxlYXZlcyB0aGUgQ29udmVyc2F0aW9uJy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJsZWF2ZXNlc3Npb25cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlYXZpbmdQYXJ0aWNpcGFudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogY29tbWFuZFBheWxvYWQucGFydGljaXBhbnRJZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IucGFydGljaXBhbnRMZWF2ZUNvbW1hbmRSZWNlaXZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IucGFydGljaXBhbnRMZWF2ZUNvbW1hbmRSZWNlaXZlZCh0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLCBuZXcgUGFydGljaXBhbnRFdmVudEFyZ3MobGVhdmluZ1BhcnRpY2lwYW50LCBzZXNzaW9uSWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogJ0Rpc2Nvbm5lY3RTZXNzaW9uJyBpcyBzZW50IHdoZW4gYSB1c2VyIGlzIGRpc2Nvbm5lY3RlZCBmcm9tIHRoZSBzZXNzaW9uIChlLmcuIG5ldHdvcmsgcHJvYmxlbSkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENoZWNrIHRoZSAnUGFydGljaXBhbnRJZCcgdG8gY2hlY2sgd2hldGhlciB0aGUgbWVzc2FnZSBpcyBmb3IgdGhlIGN1cnJlbnQgdXNlci5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJkaXNjb25uZWN0c2Vzc2lvblwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzY29ubmVjdFBhcnRpY2lwYW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjb21tYW5kUGF5bG9hZC5wYXJ0aWNpcGFudElkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0b2tlblwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBuZXcgQ29nbml0aXZlVG9rZW5BdXRoZW50aWNhdGlvbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXV0aG9yaXphdGlvblRva2VuID0gY29tbWFuZFBheWxvYWQudG9rZW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShhdXRob3JpemF0aW9uVG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF1dGhvcml6YXRpb25Ub2tlbiA9IGNvbW1hbmRQYXlsb2FkLnRva2VuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYXV0aG9yaXphdGlvblRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hdXRoZW50aWNhdGlvbiA9IHRva2VuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBNZXNzYWdlIG5vdCByZWNvZ25pemVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogJ3BhcnRpYWwnIChvciAnaHlwb3RoZXNpcycpIHJlcHJlc2VudHMgYSB1bmZpbmFsaXplZCBzcGVlY2ggbWVzc2FnZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInBhcnRpYWxcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogJ2ZpbmFsJyAob3IgJ3BocmFzZScpIHJlcHJlc2VudHMgYSBmaW5hbGl6ZWQgc3BlZWNoIG1lc3NhZ2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmaW5hbFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZWVjaFBheWxvYWQgPSBTcGVlY2hSZXNwb25zZVBheWxvYWQuZnJvbUpTT04obWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udmVyc2F0aW9uUmVzdWx0UmVhc29uID0gKGNvbnZlcnNhdGlvbk1lc3NhZ2VUeXBlID09PSBcImZpbmFsXCIpID8gUmVzdWx0UmVhc29uLlRyYW5zbGF0ZWRQYXJ0aWNpcGFudFNwZWVjaCA6IFJlc3VsdFJlYXNvbi5UcmFuc2xhdGluZ1BhcnRpY2lwYW50U3BlZWNoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZWVjaFJlc3VsdCA9IG5ldyBDb252ZXJzYXRpb25UcmFuc2xhdGlvblJlc3VsdChzcGVlY2hQYXlsb2FkLnBhcnRpY2lwYW50SWQsIHRoaXMuZ2V0VHJhbnNsYXRpb25zKHNwZWVjaFBheWxvYWQudHJhbnNsYXRpb25zKSwgc3BlZWNoUGF5bG9hZC5sYW5ndWFnZSwgc3BlZWNoUGF5bG9hZC5pZCwgY29udmVyc2F0aW9uUmVzdWx0UmVhc29uLCBzcGVlY2hQYXlsb2FkLnJlY29nbml0aW9uLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgbWVzc2FnZS50ZXh0Qm9keSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BlZWNoUGF5bG9hZC5pc0ZpbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIHRoZSBsZW5ndGgsIHNvbWV0aW1lcyBlbXB0eSBmaW5hbHMgYXJlIHJldHVybmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGVlY2hSZXN1bHQudGV4dCAhPT0gdW5kZWZpbmVkICYmIHNwZWVjaFJlc3VsdC50ZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRGaW5hbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc3BlZWNoUGF5bG9hZC5pZCA9PT0gdGhpcy5wcml2TGFzdFBhcnRpYWxVdHRlcmFuY2VJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VuZCBmaW5hbCBhcyBub3JtYWwuIFdlIGhhZCBhIG5vbi1lbXB0eSBwYXJ0aWFsIGZvciB0aGlzIHNhbWUgdXR0ZXJhbmNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzbyBzZW5kaW5nIHRoZSBlbXB0eSBmaW5hbCBpcyBpbXBvcnRhbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRGaW5hbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdXBwcmVzcyB1bm5lZWRlZCBmaW5hbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZW5kRmluYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IudHJhbnNsYXRpb25SZWNlaXZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IudHJhbnNsYXRpb25SZWNlaXZlZCh0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLCBuZXcgQ29udmVyc2F0aW9uUmVjZWl2ZWRUcmFuc2xhdGlvbkV2ZW50QXJncyhDb252ZXJzYXRpb25UcmFuc2xhdG9yTWVzc2FnZVR5cGVzLmZpbmFsLCBzcGVlY2hSZXN1bHQsIHNlc3Npb25JZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNwZWVjaFJlc3VsdC50ZXh0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TGFzdFBhcnRpYWxVdHRlcmFuY2VJZCA9IHNwZWVjaFBheWxvYWQuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IudHJhbnNsYXRpb25SZWNlaXZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci50cmFuc2xhdGlvblJlY2VpdmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IsIG5ldyBDb252ZXJzYXRpb25SZWNlaXZlZFRyYW5zbGF0aW9uRXZlbnRBcmdzKENvbnZlcnNhdGlvblRyYW5zbGF0b3JNZXNzYWdlVHlwZXMucGFydGlhbCwgc3BlZWNoUmVzdWx0LCBzZXNzaW9uSWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogXCJ0cmFuc2xhdGVkX21lc3NhZ2VcIiBpcyBhIHRleHQgbWVzc2FnZSBvciBpbnN0YW50IG1lc3NhZ2UgKElNKS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRyYW5zbGF0ZWRfbWVzc2FnZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRQYXlsb2FkID0gVGV4dFJlc3BvbnNlUGF5bG9hZC5mcm9tSlNPTihtZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiAoTmF0aXZlIHBhcml0eSkgYSByZXN1bHQgcmVhc29uIHNob3VsZCBiZSBzZXQgYmFzZWQgd2hldGhlciB0aGUgcGFydGljaXBhbnRJZCBpcyBvdXJzIG9yIG5vdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRSZXN1bHQgPSBuZXcgQ29udmVyc2F0aW9uVHJhbnNsYXRpb25SZXN1bHQodGV4dFBheWxvYWQucGFydGljaXBhbnRJZCwgdGhpcy5nZXRUcmFuc2xhdGlvbnModGV4dFBheWxvYWQudHJhbnNsYXRpb25zKSwgdGV4dFBheWxvYWQubGFuZ3VhZ2UsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0ZXh0UGF5bG9hZC5vcmlnaW5hbFRleHQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG1lc3NhZ2UudGV4dEJvZHksIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uU2VydmljZUNvbm5lY3Rvci50cmFuc2xhdGlvblJlY2VpdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblNlcnZpY2VDb25uZWN0b3IudHJhbnNsYXRpb25SZWNlaXZlZCh0aGlzLnByaXZDb252ZXJzYXRpb25TZXJ2aWNlQ29ubmVjdG9yLCBuZXcgQ29udmVyc2F0aW9uUmVjZWl2ZWRUcmFuc2xhdGlvbkV2ZW50QXJncyhDb252ZXJzYXRpb25UcmFuc2xhdG9yTWVzc2FnZVR5cGVzLmluc3RhbnRNZXNzYWdlLCB0ZXh0UmVzdWx0LCBzZXNzaW9uSWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBhbnkgdW5zdXBwb3J0ZWQgbWVzc2FnZSB0eXBlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnRpbnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlY2VpdmVDb252ZXJzYXRpb25NZXNzYWdlT3ZlcnJpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29tbXVuaWNhdGlvbkN1c3RvZGlhbi5wcm9taXNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnRNZXNzYWdlTG9vcCgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGlzcG9zZWQoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGVybWluYXRlTWVzc2FnZUxvb3AgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VSZXRyaWV2YWxQcm9taXNlID0gdGhpcy5yZWNlaXZlQ29udmVyc2F0aW9uTWVzc2FnZU92ZXJyaWRlKCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB5aWVsZCBtZXNzYWdlUmV0cmlldmFsUHJvbWlzZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsUmVjb2duaXRpb24odGhpcy5wcml2UmVxdWVzdFNlc3Npb24gPyB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQgOiBcIlwiLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbiA/IHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCA6IFwiXCIsIENhbmNlbGxhdGlvblJlYXNvbi5FcnJvciwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLlJ1bnRpbWVFcnJvciwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gVGFrZXMgYW4gZXN0YWJsaXNoZWQgd2Vic29ja2V0IGNvbm5lY3Rpb24gdG8gdGhlIGVuZHBvaW50XG4gICAgY29uZmlnQ29ubmVjdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEaXNwb3NlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWdQcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlnUHJvbWlzZS50aGVuKChjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24uc3RhdGUoKSA9PT0gQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlnUHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ1Byb21pc2U7XG4gICAgICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbklkID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uQ29uZmlnUHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25maWdDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50ZXJtaW5hdGVNZXNzYWdlTG9vcCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25Db25maWdQcm9taXNlID0gdGhpcy5jb25uZWN0SW1wbCgpLnRoZW4oKGNvbm5lY3Rpb24pID0+IGNvbm5lY3Rpb24pO1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbkNvbmZpZ1Byb21pc2U7XG4gICAgfVxuICAgIGdldFRyYW5zbGF0aW9ucyhzZXJ2aWNlUmVzdWx0VHJhbnNsYXRpb25zKSB7XG4gICAgICAgIGxldCB0cmFuc2xhdGlvbnM7XG4gICAgICAgIGlmICh1bmRlZmluZWQgIT09IHNlcnZpY2VSZXN1bHRUcmFuc2xhdGlvbnMpIHtcbiAgICAgICAgICAgIHRyYW5zbGF0aW9ucyA9IG5ldyBUcmFuc2xhdGlvbnMoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdHJhbnNsYXRpb24gb2Ygc2VydmljZVJlc3VsdFRyYW5zbGF0aW9ucykge1xuICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9ucy5zZXQodHJhbnNsYXRpb24ubGFuZywgdHJhbnNsYXRpb24udHJhbnNsYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cmFuc2xhdGlvbnM7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db252ZXJzYXRpb25TZXJ2aWNlQWRhcHRlci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUHJveHlJbmZvLCBSZXN0Q29uZmlnQmFzZSwgV2Vic29ja2V0Q29ubmVjdGlvbiwgfSBmcm9tIFwiLi4vLi4vY29tbW9uLmJyb3dzZXIvRXhwb3J0c1wiO1xuaW1wb3J0IHsgU3RyaW5nVXRpbHMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL1N0cmluZ1V0aWxzXCI7XG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi4vLi4vc2RrL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuLi8uLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgSGVhZGVyTmFtZXMgfSBmcm9tIFwiLi4vSGVhZGVyTmFtZXNcIjtcbmltcG9ydCB7IFF1ZXJ5UGFyYW1ldGVyTmFtZXMgfSBmcm9tIFwiLi4vUXVlcnlQYXJhbWV0ZXJOYW1lc1wiO1xuaW1wb3J0IHsgQ29ubmVjdGlvbkZhY3RvcnlCYXNlIH0gZnJvbSBcIi4vLi4vQ29ubmVjdGlvbkZhY3RvcnlCYXNlXCI7XG5pbXBvcnQgeyBUcmFuc2NyaWJlckNvbm5lY3Rpb25GYWN0b3J5LCBUcmFuc2xhdGlvbkNvbm5lY3Rpb25GYWN0b3J5LCBXZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyLCB9IGZyb20gXCIuLy4uL0V4cG9ydHNcIjtcbi8qKlxuICogQ29ubmVjdGlvbiBmYWN0b3J5IGZvciB0aGUgY29udmVyc2F0aW9uIHRyYW5zbGF0b3IuIEhhbmRsZXMgY29ubmVjdGluZyB0byB0aGUgcmVndWxhciB0cmFuc2xhdG9yIGVuZHBvaW50LFxuICogYXMgd2VsbCBhcyB0aGUgdmlydHVhbCBtaWNyb3Bob25lIGFycmF5IHRyYW5zY3JpcHRpb24gZW5kcG9pbnRcbiAqL1xuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb25uZWN0aW9uRmFjdG9yeSBleHRlbmRzIENvbm5lY3Rpb25GYWN0b3J5QmFzZSB7XG4gICAgY29uc3RydWN0b3IoY29udkdldHRlcikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChjb252R2V0dGVyLCBcImNvbnZHZXR0ZXJcIik7XG4gICAgICAgIHRoaXMucHJpdkNvbnZHZXR0ZXIgPSBjb252R2V0dGVyO1xuICAgIH1cbiAgICBjcmVhdGUoY29uZmlnLCBhdXRoSW5mbywgY29ubmVjdGlvbklkKSB7XG4gICAgICAgIGNvbnN0IGlzVmlydE1pY0FycmF5RW5kcG9pbnQgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShcIkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfTXVsdGlDaGFubmVsQXVkaW9cIiwgXCJcIikudG9VcHBlckNhc2UoKSA9PT0gXCJUUlVFXCI7XG4gICAgICAgIGNvbnN0IGNvbnZJbmZvID0gdGhpcy5wcml2Q29udkdldHRlcigpLnJvb207XG4gICAgICAgIGNvbnN0IHJlZ2lvbiA9IGNvbnZJbmZvLmNvZ25pdGl2ZVNwZWVjaFJlZ2lvbiB8fCBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbiwgXCJcIik7XG4gICAgICAgIGNvbnN0IHJlcGxhY2VtZW50VmFsdWVzID0ge1xuICAgICAgICAgICAgaG9zdFN1ZmZpeDogQ29ubmVjdGlvbkZhY3RvcnlCYXNlLmdldEhvc3RTdWZmaXgocmVnaW9uKSxcbiAgICAgICAgICAgIHBhdGg6IENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb25uZWN0aW9uRmFjdG9yeS5DVFNfVklSVF9NSUNfUEFUSCxcbiAgICAgICAgICAgIHJlZ2lvbjogZW5jb2RlVVJJQ29tcG9uZW50KHJlZ2lvbilcbiAgICAgICAgfTtcbiAgICAgICAgcmVwbGFjZW1lbnRWYWx1ZXNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5MYW5ndWFnZV0gPSBlbmNvZGVVUklDb21wb25lbnQoY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UsIFwiXCIpKTtcbiAgICAgICAgcmVwbGFjZW1lbnRWYWx1ZXNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5DdHNNZWV0aW5nSWRdID0gZW5jb2RlVVJJQ29tcG9uZW50KGNvbnZJbmZvLnJvb21JZCk7XG4gICAgICAgIHJlcGxhY2VtZW50VmFsdWVzW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuQ3RzRGV2aWNlSWRdID0gZW5jb2RlVVJJQ29tcG9uZW50KGNvbnZJbmZvLnBhcnRpY2lwYW50SWQpO1xuICAgICAgICByZXBsYWNlbWVudFZhbHVlc1tRdWVyeVBhcmFtZXRlck5hbWVzLkN0c0lzUGFydGljaXBhbnRdID0gY29udkluZm8uaXNIb3N0ID8gXCJcIiA6IChcIiZcIiArIFF1ZXJ5UGFyYW1ldGVyTmFtZXMuQ3RzSXNQYXJ0aWNpcGFudCk7XG4gICAgICAgIGxldCBlbmRwb2ludFVybCA9IFwiXCI7XG4gICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0ge307XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7fTtcbiAgICAgICAgaWYgKGlzVmlydE1pY0FycmF5RW5kcG9pbnQpIHtcbiAgICAgICAgICAgIC8vIGNvbm5lY3RpbmcgdG8gdGhlIGNvbnZlcnNhdGlvbiB0cmFuc2NyaXB0aW9uIHZpcnR1YWwgbWljcm9waG9uZSBhcnJheSBlbmRwb2ludFxuICAgICAgICAgICAgZW5kcG9pbnRVcmwgPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50KTtcbiAgICAgICAgICAgIGlmICghZW5kcG9pbnRVcmwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBob3N0TmFtZSA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSG9zdCwgXCJ0cmFuc2NyaWJlLntyZWdpb259LmN0cy5zcGVlY2h7aG9zdFN1ZmZpeH1cIik7XG4gICAgICAgICAgICAgICAgZW5kcG9pbnRVcmwgPSBcIndzczovL1wiICsgaG9zdE5hbWUgKyBcIntwYXRofVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYmVjYXVzZSB0aGUgcmVnaW9uIGNhbiBjaGFuZ2UgZHVyaW5nIGEgc2Vzc2lvbiwgd2Ugc3VwcG9ydCBiZWluZyBwYXNzZWQgYSBmb3JtYXQgc3RyaW5nIHdoaWNoIHdlIGNhbiB0aGVuXG4gICAgICAgICAgICAvLyByZXBsYWNlIHdpdGggdGhlIGNvcnJlY3QgaW5mb3JtYXRpb24uXG4gICAgICAgICAgICBlbmRwb2ludFVybCA9IFN0cmluZ1V0aWxzLmZvcm1hdFN0cmluZyhlbmRwb2ludFVybCwgcmVwbGFjZW1lbnRWYWx1ZXMpO1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkVXJsID0gbmV3IFVSTChlbmRwb2ludFVybCk7XG4gICAgICAgICAgICBwYXJzZWRVcmwuc2VhcmNoUGFyYW1zLmZvckVhY2goKHZhbCwga2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXNba2V5XSA9IHZhbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgY29ubkZhY3RvcnkgPSBuZXcgVHJhbnNjcmliZXJDb25uZWN0aW9uRmFjdG9yeSgpO1xuICAgICAgICAgICAgY29ubkZhY3Rvcnkuc2V0UXVlcnlQYXJhbXMocXVlcnlQYXJhbXMsIGNvbmZpZywgZW5kcG9pbnRVcmwpO1xuICAgICAgICAgICAgLy8gU29tZSBxdWVyeSBwYXJhbWV0ZXJzIGFyZSByZXF1aXJlZCBmb3IgdGhlIENUUyBlbmRwb2ludCwgbGV0J3MgZXhwbGljaXR5IHNldCB0aGVtIGhlcmVcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuQ3RzTWVldGluZ0lkXSA9IHJlcGxhY2VtZW50VmFsdWVzW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuQ3RzTWVldGluZ0lkXTtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuQ3RzRGV2aWNlSWRdID0gcmVwbGFjZW1lbnRWYWx1ZXNbUXVlcnlQYXJhbWV0ZXJOYW1lcy5DdHNEZXZpY2VJZF07XG4gICAgICAgICAgICBpZiAoIWNvbnZJbmZvLmlzSG9zdCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuQ3RzSXNQYXJ0aWNpcGFudF0gPSBcIlwiOyAvLyB0aGlzIGRvZXNuJ3QgaGF2ZSBhIHZhbHVlIHNvIHNldCB0byBhbiBlbXB0eSBzdHJpbmdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghKFF1ZXJ5UGFyYW1ldGVyTmFtZXMuRm9ybWF0IGluIHF1ZXJ5UGFyYW1zKSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuRm9ybWF0XSA9IFwic2ltcGxlXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJzZWRVcmwuc2VhcmNoUGFyYW1zLmZvckVhY2goKHZhbCwga2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgcGFyc2VkVXJsLnNlYXJjaFBhcmFtcy5zZXQoa2V5LCBxdWVyeVBhcmFtc1trZXldKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgcXVlcnlQYXJhbXNba2V5XTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZW5kcG9pbnRVcmwgPSBwYXJzZWRVcmwudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGNvbm5lY3RpbmcgdG8gcmVndWxhciB0cmFuc2xhdGlvbiBlbmRwb2ludFxuICAgICAgICAgICAgY29uc3QgY29ubkZhY3RvcnkgPSBuZXcgVHJhbnNsYXRpb25Db25uZWN0aW9uRmFjdG9yeSgpO1xuICAgICAgICAgICAgZW5kcG9pbnRVcmwgPSBjb25uRmFjdG9yeS5nZXRFbmRwb2ludFVybChjb25maWcsIHRydWUpO1xuICAgICAgICAgICAgZW5kcG9pbnRVcmwgPSBTdHJpbmdVdGlscy5mb3JtYXRTdHJpbmcoZW5kcG9pbnRVcmwsIHJlcGxhY2VtZW50VmFsdWVzKTtcbiAgICAgICAgICAgIGNvbm5GYWN0b3J5LnNldFF1ZXJ5UGFyYW1zKHF1ZXJ5UGFyYW1zLCBjb25maWcsIGVuZHBvaW50VXJsKTtcbiAgICAgICAgfVxuICAgICAgICBoZWFkZXJzW0hlYWRlck5hbWVzLkNvbm5lY3Rpb25JZF0gPSBjb25uZWN0aW9uSWQ7XG4gICAgICAgIGhlYWRlcnNbUmVzdENvbmZpZ0Jhc2UuY29uZmlnUGFyYW1zLnRva2VuXSA9IGNvbnZJbmZvLnRva2VuO1xuICAgICAgICBpZiAoYXV0aEluZm8udG9rZW4pIHtcbiAgICAgICAgICAgIGhlYWRlcnNbYXV0aEluZm8uaGVhZGVyTmFtZV0gPSBhdXRoSW5mby50b2tlbjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbmFibGVDb21wcmVzc2lvbiA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFwiU1BFRUNILUVuYWJsZVdlYnNvY2tldENvbXByZXNzaW9uXCIsIFwiXCIpLnRvVXBwZXJDYXNlKCkgPT09IFwiVFJVRVwiO1xuICAgICAgICByZXR1cm4gbmV3IFdlYnNvY2tldENvbm5lY3Rpb24oZW5kcG9pbnRVcmwsIHF1ZXJ5UGFyYW1zLCBoZWFkZXJzLCBuZXcgV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlcigpLCBQcm94eUluZm8uZnJvbVJlY29nbml6ZXJDb25maWcoY29uZmlnKSwgZW5hYmxlQ29tcHJlc3Npb24sIGNvbm5lY3Rpb25JZCk7XG4gICAgfVxufVxuQ29udmVyc2F0aW9uVHJhbnNsYXRvckNvbm5lY3Rpb25GYWN0b3J5LkNUU19WSVJUX01JQ19QQVRIID0gXCIvc3BlZWNoL3JlY29nbml0aW9uL2R5bmFtaWNhdWRpb1wiO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db252ZXJzYXRpb25UcmFuc2xhdG9yQ29ubmVjdGlvbkZhY3RvcnkuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5pbXBvcnQgeyBTZXNzaW9uRXZlbnRBcmdzIH0gZnJvbSBcIi4uLy4uL3Nkay9FeHBvcnRzXCI7XG5leHBvcnQgY2xhc3MgTXV0ZUFsbEV2ZW50QXJncyBleHRlbmRzIFNlc3Npb25FdmVudEFyZ3Mge1xuICAgIGNvbnN0cnVjdG9yKGlzTXV0ZWQsIHNlc3Npb25JZCkge1xuICAgICAgICBzdXBlcihzZXNzaW9uSWQpO1xuICAgICAgICB0aGlzLnByaXZJc011dGVkID0gaXNNdXRlZDtcbiAgICB9XG4gICAgZ2V0IGlzTXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc011dGVkO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBMb2NrUm9vbUV2ZW50QXJncyBleHRlbmRzIFNlc3Npb25FdmVudEFyZ3Mge1xuICAgIGNvbnN0cnVjdG9yKGlzTG9ja2VkLCBzZXNzaW9uSWQpIHtcbiAgICAgICAgc3VwZXIoc2Vzc2lvbklkKTtcbiAgICAgICAgdGhpcy5wcml2SXNMb2NrZWQgPSBpc0xvY2tlZDtcbiAgICB9XG4gICAgZ2V0IGlzTXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc0xvY2tlZDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUGFydGljaXBhbnRFdmVudEFyZ3MgZXh0ZW5kcyBTZXNzaW9uRXZlbnRBcmdzIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJ0aWNpcGFudCwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHN1cGVyKHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdlBhcnRpY2lwYW50ID0gcGFydGljaXBhbnQ7XG4gICAgfVxuICAgIGdldCBwYXJ0aWNpcGFudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlBhcnRpY2lwYW50O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBQYXJ0aWNpcGFudEF0dHJpYnV0ZUV2ZW50QXJncyBleHRlbmRzIFNlc3Npb25FdmVudEFyZ3Mge1xuICAgIGNvbnN0cnVjdG9yKHBhcnRpY2lwYW50SWQsIGtleSwgdmFsdWUsIHNlc3Npb25JZCkge1xuICAgICAgICBzdXBlcihzZXNzaW9uSWQpO1xuICAgICAgICB0aGlzLnByaXZLZXkgPSBrZXk7XG4gICAgICAgIHRoaXMucHJpdlZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMucHJpdlBhcnRpY2lwYW50SWQgPSBwYXJ0aWNpcGFudElkO1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZWYWx1ZTtcbiAgICB9XG4gICAgZ2V0IGtleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdktleTtcbiAgICB9XG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFydGljaXBhbnRJZDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUGFydGljaXBhbnRzTGlzdEV2ZW50QXJncyBleHRlbmRzIFNlc3Npb25FdmVudEFyZ3Mge1xuICAgIGNvbnN0cnVjdG9yKGNvbnZlcnNhdGlvbklkLCB0b2tlbiwgdHJhbnNsYXRlVG8sIHByb2Zhbml0eUZpbHRlciwgcm9vbVByb2Zhbml0eUZpbHRlciwgaXNSb29tTG9ja2VkLCBpc011dGVBbGwsIHBhcnRpY2lwYW50cywgc2Vzc2lvbklkKSB7XG4gICAgICAgIHN1cGVyKHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdlJvb21JZCA9IGNvbnZlcnNhdGlvbklkO1xuICAgICAgICB0aGlzLnByaXZTZXNzaW9uVG9rZW4gPSB0b2tlbjtcbiAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRlVG8gPSB0cmFuc2xhdGVUbztcbiAgICAgICAgdGhpcy5wcml2UHJvZmFuaXR5RmlsdGVyID0gcHJvZmFuaXR5RmlsdGVyO1xuICAgICAgICB0aGlzLnByaXZSb29tUHJvZmFuaXR5RmlsdGVyID0gcm9vbVByb2Zhbml0eUZpbHRlcjtcbiAgICAgICAgdGhpcy5wcml2SXNSb29tTG9ja2VkID0gaXNSb29tTG9ja2VkO1xuICAgICAgICB0aGlzLnByaXZJc1Jvb21Mb2NrZWQgPSBpc011dGVBbGw7XG4gICAgICAgIHRoaXMucHJpdlBhcnRpY2lwYW50cyA9IHBhcnRpY2lwYW50cztcbiAgICB9XG4gICAgZ2V0IHNlc3Npb25Ub2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNlc3Npb25Ub2tlbjtcbiAgICB9XG4gICAgZ2V0IGNvbnZlcnNhdGlvbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Um9vbUlkO1xuICAgIH1cbiAgICBnZXQgdHJhbnNsYXRlVG8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUcmFuc2xhdGVUbztcbiAgICB9XG4gICAgZ2V0IHByb2Zhbml0eUZpbHRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb2Zhbml0eUZpbHRlcjtcbiAgICB9XG4gICAgZ2V0IHJvb21Qcm9mYW5pdHlGaWx0ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSb29tUHJvZmFuaXR5RmlsdGVyO1xuICAgIH1cbiAgICBnZXQgaXNSb29tTG9ja2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNSb29tTG9ja2VkO1xuICAgIH1cbiAgICBnZXQgaXNNdXRlQWxsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNNdXRlQWxsO1xuICAgIH1cbiAgICBnZXQgcGFydGljaXBhbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFydGljaXBhbnRzO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDb252ZXJzYXRpb25SZWNlaXZlZFRyYW5zbGF0aW9uRXZlbnRBcmdzIHtcbiAgICBjb25zdHJ1Y3Rvcihjb21tYW5kLCBwYXlsb2FkLCBzZXNzaW9uSWQpIHtcbiAgICAgICAgdGhpcy5wcml2UGF5bG9hZCA9IHBheWxvYWQ7XG4gICAgICAgIHRoaXMucHJpdkNvbW1hbmQgPSBjb21tYW5kO1xuICAgICAgICB0aGlzLnByaXZTZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG4gICAgfVxuICAgIGdldCBwYXlsb2FkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGF5bG9hZDtcbiAgICB9XG4gICAgZ2V0IGNvbW1hbmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb21tYW5kO1xuICAgIH1cbiAgICBnZXQgc2Vzc2lvbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U2Vzc2lvbklkO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29udmVyc2F0aW9uVHJhbnNsYXRvckV2ZW50QXJncy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqIFVzZXJzIHBhcnRpY2lwYXRpbmcgaW4gdGhlIGNvbnZlcnNhdGlvbiAqL1xuZXhwb3J0IGNsYXNzIEludGVybmFsUGFydGljaXBhbnRzIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJ0aWNpcGFudHMgPSBbXSwgbWVJZCkge1xuICAgICAgICB0aGlzLnBhcnRpY2lwYW50cyA9IHBhcnRpY2lwYW50cztcbiAgICAgICAgdGhpcy5tZUlkID0gbWVJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIG9yIHVwZGF0ZSBhIHBhcnRpY2lwYW50XG4gICAgICogQHBhcmFtIHZhbHVlXG4gICAgICovXG4gICAgYWRkT3JVcGRhdGVQYXJ0aWNpcGFudCh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV4aXN0cyA9IHRoaXMuZ2V0UGFydGljaXBhbnRJbmRleCh2YWx1ZS5pZCk7XG4gICAgICAgIGlmIChleGlzdHMgPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudHMuc3BsaWNlKGV4aXN0cywgMSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudHMucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZW5zdXJlIGl0IHdhcyBhZGRlZCBva1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQYXJ0aWNpcGFudCh2YWx1ZS5pZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmQgdGhlIHBhcnRpY2lwYW50J3MgcG9zaXRpb24gaW4gdGhlIHBhcnRpY2lwYW50cyBsaXN0LlxuICAgICAqIEBwYXJhbSBpZFxuICAgICAqL1xuICAgIGdldFBhcnRpY2lwYW50SW5kZXgoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFydGljaXBhbnRzLmZpbmRJbmRleCgocCkgPT4gcC5pZCA9PT0gaWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kIHRoZSBwYXJ0aWNpcGFudCBieSBpZC5cbiAgICAgKiBAcGFyYW0gaWRcbiAgICAgKi9cbiAgICBnZXRQYXJ0aWNpcGFudChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHMuZmluZCgocCkgPT4gcC5pZCA9PT0gaWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSBwYXJ0aWNpcGFudCBmcm9tIHRoZSBwYXJ0aWNpcGFudHMgbGlzdC5cbiAgICAgKi9cbiAgICBkZWxldGVQYXJ0aWNpcGFudChpZCkge1xuICAgICAgICB0aGlzLnBhcnRpY2lwYW50cyA9IHRoaXMucGFydGljaXBhbnRzLmZpbHRlcigocCkgPT4gcC5pZCAhPT0gaWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgdG8gcmV0dXJuIHRoZSBjb252ZXJzYXRpb24gaG9zdC5cbiAgICAgKi9cbiAgICBnZXQgaG9zdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFydGljaXBhbnRzLmZpbmQoKHApID0+IHAuaXNIb3N0ID09PSB0cnVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGVscGVyIHRvIHJldHVybiB0aGUgY3VycmVudCB1c2VyLlxuICAgICAqL1xuICAgIGdldCBtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGFydGljaXBhbnQodGhpcy5tZUlkKTtcbiAgICB9XG59XG4vKipcbiAqIExpc3Qgb2YgY29tbWFuZCBtZXNzYWdlIHR5cGVzXG4gKi9cbmV4cG9ydCBjb25zdCBDb252ZXJzYXRpb25UcmFuc2xhdG9yTWVzc2FnZVR5cGVzID0ge1xuICAgIGNvbW1hbmQ6IFwiY29tbWFuZFwiLFxuICAgIGZpbmFsOiBcImZpbmFsXCIsXG4gICAgaW5mbzogXCJpbmZvXCIsXG4gICAgaW5zdGFudE1lc3NhZ2U6IFwiaW5zdGFudF9tZXNzYWdlXCIsXG4gICAga2VlcEFsaXZlOiBcImtlZXBfYWxpdmVcIixcbiAgICBwYXJ0aWFsOiBcInBhcnRpYWxcIixcbiAgICBwYXJ0aWNpcGFudENvbW1hbmQ6IFwicGFydGljaXBhbnRfY29tbWFuZFwiLFxuICAgIHRyYW5zbGF0ZWRNZXNzYWdlOiBcInRyYW5zbGF0ZWRfbWVzc2FnZVwiXG59O1xuLyoqXG4gKiBMaXN0IG9mIGNvbW1hbmQgdHlwZXNcbiAqL1xuZXhwb3J0IGNvbnN0IENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMgPSB7XG4gICAgY2hhbmdlTmlja25hbWU6IFwiQ2hhbmdlTmlja25hbWVcIixcbiAgICBkaXNjb25uZWN0U2Vzc2lvbjogXCJEaXNjb25uZWN0U2Vzc2lvblwiLFxuICAgIGVqZWN0UGFydGljaXBhbnQ6IFwiRWplY3RQYXJ0aWNpcGFudFwiLFxuICAgIGluc3RhbnRfbWVzc2FnZTogXCJpbnN0YW50X21lc3NhZ2VcIixcbiAgICBqb2luU2Vzc2lvbjogXCJKb2luU2Vzc2lvblwiLFxuICAgIGxlYXZlU2Vzc2lvbjogXCJMZWF2ZVNlc3Npb25cIixcbiAgICBwYXJ0aWNpcGFudExpc3Q6IFwiUGFydGljaXBhbnRMaXN0XCIsXG4gICAgcm9vbUV4cGlyYXRpb25XYXJuaW5nOiBcIlJvb21FeHBpcmF0aW9uV2FybmluZ1wiLFxuICAgIHNldExvY2tTdGF0ZTogXCJTZXRMb2NrU3RhdGVcIixcbiAgICBzZXRNdXRlOiBcIlNldE11dGVcIixcbiAgICBzZXRNdXRlQWxsOiBcIlNldE11dGVBbGxcIixcbiAgICBzZXRQcm9mYW5pdHlGaWx0ZXJpbmc6IFwiU2V0UHJvZmFuaXR5RmlsdGVyaW5nXCIsXG4gICAgc2V0VHJhbnNsYXRlVG9MYW5ndWFnZXM6IFwiU2V0VHJhbnNsYXRlVG9MYW5ndWFnZXNcIixcbiAgICBzZXRVc2VUVFM6IFwiU2V0VXNlVFRTXCJcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvblRyYW5zbGF0b3JJbnRlcmZhY2VzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtY2xhc3Nlcy1wZXItZmlsZVxuaW1wb3J0IHsgUmVjb2duaXplckNvbmZpZyB9IGZyb20gXCIuLi8uLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IEJhY2tncm91bmRFdmVudCwgRXZlbnRzLCBUaW1lb3V0IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi4vLi4vc2RrL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgQ29ubmVjdGlvbiwgUmVjb2duaXplciB9IGZyb20gXCIuLi8uLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udmVyc2F0aW9uQ29ubmVjdGlvbkZhY3RvcnkgfSBmcm9tIFwiLi9Db252ZXJzYXRpb25Db25uZWN0aW9uRmFjdG9yeVwiO1xuaW1wb3J0IHsgQ29udmVyc2F0aW9uU2VydmljZUFkYXB0ZXIgfSBmcm9tIFwiLi9Db252ZXJzYXRpb25TZXJ2aWNlQWRhcHRlclwiO1xuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvblJlY29nbml6ZXJGYWN0b3J5IHtcbiAgICBzdGF0aWMgZnJvbUNvbmZpZyhjb252ZXJzYXRpb24sIHNwZWVjaENvbmZpZywgYXVkaW9Db25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb252ZXJzYXRpb25UcmFuc2xhdG9yUmVjb2duaXplcihjb252ZXJzYXRpb24sIHNwZWVjaENvbmZpZywgYXVkaW9Db25maWcpO1xuICAgIH1cbn1cbi8qKlxuICogU2VuZHMgbWVzc2FnZXMgdG8gdGhlIENvbnZlcnNhdGlvbiBUcmFuc2xhdG9yIHdlYnNvY2tldCBhbmQgbGlzdGVucyBmb3IgaW5jb21pbmcgZXZlbnRzIGNvbnRhaW5pbmcgd2Vic29ja2V0IG1lc3NhZ2VzLlxuICogQmFzZWQgb2ZmIHRoZSByZWNvZ25pemVycyBpbiB0aGUgU0RLIGZvbGRlci5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvblRyYW5zbGF0b3JSZWNvZ25pemVyIGV4dGVuZHMgUmVjb2duaXplciB7XG4gICAgY29uc3RydWN0b3IoY29udmVyc2F0aW9uLCBzcGVlY2hDb25maWcsIGF1ZGlvQ29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHNlcnZpY2VDb25maWdJbXBsID0gc3BlZWNoQ29uZmlnO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwoc2VydmljZUNvbmZpZ0ltcGwsIFwic3BlZWNoQ29uZmlnXCIpO1xuICAgICAgICBjb25zdCBjb252ZXJzYXRpb25JbXBsID0gY29udmVyc2F0aW9uO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwoY29udmVyc2F0aW9uSW1wbCwgXCJjb252ZXJzYXRpb25JbXBsXCIpO1xuICAgICAgICBzdXBlcihhdWRpb0NvbmZpZywgc2VydmljZUNvbmZpZ0ltcGwucHJvcGVydGllcywgbmV3IENvbnZlcnNhdGlvbkNvbm5lY3Rpb25GYWN0b3J5KCkpO1xuICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb24gPSBjb252ZXJzYXRpb25JbXBsO1xuICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMgPSBzZXJ2aWNlQ29uZmlnSW1wbC5wcm9wZXJ0aWVzLmNsb25lKCk7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb24gPSBDb25uZWN0aW9uLmZyb21SZWNvZ25pemVyKHRoaXMpO1xuICAgICAgICB0aGlzLnByaXZTZXRUaW1lb3V0ID0gKHR5cGVvZiAoQmxvYikgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIChXb3JrZXIpICE9PSBcInVuZGVmaW5lZFwiKSA/IFRpbWVvdXQuc2V0VGltZW91dCA6IHNldFRpbWVvdXQ7XG4gICAgICAgIHRoaXMucHJpdkNsZWFyVGltZW91dCA9ICh0eXBlb2YgKEJsb2IpICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiAoV29ya2VyKSAhPT0gXCJ1bmRlZmluZWRcIikgPyBUaW1lb3V0LmNsZWFyVGltZW91dCA6IGNsZWFyVGltZW91dDtcbiAgICB9XG4gICAgc2V0IGNvbm5lY3RlZChjYikge1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uLmNvbm5lY3RlZCA9IGNiO1xuICAgIH1cbiAgICBzZXQgZGlzY29ubmVjdGVkKGNiKSB7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb24uZGlzY29ubmVjdGVkID0gY2I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgc3BlZWNoIGxhbmd1YWdlIHVzZWQgYnkgdGhlIHJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBnZXQgc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgcHJvcGVydGllcyBmb3IgdGhlIHJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxuICAgIGlzRGlzcG9zZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc0Rpc3Bvc2VkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25uZWN0IHRvIHRoZSByZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHRva2VuXG4gICAgICovXG4gICAgY29ubmVjdCh0b2tlbiwgY2IsIGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZJc0Rpc3Bvc2VkKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0b2tlbiwgXCJ0b2tlblwiKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlY28uY29udmVyc2F0aW9uVHJhbnNsYXRvclRva2VuID0gdG9rZW47XG4gICAgICAgICAgICB0aGlzLnJlc2V0Q29udmVyc2F0aW9uVGltZW91dCgpO1xuICAgICAgICAgICAgdGhpcy5wcml2UmVjby5jb25uZWN0QXN5bmMoY2IsIGVycik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlZEVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIGVycih0eXBlZEVycm9yLm5hbWUgKyBcIjogXCIgKyB0eXBlZEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzY29ubmVjdCBmcm9tIHRoZSByZWNvZ25pemVyXG4gICAgICovXG4gICAgZGlzY29ubmVjdChjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdklzRGlzcG9zZWQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdlRpbWVvdXRUb2tlbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnRcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDbGVhclRpbWVvdXQodGhpcy5wcml2VGltZW91dFRva2VuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJpdlJlY28uZGlzY29ubmVjdCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlZEVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIGVycih0eXBlZEVycm9yLm5hbWUgKyBcIjogXCIgKyB0eXBlZEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEZXN0cm95IHRoZSByZWNvZ25pemVyLlxuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKHRydWUpLmNhdGNoKChyZWFzb24pID0+IHtcbiAgICAgICAgICAgICAgICBFdmVudHMuaW5zdGFuY2Uub25FdmVudChuZXcgQmFja2dyb3VuZEV2ZW50KHJlYXNvbikpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCB0aGUgbXV0ZSBhbGwgcGFydGljaXBhbnRzIGNvbW1hbmQgdG8gdGhlIHdlYnNvY2tldFxuICAgICAqIEBwYXJhbSBjb252ZXJzYXRpb25JZFxuICAgICAqIEBwYXJhbSBwYXJ0aWNpcGFudElkXG4gICAgICogQHBhcmFtIGlzTXV0ZWRcbiAgICAgKi9cbiAgICBzZW5kUmVxdWVzdChjb21tYW5kLCBjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdklzRGlzcG9zZWQpO1xuICAgICAgICAgICAgdGhpcy5zZW5kTWVzc2FnZShjb21tYW5kLCBjYiwgZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVkRXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgZXJyKHR5cGVkRXJyb3IubmFtZSArIFwiOiBcIiArIHR5cGVkRXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlcnIoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERlc3Ryb3kgdGhlIHJlY29nbml6ZXIuXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UodHJ1ZSkuY2F0Y2goKHJlYXNvbikgPT4ge1xuICAgICAgICAgICAgICAgIEV2ZW50cy5pbnN0YW5jZS5vbkV2ZW50KG5ldyBCYWNrZ3JvdW5kRXZlbnQocmVhc29uKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZSBhbmQgZGlzcG9zZSB0aGUgcmVjb2duaXplclxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByaXZJc0Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uLmNsb3NlQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5kaXNwb3NlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcG9zZSB0aGUgcmVjb2duaXplclxuICAgICAqIEBwYXJhbSBkaXNwb3NpbmdcbiAgICAgKi9cbiAgICBkaXNwb3NlKGRpc3Bvc2luZykge1xuICAgICAgICBjb25zdCBfc3VwZXIgPSBPYmplY3QuY3JlYXRlKG51bGwsIHtcbiAgICAgICAgICAgIGRpc3Bvc2U6IHsgZ2V0OiAoKSA9PiBzdXBlci5kaXNwb3NlIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2SXNEaXNwb3NlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaXNwb3NpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2VGltZW91dFRva2VuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q2xlYXJUaW1lb3V0KHRoaXMucHJpdlRpbWVvdXRUb2tlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbi5jbG9zZUNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB5aWVsZCBfc3VwZXIuZGlzcG9zZS5jYWxsKHRoaXMsIGRpc3Bvc2luZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIGNvbmZpZyBmb3IgdGhlIHJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0gc3BlZWNoQ29uZmlnXG4gICAgICovXG4gICAgY3JlYXRlUmVjb2duaXplckNvbmZpZyhzcGVlY2hDb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWNvZ25pemVyQ29uZmlnKHNwZWVjaENvbmZpZywgdGhpcy5wcml2UHJvcGVydGllcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSB0aGUgc2VydmljZSByZWNvZ25pemVyLlxuICAgICAqIFRoZSBhdWRpbyBzb3VyY2UgaXMgcmVkdW5kbmFudCBoZXJlIGJ1dCBpcyByZXF1aXJlZCBieSB0aGUgaW1wbGVtZW50YXRpb24uXG4gICAgICogQHBhcmFtIGF1dGhlbnRpY2F0aW9uXG4gICAgICogQHBhcmFtIGNvbm5lY3Rpb25GYWN0b3J5XG4gICAgICogQHBhcmFtIGF1ZGlvQ29uZmlnXG4gICAgICogQHBhcmFtIHJlY29nbml6ZXJDb25maWdcbiAgICAgKi9cbiAgICBjcmVhdGVTZXJ2aWNlUmVjb2duaXplcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvQ29uZmlnLCByZWNvZ25pemVyQ29uZmlnKSB7XG4gICAgICAgIGNvbnN0IGF1ZGlvU291cmNlID0gYXVkaW9Db25maWc7XG4gICAgICAgIHJldHVybiBuZXcgQ29udmVyc2F0aW9uU2VydmljZUFkYXB0ZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb1NvdXJjZSwgcmVjb2duaXplckNvbmZpZywgdGhpcyk7XG4gICAgfVxuICAgIHNlbmRNZXNzYWdlKG1zZywgY2IsIGVycikge1xuICAgICAgICBjb25zdCB3aXRoQXN5bmMgPSB0aGlzLnByaXZSZWNvO1xuICAgICAgICBjb25zdCBQcm9taXNlVG9FbXB0eUNhbGxiYWNrID0gKHByb21pc2UsIGNiLCBlcnIpID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIoYCdVbmhhbmRsZWQgZXJyb3Igb24gcHJvbWlzZSBjYWxsYmFjazogJHtlfSdgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIChyZWFzb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycihyZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7IH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgICAgICBlcnIoXCJOdWxsIHByb21pc2VcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQcm9taXNlVG9FbXB0eUNhbGxiYWNrKHdpdGhBc3luYy5zZW5kTWVzc2FnZUFzeW5jKG1zZyksIGNiLCBlcnIpO1xuICAgICAgICB0aGlzLnJlc2V0Q29udmVyc2F0aW9uVGltZW91dCgpO1xuICAgIH1cbiAgICByZXNldENvbnZlcnNhdGlvblRpbWVvdXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZUaW1lb3V0VG9rZW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnRcbiAgICAgICAgICAgIHRoaXMucHJpdkNsZWFyVGltZW91dCh0aGlzLnByaXZUaW1lb3V0VG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdlRpbWVvdXRUb2tlbiA9IHRoaXMucHJpdlNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZW5kUmVxdWVzdCh0aGlzLnByaXZDb252ZXJzYXRpb24uZ2V0S2VlcEFsaXZlKCkpO1xuICAgICAgICB9LCA2MDAwMCk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db252ZXJzYXRpb25UcmFuc2xhdG9yUmVjb2duaXplci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgRGVmZXJyZWQsIE1lc3NhZ2VUeXBlLCBSYXdXZWJzb2NrZXRNZXNzYWdlLCB9IGZyb20gXCIuLi8uLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udmVyc2F0aW9uQ29ubmVjdGlvbk1lc3NhZ2UgfSBmcm9tIFwiLi9Db252ZXJzYXRpb25Db25uZWN0aW9uTWVzc2FnZVwiO1xuLyoqXG4gKiBCYXNlZCBvZmYgV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlci4gVGhlIG1lc3NhZ2VzIGZvciBDb252ZXJzYXRpb24gVHJhbnNsYXRvciBoYXZlIHNvbWUgdmFyaWF0aW9ucyBmcm9tIHRoZSBTcGVlY2ggbWVzc2FnZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBDb252ZXJzYXRpb25XZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyIHtcbiAgICAvKipcbiAgICAgKiBGb3JtYXQgaW5jb21pbmcgbWVzc2FnZXM6IHRleHQgKHNwZWVjaCBwYXJ0aWFsL2ZpbmFsLCBJTSkgb3IgYmluYXJ5ICh0dHMpXG4gICAgICovXG4gICAgdG9Db25uZWN0aW9uTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGRlZmVycmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuVGV4dCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluY29taW5nTWVzc2FnZSA9IG5ldyBDb252ZXJzYXRpb25Db25uZWN0aW9uTWVzc2FnZShtZXNzYWdlLm1lc3NhZ2VUeXBlLCBtZXNzYWdlLnRleHRDb250ZW50LCB7fSwgbWVzc2FnZS5pZCk7XG4gICAgICAgICAgICAgICAgZGVmZXJyYWwucmVzb2x2ZShpbmNvbWluZ01lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobWVzc2FnZS5tZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuQmluYXJ5KSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyYWwucmVzb2x2ZShuZXcgQ29udmVyc2F0aW9uQ29ubmVjdGlvbk1lc3NhZ2UobWVzc2FnZS5tZXNzYWdlVHlwZSwgbWVzc2FnZS5iaW5hcnlDb250ZW50LCB1bmRlZmluZWQsIG1lc3NhZ2UuaWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZGVmZXJyYWwucmVqZWN0KGBFcnJvciBmb3JtYXR0aW5nIHRoZSBtZXNzYWdlLiBFcnJvcjogJHtlfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZlcnJhbC5wcm9taXNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3JtYXQgb3V0Z29pbmcgbWVzc2FnZXM6IHRleHQgKGNvbW1hbmRzIG9yIElNKVxuICAgICAqL1xuICAgIGZyb21Db25uZWN0aW9uTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGRlZmVycmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuVGV4dCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBgJHttZXNzYWdlLnRleHRCb2R5ID8gbWVzc2FnZS50ZXh0Qm9keSA6IFwiXCJ9YDtcbiAgICAgICAgICAgICAgICBkZWZlcnJhbC5yZXNvbHZlKG5ldyBSYXdXZWJzb2NrZXRNZXNzYWdlKE1lc3NhZ2VUeXBlLlRleHQsIHBheWxvYWQsIG1lc3NhZ2UuaWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZGVmZXJyYWwucmVqZWN0KGBFcnJvciBmb3JtYXR0aW5nIHRoZSBtZXNzYWdlLiAke2V9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZmVycmFsLnByb21pc2U7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db252ZXJzYXRpb25XZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgeyBDb252ZXJzYXRpb25NYW5hZ2VyIH0gZnJvbSBcIi4vQ29udmVyc2F0aW9uTWFuYWdlclwiO1xuZXhwb3J0IHsgQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZyB9IGZyb20gXCIuL0NvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWdcIjtcbmV4cG9ydCB7IENvbnZlcnNhdGlvblJlY29nbml6ZXJGYWN0b3J5IH0gZnJvbSBcIi4vQ29udmVyc2F0aW9uVHJhbnNsYXRvclJlY29nbml6ZXJcIjtcbmV4cG9ydCB7IFRyYW5zY3JpYmVyUmVjb2duaXplciB9IGZyb20gXCIuL1RyYW5zY3JpYmVyUmVjb2duaXplclwiO1xuZXhwb3J0IHsgQ29udmVyc2F0aW9uUmVjZWl2ZWRUcmFuc2xhdGlvbkV2ZW50QXJncywgTG9ja1Jvb21FdmVudEFyZ3MsIE11dGVBbGxFdmVudEFyZ3MsIFBhcnRpY2lwYW50QXR0cmlidXRlRXZlbnRBcmdzLCBQYXJ0aWNpcGFudEV2ZW50QXJncywgUGFydGljaXBhbnRzTGlzdEV2ZW50QXJncyB9IGZyb20gXCIuL0NvbnZlcnNhdGlvblRyYW5zbGF0b3JFdmVudEFyZ3NcIjtcbmV4cG9ydCB7IENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMsIENvbnZlcnNhdGlvblRyYW5zbGF0b3JNZXNzYWdlVHlwZXMsIEludGVybmFsUGFydGljaXBhbnRzIH0gZnJvbSBcIi4vQ29udmVyc2F0aW9uVHJhbnNsYXRvckludGVyZmFjZXNcIjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXhwb3J0cy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuY29uc3QgcGFyc2VDb21tYW5kUmVzcG9uc2UgPSAoanNvbikgPT4gSlNPTi5wYXJzZShqc29uKTtcbmV4cG9ydCBjbGFzcyBDb21tYW5kUmVzcG9uc2VQYXlsb2FkIHtcbiAgICBjb25zdHJ1Y3Rvcihqc29uKSB7XG4gICAgICAgIHRoaXMucHJpdkNvbW1hbmRSZXNwb25zZSA9IHBhcnNlQ29tbWFuZFJlc3BvbnNlKGpzb24pO1xuICAgIH1cbiAgICBnZXQgdHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbW1hbmRSZXNwb25zZS50eXBlO1xuICAgIH1cbiAgICBnZXQgY29tbWFuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbW1hbmRSZXNwb25zZS5jb21tYW5kO1xuICAgIH1cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb21tYW5kUmVzcG9uc2UuaWQ7XG4gICAgfVxuICAgIGdldCBuaWNrbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbW1hbmRSZXNwb25zZS5uaWNrbmFtZTtcbiAgICB9XG4gICAgZ2V0IHBhcnRpY2lwYW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb21tYW5kUmVzcG9uc2UucGFydGljaXBhbnRJZDtcbiAgICB9XG4gICAgZ2V0IHJvb21pZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbW1hbmRSZXNwb25zZS5yb29taWQ7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbW1hbmRSZXNwb25zZS52YWx1ZTtcbiAgICB9XG4gICAgZ2V0IHRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29tbWFuZFJlc3BvbnNlLnRva2VuO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICByZXR1cm4gbmV3IENvbW1hbmRSZXNwb25zZVBheWxvYWQoanNvbik7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db21tYW5kUmVzcG9uc2VQYXlsb2FkLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5jb25zdCBwYXJzZUxpc3RSZXNwb25zZSA9IChqc29uKSA9PiBKU09OLnBhcnNlKGpzb24pO1xuY29uc3QgcGFyc2VQYXJ0aWNpcGFudFJlc3BvbnNlID0gKGpzb24pID0+IEpTT04ucGFyc2UoanNvbik7XG5leHBvcnQgY2xhc3MgUGFydGljaXBhbnRzTGlzdFBheWxvYWRSZXNwb25zZSB7XG4gICAgY29uc3RydWN0b3IoanNvbikge1xuICAgICAgICB0aGlzLnByaXZQYXJ0aWNpcGFudHNQYXlsb2FkUmVzcG9uc2UgPSBwYXJzZUxpc3RSZXNwb25zZShqc29uKTtcbiAgICB9XG4gICAgZ2V0IHJvb21pZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlBhcnRpY2lwYW50c1BheWxvYWRSZXNwb25zZS5yb29taWQ7XG4gICAgfVxuICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlBhcnRpY2lwYW50c1BheWxvYWRSZXNwb25zZS5pZDtcbiAgICB9XG4gICAgZ2V0IGNvbW1hbmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJ0aWNpcGFudHNQYXlsb2FkUmVzcG9uc2UuY29tbWFuZDtcbiAgICB9XG4gICAgZ2V0IHBhcnRpY2lwYW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlBhcnRpY2lwYW50c1BheWxvYWRSZXNwb25zZS5wYXJ0aWNpcGFudHM7XG4gICAgfVxuICAgIGdldCB0b2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlBhcnRpY2lwYW50c1BheWxvYWRSZXNwb25zZS50b2tlbjtcbiAgICB9XG4gICAgZ2V0IHRyYW5zbGF0ZVRvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFydGljaXBhbnRzUGF5bG9hZFJlc3BvbnNlLnRyYW5zbGF0ZVRvO1xuICAgIH1cbiAgICBnZXQgcHJvZmFuaXR5RmlsdGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFydGljaXBhbnRzUGF5bG9hZFJlc3BvbnNlLnByb2Zhbml0eUZpbHRlcjtcbiAgICB9XG4gICAgZ2V0IHJvb21Qcm9mYW5pdHlGaWx0ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJ0aWNpcGFudHNQYXlsb2FkUmVzcG9uc2Uucm9vbVByb2Zhbml0eUZpbHRlcjtcbiAgICB9XG4gICAgZ2V0IHJvb21Mb2NrZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJ0aWNpcGFudHNQYXlsb2FkUmVzcG9uc2Uucm9vbUxvY2tlZDtcbiAgICB9XG4gICAgZ2V0IG11dGVBbGwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJ0aWNpcGFudHNQYXlsb2FkUmVzcG9uc2UubXV0ZUFsbDtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJ0aWNpcGFudHNQYXlsb2FkUmVzcG9uc2UudHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJ0aWNpcGFudHNMaXN0UGF5bG9hZFJlc3BvbnNlKGpzb24pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBQYXJ0aWNpcGFudFBheWxvYWRSZXNwb25zZSB7XG4gICAgY29uc3RydWN0b3IoanNvbikge1xuICAgICAgICB0aGlzLnByaXZQYXJ0aWNpcGFudFBheWxvYWRSZXNwb25zZSA9IHBhcnNlUGFydGljaXBhbnRSZXNwb25zZShqc29uKTtcbiAgICB9XG4gICAgZ2V0IG5pY2tuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFydGljaXBhbnRQYXlsb2FkUmVzcG9uc2Uubmlja25hbWU7XG4gICAgfVxuICAgIGdldCBsb2NhbGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJ0aWNpcGFudFBheWxvYWRSZXNwb25zZS5sb2NhbGU7XG4gICAgfVxuICAgIGdldCB1c2V0dHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJ0aWNpcGFudFBheWxvYWRSZXNwb25zZS51c2V0dHM7XG4gICAgfVxuICAgIGdldCBpc211dGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFydGljaXBhbnRQYXlsb2FkUmVzcG9uc2UuaXNtdXRlZDtcbiAgICB9XG4gICAgZ2V0IGlzaG9zdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlBhcnRpY2lwYW50UGF5bG9hZFJlc3BvbnNlLmlzaG9zdDtcbiAgICB9XG4gICAgZ2V0IHBhcnRpY2lwYW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJ0aWNpcGFudFBheWxvYWRSZXNwb25zZS5wYXJ0aWNpcGFudElkO1xuICAgIH1cbiAgICBnZXQgYXZhdGFyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGFydGljaXBhbnRQYXlsb2FkUmVzcG9uc2UuYXZhdGFyO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICByZXR1cm4gbmV3IFBhcnRpY2lwYW50UGF5bG9hZFJlc3BvbnNlKGpzb24pO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGFydGljaXBhbnRSZXNwb25zZVBheWxvYWQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmNvbnN0IHBhcnNlU3BlZWNoUmVzcG9uc2UgPSAoanNvbikgPT4gSlNPTi5wYXJzZShqc29uKTtcbmNvbnN0IHBhcnNlVGV4dFJlc3BvbnNlID0gKGpzb24pID0+IEpTT04ucGFyc2UoanNvbik7XG5leHBvcnQgY2xhc3MgU3BlZWNoUmVzcG9uc2VQYXlsb2FkIHtcbiAgICBjb25zdHJ1Y3Rvcihqc29uKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFJlc3BvbnNlID0gcGFyc2VTcGVlY2hSZXNwb25zZShqc29uKTtcbiAgICB9XG4gICAgZ2V0IHJlY29nbml0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUmVzcG9uc2UucmVjb2duaXRpb247XG4gICAgfVxuICAgIGdldCB0cmFuc2xhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hSZXNwb25zZS50cmFuc2xhdGlvbnM7XG4gICAgfVxuICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFJlc3BvbnNlLmlkO1xuICAgIH1cbiAgICBnZXQgbGFuZ3VhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hSZXNwb25zZS5sYW5ndWFnZTtcbiAgICB9XG4gICAgZ2V0IG5pY2tuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUmVzcG9uc2Uubmlja25hbWU7XG4gICAgfVxuICAgIGdldCBwYXJ0aWNpcGFudElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUmVzcG9uc2UucGFydGljaXBhbnRJZDtcbiAgICB9XG4gICAgZ2V0IHJvb21pZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFJlc3BvbnNlLnJvb21pZDtcbiAgICB9XG4gICAgZ2V0IHRpbWVzdGFtcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFJlc3BvbnNlLnRpbWVzdGFtcDtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hSZXNwb25zZS50eXBlO1xuICAgIH1cbiAgICBnZXQgaXNGaW5hbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFJlc3BvbnNlLnR5cGUgPT09IFwiZmluYWxcIjtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTcGVlY2hSZXNwb25zZVBheWxvYWQoanNvbik7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFRleHRSZXNwb25zZVBheWxvYWQge1xuICAgIGNvbnN0cnVjdG9yKGpzb24pIHtcbiAgICAgICAgdGhpcy5wcml2VGV4dFJlc3BvbnNlID0gcGFyc2VUZXh0UmVzcG9uc2UoanNvbik7XG4gICAgfVxuICAgIGdldCBvcmlnaW5hbFRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUZXh0UmVzcG9uc2Uub3JpZ2luYWxUZXh0O1xuICAgIH1cbiAgICBnZXQgdHJhbnNsYXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VGV4dFJlc3BvbnNlLnRyYW5zbGF0aW9ucztcbiAgICB9XG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VGV4dFJlc3BvbnNlLmlkO1xuICAgIH1cbiAgICBnZXQgbGFuZ3VhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUZXh0UmVzcG9uc2UubGFuZ3VhZ2U7XG4gICAgfVxuICAgIGdldCBuaWNrbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRleHRSZXNwb25zZS5uaWNrbmFtZTtcbiAgICB9XG4gICAgZ2V0IHBhcnRpY2lwYW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUZXh0UmVzcG9uc2UucGFydGljaXBhbnRJZDtcbiAgICB9XG4gICAgZ2V0IHJvb21pZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRleHRSZXNwb25zZS5yb29taWQ7XG4gICAgfVxuICAgIGdldCB0aW1lc3RhbXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUZXh0UmVzcG9uc2UudGltZXN0YW1wO1xuICAgIH1cbiAgICBnZXQgdHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRleHRSZXNwb25zZS50eXBlO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICByZXR1cm4gbmV3IFRleHRSZXNwb25zZVBheWxvYWQoanNvbik7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2xhdGlvblJlc3BvbnNlUGF5bG9hZC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi4vLi4vc2RrL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgUHJvcGVydHlJZCwgUmVjb2duaXplciwgfSBmcm9tIFwiLi4vLi4vc2RrL0V4cG9ydHNcIjtcbmltcG9ydCB7IFJlY29nbml0aW9uTW9kZSwgUmVjb2duaXplckNvbmZpZywgVHJhbnNjcmliZXJDb25uZWN0aW9uRmFjdG9yeSwgVHJhbnNjcmlwdGlvblNlcnZpY2VSZWNvZ25pemVyLCB9IGZyb20gXCIuLi9FeHBvcnRzXCI7XG5leHBvcnQgY2xhc3MgVHJhbnNjcmliZXJSZWNvZ25pemVyIGV4dGVuZHMgUmVjb2duaXplciB7XG4gICAgLyoqXG4gICAgICogVHJhbnNjcmliZXJSZWNvZ25pemVyIGNvbnN0cnVjdG9yLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7U3BlZWNoVHJhbnNsYXRpb25Db25maWd9IHNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnIC0gTm9uLWF1ZGlvIGNvbmZpZ3VyYXRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSByZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtBdWRpb0NvbmZpZ30gYXVkaW9Db25maWcgLSBBbiBhdWRpbyBjb25maWd1cmF0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVjb2duaXplclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnLCBhdWRpb0NvbmZpZykge1xuICAgICAgICBjb25zdCBzcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwgPSBzcGVlY2hUcmFuc2xhdGlvbkNvbmZpZztcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKHNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbCwgXCJzcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ1wiKTtcbiAgICAgICAgY29uc3QgYXVkaW9Db25maWdJbXBsID0gYXVkaW9Db25maWc7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChhdWRpb0NvbmZpZ0ltcGwsIFwiYXVkaW9Db25maWdJbXBsXCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2Uoc3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UsIFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2VdKTtcbiAgICAgICAgc3VwZXIoYXVkaW9Db25maWcsIHNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm9wZXJ0aWVzLCBuZXcgVHJhbnNjcmliZXJDb25uZWN0aW9uRmFjdG9yeSgpKTtcbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZWRSZWNvZ25pemVyID0gZmFsc2U7XG4gICAgfVxuICAgIGdldCBzcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlKCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkUmVjb2duaXplcik7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UpO1xuICAgIH1cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxuICAgIGdldCBhdXRob3JpemF0aW9uVG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbik7XG4gICAgfVxuICAgIHNldCBhdXRob3JpemF0aW9uVG9rZW4odG9rZW4pIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRva2VuLCBcInRva2VuXCIpO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgdG9rZW4pO1xuICAgIH1cbiAgICBzZXQgY29udmVyc2F0aW9uKGMpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoYywgXCJDb252ZXJzYXRpb25cIik7XG4gICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbiA9IGM7XG4gICAgfVxuICAgIGdldENvbnZlcnNhdGlvbkluZm8oKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvbiwgXCJDb252ZXJzYXRpb25cIik7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb252ZXJzYXRpb24uY29udmVyc2F0aW9uSW5mbztcbiAgICB9XG4gICAgc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5zdGFydENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jSW1wbChSZWNvZ25pdGlvbk1vZGUuQ29udmVyc2F0aW9uKSwgY2IsIGVycik7XG4gICAgfVxuICAgIHN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5zdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmNJbXBsKCksIGNiLCBlcnIpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wcml2RGlzcG9zZWRSZWNvZ25pemVyKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5kaXNwb3NlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gUHVzaCBhc3luYyBqb2luL2xlYXZlIGNvbnZlcnNhdGlvbiBtZXNzYWdlIHZpYSBzZXJ2aWNlUmVjb2duaXplclxuICAgIHB1c2hDb252ZXJzYXRpb25FdmVudChjb252ZXJzYXRpb25JbmZvLCBjb21tYW5kKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZWNvID0gKHRoaXMucHJpdlJlY28pO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQocmVjbywgXCJzZXJ2aWNlUmVjb2duaXplclwiKTtcbiAgICAgICAgICAgIHlpZWxkIHJlY28uc2VuZFNwZWVjaEV2ZW50QXN5bmMoY29udmVyc2F0aW9uSW5mbywgY29tbWFuZCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbmZvcmNlQXVkaW9HYXRpbmcoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBhdWRpb0NvbmZpZ0ltcGwgPSB0aGlzLmF1ZGlvQ29uZmlnO1xuICAgICAgICAgICAgY29uc3QgZm9ybWF0ID0geWllbGQgYXVkaW9Db25maWdJbXBsLmZvcm1hdDtcbiAgICAgICAgICAgIGNvbnN0IGNoYW5uZWxzID0gZm9ybWF0LmNoYW5uZWxzO1xuICAgICAgICAgICAgaWYgKGNoYW5uZWxzID09PSAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShcImYwZjVkZWJjLWY4YzktNDg5Mi1hYzRiLTkwYTdhYjM1OWZkMlwiLCBcImZhbHNlXCIpLnRvTG93ZXJDYXNlKCkgIT09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNpbmdsZSBjaGFubmVsIGF1ZGlvIGNvbmZpZ3VyYXRpb24gZm9yIENvbnZlcnNhdGlvblRyYW5zY3JpYmVyIGlzIGN1cnJlbnRseSB1bmRlciBwcml2YXRlIHByZXZpZXcsIHBsZWFzZSBjb250YWN0IGRpYXJpemF0aW9ucmVxdWVzdEBtaWNyb3NvZnQuY29tIGZvciBtb3JlIGRldGFpbHNcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hhbm5lbHMgIT09IDgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGF1ZGlvIGNvbmZpZ3VyYXRpb246IERldGVjdGVkICR7Y2hhbm5lbHN9LWNoYW5uZWwgYXVkaW9gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbm5lY3RDYWxsYmFja3ModHJhbnNjcmliZXIpIHtcbiAgICAgICAgdGhpcy5jYW5jZWxlZCA9IChzLCBlKSA9PiB7XG4gICAgICAgICAgICBpZiAoISF0cmFuc2NyaWJlci5jYW5jZWxlZCkge1xuICAgICAgICAgICAgICAgIHRyYW5zY3JpYmVyLmNhbmNlbGVkKHRyYW5zY3JpYmVyLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZWNvZ25pemluZyA9IChzLCBlKSA9PiB7XG4gICAgICAgICAgICBpZiAoISF0cmFuc2NyaWJlci50cmFuc2NyaWJpbmcpIHtcbiAgICAgICAgICAgICAgICB0cmFuc2NyaWJlci50cmFuc2NyaWJpbmcodHJhbnNjcmliZXIsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlY29nbml6ZWQgPSAocywgZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCEhdHJhbnNjcmliZXIudHJhbnNjcmliZWQpIHtcbiAgICAgICAgICAgICAgICB0cmFuc2NyaWJlci50cmFuc2NyaWJlZCh0cmFuc2NyaWJlciwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2Vzc2lvblN0YXJ0ZWQgPSAocywgZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCEhdHJhbnNjcmliZXIuc2Vzc2lvblN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICB0cmFuc2NyaWJlci5zZXNzaW9uU3RhcnRlZCh0cmFuc2NyaWJlciwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2Vzc2lvblN0b3BwZWQgPSAocywgZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCEhdHJhbnNjcmliZXIuc2Vzc2lvblN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICB0cmFuc2NyaWJlci5zZXNzaW9uU3RvcHBlZCh0cmFuc2NyaWJlciwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGRpc2Nvbm5lY3RDYWxsYmFja3MoKSB7XG4gICAgICAgIHRoaXMuY2FuY2VsZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucmVjb2duaXppbmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucmVjb2duaXplZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zZXNzaW9uU3RhcnRlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zZXNzaW9uU3RvcHBlZCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcG9zZXMgYW55IHJlc291cmNlcyBoZWxkIGJ5IHRoZSBvYmplY3QuXG4gICAgICogQG1lbWJlciBDb252ZXJzYXRpb25UcmFuc2NyaWJlci5wcm90b3R5cGUuZGlzcG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGRpc3Bvc2luZyAtIHRydWUgaWYgZGlzcG9zaW5nIHRoZSBvYmplY3QuXG4gICAgICovXG4gICAgZGlzcG9zZShkaXNwb3NpbmcpIHtcbiAgICAgICAgY29uc3QgX3N1cGVyID0gT2JqZWN0LmNyZWF0ZShudWxsLCB7XG4gICAgICAgICAgICBkaXNwb3NlOiB7IGdldDogKCkgPT4gc3VwZXIuZGlzcG9zZSB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkRpc3Bvc2VkUmVjb2duaXplcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaXNwb3NpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZEaXNwb3NlZFJlY29nbml6ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuaW1wbFJlY29nbml6ZXJTdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCBfc3VwZXIuZGlzcG9zZS5jYWxsKHRoaXMsIGRpc3Bvc2luZyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjcmVhdGVSZWNvZ25pemVyQ29uZmlnKHNwZWVjaENvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IFJlY29nbml6ZXJDb25maWcoc3BlZWNoQ29uZmlnLCB0aGlzLnByb3BlcnRpZXMpO1xuICAgIH1cbiAgICBjcmVhdGVTZXJ2aWNlUmVjb2duaXplcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvQ29uZmlnLCByZWNvZ25pemVyQ29uZmlnKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZ0ltcGwgPSBhdWRpb0NvbmZpZztcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2NyaXB0aW9uU2VydmljZVJlY29nbml6ZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBjb25maWdJbXBsLCByZWNvZ25pemVyQ29uZmlnLCB0aGlzKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zY3JpYmVyUmVjb2duaXplci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBNZXNzYWdlVHlwZSB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBDb252ZXJzYXRpb25UcmFuc2NyaXB0aW9uQ2FuY2VsZWRFdmVudEFyZ3MsIFByb3BlcnR5Q29sbGVjdGlvbiwgUHJvcGVydHlJZCwgUmVzdWx0UmVhc29uLCBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncywgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQsIH0gZnJvbSBcIi4uL3Nkay9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIENvbnZlcnNhdGlvblNlcnZpY2VSZWNvZ25pemVyIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuaW1wb3J0IHsgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UgfSBmcm9tIFwiLi9TcGVlY2hDb25uZWN0aW9uTWVzc2FnZS5JbnRlcm5hbFwiO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgVHJhbnNjcmlwdGlvblNlcnZpY2VSZWNvZ25pemVyIGV4dGVuZHMgQ29udmVyc2F0aW9uU2VydmljZVJlY29nbml6ZXIge1xuICAgIGNvbnN0cnVjdG9yKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Tb3VyY2UsIHJlY29nbml6ZXJDb25maWcsIHRyYW5zY3JpYmVyKSB7XG4gICAgICAgIHN1cGVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Tb3VyY2UsIHJlY29nbml6ZXJDb25maWcsIHRyYW5zY3JpYmVyKTtcbiAgICAgICAgdGhpcy5wcml2VHJhbnNjcmliZXJSZWNvZ25pemVyID0gdHJhbnNjcmliZXI7XG4gICAgICAgIHRoaXMuc2VuZFByZVBheWxvYWRKU09OT3ZlcnJpZGUgPSAoY29ubmVjdGlvbikgPT4gdGhpcy5zZW5kVHJhbnNjcmlwdGlvblN0YXJ0SlNPTihjb25uZWN0aW9uKTtcbiAgICAgICAgaWYgKHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0V29yZExldmVsVGltZXN0YW1wcykgPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hDb250ZXh0LnNldFdvcmRMZXZlbFRpbWluZ3MoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZW5kU3BlZWNoRXZlbnRBc3luYyhpbmZvLCBjb21tYW5kKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5pc1JlY29nbml6aW5nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHlpZWxkIHRoaXMuZmV0Y2hDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5zZW5kU3BlZWNoRXZlbnQoY29ubmVjdGlvbiwgdGhpcy5jcmVhdGVTcGVlY2hFdmVudFBheWxvYWQoaW5mbywgY29tbWFuZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcHJvY2Vzc1R5cGVTcGVjaWZpY01lc3NhZ2VzKGNvbm5lY3Rpb25NZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NTcGVlY2hNZXNzYWdlcyhjb25uZWN0aW9uTWVzc2FnZSk7XG4gICAgfVxuICAgIGhhbmRsZVJlY29nbml6ZWRDYWxsYmFjayhyZXN1bHQsIG9mZnNldCwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncyhyZXN1bHQsIG9mZnNldCwgc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlRyYW5zY3JpYmVyUmVjb2duaXplci5yZWNvZ25pemVkKHRoaXMucHJpdlRyYW5zY3JpYmVyUmVjb2duaXplciwgZXZlbnQpO1xuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkVycm9yQ2FsbGJhY2soZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gT25seSBpbnZva2UgdGhlIGNhbGwgYmFjayBvbmNlLlxuICAgICAgICAgICAgICAgIC8vIGFuZCBpZiBpdCdzIHN1Y2Nlc3NmdWwgZG9uJ3QgaW52b2tlIHRoZVxuICAgICAgICAgICAgICAgIC8vIGVycm9yIGFmdGVyIHRoYXQuXG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkVycm9yQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZVJlY29nbml6aW5nQ2FsbGJhY2socmVzdWx0LCBkdXJhdGlvbiwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBldiA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncyhyZXN1bHQsIGR1cmF0aW9uLCBzZXNzaW9uSWQpO1xuICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNjcmliZXJSZWNvZ25pemVyLnJlY29nbml6aW5nKHRoaXMucHJpdlRyYW5zY3JpYmVyUmVjb2duaXplciwgZXYpO1xuICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBDYW5jZWxzIHJlY29nbml0aW9uLlxuICAgIGNhbmNlbFJlY29nbml0aW9uKHNlc3Npb25JZCwgcmVxdWVzdElkLCBjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yQ29kZSwgZXJyb3IpIHtcbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgcHJvcGVydGllcy5zZXRQcm9wZXJ0eShDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIENhbmNlbGxhdGlvbkVycm9yQ29kZVtlcnJvckNvZGVdKTtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2VHJhbnNjcmliZXJSZWNvZ25pemVyLmNhbmNlbGVkKSB7XG4gICAgICAgICAgICBjb25zdCBjYW5jZWxFdmVudCA9IG5ldyBDb252ZXJzYXRpb25UcmFuc2NyaXB0aW9uQ2FuY2VsZWRFdmVudEFyZ3MoY2FuY2VsbGF0aW9uUmVhc29uLCBlcnJvciwgZXJyb3JDb2RlLCB1bmRlZmluZWQsIHNlc3Npb25JZCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlRyYW5zY3JpYmVyUmVjb2duaXplci5jYW5jZWxlZCh0aGlzLnByaXZUcmFuc2NyaWJlclJlY29nbml6ZXIsIGNhbmNlbEV2ZW50KTtcbiAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoISF0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdChyZXF1ZXN0SWQsIFJlc3VsdFJlYXNvbi5DYW5jZWxlZCwgdW5kZWZpbmVkLCAvLyBUZXh0XG4gICAgICAgICAgICB1bmRlZmluZWQsIC8vIER1cmF0aW9uXG4gICAgICAgICAgICB1bmRlZmluZWQsIC8vIE9mZnNldFxuICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBMYW5ndWFnZVxuICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBMYW5ndWFnZSBEZXRlY3Rpb24gQ29uZmlkZW5jZVxuICAgICAgICAgICAgdW5kZWZpbmVkLCAvLyBTcGVha2VyIElkXG4gICAgICAgICAgICBlcnJvciwgdW5kZWZpbmVkLCAvLyBKc29uXG4gICAgICAgICAgICBwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2IpIHsgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEVuY2Fwc3VsYXRlZCBmb3IgZGVyaXZlZCBzZXJ2aWNlIHJlY29nbml6ZXJzIHRoYXQgbmVlZCB0byBzZW5kIGFkZGl0aW9uYWwgSlNPTlxuICAgIHNlbmRUcmFuc2NyaXB0aW9uU3RhcnRKU09OKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMuc2VuZFNwZWVjaENvbnRleHQoY29ubmVjdGlvbiwgdHJ1ZSk7XG4gICAgICAgICAgICBjb25zdCBpbmZvID0gdGhpcy5wcml2VHJhbnNjcmliZXJSZWNvZ25pemVyLmdldENvbnZlcnNhdGlvbkluZm8oKTtcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSB0aGlzLmNyZWF0ZVNwZWVjaEV2ZW50UGF5bG9hZChpbmZvLCBcInN0YXJ0XCIpO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5zZW5kU3BlZWNoRXZlbnQoY29ubmVjdGlvbiwgcGF5bG9hZCk7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnNlbmRXYXZlSGVhZGVyKGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2VuZFNwZWVjaEV2ZW50KGNvbm5lY3Rpb24sIHBheWxvYWQpIHtcbiAgICAgICAgY29uc3Qgc3BlZWNoRXZlbnRKc29uID0gSlNPTi5zdHJpbmdpZnkocGF5bG9hZCk7XG4gICAgICAgIGlmIChzcGVlY2hFdmVudEpzb24pIHtcbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uLnNlbmQobmV3IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlKE1lc3NhZ2VUeXBlLlRleHQsIFwic3BlZWNoLmV2ZW50XCIsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgXCJhcHBsaWNhdGlvbi9qc29uXCIsIHNwZWVjaEV2ZW50SnNvbikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY3JlYXRlU3BlZWNoRXZlbnRQYXlsb2FkKGluZm8sIGNvbW1hbmQpIHtcbiAgICAgICAgY29uc3QgZXZlbnREaWN0ID0geyBpZDogXCJtZWV0aW5nXCIsIG5hbWU6IGNvbW1hbmQsIG1lZXRpbmc6IGluZm8uY29udmVyc2F0aW9uUHJvcGVydGllcyB9O1xuICAgICAgICBldmVudERpY3QubWVldGluZy5pZCA9IGluZm8uaWQ7XG4gICAgICAgIGV2ZW50RGljdC5tZWV0aW5nLmF0dGVuZGVlcyA9IGluZm8ucGFydGljaXBhbnRzO1xuICAgICAgICBldmVudERpY3QubWVldGluZy5yZWNvcmQgPSBpbmZvLmNvbnZlcnNhdGlvblByb3BlcnRpZXMuYXVkaW9yZWNvcmRpbmcgPT09IFwib25cIiA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiO1xuICAgICAgICByZXR1cm4gZXZlbnREaWN0O1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNjcmlwdGlvblNlcnZpY2VSZWNvZ25pemVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBQcm94eUluZm8sIFdlYnNvY2tldENvbm5lY3Rpb24sIH0gZnJvbSBcIi4uL2NvbW1vbi5icm93c2VyL0V4cG9ydHNcIjtcbmltcG9ydCB7IFN0cmluZ1V0aWxzIH0gZnJvbSBcIi4uL2NvbW1vbi9TdHJpbmdVdGlsc1wiO1xuaW1wb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29ubmVjdGlvbkZhY3RvcnlCYXNlIH0gZnJvbSBcIi4vQ29ubmVjdGlvbkZhY3RvcnlCYXNlXCI7XG5pbXBvcnQgeyBXZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyLCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbmltcG9ydCB7IEhlYWRlck5hbWVzIH0gZnJvbSBcIi4vSGVhZGVyTmFtZXNcIjtcbmltcG9ydCB7IFF1ZXJ5UGFyYW1ldGVyTmFtZXMgfSBmcm9tIFwiLi9RdWVyeVBhcmFtZXRlck5hbWVzXCI7XG5leHBvcnQgY2xhc3MgVHJhbnNsYXRpb25Db25uZWN0aW9uRmFjdG9yeSBleHRlbmRzIENvbm5lY3Rpb25GYWN0b3J5QmFzZSB7XG4gICAgY3JlYXRlKGNvbmZpZywgYXV0aEluZm8sIGNvbm5lY3Rpb25JZCkge1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IHRoaXMuZ2V0RW5kcG9pbnRVcmwoY29uZmlnKTtcbiAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSB7fTtcbiAgICAgICAgaWYgKGNvbmZpZy5hdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW1F1ZXJ5UGFyYW1ldGVyTmFtZXMuRW5hYmxlTGFuZ3VhZ2VJZF0gPSBcInRydWVcIjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFF1ZXJ5UGFyYW1zKHF1ZXJ5UGFyYW1zLCBjb25maWcsIGVuZHBvaW50KTtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHt9O1xuICAgICAgICBpZiAoYXV0aEluZm8udG9rZW4gIT09IHVuZGVmaW5lZCAmJiBhdXRoSW5mby50b2tlbiAhPT0gXCJcIikge1xuICAgICAgICAgICAgaGVhZGVyc1thdXRoSW5mby5oZWFkZXJOYW1lXSA9IGF1dGhJbmZvLnRva2VuO1xuICAgICAgICB9XG4gICAgICAgIGhlYWRlcnNbSGVhZGVyTmFtZXMuQ29ubmVjdGlvbklkXSA9IGNvbm5lY3Rpb25JZDtcbiAgICAgICAgY29uZmlnLnBhcmFtZXRlcnMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9VcmwsIGVuZHBvaW50KTtcbiAgICAgICAgY29uc3QgZW5hYmxlQ29tcHJlc3Npb24gPSBjb25maWcucGFyYW1ldGVycy5nZXRQcm9wZXJ0eShcIlNQRUVDSC1FbmFibGVXZWJzb2NrZXRDb21wcmVzc2lvblwiLCBcImZhbHNlXCIpID09PSBcInRydWVcIjtcbiAgICAgICAgcmV0dXJuIG5ldyBXZWJzb2NrZXRDb25uZWN0aW9uKGVuZHBvaW50LCBxdWVyeVBhcmFtcywgaGVhZGVycywgbmV3IFdlYnNvY2tldE1lc3NhZ2VGb3JtYXR0ZXIoKSwgUHJveHlJbmZvLmZyb21SZWNvZ25pemVyQ29uZmlnKGNvbmZpZyksIGVuYWJsZUNvbXByZXNzaW9uLCBjb25uZWN0aW9uSWQpO1xuICAgIH1cbiAgICBnZXRFbmRwb2ludFVybChjb25maWcsIHJldHVyblJlZ2lvblBsYWNlaG9sZGVyKSB7XG4gICAgICAgIGNvbnN0IHJlZ2lvbiA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVnaW9uKTtcbiAgICAgICAgY29uc3QgaG9zdFN1ZmZpeCA9IENvbm5lY3Rpb25GYWN0b3J5QmFzZS5nZXRIb3N0U3VmZml4KHJlZ2lvbik7XG4gICAgICAgIGxldCBlbmRwb2ludFVybCA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnQsIHVuZGVmaW5lZCk7XG4gICAgICAgIGlmICghZW5kcG9pbnRVcmwpIHtcbiAgICAgICAgICAgIGlmIChjb25maWcuYXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaG9zdCA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSG9zdCwgXCJ3c3M6Ly97cmVnaW9ufS5zdHQuc3BlZWNoXCIgKyBob3N0U3VmZml4KTtcbiAgICAgICAgICAgICAgICBlbmRwb2ludFVybCA9IGhvc3QgKyBcIi9zcGVlY2gvdW5pdmVyc2FsL3YyXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBob3N0ID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Ib3N0LCBcIndzczovL3tyZWdpb259LnMycy5zcGVlY2hcIiArIGhvc3RTdWZmaXgpO1xuICAgICAgICAgICAgICAgIGVuZHBvaW50VXJsID0gaG9zdCArIFwiL3NwZWVjaC90cmFuc2xhdGlvbi9jb2duaXRpdmVzZXJ2aWNlcy92MVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZXR1cm5SZWdpb25QbGFjZWhvbGRlciA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGVuZHBvaW50VXJsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5mb3JtYXRTdHJpbmcoZW5kcG9pbnRVcmwsIHsgcmVnaW9uIH0pO1xuICAgIH1cbiAgICBzZXRRdWVyeVBhcmFtcyhxdWVyeVBhcmFtcywgY29uZmlnLCBlbmRwb2ludFVybCkge1xuICAgICAgICBxdWVyeVBhcmFtcy5mcm9tID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UpO1xuICAgICAgICBxdWVyeVBhcmFtcy50byA9IGNvbmZpZy5wYXJhbWV0ZXJzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Ub0xhbmd1YWdlcyk7XG4gICAgICAgIHRoaXMuc2V0Q29tbW9uVXJsUGFyYW1zKGNvbmZpZywgcXVlcnlQYXJhbXMsIGVuZHBvaW50VXJsKTtcbiAgICAgICAgdGhpcy5zZXRVcmxQYXJhbWV0ZXIoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfVHJhbnNsYXRpb25SZXF1ZXN0U3RhYmxlUGFydGlhbFJlc3VsdCwgUXVlcnlQYXJhbWV0ZXJOYW1lcy5TdGFibGVUcmFuc2xhdGlvbiwgY29uZmlnLCBxdWVyeVBhcmFtcywgZW5kcG9pbnRVcmwpO1xuICAgICAgICBjb25zdCB0cmFuc2xhdGlvblZvaWNlID0gY29uZmlnLnBhcmFtZXRlcnMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblZvaWNlLCB1bmRlZmluZWQpO1xuICAgICAgICBpZiAodHJhbnNsYXRpb25Wb2ljZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBxdWVyeVBhcmFtcy52b2ljZSA9IHRyYW5zbGF0aW9uVm9pY2U7XG4gICAgICAgICAgICBxdWVyeVBhcmFtcy5mZWF0dXJlcyA9IFwidGV4dHRvc3BlZWNoXCI7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9uQ29ubmVjdGlvbkZhY3RvcnkuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgTWVzc2FnZVR5cGUsIFRyYW5zbGF0aW9uU3RhdHVzLCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBDYW5jZWxsYXRpb25SZWFzb24sIFByb3BlcnR5Q29sbGVjdGlvbiwgUHJvcGVydHlJZCwgUmVzdWx0UmVhc29uLCBUcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MsIFRyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3MsIFRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQsIFRyYW5zbGF0aW9ucywgVHJhbnNsYXRpb25TeW50aGVzaXNFdmVudEFyZ3MsIFRyYW5zbGF0aW9uU3ludGhlc2lzUmVzdWx0LCB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBDb252ZXJzYXRpb25TZXJ2aWNlUmVjb2duaXplciwgRW51bVRyYW5zbGF0aW9uLCBSZWNvZ25pdGlvblN0YXR1cywgU3ludGhlc2lzU3RhdHVzLCBUcmFuc2xhdGlvbkh5cG90aGVzaXMsIFRyYW5zbGF0aW9uUGhyYXNlLCBUcmFuc2xhdGlvblN5bnRoZXNpc0VuZCwgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCBjbGFzcyBUcmFuc2xhdGlvblNlcnZpY2VSZWNvZ25pemVyIGV4dGVuZHMgQ29udmVyc2F0aW9uU2VydmljZVJlY29nbml6ZXIge1xuICAgIGNvbnN0cnVjdG9yKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Tb3VyY2UsIHJlY29nbml6ZXJDb25maWcsIHRyYW5zbGF0aW9uUmVjb2duaXplcikge1xuICAgICAgICBzdXBlcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCB0cmFuc2xhdGlvblJlY29nbml6ZXIpO1xuICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIgPSB0cmFuc2xhdGlvblJlY29nbml6ZXI7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbkV2ZW50cy5hdHRhY2goKGNvbm5lY3Rpb25FdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb25FdmVudC5uYW1lID09PSBcIkNvbm5lY3Rpb25Fc3RhYmxpc2hlZEV2ZW50XCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIub25Db25uZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb25uZWN0aW9uRXZlbnQubmFtZSA9PT0gXCJDb25uZWN0aW9uQ2xvc2VkRXZlbnRcIikge1xuICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLm9uRGlzY29ubmVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcHJvY2Vzc1R5cGVTcGVjaWZpY01lc3NhZ2VzKGNvbm5lY3Rpb25NZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRQcm9wcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgIGxldCBwcm9jZXNzZWQgPSB5aWVsZCB0aGlzLnByb2Nlc3NTcGVlY2hNZXNzYWdlcyhjb25uZWN0aW9uTWVzc2FnZSk7XG4gICAgICAgICAgICBpZiAocHJvY2Vzc2VkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVUcmFuc2xhdGlvblBocmFzZSA9ICh0cmFuc2xhdGVkUGhyYXNlKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25QaHJhc2VSZWNvZ25pemVkKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQgKyB0cmFuc2xhdGVkUGhyYXNlLk9mZnNldCArIHRyYW5zbGF0ZWRQaHJhc2UuRHVyYXRpb24pO1xuICAgICAgICAgICAgICAgIGlmICh0cmFuc2xhdGVkUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzID09PSBSZWNvZ25pdGlvblN0YXR1cy5TdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9LLCB0aGUgcmVjb2duaXRpb24gd2FzIHN1Y2Nlc3NmdWwuIEhvdydkIHRoZSB0cmFuc2xhdGlvbiBkbz9cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5maXJlRXZlbnRGb3JSZXN1bHQodHJhbnNsYXRlZFBocmFzZSwgcmVzdWx0UHJvcHMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIucmVjb2duaXplZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIucmVjb2duaXplZCh0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBnb2luZyB0byBsZXQgZXJyb3JzIGluIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gcmVwb3J0IHJlc3VsdCB0byBwcm9taXNlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZTdWNjZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrKHJlc3VsdC5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZFcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkVycm9yQ2FsbGJhY2soZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSBpbnZva2UgdGhlIGNhbGwgYmFjayBvbmNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGlmIGl0J3Mgc3VjY2Vzc2Z1bCBkb24ndCBpbnZva2UgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlcnJvciBhZnRlciB0aGF0LlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RXJyb3JDYWxsYmFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVhc29uID0gRW51bVRyYW5zbGF0aW9uLmltcGxUcmFuc2xhdGVSZWNvZ25pdGlvblJlc3VsdCh0cmFuc2xhdGVkUGhyYXNlLlJlY29nbml0aW9uU3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQodW5kZWZpbmVkLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIHJlYXNvbiwgdHJhbnNsYXRlZFBocmFzZS5UZXh0LCB0cmFuc2xhdGVkUGhyYXNlLkR1cmF0aW9uLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5jdXJyZW50VHVybkF1ZGlvT2Zmc2V0ICsgdHJhbnNsYXRlZFBocmFzZS5PZmZzZXQsIHRyYW5zbGF0ZWRQaHJhc2UuTGFuZ3VhZ2UsIHRyYW5zbGF0ZWRQaHJhc2UuQ29uZmlkZW5jZSwgdW5kZWZpbmVkLCBjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSwgcmVzdWx0UHJvcHMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVhc29uID09PSBSZXN1bHRSZWFzb24uQ2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbmNlbFJlYXNvbiA9IEVudW1UcmFuc2xhdGlvbi5pbXBsVHJhbnNsYXRlQ2FuY2VsUmVzdWx0KHRyYW5zbGF0ZWRQaHJhc2UuUmVjb2duaXRpb25TdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FuY2VsbGF0aW9uRXJyb3JDb2RlID0gRW51bVRyYW5zbGF0aW9uLmltcGxUcmFuc2xhdGVDYW5jZWxFcnJvckNvZGUodHJhbnNsYXRlZFBocmFzZS5SZWNvZ25pdGlvblN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmNhbmNlbFJlY29nbml0aW9uTG9jYWwoY2FuY2VsUmVhc29uLCBjYW5jZWxsYXRpb25FcnJvckNvZGUsIEVudW1UcmFuc2xhdGlvbi5pbXBsVHJhbnNsYXRlRXJyb3JEZXRhaWxzKGNhbmNlbGxhdGlvbkVycm9yQ29kZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5wcml2UmVxdWVzdFNlc3Npb24uaXNTcGVlY2hFbmRlZCAmJiByZWFzb24gPT09IFJlc3VsdFJlYXNvbi5Ob01hdGNoICYmIHRyYW5zbGF0ZWRQaHJhc2UuUmVjb2duaXRpb25TdGF0dXMgIT09IFJlY29nbml0aW9uU3RhdHVzLkluaXRpYWxTaWxlbmNlVGltZW91dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBldiA9IG5ldyBUcmFuc2xhdGlvblJlY29nbml0aW9uRXZlbnRBcmdzKHJlc3VsdCwgcmVzdWx0Lm9mZnNldCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIucmVjb2duaXplZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLnJlY29nbml6ZWQodGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLCBldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVwb3J0IHJlc3VsdCB0byBwcm9taXNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkVycm9yQ2FsbGJhY2soZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSBpbnZva2UgdGhlIGNhbGwgYmFjayBvbmNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBpZiBpdCdzIHN1Y2Nlc3NmdWwgZG9uJ3QgaW52b2tlIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVycm9yIGFmdGVyIHRoYXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkVycm9yQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uTWVzc2FnZS5tZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuVGV4dCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFByb3BzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHQsIGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAoY29ubmVjdGlvbk1lc3NhZ2UucGF0aC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcInRyYW5zbGF0aW9uLmh5cG90aGVzaXNcIjpcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5maXJlRXZlbnRGb3JSZXN1bHQoVHJhbnNsYXRpb25IeXBvdGhlc2lzLmZyb21KU09OKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KSwgcmVzdWx0UHJvcHMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vbkh5cG90aGVzaXModGhpcy5wcml2UmVxdWVzdFNlc3Npb24uY3VycmVudFR1cm5BdWRpb09mZnNldCArIHJlc3VsdC5vZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIucmVjb2duaXppbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLnJlY29nbml6aW5nKHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplciwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmlwIHRoaW5ncyB1cC5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwidHJhbnNsYXRpb24ucmVzcG9uc2VcIjpcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhyYXNlID0gSlNPTi5wYXJzZShjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIXBocmFzZS5TcGVlY2hQaHJhc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIGhhbmRsZVRyYW5zbGF0aW9uUGhyYXNlKFRyYW5zbGF0aW9uUGhyYXNlLmZyb21UcmFuc2xhdGlvblJlc3BvbnNlKHBocmFzZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2xhdGlvbi5waHJhc2VcIjpcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgaGFuZGxlVHJhbnNsYXRpb25QaHJhc2UoVHJhbnNsYXRpb25QaHJhc2UuZnJvbUpTT04oY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInRyYW5zbGF0aW9uLnN5bnRoZXNpc1wiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRTeW50aGVzaXNBdWRpbyhjb25uZWN0aW9uTWVzc2FnZS5iaW5hcnlCb2R5LCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiYXVkaW8uZW5kXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcInRyYW5zbGF0aW9uLnN5bnRoZXNpcy5lbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ludGhFbmQgPSBUcmFuc2xhdGlvblN5bnRoZXNpc0VuZC5mcm9tSlNPTihjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSk7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoc3ludGhFbmQuU3ludGhlc2lzU3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFN5bnRoZXNpc1N0YXR1cy5FcnJvcjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIuc3ludGhlc2l6aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBUcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdChSZXN1bHRSZWFzb24uQ2FuY2VsZWQsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldEV2ZW50ID0gbmV3IFRyYW5zbGF0aW9uU3ludGhlc2lzRXZlbnRBcmdzKHJlc3VsdCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24uc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplci5zeW50aGVzaXppbmcodGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLCByZXRFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplci5jYW5jZWxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBbmQgcmFpc2UgYSBjYW5jZWxlZCBldmVudCB0byBzZW5kIHRoZSByaWNoKGVyKSBlcnJvciBtZXNzYWdlIGJhY2suXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbmNlbGVkUmVzdWx0ID0gbmV3IFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncyh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQsIENhbmNlbGxhdGlvblJlYXNvbi5FcnJvciwgc3ludGhFbmQuRmFpbHVyZVJlYXNvbiwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLlNlcnZpY2VFcnJvciwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIuY2FuY2VsZWQodGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLCBjYW5jZWxlZFJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGdvaW5nIHRvIGxldCBlcnJvcnMgaW4gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBTeW50aGVzaXNTdGF0dXMuU3VjY2VzczpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRTeW50aGVzaXNBdWRpbyh1bmRlZmluZWQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHByb2Nlc3NlZDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIENhbmNlbHMgcmVjb2duaXRpb24uXG4gICAgY2FuY2VsUmVjb2duaXRpb24oc2Vzc2lvbklkLCByZXF1ZXN0SWQsIGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3JDb2RlLCBlcnJvcikge1xuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICBwcm9wZXJ0aWVzLnNldFByb3BlcnR5KENhbmNlbGxhdGlvbkVycm9yQ29kZVByb3BlcnR5TmFtZSwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW2Vycm9yQ29kZV0pO1xuICAgICAgICBpZiAoISF0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIuY2FuY2VsZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbEV2ZW50ID0gbmV3IFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncyhzZXNzaW9uSWQsIGNhbmNlbGxhdGlvblJlYXNvbiwgZXJyb3IsIGVycm9yQ29kZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLmNhbmNlbGVkKHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplciwgY2FuY2VsRXZlbnQpO1xuICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghIXRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQodW5kZWZpbmVkLCAvLyBUcmFuc2xhdGlvbnNcbiAgICAgICAgICAgIHJlcXVlc3RJZCwgUmVzdWx0UmVhc29uLkNhbmNlbGVkLCB1bmRlZmluZWQsIC8vIFRleHRcbiAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gRHJ1YXRpb25cbiAgICAgICAgICAgIHVuZGVmaW5lZCwgLy8gT2Zmc2V0XG4gICAgICAgICAgICB1bmRlZmluZWQsIC8vIExhbmd1YWdlXG4gICAgICAgICAgICB1bmRlZmluZWQsIC8vIExhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZVxuICAgICAgICAgICAgZXJyb3IsIHVuZGVmaW5lZCwgLy8gSnNvblxuICAgICAgICAgICAgcHJvcGVydGllcyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0NhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF9iKSB7IH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVSZWNvZ25pemluZ0NhbGxiYWNrKHJlc3VsdCwgZHVyYXRpb24sIHNlc3Npb25JZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZXYgPSBuZXcgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkV2ZW50QXJncyhUcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0LmZyb21TcGVlY2hSZWNvZ25pdGlvblJlc3VsdChyZXN1bHQpLCBkdXJhdGlvbiwgc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplci5yZWNvZ25pemluZyh0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIsIGV2KTtcbiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlUmVjb2duaXplZENhbGxiYWNrKHJlc3VsdCwgb2Zmc2V0LCBzZXNzaW9uSWQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGV2ID0gbmV3IFRyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3MoVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdC5mcm9tU3BlZWNoUmVjb2duaXRpb25SZXN1bHQocmVzdWx0KSwgb2Zmc2V0LCBzZXNzaW9uSWQpO1xuICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLnJlY29nbml6ZWQodGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLCBldik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgLy8gdHJpcCB0aGluZ3MgdXAuXG4gICAgICAgIH1cbiAgICB9XG4gICAgZmlyZUV2ZW50Rm9yUmVzdWx0KHNlcnZpY2VSZXN1bHQsIHByb3BlcnRpZXMpIHtcbiAgICAgICAgbGV0IHRyYW5zbGF0aW9ucztcbiAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gc2VydmljZVJlc3VsdC5UcmFuc2xhdGlvbi5UcmFuc2xhdGlvbnMpIHtcbiAgICAgICAgICAgIHRyYW5zbGF0aW9ucyA9IG5ldyBUcmFuc2xhdGlvbnMoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdHJhbnNsYXRpb24gb2Ygc2VydmljZVJlc3VsdC5UcmFuc2xhdGlvbi5UcmFuc2xhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbnMuc2V0KHRyYW5zbGF0aW9uLkxhbmd1YWdlLCB0cmFuc2xhdGlvbi5UZXh0IHx8IHRyYW5zbGF0aW9uLkRpc3BsYXlUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVzdWx0UmVhc29uO1xuICAgICAgICBsZXQgbGFuZ3VhZ2U7XG4gICAgICAgIGxldCBjb25maWRlbmNlO1xuICAgICAgICBpZiAoc2VydmljZVJlc3VsdCBpbnN0YW5jZW9mIFRyYW5zbGF0aW9uUGhyYXNlKSB7XG4gICAgICAgICAgICBpZiAoISFzZXJ2aWNlUmVzdWx0LlRyYW5zbGF0aW9uICYmIHNlcnZpY2VSZXN1bHQuVHJhbnNsYXRpb24uVHJhbnNsYXRpb25TdGF0dXMgPT09IFRyYW5zbGF0aW9uU3RhdHVzLlN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRSZWFzb24gPSBSZXN1bHRSZWFzb24uVHJhbnNsYXRlZFNwZWVjaDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdFJlYXNvbiA9IFJlc3VsdFJlYXNvbi5SZWNvZ25pemVkU3BlZWNoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGFuZ3VhZ2UgPSBzZXJ2aWNlUmVzdWx0Lkxhbmd1YWdlO1xuICAgICAgICAgICAgY29uZmlkZW5jZSA9IHNlcnZpY2VSZXN1bHQuQ29uZmlkZW5jZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdFJlYXNvbiA9IFJlc3VsdFJlYXNvbi5UcmFuc2xhdGluZ1NwZWVjaDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvZmZzZXQgPSBzZXJ2aWNlUmVzdWx0Lk9mZnNldCArIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmN1cnJlbnRUdXJuQXVkaW9PZmZzZXQ7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBUcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0KHRyYW5zbGF0aW9ucywgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCByZXN1bHRSZWFzb24sIHNlcnZpY2VSZXN1bHQuVGV4dCwgc2VydmljZVJlc3VsdC5EdXJhdGlvbiwgb2Zmc2V0LCBsYW5ndWFnZSwgY29uZmlkZW5jZSwgc2VydmljZVJlc3VsdC5UcmFuc2xhdGlvbi5GYWlsdXJlUmVhc29uLCBKU09OLnN0cmluZ2lmeShzZXJ2aWNlUmVzdWx0KSwgcHJvcGVydGllcyk7XG4gICAgICAgIGNvbnN0IGV2ID0gbmV3IFRyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3MocmVzdWx0LCBvZmZzZXQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgIHJldHVybiBldjtcbiAgICB9XG4gICAgc2VuZFN5bnRoZXNpc0F1ZGlvKGF1ZGlvLCBzZXNzaW9uSWQpIHtcbiAgICAgICAgY29uc3QgcmVhc29uID0gKHVuZGVmaW5lZCA9PT0gYXVkaW8pID8gUmVzdWx0UmVhc29uLlN5bnRoZXNpemluZ0F1ZGlvQ29tcGxldGVkIDogUmVzdWx0UmVhc29uLlN5bnRoZXNpemluZ0F1ZGlvO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHQocmVhc29uLCBhdWRpbyk7XG4gICAgICAgIGNvbnN0IHJldEV2ZW50ID0gbmV3IFRyYW5zbGF0aW9uU3ludGhlc2lzRXZlbnRBcmdzKHJlc3VsdCwgc2Vzc2lvbklkKTtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2VHJhbnNsYXRpb25SZWNvZ25pemVyLnN5bnRoZXNpemluZykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvblJlY29nbml6ZXIuc3ludGhlc2l6aW5nKHRoaXMucHJpdlRyYW5zbGF0aW9uUmVjb2duaXplciwgcmV0RXZlbnQpO1xuICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBOb3QgZ29pbmcgdG8gbGV0IGVycm9ycyBpbiB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgIC8vIHRyaXAgdGhpbmdzIHVwLlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2xhdGlvblNlcnZpY2VSZWNvZ25pemVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgdHJhbnNsYXRpb24gc3RhdHVzLlxuICogQGNsYXNzIFRyYW5zbGF0aW9uU3RhdHVzXG4gKi9cbmV4cG9ydCB2YXIgVHJhbnNsYXRpb25TdGF0dXM7XG4oZnVuY3Rpb24gKFRyYW5zbGF0aW9uU3RhdHVzKSB7XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblN0YXR1cy5TdWNjZXNzXG4gICAgICovXG4gICAgVHJhbnNsYXRpb25TdGF0dXNbVHJhbnNsYXRpb25TdGF0dXNbXCJTdWNjZXNzXCJdID0gMF0gPSBcIlN1Y2Nlc3NcIjtcbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uU3RhdHVzLkVycm9yXG4gICAgICovXG4gICAgVHJhbnNsYXRpb25TdGF0dXNbVHJhbnNsYXRpb25TdGF0dXNbXCJFcnJvclwiXSA9IDFdID0gXCJFcnJvclwiO1xufSkoVHJhbnNsYXRpb25TdGF0dXMgfHwgKFRyYW5zbGF0aW9uU3RhdHVzID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNsYXRpb25TdGF0dXMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgUmVwbGF5YWJsZUF1ZGlvTm9kZSB9IGZyb20gXCIuLi9jb21tb24uYnJvd3Nlci9FeHBvcnRzXCI7XG5pbXBvcnQgeyBEZWZlcnJhbE1hcCwgRGVmZXJyZWQsIE1lc3NhZ2VUeXBlLCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBDYW5jZWxsYXRpb25SZWFzb24sIFByb3BlcnR5Q29sbGVjdGlvbiwgUHJvcGVydHlJZCwgUmVzdWx0UmVhc29uLCBTZXNzaW9uRXZlbnRBcmdzLCBWb2ljZVByb2ZpbGVFbnJvbGxtZW50UmVzdWx0LCBWb2ljZVByb2ZpbGVQaHJhc2VSZXN1bHQsIFZvaWNlUHJvZmlsZVJlc3VsdCwgVm9pY2VQcm9maWxlVHlwZSB9IGZyb20gXCIuLi9zZGsvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBTZXJ2aWNlUmVjb2duaXplckJhc2UsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuaW1wb3J0IHsgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UgfSBmcm9tIFwiLi9TcGVlY2hDb25uZWN0aW9uTWVzc2FnZS5JbnRlcm5hbFwiO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgVm9pY2VTZXJ2aWNlUmVjb2duaXplciBleHRlbmRzIFNlcnZpY2VSZWNvZ25pemVyQmFzZSB7XG4gICAgY29uc3RydWN0b3IoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb1NvdXJjZSwgcmVjb2duaXplckNvbmZpZywgcmVjb2duaXplcikge1xuICAgICAgICBzdXBlcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvU291cmNlLCByZWNvZ25pemVyQ29uZmlnLCByZWNvZ25pemVyKTtcbiAgICAgICAgdGhpcy5wcml2RGVmZXJyYWxNYXAgPSBuZXcgRGVmZXJyYWxNYXAoKTtcbiAgICAgICAgdGhpcy5wcml2U3BlYWtlckF1ZGlvU291cmNlID0gYXVkaW9Tb3VyY2U7XG4gICAgICAgIHRoaXMuc2VuZFByZVBheWxvYWRKU09OT3ZlcnJpZGUgPSAoKSA9PiB0aGlzLm5vT3AoKTtcbiAgICB9XG4gICAgc2V0IFNwZWFrZXJBdWRpb1NvdXJjZShhdWRpb1NvdXJjZSkge1xuICAgICAgICB0aGlzLnByaXZTcGVha2VyQXVkaW9Tb3VyY2UgPSBhdWRpb1NvdXJjZTtcbiAgICB9XG4gICAgcHJvY2Vzc1R5cGVTcGVjaWZpY01lc3NhZ2VzKGNvbm5lY3Rpb25NZXNzYWdlKSB7XG4gICAgICAgIGxldCBwcm9jZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgcmVzdWx0UHJvcHMgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgIGlmIChjb25uZWN0aW9uTWVzc2FnZS5tZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuVGV4dCkge1xuICAgICAgICAgICAgcmVzdWx0UHJvcHMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfSnNvblJlc3VsdCwgY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAoY29ubmVjdGlvbk1lc3NhZ2UucGF0aC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAvLyBQcm9maWxlIG1hbmFnZW1lbnQgcmVzcG9uc2UgZm9yIGNyZWF0ZSwgZmV0Y2gsIGRlbGV0ZSwgcmVzZXRcbiAgICAgICAgICAgIGNhc2UgXCJzcGVha2VyLnByb2ZpbGVzXCI6XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBKU09OLnBhcnNlKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlLm9wZXJhdGlvbi50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjcmVhdGVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ3JlYXRlUmVzcG9uc2UocmVzcG9uc2UsIGNvbm5lY3Rpb25NZXNzYWdlLnJlcXVlc3RJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRlbGV0ZVwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmVzZXRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmVzdWx0UmVzcG9uc2UocmVzcG9uc2UsIGNvbm5lY3Rpb25NZXNzYWdlLnJlcXVlc3RJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZldGNoXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnJvbGxtZW50UmVzcG9uc2UgPSBKU09OLnBhcnNlKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRmV0Y2hSZXNwb25zZShlbnJvbGxtZW50UmVzcG9uc2UsIGNvbm5lY3Rpb25NZXNzYWdlLnJlcXVlc3RJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcm9jZXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgLy8gQWN0aXZhdGlvbiBhbmQgYXV0aG9yaXphdGlvbiBwaHJhc2UgcmVzcG9uc2VcbiAgICAgICAgICAgIGNhc2UgXCJzcGVha2VyLnBocmFzZXNcIjpcbiAgICAgICAgICAgICAgICBjb25zdCBwaHJhc2VSZXNwb25zZSA9IEpTT04ucGFyc2UoY29ubmVjdGlvbk1lc3NhZ2UudGV4dEJvZHkpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUGhyYXNlc1Jlc3BvbnNlKHBocmFzZVJlc3BvbnNlLCBjb25uZWN0aW9uTWVzc2FnZS5yZXF1ZXN0SWQpO1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAvLyBFbnJvbGxtZW50IHJlc3BvbnNlXG4gICAgICAgICAgICBjYXNlIFwic3BlYWtlci5wcm9maWxlLmVucm9sbG1lbnRcIjpcbiAgICAgICAgICAgICAgICBjb25zdCBlbnJvbGxtZW50UmVzcG9uc2UgPSBKU09OLnBhcnNlKGNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVm9pY2VQcm9maWxlRW5yb2xsbWVudFJlc3VsdCh0aGlzLmVucm9sbG1lbnRSZWFzb25Gcm9tKCEhZW5yb2xsbWVudFJlc3BvbnNlLmVucm9sbG1lbnQgPyBlbnJvbGxtZW50UmVzcG9uc2UuZW5yb2xsbWVudC5lbnJvbGxtZW50U3RhdHVzIDogZW5yb2xsbWVudFJlc3BvbnNlLnN0YXR1cy5zdGF0dXNDb2RlKSwgISFlbnJvbGxtZW50UmVzcG9uc2UuZW5yb2xsbWVudCA/IEpTT04uc3RyaW5naWZ5KGVucm9sbG1lbnRSZXNwb25zZS5lbnJvbGxtZW50KSA6IHVuZGVmaW5lZCwgZW5yb2xsbWVudFJlc3BvbnNlLnN0YXR1cy5yZWFzb24pO1xuICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkRlZmVycmFsTWFwLmdldElkKGNvbm5lY3Rpb25NZXNzYWdlLnJlcXVlc3RJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2RGVmZXJyYWxNYXAuY29tcGxldGUoY29ubmVjdGlvbk1lc3NhZ2UucmVxdWVzdElkLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vblNwZWVjaEVuZGVkKCk7XG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmZmVyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgZGVmZmVyYWwucmVzb2x2ZShwcm9jZXNzZWQpO1xuICAgICAgICByZXR1cm4gZGVmZmVyYWwucHJvbWlzZTtcbiAgICB9XG4gICAgLy8gQ2FuY2VscyByZWNvZ25pdGlvbi5cbiAgICBjYW5jZWxSZWNvZ25pdGlvbihzZXNzaW9uSWQsIHJlcXVlc3RJZCwgY2FuY2VsbGF0aW9uUmVhc29uLCBlcnJvckNvZGUsIGVycm9yKSB7XG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgIC8vIGNvbnN0IGVucm9sbG1lbnRSZXNwb25zZTogRW5yb2xsbWVudFJlc3BvbnNlID0gSlNPTi5wYXJzZShjb25uZWN0aW9uTWVzc2FnZS50ZXh0Qm9keSkgYXMgRW5yb2xsbWVudFJlc3BvbnNlO1xuICAgICAgICBwcm9wZXJ0aWVzLnNldFByb3BlcnR5KENhbmNlbGxhdGlvbkVycm9yQ29kZVByb3BlcnR5TmFtZSwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW2Vycm9yQ29kZV0pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVm9pY2VQcm9maWxlRW5yb2xsbWVudFJlc3VsdChSZXN1bHRSZWFzb24uQ2FuY2VsZWQsIGVycm9yLCBlcnJvcik7XG4gICAgICAgIGlmICghIXRoaXMucHJpdkRlZmVycmFsTWFwLmdldElkKHJlcXVlc3RJZCkpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkRlZmVycmFsTWFwLmNvbXBsZXRlKHJlcXVlc3RJZCwgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVQcm9maWxlKHByb2ZpbGVUeXBlLCBsb2NhbGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIFN0YXJ0IHRoZSBjb25uZWN0aW9uIHRvIHRoZSBzZXJ2aWNlLiBUaGUgcHJvbWlzZSB0aGlzIHdpbGwgY3JlYXRlIGlzIHN0b3JlZCBhbmQgd2lsbCBiZSB1c2VkIGJ5IGNvbmZpZ3VyZUNvbm5lY3Rpb24oKS5cbiAgICAgICAgICAgIHRoaXMudm9pY2VQcm9maWxlVHlwZSA9IHByb2ZpbGVUeXBlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBjb25zdCBjb25Qcm9taXNlID0gdGhpcy5jb25uZWN0SW1wbCgpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjcmVhdGVQcm9maWxlRGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICB5aWVsZCBjb25Qcm9taXNlO1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuc2VuZENyZWF0ZVByb2ZpbGUoY3JlYXRlUHJvZmlsZURlZmVycmFsLCBwcm9maWxlVHlwZSwgbG9jYWxlKTtcbiAgICAgICAgICAgICAgICB2b2lkIHRoaXMucmVjZWl2ZU1lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlUHJvZmlsZURlZmVycmFsLnByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVzZXRQcm9maWxlKHByb2ZpbGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRoaXMudm9pY2VQcm9maWxlVHlwZSA9IHByb2ZpbGUucHJvZmlsZVR5cGUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbmRDb21tb25SZXF1ZXN0KFwicmVzZXRcIiwgcHJvZmlsZS5wcm9maWxlVHlwZSwgcHJvZmlsZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWxldGVQcm9maWxlKHByb2ZpbGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRoaXMudm9pY2VQcm9maWxlVHlwZSA9IHByb2ZpbGUucHJvZmlsZVR5cGUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbmRDb21tb25SZXF1ZXN0KFwiZGVsZXRlXCIsIHByb2ZpbGUucHJvZmlsZVR5cGUsIHByb2ZpbGUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0cmlldmVFbnJvbGxtZW50UmVzdWx0KHByb2ZpbGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRoaXMudm9pY2VQcm9maWxlVHlwZSA9IHByb2ZpbGUucHJvZmlsZVR5cGUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdkV4cGVjdGVkUHJvZmlsZUlkID0gcHJvZmlsZS5wcm9maWxlSWQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kQ29tbW9uUmVxdWVzdChcImZldGNoXCIsIHByb2ZpbGUucHJvZmlsZVR5cGUsIHByb2ZpbGUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0QWxsUHJvZmlsZXMocHJvZmlsZVR5cGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRoaXMudm9pY2VQcm9maWxlVHlwZSA9IHByb2ZpbGVUeXBlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kQ29tbW9uUmVxdWVzdChcImZldGNoXCIsIHByb2ZpbGVUeXBlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldEFjdGl2YXRpb25QaHJhc2VzKHByb2ZpbGVUeXBlLCBsYW5nKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0aGlzLnZvaWNlUHJvZmlsZVR5cGUgPSBwcm9maWxlVHlwZS50b1N0cmluZygpO1xuICAgICAgICAgICAgLy8gU3RhcnQgdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHNlcnZpY2UuIFRoZSBwcm9taXNlIHRoaXMgd2lsbCBjcmVhdGUgaXMgc3RvcmVkIGFuZCB3aWxsIGJlIHVzZWQgYnkgY29uZmlndXJlQ29ubmVjdGlvbigpLlxuICAgICAgICAgICAgY29uc3QgY29uUHJvbWlzZSA9IHRoaXMuY29ubmVjdEltcGwoKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ2V0UGhyYXNlc0RlZmVycmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgeWllbGQgY29uUHJvbWlzZTtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnNlbmRQaHJhc2VzUmVxdWVzdChnZXRQaHJhc2VzRGVmZXJyYWwsIHByb2ZpbGVUeXBlLCBsYW5nKTtcbiAgICAgICAgICAgICAgICB2b2lkIHRoaXMucmVjZWl2ZU1lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0UGhyYXNlc0RlZmVycmFsLnByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW5yb2xsUHJvZmlsZShwcm9maWxlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0aGlzLnZvaWNlUHJvZmlsZVR5cGUgPSBwcm9maWxlLnByb2ZpbGVUeXBlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBjb25zdCBlbnJvbGxtZW50RGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnN0YXJ0TmV3UmVjb2duaXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmxpc3RlbkZvclNlcnZpY2VUZWxlbWV0cnkodGhpcy5wcml2U3BlYWtlckF1ZGlvU291cmNlLmV2ZW50cyk7XG4gICAgICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyQ29uZmlnLnBhcmFtZXRlcnMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hfU2Vzc2lvbklkLCB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgLy8gU3RhcnQgdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHNlcnZpY2UuIFRoZSBwcm9taXNlIHRoaXMgd2lsbCBjcmVhdGUgaXMgc3RvcmVkIGFuZCB3aWxsIGJlIHVzZWQgYnkgY29uZmlndXJlQ29ubmVjdGlvbigpLlxuICAgICAgICAgICAgY29uc3QgY29uUHJvbWlzZSA9IHRoaXMuY29ubmVjdEltcGwoKTtcbiAgICAgICAgICAgIGNvbnN0IHByZUF1ZGlvUHJvbWlzZSA9IHRoaXMuc2VuZFByZUF1ZGlvTWVzc2FnZXMocHJvZmlsZSwgZW5yb2xsbWVudERlZmVycmFsKTtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSB5aWVsZCB0aGlzLnByaXZTcGVha2VyQXVkaW9Tb3VyY2UuYXR0YWNoKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLmF1ZGlvTm9kZUlkKTtcbiAgICAgICAgICAgIGNvbnN0IGZvcm1hdCA9IHlpZWxkIHRoaXMucHJpdlNwZWFrZXJBdWRpb1NvdXJjZS5mb3JtYXQ7XG4gICAgICAgICAgICBjb25zdCBkZXZpY2VJbmZvID0geWllbGQgdGhpcy5wcml2U3BlYWtlckF1ZGlvU291cmNlLmRldmljZUluZm87XG4gICAgICAgICAgICBjb25zdCBhdWRpb05vZGUgPSBuZXcgUmVwbGF5YWJsZUF1ZGlvTm9kZShub2RlLCBmb3JtYXQuYXZnQnl0ZXNQZXJTZWMpO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25BdWRpb1NvdXJjZUF0dGFjaENvbXBsZXRlZChhdWRpb05vZGUsIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXJDb25maWcuU3BlZWNoU2VydmljZUNvbmZpZy5Db250ZXh0LmF1ZGlvID0geyBzb3VyY2U6IGRldmljZUluZm8gfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgeWllbGQgY29uUHJvbWlzZTtcbiAgICAgICAgICAgICAgICB5aWVsZCBwcmVBdWRpb1Byb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxSZWNvZ25pdGlvbih0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBDYW5jZWxsYXRpb25FcnJvckNvZGUuQ29ubmVjdGlvbkZhaWx1cmUsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uU3RhcnRFdmVudEFyZ3MgPSBuZXcgU2Vzc2lvbkV2ZW50QXJncyh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQpO1xuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2UmVjb2duaXplci5zZXNzaW9uU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXIuc2Vzc2lvblN0YXJ0ZWQodGhpcy5wcml2UmVjb2duaXplciwgc2Vzc2lvblN0YXJ0RXZlbnRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZvaWQgdGhpcy5yZWNlaXZlTWVzc2FnZSgpO1xuICAgICAgICAgICAgY29uc3QgYXVkaW9TZW5kUHJvbWlzZSA9IHRoaXMuc2VuZEF1ZGlvKGF1ZGlvTm9kZSk7XG4gICAgICAgICAgICAvLyAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgICAgICAgICAgYXVkaW9TZW5kUHJvbWlzZS50aGVuKCgpID0+IHsgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxSZWNvZ25pdGlvbih0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5zZXNzaW9uSWQsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBDYW5jZWxsYXRpb25FcnJvckNvZGUuUnVudGltZUVycm9yLCBlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBlbnJvbGxtZW50RGVmZXJyYWwucHJvbWlzZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNlbmRQcmVBdWRpb01lc3NhZ2VzKHByb2ZpbGUsIGVucm9sbG1lbnREZWZlcnJhbCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHlpZWxkIHRoaXMuZmV0Y2hDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vblNwZWVjaENvbnRleHQoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdkRlZmVycmFsTWFwLmFkZCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIGVucm9sbG1lbnREZWZlcnJhbCk7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnNlbmRCYXNlUmVxdWVzdChjb25uZWN0aW9uLCBcImVucm9sbFwiLCB0aGlzLnNjZW5hcmlvRnJvbShwcm9maWxlLnByb2ZpbGVUeXBlKSwgcHJvZmlsZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kUGhyYXNlc1JlcXVlc3QoZ2V0UGhyYXNlc0RlZmVycmFsLCBwcm9maWxlVHlwZSwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uID0geWllbGQgdGhpcy5mZXRjaENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLm9uU3BlZWNoQ29udGV4dCgpO1xuICAgICAgICAgICAgdGhpcy5wcml2RGVmZXJyYWxNYXAuYWRkKHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgZ2V0UGhyYXNlc0RlZmVycmFsKTtcbiAgICAgICAgICAgIGNvbnN0IHNjZW5hcmlvID0gdGhpcy5zY2VuYXJpb0Zyb20ocHJvZmlsZVR5cGUpO1xuICAgICAgICAgICAgY29uc3QgcHJvZmlsZUNyZWF0ZVJlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgbG9jYWxlLFxuICAgICAgICAgICAgICAgIHNjZW5hcmlvLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uLnNlbmQobmV3IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlKE1lc3NhZ2VUeXBlLlRleHQsIFwic3BlYWtlci5wcm9maWxlLnBocmFzZXNcIiwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIiwgSlNPTi5zdHJpbmdpZnkocHJvZmlsZUNyZWF0ZVJlcXVlc3QpKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kQ3JlYXRlUHJvZmlsZShjcmVhdGVQcm9maWxlRGVmZXJyYWwsIHByb2ZpbGVUeXBlLCBsb2NhbGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ub25TcGVlY2hDb250ZXh0KCk7XG4gICAgICAgICAgICB0aGlzLnByaXZEZWZlcnJhbE1hcC5hZGQodGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBjcmVhdGVQcm9maWxlRGVmZXJyYWwpO1xuICAgICAgICAgICAgY29uc3Qgc2NlbmFyaW8gPSBwcm9maWxlVHlwZSA9PT0gVm9pY2VQcm9maWxlVHlwZS5UZXh0SW5kZXBlbmRlbnRJZGVudGlmaWNhdGlvbiA/IFwiVGV4dEluZGVwZW5kZW50SWRlbnRpZmljYXRpb25cIiA6XG4gICAgICAgICAgICAgICAgcHJvZmlsZVR5cGUgPT09IFZvaWNlUHJvZmlsZVR5cGUuVGV4dEluZGVwZW5kZW50VmVyaWZpY2F0aW9uID8gXCJUZXh0SW5kZXBlbmRlbnRWZXJpZmljYXRpb25cIiA6IFwiVGV4dERlcGVuZGVudFZlcmlmaWNhdGlvblwiO1xuICAgICAgICAgICAgY29uc3QgcHJvZmlsZUNyZWF0ZVJlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgbG9jYWxlLFxuICAgICAgICAgICAgICAgIG51bWJlcjogXCIxXCIsXG4gICAgICAgICAgICAgICAgc2NlbmFyaW8sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24uc2VuZChuZXcgU3BlZWNoQ29ubmVjdGlvbk1lc3NhZ2UoTWVzc2FnZVR5cGUuVGV4dCwgXCJzcGVha2VyLnByb2ZpbGUuY3JlYXRlXCIsIHRoaXMucHJpdlJlcXVlc3RTZXNzaW9uLnJlcXVlc3RJZCwgXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIsIEpTT04uc3RyaW5naWZ5KHByb2ZpbGVDcmVhdGVSZXF1ZXN0KSkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2VuZENvbW1vblJlcXVlc3Qob3BlcmF0aW9uLCBwcm9maWxlVHlwZSwgcHJvZmlsZSA9IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gU3RhcnQgdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHNlcnZpY2UuIFRoZSBwcm9taXNlIHRoaXMgd2lsbCBjcmVhdGUgaXMgc3RvcmVkIGFuZCB3aWxsIGJlIHVzZWQgYnkgY29uZmlndXJlQ29ubmVjdGlvbigpLlxuICAgICAgICAgICAgY29uc3QgY29uUHJvbWlzZSA9IHRoaXMuY29ubmVjdEltcGwoKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5vblNwZWVjaENvbnRleHQoKTtcbiAgICAgICAgICAgICAgICB5aWVsZCBjb25Qcm9taXNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSB5aWVsZCB0aGlzLmZldGNoQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkRlZmVycmFsTWFwLmFkZCh0aGlzLnByaXZSZXF1ZXN0U2Vzc2lvbi5yZXF1ZXN0SWQsIGRlZmVycmFsKTtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnNlbmRCYXNlUmVxdWVzdChjb25uZWN0aW9uLCBvcGVyYXRpb24sIHRoaXMuc2NlbmFyaW9Gcm9tKHByb2ZpbGVUeXBlKSwgcHJvZmlsZSk7XG4gICAgICAgICAgICAgICAgdm9pZCB0aGlzLnJlY2VpdmVNZXNzYWdlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmFsLnByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2VuZEJhc2VSZXF1ZXN0KGNvbm5lY3Rpb24sIG9wZXJhdGlvbiwgc2NlbmFyaW8sIHByb2ZpbGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb2ZpbGVSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgICAgIHNjZW5hcmlvXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCEhcHJvZmlsZSkge1xuICAgICAgICAgICAgICAgIHByb2ZpbGVSZXF1ZXN0LnByb2ZpbGVJZHMgPSBbcHJvZmlsZS5wcm9maWxlSWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJvZmlsZVJlcXVlc3QubWF4UGFnZVNpemUgPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uLnNlbmQobmV3IFNwZWVjaENvbm5lY3Rpb25NZXNzYWdlKE1lc3NhZ2VUeXBlLlRleHQsIGBzcGVha2VyLnByb2ZpbGUuJHtvcGVyYXRpb259YCwgdGhpcy5wcml2UmVxdWVzdFNlc3Npb24ucmVxdWVzdElkLCBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIiwgSlNPTi5zdHJpbmdpZnkocHJvZmlsZVJlcXVlc3QpKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBleHRyYWN0U3BlYWtlckNvbnRleHQobW9kZWwpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZlYXR1cmVzOiB7XG4gICAgICAgICAgICAgICAgaW50ZXJpbVJlc3VsdDogXCJlbmFibGVkXCIsXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NpdmVEZXRlY3Rpb246IFwiZGlzYWJsZWRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm9maWxlSWRzOiBtb2RlbC5wcm9maWxlSWRzLFxuICAgICAgICAgICAgc2NlbmFyaW86IG1vZGVsLnNjZW5hcmlvLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBoYW5kbGVQaHJhc2VzUmVzcG9uc2UocmVzcG9uc2UsIHJlcXVlc3RJZCkge1xuICAgICAgICBpZiAoISF0aGlzLnByaXZEZWZlcnJhbE1hcC5nZXRJZChyZXF1ZXN0SWQpKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzLnN0YXR1c0NvZGUudG9Mb3dlckNhc2UoKSAhPT0gXCJzdWNjZXNzXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFzb24gPSBSZXN1bHRSZWFzb24uQ2FuY2VsZWQ7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFZvaWNlUHJvZmlsZVBocmFzZVJlc3VsdChyZWFzb24sIHJlc3BvbnNlLnN0YXR1cy5zdGF0dXNDb2RlLCByZXNwb25zZS5wYXNzUGhyYXNlVHlwZSwgW10pO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkRlZmVycmFsTWFwLmNvbXBsZXRlKHJlcXVlc3RJZCwgcmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCEhcmVzcG9uc2UucGhyYXNlcyAmJiByZXNwb25zZS5waHJhc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFzb24gPSBSZXN1bHRSZWFzb24uRW5yb2xsaW5nVm9pY2VQcm9maWxlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBWb2ljZVByb2ZpbGVQaHJhc2VSZXN1bHQocmVhc29uLCByZXNwb25zZS5zdGF0dXMuc3RhdHVzQ29kZSwgcmVzcG9uc2UucGFzc1BocmFzZVR5cGUsIHJlc3BvbnNlLnBocmFzZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkRlZmVycmFsTWFwLmNvbXBsZXRlKHJlcXVlc3RJZCwgcmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZvaWNlIFByb2ZpbGUgZ2V0IGFjdGl2YXRpb24gcGhyYXNlcyBmYWlsZWQsIG5vIHBocmFzZXMgcmVjZWl2ZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZvaWNlIFByb2ZpbGUgZ2V0IGFjdGl2YXRpb24gcGhyYXNlcyByZXF1ZXN0IGZvciByZXF1ZXN0SUQgJHtyZXF1ZXN0SWR9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUNyZWF0ZVJlc3BvbnNlKHJlc3BvbnNlLCByZXF1ZXN0SWQpIHtcbiAgICAgICAgaWYgKCEhcmVzcG9uc2UucHJvZmlsZXMgJiYgcmVzcG9uc2UucHJvZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2RGVmZXJyYWxNYXAuZ2V0SWQocmVxdWVzdElkKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb2ZpbGVJZHMgPSByZXNwb25zZS5wcm9maWxlcy5tYXAoKHByb2ZpbGUpID0+IHByb2ZpbGUucHJvZmlsZUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZEZWZlcnJhbE1hcC5jb21wbGV0ZShyZXF1ZXN0SWQsIHByb2ZpbGVJZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBWb2ljZSBQcm9maWxlIGNyZWF0ZSByZXF1ZXN0IGZvciByZXF1ZXN0SUQgJHtyZXF1ZXN0SWR9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVm9pY2UgUHJvZmlsZSBjcmVhdGUgZmFpbGVkLCBubyBwcm9maWxlIGlkIHJlY2VpdmVkXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZVJlc3VsdFJlc3BvbnNlKHJlc3BvbnNlLCByZXF1ZXN0SWQpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2RGVmZXJyYWxNYXAuZ2V0SWQocmVxdWVzdElkKSkge1xuICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc1JlYXNvbiA9IHJlc3BvbnNlLm9wZXJhdGlvbi50b0xvd2VyQ2FzZSgpID09PSBcImRlbGV0ZVwiID8gUmVzdWx0UmVhc29uLkRlbGV0ZWRWb2ljZVByb2ZpbGUgOiBSZXN1bHRSZWFzb24uUmVzZXRWb2ljZVByb2ZpbGU7XG4gICAgICAgICAgICBjb25zdCByZWFzb24gPSByZXNwb25zZS5zdGF0dXMuc3RhdHVzQ29kZS50b0xvd2VyQ2FzZSgpID09PSBcInN1Y2Nlc3NcIiA/IHN1Y2Nlc3NSZWFzb24gOiBSZXN1bHRSZWFzb24uQ2FuY2VsZWQ7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVm9pY2VQcm9maWxlUmVzdWx0KHJlYXNvbiwgYHN0YXR1c0NvZGU6ICR7cmVzcG9uc2Uuc3RhdHVzLnN0YXR1c0NvZGV9LCBlcnJvckRldGFpbHM6ICR7cmVzcG9uc2Uuc3RhdHVzLnJlYXNvbn1gKTtcbiAgICAgICAgICAgIHRoaXMucHJpdkRlZmVycmFsTWFwLmNvbXBsZXRlKHJlcXVlc3RJZCwgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVm9pY2UgUHJvZmlsZSBjcmVhdGUgcmVxdWVzdCBmb3IgcmVxdWVzdElEICR7cmVxdWVzdElkfSBub3QgZm91bmRgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVGZXRjaFJlc3BvbnNlKGVucm9sbG1lbnRSZXNwb25zZSwgcmVxdWVzdElkKSB7XG4gICAgICAgIGlmICghIXRoaXMucHJpdkRlZmVycmFsTWFwLmdldElkKHJlcXVlc3RJZCkgJiYgISFlbnJvbGxtZW50UmVzcG9uc2UucHJvZmlsZXNbMF0pIHtcbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkV4cGVjdGVkUHJvZmlsZUlkICYmIGVucm9sbG1lbnRSZXNwb25zZS5wcm9maWxlcy5sZW5ndGggPT09IDEgJiYgZW5yb2xsbWVudFJlc3BvbnNlLnByb2ZpbGVzWzBdLnByb2ZpbGVJZCA9PT0gdGhpcy5wcml2RXhwZWN0ZWRQcm9maWxlSWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZFeHBlY3RlZFByb2ZpbGVJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9maWxlSW5mbyA9IGVucm9sbG1lbnRSZXNwb25zZS5wcm9maWxlc1swXTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVm9pY2VQcm9maWxlRW5yb2xsbWVudFJlc3VsdCh0aGlzLmVucm9sbG1lbnRSZWFzb25Gcm9tKHByb2ZpbGVJbmZvLmVucm9sbG1lbnRTdGF0dXMpLCBKU09OLnN0cmluZ2lmeShwcm9maWxlSW5mbyksIGVucm9sbG1lbnRSZXNwb25zZS5zdGF0dXMucmVhc29uKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZEZWZlcnJhbE1hcC5jb21wbGV0ZShyZXF1ZXN0SWQsIHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbnJvbGxtZW50UmVzcG9uc2UucHJvZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlQcm9maWxlcyA9IGVucm9sbG1lbnRSZXNwb25zZS5wcm9maWxlcztcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9maWxlUmVzdWx0cyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcHJvZmlsZSBvZiBpUHJvZmlsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvZmlsZVJlc3VsdHMucHVzaChuZXcgVm9pY2VQcm9maWxlRW5yb2xsbWVudFJlc3VsdCh0aGlzLmVucm9sbG1lbnRSZWFzb25Gcm9tKHByb2ZpbGUuZW5yb2xsbWVudFN0YXR1cyksIEpTT04uc3RyaW5naWZ5KHByb2ZpbGUpLCBlbnJvbGxtZW50UmVzcG9uc2Uuc3RhdHVzLnJlYXNvbikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZEZWZlcnJhbE1hcC5jb21wbGV0ZShyZXF1ZXN0SWQsIHByb2ZpbGVSZXN1bHRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVm9pY2UgUHJvZmlsZSBmZXRjaCByZXF1ZXN0IGZvciByZXF1ZXN0SUQgJHtyZXF1ZXN0SWR9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVucm9sbG1lbnRSZWFzb25Gcm9tKHN0YXR1c0NvZGUpIHtcbiAgICAgICAgc3dpdGNoIChzdGF0dXNDb2RlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIGNhc2UgXCJlbnJvbGxlZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBSZXN1bHRSZWFzb24uRW5yb2xsZWRWb2ljZVByb2ZpbGU7XG4gICAgICAgICAgICBjYXNlIFwiaW52YWxpZGxvY2FsZVwiOlxuICAgICAgICAgICAgY2FzZSBcImludmFsaWRwaHJhc2VcIjpcbiAgICAgICAgICAgIGNhc2UgXCJpbnZhbGlkYXVkaW9mb3JtYXRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJpbnZhbGlkc2NlbmFyaW9cIjpcbiAgICAgICAgICAgIGNhc2UgXCJpbnZhbGlkcHJvZmlsZWNvdW50XCI6XG4gICAgICAgICAgICBjYXNlIFwiaW52YWxpZG9wZXJhdGlvblwiOlxuICAgICAgICAgICAgY2FzZSBcImF1ZGlvdG9vc2hvcnRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJhdWRpb3Rvb2xvbmdcIjpcbiAgICAgICAgICAgIGNhc2UgXCJ0b29tYW55ZW5yb2xsbWVudHNcIjpcbiAgICAgICAgICAgIGNhc2UgXCJzdG9yYWdlY29uZmxpY3RcIjpcbiAgICAgICAgICAgIGNhc2UgXCJwcm9maWxlbm90Zm91bmRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJpbmNvbXBhdGlibGVwcm9maWxlc1wiOlxuICAgICAgICAgICAgY2FzZSBcImluY29tcGxldGVlbnJvbGxtZW50XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlc3VsdFJlYXNvbi5DYW5jZWxlZDtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlc3VsdFJlYXNvbi5FbnJvbGxpbmdWb2ljZVByb2ZpbGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2NlbmFyaW9Gcm9tKHByb2ZpbGVUeXBlKSB7XG4gICAgICAgIHJldHVybiBwcm9maWxlVHlwZSA9PT0gVm9pY2VQcm9maWxlVHlwZS5UZXh0SW5kZXBlbmRlbnRJZGVudGlmaWNhdGlvbiA/IFwiVGV4dEluZGVwZW5kZW50SWRlbnRpZmljYXRpb25cIiA6XG4gICAgICAgICAgICBwcm9maWxlVHlwZSA9PT0gVm9pY2VQcm9maWxlVHlwZS5UZXh0SW5kZXBlbmRlbnRWZXJpZmljYXRpb24gPyBcIlRleHRJbmRlcGVuZGVudFZlcmlmaWNhdGlvblwiIDogXCJUZXh0RGVwZW5kZW50VmVyaWZpY2F0aW9uXCI7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Wb2ljZVNlcnZpY2VSZWNvZ25pemVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBDb25uZWN0aW9uTWVzc2FnZSwgRGVmZXJyZWQsIE1lc3NhZ2VUeXBlLCBSYXdXZWJzb2NrZXRNZXNzYWdlLCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuY29uc3QgQ1JMRiA9IFwiXFxyXFxuXCI7XG5leHBvcnQgY2xhc3MgV2Vic29ja2V0TWVzc2FnZUZvcm1hdHRlciB7XG4gICAgdG9Db25uZWN0aW9uTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGRlZmVycmFsID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuVGV4dCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRleHRNZXNzYWdlID0gbWVzc2FnZS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICBsZXQgaGVhZGVycyA9IHt9O1xuICAgICAgICAgICAgICAgIGxldCBib2R5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAodGV4dE1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyQm9keVNwbGl0ID0gdGV4dE1lc3NhZ2Uuc3BsaXQoXCJcXHJcXG5cXHJcXG5cIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXJCb2R5U3BsaXQgJiYgaGVhZGVyQm9keVNwbGl0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSB0aGlzLnBhcnNlSGVhZGVycyhoZWFkZXJCb2R5U3BsaXRbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlckJvZHlTcGxpdC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keSA9IGhlYWRlckJvZHlTcGxpdFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZlcnJhbC5yZXNvbHZlKG5ldyBDb25uZWN0aW9uTWVzc2FnZShtZXNzYWdlLm1lc3NhZ2VUeXBlLCBib2R5LCBoZWFkZXJzLCBtZXNzYWdlLmlkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5CaW5hcnkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiaW5hcnlNZXNzYWdlID0gbWVzc2FnZS5iaW5hcnlDb250ZW50O1xuICAgICAgICAgICAgICAgIGxldCBoZWFkZXJzID0ge307XG4gICAgICAgICAgICAgICAgbGV0IGJvZHkgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmICghYmluYXJ5TWVzc2FnZSB8fCBiaW5hcnlNZXNzYWdlLmJ5dGVMZW5ndGggPCAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYmluYXJ5IG1lc3NhZ2UgZm9ybWF0LiBIZWFkZXIgbGVuZ3RoIG1pc3NpbmcuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhiaW5hcnlNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJMZW5ndGggPSBkYXRhVmlldy5nZXRJbnQxNigwKTtcbiAgICAgICAgICAgICAgICBpZiAoYmluYXJ5TWVzc2FnZS5ieXRlTGVuZ3RoIDwgaGVhZGVyTGVuZ3RoICsgMikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGJpbmFyeSBtZXNzYWdlIGZvcm1hdC4gSGVhZGVyIGNvbnRlbnQgbWlzc2luZy5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBoZWFkZXJzU3RyaW5nID0gXCJcIjtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlYWRlckxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnNTdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoZGF0YVZpZXcpLmdldEludDgoaSArIDIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaGVhZGVycyA9IHRoaXMucGFyc2VIZWFkZXJzKGhlYWRlcnNTdHJpbmcpO1xuICAgICAgICAgICAgICAgIGlmIChiaW5hcnlNZXNzYWdlLmJ5dGVMZW5ndGggPiBoZWFkZXJMZW5ndGggKyAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGJvZHkgPSBiaW5hcnlNZXNzYWdlLnNsaWNlKDIgKyBoZWFkZXJMZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZlcnJhbC5yZXNvbHZlKG5ldyBDb25uZWN0aW9uTWVzc2FnZShtZXNzYWdlLm1lc3NhZ2VUeXBlLCBib2R5LCBoZWFkZXJzLCBtZXNzYWdlLmlkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGRlZmVycmFsLnJlamVjdChgRXJyb3IgZm9ybWF0dGluZyB0aGUgbWVzc2FnZS4gRXJyb3I6ICR7ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmZXJyYWwucHJvbWlzZTtcbiAgICB9XG4gICAgZnJvbUNvbm5lY3Rpb25NZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZGVmZXJyYWwgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5UZXh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IGAke3RoaXMubWFrZUhlYWRlcnMobWVzc2FnZSl9JHtDUkxGfSR7bWVzc2FnZS50ZXh0Qm9keSA/IG1lc3NhZ2UudGV4dEJvZHkgOiBcIlwifWA7XG4gICAgICAgICAgICAgICAgZGVmZXJyYWwucmVzb2x2ZShuZXcgUmF3V2Vic29ja2V0TWVzc2FnZShNZXNzYWdlVHlwZS5UZXh0LCBwYXlsb2FkLCBtZXNzYWdlLmlkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5CaW5hcnkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzU3RyaW5nID0gdGhpcy5tYWtlSGVhZGVycyhtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gbWVzc2FnZS5iaW5hcnlCb2R5O1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckJ1ZmZlciA9IHRoaXMuc3RyaW5nVG9BcnJheUJ1ZmZlcihoZWFkZXJzU3RyaW5nKTtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJJbnQ4QXJyYXkgPSBuZXcgSW50OEFycmF5KGhlYWRlckJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyTGVuZ3RoID0gaGVhZGVySW50OEFycmF5LmJ5dGVMZW5ndGg7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF5bG9hZEludDhBcnJheSA9IG5ldyBJbnQ4QXJyYXkoMiArIGhlYWRlckxlbmd0aCArIChjb250ZW50ID8gY29udGVudC5ieXRlTGVuZ3RoIDogMCkpO1xuICAgICAgICAgICAgICAgIHBheWxvYWRJbnQ4QXJyYXlbMF0gPSAoKGhlYWRlckxlbmd0aCA+PiA4KSAmIDB4ZmYpO1xuICAgICAgICAgICAgICAgIHBheWxvYWRJbnQ4QXJyYXlbMV0gPSBoZWFkZXJMZW5ndGggJiAweGZmO1xuICAgICAgICAgICAgICAgIHBheWxvYWRJbnQ4QXJyYXkuc2V0KGhlYWRlckludDhBcnJheSwgMik7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYm9keUludDhBcnJheSA9IG5ldyBJbnQ4QXJyYXkoY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWRJbnQ4QXJyYXkuc2V0KGJvZHlJbnQ4QXJyYXksIDIgKyBoZWFkZXJMZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gcGF5bG9hZEludDhBcnJheS5idWZmZXI7XG4gICAgICAgICAgICAgICAgZGVmZXJyYWwucmVzb2x2ZShuZXcgUmF3V2Vic29ja2V0TWVzc2FnZShNZXNzYWdlVHlwZS5CaW5hcnksIHBheWxvYWQsIG1lc3NhZ2UuaWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZGVmZXJyYWwucmVqZWN0KGBFcnJvciBmb3JtYXR0aW5nIHRoZSBtZXNzYWdlLiAke2V9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZmVycmFsLnByb21pc2U7XG4gICAgfVxuICAgIG1ha2VIZWFkZXJzKG1lc3NhZ2UpIHtcbiAgICAgICAgbGV0IGhlYWRlcnNTdHJpbmcgPSBcIlwiO1xuICAgICAgICBpZiAobWVzc2FnZS5oZWFkZXJzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGhlYWRlciBpbiBtZXNzYWdlLmhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnNTdHJpbmcgKz0gYCR7aGVhZGVyfTogJHttZXNzYWdlLmhlYWRlcnNbaGVhZGVyXX0ke0NSTEZ9YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhlYWRlcnNTdHJpbmc7XG4gICAgfVxuICAgIHBhcnNlSGVhZGVycyhoZWFkZXJzU3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7fTtcbiAgICAgICAgaWYgKGhlYWRlcnNTdHJpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlck1hdGNoZXMgPSBoZWFkZXJzU3RyaW5nLm1hdGNoKC9bXlxcclxcbl0rL2cpO1xuICAgICAgICAgICAgaWYgKGhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGhlYWRlciBvZiBoZWFkZXJNYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlcGFyYXRvckluZGV4ID0gaGVhZGVyLmluZGV4T2YoXCI6XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyTmFtZSA9IHNlcGFyYXRvckluZGV4ID4gMCA/IGhlYWRlci5zdWJzdHIoMCwgc2VwYXJhdG9ySW5kZXgpLnRyaW0oKS50b0xvd2VyQ2FzZSgpIDogaGVhZGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyVmFsdWUgPSBzZXBhcmF0b3JJbmRleCA+IDAgJiYgaGVhZGVyLmxlbmd0aCA+IChzZXBhcmF0b3JJbmRleCArIDEpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIuc3Vic3RyKHNlcGFyYXRvckluZGV4ICsgMSkudHJpbSgpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1toZWFkZXJOYW1lXSA9IGhlYWRlclZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoZWFkZXJzO1xuICAgIH1cbiAgICBzdHJpbmdUb0FycmF5QnVmZmVyKHN0cikge1xuICAgICAgICBjb25zdCBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoc3RyLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IHZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZpZXcuc2V0VWludDgoaSwgc3RyLmNoYXJDb2RlQXQoaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWZmZXI7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1XZWJzb2NrZXRNZXNzYWdlRm9ybWF0dGVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtY2xhc3Nlcy1wZXItZmlsZSAqL1xuaW1wb3J0IHsgRXZlbnRUeXBlLCBQbGF0Zm9ybUV2ZW50IH0gZnJvbSBcIi4vUGxhdGZvcm1FdmVudFwiO1xuZXhwb3J0IGNsYXNzIEF1ZGlvU291cmNlRXZlbnQgZXh0ZW5kcyBQbGF0Zm9ybUV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihldmVudE5hbWUsIGF1ZGlvU291cmNlSWQsIGV2ZW50VHlwZSA9IEV2ZW50VHlwZS5JbmZvKSB7XG4gICAgICAgIHN1cGVyKGV2ZW50TmFtZSwgZXZlbnRUeXBlKTtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Tb3VyY2VJZCA9IGF1ZGlvU291cmNlSWQ7XG4gICAgfVxuICAgIGdldCBhdWRpb1NvdXJjZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Tb3VyY2VJZDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQXVkaW9Tb3VyY2VJbml0aWFsaXppbmdFdmVudCBleHRlbmRzIEF1ZGlvU291cmNlRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvU291cmNlSWQpIHtcbiAgICAgICAgc3VwZXIoXCJBdWRpb1NvdXJjZUluaXRpYWxpemluZ0V2ZW50XCIsIGF1ZGlvU291cmNlSWQpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBdWRpb1NvdXJjZVJlYWR5RXZlbnQgZXh0ZW5kcyBBdWRpb1NvdXJjZUV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihhdWRpb1NvdXJjZUlkKSB7XG4gICAgICAgIHN1cGVyKFwiQXVkaW9Tb3VyY2VSZWFkeUV2ZW50XCIsIGF1ZGlvU291cmNlSWQpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBdWRpb1NvdXJjZU9mZkV2ZW50IGV4dGVuZHMgQXVkaW9Tb3VyY2VFdmVudCB7XG4gICAgY29uc3RydWN0b3IoYXVkaW9Tb3VyY2VJZCkge1xuICAgICAgICBzdXBlcihcIkF1ZGlvU291cmNlT2ZmRXZlbnRcIiwgYXVkaW9Tb3VyY2VJZCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEF1ZGlvU291cmNlRXJyb3JFdmVudCBleHRlbmRzIEF1ZGlvU291cmNlRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvU291cmNlSWQsIGVycm9yKSB7XG4gICAgICAgIHN1cGVyKFwiQXVkaW9Tb3VyY2VFcnJvckV2ZW50XCIsIGF1ZGlvU291cmNlSWQsIEV2ZW50VHlwZS5FcnJvcik7XG4gICAgICAgIHRoaXMucHJpdkVycm9yID0gZXJyb3I7XG4gICAgfVxuICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkVycm9yO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBdWRpb1N0cmVhbU5vZGVFdmVudCBleHRlbmRzIEF1ZGlvU291cmNlRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGV2ZW50TmFtZSwgYXVkaW9Tb3VyY2VJZCwgYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgc3VwZXIoZXZlbnROYW1lLCBhdWRpb1NvdXJjZUlkKTtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Ob2RlSWQgPSBhdWRpb05vZGVJZDtcbiAgICB9XG4gICAgZ2V0IGF1ZGlvTm9kZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9Ob2RlSWQ7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGluZ0V2ZW50IGV4dGVuZHMgQXVkaW9TdHJlYW1Ob2RlRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHN1cGVyKFwiQXVkaW9TdHJlYW1Ob2RlQXR0YWNoaW5nRXZlbnRcIiwgYXVkaW9Tb3VyY2VJZCwgYXVkaW9Ob2RlSWQpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBdWRpb1N0cmVhbU5vZGVBdHRhY2hlZEV2ZW50IGV4dGVuZHMgQXVkaW9TdHJlYW1Ob2RlRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHN1cGVyKFwiQXVkaW9TdHJlYW1Ob2RlQXR0YWNoZWRFdmVudFwiLCBhdWRpb1NvdXJjZUlkLCBhdWRpb05vZGVJZCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEF1ZGlvU3RyZWFtTm9kZURldGFjaGVkRXZlbnQgZXh0ZW5kcyBBdWRpb1N0cmVhbU5vZGVFdmVudCB7XG4gICAgY29uc3RydWN0b3IoYXVkaW9Tb3VyY2VJZCwgYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgc3VwZXIoXCJBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50XCIsIGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQXVkaW9TdHJlYW1Ob2RlRXJyb3JFdmVudCBleHRlbmRzIEF1ZGlvU3RyZWFtTm9kZUV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihhdWRpb1NvdXJjZUlkLCBhdWRpb05vZGVJZCwgZXJyb3IpIHtcbiAgICAgICAgc3VwZXIoXCJBdWRpb1N0cmVhbU5vZGVFcnJvckV2ZW50XCIsIGF1ZGlvU291cmNlSWQsIGF1ZGlvTm9kZUlkKTtcbiAgICAgICAgdGhpcy5wcml2RXJyb3IgPSBlcnJvcjtcbiAgICB9XG4gICAgZ2V0IGVycm9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3I7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdWRpb1NvdXJjZUV2ZW50cy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgRXZlbnRUeXBlLCBQbGF0Zm9ybUV2ZW50IH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIEJhY2tncm91bmRFdmVudCBleHRlbmRzIFBsYXRmb3JtRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGVycm9yKSB7XG4gICAgICAgIHN1cGVyKFwiQmFja2dyb3VuZEV2ZW50XCIsIEV2ZW50VHlwZS5FcnJvcik7XG4gICAgICAgIHRoaXMucHJpdkVycm9yID0gZXJyb3I7XG4gICAgfVxuICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkVycm9yO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QmFja2dyb3VuZEVycm9yLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG5leHBvcnQgY2xhc3MgQ2h1bmtlZEFycmF5QnVmZmVyU3RyZWFtIGV4dGVuZHMgU3RyZWFtIHtcbiAgICBjb25zdHJ1Y3Rvcih0YXJnZXRDaHVua1NpemUsIHN0cmVhbUlkKSB7XG4gICAgICAgIHN1cGVyKHN0cmVhbUlkKTtcbiAgICAgICAgdGhpcy5wcml2VGFyZ2V0Q2h1bmtTaXplID0gdGFyZ2V0Q2h1bmtTaXplO1xuICAgICAgICB0aGlzLnByaXZOZXh0QnVmZmVyUmVhZHlCeXRlcyA9IDA7XG4gICAgfVxuICAgIHdyaXRlU3RyZWFtQ2h1bmsoY2h1bmspIHtcbiAgICAgICAgLy8gTm8gcGVuZGluZyB3cml0ZSwgYW5kIHRoZSBidWZmZXIgaXMgdGhlIHJpZ2h0IHNpemUgc28gd3JpdGUgaXQuXG4gICAgICAgIGlmIChjaHVuay5pc0VuZCB8fFxuICAgICAgICAgICAgKDAgPT09IHRoaXMucHJpdk5leHRCdWZmZXJSZWFkeUJ5dGVzICYmIGNodW5rLmJ1ZmZlci5ieXRlTGVuZ3RoID09PSB0aGlzLnByaXZUYXJnZXRDaHVua1NpemUpKSB7XG4gICAgICAgICAgICBzdXBlci53cml0ZVN0cmVhbUNodW5rKGNodW5rKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYnl0ZXNDb3BpZWRGcm9tQnVmZmVyID0gMDtcbiAgICAgICAgd2hpbGUgKGJ5dGVzQ29waWVkRnJvbUJ1ZmZlciA8IGNodW5rLmJ1ZmZlci5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBGaWxsIHRoZSBuZXh0IGJ1ZmZlci5cbiAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMucHJpdk5leHRCdWZmZXJUb1dyaXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TmV4dEJ1ZmZlclRvV3JpdGUgPSBuZXcgQXJyYXlCdWZmZXIodGhpcy5wcml2VGFyZ2V0Q2h1bmtTaXplKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZOZXh0QnVmZmVyU3RhcnRUaW1lID0gY2h1bmsudGltZVJlY2VpdmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRmluZCBvdXQgaG93IG1hbnkgYnl0ZXMgd2UgY2FuIGNvcHkgaW50byB0aGUgcmVhZCBidWZmZXIuXG4gICAgICAgICAgICBjb25zdCBieXRlc1RvQ29weSA9IE1hdGgubWluKGNodW5rLmJ1ZmZlci5ieXRlTGVuZ3RoIC0gYnl0ZXNDb3BpZWRGcm9tQnVmZmVyLCB0aGlzLnByaXZUYXJnZXRDaHVua1NpemUgLSB0aGlzLnByaXZOZXh0QnVmZmVyUmVhZHlCeXRlcyk7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5wcml2TmV4dEJ1ZmZlclRvV3JpdGUpO1xuICAgICAgICAgICAgY29uc3Qgc291cmNlVmlldyA9IG5ldyBVaW50OEFycmF5KGNodW5rLmJ1ZmZlci5zbGljZShieXRlc0NvcGllZEZyb21CdWZmZXIsIGJ5dGVzVG9Db3B5ICsgYnl0ZXNDb3BpZWRGcm9tQnVmZmVyKSk7XG4gICAgICAgICAgICB0YXJnZXRWaWV3LnNldChzb3VyY2VWaWV3LCB0aGlzLnByaXZOZXh0QnVmZmVyUmVhZHlCeXRlcyk7XG4gICAgICAgICAgICB0aGlzLnByaXZOZXh0QnVmZmVyUmVhZHlCeXRlcyArPSBieXRlc1RvQ29weTtcbiAgICAgICAgICAgIGJ5dGVzQ29waWVkRnJvbUJ1ZmZlciArPSBieXRlc1RvQ29weTtcbiAgICAgICAgICAgIC8vIEFyZSB3ZSByZWFkeSB0byB3cml0ZT9cbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZOZXh0QnVmZmVyUmVhZHlCeXRlcyA9PT0gdGhpcy5wcml2VGFyZ2V0Q2h1bmtTaXplKSB7XG4gICAgICAgICAgICAgICAgc3VwZXIud3JpdGVTdHJlYW1DaHVuayh7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogdGhpcy5wcml2TmV4dEJ1ZmZlclRvV3JpdGUsXG4gICAgICAgICAgICAgICAgICAgIGlzRW5kOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgdGltZVJlY2VpdmVkOiB0aGlzLnByaXZOZXh0QnVmZmVyU3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdk5leHRCdWZmZXJSZWFkeUJ5dGVzID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZOZXh0QnVmZmVyVG9Xcml0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgLy8gU2VuZCB3aGF0ZXZlciBpcyBwZW5kaW5nLCB0aGVuIGNsb3NlIHRoZSBiYXNlIGNsYXNzLlxuICAgICAgICBpZiAoMCAhPT0gdGhpcy5wcml2TmV4dEJ1ZmZlclJlYWR5Qnl0ZXMgJiYgIXRoaXMuaXNDbG9zZWQpIHtcbiAgICAgICAgICAgIHN1cGVyLndyaXRlU3RyZWFtQ2h1bmsoe1xuICAgICAgICAgICAgICAgIGJ1ZmZlcjogdGhpcy5wcml2TmV4dEJ1ZmZlclRvV3JpdGUuc2xpY2UoMCwgdGhpcy5wcml2TmV4dEJ1ZmZlclJlYWR5Qnl0ZXMpLFxuICAgICAgICAgICAgICAgIGlzRW5kOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0aW1lUmVjZWl2ZWQ6IHRoaXMucHJpdk5leHRCdWZmZXJTdGFydFRpbWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5jbG9zZSgpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2h1bmtlZEFycmF5QnVmZmVyU3RyZWFtLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBFdmVudFR5cGUsIFBsYXRmb3JtRXZlbnQgfSBmcm9tIFwiLi9QbGF0Zm9ybUV2ZW50XCI7XG5leHBvcnQgY2xhc3MgU2VydmljZUV2ZW50IGV4dGVuZHMgUGxhdGZvcm1FdmVudCB7XG4gICAgY29uc3RydWN0b3IoZXZlbnROYW1lLCBqc29uc3RyaW5nLCBldmVudFR5cGUgPSBFdmVudFR5cGUuSW5mbykge1xuICAgICAgICBzdXBlcihldmVudE5hbWUsIGV2ZW50VHlwZSk7XG4gICAgICAgIHRoaXMucHJpdkpzb25SZXN1bHQgPSBqc29uc3RyaW5nO1xuICAgIH1cbiAgICBnZXQganNvblN0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkpzb25SZXN1bHQ7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb25FdmVudCBleHRlbmRzIFBsYXRmb3JtRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGV2ZW50TmFtZSwgY29ubmVjdGlvbklkLCBldmVudFR5cGUgPSBFdmVudFR5cGUuSW5mbykge1xuICAgICAgICBzdXBlcihldmVudE5hbWUsIGV2ZW50VHlwZSk7XG4gICAgICAgIHRoaXMucHJpdkNvbm5lY3Rpb25JZCA9IGNvbm5lY3Rpb25JZDtcbiAgICB9XG4gICAgZ2V0IGNvbm5lY3Rpb25JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25JZDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvblN0YXJ0RXZlbnQgZXh0ZW5kcyBDb25uZWN0aW9uRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb25JZCwgdXJpLCBoZWFkZXJzKSB7XG4gICAgICAgIHN1cGVyKFwiQ29ubmVjdGlvblN0YXJ0RXZlbnRcIiwgY29ubmVjdGlvbklkKTtcbiAgICAgICAgdGhpcy5wcml2VXJpID0gdXJpO1xuICAgICAgICB0aGlzLnByaXZIZWFkZXJzID0gaGVhZGVycztcbiAgICB9XG4gICAgZ2V0IHVyaSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlVyaTtcbiAgICB9XG4gICAgZ2V0IGhlYWRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZIZWFkZXJzO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uRXN0YWJsaXNoZWRFdmVudCBleHRlbmRzIENvbm5lY3Rpb25FdmVudCB7XG4gICAgY29uc3RydWN0b3IoY29ubmVjdGlvbklkKSB7XG4gICAgICAgIHN1cGVyKFwiQ29ubmVjdGlvbkVzdGFibGlzaGVkRXZlbnRcIiwgY29ubmVjdGlvbklkKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbkNsb3NlZEV2ZW50IGV4dGVuZHMgQ29ubmVjdGlvbkV2ZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uSWQsIHN0YXR1c0NvZGUsIHJlYXNvbikge1xuICAgICAgICBzdXBlcihcIkNvbm5lY3Rpb25DbG9zZWRFdmVudFwiLCBjb25uZWN0aW9uSWQsIEV2ZW50VHlwZS5EZWJ1Zyk7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5wcml2U3RhdHVzQ29kZSA9IHN0YXR1c0NvZGU7XG4gICAgfVxuICAgIGdldCByZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgfVxuICAgIGdldCBzdGF0dXNDb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3RhdHVzQ29kZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbkVycm9yRXZlbnQgZXh0ZW5kcyBDb25uZWN0aW9uRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb25JZCwgbWVzc2FnZSwgdHlwZSkge1xuICAgICAgICBzdXBlcihcIkNvbm5lY3Rpb25FcnJvckV2ZW50XCIsIGNvbm5lY3Rpb25JZCwgRXZlbnRUeXBlLkRlYnVnKTtcbiAgICAgICAgdGhpcy5wcml2TWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMucHJpdlR5cGUgPSB0eXBlO1xuICAgIH1cbiAgICBnZXQgbWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdk1lc3NhZ2U7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VHlwZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbkVzdGFibGlzaEVycm9yRXZlbnQgZXh0ZW5kcyBDb25uZWN0aW9uRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb25JZCwgc3RhdHVzY29kZSwgcmVhc29uKSB7XG4gICAgICAgIHN1cGVyKFwiQ29ubmVjdGlvbkVzdGFibGlzaEVycm9yRXZlbnRcIiwgY29ubmVjdGlvbklkLCBFdmVudFR5cGUuRXJyb3IpO1xuICAgICAgICB0aGlzLnByaXZTdGF0dXNDb2RlID0gc3RhdHVzY29kZTtcbiAgICAgICAgdGhpcy5wcml2UmVhc29uID0gcmVhc29uO1xuICAgIH1cbiAgICBnZXQgcmVhc29uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVhc29uO1xuICAgIH1cbiAgICBnZXQgc3RhdHVzQ29kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlN0YXR1c0NvZGU7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb25NZXNzYWdlUmVjZWl2ZWRFdmVudCBleHRlbmRzIENvbm5lY3Rpb25FdmVudCB7XG4gICAgY29uc3RydWN0b3IoY29ubmVjdGlvbklkLCBuZXR3b3JrUmVjZWl2ZWRUaW1lSVNPLCBtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKFwiQ29ubmVjdGlvbk1lc3NhZ2VSZWNlaXZlZEV2ZW50XCIsIGNvbm5lY3Rpb25JZCk7XG4gICAgICAgIHRoaXMucHJpdk5ldHdvcmtSZWNlaXZlZFRpbWUgPSBuZXR3b3JrUmVjZWl2ZWRUaW1lSVNPO1xuICAgICAgICB0aGlzLnByaXZNZXNzYWdlID0gbWVzc2FnZTtcbiAgICB9XG4gICAgZ2V0IG5ldHdvcmtSZWNlaXZlZFRpbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZOZXR3b3JrUmVjZWl2ZWRUaW1lO1xuICAgIH1cbiAgICBnZXQgbWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdk1lc3NhZ2U7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb25NZXNzYWdlU2VudEV2ZW50IGV4dGVuZHMgQ29ubmVjdGlvbkV2ZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uSWQsIG5ldHdvcmtTZW50VGltZUlTTywgbWVzc2FnZSkge1xuICAgICAgICBzdXBlcihcIkNvbm5lY3Rpb25NZXNzYWdlU2VudEV2ZW50XCIsIGNvbm5lY3Rpb25JZCk7XG4gICAgICAgIHRoaXMucHJpdk5ldHdvcmtTZW50VGltZSA9IG5ldHdvcmtTZW50VGltZUlTTztcbiAgICAgICAgdGhpcy5wcml2TWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgfVxuICAgIGdldCBuZXR3b3JrU2VudFRpbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZOZXR3b3JrU2VudFRpbWU7XG4gICAgfVxuICAgIGdldCBtZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TWVzc2FnZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbm5lY3Rpb25FdmVudHMuanMubWFwXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLXJldHVybiAqL1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBJbnZhbGlkT3BlcmF0aW9uRXJyb3IgfSBmcm9tIFwiLi9FcnJvclwiO1xuaW1wb3J0IHsgY3JlYXRlTm9EYXNoR3VpZCB9IGZyb20gXCIuL0d1aWRcIjtcbmV4cG9ydCB2YXIgTWVzc2FnZVR5cGU7XG4oZnVuY3Rpb24gKE1lc3NhZ2VUeXBlKSB7XG4gICAgTWVzc2FnZVR5cGVbTWVzc2FnZVR5cGVbXCJUZXh0XCJdID0gMF0gPSBcIlRleHRcIjtcbiAgICBNZXNzYWdlVHlwZVtNZXNzYWdlVHlwZVtcIkJpbmFyeVwiXSA9IDFdID0gXCJCaW5hcnlcIjtcbn0pKE1lc3NhZ2VUeXBlIHx8IChNZXNzYWdlVHlwZSA9IHt9KSk7XG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbk1lc3NhZ2Uge1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2VUeXBlLCBib2R5LCBoZWFkZXJzLCBpZCkge1xuICAgICAgICB0aGlzLnByaXZCb2R5ID0gbnVsbDtcbiAgICAgICAgaWYgKG1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5UZXh0ICYmIGJvZHkgJiYgISh0eXBlb2YgKGJvZHkpID09PSBcInN0cmluZ1wiKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FcnJvcihcIlBheWxvYWQgbXVzdCBiZSBhIHN0cmluZ1wiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLkJpbmFyeSAmJiBib2R5ICYmICEoYm9keSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FcnJvcihcIlBheWxvYWQgbXVzdCBiZSBBcnJheUJ1ZmZlclwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZNZXNzYWdlVHlwZSA9IG1lc3NhZ2VUeXBlO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG4gICAgICAgIHRoaXMucHJpdkJvZHkgPSBib2R5O1xuICAgICAgICB0aGlzLnByaXZIZWFkZXJzID0gaGVhZGVycyA/IGhlYWRlcnMgOiB7fTtcbiAgICAgICAgdGhpcy5wcml2SWQgPSBpZCA/IGlkIDogY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICBzd2l0Y2ggKHRoaXMubWVzc2FnZVR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgTWVzc2FnZVR5cGUuQmluYXJ5OlxuICAgICAgICAgICAgICAgIHRoaXMucHJpdlNpemUgPSB0aGlzLmJpbmFyeUJvZHkgIT09IG51bGwgPyB0aGlzLmJpbmFyeUJvZHkuYnl0ZUxlbmd0aCA6IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VUeXBlLlRleHQ6XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U2l6ZSA9IHRoaXMudGV4dEJvZHkubGVuZ3RoO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBtZXNzYWdlVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdk1lc3NhZ2VUeXBlO1xuICAgIH1cbiAgICBnZXQgaGVhZGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkhlYWRlcnM7XG4gICAgfVxuICAgIGdldCBib2R5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Qm9keTtcbiAgICB9XG4gICAgZ2V0IHRleHRCb2R5KCkge1xuICAgICAgICBpZiAodGhpcy5wcml2TWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLkJpbmFyeSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FcnJvcihcIk5vdCBzdXBwb3J0ZWQgZm9yIGJpbmFyeSBtZXNzYWdlXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZCb2R5O1xuICAgIH1cbiAgICBnZXQgYmluYXJ5Qm9keSgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdk1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5UZXh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiTm90IHN1cHBvcnRlZCBmb3IgdGV4dCBtZXNzYWdlXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZCb2R5O1xuICAgIH1cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJZDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbm5lY3Rpb25NZXNzYWdlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbk9wZW5SZXNwb25zZSB7XG4gICAgY29uc3RydWN0b3Ioc3RhdHVzQ29kZSwgcmVhc29uKSB7XG4gICAgICAgIHRoaXMucHJpdlN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xuICAgICAgICB0aGlzLnByaXZSZWFzb24gPSByZWFzb247XG4gICAgfVxuICAgIGdldCBzdGF0dXNDb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3RhdHVzQ29kZTtcbiAgICB9XG4gICAgZ2V0IHJlYXNvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlYXNvbjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbm5lY3Rpb25PcGVuUmVzcG9uc2UuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogVGhlIGVycm9yIHRoYXQgaXMgdGhyb3duIHdoZW4gYW4gYXJndW1lbnQgcGFzc2VkIGluIGlzIG51bGwuXG4gKlxuICogQGV4cG9ydFxuICogQGNsYXNzIERlZmZlcmFsTWFwXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWZlcnJhbE1hcCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJpdk1hcCA9IHt9O1xuICAgIH1cbiAgICBhZGQoaWQsIGRlZmVycmFsKSB7XG4gICAgICAgIHRoaXMucHJpdk1hcFtpZF0gPSBkZWZlcnJhbDtcbiAgICB9XG4gICAgZ2V0SWQoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdk1hcFtpZF07XG4gICAgfVxuICAgIGNvbXBsZXRlKGlkLCByZXN1bHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMucHJpdk1hcFtpZF0ucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5wcml2TWFwW2lkXS5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5wcml2TWFwW2lkXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGVmZXJyYWxNYXAuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IEV2ZW50VHlwZSwgUGxhdGZvcm1FdmVudCB9IGZyb20gXCIuL1BsYXRmb3JtRXZlbnRcIjtcbmV4cG9ydCBjbGFzcyBEaWFsb2dFdmVudCBleHRlbmRzIFBsYXRmb3JtRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGV2ZW50TmFtZSwgZXZlbnRUeXBlID0gRXZlbnRUeXBlLkluZm8pIHtcbiAgICAgICAgc3VwZXIoZXZlbnROYW1lLCBldmVudFR5cGUpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBTZW5kaW5nQWdlbnRDb250ZXh0TWVzc2FnZUV2ZW50IGV4dGVuZHMgRGlhbG9nRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGFnZW50Q29uZmlnKSB7XG4gICAgICAgIHN1cGVyKFwiU2VuZGluZ0FnZW50Q29udGV4dE1lc3NhZ2VFdmVudFwiKTtcbiAgICAgICAgdGhpcy5wcml2QWdlbnRDb25maWcgPSBhZ2VudENvbmZpZztcbiAgICB9XG4gICAgZ2V0IGFnZW50Q29uZmlnKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QWdlbnRDb25maWc7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EaWFsb2dFdmVudHMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG4vKipcbiAqIFRoZSBlcnJvciB0aGF0IGlzIHRocm93biB3aGVuIGFuIGFyZ3VtZW50IHBhc3NlZCBpbiBpcyBudWxsLlxuICpcbiAqIEBleHBvcnRcbiAqIEBjbGFzcyBBcmd1bWVudE51bGxFcnJvclxuICogQGV4dGVuZHMge0Vycm9yfVxuICovXG5leHBvcnQgY2xhc3MgQXJndW1lbnROdWxsRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBBcmd1bWVudE51bGxFcnJvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhcmd1bWVudE5hbWUgLSBOYW1lIG9mIHRoZSBhcmd1bWVudCB0aGF0IGlzIG51bGxcbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBBcmd1bWVudE51bGxFcnJvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGFyZ3VtZW50TmFtZSkge1xuICAgICAgICBzdXBlcihhcmd1bWVudE5hbWUpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkFyZ3VtZW50TnVsbFwiO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBhcmd1bWVudE5hbWU7XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgZXJyb3IgdGhhdCBpcyB0aHJvd24gd2hlbiBhbiBpbnZhbGlkIG9wZXJhdGlvbiBpcyBwZXJmb3JtZWQgaW4gdGhlIGNvZGUuXG4gKlxuICogQGV4cG9ydFxuICogQGNsYXNzIEludmFsaWRPcGVyYXRpb25FcnJvclxuICogQGV4dGVuZHMge0Vycm9yfVxuICovXG5leHBvcnQgY2xhc3MgSW52YWxpZE9wZXJhdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgSW52YWxpZE9wZXJhdGlvbkVycm9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yIC0gVGhlIGVycm9yXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgSW52YWxpZE9wZXJhdGlvbkVycm9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZXJyb3IpIHtcbiAgICAgICAgc3VwZXIoZXJyb3IpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkludmFsaWRPcGVyYXRpb25cIjtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyb3I7XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgZXJyb3IgdGhhdCBpcyB0aHJvd24gd2hlbiBhbiBvYmplY3QgaXMgZGlzcG9zZWQuXG4gKlxuICogQGV4cG9ydFxuICogQGNsYXNzIE9iamVjdERpc3Bvc2VkRXJyb3JcbiAqIEBleHRlbmRzIHtFcnJvcn1cbiAqL1xuZXhwb3J0IGNsYXNzIE9iamVjdERpc3Bvc2VkRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBPYmplY3REaXNwb3NlZEVycm9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG9iamVjdE5hbWUgLSBUaGUgb2JqZWN0IHRoYXQgaXMgZGlzcG9zZWRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXJyb3IgLSBUaGUgZXJyb3JcbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBPYmplY3REaXNwb3NlZEVycm9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iob2JqZWN0TmFtZSwgZXJyb3IpIHtcbiAgICAgICAgc3VwZXIoZXJyb3IpO1xuICAgICAgICB0aGlzLm5hbWUgPSBvYmplY3ROYW1lICsgXCJPYmplY3REaXNwb3NlZFwiO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlcnJvcjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUVycm9yLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBPYmplY3REaXNwb3NlZEVycm9yIH0gZnJvbSBcIi4vRXJyb3JcIjtcbmltcG9ydCB7IGNyZWF0ZU5vRGFzaEd1aWQgfSBmcm9tIFwiLi9HdWlkXCI7XG5leHBvcnQgY2xhc3MgRXZlbnRTb3VyY2Uge1xuICAgIGNvbnN0cnVjdG9yKG1ldGFkYXRhKSB7XG4gICAgICAgIHRoaXMucHJpdkV2ZW50TGlzdGVuZXJzID0ge307XG4gICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2Q29uc29sZUxpc3RlbmVyID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByaXZNZXRhZGF0YSA9IG1ldGFkYXRhO1xuICAgIH1cbiAgICBvbkV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGlzcG9zZWQoKSkge1xuICAgICAgICAgICAgdGhyb3cgKG5ldyBPYmplY3REaXNwb3NlZEVycm9yKFwiRXZlbnRTb3VyY2VcIikpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1ldGFkYXRhKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhcmFtTmFtZSBpbiB0aGlzLm1ldGFkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQubWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXZlbnQubWV0YWRhdGFbcGFyYW1OYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50Lm1ldGFkYXRhW3BhcmFtTmFtZV0gPSB0aGlzLm1ldGFkYXRhW3BhcmFtTmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBldmVudElkIGluIHRoaXMucHJpdkV2ZW50TGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnRJZCAmJiB0aGlzLnByaXZFdmVudExpc3RlbmVyc1tldmVudElkXSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkV2ZW50TGlzdGVuZXJzW2V2ZW50SWRdKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhdHRhY2gob25FdmVudENhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGlkID0gY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZFdmVudExpc3RlbmVyc1tpZF0gPSBvbkV2ZW50Q2FsbGJhY2s7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkZXRhY2g6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wcml2RXZlbnRMaXN0ZW5lcnNbaWRdO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGF0dGFjaExpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dGFjaCgoZSkgPT4gbGlzdGVuZXIub25FdmVudChlKSk7XG4gICAgfVxuICAgIGF0dGFjaENvbnNvbGVMaXN0ZW5lcihsaXN0ZW5lcikge1xuICAgICAgICBpZiAoISF0aGlzLnByaXZDb25zb2xlTGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHZvaWQgdGhpcy5wcml2Q29uc29sZUxpc3RlbmVyLmRldGFjaCgpOyAvLyBEZXRhY2ggaW1wbGVtZW50YXRpb24gZm9yIGV2ZW50TGlzdGVuZXJzIGlzIHN5bmNocm9ub3VzXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2Q29uc29sZUxpc3RlbmVyID0gdGhpcy5hdHRhY2goKGUpID0+IGxpc3RlbmVyLm9uRXZlbnQoZSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29uc29sZUxpc3RlbmVyO1xuICAgIH1cbiAgICBpc0Rpc3Bvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNEaXNwb3NlZDtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5wcml2RXZlbnRMaXN0ZW5lcnMgPSBudWxsO1xuICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0IG1ldGFkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TWV0YWRhdGE7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudFNvdXJjZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQXJndW1lbnROdWxsRXJyb3IgfSBmcm9tIFwiLi9FcnJvclwiO1xuaW1wb3J0IHsgRXZlbnRTb3VyY2UgfSBmcm9tIFwiLi9FdmVudFNvdXJjZVwiO1xuZXhwb3J0IGNsYXNzIEV2ZW50cyB7XG4gICAgc3RhdGljIHNldEV2ZW50U291cmNlKGV2ZW50U291cmNlKSB7XG4gICAgICAgIGlmICghZXZlbnRTb3VyY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFcnJvcihcImV2ZW50U291cmNlXCIpO1xuICAgICAgICB9XG4gICAgICAgIEV2ZW50cy5wcml2SW5zdGFuY2UgPSBldmVudFNvdXJjZTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBpbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIEV2ZW50cy5wcml2SW5zdGFuY2U7XG4gICAgfVxufVxuRXZlbnRzLnByaXZJbnN0YW5jZSA9IG5ldyBFdmVudFNvdXJjZSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudHMuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IHY0IGFzIHV1aWQgfSBmcm9tIFwidXVpZFwiO1xuY29uc3QgY3JlYXRlR3VpZCA9ICgpID0+IHV1aWQoKTtcbmNvbnN0IGNyZWF0ZU5vRGFzaEd1aWQgPSAoKSA9PiBjcmVhdGVHdWlkKCkucmVwbGFjZShuZXcgUmVnRXhwKFwiLVwiLCBcImdcIiksIFwiXCIpLnRvVXBwZXJDYXNlKCk7XG5leHBvcnQgeyBjcmVhdGVHdWlkLCBjcmVhdGVOb0Rhc2hHdWlkIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUd1aWQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmV4cG9ydCB2YXIgQ29ubmVjdGlvblN0YXRlO1xuKGZ1bmN0aW9uIChDb25uZWN0aW9uU3RhdGUpIHtcbiAgICBDb25uZWN0aW9uU3RhdGVbQ29ubmVjdGlvblN0YXRlW1wiTm9uZVwiXSA9IDBdID0gXCJOb25lXCI7XG4gICAgQ29ubmVjdGlvblN0YXRlW0Nvbm5lY3Rpb25TdGF0ZVtcIkNvbm5lY3RlZFwiXSA9IDFdID0gXCJDb25uZWN0ZWRcIjtcbiAgICBDb25uZWN0aW9uU3RhdGVbQ29ubmVjdGlvblN0YXRlW1wiQ29ubmVjdGluZ1wiXSA9IDJdID0gXCJDb25uZWN0aW5nXCI7XG4gICAgQ29ubmVjdGlvblN0YXRlW0Nvbm5lY3Rpb25TdGF0ZVtcIkRpc2Nvbm5lY3RlZFwiXSA9IDNdID0gXCJEaXNjb25uZWN0ZWRcIjtcbn0pKENvbm5lY3Rpb25TdGF0ZSB8fCAoQ29ubmVjdGlvblN0YXRlID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SUNvbm5lY3Rpb24uanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IE9iamVjdERpc3Bvc2VkRXJyb3IgfSBmcm9tIFwiLi9FcnJvclwiO1xuZXhwb3J0IGNsYXNzIExpc3Qge1xuICAgIGNvbnN0cnVjdG9yKGxpc3QpIHtcbiAgICAgICAgdGhpcy5wcml2U3Vic2NyaXB0aW9uSWRDb3VudGVyID0gMDtcbiAgICAgICAgdGhpcy5wcml2QWRkU3Vic2NyaXB0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLnByaXZSZW1vdmVTdWJzY3JpcHRpb25zID0ge307XG4gICAgICAgIHRoaXMucHJpdkRpc3Bvc2VkU3Vic2NyaXB0aW9ucyA9IHt9O1xuICAgICAgICB0aGlzLnByaXZEaXNwb3NlUmVhc29uID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcml2TGlzdCA9IFtdO1xuICAgICAgICAvLyBjb3B5IHRoZSBsaXN0IHJhdGhlciB0aGFuIHRha2luZyBhcyBpcy5cbiAgICAgICAgaWYgKGxpc3QpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBsaXN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2TGlzdC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldChpdGVtSW5kZXgpIHtcbiAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkxpc3RbaXRlbUluZGV4XTtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgwKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMubGVuZ3RoKCkgLSAxKTtcbiAgICB9XG4gICAgYWRkKGl0ZW0pIHtcbiAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgdGhpcy5pbnNlcnRBdCh0aGlzLnByaXZMaXN0Lmxlbmd0aCwgaXRlbSk7XG4gICAgfVxuICAgIGluc2VydEF0KGluZGV4LCBpdGVtKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5wcml2TGlzdC51bnNoaWZ0KGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluZGV4ID09PSB0aGlzLnByaXZMaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5wcml2TGlzdC5wdXNoKGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2TGlzdC5zcGxpY2UoaW5kZXgsIDAsIGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHJpZ2dlclN1YnNjcmlwdGlvbnModGhpcy5wcml2QWRkU3Vic2NyaXB0aW9ucyk7XG4gICAgfVxuICAgIHJlbW92ZUZpcnN0KCkge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVBdCgwKTtcbiAgICB9XG4gICAgcmVtb3ZlTGFzdCgpIHtcbiAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlQXQodGhpcy5sZW5ndGgoKSAtIDEpO1xuICAgIH1cbiAgICByZW1vdmVBdChpbmRleCkge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmUoaW5kZXgsIDEpWzBdO1xuICAgIH1cbiAgICByZW1vdmUoaW5kZXgsIGNvdW50KSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgIGNvbnN0IHJlbW92ZWRFbGVtZW50cyA9IHRoaXMucHJpdkxpc3Quc3BsaWNlKGluZGV4LCBjb3VudCk7XG4gICAgICAgIHRoaXMudHJpZ2dlclN1YnNjcmlwdGlvbnModGhpcy5wcml2UmVtb3ZlU3Vic2NyaXB0aW9ucyk7XG4gICAgICAgIHJldHVybiByZW1vdmVkRWxlbWVudHM7XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICB0aGlzLnJlbW92ZSgwLCB0aGlzLmxlbmd0aCgpKTtcbiAgICB9XG4gICAgbGVuZ3RoKCkge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TGlzdC5sZW5ndGg7XG4gICAgfVxuICAgIG9uQWRkZWQoYWRkZWRDYWxsYmFjaykge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25JZCA9IHRoaXMucHJpdlN1YnNjcmlwdGlvbklkQ291bnRlcisrO1xuICAgICAgICB0aGlzLnByaXZBZGRTdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbklkXSA9IGFkZGVkQ2FsbGJhY2s7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkZXRhY2g6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wcml2QWRkU3Vic2NyaXB0aW9uc1tzdWJzY3JpcHRpb25JZF07XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgb25SZW1vdmVkKHJlbW92ZWRDYWxsYmFjaykge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25JZCA9IHRoaXMucHJpdlN1YnNjcmlwdGlvbklkQ291bnRlcisrO1xuICAgICAgICB0aGlzLnByaXZSZW1vdmVTdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbklkXSA9IHJlbW92ZWRDYWxsYmFjaztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRldGFjaDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnByaXZSZW1vdmVTdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbklkXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBvbkRpc3Bvc2VkKGRpc3Bvc2VkQ2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uSWQgPSB0aGlzLnByaXZTdWJzY3JpcHRpb25JZENvdW50ZXIrKztcbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZWRTdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbklkXSA9IGRpc3Bvc2VkQ2FsbGJhY2s7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkZXRhY2g6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wcml2RGlzcG9zZWRTdWJzY3JpcHRpb25zW3N1YnNjcmlwdGlvbklkXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBqb2luKHNlcGVyYXRvcikge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TGlzdC5qb2luKHNlcGVyYXRvcik7XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIGNvbnN0IGNsb25lQ29weSA9IEFycmF5KCk7XG4gICAgICAgIHRoaXMucHJpdkxpc3QuZm9yRWFjaCgodmFsKSA9PiB7XG4gICAgICAgICAgICBjbG9uZUNvcHkucHVzaCh2YWwpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNsb25lQ29weTtcbiAgICB9XG4gICAgYW55KGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud2hlcmUoY2FsbGJhY2spLmxlbmd0aCgpID4gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlbmd0aCgpID4gMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhbGwoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMud2hlcmUoY2FsbGJhY2spLmxlbmd0aCgpID09PSB0aGlzLmxlbmd0aCgpO1xuICAgIH1cbiAgICBmb3JFYWNoKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGgoKTsgaSsrKSB7XG4gICAgICAgICAgICBjYWxsYmFjayh0aGlzLnByaXZMaXN0W2ldLCBpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxlY3QoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgY29uc3Qgc2VsZWN0TGlzdCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucHJpdkxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHNlbGVjdExpc3QucHVzaChjYWxsYmFjayh0aGlzLnByaXZMaXN0W2ldLCBpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBMaXN0KHNlbGVjdExpc3QpO1xuICAgIH1cbiAgICB3aGVyZShjYWxsYmFjaykge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZExpc3QgPSBuZXcgTGlzdCgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucHJpdkxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjayh0aGlzLnByaXZMaXN0W2ldLCBpKSkge1xuICAgICAgICAgICAgICAgIGZpbHRlcmVkTGlzdC5hZGQodGhpcy5wcml2TGlzdFtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkTGlzdDtcbiAgICB9XG4gICAgb3JkZXJCeShjb21wYXJlRm4pIHtcbiAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgY29uc3QgY2xvbmVkQXJyYXkgPSB0aGlzLnRvQXJyYXkoKTtcbiAgICAgICAgY29uc3Qgb3JkZXJlZEFycmF5ID0gY2xvbmVkQXJyYXkuc29ydChjb21wYXJlRm4pO1xuICAgICAgICByZXR1cm4gbmV3IExpc3Qob3JkZXJlZEFycmF5KTtcbiAgICB9XG4gICAgb3JkZXJCeURlc2MoY29tcGFyZUZuKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2VkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm9yZGVyQnkoKGEsIGIpID0+IGNvbXBhcmVGbihiLCBhKSk7XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICByZXR1cm4gbmV3IExpc3QodGhpcy50b0FycmF5KCkpO1xuICAgIH1cbiAgICBjb25jYXQobGlzdCkge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlZCgpO1xuICAgICAgICByZXR1cm4gbmV3IExpc3QodGhpcy5wcml2TGlzdC5jb25jYXQobGlzdC50b0FycmF5KCkpKTtcbiAgICB9XG4gICAgY29uY2F0QXJyYXkoYXJyYXkpIHtcbiAgICAgICAgdGhpcy50aHJvd0lmRGlzcG9zZWQoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBMaXN0KHRoaXMucHJpdkxpc3QuY29uY2F0KGFycmF5KSk7XG4gICAgfVxuICAgIGlzRGlzcG9zZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZMaXN0ID09IG51bGw7XG4gICAgfVxuICAgIGRpc3Bvc2UocmVhc29uKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKCkpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkRpc3Bvc2VSZWFzb24gPSByZWFzb247XG4gICAgICAgICAgICB0aGlzLnByaXZMaXN0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucHJpdkFkZFN1YnNjcmlwdGlvbnMgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5wcml2UmVtb3ZlU3Vic2NyaXB0aW9ucyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJTdWJzY3JpcHRpb25zKHRoaXMucHJpdkRpc3Bvc2VkU3Vic2NyaXB0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhyb3dJZkRpc3Bvc2VkKCkge1xuICAgICAgICBpZiAodGhpcy5pc0Rpc3Bvc2VkKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3REaXNwb3NlZEVycm9yKFwiTGlzdFwiLCB0aGlzLnByaXZEaXNwb3NlUmVhc29uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmlnZ2VyU3Vic2NyaXB0aW9ucyhzdWJzY3JpcHRpb25zKSB7XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN1YnNjcmlwdGlvbklkIGluIHN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uc1tzdWJzY3JpcHRpb25JZF0oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxpc3QuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IGNyZWF0ZU5vRGFzaEd1aWQgfSBmcm9tIFwiLi9HdWlkXCI7XG5leHBvcnQgdmFyIEV2ZW50VHlwZTtcbihmdW5jdGlvbiAoRXZlbnRUeXBlKSB7XG4gICAgRXZlbnRUeXBlW0V2ZW50VHlwZVtcIkRlYnVnXCJdID0gMF0gPSBcIkRlYnVnXCI7XG4gICAgRXZlbnRUeXBlW0V2ZW50VHlwZVtcIkluZm9cIl0gPSAxXSA9IFwiSW5mb1wiO1xuICAgIEV2ZW50VHlwZVtFdmVudFR5cGVbXCJXYXJuaW5nXCJdID0gMl0gPSBcIldhcm5pbmdcIjtcbiAgICBFdmVudFR5cGVbRXZlbnRUeXBlW1wiRXJyb3JcIl0gPSAzXSA9IFwiRXJyb3JcIjtcbiAgICBFdmVudFR5cGVbRXZlbnRUeXBlW1wiTm9uZVwiXSA9IDRdID0gXCJOb25lXCI7XG59KShFdmVudFR5cGUgfHwgKEV2ZW50VHlwZSA9IHt9KSk7XG5leHBvcnQgY2xhc3MgUGxhdGZvcm1FdmVudCB7XG4gICAgY29uc3RydWN0b3IoZXZlbnROYW1lLCBldmVudFR5cGUpIHtcbiAgICAgICAgdGhpcy5wcml2TmFtZSA9IGV2ZW50TmFtZTtcbiAgICAgICAgdGhpcy5wcml2RXZlbnRJZCA9IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2RXZlbnRUaW1lID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICB0aGlzLnByaXZFdmVudFR5cGUgPSBldmVudFR5cGU7XG4gICAgICAgIHRoaXMucHJpdk1ldGFkYXRhID0ge307XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TmFtZTtcbiAgICB9XG4gICAgZ2V0IGV2ZW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFdmVudElkO1xuICAgIH1cbiAgICBnZXQgZXZlbnRUaW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXZlbnRUaW1lO1xuICAgIH1cbiAgICBnZXQgZXZlbnRUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXZlbnRUeXBlO1xuICAgIH1cbiAgICBnZXQgbWV0YWRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZNZXRhZGF0YTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBsYXRmb3JtRXZlbnQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlLCBAdHlwZXNjcmlwdC1lc2xpbnQvdHlwZWRlZiAqL1xuZXhwb3J0IHZhciBQcm9taXNlU3RhdGU7XG4oZnVuY3Rpb24gKFByb21pc2VTdGF0ZSkge1xuICAgIFByb21pc2VTdGF0ZVtQcm9taXNlU3RhdGVbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcbiAgICBQcm9taXNlU3RhdGVbUHJvbWlzZVN0YXRlW1wiUmVzb2x2ZWRcIl0gPSAxXSA9IFwiUmVzb2x2ZWRcIjtcbiAgICBQcm9taXNlU3RhdGVbUHJvbWlzZVN0YXRlW1wiUmVqZWN0ZWRcIl0gPSAyXSA9IFwiUmVqZWN0ZWRcIjtcbn0pKFByb21pc2VTdGF0ZSB8fCAoUHJvbWlzZVN0YXRlID0ge30pKTtcbmV4cG9ydCBjbGFzcyBQcm9taXNlUmVzdWx0IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9taXNlUmVzdWx0RXZlbnRTb3VyY2UpIHtcbiAgICAgICAgdGhpcy50aHJvd0lmRXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5lcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcHJvbWlzZVJlc3VsdEV2ZW50U291cmNlLm9uKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wcml2SXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZJc0NvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlc3VsdCA9IHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJpdklzQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdklzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgaXNDb21wbGV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc0NvbXBsZXRlZDtcbiAgICB9XG4gICAgZ2V0IGlzRXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc0Vycm9yO1xuICAgIH1cbiAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvcjtcbiAgICB9XG4gICAgZ2V0IHJlc3VsdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlc3VsdDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUHJvbWlzZVJlc3VsdEV2ZW50U291cmNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zZXRSZXN1bHQgPSAocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByaXZPblNldFJlc3VsdChyZXN1bHQpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldEVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByaXZPblNldEVycm9yKGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbiA9IChvblNldFJlc3VsdCwgb25TZXRFcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcml2T25TZXRSZXN1bHQgPSBvblNldFJlc3VsdDtcbiAgICAgICAgICAgIHRoaXMucHJpdk9uU2V0RXJyb3IgPSBvblNldEVycm9yO1xuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBEZWZlcnJlZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucmVzb2x2ZSA9IChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlamVjdCA9IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcml2UmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LWZ1bmN0aW9uLXJldHVybi10eXBlXG4gICAgICAgIHRoaXMucHJpdlByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByaXZSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlamVjdCA9IHJlamVjdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBwcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvbWlzZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgU2luayB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJpdlN0YXRlID0gUHJvbWlzZVN0YXRlLk5vbmU7XG4gICAgICAgIHRoaXMucHJpdlByb21pc2VSZXN1bHQgPSBudWxsO1xuICAgICAgICB0aGlzLnByaXZQcm9taXNlUmVzdWx0RXZlbnRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcml2U3VjY2Vzc0hhbmRsZXJzID0gW107XG4gICAgICAgIHRoaXMucHJpdkVycm9ySGFuZGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5wcml2UHJvbWlzZVJlc3VsdEV2ZW50cyA9IG5ldyBQcm9taXNlUmVzdWx0RXZlbnRTb3VyY2UoKTtcbiAgICAgICAgdGhpcy5wcml2UHJvbWlzZVJlc3VsdCA9IG5ldyBQcm9taXNlUmVzdWx0KHRoaXMucHJpdlByb21pc2VSZXN1bHRFdmVudHMpO1xuICAgIH1cbiAgICBnZXQgc3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTdGF0ZTtcbiAgICB9XG4gICAgZ2V0IHJlc3VsdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb21pc2VSZXN1bHQ7XG4gICAgfVxuICAgIHJlc29sdmUocmVzdWx0KSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZTdGF0ZSAhPT0gUHJvbWlzZVN0YXRlLk5vbmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIidDYW5ub3QgcmVzb2x2ZSBhIGNvbXBsZXRlZCBwcm9taXNlJ1wiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZTdGF0ZSA9IFByb21pc2VTdGF0ZS5SZXNvbHZlZDtcbiAgICAgICAgdGhpcy5wcml2UHJvbWlzZVJlc3VsdEV2ZW50cy5zZXRSZXN1bHQocmVzdWx0KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnByaXZTdWNjZXNzSGFuZGxlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuZXhlY3V0ZVN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQsIHRoaXMucHJpdlN1Y2Nlc3NIYW5kbGVyc1tpXSwgdGhpcy5wcml2RXJyb3JIYW5kbGVyc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXRhY2hIYW5kbGVycygpO1xuICAgIH1cbiAgICByZWplY3QoZXJyb3IpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdlN0YXRlICE9PSBQcm9taXNlU3RhdGUuTm9uZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ0Nhbm5vdCByZWplY3QgYSBjb21wbGV0ZWQgcHJvbWlzZSdcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2U3RhdGUgPSBQcm9taXNlU3RhdGUuUmVqZWN0ZWQ7XG4gICAgICAgIHRoaXMucHJpdlByb21pc2VSZXN1bHRFdmVudHMuc2V0RXJyb3IoZXJyb3IpO1xuICAgICAgICBmb3IgKGNvbnN0IGVycm9ySGFuZGxlciBvZiB0aGlzLnByaXZFcnJvckhhbmRsZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGVFcnJvckNhbGxiYWNrKGVycm9yLCBlcnJvckhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGV0YWNoSGFuZGxlcnMoKTtcbiAgICB9XG4gICAgb24oc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChzdWNjZXNzQ2FsbGJhY2sgPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgICAgICAgICAgc3VjY2Vzc0NhbGxiYWNrID0gKCkgPT4geyB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByaXZTdGF0ZSA9PT0gUHJvbWlzZVN0YXRlLk5vbmUpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlN1Y2Nlc3NIYW5kbGVycy5wdXNoKHN1Y2Nlc3NDYWxsYmFjayk7XG4gICAgICAgICAgICB0aGlzLnByaXZFcnJvckhhbmRsZXJzLnB1c2goZXJyb3JDYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2U3RhdGUgPT09IFByb21pc2VTdGF0ZS5SZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZVN1Y2Nlc3NDYWxsYmFjayh0aGlzLnByaXZQcm9taXNlUmVzdWx0LnJlc3VsdCwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucHJpdlN0YXRlID09PSBQcm9taXNlU3RhdGUuUmVqZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVFcnJvckNhbGxiYWNrKHRoaXMucHJpdlByb21pc2VSZXN1bHQuZXJyb3IsIGVycm9yQ2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kZXRhY2hIYW5kbGVycygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4ZWN1dGVTdWNjZXNzQ2FsbGJhY2socmVzdWx0LCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGVFcnJvckNhbGxiYWNrKGAnVW5oYW5kbGVkIGNhbGxiYWNrIGVycm9yOiAke2V9J2AsIGVycm9yQ2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4ZWN1dGVFcnJvckNhbGxiYWNrKGVycm9yLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGVycm9yQ2FsbGJhY2soZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCdVbmhhbmRsZWQgY2FsbGJhY2sgZXJyb3I6ICR7ZX0uIElubmVyRXJyb3I6ICR7ZXJyb3J9J2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAnVW5oYW5kbGVkIGVycm9yOiAke2Vycm9yfSdgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXRhY2hIYW5kbGVycygpIHtcbiAgICAgICAgdGhpcy5wcml2RXJyb3JIYW5kbGVycyA9IFtdO1xuICAgICAgICB0aGlzLnByaXZTdWNjZXNzSGFuZGxlcnMgPSBbXTtcbiAgICB9XG59XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWFycm93L3ByZWZlci1hcnJvdy1mdW5jdGlvbnNcbmV4cG9ydCBmdW5jdGlvbiBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHByb21pc2UsIGNiLCBlcnIpIHtcbiAgICBwcm9taXNlLnRoZW4oKHZhbCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgICAgICBjYih2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVkRXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycih0eXBlZEVycm9yLm5hbWUgKyBcIjogXCIgKyB0eXBlZEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZW1wdHlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZWRFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICBlcnIodHlwZWRFcnJvci5uYW1lICsgXCI6IFwiICsgdHlwZWRFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lbXB0eVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7IH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9taXNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IEludmFsaWRPcGVyYXRpb25FcnJvciwgT2JqZWN0RGlzcG9zZWRFcnJvciB9IGZyb20gXCIuL0Vycm9yXCI7XG5pbXBvcnQgeyBMaXN0IH0gZnJvbSBcIi4vTGlzdFwiO1xuaW1wb3J0IHsgRGVmZXJyZWQsIH0gZnJvbSBcIi4vUHJvbWlzZVwiO1xudmFyIFN1YnNjcmliZXJUeXBlO1xuKGZ1bmN0aW9uIChTdWJzY3JpYmVyVHlwZSkge1xuICAgIFN1YnNjcmliZXJUeXBlW1N1YnNjcmliZXJUeXBlW1wiRGVxdWV1ZVwiXSA9IDBdID0gXCJEZXF1ZXVlXCI7XG4gICAgU3Vic2NyaWJlclR5cGVbU3Vic2NyaWJlclR5cGVbXCJQZWVrXCJdID0gMV0gPSBcIlBlZWtcIjtcbn0pKFN1YnNjcmliZXJUeXBlIHx8IChTdWJzY3JpYmVyVHlwZSA9IHt9KSk7XG5leHBvcnQgY2xhc3MgUXVldWUge1xuICAgIGNvbnN0cnVjdG9yKGxpc3QpIHtcbiAgICAgICAgdGhpcy5wcml2UHJvbWlzZVN0b3JlID0gbmV3IExpc3QoKTtcbiAgICAgICAgdGhpcy5wcml2SXNEcmFpbkluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZVJlYXNvbiA9IG51bGw7XG4gICAgICAgIHRoaXMucHJpdkxpc3QgPSBsaXN0ID8gbGlzdCA6IG5ldyBMaXN0KCk7XG4gICAgICAgIHRoaXMucHJpdkRldGFjaGFibGVzID0gW107XG4gICAgICAgIHRoaXMucHJpdlN1YnNjcmliZXJzID0gbmV3IExpc3QoKTtcbiAgICAgICAgdGhpcy5wcml2RGV0YWNoYWJsZXMucHVzaCh0aGlzLnByaXZMaXN0Lm9uQWRkZWQoKCkgPT4gdGhpcy5kcmFpbigpKSk7XG4gICAgfVxuICAgIGVucXVldWUoaXRlbSkge1xuICAgICAgICB0aGlzLnRocm93SWZEaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuZW5xdWV1ZUZyb21Qcm9taXNlKG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiByZXNvbHZlKGl0ZW0pKSk7XG4gICAgfVxuICAgIGVucXVldWVGcm9tUHJvbWlzZShwcm9taXNlKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2UoKTtcbiAgICAgICAgcHJvbWlzZS50aGVuKCh2YWwpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJpdkxpc3QuYWRkKHZhbCk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWVtcHR5LWZ1bmN0aW9uXG4gICAgICAgIH0sICgpID0+IHsgfSk7XG4gICAgfVxuICAgIGRlcXVldWUoKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2UoKTtcbiAgICAgICAgY29uc3QgZGVmZXJyZWRTdWJzY3JpYmVyID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIGlmICh0aGlzLnByaXZTdWJzY3JpYmVycykge1xuICAgICAgICAgICAgdGhpcy5wcml2U3Vic2NyaWJlcnMuYWRkKHsgZGVmZXJyYWw6IGRlZmVycmVkU3Vic2NyaWJlciwgdHlwZTogU3Vic2NyaWJlclR5cGUuRGVxdWV1ZSB9KTtcbiAgICAgICAgICAgIHRoaXMuZHJhaW4oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmZXJyZWRTdWJzY3JpYmVyLnByb21pc2U7XG4gICAgfVxuICAgIHBlZWsoKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2UoKTtcbiAgICAgICAgY29uc3QgZGVmZXJyZWRTdWJzY3JpYmVyID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIGNvbnN0IHN1YnMgPSB0aGlzLnByaXZTdWJzY3JpYmVycztcbiAgICAgICAgaWYgKHN1YnMpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlN1YnNjcmliZXJzLmFkZCh7IGRlZmVycmFsOiBkZWZlcnJlZFN1YnNjcmliZXIsIHR5cGU6IFN1YnNjcmliZXJUeXBlLlBlZWsgfSk7XG4gICAgICAgICAgICB0aGlzLmRyYWluKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkU3Vic2NyaWJlci5wcm9taXNlO1xuICAgIH1cbiAgICBsZW5ndGgoKSB7XG4gICAgICAgIHRoaXMudGhyb3dJZkRpc3Bvc2UoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkxpc3QubGVuZ3RoKCk7XG4gICAgfVxuICAgIGlzRGlzcG9zZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTdWJzY3JpYmVycyA9PSBudWxsO1xuICAgIH1cbiAgICBkcmFpbkFuZERpc3Bvc2UocGVuZGluZ0l0ZW1Qcm9jZXNzb3IsIHJlYXNvbikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQoKSAmJiAhdGhpcy5wcml2SXNEaXNwb3NpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZEaXNwb3NlUmVhc29uID0gcmVhc29uO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdklzRGlzcG9zaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJzID0gdGhpcy5wcml2U3Vic2NyaWJlcnM7XG4gICAgICAgICAgICAgICAgaWYgKHN1YnMpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHN1YnMubGVuZ3RoKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJzY3JpYmVyID0gc3Vicy5yZW1vdmVGaXJzdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogdGhpcyBuZWVkcyB3b3JrIChSZXNvbHZlKG51bGwpIGluc3RlYWQ/KS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuZGVmZXJyYWwucmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3Vic2NyaWJlci5kZWZlcnJhbC5yZWplY3QoXCJEaXNwb3NlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBub3RlOiB0aGlzIGJsb2NrIGFzc3VtZXMgY29vcGVyYXRpdmUgbXVsdGl0YXNraW5nLCBpLmUuLFxuICAgICAgICAgICAgICAgICAgICAvLyBiZXR3ZWVuIHRoZSBpZi1zdGF0ZW1lbnQgYW5kIHRoZSBhc3NpZ25tZW50IHRoZXJlIGFyZSBub1xuICAgICAgICAgICAgICAgICAgICAvLyB0aHJlYWQgc3dpdGNoZXMuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlYXNvbiBpcyB0aGF0IGJldHdlZW4gdGhlIGluaXRpYWwgY29uc3QgPSB0aGlzLjsgYW5kIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gcG9pbnQgdGhlcmUgaXMgdGhlIGRlcnJhbC5yZXNvbHZlKCkgb3BlcmF0aW9uIHRoYXQgbWlnaHQgaGF2ZVxuICAgICAgICAgICAgICAgICAgICAvLyBjYXVzZWQgcmVjdXJzaXZlIGNhbGxzIHRvIHRoZSBRdWV1ZSwgZXNwZWNpYWxseSwgY2FsbGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyBEaXNwb3NlKCkgb24gdGhlIHF1ZXVlIGFscmVkeSAod2hpY2ggd291bGQgcmVzZXQgdGhlIHZhclxuICAgICAgICAgICAgICAgICAgICAvLyBoZXJlIHRvIG51bGwhKS5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhhdCBzaG91bGQgZ2VuZXJhbGx5IGhvbGQgdHJ1ZSBmb3IgamF2YXNjcmlwdC4uLlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2U3Vic2NyaWJlcnMgPT09IHN1YnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1YnNjcmliZXJzID0gc3VicztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRldGFjaGFibGUgb2YgdGhpcy5wcml2RGV0YWNoYWJsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgZGV0YWNoYWJsZS5kZXRhY2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlByb21pc2VTdG9yZS5sZW5ndGgoKSA+IDAgJiYgcGVuZGluZ0l0ZW1Qcm9jZXNzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvbWlzZUFycmF5ID0gW107XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlByb21pc2VTdG9yZS50b0FycmF5KCkuZm9yRWFjaCgod3JhcHBlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZUFycmF5LnB1c2god3JhcHBlcik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZUFycmF5KS5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1YnNjcmliZXJzID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkxpc3QuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdJdGVtUHJvY2Vzc29yKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZMaXN0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfSkudGhlbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3Vic2NyaWJlcnMgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZMaXN0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkaXNwb3NlKHJlYXNvbikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgeWllbGQgdGhpcy5kcmFpbkFuZERpc3Bvc2UobnVsbCwgcmVhc29uKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRyYWluKCkge1xuICAgICAgICBpZiAoIXRoaXMucHJpdklzRHJhaW5JblByb2dyZXNzICYmICF0aGlzLnByaXZJc0Rpc3Bvc2luZykge1xuICAgICAgICAgICAgdGhpcy5wcml2SXNEcmFpbkluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3Qgc3VicyA9IHRoaXMucHJpdlN1YnNjcmliZXJzO1xuICAgICAgICAgICAgY29uc3QgbGlzdHMgPSB0aGlzLnByaXZMaXN0O1xuICAgICAgICAgICAgaWYgKHN1YnMgJiYgbGlzdHMpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAobGlzdHMubGVuZ3RoKCkgPiAwICYmIHN1YnMubGVuZ3RoKCkgPiAwICYmICF0aGlzLnByaXZJc0Rpc3Bvc2luZykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJzY3JpYmVyID0gc3Vicy5yZW1vdmVGaXJzdCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaWJlci50eXBlID09PSBTdWJzY3JpYmVyVHlwZS5QZWVrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmRlZmVycmFsLnJlc29sdmUobGlzdHMuZmlyc3QoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXF1ZXVlZEl0ZW0gPSBsaXN0cy5yZW1vdmVGaXJzdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5kZWZlcnJhbC5yZXNvbHZlKGRlcXVldWVkSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gbm90ZTogdGhpcyBibG9jayBhc3N1bWVzIGNvb3BlcmF0aXZlIG11bHRpdGFza2luZywgaS5lLixcbiAgICAgICAgICAgICAgICAvLyBiZXR3ZWVuIHRoZSBpZi1zdGF0ZW1lbnQgYW5kIHRoZSBhc3NpZ25tZW50IHRoZXJlIGFyZSBub1xuICAgICAgICAgICAgICAgIC8vIHRocmVhZCBzd2l0Y2hlcy5cbiAgICAgICAgICAgICAgICAvLyBSZWFzb24gaXMgdGhhdCBiZXR3ZWVuIHRoZSBpbml0aWFsIGNvbnN0ID0gdGhpcy47IGFuZCB0aGlzXG4gICAgICAgICAgICAgICAgLy8gcG9pbnQgdGhlcmUgaXMgdGhlIGRlcnJhbC5yZXNvbHZlKCkgb3BlcmF0aW9uIHRoYXQgbWlnaHQgaGF2ZVxuICAgICAgICAgICAgICAgIC8vIGNhdXNlZCByZWN1cnNpdmUgY2FsbHMgdG8gdGhlIFF1ZXVlLCBlc3BlY2lhbGx5LCBjYWxsaW5nXG4gICAgICAgICAgICAgICAgLy8gRGlzcG9zZSgpIG9uIHRoZSBxdWV1ZSBhbHJlZHkgKHdoaWNoIHdvdWxkIHJlc2V0IHRoZSB2YXJcbiAgICAgICAgICAgICAgICAvLyBoZXJlIHRvIG51bGwhKS5cbiAgICAgICAgICAgICAgICAvLyBUaGF0IHNob3VsZCBnZW5lcmFsbHkgaG9sZCB0cnVlIGZvciBqYXZhc2NyaXB0Li4uXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlN1YnNjcmliZXJzID09PSBzdWJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlN1YnNjcmliZXJzID0gc3VicztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gbm90ZTogdGhpcyBibG9jayBhc3N1bWVzIGNvb3BlcmF0aXZlIG11bHRpdGFza2luZywgaS5lLixcbiAgICAgICAgICAgICAgICAvLyBiZXR3ZWVuIHRoZSBpZi1zdGF0ZW1lbnQgYW5kIHRoZSBhc3NpZ25tZW50IHRoZXJlIGFyZSBub1xuICAgICAgICAgICAgICAgIC8vIHRocmVhZCBzd2l0Y2hlcy5cbiAgICAgICAgICAgICAgICAvLyBSZWFzb24gaXMgdGhhdCBiZXR3ZWVuIHRoZSBpbml0aWFsIGNvbnN0ID0gdGhpcy47IGFuZCB0aGlzXG4gICAgICAgICAgICAgICAgLy8gcG9pbnQgdGhlcmUgaXMgdGhlIGRlcnJhbC5yZXNvbHZlKCkgb3BlcmF0aW9uIHRoYXQgbWlnaHQgaGF2ZVxuICAgICAgICAgICAgICAgIC8vIGNhdXNlZCByZWN1cnNpdmUgY2FsbHMgdG8gdGhlIFF1ZXVlLCBlc3BlY2lhbGx5LCBjYWxsaW5nXG4gICAgICAgICAgICAgICAgLy8gRGlzcG9zZSgpIG9uIHRoZSBxdWV1ZSBhbHJlZHkgKHdoaWNoIHdvdWxkIHJlc2V0IHRoZSB2YXJcbiAgICAgICAgICAgICAgICAvLyBoZXJlIHRvIG51bGwhKS5cbiAgICAgICAgICAgICAgICAvLyBUaGF0IHNob3VsZCBnZW5lcmFsbHkgaG9sZCB0cnVlIGZvciBqYXZhc2NyaXB0Li4uXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdkxpc3QgPT09IGxpc3RzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkxpc3QgPSBsaXN0cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByaXZJc0RyYWluSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRocm93SWZEaXNwb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5pc0Rpc3Bvc2VkKCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZEaXNwb3NlUmVhc29uKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FcnJvcih0aGlzLnByaXZEaXNwb3NlUmVhc29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3REaXNwb3NlZEVycm9yKFwiUXVldWVcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5wcml2SXNEaXNwb3NpbmcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXJyb3IoXCJRdWV1ZSBkaXNwb3NpbmdcIik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVF1ZXVlLmpzLm1hcFxuIiwiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50ICovXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IE1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4vQ29ubmVjdGlvbk1lc3NhZ2VcIjtcbmltcG9ydCB7IEFyZ3VtZW50TnVsbEVycm9yLCBJbnZhbGlkT3BlcmF0aW9uRXJyb3IgfSBmcm9tIFwiLi9FcnJvclwiO1xuaW1wb3J0IHsgY3JlYXRlTm9EYXNoR3VpZCB9IGZyb20gXCIuL0d1aWRcIjtcbmV4cG9ydCBjbGFzcyBSYXdXZWJzb2NrZXRNZXNzYWdlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlVHlwZSwgcGF5bG9hZCwgaWQpIHtcbiAgICAgICAgdGhpcy5wcml2UGF5bG9hZCA9IG51bGw7XG4gICAgICAgIGlmICghcGF5bG9hZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50TnVsbEVycm9yKFwicGF5bG9hZFwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICAgIGlmIChtZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuQmluYXJ5ICYmIHBheWxvYWQuX19wcm90b19fLmNvbnN0cnVjdG9yLm5hbWUgIT09IFwiQXJyYXlCdWZmZXJcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FcnJvcihcIlBheWxvYWQgbXVzdCBiZSBBcnJheUJ1ZmZlclwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLlRleHQgJiYgISh0eXBlb2YgKHBheWxvYWQpID09PSBcInN0cmluZ1wiKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FcnJvcihcIlBheWxvYWQgbXVzdCBiZSBhIHN0cmluZ1wiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZNZXNzYWdlVHlwZSA9IG1lc3NhZ2VUeXBlO1xuICAgICAgICB0aGlzLnByaXZQYXlsb2FkID0gcGF5bG9hZDtcbiAgICAgICAgdGhpcy5wcml2SWQgPSBpZCA/IGlkIDogY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgIH1cbiAgICBnZXQgbWVzc2FnZVR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZNZXNzYWdlVHlwZTtcbiAgICB9XG4gICAgZ2V0IHBheWxvYWQoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLXJldHVyblxuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGF5bG9hZDtcbiAgICB9XG4gICAgZ2V0IHRleHRDb250ZW50KCkge1xuICAgICAgICBpZiAodGhpcy5wcml2TWVzc2FnZVR5cGUgPT09IE1lc3NhZ2VUeXBlLkJpbmFyeSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FcnJvcihcIk5vdCBzdXBwb3J0ZWQgZm9yIGJpbmFyeSBtZXNzYWdlXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXlsb2FkO1xuICAgIH1cbiAgICBnZXQgYmluYXJ5Q29udGVudCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdk1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5UZXh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiTm90IHN1cHBvcnRlZCBmb3IgdGV4dCBtZXNzYWdlXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXlsb2FkO1xuICAgIH1cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJZDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJhd1dlYnNvY2tldE1lc3NhZ2UuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmV4cG9ydCBjbGFzcyBSaWZmUGNtRW5jb2RlciB7XG4gICAgY29uc3RydWN0b3IoYWN0dWFsU2FtcGxlUmF0ZSwgZGVzaXJlZFNhbXBsZVJhdGUpIHtcbiAgICAgICAgdGhpcy5wcml2QWN0dWFsU2FtcGxlUmF0ZSA9IGFjdHVhbFNhbXBsZVJhdGU7XG4gICAgICAgIHRoaXMucHJpdkRlc2lyZWRTYW1wbGVSYXRlID0gZGVzaXJlZFNhbXBsZVJhdGU7XG4gICAgfVxuICAgIGVuY29kZShhY3R1YWxBdWRpb0ZyYW1lKSB7XG4gICAgICAgIGNvbnN0IGF1ZGlvRnJhbWUgPSB0aGlzLmRvd25TYW1wbGVBdWRpb0ZyYW1lKGFjdHVhbEF1ZGlvRnJhbWUsIHRoaXMucHJpdkFjdHVhbFNhbXBsZVJhdGUsIHRoaXMucHJpdkRlc2lyZWRTYW1wbGVSYXRlKTtcbiAgICAgICAgaWYgKCFhdWRpb0ZyYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhdWRpb0xlbmd0aCA9IGF1ZGlvRnJhbWUubGVuZ3RoICogMjtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGF1ZGlvTGVuZ3RoKTtcbiAgICAgICAgY29uc3QgdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xuICAgICAgICB0aGlzLmZsb2F0VG8xNkJpdFBDTSh2aWV3LCAwLCBhdWRpb0ZyYW1lKTtcbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9XG4gICAgc2V0U3RyaW5nKHZpZXcsIG9mZnNldCwgc3RyKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCArIGksIHN0ci5jaGFyQ29kZUF0KGkpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmbG9hdFRvMTZCaXRQQ00odmlldywgb2Zmc2V0LCBpbnB1dCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrLCBvZmZzZXQgKz0gMikge1xuICAgICAgICAgICAgY29uc3QgcyA9IE1hdGgubWF4KC0xLCBNYXRoLm1pbigxLCBpbnB1dFtpXSkpO1xuICAgICAgICAgICAgdmlldy5zZXRJbnQxNihvZmZzZXQsIHMgPCAwID8gcyAqIDB4ODAwMCA6IHMgKiAweDdGRkYsIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRvd25TYW1wbGVBdWRpb0ZyYW1lKHNyY0ZyYW1lLCBzcmNSYXRlLCBkc3RSYXRlKSB7XG4gICAgICAgIGlmICghc3JjRnJhbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkc3RSYXRlID09PSBzcmNSYXRlIHx8IGRzdFJhdGUgPiBzcmNSYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gc3JjRnJhbWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmF0aW8gPSBzcmNSYXRlIC8gZHN0UmF0ZTtcbiAgICAgICAgY29uc3QgZHN0TGVuZ3RoID0gTWF0aC5yb3VuZChzcmNGcmFtZS5sZW5ndGggLyByYXRpbyk7XG4gICAgICAgIGNvbnN0IGRzdEZyYW1lID0gbmV3IEZsb2F0MzJBcnJheShkc3RMZW5ndGgpO1xuICAgICAgICBsZXQgc3JjT2Zmc2V0ID0gMDtcbiAgICAgICAgbGV0IGRzdE9mZnNldCA9IDA7XG4gICAgICAgIHdoaWxlIChkc3RPZmZzZXQgPCBkc3RMZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRTcmNPZmZzZXQgPSBNYXRoLnJvdW5kKChkc3RPZmZzZXQgKyAxKSAqIHJhdGlvKTtcbiAgICAgICAgICAgIGxldCBhY2N1bSA9IDA7XG4gICAgICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKHNyY09mZnNldCA8IG5leHRTcmNPZmZzZXQgJiYgc3JjT2Zmc2V0IDwgc3JjRnJhbWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgYWNjdW0gKz0gc3JjRnJhbWVbc3JjT2Zmc2V0KytdO1xuICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkc3RGcmFtZVtkc3RPZmZzZXQrK10gPSBhY2N1bSAvIGNvdW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkc3RGcmFtZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJpZmZQY21FbmNvZGVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IEludmFsaWRPcGVyYXRpb25FcnJvciB9IGZyb20gXCIuL0Vycm9yXCI7XG5pbXBvcnQgeyBjcmVhdGVOb0Rhc2hHdWlkIH0gZnJvbSBcIi4vR3VpZFwiO1xuaW1wb3J0IHsgUXVldWUgfSBmcm9tIFwiLi9RdWV1ZVwiO1xuZXhwb3J0IGNsYXNzIFN0cmVhbSB7XG4gICAgY29uc3RydWN0b3Ioc3RyZWFtSWQpIHtcbiAgICAgICAgdGhpcy5wcml2SXNXcml0ZUVuZGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdklzUmVhZEVuZGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdklkID0gc3RyZWFtSWQgPyBzdHJlYW1JZCA6IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2UmVhZGVyUXVldWUgPSBuZXcgUXVldWUoKTtcbiAgICB9XG4gICAgZ2V0IGlzQ2xvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNXcml0ZUVuZGVkO1xuICAgIH1cbiAgICBnZXQgaXNSZWFkRW5kZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc1JlYWRFbmRlZDtcbiAgICB9XG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SWQ7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAoIXRoaXMucHJpdklzV3JpdGVFbmRlZCkge1xuICAgICAgICAgICAgdGhpcy53cml0ZVN0cmVhbUNodW5rKHtcbiAgICAgICAgICAgICAgICBidWZmZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgaXNFbmQ6IHRydWUsXG4gICAgICAgICAgICAgICAgdGltZVJlY2VpdmVkOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnByaXZJc1dyaXRlRW5kZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdyaXRlU3RyZWFtQ2h1bmsoc3RyZWFtQ2h1bmspIHtcbiAgICAgICAgdGhpcy50aHJvd0lmQ2xvc2VkKCk7XG4gICAgICAgIGlmICghdGhpcy5wcml2UmVhZGVyUXVldWUuaXNEaXNwb3NlZCgpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlYWRlclF1ZXVlLmVucXVldWUoc3RyZWFtQ2h1bmspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVhZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdklzUmVhZEVuZGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiU3RyZWFtIHJlYWQgaGFzIGFscmVhZHkgZmluaXNoZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlYWRlclF1ZXVlXG4gICAgICAgICAgICAuZGVxdWV1ZSgpXG4gICAgICAgICAgICAudGhlbigoc3RyZWFtQ2h1bmspID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChzdHJlYW1DaHVuayA9PT0gdW5kZWZpbmVkIHx8IHN0cmVhbUNodW5rLmlzRW5kKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVhZGVyUXVldWUuZGlzcG9zZShcIkVuZCBvZiBzdHJlYW0gcmVhY2hlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdHJlYW1DaHVuaztcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZWFkRW5kZWQoKSB7XG4gICAgICAgIGlmICghdGhpcy5wcml2SXNSZWFkRW5kZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdklzUmVhZEVuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlYWRlclF1ZXVlID0gbmV3IFF1ZXVlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhyb3dJZkNsb3NlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdklzV3JpdGVFbmRlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FcnJvcihcIlN0cmVhbSBjbG9zZWRcIik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0cmVhbS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBTdHJpbmcgaGVscGVyIGZ1bmN0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgU3RyaW5nVXRpbHMge1xuICAgIC8qKlxuICAgICAqIEZvcm1hdHMgYSBzdHJpbmcgYnkgcmVwbGFjaW5nIHRoZSBuYW1lZCB7a2V5c30gaW4gdGhlIHN0cmluZyB3aXRoIHRoZSB2YWx1ZXMgY29udGFpbmVkIGluIHRoZSByZXBsYWNlbWVudCBkaWN0aW9uYXJ5LlxuICAgICAqIEBwYXJhbSBmb3JtYXQgVGhlIGZvcm1hdCBzdHJpbmcgdGhhdCBjb250YWlucyB0aGUgcGFydHMgdG8gcmVwbGFjZSBzdXJyb3VuZGVkIGJ5IHt9LiBGb3IgZXhhbXBsZTogXCJ3c3M6Ly97cmVnaW9ufS5jdHMuc3BlZWNoLm1pY3Jvc29mdC5jb21cIi5cbiAgICAgKiBJZiB5b3VyIHN0cmluZyBuZWVkcyB0byBjb250YWluIGEgeyBvciB9IHlvdSBjYW4gdXNlIHRoZSB7eyBhbmQgfX0gZXNjYXBlIHNlcXVlbmNlcyByZXNwZWN0aXZlbHkuXG4gICAgICogQHBhcmFtIHJlcGxhY2VtZW50cyBUaGUgZGljdGlvbmFyeSBvZiByZXBsYWNlbWVudHMuIElmIGEgcmVwbGFjZW1lbnQgaXMgbm90IGZvdW5kLCBpdCBpcyByZXBsYWNlZCB3aXRoIGFuIGVtcHR5IHN0cmluZ1xuICAgICAqIEByZXR1cm5zIFRoZSBmb3JtYXR0ZWQgc3RyaW5nLiBJZiB5b3UgcGFzcyBpbiBhIG51bGwgb3IgdW5kZWZpbmVkIGZvcm1hdCBzdHJpbmcsIGFuIGVtcHR5IHN0cmluZyB3aWxsIGJlIHJldHVybmVkXG4gICAgICovXG4gICAgc3RhdGljIGZvcm1hdFN0cmluZyhmb3JtYXQsIHJlcGxhY2VtZW50cykge1xuICAgICAgICBpZiAoIWZvcm1hdCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZXBsYWNlbWVudHMpIHtcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZvcm1hdHRlZCA9IFwiXCI7XG4gICAgICAgIGxldCBrZXkgPSBcIlwiO1xuICAgICAgICBjb25zdCBhcHBlbmRUb0Zvcm1hdHRlZCA9IChzdHIpID0+IHtcbiAgICAgICAgICAgIGZvcm1hdHRlZCArPSBzdHI7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGFwcGVuZFRvS2V5ID0gKHN0cikgPT4ge1xuICAgICAgICAgICAga2V5ICs9IHN0cjtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGFwcGVuZEZ1bmMgPSBhcHBlbmRUb0Zvcm1hdHRlZDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3JtYXQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBmb3JtYXRbaV07XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gaSArIDEgPCBmb3JtYXQubGVuZ3RoID8gZm9ybWF0W2kgKyAxXSA6IFwiXCI7XG4gICAgICAgICAgICBzd2l0Y2ggKGMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwie1wiOlxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCA9PT0gXCJ7XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZEZ1bmMoXCJ7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kRnVuYyA9IGFwcGVuZFRvS2V5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ9XCI6XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0ID09PSBcIn1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kRnVuYyhcIn1cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVwbGFjZW1lbnRzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQgKz0gcmVwbGFjZW1lbnRzW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRGdW5jID0gYXBwZW5kVG9Gb3JtYXR0ZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZEZ1bmMoYyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb3JtYXR0ZWQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdHJpbmdVdGlscy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuZXhwb3J0IGNsYXNzIFRpbWVvdXQge1xuICAgIHN0YXRpYyBsb2FkKCkge1xuICAgICAgICAvLyBQcmVmaWxsaW5nIHRoZSBNYXBzIHdpdGggYSBmdW5jdGlvbiBpbmRleGVkIGJ5IHplcm8gaXMgbmVjZXNzYXJ5IHRvIGJlIGNvbXBsaWFudCB3aXRoIHRoZSBzcGVjaWZpY2F0aW9uLlxuICAgICAgICBjb25zdCBzY2hlZHVsZWRUaW1lb3V0RnVuY3Rpb25zID0gbmV3IE1hcChbWzAsICgpID0+IHsgfV1dKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgICAgICAgY29uc3QgdW5oYW5kbGVkUmVxdWVzdHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICBjb25zdCB3b3JrZXJTY3JpcHQgPSBgIWZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Z1bmN0aW9uIG4ocil7aWYodFtyXSlyZXR1cm4gdFtyXS5leHBvcnRzO3ZhciBvPXRbcl09e2k6cixsOiExLGV4cG9ydHM6e319O3JldHVybiBlW3JdLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLG4pLG8ubD0hMCxvLmV4cG9ydHN9bi5tPWUsbi5jPXQsbi5kPWZ1bmN0aW9uKGUsdCxyKXtuLm8oZSx0KXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7ZW51bWVyYWJsZTohMCxnZXQ6cn0pfSxuLnI9ZnVuY3Rpb24oZSl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOlwiTW9kdWxlXCJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0sbi50PWZ1bmN0aW9uKGUsdCl7aWYoMSZ0JiYoZT1uKGUpKSw4JnQpcmV0dXJuIGU7aWYoNCZ0JiZcIm9iamVjdFwiPT10eXBlb2YgZSYmZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciByPU9iamVjdC5jcmVhdGUobnVsbCk7aWYobi5yKHIpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiZGVmYXVsdFwiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOmV9KSwyJnQmJlwic3RyaW5nXCIhPXR5cGVvZiBlKWZvcih2YXIgbyBpbiBlKW4uZChyLG8sZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19LmJpbmQobnVsbCxvKSk7cmV0dXJuIHJ9LG4ubj1mdW5jdGlvbihlKXt2YXIgdD1lJiZlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gbi5kKHQsXCJhXCIsdCksdH0sbi5vPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfSxuLnA9XCJcIixuKG4ucz0xNCl9KFtmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7bi5kKHQsXCJhXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGl9KSksbi5kKHQsXCJiXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHV9KSksbi5kKHQsXCJjXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGF9KSksbi5kKHQsXCJkXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGR9KSk7Y29uc3Qgcj1uZXcgTWFwLG89bmV3IE1hcCxpPWU9Pntjb25zdCB0PXIuZ2V0KGUpO2lmKHZvaWQgMD09PXQpdGhyb3cgbmV3IEVycm9yKCdUaGVyZSBpcyBubyBpbnRlcnZhbCBzY2hlZHVsZWQgd2l0aCB0aGUgZ2l2ZW4gaWQgXCInLmNvbmNhdChlLCdcIi4nKSk7Y2xlYXJUaW1lb3V0KHQpLHIuZGVsZXRlKGUpfSx1PWU9Pntjb25zdCB0PW8uZ2V0KGUpO2lmKHZvaWQgMD09PXQpdGhyb3cgbmV3IEVycm9yKCdUaGVyZSBpcyBubyB0aW1lb3V0IHNjaGVkdWxlZCB3aXRoIHRoZSBnaXZlbiBpZCBcIicuY29uY2F0KGUsJ1wiLicpKTtjbGVhclRpbWVvdXQodCksby5kZWxldGUoZSl9LGY9KGUsdCk9PntsZXQgbixyO2lmKFwicGVyZm9ybWFuY2VcImluIHNlbGYpe2NvbnN0IG89cGVyZm9ybWFuY2Uubm93KCk7bj1vLHI9ZS1NYXRoLm1heCgwLG8tdCl9ZWxzZSBuPURhdGUubm93KCkscj1lO3JldHVybntleHBlY3RlZDpuK3IscmVtYWluaW5nRGVsYXk6cn19LGM9KGUsdCxuLHIpPT57Y29uc3Qgbz1cInBlcmZvcm1hbmNlXCJpbiBzZWxmP3BlcmZvcm1hbmNlLm5vdygpOkRhdGUubm93KCk7bz5uP3Bvc3RNZXNzYWdlKHtpZDpudWxsLG1ldGhvZDpcImNhbGxcIixwYXJhbXM6e3RpbWVySWQ6dH19KTplLnNldCh0LHNldFRpbWVvdXQoYyxuLW8sZSx0LG4pKX0sYT0oZSx0LG4pPT57Y29uc3R7ZXhwZWN0ZWQ6byxyZW1haW5pbmdEZWxheTppfT1mKGUsbik7ci5zZXQodCxzZXRUaW1lb3V0KGMsaSxyLHQsbykpfSxkPShlLHQsbik9Pntjb25zdHtleHBlY3RlZDpyLHJlbWFpbmluZ0RlbGF5Oml9PWYoZSxuKTtvLnNldCh0LHNldFRpbWVvdXQoYyxpLG8sdCxyKSl9fSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKHQpO3ZhciByPW4oMik7Zm9yKHZhciBvIGluIHIpXCJkZWZhdWx0XCIhPT1vJiZmdW5jdGlvbihlKXtuLmQodCxlLChmdW5jdGlvbigpe3JldHVybiByW2VdfSkpfShvKTt2YXIgaT1uKDMpO2Zvcih2YXIgbyBpbiBpKVwiZGVmYXVsdFwiIT09byYmZnVuY3Rpb24oZSl7bi5kKHQsZSwoZnVuY3Rpb24oKXtyZXR1cm4gaVtlXX0pKX0obyk7dmFyIHU9big0KTtmb3IodmFyIG8gaW4gdSlcImRlZmF1bHRcIiE9PW8mJmZ1bmN0aW9uKGUpe24uZCh0LGUsKGZ1bmN0aW9uKCl7cmV0dXJuIHVbZV19KSl9KG8pO3ZhciBmPW4oNSk7Zm9yKHZhciBvIGluIGYpXCJkZWZhdWx0XCIhPT1vJiZmdW5jdGlvbihlKXtuLmQodCxlLChmdW5jdGlvbigpe3JldHVybiBmW2VdfSkpfShvKTt2YXIgYz1uKDYpO2Zvcih2YXIgbyBpbiBjKVwiZGVmYXVsdFwiIT09byYmZnVuY3Rpb24oZSl7bi5kKHQsZSwoZnVuY3Rpb24oKXtyZXR1cm4gY1tlXX0pKX0obyk7dmFyIGE9big3KTtmb3IodmFyIG8gaW4gYSlcImRlZmF1bHRcIiE9PW8mJmZ1bmN0aW9uKGUpe24uZCh0LGUsKGZ1bmN0aW9uKCl7cmV0dXJuIGFbZV19KSl9KG8pO3ZhciBkPW4oOCk7Zm9yKHZhciBvIGluIGQpXCJkZWZhdWx0XCIhPT1vJiZmdW5jdGlvbihlKXtuLmQodCxlLChmdW5jdGlvbigpe3JldHVybiBkW2VdfSkpfShvKTt2YXIgcz1uKDkpO2Zvcih2YXIgbyBpbiBzKVwiZGVmYXVsdFwiIT09byYmZnVuY3Rpb24oZSl7bi5kKHQsZSwoZnVuY3Rpb24oKXtyZXR1cm4gc1tlXX0pKX0obyl9LGZ1bmN0aW9uKGUsdCl7fSxmdW5jdGlvbihlLHQpe30sZnVuY3Rpb24oZSx0KXt9LGZ1bmN0aW9uKGUsdCl7fSxmdW5jdGlvbihlLHQpe30sZnVuY3Rpb24oZSx0KXt9LGZ1bmN0aW9uKGUsdCl7fSxmdW5jdGlvbihlLHQpe30sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO24ucih0KTt2YXIgcj1uKDExKTtmb3IodmFyIG8gaW4gcilcImRlZmF1bHRcIiE9PW8mJmZ1bmN0aW9uKGUpe24uZCh0LGUsKGZ1bmN0aW9uKCl7cmV0dXJuIHJbZV19KSl9KG8pO3ZhciBpPW4oMTIpO2Zvcih2YXIgbyBpbiBpKVwiZGVmYXVsdFwiIT09byYmZnVuY3Rpb24oZSl7bi5kKHQsZSwoZnVuY3Rpb24oKXtyZXR1cm4gaVtlXX0pKX0obyk7dmFyIHU9bigxMyk7Zm9yKHZhciBvIGluIHUpXCJkZWZhdWx0XCIhPT1vJiZmdW5jdGlvbihlKXtuLmQodCxlLChmdW5jdGlvbigpe3JldHVybiB1W2VdfSkpfShvKX0sZnVuY3Rpb24oZSx0KXt9LGZ1bmN0aW9uKGUsdCl7fSxmdW5jdGlvbihlLHQpe30sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO24ucih0KTt2YXIgcj1uKDApLG89bigxKTtmb3IodmFyIGkgaW4gbylcImRlZmF1bHRcIiE9PWkmJmZ1bmN0aW9uKGUpe24uZCh0LGUsKGZ1bmN0aW9uKCl7cmV0dXJuIG9bZV19KSl9KGkpO3ZhciB1PW4oMTApO2Zvcih2YXIgaSBpbiB1KVwiZGVmYXVsdFwiIT09aSYmZnVuY3Rpb24oZSl7bi5kKHQsZSwoZnVuY3Rpb24oKXtyZXR1cm4gdVtlXX0pKX0oaSk7YWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwoe2RhdGE6ZX0pPT57dHJ5e2lmKFwiY2xlYXJcIj09PWUubWV0aG9kKXtjb25zdHtpZDp0LHBhcmFtczp7dGltZXJJZDpufX09ZTtPYmplY3Qoci5iKShuKSxwb3N0TWVzc2FnZSh7ZXJyb3I6bnVsbCxpZDp0fSl9ZWxzZXtpZihcInNldFwiIT09ZS5tZXRob2QpdGhyb3cgbmV3IEVycm9yKCdUaGUgZ2l2ZW4gbWV0aG9kIFwiJy5jb25jYXQoZS5tZXRob2QsJ1wiIGlzIG5vdCBzdXBwb3J0ZWQnKSk7e2NvbnN0e3BhcmFtczp7ZGVsYXk6dCxub3c6bix0aW1lcklkOm99fT1lO09iamVjdChyLmQpKHQsbyxuKX19fWNhdGNoKHQpe3Bvc3RNZXNzYWdlKHtlcnJvcjp7bWVzc2FnZTp0Lm1lc3NhZ2V9LGlkOmUuaWQscmVzdWx0Om51bGx9KX19KX1dKTtgO1xuICAgICAgICBjb25zdCB3b3JrZXJVcmwgPSBcImRhdGE6dGV4dC9qYXZhc2NyaXB0O2Jhc2U2NCxcIiArIGJ0b2Eod29ya2VyU2NyaXB0KTtcbiAgICAgICAgY29uc3Qgd29ya2VyID0gbmV3IFdvcmtlcih3b3JrZXJVcmwpO1xuICAgICAgICB3b3JrZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKHsgZGF0YSB9KSA9PiB7XG4gICAgICAgICAgICBpZiAoVGltZW91dC5pc0NhbGxOb3RpZmljYXRpb24oZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHBhcmFtczogeyB0aW1lcklkIH0gfSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgY29uc3QgaWRPckZ1bmMgPSBzY2hlZHVsZWRUaW1lb3V0RnVuY3Rpb25zLmdldCh0aW1lcklkKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGlkT3JGdW5jID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVuaGFuZGxlZFRpbWVySWQgPSB1bmhhbmRsZWRSZXF1ZXN0cy5nZXQoaWRPckZ1bmMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodW5oYW5kbGVkVGltZXJJZCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmhhbmRsZWRUaW1lcklkICE9PSB0aW1lcklkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgdGltZXIgaXMgaW4gYW4gdW5kZWZpbmVkIHN0YXRlLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgaWRPckZ1bmMgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWRPckZ1bmMoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQSB0aW1lb3V0IGNhbiBiZSBzYWZlbHkgZGVsZXRlZCBiZWNhdXNlIGl0IGlzIG9ubHkgY2FsbGVkIG9uY2UuXG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlZFRpbWVvdXRGdW5jdGlvbnMuZGVsZXRlKHRpbWVySWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHRpbWVyIGlzIGluIGFuIHVuZGVmaW5lZCBzdGF0ZS5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoVGltZW91dC5pc0NsZWFyUmVzcG9uc2UoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGlkIH0gPSBkYXRhO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVuaGFuZGxlZFRpbWVySWQgPSB1bmhhbmRsZWRSZXF1ZXN0cy5nZXQoaWQpO1xuICAgICAgICAgICAgICAgIGlmICh1bmhhbmRsZWRUaW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHRpbWVyIGlzIGluIGFuIHVuZGVmaW5lZCBzdGF0ZS5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVuaGFuZGxlZFJlcXVlc3RzLmRlbGV0ZShpZCk7XG4gICAgICAgICAgICAgICAgc2NoZWR1bGVkVGltZW91dEZ1bmN0aW9ucy5kZWxldGUodW5oYW5kbGVkVGltZXJJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGVycm9yOiB7IG1lc3NhZ2UgfSB9ID0gZGF0YTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjbGVhclRpbWVvdXQgPSAodGltZXJJZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICAgICAgdW5oYW5kbGVkUmVxdWVzdHMuc2V0KGlkLCB0aW1lcklkKTtcbiAgICAgICAgICAgIHNjaGVkdWxlZFRpbWVvdXRGdW5jdGlvbnMuc2V0KHRpbWVySWQsIGlkKTtcbiAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcImNsZWFyXCIsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7IHRpbWVySWQgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHNldFRpbWVvdXQgPSAoZnVuYywgZGVsYXkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVySWQgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICAgICAgc2NoZWR1bGVkVGltZW91dEZ1bmN0aW9ucy5zZXQodGltZXJJZCwgZnVuYyk7XG4gICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIGlkOiBudWxsLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJzZXRcIixcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgZGVsYXksXG4gICAgICAgICAgICAgICAgICAgIG5vdzogcGVyZm9ybWFuY2Uubm93KCksXG4gICAgICAgICAgICAgICAgICAgIHRpbWVySWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aW1lcklkO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0LFxuICAgICAgICAgICAgc2V0VGltZW91dFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgbG9hZFdvcmtlclRpbWVycygpIHtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGlmIChUaW1lb3V0LndvcmtlclRpbWVycyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBUaW1lb3V0LndvcmtlclRpbWVycztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFRpbWVvdXQud29ya2VyVGltZXJzID0gVGltZW91dC5sb2FkKCk7XG4gICAgICAgICAgICByZXR1cm4gVGltZW91dC53b3JrZXJUaW1lcnM7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBpc0NhbGxOb3RpZmljYXRpb24obWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZS5tZXRob2QgIT09IHVuZGVmaW5lZCAmJiBtZXNzYWdlLm1ldGhvZCA9PT0gXCJjYWxsXCI7XG4gICAgfVxuICAgIHN0YXRpYyBpc0NsZWFyUmVzcG9uc2UobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZS5lcnJvciA9PT0gbnVsbCAmJiB0eXBlb2YgbWVzc2FnZS5pZCA9PT0gXCJudW1iZXJcIjtcbiAgICB9XG59XG5UaW1lb3V0LndvcmtlclRpbWVycyA9IG51bGw7XG5UaW1lb3V0LmNsZWFyVGltZW91dCA9ICh0aW1lcklkKSA9PiBUaW1lb3V0LnRpbWVycygpLmNsZWFyVGltZW91dCh0aW1lcklkKTtcblRpbWVvdXQuc2V0VGltZW91dCA9IChmdW5jLCBkZWxheSkgPT4gVGltZW91dC50aW1lcnMoKS5zZXRUaW1lb3V0KGZ1bmMsIGRlbGF5KTtcblRpbWVvdXQudGltZXJzID0gVGltZW91dC5sb2FkV29ya2VyVGltZXJzKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbWVvdXQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogRGVmaW5lcyBjb250ZW50cyBvZiByZWNlaXZlZCBtZXNzYWdlL2V2ZW50cy5cbiAqIEBjbGFzcyBBY3Rpdml0eVJlY2VpdmVkRXZlbnRBcmdzXG4gKi9cbmV4cG9ydCBjbGFzcyBBY3Rpdml0eVJlY2VpdmVkRXZlbnRBcmdzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7YW55fSBhY3Rpdml0eSAtIFRoZSBhY3Rpdml0eS4uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYWN0aXZpdHksIGF1ZGlvU3RyZWFtKSB7XG4gICAgICAgIHRoaXMucHJpdkFjdGl2aXR5ID0gYWN0aXZpdHk7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvU3RyZWFtID0gYXVkaW9TdHJlYW07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHJlY2VpdmVkIGFjdGl2aXR5XG4gICAgICogQG1lbWJlciBBY3Rpdml0eVJlY2VpdmVkRXZlbnRBcmdzLnByb3RvdHlwZS5hY3Rpdml0eVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7YW55fSB0aGUgcmVjZWl2ZWQgYWN0aXZpdHkuXG4gICAgICovXG4gICAgZ2V0IGFjdGl2aXR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QWN0aXZpdHk7XG4gICAgfVxuICAgIGdldCBhdWRpb1N0cmVhbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvU3RyZWFtO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QWN0aXZpdHlSZWNlaXZlZEV2ZW50QXJncy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgRmlsZUF1ZGlvU291cmNlLCBNaWNBdWRpb1NvdXJjZSwgUGNtUmVjb3JkZXIsIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi5icm93c2VyL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IEF1ZGlvSW5wdXRTdHJlYW0sIFB1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2ssIFB1bGxBdWRpb091dHB1dFN0cmVhbSwgUHVzaEF1ZGlvT3V0cHV0U3RyZWFtLCBQdXNoQXVkaW9PdXRwdXRTdHJlYW1DYWxsYmFjaywgU3BlYWtlckF1ZGlvRGVzdGluYXRpb24gfSBmcm9tIFwiLi4vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQXVkaW9GaWxlV3JpdGVyIH0gZnJvbSBcIi4vQXVkaW9GaWxlV3JpdGVyXCI7XG5pbXBvcnQgeyBQdWxsQXVkaW9JbnB1dFN0cmVhbUltcGwgfSBmcm9tIFwiLi9BdWRpb0lucHV0U3RyZWFtXCI7XG5pbXBvcnQgeyBQdXNoQXVkaW9PdXRwdXRTdHJlYW1JbXBsIH0gZnJvbSBcIi4vQXVkaW9PdXRwdXRTdHJlYW1cIjtcbi8qKlxuICogUmVwcmVzZW50cyBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9uIHVzZWQgZm9yIHNwZWNpZnlpbmcgd2hhdCB0eXBlIG9mIGlucHV0IHRvIHVzZSAobWljcm9waG9uZSwgZmlsZSwgc3RyZWFtKS5cbiAqIEBjbGFzcyBBdWRpb0NvbmZpZ1xuICogVXBkYXRlZCBpbiB2ZXJzaW9uIDEuMTEuMFxuICovXG5leHBvcnQgY2xhc3MgQXVkaW9Db25maWcge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gQXVkaW9Db25maWcgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgZGVmYXVsdCBtaWNyb3Bob25lIG9uIHRoZSBzeXN0ZW0uXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZy5mcm9tRGVmYXVsdE1pY3JvcGhvbmVJbnB1dFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7QXVkaW9Db25maWd9IFRoZSBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9uIGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21EZWZhdWx0TWljcm9waG9uZUlucHV0KCkge1xuICAgICAgICBjb25zdCBwY21SZWNvcmRlciA9IG5ldyBQY21SZWNvcmRlcih0cnVlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBBdWRpb0NvbmZpZ0ltcGwobmV3IE1pY0F1ZGlvU291cmNlKHBjbVJlY29yZGVyKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gQXVkaW9Db25maWcgb2JqZWN0IHJlcHJlc2VudGluZyBhIG1pY3JvcGhvbmUgd2l0aCB0aGUgc3BlY2lmaWVkIGRldmljZSBJRC5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnLmZyb21NaWNyb3Bob25lSW5wdXRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWR9IGRldmljZUlkIC0gU3BlY2lmaWVzIHRoZSBkZXZpY2UgSUQgb2YgdGhlIG1pY3JvcGhvbmUgdG8gYmUgdXNlZC5cbiAgICAgKiBEZWZhdWx0IG1pY3JvcGhvbmUgaXMgdXNlZCB0aGUgdmFsdWUgaXMgb21pdHRlZC5cbiAgICAgKiBAcmV0dXJucyB7QXVkaW9Db25maWd9IFRoZSBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9uIGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21NaWNyb3Bob25lSW5wdXQoZGV2aWNlSWQpIHtcbiAgICAgICAgY29uc3QgcGNtUmVjb3JkZXIgPSBuZXcgUGNtUmVjb3JkZXIodHJ1ZSk7XG4gICAgICAgIHJldHVybiBuZXcgQXVkaW9Db25maWdJbXBsKG5ldyBNaWNBdWRpb1NvdXJjZShwY21SZWNvcmRlciwgZGV2aWNlSWQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBBdWRpb0NvbmZpZyBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgZmlsZS5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnLmZyb21XYXZGaWxlSW5wdXRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtGaWxlfSBmaWxlTmFtZSAtIFNwZWNpZmllcyB0aGUgYXVkaW8gaW5wdXQgZmlsZS4gQ3VycmVudGx5LCBvbmx5IFdBViAvIFBDTSBpcyBzdXBwb3J0ZWQuXG4gICAgICogQHJldHVybnMge0F1ZGlvQ29uZmlnfSBUaGUgYXVkaW8gaW5wdXQgY29uZmlndXJhdGlvbiBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tV2F2RmlsZUlucHV0KGZpbGUsIG5hbWUgPSBcInVubmFtZWRCdWZmZXIud2F2XCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdWRpb0NvbmZpZ0ltcGwobmV3IEZpbGVBdWRpb1NvdXJjZShmaWxlLCBuYW1lKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gQXVkaW9Db25maWcgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3BlY2lmaWVkIHN0cmVhbS5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnLmZyb21TdHJlYW1JbnB1dFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0F1ZGlvSW5wdXRTdHJlYW0gfCBQdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrIHwgTWVkaWFTdHJlYW19IGF1ZGlvU3RyZWFtIC0gU3BlY2lmaWVzIHRoZSBjdXN0b20gYXVkaW8gaW5wdXRcbiAgICAgKiBzdHJlYW0uIEN1cnJlbnRseSwgb25seSBXQVYgLyBQQ00gaXMgc3VwcG9ydGVkLlxuICAgICAqIEByZXR1cm5zIHtBdWRpb0NvbmZpZ30gVGhlIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb24gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVN0cmVhbUlucHV0KGF1ZGlvU3RyZWFtKSB7XG4gICAgICAgIGlmIChhdWRpb1N0cmVhbSBpbnN0YW5jZW9mIFB1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9Db25maWdJbXBsKG5ldyBQdWxsQXVkaW9JbnB1dFN0cmVhbUltcGwoYXVkaW9TdHJlYW0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXVkaW9TdHJlYW0gaW5zdGFuY2VvZiBBdWRpb0lucHV0U3RyZWFtKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvQ29uZmlnSW1wbChhdWRpb1N0cmVhbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBNZWRpYVN0cmVhbSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBhdWRpb1N0cmVhbSBpbnN0YW5jZW9mIE1lZGlhU3RyZWFtKSB7XG4gICAgICAgICAgICBjb25zdCBwY21SZWNvcmRlciA9IG5ldyBQY21SZWNvcmRlcihmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvQ29uZmlnSW1wbChuZXcgTWljQXVkaW9Tb3VyY2UocGNtUmVjb3JkZXIsIG51bGwsIG51bGwsIGF1ZGlvU3RyZWFtKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IFN1cHBvcnRlZCBUeXBlXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIEF1ZGlvQ29uZmlnIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGRlZmF1bHQgc3BlYWtlci5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnLmZyb21EZWZhdWx0U3BlYWtlck91dHB1dFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7QXVkaW9Db25maWd9IFRoZSBhdWRpbyBvdXRwdXQgY29uZmlndXJhdGlvbiBiZWluZyBjcmVhdGVkLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xMS4wXG4gICAgICovXG4gICAgc3RhdGljIGZyb21EZWZhdWx0U3BlYWtlck91dHB1dCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dENvbmZpZ0ltcGwobmV3IFNwZWFrZXJBdWRpb0Rlc3RpbmF0aW9uKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIEF1ZGlvQ29uZmlnIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1c3RvbSBJUGxheWVyIG9iamVjdC5cbiAgICAgKiBZb3UgY2FuIHVzZSB0aGUgSVBsYXllciBvYmplY3QgdG8gY29udHJvbCBwYXVzZSwgcmVzdW1lLCBldGMuXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZy5mcm9tU3BlYWtlck91dHB1dFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0lQbGF5ZXJ9IHBsYXllciAtIHRoZSBJUGxheWVyIG9iamVjdCBmb3IgcGxheWJhY2suXG4gICAgICogQHJldHVybnMge0F1ZGlvQ29uZmlnfSBUaGUgYXVkaW8gb3V0cHV0IGNvbmZpZ3VyYXRpb24gYmVpbmcgY3JlYXRlZC5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTIuMFxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tU3BlYWtlck91dHB1dChwbGF5ZXIpIHtcbiAgICAgICAgaWYgKHBsYXllciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gQXVkaW9Db25maWcuZnJvbURlZmF1bHRTcGVha2VyT3V0cHV0KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBsYXllciBpbnN0YW5jZW9mIFNwZWFrZXJBdWRpb0Rlc3RpbmF0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Q29uZmlnSW1wbChwbGF5ZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBTdXBwb3J0ZWQgVHlwZVwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBBdWRpb0NvbmZpZyBvYmplY3QgcmVwcmVzZW50aW5nIGEgc3BlY2lmaWVkIG91dHB1dCBhdWRpbyBmaWxlXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZy5mcm9tQXVkaW9GaWxlT3V0cHV0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7UGF0aExpa2V9IGZpbGVuYW1lIC0gdGhlIGZpbGVuYW1lIG9mIHRoZSBvdXRwdXQgYXVkaW8gZmlsZVxuICAgICAqIEByZXR1cm5zIHtBdWRpb0NvbmZpZ30gVGhlIGF1ZGlvIG91dHB1dCBjb25maWd1cmF0aW9uIGJlaW5nIGNyZWF0ZWQuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjExLjBcbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUF1ZGlvRmlsZU91dHB1dChmaWxlbmFtZSkge1xuICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Q29uZmlnSW1wbChuZXcgQXVkaW9GaWxlV3JpdGVyKGZpbGVuYW1lKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gQXVkaW9Db25maWcgb2JqZWN0IHJlcHJlc2VudGluZyBhIHNwZWNpZmllZCBhdWRpbyBvdXRwdXQgc3RyZWFtXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZy5mcm9tU3RyZWFtT3V0cHV0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7QXVkaW9PdXRwdXRTdHJlYW0gfCBQdXNoQXVkaW9PdXRwdXRTdHJlYW1DYWxsYmFja30gYXVkaW9TdHJlYW0gLSBTcGVjaWZpZXMgdGhlIGN1c3RvbSBhdWRpbyBvdXRwdXRcbiAgICAgKiBzdHJlYW0uXG4gICAgICogQHJldHVybnMge0F1ZGlvQ29uZmlnfSBUaGUgYXVkaW8gb3V0cHV0IGNvbmZpZ3VyYXRpb24gYmVpbmcgY3JlYXRlZC5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTEuMFxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tU3RyZWFtT3V0cHV0KGF1ZGlvU3RyZWFtKSB7XG4gICAgICAgIGlmIChhdWRpb1N0cmVhbSBpbnN0YW5jZW9mIFB1c2hBdWRpb091dHB1dFN0cmVhbUNhbGxiYWNrKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Q29uZmlnSW1wbChuZXcgUHVzaEF1ZGlvT3V0cHV0U3RyZWFtSW1wbChhdWRpb1N0cmVhbSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdWRpb1N0cmVhbSBpbnN0YW5jZW9mIFB1c2hBdWRpb091dHB1dFN0cmVhbSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dENvbmZpZ0ltcGwoYXVkaW9TdHJlYW0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdWRpb1N0cmVhbSBpbnN0YW5jZW9mIFB1bGxBdWRpb091dHB1dFN0cmVhbSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dENvbmZpZ0ltcGwoYXVkaW9TdHJlYW0pO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBTdXBwb3J0ZWQgVHlwZVwiKTtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYXVkaW8gaW5wdXQgc3RyZWFtIHVzZWQgZm9yIGN1c3RvbSBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9ucy5cbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgQXVkaW9Db25maWdJbXBsXG4gKi9cbmV4cG9ydCBjbGFzcyBBdWRpb0NvbmZpZ0ltcGwgZXh0ZW5kcyBBdWRpb0NvbmZpZyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0lBdWRpb1NvdXJjZX0gc291cmNlIC0gQW4gYXVkaW8gc291cmNlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNvdXJjZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnByaXZTb3VyY2UgPSBzb3VyY2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcm1hdCBpbmZvcm1hdGlvbiBmb3IgdGhlIGF1ZGlvXG4gICAgICovXG4gICAgZ2V0IGZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNvdXJjZS5mb3JtYXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBtZW1iZXIgQXVkaW9Db25maWdJbXBsLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZShjYiwgZXJyKSB7XG4gICAgICAgIHRoaXMucHJpdlNvdXJjZS50dXJuT2ZmKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBpZiAoISFjYikge1xuICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBtZW1iZXIgQXVkaW9Db25maWdJbXBsLnByb3RvdHlwZS5pZFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNvdXJjZS5pZCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnSW1wbC5wcm90b3R5cGUudHVybk9uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fSBBIHByb21pc2UuXG4gICAgICovXG4gICAgdHVybk9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U291cmNlLnR1cm5PbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnSW1wbC5wcm90b3R5cGUuYXR0YWNoXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdWRpb05vZGVJZCAtIFRoZSBhdWRpbyBub2RlIGlkLlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPElBdWRpb1N0cmVhbU5vZGU+fSBBIHByb21pc2UuXG4gICAgICovXG4gICAgYXR0YWNoKGF1ZGlvTm9kZUlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTb3VyY2UuYXR0YWNoKGF1ZGlvTm9kZUlkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBBdWRpb0NvbmZpZ0ltcGwucHJvdG90eXBlLmRldGFjaFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXVkaW9Ob2RlSWQgLSBUaGUgYXVkaW8gbm9kZSBpZC5cbiAgICAgKi9cbiAgICBkZXRhY2goYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNvdXJjZS5kZXRhY2goYXVkaW9Ob2RlSWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnSW1wbC5wcm90b3R5cGUudHVybk9mZlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn0gQSBwcm9taXNlLlxuICAgICAqL1xuICAgIHR1cm5PZmYoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTb3VyY2UudHVybk9mZigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIEF1ZGlvQ29uZmlnSW1wbC5wcm90b3R5cGUuZXZlbnRzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtFdmVudFNvdXJjZTxBdWRpb1NvdXJjZUV2ZW50Pn0gQW4gZXZlbnQgc291cmNlIGZvciBhdWRpbyBldmVudHMuXG4gICAgICovXG4gICAgZ2V0IGV2ZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNvdXJjZS5ldmVudHM7XG4gICAgfVxuICAgIHNldFByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbCh2YWx1ZSwgXCJ2YWx1ZVwiKTtcbiAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gdGhpcy5wcml2U291cmNlLnNldFByb3BlcnR5KSB7XG4gICAgICAgICAgICB0aGlzLnByaXZTb3VyY2Uuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBBdWRpb0NvbmZpZyBpbnN0YW5jZSBkb2VzIG5vdCBzdXBwb3J0IHNldHRpbmcgcHJvcGVydGllcy5cIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0UHJvcGVydHkobmFtZSwgZGVmKSB7XG4gICAgICAgIGlmICh1bmRlZmluZWQgIT09IHRoaXMucHJpdlNvdXJjZS5nZXRQcm9wZXJ0eSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNvdXJjZS5nZXRQcm9wZXJ0eShuYW1lLCBkZWYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBBdWRpb0NvbmZpZyBpbnN0YW5jZSBkb2VzIG5vdCBzdXBwb3J0IGdldHRpbmcgcHJvcGVydGllcy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZjtcbiAgICB9XG4gICAgZ2V0IGRldmljZUluZm8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTb3VyY2UuZGV2aWNlSW5mbztcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQXVkaW9PdXRwdXRDb25maWdJbXBsIGV4dGVuZHMgQXVkaW9Db25maWcge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtJQXVkaW9EZXN0aW5hdGlvbn0gZGVzdGluYXRpb24gLSBBbiBhdWRpbyBkZXN0aW5hdGlvbi5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihkZXN0aW5hdGlvbikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnByaXZEZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgIH1cbiAgICBzZXQgZm9ybWF0KGZvcm1hdCkge1xuICAgICAgICB0aGlzLnByaXZEZXN0aW5hdGlvbi5mb3JtYXQgPSBmb3JtYXQ7XG4gICAgfVxuICAgIHdyaXRlKGJ1ZmZlcikge1xuICAgICAgICB0aGlzLnByaXZEZXN0aW5hdGlvbi53cml0ZShidWZmZXIpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5wcml2RGVzdGluYXRpb24uY2xvc2UoKTtcbiAgICB9XG4gICAgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEZXN0aW5hdGlvbi5pZCgpO1xuICAgIH1cbiAgICBzZXRQcm9wZXJ0eSgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBBdWRpb0NvbmZpZyBpbnN0YW5jZSBkb2VzIG5vdCBzdXBwb3J0IHNldHRpbmcgcHJvcGVydGllcy5cIik7XG4gICAgfVxuICAgIGdldFByb3BlcnR5KCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIEF1ZGlvQ29uZmlnIGluc3RhbmNlIGRvZXMgbm90IHN1cHBvcnQgZ2V0dGluZyBwcm9wZXJ0aWVzLlwiKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF1ZGlvQ29uZmlnLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgKiBhcyBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuLi9Db250cmFjdHNcIjtcbmV4cG9ydCBjbGFzcyBBdWRpb0ZpbGVXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGZpbGVuYW1lKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGZzLm9wZW5TeW5jLCBcIlxcbkZpbGUgU3lzdGVtIGFjY2VzcyBub3QgYXZhaWxhYmxlLCBwbGVhc2UgdXNlIFB1c2ggb3IgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtXCIpO1xuICAgICAgICB0aGlzLnByaXZGZCA9IGZzLm9wZW5TeW5jKGZpbGVuYW1lLCBcIndcIik7XG4gICAgfVxuICAgIHNldCBmb3JtYXQoZm9ybWF0KSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTm90VW5kZWZpbmVkKHRoaXMucHJpdkF1ZGlvRm9ybWF0LCBcImZvcm1hdCBpcyBhbHJlYWR5IHNldFwiKTtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9Gb3JtYXQgPSBmb3JtYXQ7XG4gICAgICAgIGxldCBoZWFkZXJPZmZzZXQgPSAwO1xuICAgICAgICBpZiAodGhpcy5wcml2QXVkaW9Gb3JtYXQuaGFzSGVhZGVyKSB7XG4gICAgICAgICAgICBoZWFkZXJPZmZzZXQgPSB0aGlzLnByaXZBdWRpb0Zvcm1hdC5oZWFkZXIuYnl0ZUxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcml2RmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2V3JpdGVTdHJlYW0gPSBmcy5jcmVhdGVXcml0ZVN0cmVhbShcIlwiLCB7IGZkOiB0aGlzLnByaXZGZCwgc3RhcnQ6IGhlYWRlck9mZnNldCwgYXV0b0Nsb3NlOiBmYWxzZSB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3cml0ZShidWZmZXIpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQodGhpcy5wcml2QXVkaW9Gb3JtYXQsIFwibXVzdCBzZXQgZm9ybWF0IGJlZm9yZSB3cml0aW5nLlwiKTtcbiAgICAgICAgaWYgKHRoaXMucHJpdldyaXRlU3RyZWFtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdldyaXRlU3RyZWFtLndyaXRlKG5ldyBVaW50OEFycmF5KGJ1ZmZlci5zbGljZSgwKSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5wcml2RmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2V3JpdGVTdHJlYW0ub24oXCJmaW5pc2hcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZBdWRpb0Zvcm1hdC5oYXNIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2QXVkaW9Gb3JtYXQudXBkYXRlSGVhZGVyKHRoaXMucHJpdldyaXRlU3RyZWFtLmJ5dGVzV3JpdHRlbik7XG4gICAgICAgICAgICAgICAgICAgIGZzLndyaXRlU3luYyh0aGlzLnByaXZGZCwgbmV3IEludDhBcnJheSh0aGlzLnByaXZBdWRpb0Zvcm1hdC5oZWFkZXIpLCAwLCB0aGlzLnByaXZBdWRpb0Zvcm1hdC5oZWFkZXIuYnl0ZUxlbmd0aCwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZzLmNsb3NlU3luYyh0aGlzLnByaXZGZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2RmQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMucHJpdldyaXRlU3RyZWFtLmVuZCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SWQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdWRpb0ZpbGVXcml0ZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cbmltcG9ydCB7IGNvbm5lY3Rpdml0eSwgdHlwZSwgfSBmcm9tIFwiLi4vLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBBdWRpb1NvdXJjZUluaXRpYWxpemluZ0V2ZW50LCBBdWRpb1NvdXJjZVJlYWR5RXZlbnQsIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGVkRXZlbnQsIEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGluZ0V2ZW50LCBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50LCBDaHVua2VkQXJyYXlCdWZmZXJTdHJlYW0sIEV2ZW50cywgRXZlbnRTb3VyY2UsIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBjcmVhdGVOb0Rhc2hHdWlkIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9HdWlkXCI7XG5pbXBvcnQgeyBBdWRpb1N0cmVhbUZvcm1hdCB9IGZyb20gXCIuLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBBdWRpb1N0cmVhbUZvcm1hdEltcGwgfSBmcm9tIFwiLi9BdWRpb1N0cmVhbUZvcm1hdFwiO1xuLyoqXG4gKiBSZXByZXNlbnRzIGF1ZGlvIGlucHV0IHN0cmVhbSB1c2VkIGZvciBjdXN0b20gYXVkaW8gaW5wdXQgY29uZmlndXJhdGlvbnMuXG4gKiBAY2xhc3MgQXVkaW9JbnB1dFN0cmVhbVxuICovXG5leHBvcnQgY2xhc3MgQXVkaW9JbnB1dFN0cmVhbSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2UuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG1lbW9yeSBiYWNrZWQgUHVzaEF1ZGlvSW5wdXRTdHJlYW0gd2l0aCB0aGUgc3BlY2lmaWVkIGF1ZGlvIGZvcm1hdC5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvSW5wdXRTdHJlYW0uY3JlYXRlUHVzaFN0cmVhbVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0F1ZGlvU3RyZWFtRm9ybWF0fSBmb3JtYXQgLSBUaGUgYXVkaW8gZGF0YSBmb3JtYXQgaW4gd2hpY2ggYXVkaW8gd2lsbCBiZVxuICAgICAqIHdyaXR0ZW4gdG8gdGhlIHB1c2ggYXVkaW8gc3RyZWFtJ3Mgd3JpdGUoKSBtZXRob2QgKFJlcXVpcmVkIGlmIGZvcm1hdCBpcyBub3QgMTYga0h6IDE2Yml0IG1vbm8gUENNKS5cbiAgICAgKiBAcmV0dXJucyB7UHVzaEF1ZGlvSW5wdXRTdHJlYW19IFRoZSBhdWRpbyBpbnB1dCBzdHJlYW0gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlUHVzaFN0cmVhbShmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIFB1c2hBdWRpb0lucHV0U3RyZWFtLmNyZWF0ZShmb3JtYXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgUHVsbEF1ZGlvSW5wdXRTdHJlYW0gdGhhdCBkZWxlZ2F0ZXMgdG8gdGhlIHNwZWNpZmllZCBjYWxsYmFjayBpbnRlcmZhY2UgZm9yIHJlYWQoKVxuICAgICAqIGFuZCBjbG9zZSgpIG1ldGhvZHMuXG4gICAgICogQG1lbWJlciBBdWRpb0lucHV0U3RyZWFtLmNyZWF0ZVB1bGxTdHJlYW1cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtQdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrfSBjYWxsYmFjayAtIFRoZSBjdXN0b20gYXVkaW8gaW5wdXQgb2JqZWN0LCBkZXJpdmVkIGZyb21cbiAgICAgKiBQdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrXG4gICAgICogQHBhcmFtIHtBdWRpb1N0cmVhbUZvcm1hdH0gZm9ybWF0IC0gVGhlIGF1ZGlvIGRhdGEgZm9ybWF0IGluIHdoaWNoIGF1ZGlvIHdpbGwgYmUgcmV0dXJuZWQgZnJvbVxuICAgICAqIHRoZSBjYWxsYmFjaydzIHJlYWQoKSBtZXRob2QgKFJlcXVpcmVkIGlmIGZvcm1hdCBpcyBub3QgMTYga0h6IDE2Yml0IG1vbm8gUENNKS5cbiAgICAgKiBAcmV0dXJucyB7UHVsbEF1ZGlvSW5wdXRTdHJlYW19IFRoZSBhdWRpbyBpbnB1dCBzdHJlYW0gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlUHVsbFN0cmVhbShjYWxsYmFjaywgZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiBQdWxsQXVkaW9JbnB1dFN0cmVhbS5jcmVhdGUoY2FsbGJhY2ssIGZvcm1hdCk7XG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk9vcHNcIik7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIG1lbW9yeSBiYWNrZWQgcHVzaCBhdWRpbyBpbnB1dCBzdHJlYW0gdXNlZCBmb3IgY3VzdG9tIGF1ZGlvIGlucHV0IGNvbmZpZ3VyYXRpb25zLlxuICogQGNsYXNzIFB1c2hBdWRpb0lucHV0U3RyZWFtXG4gKi9cbmV4cG9ydCBjbGFzcyBQdXNoQXVkaW9JbnB1dFN0cmVhbSBleHRlbmRzIEF1ZGlvSW5wdXRTdHJlYW0ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBtZW1vcnkgYmFja2VkIFB1c2hBdWRpb0lucHV0U3RyZWFtIHdpdGggdGhlIHNwZWNpZmllZCBhdWRpbyBmb3JtYXQuXG4gICAgICogQG1lbWJlciBQdXNoQXVkaW9JbnB1dFN0cmVhbS5jcmVhdGVcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtBdWRpb1N0cmVhbUZvcm1hdH0gZm9ybWF0IC0gVGhlIGF1ZGlvIGRhdGEgZm9ybWF0IGluIHdoaWNoIGF1ZGlvIHdpbGwgYmUgd3JpdHRlbiB0byB0aGVcbiAgICAgKiBwdXNoIGF1ZGlvIHN0cmVhbSdzIHdyaXRlKCkgbWV0aG9kIChSZXF1aXJlZCBpZiBmb3JtYXQgaXMgbm90IDE2IGtIeiAxNmJpdCBtb25vIFBDTSkuXG4gICAgICogQHJldHVybnMge1B1c2hBdWRpb0lucHV0U3RyZWFtfSBUaGUgcHVzaCBhdWRpbyBpbnB1dCBzdHJlYW0gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gbmV3IFB1c2hBdWRpb0lucHV0U3RyZWFtSW1wbChmb3JtYXQpO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBtZW1vcnkgYmFja2VkIHB1c2ggYXVkaW8gaW5wdXQgc3RyZWFtIHVzZWQgZm9yIGN1c3RvbSBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9ucy5cbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgUHVzaEF1ZGlvSW5wdXRTdHJlYW1JbXBsXG4gKi9cbmV4cG9ydCBjbGFzcyBQdXNoQXVkaW9JbnB1dFN0cmVhbUltcGwgZXh0ZW5kcyBQdXNoQXVkaW9JbnB1dFN0cmVhbSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGFsaXplcyBhbiBpbnN0YW5jZSB3aXRoIHRoZSBnaXZlbiB2YWx1ZXMuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtBdWRpb1N0cmVhbUZvcm1hdH0gZm9ybWF0IC0gVGhlIGF1ZGlvIHN0cmVhbSBmb3JtYXQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZm9ybWF0KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5wcml2Rm9ybWF0ID0gQXVkaW9TdHJlYW1Gb3JtYXRJbXBsLmdldERlZmF1bHRJbnB1dEZvcm1hdCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2Rm9ybWF0ID0gZm9ybWF0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdkV2ZW50cyA9IG5ldyBFdmVudFNvdXJjZSgpO1xuICAgICAgICB0aGlzLnByaXZJZCA9IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtID0gbmV3IENodW5rZWRBcnJheUJ1ZmZlclN0cmVhbSh0aGlzLnByaXZGb3JtYXQuYXZnQnl0ZXNQZXJTZWMgLyAxMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcm1hdCBpbmZvcm1hdGlvbiBmb3IgdGhlIGF1ZGlvXG4gICAgICovXG4gICAgZ2V0IGZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnByaXZGb3JtYXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgdGhlIGF1ZGlvIGRhdGEgc3BlY2lmaWVkIGJ5IG1ha2luZyBhbiBpbnRlcm5hbCBjb3B5IG9mIHRoZSBkYXRhLlxuICAgICAqIEBtZW1iZXIgUHVzaEF1ZGlvSW5wdXRTdHJlYW1JbXBsLnByb3RvdHlwZS53cml0ZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBkYXRhQnVmZmVyIC0gVGhlIGF1ZGlvIGJ1ZmZlciBvZiB3aGljaCB0aGlzIGZ1bmN0aW9uIHdpbGwgbWFrZSBhIGNvcHkuXG4gICAgICovXG4gICAgd3JpdGUoZGF0YUJ1ZmZlcikge1xuICAgICAgICB0aGlzLnByaXZTdHJlYW0ud3JpdGVTdHJlYW1DaHVuayh7XG4gICAgICAgICAgICBidWZmZXI6IGRhdGFCdWZmZXIsXG4gICAgICAgICAgICBpc0VuZDogZmFsc2UsXG4gICAgICAgICAgICB0aW1lUmVjZWl2ZWQ6IERhdGUubm93KClcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgc3RyZWFtLlxuICAgICAqIEBtZW1iZXIgUHVzaEF1ZGlvSW5wdXRTdHJlYW1JbXBsLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtLmNsb3NlKCk7XG4gICAgfVxuICAgIGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SWQ7XG4gICAgfVxuICAgIHR1cm5PbigpIHtcbiAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1NvdXJjZUluaXRpYWxpemluZ0V2ZW50KHRoaXMucHJpdklkKSk7IC8vIG5vIHN0cmVhbSBpZFxuICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU291cmNlUmVhZHlFdmVudCh0aGlzLnByaXZJZCkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGF0dGFjaChhdWRpb05vZGVJZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVBdHRhY2hpbmdFdmVudCh0aGlzLnByaXZJZCwgYXVkaW9Ob2RlSWQpKTtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMudHVybk9uKCk7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLnByaXZTdHJlYW07XG4gICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGVkRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRldGFjaDogKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU3RyZWFtTm9kZURldGFjaGVkRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnR1cm5PZmYoKTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBpZDogKCkgPT4gYXVkaW9Ob2RlSWQsXG4gICAgICAgICAgICAgICAgcmVhZDogKCkgPT4gc3RyZWFtLnJlYWQoKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZXRhY2goYXVkaW9Ob2RlSWQpIHtcbiAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVEZXRhY2hlZEV2ZW50KHRoaXMucHJpdklkLCBhdWRpb05vZGVJZCkpO1xuICAgIH1cbiAgICB0dXJuT2ZmKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGdldCBldmVudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFdmVudHM7XG4gICAgfVxuICAgIGdldCBkZXZpY2VJbmZvKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIGJpdHNwZXJzYW1wbGU6IHRoaXMucHJpdkZvcm1hdC5iaXRzUGVyU2FtcGxlLFxuICAgICAgICAgICAgY2hhbm5lbGNvdW50OiB0aGlzLnByaXZGb3JtYXQuY2hhbm5lbHMsXG4gICAgICAgICAgICBjb25uZWN0aXZpdHk6IGNvbm5lY3Rpdml0eS5Vbmtub3duLFxuICAgICAgICAgICAgbWFudWZhY3R1cmVyOiBcIlNwZWVjaCBTREtcIixcbiAgICAgICAgICAgIG1vZGVsOiBcIlB1c2hTdHJlYW1cIixcbiAgICAgICAgICAgIHNhbXBsZXJhdGU6IHRoaXMucHJpdkZvcm1hdC5zYW1wbGVzUGVyU2VjLFxuICAgICAgICAgICAgdHlwZTogdHlwZS5TdHJlYW0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvbkV2ZW50KGV2ZW50KSB7XG4gICAgICAgIHRoaXMucHJpdkV2ZW50cy5vbkV2ZW50KGV2ZW50KTtcbiAgICAgICAgRXZlbnRzLmluc3RhbmNlLm9uRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgICB0b0J1ZmZlcihhcnJheUJ1ZmZlcikge1xuICAgICAgICBjb25zdCBidWYgPSBCdWZmZXIuYWxsb2MoYXJyYXlCdWZmZXIuYnl0ZUxlbmd0aCk7XG4gICAgICAgIGNvbnN0IHZpZXcgPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcik7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBidWZbaV0gPSB2aWV3W2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWY7XG4gICAgfVxufVxuLypcbiAqIFJlcHJlc2VudHMgYXVkaW8gaW5wdXQgc3RyZWFtIHVzZWQgZm9yIGN1c3RvbSBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9ucy5cbiAqIEBjbGFzcyBQdWxsQXVkaW9JbnB1dFN0cmVhbVxuICovXG5leHBvcnQgY2xhc3MgUHVsbEF1ZGlvSW5wdXRTdHJlYW0gZXh0ZW5kcyBBdWRpb0lucHV0U3RyZWFtIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbmQgaW5zdGFuY2UuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBQdWxsQXVkaW9JbnB1dFN0cmVhbSB0aGF0IGRlbGVnYXRlcyB0byB0aGUgc3BlY2lmaWVkIGNhbGxiYWNrIGludGVyZmFjZSBmb3JcbiAgICAgKiByZWFkKCkgYW5kIGNsb3NlKCkgbWV0aG9kcywgdXNpbmcgdGhlIGRlZmF1bHQgZm9ybWF0ICgxNiBrSHogMTZiaXQgbW9ubyBQQ00pLlxuICAgICAqIEBtZW1iZXIgUHVsbEF1ZGlvSW5wdXRTdHJlYW0uY3JlYXRlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7UHVsbEF1ZGlvSW5wdXRTdHJlYW1DYWxsYmFja30gY2FsbGJhY2sgLSBUaGUgY3VzdG9tIGF1ZGlvIGlucHV0IG9iamVjdCxcbiAgICAgKiBkZXJpdmVkIGZyb20gUHVsbEF1ZGlvSW5wdXRTdHJlYW1DdXN0b21DYWxsYmFja1xuICAgICAqIEBwYXJhbSB7QXVkaW9TdHJlYW1Gb3JtYXR9IGZvcm1hdCAtIFRoZSBhdWRpbyBkYXRhIGZvcm1hdCBpbiB3aGljaCBhdWRpbyB3aWxsIGJlXG4gICAgICogcmV0dXJuZWQgZnJvbSB0aGUgY2FsbGJhY2sncyByZWFkKCkgbWV0aG9kIChSZXF1aXJlZCBpZiBmb3JtYXQgaXMgbm90IDE2IGtIeiAxNmJpdCBtb25vIFBDTSkuXG4gICAgICogQHJldHVybnMge1B1bGxBdWRpb0lucHV0U3RyZWFtfSBUaGUgcHVzaCBhdWRpbyBpbnB1dCBzdHJlYW0gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGNhbGxiYWNrLCBmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQdWxsQXVkaW9JbnB1dFN0cmVhbUltcGwoY2FsbGJhY2ssIGZvcm1hdCk7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGF1ZGlvIGlucHV0IHN0cmVhbSB1c2VkIGZvciBjdXN0b20gYXVkaW8gaW5wdXQgY29uZmlndXJhdGlvbnMuXG4gKiBAcHJpdmF0ZVxuICogQGNsYXNzIFB1bGxBdWRpb0lucHV0U3RyZWFtSW1wbFxuICovXG5leHBvcnQgY2xhc3MgUHVsbEF1ZGlvSW5wdXRTdHJlYW1JbXBsIGV4dGVuZHMgUHVsbEF1ZGlvSW5wdXRTdHJlYW0ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBQdWxsQXVkaW9JbnB1dFN0cmVhbSB0aGF0IGRlbGVnYXRlcyB0byB0aGUgc3BlY2lmaWVkIGNhbGxiYWNrIGludGVyZmFjZSBmb3JcbiAgICAgKiByZWFkKCkgYW5kIGNsb3NlKCkgbWV0aG9kcywgdXNpbmcgdGhlIGRlZmF1bHQgZm9ybWF0ICgxNiBrSHogMTZiaXQgbW9ubyBQQ00pLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7UHVsbEF1ZGlvSW5wdXRTdHJlYW1DYWxsYmFja30gY2FsbGJhY2sgLSBUaGUgY3VzdG9tIGF1ZGlvIGlucHV0IG9iamVjdCxcbiAgICAgKiBkZXJpdmVkIGZyb20gUHVsbEF1ZGlvSW5wdXRTdHJlYW1DdXN0b21DYWxsYmFja1xuICAgICAqIEBwYXJhbSB7QXVkaW9TdHJlYW1Gb3JtYXR9IGZvcm1hdCAtIFRoZSBhdWRpbyBkYXRhIGZvcm1hdCBpbiB3aGljaCBhdWRpbyB3aWxsIGJlXG4gICAgICogcmV0dXJuZWQgZnJvbSB0aGUgY2FsbGJhY2sncyByZWFkKCkgbWV0aG9kIChSZXF1aXJlZCBpZiBmb3JtYXQgaXMgbm90IDE2IGtIeiAxNmJpdCBtb25vIFBDTSkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY2FsbGJhY2ssIGZvcm1hdCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAodW5kZWZpbmVkID09PSBmb3JtYXQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkZvcm1hdCA9IEF1ZGlvU3RyZWFtRm9ybWF0LmdldERlZmF1bHRJbnB1dEZvcm1hdCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2Rm9ybWF0ID0gZm9ybWF0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdkV2ZW50cyA9IG5ldyBFdmVudFNvdXJjZSgpO1xuICAgICAgICB0aGlzLnByaXZJZCA9IGNyZWF0ZU5vRGFzaEd1aWQoKTtcbiAgICAgICAgdGhpcy5wcml2Q2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgdGhpcy5wcml2SXNDbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2QnVmZmVyU2l6ZSA9IHRoaXMucHJpdkZvcm1hdC5hdmdCeXRlc1BlclNlYyAvIDEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3JtYXQgaW5mb3JtYXRpb24gZm9yIHRoZSBhdWRpb1xuICAgICAqL1xuICAgIGdldCBmb3JtYXQoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5wcml2Rm9ybWF0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBzdHJlYW0uXG4gICAgICogQG1lbWJlciBQdWxsQXVkaW9JbnB1dFN0cmVhbUltcGwucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLnByaXZJc0Nsb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMucHJpdkNhbGxiYWNrLmNsb3NlKCk7XG4gICAgfVxuICAgIGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SWQ7XG4gICAgfVxuICAgIHR1cm5PbigpIHtcbiAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1NvdXJjZUluaXRpYWxpemluZ0V2ZW50KHRoaXMucHJpdklkKSk7IC8vIG5vIHN0cmVhbSBpZFxuICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU291cmNlUmVhZHlFdmVudCh0aGlzLnByaXZJZCkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGF0dGFjaChhdWRpb05vZGVJZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdGhpcy5vbkV2ZW50KG5ldyBBdWRpb1N0cmVhbU5vZGVBdHRhY2hpbmdFdmVudCh0aGlzLnByaXZJZCwgYXVkaW9Ob2RlSWQpKTtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMudHVybk9uKCk7XG4gICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU3RyZWFtTm9kZUF0dGFjaGVkRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRldGFjaDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDYWxsYmFjay5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU3RyZWFtTm9kZURldGFjaGVkRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnR1cm5PZmYoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlkOiAoKSA9PiBhdWRpb05vZGVJZCxcbiAgICAgICAgICAgICAgICByZWFkOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0b3RhbEJ5dGVzID0gMDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRyYW5zbWl0QnVmZjtcbiAgICAgICAgICAgICAgICAgICAgLy8gVW50aWwgd2UgaGF2ZSB0aGUgbWluaW11bSBudW1iZXIgb2YgYnl0ZXMgdG8gc2VuZCBpbiBhIHRyYW5zbWlzc2lvbiwga2VlcCBhc2tpbmcgZm9yIG1vcmUuXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICh0b3RhbEJ5dGVzIDwgdGhpcy5wcml2QnVmZmVyU2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2l6aW5nIHRoZSByZWFkIGJ1ZmZlciB0byB0aGUgZGVsdGEgYmV0d2VlbiB0aGUgcGVyZmVjdCBzaXplIGFuZCB3aGF0J3MgbGVmdCBtZWFucyB3ZSB3b24ndCBldmVyIGdldCB0b28gbXVjaFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGF0YSBiYWNrLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVhZEJ1ZmYgPSBuZXcgQXJyYXlCdWZmZXIodGhpcy5wcml2QnVmZmVyU2l6ZSAtIHRvdGFsQnl0ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHVsbGVkQnl0ZXMgPSB0aGlzLnByaXZDYWxsYmFjay5yZWFkKHJlYWRCdWZmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIHJldHVybiBidWZmZXIgeWV0IGRlZmluZWQsIHNldCB0aGUgcmV0dXJuIGJ1ZmZlciB0byB0aGUgdGhhdCB3YXMganVzdCBwb3B1bGF0ZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHdhcywgaWYgd2UgaGF2ZSBlbm91Z2ggZGF0YSB0aGVyZSdzIG5vIGNvcHkgcGVuYWx0eSwgYnV0IGlmIHdlIGRvbid0IHdlIGhhdmUgYSBidWZmZXIgdGhhdCdzIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJlZmVycmVkIHNpemUgYWxsb2NhdGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdHJhbnNtaXRCdWZmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNtaXRCdWZmID0gcmVhZEJ1ZmY7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3QgdGhlIGZpcnN0IGJpdGUgYXQgdGhlIGFwcGxlLCBzbyBmaWxsIHRoZSByZXR1cm4gYnVmZmVyIHdpdGggdGhlIGRhdGEgd2UgZ290IGJhY2suXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW50VmlldyA9IG5ldyBJbnQ4QXJyYXkodHJhbnNtaXRCdWZmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRWaWV3LnNldChuZXcgSW50OEFycmF5KHJlYWRCdWZmKSwgdG90YWxCeXRlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gYnl0ZXMgdG8gcmVhZCwganVzdCBicmVhayBvdXQgYW5kIGJlIGRvbmUuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gcHVsbGVkQnl0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gcHVsbGVkQnl0ZXM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXI6IHRyYW5zbWl0QnVmZi5zbGljZSgwLCB0b3RhbEJ5dGVzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRW5kOiB0aGlzLnByaXZJc0Nsb3NlZCB8fCB0b3RhbEJ5dGVzID09PSAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZVJlY2VpdmVkOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRldGFjaChhdWRpb05vZGVJZCkge1xuICAgICAgICB0aGlzLm9uRXZlbnQobmV3IEF1ZGlvU3RyZWFtTm9kZURldGFjaGVkRXZlbnQodGhpcy5wcml2SWQsIGF1ZGlvTm9kZUlkKSk7XG4gICAgfVxuICAgIHR1cm5PZmYoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZ2V0IGV2ZW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkV2ZW50cztcbiAgICB9XG4gICAgZ2V0IGRldmljZUluZm8oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgYml0c3BlcnNhbXBsZTogdGhpcy5wcml2Rm9ybWF0LmJpdHNQZXJTYW1wbGUsXG4gICAgICAgICAgICBjaGFubmVsY291bnQ6IHRoaXMucHJpdkZvcm1hdC5jaGFubmVscyxcbiAgICAgICAgICAgIGNvbm5lY3Rpdml0eTogY29ubmVjdGl2aXR5LlVua25vd24sXG4gICAgICAgICAgICBtYW51ZmFjdHVyZXI6IFwiU3BlZWNoIFNES1wiLFxuICAgICAgICAgICAgbW9kZWw6IFwiUHVsbFN0cmVhbVwiLFxuICAgICAgICAgICAgc2FtcGxlcmF0ZTogdGhpcy5wcml2Rm9ybWF0LnNhbXBsZXNQZXJTZWMsXG4gICAgICAgICAgICB0eXBlOiB0eXBlLlN0cmVhbSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9uRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5wcml2RXZlbnRzLm9uRXZlbnQoZXZlbnQpO1xuICAgICAgICBFdmVudHMuaW5zdGFuY2Uub25FdmVudChldmVudCk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdWRpb0lucHV0U3RyZWFtLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQgfSBmcm9tIFwiLi4vU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0XCI7XG5pbXBvcnQgeyBBdWRpb0Zvcm1hdFRhZywgQXVkaW9TdHJlYW1Gb3JtYXRJbXBsIH0gZnJvbSBcIi4vQXVkaW9TdHJlYW1Gb3JtYXRcIjtcbi8qKlxuICogQHByaXZhdGVcbiAqIEBjbGFzcyBBdWRpb091dHB1dEZvcm1hdEltcGxcbiAqIFVwZGF0ZWQgaW4gdmVyc2lvbiAxLjE3LjBcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1jbGFzc2VzLXBlci1maWxlXG5leHBvcnQgY2xhc3MgQXVkaW9PdXRwdXRGb3JtYXRJbXBsIGV4dGVuZHMgQXVkaW9TdHJlYW1Gb3JtYXRJbXBsIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIHdpdGggdGhlIGdpdmVuIHZhbHVlcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0gZm9ybWF0VGFnXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNoYW5uZWxzIC0gTnVtYmVyIG9mIGNoYW5uZWxzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzYW1wbGVzUGVyU2VjIC0gU2FtcGxlcyBwZXIgc2Vjb25kLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhdmdCeXRlc1BlclNlYyAtIEF2ZXJhZ2UgYnl0ZXMgcGVyIHNlY29uZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYmxvY2tBbGlnbiAtIEJsb2NrIGFsaWdubWVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYml0c1BlclNhbXBsZSAtIEJpdHMgcGVyIHNhbXBsZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXVkaW9Gb3JtYXRTdHJpbmcgLSBBdWRpbyBmb3JtYXQgc3RyaW5nXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RBdWRpb0Zvcm1hdFN0cmluZyAtIEF1ZGlvIGZvcm1hdCBzdHJpbmcgc2VudCB0byBzZXJ2aWNlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaGFzSGVhZGVyIC0gSWYgdGhlIGZvcm1hdCBoYXMgaGVhZGVyIG9yIG5vdC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihmb3JtYXRUYWcsIGNoYW5uZWxzLCBzYW1wbGVzUGVyU2VjLCBhdmdCeXRlc1BlclNlYywgYmxvY2tBbGlnbiwgYml0c1BlclNhbXBsZSwgYXVkaW9Gb3JtYXRTdHJpbmcsIHJlcXVlc3RBdWRpb0Zvcm1hdFN0cmluZywgaGFzSGVhZGVyKSB7XG4gICAgICAgIHN1cGVyKHNhbXBsZXNQZXJTZWMsIGJpdHNQZXJTYW1wbGUsIGNoYW5uZWxzLCBmb3JtYXRUYWcpO1xuICAgICAgICB0aGlzLmZvcm1hdFRhZyA9IGZvcm1hdFRhZztcbiAgICAgICAgdGhpcy5hdmdCeXRlc1BlclNlYyA9IGF2Z0J5dGVzUGVyU2VjO1xuICAgICAgICB0aGlzLmJsb2NrQWxpZ24gPSBibG9ja0FsaWduO1xuICAgICAgICB0aGlzLnByaUF1ZGlvRm9ybWF0U3RyaW5nID0gYXVkaW9Gb3JtYXRTdHJpbmc7XG4gICAgICAgIHRoaXMucHJpUmVxdWVzdEF1ZGlvRm9ybWF0U3RyaW5nID0gcmVxdWVzdEF1ZGlvRm9ybWF0U3RyaW5nO1xuICAgICAgICB0aGlzLnByaUhhc0hlYWRlciA9IGhhc0hlYWRlcjtcbiAgICB9XG4gICAgc3RhdGljIGZyb21TcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQoc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0KSB7XG4gICAgICAgIGlmIChzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbC5nZXREZWZhdWx0T3V0cHV0Rm9ybWF0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbC5mcm9tU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nKEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbC5TcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRUb1N0cmluZ1tzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRdKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21TcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcoc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nKSB7XG4gICAgICAgIHN3aXRjaCAoc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nKSB7XG4gICAgICAgICAgICBjYXNlIFwicmF3LThraHotOGJpdC1tb25vLW11bGF3XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuTXVMYXcsIDEsIDgwMDAsIDgwMDAsIDEsIDgsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwicmlmZi0xNmtoei0xNmticHMtbW9uby1zaXJlblwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLlNpcmVuLCAxLCAxNjAwMCwgMjAwMCwgNDAsIDAsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgXCJhdWRpby0xNmtoei0xNmticHMtbW9uby1zaXJlblwiLCB0cnVlKTtcbiAgICAgICAgICAgIGNhc2UgXCJhdWRpby0xNmtoei0xNmticHMtbW9uby1zaXJlblwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLlNpcmVuLCAxLCAxNjAwMCwgMjAwMCwgNDAsIDAsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwiYXVkaW8tMTZraHotMzJrYml0cmF0ZS1tb25vLW1wM1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLk1QMywgMSwgMTYwMDAsIDMyIDw8IDcsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcImF1ZGlvLTE2a2h6LTEyOGtiaXRyYXRlLW1vbm8tbXAzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuTVAzLCAxLCAxNjAwMCwgMTI4IDw8IDcsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcImF1ZGlvLTE2a2h6LTY0a2JpdHJhdGUtbW9uby1tcDNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5NUDMsIDEsIDE2MDAwLCA2NCA8PCA3LCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJhdWRpby0yNGtoei00OGtiaXRyYXRlLW1vbm8tbXAzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuTVAzLCAxLCAyNDAwMCwgNDggPDwgNywgMiwgMTYsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwiYXVkaW8tMjRraHotOTZrYml0cmF0ZS1tb25vLW1wM1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLk1QMywgMSwgMjQwMDAsIDk2IDw8IDcsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcImF1ZGlvLTI0a2h6LTE2MGtiaXRyYXRlLW1vbm8tbXAzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuTVAzLCAxLCAyNDAwMCwgMTYwIDw8IDcsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcInJhdy0xNmtoei0xNmJpdC1tb25vLXRydWVzaWxrXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuU0lMS1NreXBlLCAxLCAxNjAwMCwgMzIwMDAsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcInJpZmYtOGtoei0xNmJpdC1tb25vLXBjbVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLlBDTSwgMSwgODAwMCwgMTYwMDAsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIFwicmF3LThraHotMTZiaXQtbW9uby1wY21cIiwgdHJ1ZSk7XG4gICAgICAgICAgICBjYXNlIFwicmlmZi0yNGtoei0xNmJpdC1tb25vLXBjbVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLlBDTSwgMSwgMjQwMDAsIDQ4MDAwLCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBcInJhdy0yNGtoei0xNmJpdC1tb25vLXBjbVwiLCB0cnVlKTtcbiAgICAgICAgICAgIGNhc2UgXCJyaWZmLThraHotOGJpdC1tb25vLW11bGF3XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuTXVMYXcsIDEsIDgwMDAsIDgwMDAsIDEsIDgsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgXCJyYXctOGtoei04Yml0LW1vbm8tbXVsYXdcIiwgdHJ1ZSk7XG4gICAgICAgICAgICBjYXNlIFwicmF3LTE2a2h6LTE2Yml0LW1vbm8tcGNtXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuUENNLCAxLCAxNjAwMCwgMzIwMDAsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIFwicmF3LTE2a2h6LTE2Yml0LW1vbm8tcGNtXCIsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJyYXctMjRraHotMTZiaXQtbW9uby1wY21cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5QQ00sIDEsIDI0MDAwLCA0ODAwMCwgMiwgMTYsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgXCJyYXctMjRraHotMTZiaXQtbW9uby1wY21cIiwgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcInJhdy04a2h6LTE2Yml0LW1vbm8tcGNtXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuUENNLCAxLCA4MDAwLCAxNjAwMCwgMiwgMTYsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgXCJyYXctOGtoei0xNmJpdC1tb25vLXBjbVwiLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwib2dnLTE2a2h6LTE2Yml0LW1vbm8tb3B1c1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLk9HR19PUFVTLCAxLCAxNjAwMCwgODE5MiwgMiwgMTYsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwib2dnLTI0a2h6LTE2Yml0LW1vbm8tb3B1c1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLk9HR19PUFVTLCAxLCAyNDAwMCwgODE5MiwgMiwgMTYsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwicmF3LTQ4a2h6LTE2Yml0LW1vbm8tcGNtXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuUENNLCAxLCA0ODAwMCwgOTYwMDAsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIFwicmF3LTQ4a2h6LTE2Yml0LW1vbm8tcGNtXCIsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJyaWZmLTQ4a2h6LTE2Yml0LW1vbm8tcGNtXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuUENNLCAxLCA0ODAwMCwgOTYwMDAsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIFwicmF3LTQ4a2h6LTE2Yml0LW1vbm8tcGNtXCIsIHRydWUpO1xuICAgICAgICAgICAgY2FzZSBcImF1ZGlvLTQ4a2h6LTk2a2JpdHJhdGUtbW9uby1tcDNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5NUDMsIDEsIDQ4MDAwLCA5NiA8PCA3LCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJhdWRpby00OGtoei0xOTJrYml0cmF0ZS1tb25vLW1wM1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLk1QMywgMSwgNDgwMDAsIDE5MiA8PCA3LCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJvZ2ctNDhraHotMTZiaXQtbW9uby1vcHVzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuT0dHX09QVVMsIDEsIDQ4MDAwLCAxMjAwMCwgMiwgMTYsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwid2VibS0xNmtoei0xNmJpdC1tb25vLW9wdXNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5XRUJNX09QVVMsIDEsIDE2MDAwLCA0MDAwLCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJ3ZWJtLTI0a2h6LTE2Yml0LW1vbm8tb3B1c1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLldFQk1fT1BVUywgMSwgMjQwMDAsIDYwMDAsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcIndlYm0tMjRraHotMTZiaXQtMjRrYnBzLW1vbm8tb3B1c1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLldFQk1fT1BVUywgMSwgMjQwMDAsIDMwMDAsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcImF1ZGlvLTE2a2h6LTE2Yml0LTMya2Jwcy1tb25vLW9wdXNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbChBdWRpb0Zvcm1hdFRhZy5PUFVTLCAxLCAxNjAwMCwgNDAwMCwgMiwgMTYsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwiYXVkaW8tMjRraHotMTZiaXQtNDhrYnBzLW1vbm8tb3B1c1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLk9QVVMsIDEsIDI0MDAwLCA2MDAwLCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJhdWRpby0yNGtoei0xNmJpdC0yNGticHMtbW9uby1vcHVzXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuT1BVUywgMSwgMjQwMDAsIDMwMDAsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcImF1ZGlvLTI0a2h6LTE2Yml0LW1vbm8tZmxhY1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLkZMQUMsIDEsIDI0MDAwLCAyNDAwMCwgMiwgMTYsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwiYXVkaW8tNDhraHotMTZiaXQtbW9uby1mbGFjXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuRkxBQywgMSwgNDgwMDAsIDMwMDAwLCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJyYXctMjRraHotMTZiaXQtbW9uby10cnVlc2lsa1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLlNJTEtTa3lwZSwgMSwgMjQwMDAsIDQ4MDAwLCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIGZhbHNlKTtcbiAgICAgICAgICAgIGNhc2UgXCJyYXctOGtoei04Yml0LW1vbm8tYWxhd1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLkFMYXcsIDEsIDgwMDAsIDgwMDAsIDEsIDgsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBmYWxzZSk7XG4gICAgICAgICAgICBjYXNlIFwicmlmZi04a2h6LThiaXQtbW9uby1hbGF3XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuQUxhdywgMSwgODAwMCwgODAwMCwgMSwgOCwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBcInJhdy04a2h6LThiaXQtbW9uby1hbGF3XCIsIHRydWUpO1xuICAgICAgICAgICAgY2FzZSBcInJhdy0yMjA1MGh6LTE2Yml0LW1vbm8tcGNtXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuUENNLCAxLCAyMjA1MCwgNDQxMDAsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcInJpZmYtMjIwNTBoei0xNmJpdC1tb25vLXBjbVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLlBDTSwgMSwgMjIwNTAsIDQ0MTAwLCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBcInJhdy0yMjA1MGh6LTE2Yml0LW1vbm8tcGNtXCIsIHRydWUpO1xuICAgICAgICAgICAgY2FzZSBcInJhdy00NDEwMGh6LTE2Yml0LW1vbm8tcGNtXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuUENNLCAxLCA0NDEwMCwgODgyMDAsIDIsIDE2LCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRTdHJpbmcsIHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZywgZmFsc2UpO1xuICAgICAgICAgICAgY2FzZSBcInJpZmYtNDQxMDBoei0xNmJpdC1tb25vLXBjbVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsKEF1ZGlvRm9ybWF0VGFnLlBDTSwgMSwgNDQxMDAsIDg4MjAwLCAyLCAxNiwgc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0U3RyaW5nLCBcInJhdy00NDEwMGh6LTE2Yml0LW1vbm8tcGNtXCIsIHRydWUpO1xuICAgICAgICAgICAgY2FzZSBcInJpZmYtMTZraHotMTZiaXQtbW9uby1wY21cIjpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb091dHB1dEZvcm1hdEltcGwoQXVkaW9Gb3JtYXRUYWcuUENNLCAxLCAxNjAwMCwgMzIwMDAsIDIsIDE2LCBcInJpZmYtMTZraHotMTZiaXQtbW9uby1wY21cIiwgXCJyYXctMTZraHotMTZiaXQtbW9uby1wY21cIiwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGdldERlZmF1bHRPdXRwdXRGb3JtYXQoKSB7XG4gICAgICAgIHJldHVybiBBdWRpb091dHB1dEZvcm1hdEltcGwuZnJvbVNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFN0cmluZygodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikgPyBcImF1ZGlvLTI0a2h6LTQ4a2JpdHJhdGUtbW9uby1tcDNcIiA6IFwicmlmZi0xNmtoei0xNmJpdC1tb25vLXBjbVwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIGlmIHRoaXMgYXVkaW8gb3V0cHV0IGZvcm1hdCBoYXMgYSBoZWFkZXJcbiAgICAgKiBAYm9vbGVhbiBBdWRpb091dHB1dEZvcm1hdEltcGwucHJvdG90eXBlLmhhc0hlYWRlclxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXQgaGFzSGVhZGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmlIYXNIZWFkZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgaGVhZGVyIG9mIHRoaXMgZm9ybWF0XG4gICAgICogQEFycmF5QnVmZmVyIEF1ZGlvT3V0cHV0Rm9ybWF0SW1wbC5wcm90b3R5cGUuaGVhZGVyXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldCBoZWFkZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc0hlYWRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdkhlYWRlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBoZWFkZXIgYmFzZWQgb24gdGhlIGF1ZGlvIGxlbmd0aFxuICAgICAqIEBtZW1iZXIgQXVkaW9PdXRwdXRGb3JtYXRJbXBsLnVwZGF0ZUhlYWRlclxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYXVkaW9MZW5ndGggLSB0aGUgYXVkaW8gbGVuZ3RoXG4gICAgICovXG4gICAgdXBkYXRlSGVhZGVyKGF1ZGlvTGVuZ3RoKSB7XG4gICAgICAgIGlmICh0aGlzLnByaUhhc0hlYWRlcikge1xuICAgICAgICAgICAgY29uc3QgdmlldyA9IG5ldyBEYXRhVmlldyh0aGlzLnByaXZIZWFkZXIpO1xuICAgICAgICAgICAgdmlldy5zZXRVaW50MzIoNCwgYXVkaW9MZW5ndGggKyB0aGlzLnByaXZIZWFkZXIuYnl0ZUxlbmd0aCAtIDgsIHRydWUpO1xuICAgICAgICAgICAgdmlldy5zZXRVaW50MzIoNDAsIGF1ZGlvTGVuZ3RoLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIGF1ZGlvIGZvcm1hdCBzdHJpbmcgdG8gYmUgc2VudCB0byB0aGUgc2VydmljZVxuICAgICAqIEBzdHJpbmcgQXVkaW9PdXRwdXRGb3JtYXRJbXBsLnByb3RvdHlwZS5yZXF1ZXN0QXVkaW9Gb3JtYXRTdHJpbmdcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0IHJlcXVlc3RBdWRpb0Zvcm1hdFN0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpUmVxdWVzdEF1ZGlvRm9ybWF0U3RyaW5nO1xuICAgIH1cbn1cbkF1ZGlvT3V0cHV0Rm9ybWF0SW1wbC5TcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRUb1N0cmluZyA9IHtcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJhdzhLaHo4Qml0TW9ub01VTGF3XTogXCJyYXctOGtoei04Yml0LW1vbm8tbXVsYXdcIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJpZmYxNktoejE2S2Jwc01vbm9TaXJlbl06IFwicmlmZi0xNmtoei0xNmticHMtbW9uby1zaXJlblwiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuQXVkaW8xNktoejE2S2Jwc01vbm9TaXJlbl06IFwiYXVkaW8tMTZraHotMTZrYnBzLW1vbm8tc2lyZW5cIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvMTZLaHozMktCaXRSYXRlTW9ub01wM106IFwiYXVkaW8tMTZraHotMzJrYml0cmF0ZS1tb25vLW1wM1wiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuQXVkaW8xNktoejEyOEtCaXRSYXRlTW9ub01wM106IFwiYXVkaW8tMTZraHotMTI4a2JpdHJhdGUtbW9uby1tcDNcIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvMTZLaHo2NEtCaXRSYXRlTW9ub01wM106IFwiYXVkaW8tMTZraHotNjRrYml0cmF0ZS1tb25vLW1wM1wiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuQXVkaW8yNEtoejQ4S0JpdFJhdGVNb25vTXAzXTogXCJhdWRpby0yNGtoei00OGtiaXRyYXRlLW1vbm8tbXAzXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5BdWRpbzI0S2h6OTZLQml0UmF0ZU1vbm9NcDNdOiBcImF1ZGlvLTI0a2h6LTk2a2JpdHJhdGUtbW9uby1tcDNcIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvMjRLaHoxNjBLQml0UmF0ZU1vbm9NcDNdOiBcImF1ZGlvLTI0a2h6LTE2MGtiaXRyYXRlLW1vbm8tbXAzXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SYXcxNktoejE2Qml0TW9ub1RydWVTaWxrXTogXCJyYXctMTZraHotMTZiaXQtbW9uby10cnVlc2lsa1wiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmlmZjE2S2h6MTZCaXRNb25vUGNtXTogXCJyaWZmLTE2a2h6LTE2Yml0LW1vbm8tcGNtXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SaWZmOEtoejE2Qml0TW9ub1BjbV06IFwicmlmZi04a2h6LTE2Yml0LW1vbm8tcGNtXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SaWZmMjRLaHoxNkJpdE1vbm9QY21dOiBcInJpZmYtMjRraHotMTZiaXQtbW9uby1wY21cIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJpZmY4S2h6OEJpdE1vbm9NVUxhd106IFwicmlmZi04a2h6LThiaXQtbW9uby1tdWxhd1wiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmF3MTZLaHoxNkJpdE1vbm9QY21dOiBcInJhdy0xNmtoei0xNmJpdC1tb25vLXBjbVwiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmF3MjRLaHoxNkJpdE1vbm9QY21dOiBcInJhdy0yNGtoei0xNmJpdC1tb25vLXBjbVwiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmF3OEtoejE2Qml0TW9ub1BjbV06IFwicmF3LThraHotMTZiaXQtbW9uby1wY21cIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0Lk9nZzE2S2h6MTZCaXRNb25vT3B1c106IFwib2dnLTE2a2h6LTE2Yml0LW1vbm8tb3B1c1wiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuT2dnMjRLaHoxNkJpdE1vbm9PcHVzXTogXCJvZ2ctMjRraHotMTZiaXQtbW9uby1vcHVzXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SYXc0OEtoejE2Qml0TW9ub1BjbV06IFwicmF3LTQ4a2h6LTE2Yml0LW1vbm8tcGNtXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SaWZmNDhLaHoxNkJpdE1vbm9QY21dOiBcInJpZmYtNDhraHotMTZiaXQtbW9uby1wY21cIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvNDhLaHo5NktCaXRSYXRlTW9ub01wM106IFwiYXVkaW8tNDhraHotOTZrYml0cmF0ZS1tb25vLW1wM1wiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuQXVkaW80OEtoejE5MktCaXRSYXRlTW9ub01wM106IFwiYXVkaW8tNDhraHotMTkya2JpdHJhdGUtbW9uby1tcDNcIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0Lk9nZzQ4S2h6MTZCaXRNb25vT3B1c106IFwib2dnLTQ4a2h6LTE2Yml0LW1vbm8tb3B1c1wiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuV2VibTE2S2h6MTZCaXRNb25vT3B1c106IFwid2VibS0xNmtoei0xNmJpdC1tb25vLW9wdXNcIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LldlYm0yNEtoejE2Qml0TW9ub09wdXNdOiBcIndlYm0tMjRraHotMTZiaXQtbW9uby1vcHVzXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5XZWJtMjRLaHoxNkJpdDI0S2Jwc01vbm9PcHVzXTogXCJ3ZWJtLTI0a2h6LTE2Yml0LTI0a2Jwcy1tb25vLW9wdXNcIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJhdzI0S2h6MTZCaXRNb25vVHJ1ZVNpbGtdOiBcInJhdy0yNGtoei0xNmJpdC1tb25vLXRydWVzaWxrXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SYXc4S2h6OEJpdE1vbm9BTGF3XTogXCJyYXctOGtoei04Yml0LW1vbm8tYWxhd1wiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmlmZjhLaHo4Qml0TW9ub0FMYXddOiBcInJpZmYtOGtoei04Yml0LW1vbm8tYWxhd1wiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuQXVkaW8xNktoejE2Qml0MzJLYnBzTW9ub09wdXNdOiBcImF1ZGlvLTE2a2h6LTE2Yml0LTMya2Jwcy1tb25vLW9wdXNcIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvMjRLaHoxNkJpdDQ4S2Jwc01vbm9PcHVzXTogXCJhdWRpby0yNGtoei0xNmJpdC00OGticHMtbW9uby1vcHVzXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5BdWRpbzI0S2h6MTZCaXQyNEticHNNb25vT3B1c106IFwiYXVkaW8tMjRraHotMTZiaXQtMjRrYnBzLW1vbm8tb3B1c1wiLFxuICAgIFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmF3MjIwNTBIejE2Qml0TW9ub1BjbV06IFwicmF3LTIyMDUwaHotMTZiaXQtbW9uby1wY21cIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJpZmYyMjA1MEh6MTZCaXRNb25vUGNtXTogXCJyaWZmLTIyMDUwaHotMTZiaXQtbW9uby1wY21cIixcbiAgICBbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJhdzQ0MTAwSHoxNkJpdE1vbm9QY21dOiBcInJhdy00NDEwMGh6LTE2Yml0LW1vbm8tcGNtXCIsXG4gICAgW1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SaWZmNDQxMDBIejE2Qml0TW9ub1BjbV06IFwicmlmZi00NDEwMGh6LTE2Yml0LW1vbm8tcGNtXCIsXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdWRpb091dHB1dEZvcm1hdC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtY2xhc3Nlcy1wZXItZmlsZSAqL1xuaW1wb3J0IHsgY3JlYXRlTm9EYXNoR3VpZCwgU3RyZWFtLCB9IGZyb20gXCIuLi8uLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4uL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgQXVkaW9PdXRwdXRGb3JtYXRJbXBsIH0gZnJvbSBcIi4vQXVkaW9PdXRwdXRGb3JtYXRcIjtcbi8qKlxuICogUmVwcmVzZW50cyBhdWRpbyBvdXRwdXQgc3RyZWFtIHVzZWQgZm9yIGN1c3RvbSBhdWRpbyBvdXRwdXQgY29uZmlndXJhdGlvbnMuXG4gKiBAY2xhc3MgQXVkaW9PdXRwdXRTdHJlYW1cbiAqL1xuZXhwb3J0IGNsYXNzIEF1ZGlvT3V0cHV0U3RyZWFtIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZS5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbWVtb3J5IGJhY2tlZCBQdWxsQXVkaW9PdXRwdXRTdHJlYW0gd2l0aCB0aGUgc3BlY2lmaWVkIGF1ZGlvIGZvcm1hdC5cbiAgICAgKiBAbWVtYmVyIEF1ZGlvT3V0cHV0U3RyZWFtLmNyZWF0ZVB1bGxTdHJlYW1cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1B1bGxBdWRpb091dHB1dFN0cmVhbX0gVGhlIGF1ZGlvIG91dHB1dCBzdHJlYW0gYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlUHVsbFN0cmVhbSgpIHtcbiAgICAgICAgcmV0dXJuIFB1bGxBdWRpb091dHB1dFN0cmVhbS5jcmVhdGUoKTtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgbWVtb3J5IGJhY2tlZCBwdXNoIGF1ZGlvIG91dHB1dCBzdHJlYW0gdXNlZCBmb3IgY3VzdG9tIGF1ZGlvIG91dHB1dCBjb25maWd1cmF0aW9ucy5cbiAqIEBjbGFzcyBQdWxsQXVkaW9PdXRwdXRTdHJlYW1cbiAqL1xuZXhwb3J0IGNsYXNzIFB1bGxBdWRpb091dHB1dFN0cmVhbSBleHRlbmRzIEF1ZGlvT3V0cHV0U3RyZWFtIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbWVtb3J5IGJhY2tlZCBQdWxsQXVkaW9PdXRwdXRTdHJlYW0gd2l0aCB0aGUgc3BlY2lmaWVkIGF1ZGlvIGZvcm1hdC5cbiAgICAgKiBAbWVtYmVyIFB1bGxBdWRpb091dHB1dFN0cmVhbS5jcmVhdGVcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1B1bGxBdWRpb091dHB1dFN0cmVhbX0gVGhlIHB1c2ggYXVkaW8gb3V0cHV0IHN0cmVhbSBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtSW1wbCgpO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBtZW1vcnkgYmFja2VkIHB1c2ggYXVkaW8gb3V0cHV0IHN0cmVhbSB1c2VkIGZvciBjdXN0b20gYXVkaW8gb3V0cHV0IGNvbmZpZ3VyYXRpb25zLlxuICogQHByaXZhdGVcbiAqIEBjbGFzcyBQdWxsQXVkaW9PdXRwdXRTdHJlYW1JbXBsXG4gKi9cbmV4cG9ydCBjbGFzcyBQdWxsQXVkaW9PdXRwdXRTdHJlYW1JbXBsIGV4dGVuZHMgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSB3aXRoIHRoZSBnaXZlbiB2YWx1ZXMuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucHJpdklkID0gY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZTdHJlYW0gPSBuZXcgU3RyZWFtKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGZvcm1hdCBpbmZvcm1hdGlvbiB0byB0aGUgc3RyZWFtLiBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICogQHBhcmFtIHtBdWRpb1N0cmVhbUZvcm1hdH0gZm9ybWF0IC0gdGhlIGZvcm1hdCB0byBiZSBzZXQuXG4gICAgICovXG4gICAgc2V0IGZvcm1hdChmb3JtYXQpIHtcbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkIHx8IGZvcm1hdCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5wcml2Rm9ybWF0ID0gQXVkaW9PdXRwdXRGb3JtYXRJbXBsLmdldERlZmF1bHRPdXRwdXRGb3JtYXQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZGb3JtYXQgPSBmb3JtYXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcm1hdCBpbmZvcm1hdGlvbiBmb3IgdGhlIGF1ZGlvXG4gICAgICovXG4gICAgZ2V0IGZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkZvcm1hdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBzdHJlYW0gaXMgY2xvc2VkXG4gICAgICogQG1lbWJlciBQdWxsQXVkaW9PdXRwdXRTdHJlYW1JbXBsLnByb3RvdHlwZS5pc0Nsb3NlZFxuICAgICAqIEBwcm9wZXJ0eVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXQgaXNDbG9zZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTdHJlYW0uaXNDbG9zZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGlkIG9mIHRoZSBzdHJlYW1cbiAgICAgKiBAbWVtYmVyIFB1bGxBdWRpb091dHB1dFN0cmVhbUltcGwucHJvdG90eXBlLmlkXG4gICAgICogQHByb3BlcnR5XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGF1ZGlvIGRhdGEgZnJvbSB0aGUgaW50ZXJuYWwgYnVmZmVyLlxuICAgICAqIEBtZW1iZXIgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtSW1wbC5wcm90b3R5cGUucmVhZFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBkYXRhQnVmZmVyIC0gQW4gQXJyYXlCdWZmZXIgdG8gc3RvcmUgdGhlIHJlYWQgZGF0YS5cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxudW1iZXI+fSAtIEF1ZGlvIGJ1ZmZlciBsZW5ndGggaGFzIGJlZW4gcmVhZC5cbiAgICAgKi9cbiAgICByZWFkKGRhdGFCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGludFZpZXcgPSBuZXcgSW50OEFycmF5KGRhdGFCdWZmZXIpO1xuICAgICAgICAgICAgbGV0IHRvdGFsQnl0ZXMgPSAwO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkxhc3RDaHVua1ZpZXcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZMYXN0Q2h1bmtWaWV3Lmxlbmd0aCA+IGRhdGFCdWZmZXIuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpbnRWaWV3LnNldCh0aGlzLnByaXZMYXN0Q2h1bmtWaWV3LnNsaWNlKDAsIGRhdGFCdWZmZXIuYnl0ZUxlbmd0aCkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZMYXN0Q2h1bmtWaWV3ID0gdGhpcy5wcml2TGFzdENodW5rVmlldy5zbGljZShkYXRhQnVmZmVyLmJ5dGVMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRhdGFCdWZmZXIuYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGludFZpZXcuc2V0KHRoaXMucHJpdkxhc3RDaHVua1ZpZXcpO1xuICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgPSB0aGlzLnByaXZMYXN0Q2h1bmtWaWV3Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZMYXN0Q2h1bmtWaWV3ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVW50aWwgd2UgaGF2ZSB0aGUgbWluaW11bSBudW1iZXIgb2YgYnl0ZXMgdG8gc2VuZCBpbiBhIHRyYW5zbWlzc2lvbiwga2VlcCBhc2tpbmcgZm9yIG1vcmUuXG4gICAgICAgICAgICB3aGlsZSAodG90YWxCeXRlcyA8IGRhdGFCdWZmZXIuYnl0ZUxlbmd0aCAmJiAhdGhpcy5wcml2U3RyZWFtLmlzUmVhZEVuZGVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSB5aWVsZCB0aGlzLnByaXZTdHJlYW0ucmVhZCgpO1xuICAgICAgICAgICAgICAgIGlmIChjaHVuayAhPT0gdW5kZWZpbmVkICYmICFjaHVuay5pc0VuZCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdG1wQnVmZmVyO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmsuYnVmZmVyLmJ5dGVMZW5ndGggPiBkYXRhQnVmZmVyLmJ5dGVMZW5ndGggLSB0b3RhbEJ5dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBCdWZmZXIgPSBjaHVuay5idWZmZXIuc2xpY2UoMCwgZGF0YUJ1ZmZlci5ieXRlTGVuZ3RoIC0gdG90YWxCeXRlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZMYXN0Q2h1bmtWaWV3ID0gbmV3IEludDhBcnJheShjaHVuay5idWZmZXIuc2xpY2UoZGF0YUJ1ZmZlci5ieXRlTGVuZ3RoIC0gdG90YWxCeXRlcykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG1wQnVmZmVyID0gY2h1bmsuYnVmZmVyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGludFZpZXcuc2V0KG5ldyBJbnQ4QXJyYXkodG1wQnVmZmVyKSwgdG90YWxCeXRlcyk7XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gdG1wQnVmZmVyLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTdHJlYW0ucmVhZEVuZGVkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsQnl0ZXM7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgdGhlIGF1ZGlvIGRhdGEgc3BlY2lmaWVkIGJ5IG1ha2luZyBhbiBpbnRlcm5hbCBjb3B5IG9mIHRoZSBkYXRhLlxuICAgICAqIEBtZW1iZXIgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtSW1wbC5wcm90b3R5cGUud3JpdGVcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gZGF0YUJ1ZmZlciAtIFRoZSBhdWRpbyBidWZmZXIgb2Ygd2hpY2ggdGhpcyBmdW5jdGlvbiB3aWxsIG1ha2UgYSBjb3B5LlxuICAgICAqL1xuICAgIHdyaXRlKGRhdGFCdWZmZXIpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQodGhpcy5wcml2U3RyZWFtLCBcIm11c3Qgc2V0IGZvcm1hdCBiZWZvcmUgd3JpdGluZ1wiKTtcbiAgICAgICAgdGhpcy5wcml2U3RyZWFtLndyaXRlU3RyZWFtQ2h1bmsoe1xuICAgICAgICAgICAgYnVmZmVyOiBkYXRhQnVmZmVyLFxuICAgICAgICAgICAgaXNFbmQ6IGZhbHNlLFxuICAgICAgICAgICAgdGltZVJlY2VpdmVkOiBEYXRlLm5vdygpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgdGhlIHN0cmVhbS5cbiAgICAgKiBAbWVtYmVyIFB1bGxBdWRpb091dHB1dFN0cmVhbUltcGwucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLnByaXZTdHJlYW0uY2xvc2UoKTtcbiAgICB9XG59XG4vKlxuICogUmVwcmVzZW50cyBhdWRpbyBvdXRwdXQgc3RyZWFtIHVzZWQgZm9yIGN1c3RvbSBhdWRpbyBvdXRwdXQgY29uZmlndXJhdGlvbnMuXG4gKiBAY2xhc3MgUHVzaEF1ZGlvT3V0cHV0U3RyZWFtXG4gKi9cbmV4cG9ydCBjbGFzcyBQdXNoQXVkaW9PdXRwdXRTdHJlYW0gZXh0ZW5kcyBBdWRpb091dHB1dFN0cmVhbSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW5kIGluc3RhbmNlLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgUHVzaEF1ZGlvT3V0cHV0U3RyZWFtIHRoYXQgZGVsZWdhdGVzIHRvIHRoZSBzcGVjaWZpZWQgY2FsbGJhY2sgaW50ZXJmYWNlIGZvclxuICAgICAqIHdyaXRlKCkgYW5kIGNsb3NlKCkgbWV0aG9kcy5cbiAgICAgKiBAbWVtYmVyIFB1c2hBdWRpb091dHB1dFN0cmVhbS5jcmVhdGVcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtQdXNoQXVkaW9PdXRwdXRTdHJlYW1DYWxsYmFja30gY2FsbGJhY2sgLSBUaGUgY3VzdG9tIGF1ZGlvIG91dHB1dCBvYmplY3QsXG4gICAgICogZGVyaXZlZCBmcm9tIFB1c2hBdWRpb091dHB1dFN0cmVhbUNhbGxiYWNrXG4gICAgICogQHJldHVybnMge1B1c2hBdWRpb091dHB1dFN0cmVhbX0gVGhlIHB1c2ggYXVkaW8gb3V0cHV0IHN0cmVhbSBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQdXNoQXVkaW9PdXRwdXRTdHJlYW1JbXBsKGNhbGxiYWNrKTtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYXVkaW8gb3V0cHV0IHN0cmVhbSB1c2VkIGZvciBjdXN0b20gYXVkaW8gb3V0cHV0IGNvbmZpZ3VyYXRpb25zLlxuICogQHByaXZhdGVcbiAqIEBjbGFzcyBQdXNoQXVkaW9PdXRwdXRTdHJlYW1JbXBsXG4gKi9cbmV4cG9ydCBjbGFzcyBQdXNoQXVkaW9PdXRwdXRTdHJlYW1JbXBsIGV4dGVuZHMgUHVzaEF1ZGlvT3V0cHV0U3RyZWFtIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgUHVzaEF1ZGlvT3V0cHV0U3RyZWFtIHRoYXQgZGVsZWdhdGVzIHRvIHRoZSBzcGVjaWZpZWQgY2FsbGJhY2sgaW50ZXJmYWNlIGZvclxuICAgICAqIHJlYWQoKSBhbmQgY2xvc2UoKSBtZXRob2RzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7UHVzaEF1ZGlvT3V0cHV0U3RyZWFtQ2FsbGJhY2t9IGNhbGxiYWNrIC0gVGhlIGN1c3RvbSBhdWRpbyBvdXRwdXQgb2JqZWN0LFxuICAgICAqIGRlcml2ZWQgZnJvbSBQdXNoQXVkaW9PdXRwdXRTdHJlYW1DYWxsYmFja1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucHJpdklkID0gY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWVtcHR5LWZ1bmN0aW9uXG4gICAgc2V0IGZvcm1hdChmb3JtYXQpIHsgfVxuICAgIHdyaXRlKGJ1ZmZlcikge1xuICAgICAgICBpZiAoISF0aGlzLnByaXZDYWxsYmFjay53cml0ZSkge1xuICAgICAgICAgICAgdGhpcy5wcml2Q2FsbGJhY2sud3JpdGUoYnVmZmVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2Q2FsbGJhY2suY2xvc2UpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkNhbGxiYWNrLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJZDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF1ZGlvT3V0cHV0U3RyZWFtLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWNsYXNzZXMtcGVyLWZpbGVcbmV4cG9ydCB2YXIgQXVkaW9Gb3JtYXRUYWc7XG4oZnVuY3Rpb24gKEF1ZGlvRm9ybWF0VGFnKSB7XG4gICAgQXVkaW9Gb3JtYXRUYWdbQXVkaW9Gb3JtYXRUYWdbXCJQQ01cIl0gPSAxXSA9IFwiUENNXCI7XG4gICAgQXVkaW9Gb3JtYXRUYWdbQXVkaW9Gb3JtYXRUYWdbXCJNdUxhd1wiXSA9IDJdID0gXCJNdUxhd1wiO1xuICAgIEF1ZGlvRm9ybWF0VGFnW0F1ZGlvRm9ybWF0VGFnW1wiU2lyZW5cIl0gPSAzXSA9IFwiU2lyZW5cIjtcbiAgICBBdWRpb0Zvcm1hdFRhZ1tBdWRpb0Zvcm1hdFRhZ1tcIk1QM1wiXSA9IDRdID0gXCJNUDNcIjtcbiAgICBBdWRpb0Zvcm1hdFRhZ1tBdWRpb0Zvcm1hdFRhZ1tcIlNJTEtTa3lwZVwiXSA9IDVdID0gXCJTSUxLU2t5cGVcIjtcbiAgICBBdWRpb0Zvcm1hdFRhZ1tBdWRpb0Zvcm1hdFRhZ1tcIk9HR19PUFVTXCJdID0gNl0gPSBcIk9HR19PUFVTXCI7XG4gICAgQXVkaW9Gb3JtYXRUYWdbQXVkaW9Gb3JtYXRUYWdbXCJXRUJNX09QVVNcIl0gPSA3XSA9IFwiV0VCTV9PUFVTXCI7XG4gICAgQXVkaW9Gb3JtYXRUYWdbQXVkaW9Gb3JtYXRUYWdbXCJBTGF3XCJdID0gOF0gPSBcIkFMYXdcIjtcbiAgICBBdWRpb0Zvcm1hdFRhZ1tBdWRpb0Zvcm1hdFRhZ1tcIkZMQUNcIl0gPSA5XSA9IFwiRkxBQ1wiO1xuICAgIEF1ZGlvRm9ybWF0VGFnW0F1ZGlvRm9ybWF0VGFnW1wiT1BVU1wiXSA9IDEwXSA9IFwiT1BVU1wiO1xufSkoQXVkaW9Gb3JtYXRUYWcgfHwgKEF1ZGlvRm9ybWF0VGFnID0ge30pKTtcbi8qKlxuICogUmVwcmVzZW50cyBhdWRpbyBzdHJlYW0gZm9ybWF0IHVzZWQgZm9yIGN1c3RvbSBhdWRpbyBpbnB1dCBjb25maWd1cmF0aW9ucy5cbiAqIEBjbGFzcyBBdWRpb1N0cmVhbUZvcm1hdFxuICovXG5leHBvcnQgY2xhc3MgQXVkaW9TdHJlYW1Gb3JtYXQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXVkaW8gc3RyZWFtIGZvcm1hdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBkZWZhdWx0IGF1ZGlvIHN0cmVhbVxuICAgICAqIGZvcm1hdCAoMTZLSHogMTZiaXQgbW9ubyBQQ00pLlxuICAgICAqIEBtZW1iZXIgQXVkaW9TdHJlYW1Gb3JtYXQuZ2V0RGVmYXVsdElucHV0Rm9ybWF0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtBdWRpb1N0cmVhbUZvcm1hdH0gVGhlIGF1ZGlvIHN0cmVhbSBmb3JtYXQgYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0RGVmYXVsdElucHV0Rm9ybWF0KCkge1xuICAgICAgICByZXR1cm4gQXVkaW9TdHJlYW1Gb3JtYXRJbXBsLmdldERlZmF1bHRJbnB1dEZvcm1hdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGF1ZGlvIHN0cmVhbSBmb3JtYXQgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBmb3JtYXQgY2hhcmFjdGVyaXN0aWNzLlxuICAgICAqIEBtZW1iZXIgQXVkaW9TdHJlYW1Gb3JtYXQuZ2V0V2F2ZUZvcm1hdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2FtcGxlc1BlclNlY29uZCAtIFNhbXBsZSByYXRlLCBpbiBzYW1wbGVzIHBlciBzZWNvbmQgKEhlcnR6KS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYml0c1BlclNhbXBsZSAtIEJpdHMgcGVyIHNhbXBsZSwgdHlwaWNhbGx5IDE2LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjaGFubmVscyAtIE51bWJlciBvZiBjaGFubmVscyBpbiB0aGUgd2F2ZWZvcm0tYXVkaW8gZGF0YS4gTW9uYXVyYWwgZGF0YVxuICAgICAqIHVzZXMgb25lIGNoYW5uZWwgYW5kIHN0ZXJlbyBkYXRhIHVzZXMgdHdvIGNoYW5uZWxzLlxuICAgICAqIEBwYXJhbSB7QXVkaW9Gb3JtYXRUYWd9IGZvcm1hdCAtIEF1ZGlvIGZvcm1hdCAoUENNLCBhbGF3IG9yIG11bGF3KS5cbiAgICAgKiBAcmV0dXJucyB7QXVkaW9TdHJlYW1Gb3JtYXR9IFRoZSBhdWRpbyBzdHJlYW0gZm9ybWF0IGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGdldFdhdmVGb3JtYXQoc2FtcGxlc1BlclNlY29uZCwgYml0c1BlclNhbXBsZSwgY2hhbm5lbHMsIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gbmV3IEF1ZGlvU3RyZWFtRm9ybWF0SW1wbChzYW1wbGVzUGVyU2Vjb25kLCBiaXRzUGVyU2FtcGxlLCBjaGFubmVscywgZm9ybWF0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhdWRpbyBzdHJlYW0gZm9ybWF0IG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQgcGNtIHdhdmVmb3JtYXQgY2hhcmFjdGVyaXN0aWNzLlxuICAgICAqIEBtZW1iZXIgQXVkaW9TdHJlYW1Gb3JtYXQuZ2V0V2F2ZUZvcm1hdFBDTVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2FtcGxlc1BlclNlY29uZCAtIFNhbXBsZSByYXRlLCBpbiBzYW1wbGVzIHBlciBzZWNvbmQgKEhlcnR6KS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYml0c1BlclNhbXBsZSAtIEJpdHMgcGVyIHNhbXBsZSwgdHlwaWNhbGx5IDE2LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjaGFubmVscyAtIE51bWJlciBvZiBjaGFubmVscyBpbiB0aGUgd2F2ZWZvcm0tYXVkaW8gZGF0YS4gTW9uYXVyYWwgZGF0YVxuICAgICAqIHVzZXMgb25lIGNoYW5uZWwgYW5kIHN0ZXJlbyBkYXRhIHVzZXMgdHdvIGNoYW5uZWxzLlxuICAgICAqIEByZXR1cm5zIHtBdWRpb1N0cmVhbUZvcm1hdH0gVGhlIGF1ZGlvIHN0cmVhbSBmb3JtYXQgYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0V2F2ZUZvcm1hdFBDTShzYW1wbGVzUGVyU2Vjb25kLCBiaXRzUGVyU2FtcGxlLCBjaGFubmVscykge1xuICAgICAgICByZXR1cm4gbmV3IEF1ZGlvU3RyZWFtRm9ybWF0SW1wbChzYW1wbGVzUGVyU2Vjb25kLCBiaXRzUGVyU2FtcGxlLCBjaGFubmVscyk7XG4gICAgfVxufVxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGNsYXNzIEF1ZGlvU3RyZWFtRm9ybWF0SW1wbFxuICovXG5leHBvcnQgY2xhc3MgQXVkaW9TdHJlYW1Gb3JtYXRJbXBsIGV4dGVuZHMgQXVkaW9TdHJlYW1Gb3JtYXQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzYW1wbGVzUGVyU2VjIC0gU2FtcGxlcyBwZXIgc2Vjb25kLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiaXRzUGVyU2FtcGxlIC0gQml0cyBwZXIgc2FtcGxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjaGFubmVscyAtIE51bWJlciBvZiBjaGFubmVscy5cbiAgICAgKiBAcGFyYW0ge0F1ZGlvRm9ybWF0VGFnfSBmb3JtYXQgLSBBdWRpbyBmb3JtYXQgKFBDTSwgYWxhdyBvciBtdWxhdykuXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc2FtcGxlc1BlclNlYyA9IDE2MDAwLCBiaXRzUGVyU2FtcGxlID0gMTYsIGNoYW5uZWxzID0gMSwgZm9ybWF0ID0gQXVkaW9Gb3JtYXRUYWcuUENNKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGxldCBpc1dhdkZvcm1hdCA9IHRydWU7XG4gICAgICAgIC8qIDEgZm9yIFBDTTsgNiBmb3IgYWxhdzsgNyBmb3IgbXVsYXcgKi9cbiAgICAgICAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICAgICAgICAgIGNhc2UgQXVkaW9Gb3JtYXRUYWcuUENNOlxuICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0VGFnID0gMTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQXVkaW9Gb3JtYXRUYWcuQUxhdzpcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdFRhZyA9IDY7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEF1ZGlvRm9ybWF0VGFnLk11TGF3OlxuICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0VGFnID0gNztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgaXNXYXZGb3JtYXQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJpdHNQZXJTYW1wbGUgPSBiaXRzUGVyU2FtcGxlO1xuICAgICAgICB0aGlzLnNhbXBsZXNQZXJTZWMgPSBzYW1wbGVzUGVyU2VjO1xuICAgICAgICB0aGlzLmNoYW5uZWxzID0gY2hhbm5lbHM7XG4gICAgICAgIHRoaXMuYXZnQnl0ZXNQZXJTZWMgPSB0aGlzLnNhbXBsZXNQZXJTZWMgKiB0aGlzLmNoYW5uZWxzICogKHRoaXMuYml0c1BlclNhbXBsZSAvIDgpO1xuICAgICAgICB0aGlzLmJsb2NrQWxpZ24gPSB0aGlzLmNoYW5uZWxzICogTWF0aC5tYXgodGhpcy5iaXRzUGVyU2FtcGxlLCA4KTtcbiAgICAgICAgaWYgKGlzV2F2Rm9ybWF0KSB7XG4gICAgICAgICAgICB0aGlzLnByaXZIZWFkZXIgPSBuZXcgQXJyYXlCdWZmZXIoNDQpO1xuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0YVZpZXdcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSBuZXcgRGF0YVZpZXcodGhpcy5wcml2SGVhZGVyKTtcbiAgICAgICAgICAgIC8qIFJJRkYgaWRlbnRpZmllciAqL1xuICAgICAgICAgICAgdGhpcy5zZXRTdHJpbmcodmlldywgMCwgXCJSSUZGXCIpO1xuICAgICAgICAgICAgLyogZmlsZSBsZW5ndGggKi9cbiAgICAgICAgICAgIHZpZXcuc2V0VWludDMyKDQsIDAsIHRydWUpO1xuICAgICAgICAgICAgLyogUklGRiB0eXBlICYgRm9ybWF0ICovXG4gICAgICAgICAgICB0aGlzLnNldFN0cmluZyh2aWV3LCA4LCBcIldBVkVmbXQgXCIpO1xuICAgICAgICAgICAgLyogZm9ybWF0IGNodW5rIGxlbmd0aCAqL1xuICAgICAgICAgICAgdmlldy5zZXRVaW50MzIoMTYsIDE2LCB0cnVlKTtcbiAgICAgICAgICAgIC8qIGF1ZGlvIGZvcm1hdCAqL1xuICAgICAgICAgICAgdmlldy5zZXRVaW50MTYoMjAsIHRoaXMuZm9ybWF0VGFnLCB0cnVlKTtcbiAgICAgICAgICAgIC8qIGNoYW5uZWwgY291bnQgKi9cbiAgICAgICAgICAgIHZpZXcuc2V0VWludDE2KDIyLCB0aGlzLmNoYW5uZWxzLCB0cnVlKTtcbiAgICAgICAgICAgIC8qIHNhbXBsZSByYXRlICovXG4gICAgICAgICAgICB2aWV3LnNldFVpbnQzMigyNCwgdGhpcy5zYW1wbGVzUGVyU2VjLCB0cnVlKTtcbiAgICAgICAgICAgIC8qIGJ5dGUgcmF0ZSAoc2FtcGxlIHJhdGUgKiBibG9jayBhbGlnbikgKi9cbiAgICAgICAgICAgIHZpZXcuc2V0VWludDMyKDI4LCB0aGlzLmF2Z0J5dGVzUGVyU2VjLCB0cnVlKTtcbiAgICAgICAgICAgIC8qIGJsb2NrIGFsaWduIChjaGFubmVsIGNvdW50ICogYnl0ZXMgcGVyIHNhbXBsZSkgKi9cbiAgICAgICAgICAgIHZpZXcuc2V0VWludDE2KDMyLCB0aGlzLmNoYW5uZWxzICogKHRoaXMuYml0c1BlclNhbXBsZSAvIDgpLCB0cnVlKTtcbiAgICAgICAgICAgIC8qIGJpdHMgcGVyIHNhbXBsZSAqL1xuICAgICAgICAgICAgdmlldy5zZXRVaW50MTYoMzQsIHRoaXMuYml0c1BlclNhbXBsZSwgdHJ1ZSk7XG4gICAgICAgICAgICAvKiBkYXRhIGNodW5rIGlkZW50aWZpZXIgKi9cbiAgICAgICAgICAgIHRoaXMuc2V0U3RyaW5nKHZpZXcsIDM2LCBcImRhdGFcIik7XG4gICAgICAgICAgICAvKiBkYXRhIGNodW5rIGxlbmd0aCAqL1xuICAgICAgICAgICAgdmlldy5zZXRVaW50MzIoNDAsIDAsIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgZGVmYXVsdCBpbnB1dCBmb3JtYXQuXG4gICAgICogQG1lbWJlciBBdWRpb1N0cmVhbUZvcm1hdEltcGwuZ2V0RGVmYXVsdElucHV0Rm9ybWF0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtBdWRpb1N0cmVhbUZvcm1hdEltcGx9IFRoZSBkZWZhdWx0IGlucHV0IGZvcm1hdC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0RGVmYXVsdElucHV0Rm9ybWF0KCkge1xuICAgICAgICByZXR1cm4gbmV3IEF1ZGlvU3RyZWFtRm9ybWF0SW1wbCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGF1ZGlvIGNvbnRleHQgYXBwcm9wcmlhdGUgdG8gY3VycmVudCBicm93c2VyXG4gICAgICogQG1lbWJlciBBdWRpb1N0cmVhbUZvcm1hdEltcGwuZ2V0QXVkaW9Db250ZXh0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtBdWRpb0NvbnRleHR9IEFuIGF1ZGlvIGNvbnRleHQgaW5zdGFuY2VcbiAgICAgKi9cbiAgICAvKiBlc2xpbnQtZGlzYWJsZSAqL1xuICAgIHN0YXRpYyBnZXRBdWRpb0NvbnRleHQoc2FtcGxlUmF0ZSkge1xuICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciBTcGVlY2ggU0RLIGJ1ZyBpbiBTYWZhcmkuXG4gICAgICAgIGNvbnN0IEF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgLy8gb3VyIHByZWZlcnJlZCBpbXBsXG4gICAgICAgICAgICB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0IC8vIGZhbGxiYWNrLCBtb3N0bHkgd2hlbiBvbiBTYWZhcmlcbiAgICAgICAgICAgIHx8IGZhbHNlOyAvLyBjb3VsZCBub3QgZmluZC5cbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0F1ZGlvQ29udGV4dFxuICAgICAgICBpZiAoISFBdWRpb0NvbnRleHQpIHtcbiAgICAgICAgICAgIGlmIChzYW1wbGVSYXRlICE9PSB1bmRlZmluZWQgJiYgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cygpLnNhbXBsZVJhdGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvQ29udGV4dCh7IHNhbXBsZVJhdGUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvQ29udGV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IFdlYiBBdWRpbyBBUEkgKEF1ZGlvQ29udGV4dCBpcyBub3QgYXZhaWxhYmxlKS5cIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyogZXNsaW50LWVuYWJsZSAqL1xuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgY29uZmlndXJhdGlvbiBvYmplY3QuXG4gICAgICogQG1lbWJlciBBdWRpb1N0cmVhbUZvcm1hdEltcGwucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGdldCBoZWFkZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZIZWFkZXI7XG4gICAgfVxuICAgIHNldFN0cmluZyh2aWV3LCBvZmZzZXQsIHN0cikge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmlldy5zZXRVaW50OChvZmZzZXQgKyBpLCBzdHIuY2hhckNvZGVBdChpKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF1ZGlvU3RyZWFtRm9ybWF0LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IEludmFsaWRPcGVyYXRpb25FcnJvciB9IGZyb20gXCIuLi8uLi9jb21tb24vRXJyb3JcIjtcbmltcG9ydCB7IEF1ZGlvU3RyZWFtRm9ybWF0IH0gZnJvbSBcIi4uL0V4cG9ydHNcIjtcbmltcG9ydCB7IEF1ZGlvU3RyZWFtRm9ybWF0SW1wbCB9IGZyb20gXCIuL0F1ZGlvU3RyZWFtRm9ybWF0XCI7XG4vKipcbiAqIEJhc2UgYXVkaW8gcGxheWVyIGNsYXNzXG4gKiBUT0RPOiBQbGF5cyBvbmx5IFBDTSBmb3Igbm93LlxuICogQGNsYXNzXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlQXVkaW9QbGF5ZXIge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtBdWRpb1N0cmVhbUZvcm1hdH0gYXVkaW9Gb3JtYXQgYXVkaW8gc3RyZWFtIGZvcm1hdCByZWNvZ25pemVkIGJ5IHRoZSBwbGF5ZXIuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYXVkaW9Gb3JtYXQpIHtcbiAgICAgICAgdGhpcy5hdWRpb0NvbnRleHQgPSBudWxsO1xuICAgICAgICB0aGlzLmdhaW5Ob2RlID0gbnVsbDtcbiAgICAgICAgdGhpcy5hdXRvVXBkYXRlQnVmZmVyVGltZXIgPSAwO1xuICAgICAgICBpZiAoYXVkaW9Gb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYXVkaW9Gb3JtYXQgPSBBdWRpb1N0cmVhbUZvcm1hdC5nZXREZWZhdWx0SW5wdXRGb3JtYXQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluaXQoYXVkaW9Gb3JtYXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBwbGF5IEF1ZGlvIHNhbXBsZVxuICAgICAqIEBwYXJhbSBuZXdBdWRpb0RhdGEgYXVkaW8gZGF0YSB0byBiZSBwbGF5ZWQuXG4gICAgICovXG4gICAgcGxheUF1ZGlvU2FtcGxlKG5ld0F1ZGlvRGF0YSwgY2IsIGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5lbnN1cmVJbml0aWFsaXplZENvbnRleHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvRGF0YSA9IHRoaXMuZm9ybWF0QXVkaW9EYXRhKG5ld0F1ZGlvRGF0YSk7XG4gICAgICAgICAgICBjb25zdCBuZXdTYW1wbGVzRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5zYW1wbGVzLmxlbmd0aCArIGF1ZGlvRGF0YS5sZW5ndGgpO1xuICAgICAgICAgICAgbmV3U2FtcGxlc0RhdGEuc2V0KHRoaXMuc2FtcGxlcywgMCk7XG4gICAgICAgICAgICBuZXdTYW1wbGVzRGF0YS5zZXQoYXVkaW9EYXRhLCB0aGlzLnNhbXBsZXMubGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMuc2FtcGxlcyA9IG5ld1NhbXBsZXNEYXRhO1xuICAgICAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICBlcnIoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogc3RvcHMgYXVkaW8gYW5kIGNsZWFycyB0aGUgYnVmZmVyc1xuICAgICAqL1xuICAgIHN0b3BBdWRpbyhjYiwgZXJyKSB7XG4gICAgICAgIGlmICh0aGlzLmF1ZGlvQ29udGV4dCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5zYW1wbGVzID0gbmV3IEZsb2F0MzJBcnJheSgpO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnRcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5hdXRvVXBkYXRlQnVmZmVyVGltZXIpO1xuICAgICAgICAgICAgdGhpcy5hdWRpb0NvbnRleHQuY2xvc2UoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoISFjYikge1xuICAgICAgICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgICAgICBlcnIoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5hdWRpb0NvbnRleHQgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGluaXQoYXVkaW9Gb3JtYXQpIHtcbiAgICAgICAgdGhpcy5hdWRpb0Zvcm1hdCA9IGF1ZGlvRm9ybWF0O1xuICAgICAgICB0aGlzLnNhbXBsZXMgPSBuZXcgRmxvYXQzMkFycmF5KCk7XG4gICAgfVxuICAgIGVuc3VyZUluaXRpYWxpemVkQ29udGV4dCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYXVkaW9Db250ZXh0ID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUF1ZGlvQ29udGV4dCgpO1xuICAgICAgICAgICAgY29uc3QgdGltZXJQZXJpb2QgPSAyMDA7XG4gICAgICAgICAgICB0aGlzLmF1dG9VcGRhdGVCdWZmZXJUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUF1ZGlvQnVmZmVyKCk7XG4gICAgICAgICAgICB9LCB0aW1lclBlcmlvZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlQXVkaW9Db250ZXh0KCkge1xuICAgICAgICAvLyBuZXcgKCh3aW5kb3cgYXMgYW55KS5BdWRpb0NvbnRleHQgfHwgKHdpbmRvdyBhcyBhbnkpLndlYmtpdEF1ZGlvQ29udGV4dCkoKTtcbiAgICAgICAgdGhpcy5hdWRpb0NvbnRleHQgPSBBdWRpb1N0cmVhbUZvcm1hdEltcGwuZ2V0QXVkaW9Db250ZXh0KCk7XG4gICAgICAgIC8vIFRPRE86IFZhcmlvdXMgZXhhbXBsZXMgc2hvd3MgdGhpcyBnYWluIG5vZGUsIGl0IGRvZXMgbm90IHNlZW0gdG8gYmUgbmVlZGVkIHVubGVzcyB3ZSBwbGFuXG4gICAgICAgIC8vIHRvIGNvbnRyb2wgdGhlIHZvbHVtZSwgbm90IGxpa2VseVxuICAgICAgICB0aGlzLmdhaW5Ob2RlID0gdGhpcy5hdWRpb0NvbnRleHQuY3JlYXRlR2FpbigpO1xuICAgICAgICB0aGlzLmdhaW5Ob2RlLmdhaW4udmFsdWUgPSAxO1xuICAgICAgICB0aGlzLmdhaW5Ob2RlLmNvbm5lY3QodGhpcy5hdWRpb0NvbnRleHQuZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHRoaXMuYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lO1xuICAgIH1cbiAgICBmb3JtYXRBdWRpb0RhdGEoYXVkaW9EYXRhKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5hdWRpb0Zvcm1hdC5iaXRzUGVyU2FtcGxlKSB7XG4gICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0QXJyYXlCdWZmZXIobmV3IEludDhBcnJheShhdWRpb0RhdGEpLCAxMjgpO1xuICAgICAgICAgICAgY2FzZSAxNjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRBcnJheUJ1ZmZlcihuZXcgSW50MTZBcnJheShhdWRpb0RhdGEpLCAzMjc2OCk7XG4gICAgICAgICAgICBjYXNlIDMyOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdEFycmF5QnVmZmVyKG5ldyBJbnQzMkFycmF5KGF1ZGlvRGF0YSksIDIxNDc0ODM2NDgpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkVycm9yKFwiT25seSBXQVZFX0ZPUk1BVF9QQ00gKDgvMTYvMzIgYnBzKSBmb3JtYXQgc3VwcG9ydGVkIGF0IHRoaXMgdGltZVwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3JtYXRBcnJheUJ1ZmZlcihhdWRpb0RhdGEsIG1heFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGZsb2F0MzJEYXRhID0gbmV3IEZsb2F0MzJBcnJheShhdWRpb0RhdGEubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdWRpb0RhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZsb2F0MzJEYXRhW2ldID0gYXVkaW9EYXRhW2ldIC8gbWF4VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZsb2F0MzJEYXRhO1xuICAgIH1cbiAgICB1cGRhdGVBdWRpb0J1ZmZlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuc2FtcGxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaGFubmVsQ291bnQgPSB0aGlzLmF1ZGlvRm9ybWF0LmNoYW5uZWxzO1xuICAgICAgICBjb25zdCBidWZmZXJTb3VyY2UgPSB0aGlzLmF1ZGlvQ29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcbiAgICAgICAgY29uc3QgZnJhbWVDb3VudCA9IHRoaXMuc2FtcGxlcy5sZW5ndGggLyBjaGFubmVsQ291bnQ7XG4gICAgICAgIGNvbnN0IGF1ZGlvQnVmZmVyID0gdGhpcy5hdWRpb0NvbnRleHQuY3JlYXRlQnVmZmVyKGNoYW5uZWxDb3VudCwgZnJhbWVDb3VudCwgdGhpcy5hdWRpb0Zvcm1hdC5zYW1wbGVzUGVyU2VjKTtcbiAgICAgICAgLy8gVE9ETzogU2hvdWxkIHdlIGRvIHRoZSBjb252ZXJzaW9uIGluIHRoZSBwdXNoQXVkaW9TYW1wbGUgaW5zdGVhZD9cbiAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCBjaGFubmVsQ291bnQ7IGNoYW5uZWwrKykge1xuICAgICAgICAgICAgLy8gRmlsbCBpbiBpbmRpdmlkdWFsIGNoYW5uZWwgZGF0YVxuICAgICAgICAgICAgbGV0IGNoYW5uZWxPZmZzZXQgPSBjaGFubmVsO1xuICAgICAgICAgICAgY29uc3QgYXVkaW9EYXRhID0gYXVkaW9CdWZmZXIuZ2V0Q2hhbm5lbERhdGEoY2hhbm5lbCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2FtcGxlcy5sZW5ndGg7IGkrKywgY2hhbm5lbE9mZnNldCArPSBjaGFubmVsQ291bnQpIHtcbiAgICAgICAgICAgICAgICBhdWRpb0RhdGFbaV0gPSB0aGlzLnNhbXBsZXNbY2hhbm5lbE9mZnNldF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3RhcnRUaW1lIDwgdGhpcy5hdWRpb0NvbnRleHQuY3VycmVudFRpbWUpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gdGhpcy5hdWRpb0NvbnRleHQuY3VycmVudFRpbWU7XG4gICAgICAgIH1cbiAgICAgICAgYnVmZmVyU291cmNlLmJ1ZmZlciA9IGF1ZGlvQnVmZmVyO1xuICAgICAgICBidWZmZXJTb3VyY2UuY29ubmVjdCh0aGlzLmdhaW5Ob2RlKTtcbiAgICAgICAgYnVmZmVyU291cmNlLnN0YXJ0KHRoaXMuc3RhcnRUaW1lKTtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlIHBsYXkgdGhlIG5leHQgc2FtcGxlIGFmdGVyIHRoZSBjdXJyZW50IG9uZS5cbiAgICAgICAgdGhpcy5zdGFydFRpbWUgKz0gYXVkaW9CdWZmZXIuZHVyYXRpb247XG4gICAgICAgIC8vIENsZWFyIHRoZSBzYW1wbGVzIGZvciB0aGUgbmV4dCBwdXNoZWQgZGF0YS5cbiAgICAgICAgdGhpcy5zYW1wbGVzID0gbmV3IEZsb2F0MzJBcnJheSgpO1xuICAgIH1cbiAgICBwbGF5QXVkaW8oYXVkaW9EYXRhKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hdWRpb0NvbnRleHQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUF1ZGlvQ29udGV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc291cmNlID0gdGhpcy5hdWRpb0NvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gICAgICAgICAgICBjb25zdCBkZXN0aW5hdGlvbiA9IHRoaXMuYXVkaW9Db250ZXh0LmRlc3RpbmF0aW9uO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5hdWRpb0NvbnRleHQuZGVjb2RlQXVkaW9EYXRhKGF1ZGlvRGF0YSwgKG5ld0J1ZmZlcikgPT4ge1xuICAgICAgICAgICAgICAgIHNvdXJjZS5idWZmZXIgPSBuZXdCdWZmZXI7XG4gICAgICAgICAgICAgICAgc291cmNlLmNvbm5lY3QoZGVzdGluYXRpb24pO1xuICAgICAgICAgICAgICAgIHNvdXJjZS5zdGFydCgwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJhc2VBdWRpb1BsYXllci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBBbiBhYnN0cmFjdCBiYXNlIGNsYXNzIHRoYXQgZGVmaW5lcyBjYWxsYmFjayBtZXRob2RzIChyZWFkKCkgYW5kIGNsb3NlKCkpIGZvclxuICogY3VzdG9tIGF1ZGlvIGlucHV0IHN0cmVhbXMpLlxuICogQGNsYXNzIFB1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2tcbiAqL1xuZXhwb3J0IGNsYXNzIFB1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2sge1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1QdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIEFuIGFic3RyYWN0IGJhc2UgY2xhc3MgdGhhdCBkZWZpbmVzIGNhbGxiYWNrIG1ldGhvZHMgKHdyaXRlKCkgYW5kIGNsb3NlKCkpIGZvclxuICogY3VzdG9tIGF1ZGlvIG91dHB1dCBzdHJlYW1zKS5cbiAqIEBjbGFzcyBQdXNoQXVkaW9PdXRwdXRTdHJlYW1DYWxsYmFja1xuICovXG5leHBvcnQgY2xhc3MgUHVzaEF1ZGlvT3V0cHV0U3RyZWFtQ2FsbGJhY2sge1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1QdXNoQXVkaW9PdXRwdXRTdHJlYW1DYWxsYmFjay5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBTeW50aGVzaXNBZGFwdGVyQmFzZSB9IGZyb20gXCIuLi8uLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IEJhY2tncm91bmRFdmVudCwgY3JlYXRlTm9EYXNoR3VpZCwgRXZlbnRzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBQdWxsQXVkaW9PdXRwdXRTdHJlYW1JbXBsIH0gZnJvbSBcIi4vQXVkaW9PdXRwdXRTdHJlYW1cIjtcbmltcG9ydCB7IEF1ZGlvRm9ybWF0VGFnIH0gZnJvbSBcIi4vQXVkaW9TdHJlYW1Gb3JtYXRcIjtcbmNvbnN0IE1lZGlhRHVyYXRpb25QbGFjZWhvbGRlclNlY29uZHMgPSA2MCAqIDMwO1xuY29uc3QgQXVkaW9Gb3JtYXRUb01pbWVUeXBlID0ge1xuICAgIFtBdWRpb0Zvcm1hdFRhZy5QQ01dOiBcImF1ZGlvL3dhdlwiLFxuICAgIFtBdWRpb0Zvcm1hdFRhZy5NdUxhd106IFwiYXVkaW8veC13YXZcIixcbiAgICBbQXVkaW9Gb3JtYXRUYWcuTVAzXTogXCJhdWRpby9tcGVnXCIsXG4gICAgW0F1ZGlvRm9ybWF0VGFnLk9HR19PUFVTXTogXCJhdWRpby9vZ2dcIixcbiAgICBbQXVkaW9Gb3JtYXRUYWcuV0VCTV9PUFVTXTogXCJhdWRpby93ZWJtOyBjb2RlY3M9b3B1c1wiLFxuICAgIFtBdWRpb0Zvcm1hdFRhZy5BTGF3XTogXCJhdWRpby94LXdhdlwiLFxuICAgIFtBdWRpb0Zvcm1hdFRhZy5GTEFDXTogXCJhdWRpby9mbGFjXCIsXG59O1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBzcGVha2VyIHBsYXliYWNrIGF1ZGlvIGRlc3RpbmF0aW9uLCB3aGljaCBvbmx5IHdvcmtzIGluIGJyb3dzZXIuXG4gKiBOb3RlOiB0aGUgU0RLIHdpbGwgdHJ5IHRvIHVzZSA8YSBocmVmPVwiaHR0cHM6Ly93d3cudzMub3JnL1RSL21lZGlhLXNvdXJjZS9cIj5NZWRpYSBTb3VyY2UgRXh0ZW5zaW9uczwvYT4gdG8gcGxheSBhdWRpby5cbiAqIE1wMyBmb3JtYXQgaGFzIGJldHRlciBzdXBwb3J0cyBvbiBNaWNyb3NvZnQgRWRnZSwgQ2hyb21lIGFuZCBTYWZhcmkgKGRlc2t0b3ApLCBzbywgaXQncyBiZXR0ZXIgdG8gc3BlY2lmeSBtcDMgZm9ybWF0IGZvciBwbGF5YmFjay5cbiAqIEBjbGFzcyBTcGVha2VyQXVkaW9EZXN0aW5hdGlvblxuICogVXBkYXRlZCBpbiB2ZXJzaW9uIDEuMTcuMFxuICovXG5leHBvcnQgY2xhc3MgU3BlYWtlckF1ZGlvRGVzdGluYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvRGVzdGluYXRpb25JZCkge1xuICAgICAgICB0aGlzLnByaXZQbGF5YmFja1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2QXBwZW5kaW5nVG9CdWZmZXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2TWVkaWFTb3VyY2VPcGVuZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2Qnl0ZXNSZWNlaXZlZCA9IDA7XG4gICAgICAgIHRoaXMucHJpdklkID0gYXVkaW9EZXN0aW5hdGlvbklkID8gYXVkaW9EZXN0aW5hdGlvbklkIDogY3JlYXRlTm9EYXNoR3VpZCgpO1xuICAgICAgICB0aGlzLnByaXZJc1BhdXNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZJc0Nsb3NlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklkO1xuICAgIH1cbiAgICB3cml0ZShidWZmZXIsIGNiLCBlcnIpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdkF1ZGlvQnVmZmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkF1ZGlvQnVmZmVyLnB1c2goYnVmZmVyKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU291cmNlQnVmZmVyKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnByaXZBdWRpb091dHB1dFN0cmVhbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZBdWRpb091dHB1dFN0cmVhbS53cml0ZShidWZmZXIpO1xuICAgICAgICAgICAgdGhpcy5wcml2Qnl0ZXNSZWNlaXZlZCArPSBidWZmZXIuYnl0ZUxlbmd0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZShjYiwgZXJyKSB7XG4gICAgICAgIHRoaXMucHJpdklzQ2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMucHJpdlNvdXJjZUJ1ZmZlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVNvdXJjZUJ1ZmZlclVwZGF0ZUVuZCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5wcml2QXVkaW9PdXRwdXRTdHJlYW0gIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBpZiAoKHRoaXMucHJpdkZvcm1hdC5mb3JtYXRUYWcgPT09IEF1ZGlvRm9ybWF0VGFnLlBDTSB8fCB0aGlzLnByaXZGb3JtYXQuZm9ybWF0VGFnID09PSBBdWRpb0Zvcm1hdFRhZy5NdUxhd1xuICAgICAgICAgICAgICAgIHx8IHRoaXMucHJpdkZvcm1hdC5mb3JtYXRUYWcgPT09IEF1ZGlvRm9ybWF0VGFnLkFMYXcpICYmIHRoaXMucHJpdkZvcm1hdC5oYXNIZWFkZXIgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJQbGF5IGJhY2sgaXMgbm90IHN1cHBvcnRlZCBmb3IgcmF3IFBDTSwgbXVsYXcgb3IgYWxhdyBmb3JtYXQgd2l0aG91dCBoZWFkZXIuXCIpO1xuICAgICAgICAgICAgICAgIGlmICghIXRoaXMub25BdWRpb0VuZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQXVkaW9FbmQodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlY2VpdmVkQXVkaW8gPSBuZXcgQXJyYXlCdWZmZXIodGhpcy5wcml2Qnl0ZXNSZWNlaXZlZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2QXVkaW9PdXRwdXRTdHJlYW0ucmVhZChyZWNlaXZlZEF1ZGlvKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZWRBdWRpbyA9IFN5bnRoZXNpc0FkYXB0ZXJCYXNlLmFkZEhlYWRlcihyZWNlaXZlZEF1ZGlvLCB0aGlzLnByaXZGb3JtYXQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0Jsb2IgPSBuZXcgQmxvYihbcmVjZWl2ZWRBdWRpb10sIHsgdHlwZTogQXVkaW9Gb3JtYXRUb01pbWVUeXBlW3RoaXMucHJpdkZvcm1hdC5mb3JtYXRUYWddIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZBdWRpby5zcmMgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChhdWRpb0Jsb2IpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVBsYXliYWNrKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFjYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gdW5zdXBwb3J0ZWQgZm9ybWF0LCBjYWxsIG9uQXVkaW9FbmQgZGlyZWN0bHkuXG4gICAgICAgICAgICBpZiAoISF0aGlzLm9uQXVkaW9FbmQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQXVkaW9FbmQodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0IGZvcm1hdChmb3JtYXQpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuICAgICAgICBpZiAodHlwZW9mIChBdWRpb0NvbnRleHQpICE9PSBcInVuZGVmaW5lZFwiIHx8ICh0eXBlb2YgKHdpbmRvdykgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mICh3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSAhPT0gXCJ1bmRlZmluZWRcIikpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkZvcm1hdCA9IGZvcm1hdDtcbiAgICAgICAgICAgIGNvbnN0IG1pbWVUeXBlID0gQXVkaW9Gb3JtYXRUb01pbWVUeXBlW3RoaXMucHJpdkZvcm1hdC5mb3JtYXRUYWddO1xuICAgICAgICAgICAgaWYgKG1pbWVUeXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5rbm93biBtaW1lVHlwZSBmb3IgZm9ybWF0ICR7QXVkaW9Gb3JtYXRUYWdbdGhpcy5wcml2Rm9ybWF0LmZvcm1hdFRhZ119OyBwbGF5YmFjayBpcyBub3Qgc3VwcG9ydGVkLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIChNZWRpYVNvdXJjZSkgIT09IFwidW5kZWZpbmVkXCIgJiYgTWVkaWFTb3VyY2UuaXNUeXBlU3VwcG9ydGVkKG1pbWVUeXBlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkF1ZGlvID0gbmV3IEF1ZGlvKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2QXVkaW9CdWZmZXIgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZNZWRpYVNvdXJjZSA9IG5ldyBNZWRpYVNvdXJjZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkF1ZGlvLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwodGhpcy5wcml2TWVkaWFTb3VyY2UpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkF1ZGlvLmxvYWQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZNZWRpYVNvdXJjZS5vbnNvdXJjZW9wZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdk1lZGlhU291cmNlT3BlbmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2TWVkaWFTb3VyY2UuZHVyYXRpb24gPSBNZWRpYUR1cmF0aW9uUGxhY2Vob2xkZXJTZWNvbmRzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTb3VyY2VCdWZmZXIgPSB0aGlzLnByaXZNZWRpYVNvdXJjZS5hZGRTb3VyY2VCdWZmZXIobWltZVR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTb3VyY2VCdWZmZXIub251cGRhdGUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNvdXJjZUJ1ZmZlcigpLmNhdGNoKChyZWFzb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudHMuaW5zdGFuY2Uub25FdmVudChuZXcgQmFja2dyb3VuZEV2ZW50KHJlYXNvbikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlNvdXJjZUJ1ZmZlci5vbnVwZGF0ZWVuZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlU291cmNlQnVmZmVyVXBkYXRlRW5kKCkuY2F0Y2goKHJlYXNvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50cy5pbnN0YW5jZS5vbkV2ZW50KG5ldyBCYWNrZ3JvdW5kRXZlbnQocmVhc29uKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U291cmNlQnVmZmVyLm9udXBkYXRlc3RhcnQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZBcHBlbmRpbmdUb0J1ZmZlciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTb3VyY2VCdWZmZXIoKS5jYXRjaCgocmVhc29uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIEV2ZW50cy5pbnN0YW5jZS5vbkV2ZW50KG5ldyBCYWNrZ3JvdW5kRXZlbnQocmVhc29uKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgRm9ybWF0ICR7QXVkaW9Gb3JtYXRUYWdbdGhpcy5wcml2Rm9ybWF0LmZvcm1hdFRhZ119IGNvdWxkIG5vdCBiZSBwbGF5ZWQgYnkgTVNFLCBzdHJlYW1pbmcgcGxheWJhY2sgaXMgbm90IGVuYWJsZWQuYCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2QXVkaW9PdXRwdXRTdHJlYW0gPSBuZXcgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtSW1wbCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkF1ZGlvT3V0cHV0U3RyZWFtLmZvcm1hdCA9IHRoaXMucHJpdkZvcm1hdDtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZBdWRpbyA9IG5ldyBBdWRpbygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldCB2b2x1bWUoKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiAoX2IgPSAoX2EgPSB0aGlzLnByaXZBdWRpbykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnZvbHVtZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogLTE7XG4gICAgfVxuICAgIHNldCB2b2x1bWUodm9sdW1lKSB7XG4gICAgICAgIGlmICghIXRoaXMucHJpdkF1ZGlvKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZBdWRpby52b2x1bWUgPSB2b2x1bWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbXV0ZSgpIHtcbiAgICAgICAgaWYgKCEhdGhpcy5wcml2QXVkaW8pIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkF1ZGlvLm11dGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bm11dGUoKSB7XG4gICAgICAgIGlmICghIXRoaXMucHJpdkF1ZGlvKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZBdWRpby5tdXRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBpc0Nsb3NlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdklzQ2xvc2VkO1xuICAgIH1cbiAgICBnZXQgY3VycmVudFRpbWUoKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZBdWRpbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW8uY3VycmVudFRpbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBwYXVzZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnByaXZJc1BhdXNlZCAmJiB0aGlzLnByaXZBdWRpbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZBdWRpby5wYXVzZSgpO1xuICAgICAgICAgICAgdGhpcy5wcml2SXNQYXVzZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc3VtZShjYiwgZXJyKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZJc1BhdXNlZCAmJiB0aGlzLnByaXZBdWRpbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZBdWRpby5wbGF5KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMucHJpdklzUGF1c2VkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGludGVybmFsQXVkaW8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpbztcbiAgICB9XG4gICAgdXBkYXRlU291cmNlQnVmZmVyKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkF1ZGlvQnVmZmVyICE9PSB1bmRlZmluZWQgJiYgKHRoaXMucHJpdkF1ZGlvQnVmZmVyLmxlbmd0aCA+IDApICYmIHRoaXMuc291cmNlQnVmZmVyQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZBcHBlbmRpbmdUb0J1ZmZlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc3QgYmluYXJ5ID0gdGhpcy5wcml2QXVkaW9CdWZmZXIuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTb3VyY2VCdWZmZXIuYXBwZW5kQnVmZmVyKGJpbmFyeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZBdWRpb0J1ZmZlci51bnNoaWZ0KGJpbmFyeSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYnVmZmVyIGZpbGxlZCwgcGF1c2luZyBhZGRpdGlvbiBvZiBiaW5hcmllcyB1bnRpbCBzcGFjZSBpcyBtYWRlXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMubm90aWZ5UGxheWJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY2FuRW5kU3RyZWFtKCkpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmhhbmRsZVNvdXJjZUJ1ZmZlclVwZGF0ZUVuZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaGFuZGxlU291cmNlQnVmZmVyVXBkYXRlRW5kKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FuRW5kU3RyZWFtKCkgJiYgdGhpcy5zb3VyY2VCdWZmZXJBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdk1lZGlhU291cmNlLmVuZE9mU3RyZWFtKCk7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5ub3RpZnlQbGF5YmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm90aWZ5UGxheWJhY2soKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJpdlBsYXliYWNrU3RhcnRlZCAmJiB0aGlzLnByaXZBdWRpbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UGxheWJhY2tTdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLm9uQXVkaW9TdGFydCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQXVkaW9TdGFydCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2QXVkaW8ub25lbmRlZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5vbkF1ZGlvRW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQXVkaW9FbmQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcml2SXNQYXVzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2QXVkaW8ucGxheSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhbkVuZFN0cmVhbSgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmlzQ2xvc2VkICYmIHRoaXMucHJpdlNvdXJjZUJ1ZmZlciAhPT0gdW5kZWZpbmVkICYmICh0aGlzLnByaXZBdWRpb0J1ZmZlci5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAmJiB0aGlzLnByaXZNZWRpYVNvdXJjZU9wZW5lZCAmJiAhdGhpcy5wcml2QXBwZW5kaW5nVG9CdWZmZXIgJiYgdGhpcy5wcml2TWVkaWFTb3VyY2UucmVhZHlTdGF0ZSA9PT0gXCJvcGVuXCIpO1xuICAgIH1cbiAgICBzb3VyY2VCdWZmZXJBdmFpbGFibGUoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5wcml2U291cmNlQnVmZmVyICE9PSB1bmRlZmluZWQgJiYgIXRoaXMucHJpdlNvdXJjZUJ1ZmZlci51cGRhdGluZyk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVha2VyQXVkaW9EZXN0aW5hdGlvbi5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlc09wZW5SYW5nZU9wdGlvbk5hbWUgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IFByb3BlcnR5Q29sbGVjdGlvbiwgUHJvcGVydHlJZCwgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBMYW5ndWFnZUlkTW9kZSB9IGZyb20gXCIuL0xhbmd1YWdlSWRNb2RlXCI7XG4vKipcbiAqIExhbmd1YWdlIGF1dG8gZGV0ZWN0IGNvbmZpZ3VyYXRpb24uXG4gKiBAY2xhc3MgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnXG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTMuMC5cbiAqL1xuZXhwb3J0IGNsYXNzIEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9MYW5ndWFnZUlkTW9kZSwgXCJBdFN0YXJ0XCIpO1xuICAgICAgICB0aGlzLnByaXZMYW5ndWFnZUlkTW9kZSA9IExhbmd1YWdlSWRNb2RlLkF0U3RhcnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBtZW1iZXIgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnLmZyb21PcGVuUmFuZ2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogT25seSBbW1NwZWVjaFN5bnRoZXNpemVyXV0gc3VwcG9ydHMgc291cmNlIGxhbmd1YWdlIGF1dG8gZGV0ZWN0aW9uIGZyb20gb3BlbiByYW5nZSxcbiAgICAgKiBmb3IgW1tSZWNvZ25pemVyXV0sIHBsZWFzZSB1c2UgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnIHdpdGggc3BlY2lmaWMgc291cmNlIGxhbmd1YWdlcy5cbiAgICAgKiBAcmV0dXJuIHtBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWd9IEluc3RhbmNlIG9mIEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZ1xuICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZyB3aXRoIG9wZW4gcmFuZ2UuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21PcGVuUmFuZ2UoKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IG5ldyBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWcoKTtcbiAgICAgICAgY29uZmlnLnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9BdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VzLCBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VzT3BlblJhbmdlT3B0aW9uTmFtZSk7XG4gICAgICAgIHJldHVybiBjb25maWc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBtZW1iZXIgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnLmZyb21MYW5ndWFnZXNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gbGFuZ3VhZ2VzIENvbW1hLXNlcGFyYXRlZCBzdHJpbmcgb2YgbGFuZ3VhZ2VzIChlZy4gXCJlbi1VUyxmci1GUlwiKSB0byBwb3B1bGF0ZSBwcm9wZXJ0aWVzIG9mIGNvbmZpZy5cbiAgICAgKiBAcmV0dXJuIHtBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWd9IEluc3RhbmNlIG9mIEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZ1xuICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZyB3aXRoIGdpdmVuIGxhbmd1YWdlcy5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUxhbmd1YWdlcyhsYW5ndWFnZXMpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZBcnJheUVtcHR5T3JXaGl0ZXNwYWNlKGxhbmd1YWdlcywgXCJsYW5ndWFnZXNcIik7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IG5ldyBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWcoKTtcbiAgICAgICAgY29uZmlnLnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9BdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VzLCBsYW5ndWFnZXMuam9pbigpKTtcbiAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWcuZnJvbVNvdXJjZUxhbmd1YWdlQ29uZmlnc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1NvdXJjZUxhbmd1YWdlQ29uZmlnW119IGNvbmZpZ3MgU291cmNlTGFuZ3VhZ2VDb25maWdzIHRvIHBvcHVsYXRlIHByb3BlcnRpZXMgb2YgY29uZmlnLlxuICAgICAqIEByZXR1cm4ge0F1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZ30gSW5zdGFuY2Ugb2YgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnXG4gICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnIHdpdGggZ2l2ZW4gU291cmNlTGFuZ3VhZ2VDb25maWdzLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tU291cmNlTGFuZ3VhZ2VDb25maWdzKGNvbmZpZ3MpIHtcbiAgICAgICAgaWYgKGNvbmZpZ3MubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXhwZWN0ZWQgbm9uLWVtcHR5IFNvdXJjZUxhbmd1YWdlQ29uZmlnIGFycmF5LlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhdXRvQ29uZmlnID0gbmV3IEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZygpO1xuICAgICAgICBjb25zdCBsYW5ncyA9IFtdO1xuICAgICAgICBjb25maWdzLmZvckVhY2goKGNvbmZpZykgPT4ge1xuICAgICAgICAgICAgbGFuZ3MucHVzaChjb25maWcubGFuZ3VhZ2UpO1xuICAgICAgICAgICAgaWYgKGNvbmZpZy5lbmRwb2ludElkICE9PSB1bmRlZmluZWQgJiYgY29uZmlnLmVuZHBvaW50SWQgIT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXN0b21Qcm9wZXJ0eSA9IGNvbmZpZy5sYW5ndWFnZSArIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnRJZC50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGF1dG9Db25maWcucHJvcGVydGllcy5zZXRQcm9wZXJ0eShjdXN0b21Qcm9wZXJ0eSwgY29uZmlnLmVuZHBvaW50SWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYXV0b0NvbmZpZy5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlcywgbGFuZ3Muam9pbigpKTtcbiAgICAgICAgcmV0dXJuIGF1dG9Db25maWc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBtZW1iZXIgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnLnByb3RvdHlwZS5wcm9wZXJ0aWVzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm4ge1Byb3BlcnR5Q29sbGVjdGlvbn0gUHJvcGVydGllcyBvZiB0aGUgY29uZmlnLlxuICAgICAqIEBzdW1tYXJ5IEdldHMgYW4gYXV0byBkZXRlY3RlZCBsYW5ndWFnZSBjb25maWcgcHJvcGVydGllc1xuICAgICAqL1xuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWcucHJvdG90eXBlLm1vZGVcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtMYW5ndWFnZUlkTW9kZX0gbW9kZSBMSUQgbW9kZSBkZXNpcmVkLlxuICAgICAqIEBzdW1tYXJ5IFNldHMgTElEIG9wZXJhdGlvbiB0byBkZXNpcmVkIG1vZGVcbiAgICAgKi9cbiAgICBzZXQgbW9kZShtb2RlKSB7XG4gICAgICAgIGlmIChtb2RlID09PSBMYW5ndWFnZUlkTW9kZS5Db250aW51b3VzKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb2duaXRpb25FbmRwb2ludFZlcnNpb24sIFwiMlwiKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9MYW5ndWFnZUlkTW9kZSwgXCJDb250aW51b3VzXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgeyAvLyBMYW5ndWFnZUlkTW9kZS5BdFN0YXJ0XG4gICAgICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb2duaXRpb25FbmRwb2ludFZlcnNpb24sIFwiMVwiKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9MYW5ndWFnZUlkTW9kZSwgXCJBdFN0YXJ0XCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdkxhbmd1YWdlSWRNb2RlID0gbW9kZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG4vKipcbiAqIE91dHB1dCBmb3JtYXRcbiAqIEBjbGFzcyBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VSZXN1bHRcbiAqL1xuZXhwb3J0IGNsYXNzIEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZVJlc3VsdCB7XG4gICAgY29uc3RydWN0b3IobGFuZ3VhZ2UsIGxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChsYW5ndWFnZSwgXCJsYW5ndWFnZVwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQobGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlLCBcImxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZVwiKTtcbiAgICAgICAgdGhpcy5wcml2TGFuZ3VhZ2UgPSBsYW5ndWFnZTtcbiAgICAgICAgdGhpcy5wcml2TGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlID0gbGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZVJlc3VsdCBvYmplY3QgZnJvbSBhIFNwZWVjaFJlY29nbml0aW9uUmVzdWx0IGluc3RhbmNlLlxuICAgICAqIEBtZW1iZXIgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlUmVzdWx0LmZyb21SZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtTcGVlY2hSZWNvZ25pdGlvblJlc3VsdH0gcmVzdWx0IC0gVGhlIHJlY29nbml0aW9uIHJlc3VsdC5cbiAgICAgKiBAcmV0dXJucyB7QXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlUmVzdWx0fSBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VSZXN1bHQgb2JqZWN0IGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21SZXN1bHQocmVzdWx0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlUmVzdWx0KHJlc3VsdC5sYW5ndWFnZSwgcmVzdWx0Lmxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSk7XG4gICAgfVxuICAgIGdldCBsYW5ndWFnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkxhbmd1YWdlO1xuICAgIH1cbiAgICBnZXQgbGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlUmVzdWx0LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IERpYWxvZ1NlcnZpY2VDb25maWcsIERpYWxvZ1NlcnZpY2VDb25maWdJbXBsIH0gZnJvbSBcIi4vRGlhbG9nU2VydmljZUNvbmZpZ1wiO1xuaW1wb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogQ2xhc3MgdGhhdCBkZWZpbmVzIGNvbmZpZ3VyYXRpb25zIGZvciB0aGUgZGlhbG9nIHNlcnZpY2UgY29ubmVjdG9yIG9iamVjdCBmb3IgdXNpbmcgYSBCb3QgRnJhbWV3b3JrIGJhY2tlbmQuXG4gKiBAY2xhc3MgQm90RnJhbWV3b3JrQ29uZmlnXG4gKi9cbmV4cG9ydCBjbGFzcyBCb3RGcmFtZXdvcmtDb25maWcgZXh0ZW5kcyBEaWFsb2dTZXJ2aWNlQ29uZmlnSW1wbCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBCb3RGcmFtZXdvcmtDb25maWcuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBib3QgZnJhbWV3b3JrIGNvbmZpZ3VyYXRpb24gaW5zdGFuY2Ugd2l0aCB0aGUgcHJvdmlkZWQgc3Vic2NyaXB0aW9uIGluZm9ybWF0aW9uLlxuICAgICAqIEBtZW1iZXIgQm90RnJhbWV3b3JrQ29uZmlnLmZyb21TdWJzY3JpcHRpb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHN1YnNjcmlwdGlvbiBTdWJzY3JpcHRpb24ga2V5IGFzc29jaWF0ZWQgd2l0aCB0aGUgYm90XG4gICAgICogQHBhcmFtIHJlZ2lvbiBUaGUgcmVnaW9uIG5hbWUgKHNlZSB0aGUgPGEgaHJlZj1cImh0dHBzOi8vYWthLm1zL2Nzc3BlZWNoL3JlZ2lvblwiPnJlZ2lvbiBwYWdlPC9hPikuXG4gICAgICogQHBhcmFtIGJvdElkIE9wdGlvbmFsLiBJZGVudGlmaWVyIGZvciB1c2luZyBhIHNwZWNpZmljIGJvdCB3aXRoaW4gYW4gQXp1cmUgcmVzb3VyY2UgZ3JvdXAuIEVxdWl2YWxlbnQgdG8gdGhlXG4gICAgICogcmVzb3VyY2UgbmFtZS5cbiAgICAgKiBAcmV0dXJucyB7Qm90RnJhbWV3b3JrQ29uZmlnfSBBIG5ldyBib3QgZnJhbWV3b3JrIGNvbmZpZ3VyYXRpb24gaW5zdGFuY2UuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21TdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uLCByZWdpb24sIGJvdElkKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShzdWJzY3JpcHRpb24sIFwic3Vic2NyaXB0aW9uXCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocmVnaW9uLCBcInJlZ2lvblwiKTtcbiAgICAgICAgY29uc3QgYm90RnJhbWV3b3JrQ29uZmlnID0gbmV3IERpYWxvZ1NlcnZpY2VDb25maWdJbXBsKCk7XG4gICAgICAgIGJvdEZyYW1ld29ya0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9EaWFsb2dUeXBlLCBEaWFsb2dTZXJ2aWNlQ29uZmlnLkRpYWxvZ1R5cGVzLkJvdEZyYW1ld29yayk7XG4gICAgICAgIGJvdEZyYW1ld29ya0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleSwgc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgYm90RnJhbWV3b3JrQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVnaW9uLCByZWdpb24pO1xuICAgICAgICBpZiAoYm90SWQpIHtcbiAgICAgICAgICAgIGJvdEZyYW1ld29ya0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9BcHBsaWNhdGlvbklkLCBib3RJZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJvdEZyYW1ld29ya0NvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGJvdCBmcmFtZXdvcmsgY29uZmlndXJhdGlvbiBpbnN0YW5jZSBmb3IgdGhlIHNwZWNpZmllZCBhdXRob3JpemF0aW9uIHRva2VuIGFuZCByZWdpb24uXG4gICAgICogTm90ZTogVGhlIGNhbGxlciBtdXN0IGVuc3VyZSB0aGF0IGFuIGF1dGhvcml6YXRpb24gdG9rZW4gaXMgdmFsaWQuIEJlZm9yZSBhbiBhdXRob3JpemF0aW9uIHRva2VuIGV4cGlyZXMsIHRoZVxuICAgICAqIGNhbGxlciBtdXN0IHJlZnJlc2ggaXQgYnkgc2V0dGluZyB0aGUgYXV0aG9yaXphdGlvblRva2VuIHByb3BlcnR5IG9uIHRoZSBjb3JyZXNwb25kaW5nXG4gICAgICogRGlhbG9nU2VydmljZUNvbm5lY3RvciBpbnN0YW5jZSBjcmVhdGVkIHdpdGggdGhpcyBjb25maWcuIFRoZSBjb250ZW50cyBvZiBjb25maWd1cmF0aW9uIG9iamVjdHMgYXJlIGNvcGllZFxuICAgICAqIHdoZW4gY29ubmVjdG9ycyBhcmUgY3JlYXRlZCwgc28gc2V0dGluZyBhdXRob3JpemF0aW9uVG9rZW4gb24gYSBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yIHdpbGwgbm90IHVwZGF0ZSB0aGVcbiAgICAgKiBvcmlnaW5hbCBjb25maWd1cmF0aW9uJ3MgYXV0aG9yaXphdGlvbiB0b2tlbi4gQ3JlYXRlIGEgbmV3IGNvbmZpZ3VyYXRpb24gaW5zdGFuY2Ugb3Igc2V0IHRoZVxuICAgICAqIFNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuIHByb3BlcnR5IHRvIHVwZGF0ZSBhbiBleGlzdGluZyBpbnN0YW5jZSBpZiBpdCB3aWxsIGJlIHVzZWQgdG8gY3JlYXRlXG4gICAgICogZnVydGhlciBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9ycy5cbiAgICAgKiBAbWVtYmVyIEJvdEZyYW1ld29ya0NvbmZpZy5mcm9tQXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBhdXRob3JpemF0aW9uVG9rZW4gVGhlIGF1dGhvcml6YXRpb24gdG9rZW4gYXNzb2NpYXRlZCB3aXRoIHRoZSBib3RcbiAgICAgKiBAcGFyYW0gcmVnaW9uIFRoZSByZWdpb24gbmFtZSAoc2VlIHRoZSA8YSBocmVmPVwiaHR0cHM6Ly9ha2EubXMvY3NzcGVlY2gvcmVnaW9uXCI+cmVnaW9uIHBhZ2U8L2E+KS5cbiAgICAgKiBAcGFyYW0gYm90SWQgT3B0aW9uYWwuIElkZW50aWZpZXIgZm9yIHVzaW5nIGEgc3BlY2lmaWMgYm90IHdpdGhpbiBhbiBBenVyZSByZXNvdXJjZSBncm91cC4gRXF1aXZhbGVudCB0byB0aGVcbiAgICAgKiByZXNvdXJjZSBuYW1lLlxuICAgICAqIEByZXR1cm5zIHtCb3RGcmFtZXdvcmtDb25maWd9IEEgbmV3IGJvdCBmcmFtZXdvcmsgY29uZmlndXJhdGlvbiBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUF1dGhvcml6YXRpb25Ub2tlbihhdXRob3JpemF0aW9uVG9rZW4sIHJlZ2lvbiwgYm90SWQpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKGF1dGhvcml6YXRpb25Ub2tlbiwgXCJhdXRob3JpemF0aW9uVG9rZW5cIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShyZWdpb24sIFwicmVnaW9uXCIpO1xuICAgICAgICBjb25zdCBib3RGcmFtZXdvcmtDb25maWcgPSBuZXcgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwoKTtcbiAgICAgICAgYm90RnJhbWV3b3JrQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0RpYWxvZ1R5cGUsIERpYWxvZ1NlcnZpY2VDb25maWcuRGlhbG9nVHlwZXMuQm90RnJhbWV3b3JrKTtcbiAgICAgICAgYm90RnJhbWV3b3JrQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4sIGF1dGhvcml6YXRpb25Ub2tlbik7XG4gICAgICAgIGJvdEZyYW1ld29ya0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbiwgcmVnaW9uKTtcbiAgICAgICAgaWYgKGJvdElkKSB7XG4gICAgICAgICAgICBib3RGcmFtZXdvcmtDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25fQXBwbGljYXRpb25JZCwgYm90SWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBib3RGcmFtZXdvcmtDb25maWc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYSBCb3RGcmFtZXdvcmtDb25maWcuXG4gICAgICogVGhpcyBtZXRob2QgaXMgaW50ZW5kZWQgb25seSBmb3IgdXNlcnMgd2hvIHVzZSBhIG5vbi1kZWZhdWx0IHNlcnZpY2UgaG9zdC4gVGhlIHN0YW5kYXJkIHJlc291cmNlIHBhdGggd2lsbCBiZVxuICAgICAqIGFzc3VtZWQuIEZvciBzZXJ2aWNlcyB3aXRoIGEgbm9uLXN0YW5kYXJkIHJlc291cmNlIHBhdGggb3Igbm8gcGF0aCBhdCBhbGwsIHVzZSBmcm9tRW5kcG9pbnQgaW5zdGVhZC5cbiAgICAgKiBOb3RlOiBRdWVyeSBwYXJhbWV0ZXJzIGFyZSBub3QgYWxsb3dlZCBpbiB0aGUgaG9zdCBVUkkgYW5kIG11c3QgYmUgc2V0IGJ5IG90aGVyIEFQSXMuXG4gICAgICogTm90ZTogVG8gdXNlIGFuIGF1dGhvcml6YXRpb24gdG9rZW4gd2l0aCBmcm9tSG9zdCwgdXNlIGZyb21Ib3N0KFVSTCkgYW5kIHRoZW4gc2V0IHRoZSBBdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBwcm9wZXJ0eSBvbiB0aGUgY3JlYXRlZCBCb3RGcmFtZXdvcmtDb25maWcgaW5zdGFuY2UuXG4gICAgICogTm90ZTogQWRkZWQgaW4gdmVyc2lvbiAxLjE1LjAuXG4gICAgICogQG1lbWJlciBCb3RGcmFtZXdvcmtDb25maWcuZnJvbUhvc3RcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtVUkwgfCBzdHJpbmd9IGhvc3QgLSBJZiBhIFVSTCBpcyBwcm92aWRlZCwgdGhlIGZ1bGx5LXF1YWxpZmllZCBob3N0IHdpdGggcHJvdG9jb2wgKGUuZy5cbiAgICAgKiB3c3M6Ly95b3VyLmhvc3QuY29tOjEyMzQpIHdpbGwgYmUgdXNlZC4gSWYgYSBzdHJpbmcgaXMgcHJvdmlkZWQsIGl0IHdpbGwgYmUgZW1iZWRkZWQgaW5cbiAgICAgKiB3c3M6Ly97aG9zdH0uY29udmFpLnNwZWVjaC5henVyZS51cy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3Vic2NyaXB0aW9uS2V5IC0gVGhlIHN1YnNjcmlwdGlvbiBrZXkuIElmIGEgc3Vic2NyaXB0aW9uIGtleSBpcyBub3Qgc3BlY2lmaWVkLCBhbiBhdXRob3JpemF0aW9uXG4gICAgICogdG9rZW4gbXVzdCBiZSBzZXQuXG4gICAgICogQHBhcmFtIGJvdElkIE9wdGlvbmFsLiBJZGVudGlmaWVyIGZvciB1c2luZyBhIHNwZWNpZmljIGJvdCB3aXRoaW4gYW4gQXp1cmUgcmVzb3VyY2UgZ3JvdXAuIEVxdWl2YWxlbnQgdG8gdGhlXG4gICAgICogcmVzb3VyY2UgbmFtZS5cbiAgICAgKiBAcmV0dXJucyB7Qm90RnJhbWV3b3JrQ29uZmlnfSBBIG5ldyBib3QgZnJhbWV3b3JrIGNvbmZpZ3VyYXRpb24gaW5zdGFuY2UuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21Ib3N0KGhvc3QsIHN1YnNjcmlwdGlvbktleSwgYm90SWQpIHtcbiAgICAgICAgdm9pZCBib3RJZDtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoaG9zdCwgXCJob3N0XCIpO1xuICAgICAgICBjb25zdCByZXNvbHZlZEhvc3QgPSBob3N0IGluc3RhbmNlb2YgVVJMID8gaG9zdCA6IG5ldyBVUkwoYHdzczovLyR7aG9zdH0uY29udmFpLnNwZWVjaC5henVyZS51c2ApO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChyZXNvbHZlZEhvc3QsIFwicmVzb2x2ZWRIb3N0XCIpO1xuICAgICAgICBjb25zdCBib3RGcmFtZXdvcmtDb25maWcgPSBuZXcgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwoKTtcbiAgICAgICAgYm90RnJhbWV3b3JrQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0RpYWxvZ1R5cGUsIERpYWxvZ1NlcnZpY2VDb25maWcuRGlhbG9nVHlwZXMuQm90RnJhbWV3b3JrKTtcbiAgICAgICAgYm90RnJhbWV3b3JrQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSG9zdCwgcmVzb2x2ZWRIb3N0LnRvU3RyaW5nKCkpO1xuICAgICAgICBpZiAodW5kZWZpbmVkICE9PSBzdWJzY3JpcHRpb25LZXkpIHtcbiAgICAgICAgICAgIGJvdEZyYW1ld29ya0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleSwgc3Vic2NyaXB0aW9uS2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYm90RnJhbWV3b3JrQ29uZmlnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGEgQm90RnJhbWV3b3JrQ29uZmlnLlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGludGVuZGVkIG9ubHkgZm9yIHVzZXJzIHdobyB1c2UgYSBub24tc3RhbmRhcmQgc2VydmljZSBlbmRwb2ludCBvciBwYXJhbWV0ZXJzLlxuICAgICAqIE5vdGU6IFRoZSBxdWVyeSBwYXJhbWV0ZXJzIHNwZWNpZmllZCBpbiB0aGUgZW5kcG9pbnQgVVJMIGFyZSBub3QgY2hhbmdlZCwgZXZlbiBpZiB0aGV5IGFyZSBzZXQgYnkgYW55IG90aGVyIEFQSXMuXG4gICAgICogTm90ZTogVG8gdXNlIGF1dGhvcml6YXRpb24gdG9rZW4gd2l0aCBmcm9tRW5kcG9pbnQsIHBhc3MgYW4gZW1wdHkgc3RyaW5nIHRvIHRoZSBzdWJzY3JpcHRpb25LZXkgaW4gdGhlXG4gICAgICogZnJvbUVuZHBvaW50IG1ldGhvZCwgYW5kIHRoZW4gc2V0IGF1dGhvcml6YXRpb25Ub2tlbj1cInRva2VuXCIgb24gdGhlIGNyZWF0ZWQgQm90RnJhbWV3b3JrQ29uZmlnIGluc3RhbmNlIHRvXG4gICAgICogdXNlIHRoZSBhdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqIE5vdGU6IEFkZGVkIGluIHZlcnNpb24gMS4xNS4wLlxuICAgICAqIEBtZW1iZXIgQm90RnJhbWV3b3JrQ29uZmlnLmZyb21FbmRwb2ludFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1VSTH0gZW5kcG9pbnQgLSBUaGUgc2VydmljZSBlbmRwb2ludCB0byBjb25uZWN0IHRvLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdWJzY3JpcHRpb25LZXkgLSBUaGUgc3Vic2NyaXB0aW9uIGtleS4gSWYgYSBzdWJzY3JpcHRpb24ga2V5IGlzIG5vdCBzcGVjaWZpZWQsIGFuIGF1dGhvcml6YXRpb25cbiAgICAgKiB0b2tlbiBtdXN0IGJlIHNldC5cbiAgICAgKiBAcmV0dXJucyB7Qm90RnJhbWV3b3JrQ29uZmlnfSAtIEEgbmV3IGJvdCBmcmFtZXdvcmsgY29uZmlndXJhdGlvbiBpbnN0YW5jZSB1c2luZyB0aGUgcHJvdmlkZWQgZW5kcG9pbnQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21FbmRwb2ludChlbmRwb2ludCwgc3Vic2NyaXB0aW9uS2V5KSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChlbmRwb2ludCwgXCJlbmRwb2ludFwiKTtcbiAgICAgICAgY29uc3QgYm90RnJhbWV3b3JrQ29uZmlnID0gbmV3IERpYWxvZ1NlcnZpY2VDb25maWdJbXBsKCk7XG4gICAgICAgIGJvdEZyYW1ld29ya0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9EaWFsb2dUeXBlLCBEaWFsb2dTZXJ2aWNlQ29uZmlnLkRpYWxvZ1R5cGVzLkJvdEZyYW1ld29yayk7XG4gICAgICAgIGJvdEZyYW1ld29ya0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50LCBlbmRwb2ludC50b1N0cmluZygpKTtcbiAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gc3Vic2NyaXB0aW9uS2V5KSB7XG4gICAgICAgICAgICBib3RGcmFtZXdvcmtDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXksIHN1YnNjcmlwdGlvbktleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJvdEZyYW1ld29ya0NvbmZpZztcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJvdEZyYW1ld29ya0NvbmZpZy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBFbnVtVHJhbnNsYXRpb24sIFNpbXBsZVNwZWVjaFBocmFzZSB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IENhbmNlbGxhdGlvbkRldGFpbHNCYXNlIH0gZnJvbSBcIi4vQ2FuY2VsbGF0aW9uRGV0YWlsc0Jhc2VcIjtcbmltcG9ydCB7IENhbmNlbGxhdGlvbkVycm9yQ29kZSwgQ2FuY2VsbGF0aW9uUmVhc29uLCBSZWNvZ25pdGlvblJlc3VsdCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogQ29udGFpbnMgZGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgd2h5IGEgcmVzdWx0IHdhcyBjYW5jZWxlZC5cbiAqIEBjbGFzcyBDYW5jZWxsYXRpb25EZXRhaWxzXG4gKi9cbmV4cG9ydCBjbGFzcyBDYW5jZWxsYXRpb25EZXRhaWxzIGV4dGVuZHMgQ2FuY2VsbGF0aW9uRGV0YWlsc0Jhc2Uge1xuICAgIGNvbnN0cnVjdG9yKHJlYXNvbiwgZXJyb3JEZXRhaWxzLCBlcnJvckNvZGUpIHtcbiAgICAgICAgc3VwZXIocmVhc29uLCBlcnJvckRldGFpbHMsIGVycm9yQ29kZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgQ2FuY2VsbGF0aW9uRGV0YWlscyBvYmplY3QgZm9yIHRoZSBjYW5jZWxlZCBSZWNvZ25pdGlvblJlc3VsdC5cbiAgICAgKiBAbWVtYmVyIENhbmNlbGxhdGlvbkRldGFpbHMuZnJvbVJlc3VsdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1JlY29nbml0aW9uUmVzdWx0IHwgU3BlZWNoU3ludGhlc2lzUmVzdWx0fSByZXN1bHQgLSBUaGUgcmVzdWx0IHRoYXQgd2FzIGNhbmNlbGVkLlxuICAgICAqIEByZXR1cm5zIHtDYW5jZWxsYXRpb25EZXRhaWxzfSBUaGUgY2FuY2VsbGF0aW9uIGRldGFpbHMgb2JqZWN0IGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21SZXN1bHQocmVzdWx0KSB7XG4gICAgICAgIGxldCByZWFzb24gPSBDYW5jZWxsYXRpb25SZWFzb24uRXJyb3I7XG4gICAgICAgIGxldCBlcnJvckNvZGUgPSBDYW5jZWxsYXRpb25FcnJvckNvZGUuTm9FcnJvcjtcbiAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFJlY29nbml0aW9uUmVzdWx0ICYmICEhcmVzdWx0Lmpzb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHNpbXBsZVNwZWVjaCA9IFNpbXBsZVNwZWVjaFBocmFzZS5mcm9tSlNPTihyZXN1bHQuanNvbik7XG4gICAgICAgICAgICByZWFzb24gPSBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZUNhbmNlbFJlc3VsdChzaW1wbGVTcGVlY2guUmVjb2duaXRpb25TdGF0dXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghIXJlc3VsdC5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBlcnJvckNvZGUgPSBDYW5jZWxsYXRpb25FcnJvckNvZGVbcmVzdWx0LnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBDYW5jZWxsYXRpb25FcnJvckNvZGVbQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLk5vRXJyb3JdKV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBDYW5jZWxsYXRpb25EZXRhaWxzKHJlYXNvbiwgcmVzdWx0LmVycm9yRGV0YWlscyB8fCBFbnVtVHJhbnNsYXRpb24uaW1wbFRyYW5zbGF0ZUVycm9yRGV0YWlscyhlcnJvckNvZGUpLCBlcnJvckNvZGUpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2FuY2VsbGF0aW9uRGV0YWlscy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBDb250YWlucyBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCB3aHkgYSByZXN1bHQgd2FzIGNhbmNlbGVkLlxuICogQGNsYXNzIENhbmNlbGxhdGlvbkRldGFpbHNCYXNlXG4gKi9cbmV4cG9ydCBjbGFzcyBDYW5jZWxsYXRpb25EZXRhaWxzQmFzZSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0NhbmNlbGxhdGlvblJlYXNvbn0gcmVhc29uIC0gVGhlIGNhbmNlbGxhdGlvbiByZWFzb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yRGV0YWlscyAtIFRoZSBlcnJvciBkZXRhaWxzLCBpZiBwcm92aWRlZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZWFzb24sIGVycm9yRGV0YWlscywgZXJyb3JDb2RlKSB7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5wcml2RXJyb3JEZXRhaWxzID0gZXJyb3JEZXRhaWxzO1xuICAgICAgICB0aGlzLnByaXZFcnJvckNvZGUgPSBlcnJvckNvZGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSByZWFzb24gdGhlIHJlY29nbml0aW9uIHdhcyBjYW5jZWxlZC5cbiAgICAgKiBAbWVtYmVyIENhbmNlbGxhdGlvbkRldGFpbHNCYXNlLnByb3RvdHlwZS5yZWFzb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge0NhbmNlbGxhdGlvblJlYXNvbn0gU3BlY2lmaWVzIHRoZSByZWFzb24gY2FuY2VsZWQuXG4gICAgICovXG4gICAgZ2V0IHJlYXNvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlYXNvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW4gY2FzZSBvZiBhbiB1bnN1Y2Nlc3NmdWwgcmVjb2duaXRpb24sIHByb3ZpZGVzIGRldGFpbHMgb2YgdGhlIG9jY3VycmVkIGVycm9yLlxuICAgICAqIEBtZW1iZXIgQ2FuY2VsbGF0aW9uRGV0YWlsc0Jhc2UucHJvdG90eXBlLmVycm9yRGV0YWlsc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBIFN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIGVycm9yIGRldGFpbHMuXG4gICAgICovXG4gICAgZ2V0IGVycm9yRGV0YWlscygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkVycm9yRGV0YWlscztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGVycm9yIGNvZGUgaW4gY2FzZSBvZiBhbiB1bnN1Y2Nlc3NmdWwgcmVjb2duaXRpb24uXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjEuMC5cbiAgICAgKiBAcmV0dXJuIEFuIGVycm9yIGNvZGUgdGhhdCByZXByZXNlbnRzIHRoZSBlcnJvciByZWFzb24uXG4gICAgICovXG4gICAgZ2V0IEVycm9yQ29kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkVycm9yQ29kZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNhbmNlbGxhdGlvbkRldGFpbHNCYXNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgZXJyb3IgY29kZSBpbiBjYXNlIHRoYXQgQ2FuY2VsbGF0aW9uUmVhc29uIGlzIEVycm9yLlxuICogQWRkZWQgaW4gdmVyc2lvbiAxLjEuMC5cbiAqL1xuZXhwb3J0IHZhciBDYW5jZWxsYXRpb25FcnJvckNvZGU7XG4oZnVuY3Rpb24gKENhbmNlbGxhdGlvbkVycm9yQ29kZSkge1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IG5vIGVycm9yIG9jY3VycmVkIGR1cmluZyBzcGVlY2ggcmVjb2duaXRpb24uXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZVtcIk5vRXJyb3JcIl0gPSAwXSA9IFwiTm9FcnJvclwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyBhbiBhdXRoZW50aWNhdGlvbiBlcnJvci5cbiAgICAgKi9cbiAgICBDYW5jZWxsYXRpb25FcnJvckNvZGVbQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW1wiQXV0aGVudGljYXRpb25GYWlsdXJlXCJdID0gMV0gPSBcIkF1dGhlbnRpY2F0aW9uRmFpbHVyZVwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IG9uZSBvciBtb3JlIHJlY29nbml0aW9uIHBhcmFtZXRlcnMgYXJlIGludmFsaWQuXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZVtcIkJhZFJlcXVlc3RQYXJhbWV0ZXJzXCJdID0gMl0gPSBcIkJhZFJlcXVlc3RQYXJhbWV0ZXJzXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoYXQgdGhlIG51bWJlciBvZiBwYXJhbGxlbCByZXF1ZXN0cyBleGNlZWRlZCB0aGUgbnVtYmVyIG9mIGFsbG93ZWRcbiAgICAgKiBjb25jdXJyZW50IHRyYW5zY3JpcHRpb25zIGZvciB0aGUgc3Vic2NyaXB0aW9uLlxuICAgICAqL1xuICAgIENhbmNlbGxhdGlvbkVycm9yQ29kZVtDYW5jZWxsYXRpb25FcnJvckNvZGVbXCJUb29NYW55UmVxdWVzdHNcIl0gPSAzXSA9IFwiVG9vTWFueVJlcXVlc3RzXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGEgY29ubmVjdGlvbiBlcnJvci5cbiAgICAgKi9cbiAgICBDYW5jZWxsYXRpb25FcnJvckNvZGVbQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW1wiQ29ubmVjdGlvbkZhaWx1cmVcIl0gPSA0XSA9IFwiQ29ubmVjdGlvbkZhaWx1cmVcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgYSB0aW1lLW91dCBlcnJvciB3aGVuIHdhaXRpbmcgZm9yIHJlc3BvbnNlIGZyb20gc2VydmljZS5cbiAgICAgKi9cbiAgICBDYW5jZWxsYXRpb25FcnJvckNvZGVbQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW1wiU2VydmljZVRpbWVvdXRcIl0gPSA1XSA9IFwiU2VydmljZVRpbWVvdXRcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCBhbiBlcnJvciBpcyByZXR1cm5lZCBieSB0aGUgc2VydmljZS5cbiAgICAgKi9cbiAgICBDYW5jZWxsYXRpb25FcnJvckNvZGVbQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW1wiU2VydmljZUVycm9yXCJdID0gNl0gPSBcIlNlcnZpY2VFcnJvclwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyBhbiB1bmV4cGVjdGVkIHJ1bnRpbWUgZXJyb3IuXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZVtcIlJ1bnRpbWVFcnJvclwiXSA9IDddID0gXCJSdW50aW1lRXJyb3JcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgYW4gcXVvdGEgb3ZlcnJ1biBvbiBleGlzdGluZyBrZXkuXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZVtcIkZvcmJpZGRlblwiXSA9IDhdID0gXCJGb3JiaWRkZW5cIjtcbn0pKENhbmNlbGxhdGlvbkVycm9yQ29kZSB8fCAoQ2FuY2VsbGF0aW9uRXJyb3JDb2RlID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2FuY2VsbGF0aW9uRXJyb3JDb2Rlcy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUmVjb2duaXRpb25FdmVudEFyZ3MgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIERlZmluZXMgY29udGVudCBvZiBhIENhbmNlbGxhdGlvbkV2ZW50LlxuICogQGNsYXNzIENhbmNlbGxhdGlvbkV2ZW50QXJnc0Jhc2VcbiAqL1xuZXhwb3J0IGNsYXNzIENhbmNlbGxhdGlvbkV2ZW50QXJnc0Jhc2UgZXh0ZW5kcyBSZWNvZ25pdGlvbkV2ZW50QXJncyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0NhbmNlbGxhdGlvblJlYXNvbn0gcmVhc29uIC0gVGhlIGNhbmNlbGxhdGlvbiByZWFzb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yRGV0YWlscyAtIEVycm9yIGRldGFpbHMsIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgLSBUaGUgb2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzZXNzaW9uSWQgLSBUaGUgc2Vzc2lvbiBpZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZWFzb24sIGVycm9yRGV0YWlscywgZXJyb3JDb2RlLCBvZmZzZXQsIHNlc3Npb25JZCkge1xuICAgICAgICBzdXBlcihvZmZzZXQsIHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5wcml2RXJyb3JEZXRhaWxzID0gZXJyb3JEZXRhaWxzO1xuICAgICAgICB0aGlzLnByaXZFcnJvckNvZGUgPSBlcnJvckNvZGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSByZWFzb24gdGhlIHJlY29nbml0aW9uIHdhcyBjYW5jZWxlZC5cbiAgICAgKiBAbWVtYmVyIENhbmNlbGxhdGlvbkV2ZW50QXJnc0Jhc2UucHJvdG90eXBlLnJlYXNvblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7Q2FuY2VsbGF0aW9uUmVhc29ufSBTcGVjaWZpZXMgdGhlIHJlYXNvbiBjYW5jZWxlZC5cbiAgICAgKi9cbiAgICBnZXQgcmVhc29uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVhc29uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZXJyb3IgY29kZSBpbiBjYXNlIG9mIGFuIHVuc3VjY2Vzc2Z1bCBvcGVyYXRpb24uXG4gICAgICogQHJldHVybiBBbiBlcnJvciBjb2RlIHRoYXQgcmVwcmVzZW50cyB0aGUgZXJyb3IgcmVhc29uLlxuICAgICAqL1xuICAgIGdldCBlcnJvckNvZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckNvZGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluIGNhc2Ugb2YgYW4gdW5zdWNjZXNzZnVsIG9wZXJhdGlvbiwgcHJvdmlkZXMgZGV0YWlscyBvZiB0aGUgb2NjdXJyZWQgZXJyb3IuXG4gICAgICogQG1lbWJlciBDYW5jZWxsYXRpb25FdmVudEFyZ3NCYXNlLnByb3RvdHlwZS5lcnJvckRldGFpbHNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBlcnJvciBkZXRhaWxzLlxuICAgICAqL1xuICAgIGdldCBlcnJvckRldGFpbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckRldGFpbHM7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1DYW5jZWxsYXRpb25FdmVudEFyZ3NCYXNlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgdGhlIHBvc3NpYmxlIHJlYXNvbnMgYSByZWNvZ25pdGlvbiByZXN1bHQgbWlnaHQgYmUgY2FuY2VsZWQuXG4gKiBAY2xhc3MgQ2FuY2VsbGF0aW9uUmVhc29uXG4gKi9cbmV4cG9ydCB2YXIgQ2FuY2VsbGF0aW9uUmVhc29uO1xuKGZ1bmN0aW9uIChDYW5jZWxsYXRpb25SZWFzb24pIHtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCBhbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgc3BlZWNoIHJlY29nbml0aW9uLlxuICAgICAqIEBtZW1iZXIgQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uUmVhc29uW0NhbmNlbGxhdGlvblJlYXNvbltcIkVycm9yXCJdID0gMF0gPSBcIkVycm9yXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoYXQgdGhlIGVuZCBvZiB0aGUgYXVkaW8gc3RyZWFtIHdhcyByZWFjaGVkLlxuICAgICAqIEBtZW1iZXIgQ2FuY2VsbGF0aW9uUmVhc29uLkVuZE9mU3RyZWFtXG4gICAgICovXG4gICAgQ2FuY2VsbGF0aW9uUmVhc29uW0NhbmNlbGxhdGlvblJlYXNvbltcIkVuZE9mU3RyZWFtXCJdID0gMV0gPSBcIkVuZE9mU3RyZWFtXCI7XG59KShDYW5jZWxsYXRpb25SZWFzb24gfHwgKENhbmNlbGxhdGlvblJlYXNvbiA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNhbmNlbGxhdGlvblJlYXNvbi5qcy5tYXBcbiIsIi8vXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdC4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4gU2VlIExJQ0VOU0UubWQgZmlsZSBpbiB0aGUgcHJvamVjdCByb290IGZvciBmdWxsIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4vL1xuaW1wb3J0IHsgU2VydmljZVJlY29nbml6ZXJCYXNlLCBTeW50aGVzaXNBZGFwdGVyQmFzZSwgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzLCB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29ubmVjdGlvbk1lc3NhZ2VJbXBsIH0gZnJvbSBcIi4vQ29ubmVjdGlvbk1lc3NhZ2VcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgQ29ubmVjdGlvbkV2ZW50QXJncywgQ29ubmVjdGlvbk1lc3NhZ2VFdmVudEFyZ3MsIFNlcnZpY2VFdmVudEFyZ3MsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBDb25uZWN0aW9uIGlzIGEgcHJveHkgY2xhc3MgZm9yIG1hbmFnaW5nIGNvbm5lY3Rpb24gdG8gdGhlIHNwZWVjaCBzZXJ2aWNlIG9mIHRoZSBzcGVjaWZpZWQgUmVjb2duaXplci5cbiAqIEJ5IGRlZmF1bHQsIGEgUmVjb2duaXplciBhdXRvbm9tb3VzbHkgbWFuYWdlcyBjb25uZWN0aW9uIHRvIHNlcnZpY2Ugd2hlbiBuZWVkZWQuXG4gKiBUaGUgQ29ubmVjdGlvbiBjbGFzcyBwcm92aWRlcyBhZGRpdGlvbmFsIG1ldGhvZHMgZm9yIHVzZXJzIHRvIGV4cGxpY2l0bHkgb3BlbiBvciBjbG9zZSBhIGNvbm5lY3Rpb24gYW5kXG4gKiB0byBzdWJzY3JpYmUgdG8gY29ubmVjdGlvbiBzdGF0dXMgY2hhbmdlcy5cbiAqIFRoZSB1c2Ugb2YgQ29ubmVjdGlvbiBpcyBvcHRpb25hbCwgYW5kIG1haW5seSBmb3Igc2NlbmFyaW9zIHdoZXJlIGZpbmUgdHVuaW5nIG9mIGFwcGxpY2F0aW9uXG4gKiBiZWhhdmlvciBiYXNlZCBvbiBjb25uZWN0aW9uIHN0YXR1cyBpcyBuZWVkZWQuIFVzZXJzIGNhbiBvcHRpb25hbGx5IGNhbGwgT3BlbigpIHRvIG1hbnVhbGx5IHNldCB1cCBhIGNvbm5lY3Rpb25cbiAqIGluIGFkdmFuY2UgYmVmb3JlIHN0YXJ0aW5nIHJlY29nbml0aW9uIG9uIHRoZSBSZWNvZ25pemVyIGFzc29jaWF0ZWQgd2l0aCB0aGlzIENvbm5lY3Rpb24uXG4gKiBJZiB0aGUgUmVjb2duaXplciBuZWVkcyB0byBjb25uZWN0IG9yIGRpc2Nvbm5lY3QgdG8gc2VydmljZSwgaXQgd2lsbFxuICogc2V0dXAgb3Igc2h1dGRvd24gdGhlIGNvbm5lY3Rpb24gaW5kZXBlbmRlbnRseS4gSW4gdGhpcyBjYXNlIHRoZSBDb25uZWN0aW9uIHdpbGwgYmUgbm90aWZpZWQgYnkgY2hhbmdlIG9mIGNvbm5lY3Rpb25cbiAqIHN0YXR1cyB2aWEgQ29ubmVjdGVkL0Rpc2Nvbm5lY3RlZCBldmVudHMuXG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMi4xLlxuICovXG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbiB7XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgQ29ubmVjdGlvbiBpbnN0YW5jZSBmcm9tIHRoZSBzcGVjaWZpZWQgcmVjb2duaXplci5cbiAgICAgKiBAcGFyYW0gcmVjb2duaXplciBUaGUgcmVjb2duaXplciBhc3NvY2lhdGVkIHdpdGggdGhlIGNvbm5lY3Rpb24uXG4gICAgICogQHJldHVybiBUaGUgQ29ubmVjdGlvbiBpbnN0YW5jZSBvZiB0aGUgcmVjb2duaXplci5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVJlY29nbml6ZXIocmVjb2duaXplcikge1xuICAgICAgICBjb25zdCByZWNvQmFzZSA9IHJlY29nbml6ZXIuaW50ZXJuYWxEYXRhO1xuICAgICAgICBjb25zdCByZXQgPSBuZXcgQ29ubmVjdGlvbigpO1xuICAgICAgICByZXQucHJpdkludGVybmFsRGF0YSA9IHJlY29CYXNlO1xuICAgICAgICByZXQuc2V0dXBFdmVudHMoKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgQ29ubmVjdGlvbiBpbnN0YW5jZSBmcm9tIHRoZSBzcGVjaWZpZWQgc3ludGhlc2l6ZXIuXG4gICAgICogQHBhcmFtIHN5bnRoZXNpemVyIFRoZSBzeW50aGVzaXplciBhc3NvY2lhdGVkIHdpdGggdGhlIGNvbm5lY3Rpb24uXG4gICAgICogQHJldHVybiBUaGUgQ29ubmVjdGlvbiBpbnN0YW5jZSBvZiB0aGUgc3ludGhlc2l6ZXIuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21TeW50aGVzaXplcihzeW50aGVzaXplcikge1xuICAgICAgICBjb25zdCBzeW50aEJhc2UgPSBzeW50aGVzaXplci5pbnRlcm5hbERhdGE7XG4gICAgICAgIGNvbnN0IHJldCA9IG5ldyBDb25uZWN0aW9uKCk7XG4gICAgICAgIHJldC5wcml2SW50ZXJuYWxEYXRhID0gc3ludGhCYXNlO1xuICAgICAgICByZXQuc2V0dXBFdmVudHMoKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRvIHNldCB1cCBjb25uZWN0aW9uIHRvIHRoZSBzZXJ2aWNlLlxuICAgICAqIFVzZXJzIGNhbiBvcHRpb25hbGx5IGNhbGwgb3BlbkNvbm5lY3Rpb24oKSB0byBtYW51YWxseSBzZXQgdXAgYSBjb25uZWN0aW9uIGluIGFkdmFuY2UgYmVmb3JlIHN0YXJ0aW5nIHJlY29nbml0aW9uIG9uIHRoZVxuICAgICAqIFJlY29nbml6ZXIgYXNzb2NpYXRlZCB3aXRoIHRoaXMgQ29ubmVjdGlvbi4gQWZ0ZXIgc3RhcnRpbmcgcmVjb2duaXRpb24sIGNhbGxpbmcgT3BlbigpIHdpbGwgaGF2ZSBubyBlZmZlY3RcbiAgICAgKlxuICAgICAqIE5vdGU6IE9uIHJldHVybiwgdGhlIGNvbm5lY3Rpb24gbWlnaHQgbm90IGJlIHJlYWR5IHlldC4gUGxlYXNlIHN1YnNjcmliZSB0byB0aGUgQ29ubmVjdGVkIGV2ZW50IHRvXG4gICAgICogYmUgbm90aWZpZWQgd2hlbiB0aGUgY29ubmVjdGlvbiBpcyBlc3RhYmxpc2hlZC5cbiAgICAgKi9cbiAgICBvcGVuQ29ubmVjdGlvbihjYiwgZXJyKSB7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5wcml2SW50ZXJuYWxEYXRhLmNvbm5lY3QoKSwgY2IsIGVycik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgY29ubmVjdGlvbiB0aGUgc2VydmljZS5cbiAgICAgKiBVc2VycyBjYW4gb3B0aW9uYWxseSBjYWxsIGNsb3NlQ29ubmVjdGlvbigpIHRvIG1hbnVhbGx5IHNodXRkb3duIHRoZSBjb25uZWN0aW9uIG9mIHRoZSBhc3NvY2lhdGVkIFJlY29nbml6ZXIuXG4gICAgICpcbiAgICAgKiBJZiBjbG9zZUNvbm5lY3Rpb24oKSBpcyBjYWxsZWQgZHVyaW5nIHJlY29nbml0aW9uLCByZWNvZ25pdGlvbiB3aWxsIGZhaWwgYW5kIGNhbmNlbCB3aXRoIGFuIGVycm9yLlxuICAgICAqL1xuICAgIGNsb3NlQ29ubmVjdGlvbihjYiwgZXJyKSB7XG4gICAgICAgIGlmICh0aGlzLnByaXZJbnRlcm5hbERhdGEgaW5zdGFuY2VvZiBTeW50aGVzaXNBZGFwdGVyQmFzZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGlzY29ubmVjdGluZyBhIHN5bnRoZXNpemVyJ3MgY29ubmVjdGlvbiBpcyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5wcml2SW50ZXJuYWxEYXRhLmRpc2Nvbm5lY3QoKSwgY2IsIGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwZW5kcyBhIHBhcmFtZXRlciBpbiBhIG1lc3NhZ2UgdG8gc2VydmljZS5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTIuMS5cbiAgICAgKiBAcGFyYW0gcGF0aCBUaGUgcGF0aCBvZiB0aGUgbmV0d29yayBtZXNzYWdlLlxuICAgICAqIEBwYXJhbSBwcm9wZXJ0eU5hbWUgTmFtZSBvZiB0aGUgcHJvcGVydHlcbiAgICAgKiBAcGFyYW0gcHJvcGVydHlWYWx1ZSBWYWx1ZSBvZiB0aGUgcHJvcGVydHkuIFRoaXMgaXMgYSBqc29uIHN0cmluZy5cbiAgICAgKi9cbiAgICBzZXRNZXNzYWdlUHJvcGVydHkocGF0aCwgcHJvcGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShwcm9wZXJ0eU5hbWUsIFwicHJvcGVydHlOYW1lXCIpO1xuICAgICAgICBpZiAodGhpcy5wcml2SW50ZXJuYWxEYXRhIGluc3RhbmNlb2YgU2VydmljZVJlY29nbml6ZXJCYXNlKSB7XG4gICAgICAgICAgICBpZiAocGF0aC50b0xvd2VyQ2FzZSgpICE9PSBcInNwZWVjaC5jb250ZXh0XCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPbmx5IHNwZWVjaC5jb250ZXh0IG1lc3NhZ2UgcHJvcGVydHkgc2V0cyBhcmUgY3VycmVudGx5IHN1cHBvcnRlZCBmb3IgcmVjb2duaXplclwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkludGVybmFsRGF0YS5zcGVlY2hDb250ZXh0LnNldFNlY3Rpb24ocHJvcGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnByaXZJbnRlcm5hbERhdGEgaW5zdGFuY2VvZiBTeW50aGVzaXNBZGFwdGVyQmFzZSkge1xuICAgICAgICAgICAgaWYgKHBhdGgudG9Mb3dlckNhc2UoKSAhPT0gXCJzeW50aGVzaXMuY29udGV4dFwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT25seSBzeW50aGVzaXMuY29udGV4dCBtZXNzYWdlIHByb3BlcnR5IHNldHMgYXJlIGN1cnJlbnRseSBzdXBwb3J0ZWQgZm9yIHN5bnRoZXNpemVyXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SW50ZXJuYWxEYXRhLnN5bnRoZXNpc0NvbnRleHQuc2V0U2VjdGlvbihwcm9wZXJ0eU5hbWUsIHByb3BlcnR5VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGEgbWVzc2FnZSB0byB0aGUgc3BlZWNoIHNlcnZpY2UuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjEzLjAuXG4gICAgICogQHBhcmFtIHBhdGggVGhlIFdlYlNvY2tldCBwYXRoIG9mIHRoZSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHBheWxvYWQgVGhlIHBheWxvYWQgb2YgdGhlIG1lc3NhZ2UuIFRoaXMgaXMgYSBqc29uIHN0cmluZyBvciBhIEFycmF5QnVmZmVyLlxuICAgICAqIEBwYXJhbSBzdWNjZXNzIEEgY2FsbGJhY2sgdG8gaW5kaWNhdGUgc3VjY2Vzcy5cbiAgICAgKiBAcGFyYW0gZXJyb3IgQSBjYWxsYmFjayB0byBpbmRpY2F0ZSBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBzZW5kTWVzc2FnZUFzeW5jKHBhdGgsIHBheWxvYWQsIHN1Y2Nlc3MsIGVycm9yKSB7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5wcml2SW50ZXJuYWxEYXRhLnNlbmROZXR3b3JrTWVzc2FnZShwYXRoLCBwYXlsb2FkKSwgc3VjY2VzcywgZXJyb3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIG9mIGFzc29jaWF0ZWQgcmVzb3VyY2VzLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgIH1cbiAgICBzZXR1cEV2ZW50cygpIHtcbiAgICAgICAgdGhpcy5wcml2RXZlbnRMaXN0ZW5lciA9IHRoaXMucHJpdkludGVybmFsRGF0YS5jb25uZWN0aW9uRXZlbnRzLmF0dGFjaCgoY29ubmVjdGlvbkV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoY29ubmVjdGlvbkV2ZW50Lm5hbWUgPT09IFwiQ29ubmVjdGlvbkVzdGFibGlzaGVkRXZlbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghIXRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGVkKG5ldyBDb25uZWN0aW9uRXZlbnRBcmdzKGNvbm5lY3Rpb25FdmVudC5jb25uZWN0aW9uSWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb25uZWN0aW9uRXZlbnQubmFtZSA9PT0gXCJDb25uZWN0aW9uQ2xvc2VkRXZlbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghIXRoaXMuZGlzY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdGVkKG5ldyBDb25uZWN0aW9uRXZlbnRBcmdzKGNvbm5lY3Rpb25FdmVudC5jb25uZWN0aW9uSWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb25uZWN0aW9uRXZlbnQubmFtZSA9PT0gXCJDb25uZWN0aW9uTWVzc2FnZVNlbnRFdmVudFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5tZXNzYWdlU2VudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VTZW50KG5ldyBDb25uZWN0aW9uTWVzc2FnZUV2ZW50QXJncyhuZXcgQ29ubmVjdGlvbk1lc3NhZ2VJbXBsKGNvbm5lY3Rpb25FdmVudC5tZXNzYWdlKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbm5lY3Rpb25FdmVudC5uYW1lID09PSBcIkNvbm5lY3Rpb25NZXNzYWdlUmVjZWl2ZWRFdmVudFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5tZXNzYWdlUmVjZWl2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlUmVjZWl2ZWQobmV3IENvbm5lY3Rpb25NZXNzYWdlRXZlbnRBcmdzKG5ldyBDb25uZWN0aW9uTWVzc2FnZUltcGwoY29ubmVjdGlvbkV2ZW50Lm1lc3NhZ2UpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wcml2U2VydmljZUV2ZW50TGlzdGVuZXIgPSB0aGlzLnByaXZJbnRlcm5hbERhdGEuc2VydmljZUV2ZW50cy5hdHRhY2goKGUpID0+IHtcbiAgICAgICAgICAgIGlmICghIXRoaXMucmVjZWl2ZWRTZXJ2aWNlTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVjZWl2ZWRTZXJ2aWNlTWVzc2FnZShuZXcgU2VydmljZUV2ZW50QXJncyhlLmpzb25TdHJpbmcsIGUubmFtZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbm5lY3Rpb24uanMubWFwXG4iLCIvL1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuIFNlZSBMSUNFTlNFLm1kIGZpbGUgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgZnVsbCBsaWNlbnNlIGluZm9ybWF0aW9uLlxuLy9cbmltcG9ydCB7IFNlc3Npb25FdmVudEFyZ3MgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIERlZmluZXMgcGF5bG9hZCBmb3IgY29ubmVjdGlvbiBldmVudHMgbGlrZSBDb25uZWN0ZWQvRGlzY29ubmVjdGVkLlxuICogQWRkZWQgaW4gdmVyc2lvbiAxLjIuMFxuICovXG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbkV2ZW50QXJncyBleHRlbmRzIFNlc3Npb25FdmVudEFyZ3Mge1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db25uZWN0aW9uRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy9cbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0LiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLiBTZWUgTElDRU5TRS5tZCBmaWxlIGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGZ1bGwgbGljZW5zZSBpbmZvcm1hdGlvbi5cbi8vXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWNsYXNzZXMtcGVyLWZpbGVcbmltcG9ydCB7IEhlYWRlck5hbWVzIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvSGVhZGVyTmFtZXNcIjtcbmltcG9ydCB7IE1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUNvbGxlY3Rpb24gfSBmcm9tIFwiLi9Qcm9wZXJ0eUNvbGxlY3Rpb25cIjtcbmltcG9ydCB7IFByb3BlcnR5SWQgfSBmcm9tIFwiLi9Qcm9wZXJ0eUlkXCI7XG4vKipcbiAqIENvbm5lY3Rpb25NZXNzYWdlIHJlcHJlc2VudHMgaW1wbGVtZW50YXRpb24gc3BlY2lmaWMgbWVzc2FnZXMgc2VudCB0byBhbmQgcmVjZWl2ZWQgZnJvbVxuICogdGhlIHNwZWVjaCBzZXJ2aWNlLiBUaGVzZSBtZXNzYWdlcyBhcmUgcHJvdmlkZWQgZm9yIGRlYnVnZ2luZyBwdXJwb3NlcyBhbmQgc2hvdWxkIG5vdFxuICogYmUgdXNlZCBmb3IgcHJvZHVjdGlvbiB1c2UgY2FzZXMgd2l0aCB0aGUgQXp1cmUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlLlxuICogTWVzc2FnZXMgc2VudCB0byBhbmQgcmVjZWl2ZWQgZnJvbSB0aGUgU3BlZWNoIFNlcnZpY2UgYXJlIHN1YmplY3QgdG8gY2hhbmdlIHdpdGhvdXRcbiAqIG5vdGljZS4gVGhpcyBpbmNsdWRlcyBtZXNzYWdlIGNvbnRlbnRzLCBoZWFkZXJzLCBwYXlsb2Fkcywgb3JkZXJpbmcsIGV0Yy5cbiAqIEFkZGVkIGluIHZlcnNpb24gMS4xMS4wLlxuICovXG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbk1lc3NhZ2Uge1xufVxuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb25NZXNzYWdlSW1wbCB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgIGlmICghIXRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlLmhlYWRlcnNbSGVhZGVyTmFtZXMuQ29ubmVjdGlvbklkXSkge1xuICAgICAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaF9TZXNzaW9uSWQsIHRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlLmhlYWRlcnNbSGVhZGVyTmFtZXMuQ29ubmVjdGlvbklkXSk7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2UuaGVhZGVycykuZm9yRWFjaCgoaGVhZGVyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KGhlYWRlciwgdGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2UuaGVhZGVyc1toZWFkZXJdKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBtZXNzYWdlIHBhdGguXG4gICAgICovXG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZS5oZWFkZXJzW09iamVjdC5rZXlzKHRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlLmhlYWRlcnMpLmZpbmQoKGtleSkgPT4ga2V5LnRvTG93ZXJDYXNlKCkgPT09IFwicGF0aFwiLnRvTG93ZXJDYXNlKCkpXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgQ29ubmVjdGlvbk1lc3NhZ2UgaXMgYSB0ZXh0IG1lc3NhZ2UuXG4gICAgICogU2VlIGFsc28gSXNCaW5hcnlNZXNzYWdlKCkuXG4gICAgICovXG4gICAgZ2V0IGlzVGV4dE1lc3NhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDb25uZWN0aW9uTWVzc2FnZS5tZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuVGV4dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgQ29ubmVjdGlvbk1lc3NhZ2UgaXMgYSBiaW5hcnkgbWVzc2FnZS5cbiAgICAgKiBTZWUgYWxzbyBHZXRCaW5hcnlNZXNzYWdlKCkuXG4gICAgICovXG4gICAgZ2V0IGlzQmluYXJ5TWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlLm1lc3NhZ2VUeXBlID09PSBNZXNzYWdlVHlwZS5CaW5hcnk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHRleHQgbWVzc2FnZSBwYXlsb2FkLiBUeXBpY2FsbHkgdGhlIHRleHQgbWVzc2FnZSBjb250ZW50LXR5cGUgaXNcbiAgICAgKiBhcHBsaWNhdGlvbi9qc29uLiBUbyBkZXRlcm1pbmUgb3RoZXIgY29udGVudC10eXBlcyB1c2VcbiAgICAgKiBQcm9wZXJ0aWVzLkdldFByb3BlcnR5KFwiQ29udGVudC1UeXBlXCIpLlxuICAgICAqL1xuICAgIGdldCBUZXh0TWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkNvbm5lY3Rpb25NZXNzYWdlLnRleHRCb2R5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBiaW5hcnkgbWVzc2FnZSBwYXlsb2FkLlxuICAgICAqL1xuICAgIGdldCBiaW5hcnlNZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2UuYmluYXJ5Qm9keTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIDxzZWUgY3JlZj1cIkNvbm5lY3Rpb25NZXNzYWdlXCIvPi5cbiAgICAgKiBNZXNzYWdlIGhlYWRlcnMgY2FuIGJlIGFjY2Vzc2VkIHZpYSB0aGlzIGNvbGxlY3Rpb24gKGUuZy4gXCJDb250ZW50LVR5cGVcIikuXG4gICAgICovXG4gICAgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHRoYXQgcmVwcmVzZW50cyB0aGUgY29ubmVjdGlvbiBtZXNzYWdlLlxuICAgICAqL1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbm5lY3Rpb25NZXNzYWdlLmpzLm1hcFxuIiwiLy9cbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0LiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLiBTZWUgTElDRU5TRS5tZCBmaWxlIGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGZ1bGwgbGljZW5zZSBpbmZvcm1hdGlvbi5cbi8vXG5leHBvcnQgY2xhc3MgQ29ubmVjdGlvbk1lc3NhZ2VFdmVudEFyZ3Mge1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSA8c2VlIGNyZWY9XCJDb25uZWN0aW9uTWVzc2FnZVwiLz4gYXNzb2NpYXRlZCB3aXRoIHRoaXMgPHNlZSBjcmVmPVwiQ29ubmVjdGlvbk1lc3NhZ2VFdmVudEFyZ3NcIi8+LlxuICAgICAqL1xuICAgIGdldCBtZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBjb25uZWN0aW9uIG1lc3NhZ2UgZXZlbnQuXG4gICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIk1lc3NhZ2U6IFwiICsgdGhpcy5wcml2Q29ubmVjdGlvbk1lc3NhZ2UudG9TdHJpbmcoKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbm5lY3Rpb25NZXNzYWdlRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIEBjbGFzcyBDb250cmFjdHNcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBDb250cmFjdHMge1xuICAgIHN0YXRpYyB0aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHBhcmFtLCBuYW1lKSB7XG4gICAgICAgIGlmIChwYXJhbSA9PT0gdW5kZWZpbmVkIHx8IHBhcmFtID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0aHJvd0lmTnVsbE9yVW5kZWZpbmVkOlwiICsgbmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHRocm93SWZOdWxsKHBhcmFtLCBuYW1lKSB7XG4gICAgICAgIGlmIChwYXJhbSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGhyb3dJZk51bGw6XCIgKyBuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgdGhyb3dJZk51bGxPcldoaXRlc3BhY2UocGFyYW0sIG5hbWUpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQocGFyYW0sIG5hbWUpO1xuICAgICAgICBpZiAoKFwiXCIgKyBwYXJhbSkudHJpbSgpLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRocm93SWZOdWxsT3JXaGl0ZXNwYWNlOlwiICsgbmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHRocm93SWZOdWxsT3JUb29Mb25nKHBhcmFtLCBuYW1lLCBtYXhMZW5ndGgpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQocGFyYW0sIG5hbWUpO1xuICAgICAgICBpZiAoKFwiXCIgKyBwYXJhbSkubGVuZ3RoID4gbWF4TGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0aHJvd0lmTnVsbE9yVG9vTG9uZzpcIiArIG5hbWUgKyBcIiAobW9yZSB0aGFuIFwiICsgbWF4TGVuZ3RoLnRvU3RyaW5nKCkgKyBcIiBjaGFyYWN0ZXJzKVwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgdGhyb3dJZk51bGxPclRvb1Nob3J0KHBhcmFtLCBuYW1lLCBtaW5MZW5ndGgpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQocGFyYW0sIG5hbWUpO1xuICAgICAgICBpZiAoKFwiXCIgKyBwYXJhbSkubGVuZ3RoIDwgbWluTGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0aHJvd0lmTnVsbE9yVG9vU2hvcnQ6XCIgKyBuYW1lICsgXCIgKGxlc3MgdGhhbiBcIiArIG1pbkxlbmd0aC50b1N0cmluZygpICsgXCIgY2hhcmFjdGVycylcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHRocm93SWZEaXNwb3NlZChpc0Rpc3Bvc2VkKSB7XG4gICAgICAgIGlmIChpc0Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0aGUgb2JqZWN0IGlzIGFscmVhZHkgZGlzcG9zZWRcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHRocm93SWZBcnJheUVtcHR5T3JXaGl0ZXNwYWNlKGFycmF5LCBuYW1lKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGFycmF5LCBuYW1lKTtcbiAgICAgICAgaWYgKGFycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGhyb3dJZkFycmF5RW1wdHlPcldoaXRlc3BhY2U6XCIgKyBuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyYXkpIHtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShpdGVtLCBuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgdGhyb3dJZkZpbGVEb2VzTm90RXhpc3QocGFyYW0sIG5hbWUpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHBhcmFtLCBuYW1lKTtcbiAgICAgICAgLy8gVE9ETyBjaGVjayBmb3IgZmlsZSBleGlzdGVuY2UuXG4gICAgfVxuICAgIHN0YXRpYyB0aHJvd0lmTm90VW5kZWZpbmVkKHBhcmFtLCBuYW1lKSB7XG4gICAgICAgIGlmIChwYXJhbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0aHJvd0lmTm90VW5kZWZpbmVkOlwiICsgbmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnRyYWN0cy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXZlbnRBcmdzQmFzZSwgfSBmcm9tIFwiLi9DYW5jZWxsYXRpb25FdmVudEFyZ3NCYXNlXCI7XG4vKipcbiAqIERlZmluZXMgY29udGVudCBvZiBhIFJlY29nbml0aW9uRXJyb3JFdmVudC5cbiAqIEBjbGFzcyBDb252ZXJzYXRpb25UcmFuc2NyaXB0aW9uQ2FuY2VsZWRFdmVudEFyZ3NcbiAqL1xuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvblRyYW5zY3JpcHRpb25DYW5jZWxlZEV2ZW50QXJncyBleHRlbmRzIENhbmNlbGxhdGlvbkV2ZW50QXJnc0Jhc2Uge1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db252ZXJzYXRpb25UcmFuc2NyaXB0aW9uQ2FuY2VsZWRFdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgRGlhbG9nU2VydmljZUNvbmZpZywgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwgfSBmcm9tIFwiLi9EaWFsb2dTZXJ2aWNlQ29uZmlnXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUlkIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBDbGFzcyB0aGF0IGRlZmluZXMgY29uZmlndXJhdGlvbnMgZm9yIHRoZSBkaWFsb2cgc2VydmljZSBjb25uZWN0b3Igb2JqZWN0IGZvciB1c2luZyBhIEN1c3RvbUNvbW1hbmRzIGJhY2tlbmQuXG4gKiBAY2xhc3MgQ3VzdG9tQ29tbWFuZHNDb25maWdcbiAqL1xuZXhwb3J0IGNsYXNzIEN1c3RvbUNvbW1hbmRzQ29uZmlnIGV4dGVuZHMgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgQ3VzdG9tQ29tbWFuZHNDb25maWcuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIGJvdCBmcmFtZXdvcmsgY29uZmlnIHdpdGggdGhlIHNwZWNpZmllZCBzdWJzY3JpcHRpb24gYW5kIHJlZ2lvbi5cbiAgICAgKiBAbWVtYmVyIEN1c3RvbUNvbW1hbmRzQ29uZmlnLmZyb21TdWJzY3JpcHRpb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGFwcGxpY2F0aW9uSWQgU3BlZWNoIENvbW1hbmRzIGFwcGxpY2F0aW9uIGlkLlxuICAgICAqIEBwYXJhbSBzdWJzY3JpcHRpb24gU3Vic2NyaXB0aW9uIGtleSBhc3NvY2lhdGVkIHdpdGggdGhlIGJvdFxuICAgICAqIEBwYXJhbSByZWdpb24gVGhlIHJlZ2lvbiBuYW1lIChzZWUgdGhlIDxhIGhyZWY9XCJodHRwczovL2FrYS5tcy9jc3NwZWVjaC9yZWdpb25cIj5yZWdpb24gcGFnZTwvYT4pLlxuICAgICAqIEByZXR1cm5zIHtDdXN0b21Db21tYW5kc0NvbmZpZ30gQSBuZXcgYm90IGZyYW1ld29yayBjb25maWcuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21TdWJzY3JpcHRpb24oYXBwbGljYXRpb25JZCwgc3Vic2NyaXB0aW9uLCByZWdpb24pIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKGFwcGxpY2F0aW9uSWQsIFwiYXBwbGljYXRpb25JZFwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHN1YnNjcmlwdGlvbiwgXCJzdWJzY3JpcHRpb25cIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShyZWdpb24sIFwicmVnaW9uXCIpO1xuICAgICAgICBjb25zdCBjdXN0b21Db21tYW5kc0NvbmZpZyA9IG5ldyBEaWFsb2dTZXJ2aWNlQ29uZmlnSW1wbCgpO1xuICAgICAgICBjdXN0b21Db21tYW5kc0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9EaWFsb2dUeXBlLCBEaWFsb2dTZXJ2aWNlQ29uZmlnLkRpYWxvZ1R5cGVzLkN1c3RvbUNvbW1hbmRzKTtcbiAgICAgICAgY3VzdG9tQ29tbWFuZHNDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25fQXBwbGljYXRpb25JZCwgYXBwbGljYXRpb25JZCk7XG4gICAgICAgIGN1c3RvbUNvbW1hbmRzQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5LCBzdWJzY3JpcHRpb24pO1xuICAgICAgICBjdXN0b21Db21tYW5kc0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbiwgcmVnaW9uKTtcbiAgICAgICAgcmV0dXJuIGN1c3RvbUNvbW1hbmRzQ29uZmlnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBib3QgZnJhbWV3b3JrIGNvbmZpZyB3aXRoIHRoZSBzcGVjaWZpZWQgU3BlZWNoIENvbW1hbmRzIGFwcGxpY2F0aW9uIGlkLCBhdXRob3JpemF0aW9uIHRva2VuIGFuZCByZWdpb24uXG4gICAgICogTm90ZTogVGhlIGNhbGxlciBuZWVkcyB0byBlbnN1cmUgdGhhdCB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiBpcyB2YWxpZC4gQmVmb3JlIHRoZSBhdXRob3JpemF0aW9uIHRva2VuXG4gICAgICogZXhwaXJlcywgdGhlIGNhbGxlciBuZWVkcyB0byByZWZyZXNoIGl0IGJ5IGNhbGxpbmcgdGhpcyBzZXR0ZXIgd2l0aCBhIG5ldyB2YWxpZCB0b2tlbi5cbiAgICAgKiBBcyBjb25maWd1cmF0aW9uIHZhbHVlcyBhcmUgY29waWVkIHdoZW4gY3JlYXRpbmcgYSBuZXcgcmVjb2duaXplciwgdGhlIG5ldyB0b2tlbiB2YWx1ZSB3aWxsIG5vdCBhcHBseSB0byByZWNvZ25pemVycyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIGNyZWF0ZWQuXG4gICAgICogRm9yIHJlY29nbml6ZXJzIHRoYXQgaGF2ZSBiZWVuIGNyZWF0ZWQgYmVmb3JlLCB5b3UgbmVlZCB0byBzZXQgYXV0aG9yaXphdGlvbiB0b2tlbiBvZiB0aGUgY29ycmVzcG9uZGluZyByZWNvZ25pemVyXG4gICAgICogdG8gcmVmcmVzaCB0aGUgdG9rZW4uIE90aGVyd2lzZSwgdGhlIHJlY29nbml6ZXJzIHdpbGwgZW5jb3VudGVyIGVycm9ycyBkdXJpbmcgcmVjb2duaXRpb24uXG4gICAgICogQG1lbWJlciBDdXN0b21Db21tYW5kc0NvbmZpZy5mcm9tQXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBhcHBsaWNhdGlvbklkIFNwZWVjaCBDb21tYW5kcyBhcHBsaWNhdGlvbiBpZC5cbiAgICAgKiBAcGFyYW0gYXV0aG9yaXphdGlvblRva2VuIFRoZSBhdXRob3JpemF0aW9uIHRva2VuIGFzc29jaWF0ZWQgd2l0aCB0aGUgYXBwbGljYXRpb24uXG4gICAgICogQHBhcmFtIHJlZ2lvbiBUaGUgcmVnaW9uIG5hbWUgKHNlZSB0aGUgPGEgaHJlZj1cImh0dHBzOi8vYWthLm1zL2Nzc3BlZWNoL3JlZ2lvblwiPnJlZ2lvbiBwYWdlPC9hPikuXG4gICAgICogQHJldHVybnMge0N1c3RvbUNvbW1hbmRzQ29uZmlnfSBBIG5ldyBzcGVlY2ggY29tbWFuZHMgY29uZmlnLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tQXV0aG9yaXphdGlvblRva2VuKGFwcGxpY2F0aW9uSWQsIGF1dGhvcml6YXRpb25Ub2tlbiwgcmVnaW9uKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShhcHBsaWNhdGlvbklkLCBcImFwcGxpY2F0aW9uSWRcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShhdXRob3JpemF0aW9uVG9rZW4sIFwiYXV0aG9yaXphdGlvblRva2VuXCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocmVnaW9uLCBcInJlZ2lvblwiKTtcbiAgICAgICAgY29uc3QgY3VzdG9tQ29tbWFuZHNDb25maWcgPSBuZXcgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwoKTtcbiAgICAgICAgY3VzdG9tQ29tbWFuZHNDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25fRGlhbG9nVHlwZSwgRGlhbG9nU2VydmljZUNvbmZpZy5EaWFsb2dUeXBlcy5DdXN0b21Db21tYW5kcyk7XG4gICAgICAgIGN1c3RvbUNvbW1hbmRzQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0FwcGxpY2F0aW9uSWQsIGFwcGxpY2F0aW9uSWQpO1xuICAgICAgICBjdXN0b21Db21tYW5kc0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCBhdXRob3JpemF0aW9uVG9rZW4pO1xuICAgICAgICBjdXN0b21Db21tYW5kc0NvbmZpZy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbiwgcmVnaW9uKTtcbiAgICAgICAgcmV0dXJuIGN1c3RvbUNvbW1hbmRzQ29uZmlnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBjb3JyZXNwb25kaW5nIGJhY2tlbmQgYXBwbGljYXRpb24gaWRlbnRpZmllci5cbiAgICAgKiBAbWVtYmVyIEN1c3RvbUNvbW1hbmRzQ29uZmlnLnByb3RvdHlwZS5Db252ZXJzYXRpb25fQXBwbGljYXRpb25JZFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgYXBwbGljYXRpb24gaWRlbnRpZmllciB0byBzZXQuXG4gICAgICovXG4gICAgc2V0IGFwcGxpY2F0aW9uSWQodmFsdWUpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHZhbHVlLCBcInZhbHVlXCIpO1xuICAgICAgICB0aGlzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0FwcGxpY2F0aW9uSWQsIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgY29ycmVzcG9uZGluZyBiYWNrZW5kIGFwcGxpY2F0aW9uIGlkZW50aWZpZXIuXG4gICAgICogQG1lbWJlciBDdXN0b21Db21tYW5kc0NvbmZpZy5wcm90b3R5cGUuQ29udmVyc2F0aW9uX0FwcGxpY2F0aW9uSWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIGFwcGxpY2F0aW9uIGlkZW50aWZpZXIgdG8gZ2V0LlxuICAgICAqL1xuICAgIGdldCBhcHBsaWNhdGlvbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9BcHBsaWNhdGlvbklkKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUN1c3RvbUNvbW1hbmRzQ29uZmlnLmpzLm1hcFxuIiwiLy9cbi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0LiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLiBTZWUgTElDRU5TRS5tZCBmaWxlIGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGZ1bGwgbGljZW5zZSBpbmZvcm1hdGlvbi5cbi8vXG5pbXBvcnQgeyBDb25zb2xlTG9nZ2luZ0xpc3RlbmVyIH0gZnJvbSBcIi4uL2NvbW1vbi5icm93c2VyL0V4cG9ydHNcIjtcbmltcG9ydCB7IEV2ZW50cyB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuLyoqXG4gKiBEZWZpbmVzIGRpYWdub3N0aWNzIEFQSSBmb3IgbWFuYWdpbmcgY29uc29sZSBvdXRwdXRcbiAqIEFkZGVkIGluIHZlcnNpb24gMS4yMS4wXG4gKi9cbmV4cG9ydCBjbGFzcyBEaWFnbm9zdGljcyB7XG4gICAgc3RhdGljIFNldExvZ2dpbmdMZXZlbChsb2dMZXZlbCkge1xuICAgICAgICB0aGlzLnByaXZMaXN0ZW5lciA9IG5ldyBDb25zb2xlTG9nZ2luZ0xpc3RlbmVyKGxvZ0xldmVsKTtcbiAgICAgICAgRXZlbnRzLmluc3RhbmNlLmF0dGFjaENvbnNvbGVMaXN0ZW5lcih0aGlzLnByaXZMaXN0ZW5lcik7XG4gICAgfVxuICAgIHN0YXRpYyBTdGFydENvbnNvbGVPdXRwdXQoKSB7XG4gICAgICAgIGlmICghIXRoaXMucHJpdkxpc3RlbmVyKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZMaXN0ZW5lci5lbmFibGVDb25zb2xlT3V0cHV0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgU3RvcENvbnNvbGVPdXRwdXQoKSB7XG4gICAgICAgIGlmICghIXRoaXMucHJpdkxpc3RlbmVyKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZMaXN0ZW5lci5lbmFibGVDb25zb2xlT3V0cHV0ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIFNldExvZ091dHB1dFBhdGgocGF0aCkge1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2TGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZMaXN0ZW5lci5sb2dQYXRoID0gcGF0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZpbGUgc3lzdGVtIGxvZ2dpbmcgbm90IGF2YWlsYWJsZSBpbiBicm93c2VyLlwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbkRpYWdub3N0aWNzLnByaXZMaXN0ZW5lciA9IHVuZGVmaW5lZDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGlhZ25vc3RpY3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IFByb3BlcnR5SWQsIFNwZWVjaENvbmZpZ0ltcGwgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIENsYXNzIHRoYXQgZGVmaW5lcyBiYXNlIGNvbmZpZ3VyYXRpb25zIGZvciBkaWFsb2cgc2VydmljZSBjb25uZWN0b3JcbiAqIEBjbGFzcyBEaWFsb2dTZXJ2aWNlQ29uZmlnXG4gKi9cbmV4cG9ydCBjbGFzcyBEaWFsb2dTZXJ2aWNlQ29uZmlnIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIERpYWxvZ1NlcnZpY2UgY29uZmlnLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGNvcnJlc3BvbmRpbmcgYmFja2VuZCBhcHBsaWNhdGlvbiBpZGVudGlmaWVyLlxuICAgICAqIEBtZW1iZXIgRGlhbG9nU2VydmljZUNvbmZpZy5wcm90b3R5cGUuQ29udmVyc2F0aW9uX0FwcGxpY2F0aW9uSWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIGFwcGxpY2F0aW9uIGlkZW50aWZpZXIgdG8gc2V0LlxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgICBzZXQgYXBwbGljYXRpb25JZCh2YWx1ZSkgeyB9XG4gICAgc3RhdGljIGdldCBEaWFsb2dUeXBlcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIEJvdEZyYW1ld29yazogXCJib3RfZnJhbWV3b3JrXCIsXG4gICAgICAgICAgICBDdXN0b21Db21tYW5kczogXCJjdXN0b21fY29tbWFuZHNcIlxuICAgICAgICB9O1xuICAgIH1cbn1cbi8qKlxuICogRGlhbG9nIFNlcnZpY2UgY29uZmlndXJhdGlvbi5cbiAqIEBjbGFzcyBEaWFsb2dTZXJ2aWNlQ29uZmlnSW1wbFxuICovXG5leHBvcnQgY2xhc3MgRGlhbG9nU2VydmljZUNvbmZpZ0ltcGwgZXh0ZW5kcyBEaWFsb2dTZXJ2aWNlQ29uZmlnIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGRpYWxvZ1NlcnZpY2UgY29uZmlnLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hDb25maWcgPSBuZXcgU3BlZWNoQ29uZmlnSW1wbCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm92aWRlcyBhY2Nlc3MgdG8gY3VzdG9tIHByb3BlcnRpZXMuXG4gICAgICogQG1lbWJlciBEaWFsb2dTZXJ2aWNlQ29uZmlnSW1wbC5wcm90b3R5cGUucHJvcGVydGllc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7UHJvcGVydHlDb2xsZWN0aW9ufSBUaGUgcHJvcGVydGllcy5cbiAgICAgKi9cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaENvbmZpZy5wcm9wZXJ0aWVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBzcGVlY2ggcmVjb2duaXRpb24gbGFuZ3VhZ2UuXG4gICAgICogQG1lbWJlciBEaWFsb2dTZXJ2aWNlQ29uZmlnSW1wbC5wcm90b3R5cGUuc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXQgc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaENvbmZpZy5zcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzcGVlY2ggcmVjb2duaXRpb24gbGFuZ3VhZ2UuXG4gICAgICogQG1lbWJlciBEaWFsb2dTZXJ2aWNlQ29uZmlnSW1wbC5wcm90b3R5cGUuc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgbGFuZ3VhZ2UgdG8gc2V0LlxuICAgICAqL1xuICAgIHNldCBzcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlKHZhbHVlKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh2YWx1ZSwgXCJ2YWx1ZVwiKTtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoQ29uZmlnLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IG91dHB1dEZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaENvbmZpZy5vdXRwdXRGb3JtYXQ7XG4gICAgfVxuICAgIHNldCBvdXRwdXRGb3JtYXQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoQ29uZmlnLm91dHB1dEZvcm1hdCA9IHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIGEgbmFtZWQgcHJvcGVydHkgYXMgdmFsdWVcbiAgICAgKiBAbWVtYmVyIERpYWxvZ1NlcnZpY2VDb25maWdJbXBsLnByb3RvdHlwZS5zZXRQcm9wZXJ0eVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1Byb3BlcnR5SWQgfCBzdHJpbmd9IG5hbWUgLSBUaGUgcHJvcGVydHkgdG8gc2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFRoZSB2YWx1ZS5cbiAgICAgKi9cbiAgICBzZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hDb25maWcuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIGEgbmFtZWQgcHJvcGVydHkgYXMgdmFsdWVcbiAgICAgKiBAbWVtYmVyIERpYWxvZ1NlcnZpY2VDb25maWdJbXBsLnByb3RvdHlwZS5nZXRQcm9wZXJ0eVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1Byb3BlcnR5SWQgfCBzdHJpbmd9IG5hbWUgLSBUaGUgcHJvcGVydHkgdG8gZ2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkZWYgLSBUaGUgZGVmYXVsdCB2YWx1ZSB0byByZXR1cm4gaW4gY2FzZSB0aGUgcHJvcGVydHkgaXMgbm90IGtub3duLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjdXJyZW50IHZhbHVlLCBvciBwcm92aWRlZCBkZWZhdWx0LCBvZiB0aGUgZ2l2ZW4gcHJvcGVydHkuXG4gICAgICovXG4gICAgZ2V0UHJvcGVydHkobmFtZSwgZGVmKSB7XG4gICAgICAgIHZvaWQgZGVmO1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoQ29uZmlnLmdldFByb3BlcnR5KG5hbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBwcm94eSBjb25maWd1cmF0aW9uLlxuICAgICAqIE9ubHkgcmVsZXZhbnQgaW4gTm9kZS5qcyBlbnZpcm9ubWVudHMuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjQuMC5cbiAgICAgKiBAcGFyYW0gcHJveHlIb3N0TmFtZSBUaGUgaG9zdCBuYW1lIG9mIHRoZSBwcm94eSBzZXJ2ZXIsIHdpdGhvdXQgdGhlIHByb3RvY29sIHNjaGVtZSAoaHR0cDovLylcbiAgICAgKiBAcGFyYW0gcHJveHlQb3J0IFRoZSBwb3J0IG51bWJlciBvZiB0aGUgcHJveHkgc2VydmVyLlxuICAgICAqIEBwYXJhbSBwcm94eVVzZXJOYW1lIFRoZSB1c2VyIG5hbWUgb2YgdGhlIHByb3h5IHNlcnZlci5cbiAgICAgKiBAcGFyYW0gcHJveHlQYXNzd29yZCBUaGUgcGFzc3dvcmQgb2YgdGhlIHByb3h5IHNlcnZlci5cbiAgICAgKi9cbiAgICBzZXRQcm94eShwcm94eUhvc3ROYW1lLCBwcm94eVBvcnQsIHByb3h5VXNlck5hbWUsIHByb3h5UGFzc3dvcmQpIHtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5SG9zdE5hbWUsIHByb3h5SG9zdE5hbWUpO1xuICAgICAgICB0aGlzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlQb3J0LCBgJHtwcm94eVBvcnR9YCk7XG4gICAgICAgIGlmIChwcm94eVVzZXJOYW1lKSB7XG4gICAgICAgICAgICB0aGlzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlVc2VyTmFtZSwgcHJveHlVc2VyTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3h5UGFzc3dvcmQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVBhc3N3b3JkLCBwcm94eVBhc3N3b3JkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRTZXJ2aWNlUHJvcGVydHkobmFtZSwgdmFsdWUsIGNoYW5uZWwpIHtcbiAgICAgICAgdm9pZCBjaGFubmVsO1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hDb25maWcuc2V0U2VydmljZVByb3BlcnR5KG5hbWUsIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcG9zZSBvZiBhc3NvY2lhdGVkIHJlc291cmNlcy5cbiAgICAgKiBAbWVtYmVyIERpYWxvZ1NlcnZpY2VDb25maWdJbXBsLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGlhbG9nU2VydmljZUNvbmZpZy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBEaWFsb2dDb25uZWN0aW9uRmFjdG9yeSB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0RpYWxvZ0Nvbm5lY3RvckZhY3RvcnlcIjtcbmltcG9ydCB7IERpYWxvZ1NlcnZpY2VBZGFwdGVyLCBSZWNvZ25pdGlvbk1vZGUsIFJlY29nbml6ZXJDb25maWcgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBEZWZlcnJlZCwgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyB9IGZyb20gXCIuLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBSZWNvZ25pemVyIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuaW1wb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuL1Byb3BlcnR5SWRcIjtcbi8qKlxuICogRGlhbG9nIFNlcnZpY2UgQ29ubmVjdG9yXG4gKiBAY2xhc3MgRGlhbG9nU2VydmljZUNvbm5lY3RvclxuICovXG5leHBvcnQgY2xhc3MgRGlhbG9nU2VydmljZUNvbm5lY3RvciBleHRlbmRzIFJlY29nbml6ZXIge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoZSBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7RGlhbG9nU2VydmljZUNvbmZpZ30gZGlhbG9nQ29uZmlnIC0gU2V0IG9mIHByb3BlcnRpZXMgdG8gY29uZmlndXJlIHRoaXMgcmVjb2duaXplci5cbiAgICAgKiBAcGFyYW0ge0F1ZGlvQ29uZmlnfSBhdWRpb0NvbmZpZyAtIEFuIG9wdGlvbmFsIGF1ZGlvIGNvbmZpZyBhc3NvY2lhdGVkIHdpdGggdGhlIHJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihkaWFsb2dDb25maWcsIGF1ZGlvQ29uZmlnKSB7XG4gICAgICAgIGNvbnN0IGRpYWxvZ1NlcnZpY2VDb25maWdJbXBsID0gZGlhbG9nQ29uZmlnO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwoZGlhbG9nQ29uZmlnLCBcImRpYWxvZ0NvbmZpZ1wiKTtcbiAgICAgICAgc3VwZXIoYXVkaW9Db25maWcsIGRpYWxvZ1NlcnZpY2VDb25maWdJbXBsLnByb3BlcnRpZXMsIG5ldyBEaWFsb2dDb25uZWN0aW9uRmFjdG9yeSgpKTtcbiAgICAgICAgdGhpcy5pc1R1cm5Db21wbGV0ZSA9IHRydWU7XG4gICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IGRpYWxvZ1NlcnZpY2VDb25maWdJbXBsLnByb3BlcnRpZXMuY2xvbmUoKTtcbiAgICAgICAgY29uc3QgYWdlbnRDb25maWcgPSB0aGlzLmJ1aWxkQWdlbnRDb25maWcoKTtcbiAgICAgICAgdGhpcy5wcml2UmVjby5hZ2VudENvbmZpZy5zZXQoYWdlbnRDb25maWcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgYSBjb25uZWN0aW9uIHRvIHRoZSBzZXJ2aWNlLlxuICAgICAqIFVzZXJzIGNhbiBvcHRpb25hbGx5IGNhbGwgY29ubmVjdCgpIHRvIG1hbnVhbGx5IHNldCB1cCBhIGNvbm5lY3Rpb24gaW4gYWR2YW5jZSwgYmVmb3JlIHN0YXJ0aW5nIGludGVyYWN0aW9ucy5cbiAgICAgKlxuICAgICAqIE5vdGU6IE9uIHJldHVybiwgdGhlIGNvbm5lY3Rpb24gbWlnaHQgbm90IGJlIHJlYWR5IHlldC4gUGxlYXNlIHN1YnNjcmliZSB0byB0aGUgQ29ubmVjdGVkIGV2ZW50IHRvXG4gICAgICogYmUgbm90aWZpZWQgd2hlbiB0aGUgY29ubmVjdGlvbiBpcyBlc3RhYmxpc2hlZC5cbiAgICAgKiBAbWVtYmVyIERpYWxvZ1NlcnZpY2VDb25uZWN0b3IucHJvdG90eXBlLmNvbm5lY3RcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29ubmVjdChjYiwgZXJyKSB7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5wcml2UmVjby5jb25uZWN0KCksIGNiLCBlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgdGhlIGNvbm5lY3Rpb24gdGhlIHNlcnZpY2UuXG4gICAgICogVXNlcnMgY2FuIG9wdGlvbmFsbHkgY2FsbCBkaXNjb25uZWN0KCkgdG8gbWFudWFsbHkgc2h1dGRvd24gdGhlIGNvbm5lY3Rpb24gb2YgdGhlIGFzc29jaWF0ZWQgRGlhbG9nU2VydmljZUNvbm5lY3Rvci5cbiAgICAgKlxuICAgICAqIElmIGRpc2Nvbm5lY3QoKSBpcyBjYWxsZWQgZHVyaW5nIGEgcmVjb2duaXRpb24sIHJlY29nbml0aW9uIHdpbGwgZmFpbCBhbmQgY2FuY2VsIHdpdGggYW4gZXJyb3IuXG4gICAgICovXG4gICAgZGlzY29ubmVjdChjYiwgZXJyKSB7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5wcml2UmVjby5kaXNjb25uZWN0KCksIGNiLCBlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBhdXRob3JpemF0aW9uIHRva2VuIHVzZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgc2VydmljZS5cbiAgICAgKiBAbWVtYmVyIERpYWxvZ1NlcnZpY2VDb25uZWN0b3IucHJvdG90eXBlLmF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqL1xuICAgIGdldCBhdXRob3JpemF0aW9uVG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBzZXJ2aWNlLlxuICAgICAqIEBtZW1iZXIgRGlhbG9nU2VydmljZUNvbm5lY3Rvci5wcm90b3R5cGUuYXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIEF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICovXG4gICAgc2V0IGF1dGhvcml6YXRpb25Ub2tlbih0b2tlbikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodG9rZW4sIFwidG9rZW5cIik7XG4gICAgICAgIHRoaXMucHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCB0b2tlbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIERpYWxvZ1NlcnZpY2VDb25uZWN0b3IuXG4gICAgICogQG1lbWJlciBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnByb3RvdHlwZS5wcm9wZXJ0aWVzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIERpYWxvZ1NlcnZpY2VDb25uZWN0b3IuXG4gICAgICovXG4gICAgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzO1xuICAgIH1cbiAgICAvKiogR2V0cyB0aGUgdGVtcGxhdGUgZm9yIHRoZSBhY3Rpdml0eSBnZW5lcmF0ZWQgYnkgc2VydmljZSBmcm9tIHNwZWVjaC5cbiAgICAgKiBQcm9wZXJ0aWVzIGZyb20gdGhlIHRlbXBsYXRlIHdpbGwgYmUgc3RhbXBlZCBvbiB0aGUgZ2VuZXJhdGVkIGFjdGl2aXR5LlxuICAgICAqIEl0IGNhbiBiZSBlbXB0eVxuICAgICAqL1xuICAgIGdldCBzcGVlY2hBY3Rpdml0eVRlbXBsYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX1NwZWVjaF9BY3Rpdml0eV9UZW1wbGF0ZSk7XG4gICAgfVxuICAgIC8qKiBTZXRzIHRoZSB0ZW1wbGF0ZSBmb3IgdGhlIGFjdGl2aXR5IGdlbmVyYXRlZCBieSBzZXJ2aWNlIGZyb20gc3BlZWNoLlxuICAgICAqIFByb3BlcnRpZXMgZnJvbSB0aGUgdGVtcGxhdGUgd2lsbCBiZSBzdGFtcGVkIG9uIHRoZSBnZW5lcmF0ZWQgYWN0aXZpdHkuXG4gICAgICogSXQgY2FuIGJlIG51bGwgb3IgZW1wdHkuXG4gICAgICogTm90ZTogaXQgaGFzIHRvIGJlIGEgdmFsaWQgSnNvbiBvYmplY3QuXG4gICAgICovXG4gICAgc2V0IHNwZWVjaEFjdGl2aXR5VGVtcGxhdGUoc3BlZWNoQWN0aXZpdHlUZW1wbGF0ZSkge1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Db252ZXJzYXRpb25fU3BlZWNoX0FjdGl2aXR5X1RlbXBsYXRlLCBzcGVlY2hBY3Rpdml0eVRlbXBsYXRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHJlY29nbml0aW9uIGFuZCBzdG9wcyBhZnRlciB0aGUgZmlyc3QgdXR0ZXJhbmNlIGlzIHJlY29nbml6ZWQuXG4gICAgICogQG1lbWJlciBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnByb3RvdHlwZS5saXN0ZW5PbmNlQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgdGhhdCByZWNlaXZlZCB0aGUgcmVzdWx0IHdoZW4gdGhlIHJlY28gaGFzIGNvbXBsZXRlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIGxpc3Rlbk9uY2VBc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVHVybkNvbXBsZXRlKSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdklzRGlzcG9zZWQpO1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tIb2xkZXIgPSAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVjby5jb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVHVybkNvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgcmV0ID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVjby5yZWNvZ25pemUoUmVjb2duaXRpb25Nb2RlLkNvbnZlcnNhdGlvbiwgcmV0LnJlc29sdmUsIHJldC5yZWplY3QpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB5aWVsZCByZXQucHJvbWlzZTtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCByZXRQcm9taXNlID0gY2FsbGJhY2tIb2xkZXIoKTtcbiAgICAgICAgICAgIHJldFByb21pc2UuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIERlc3Ryb3kgdGhlIHJlY29nbml6ZXIuXG4gICAgICAgICAgICAgICAgLy8gV2UndmUgZG9uZSBhbGwgd2UgY2FuIGhlcmUuXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSh0cnVlKS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHJldFByb21pc2UuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1R1cm5Db21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICB9KSwgY2IsIGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VuZEFjdGl2aXR5QXN5bmMoYWN0aXZpdHksIGNiLCBlcnJDYikge1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMucHJpdlJlY28uc2VuZE1lc3NhZ2UoYWN0aXZpdHkpLCBjYiwgZXJyQ2IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBjbG9zZXMgYWxsIGV4dGVybmFsIHJlc291cmNlcyBoZWxkIGJ5IGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQG1lbWJlciBEaWFsb2dTZXJ2aWNlQ29ubmVjdG9yLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZShjYiwgZXJyKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2SXNEaXNwb3NlZCk7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5kaXNwb3NlKHRydWUpLCBjYiwgZXJyKTtcbiAgICB9XG4gICAgZGlzcG9zZShkaXNwb3NpbmcpIHtcbiAgICAgICAgY29uc3QgX3N1cGVyID0gT2JqZWN0LmNyZWF0ZShudWxsLCB7XG4gICAgICAgICAgICBkaXNwb3NlOiB7IGdldDogKCkgPT4gc3VwZXIuZGlzcG9zZSB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdklzRGlzcG9zZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGlzcG9zaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgICAgICB5aWVsZCBfc3VwZXIuZGlzcG9zZS5jYWxsKHRoaXMsIGRpc3Bvc2luZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjcmVhdGVSZWNvZ25pemVyQ29uZmlnKHNwZWVjaENvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IFJlY29nbml6ZXJDb25maWcoc3BlZWNoQ29uZmlnLCB0aGlzLnByaXZQcm9wZXJ0aWVzKTtcbiAgICB9XG4gICAgY3JlYXRlU2VydmljZVJlY29nbml6ZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb0NvbmZpZywgcmVjb2duaXplckNvbmZpZykge1xuICAgICAgICBjb25zdCBhdWRpb1NvdXJjZSA9IGF1ZGlvQ29uZmlnO1xuICAgICAgICByZXR1cm4gbmV3IERpYWxvZ1NlcnZpY2VBZGFwdGVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Tb3VyY2UsIHJlY29nbml6ZXJDb25maWcsIHRoaXMpO1xuICAgIH1cbiAgICBidWlsZEFnZW50Q29uZmlnKCkge1xuICAgICAgICBjb25zdCBjb21tdW5pY2F0aW9uVHlwZSA9IHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShcIkNvbnZlcnNhdGlvbl9Db21tdW5pY2F0aW9uX1R5cGVcIiwgXCJEZWZhdWx0XCIpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYm90SW5mbzoge1xuICAgICAgICAgICAgICAgIGNvbW1UeXBlOiBjb21tdW5pY2F0aW9uVHlwZSxcbiAgICAgICAgICAgICAgICBjb21tYW5kc0N1bHR1cmU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uSWQ6IHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9BZ2VudF9Db25uZWN0aW9uX0lkKSxcbiAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZDogdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0NvbnZlcnNhdGlvbl9JZCwgdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICBmcm9tSWQ6IHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9Gcm9tX0lkLCB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgIHR0c0F1ZGlvRm9ybWF0OiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aE91dHB1dEZvcm1hdCwgdW5kZWZpbmVkKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZlcnNpb246IDAuMlxuICAgICAgICB9O1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RGlhbG9nU2VydmljZUNvbm5lY3Rvci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuZXhwb3J0IHsgQXVkaW9Db25maWcgfSBmcm9tIFwiLi9BdWRpby9BdWRpb0NvbmZpZ1wiO1xuZXhwb3J0IHsgQXVkaW9TdHJlYW1Gb3JtYXQsIEF1ZGlvRm9ybWF0VGFnIH0gZnJvbSBcIi4vQXVkaW8vQXVkaW9TdHJlYW1Gb3JtYXRcIjtcbmV4cG9ydCB7IEF1ZGlvSW5wdXRTdHJlYW0sIFB1bGxBdWRpb0lucHV0U3RyZWFtLCBQdXNoQXVkaW9JbnB1dFN0cmVhbSB9IGZyb20gXCIuL0F1ZGlvL0F1ZGlvSW5wdXRTdHJlYW1cIjtcbmV4cG9ydCB7IEF1ZGlvT3V0cHV0U3RyZWFtLCBQdWxsQXVkaW9PdXRwdXRTdHJlYW0sIFB1c2hBdWRpb091dHB1dFN0cmVhbSB9IGZyb20gXCIuL0F1ZGlvL0F1ZGlvT3V0cHV0U3RyZWFtXCI7XG5leHBvcnQgeyBDYW5jZWxsYXRpb25SZWFzb24gfSBmcm9tIFwiLi9DYW5jZWxsYXRpb25SZWFzb25cIjtcbmV4cG9ydCB7IFB1bGxBdWRpb0lucHV0U3RyZWFtQ2FsbGJhY2sgfSBmcm9tIFwiLi9BdWRpby9QdWxsQXVkaW9JbnB1dFN0cmVhbUNhbGxiYWNrXCI7XG5leHBvcnQgeyBQdXNoQXVkaW9PdXRwdXRTdHJlYW1DYWxsYmFjayB9IGZyb20gXCIuL0F1ZGlvL1B1c2hBdWRpb091dHB1dFN0cmVhbUNhbGxiYWNrXCI7XG5leHBvcnQgeyBLZXl3b3JkUmVjb2duaXRpb25Nb2RlbCB9IGZyb20gXCIuL0tleXdvcmRSZWNvZ25pdGlvbk1vZGVsXCI7XG5leHBvcnQgeyBTZXNzaW9uRXZlbnRBcmdzIH0gZnJvbSBcIi4vU2Vzc2lvbkV2ZW50QXJnc1wiO1xuZXhwb3J0IHsgUmVjb2duaXRpb25FdmVudEFyZ3MgfSBmcm9tIFwiLi9SZWNvZ25pdGlvbkV2ZW50QXJnc1wiO1xuZXhwb3J0IHsgT3V0cHV0Rm9ybWF0IH0gZnJvbSBcIi4vT3V0cHV0Rm9ybWF0XCI7XG5leHBvcnQgeyBJbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncyB9IGZyb20gXCIuL0ludGVudFJlY29nbml0aW9uRXZlbnRBcmdzXCI7XG5leHBvcnQgeyBSZWNvZ25pdGlvblJlc3VsdCB9IGZyb20gXCIuL1JlY29nbml0aW9uUmVzdWx0XCI7XG5leHBvcnQgeyBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdCB9IGZyb20gXCIuL1NwZWVjaFJlY29nbml0aW9uUmVzdWx0XCI7XG5leHBvcnQgeyBJbnRlbnRSZWNvZ25pdGlvblJlc3VsdCB9IGZyb20gXCIuL0ludGVudFJlY29nbml0aW9uUmVzdWx0XCI7XG5leHBvcnQgeyBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbCB9IGZyb20gXCIuL0xhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsXCI7XG5leHBvcnQgeyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncywgQ29udmVyc2F0aW9uVHJhbnNjcmlwdGlvbkV2ZW50QXJncyB9IGZyb20gXCIuL1NwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzXCI7XG5leHBvcnQgeyBTcGVlY2hSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzIH0gZnJvbSBcIi4vU3BlZWNoUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJnc1wiO1xuZXhwb3J0IHsgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkV2ZW50QXJncyB9IGZyb20gXCIuL1RyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3NcIjtcbmV4cG9ydCB7IFRyYW5zbGF0aW9uU3ludGhlc2lzRXZlbnRBcmdzIH0gZnJvbSBcIi4vVHJhbnNsYXRpb25TeW50aGVzaXNFdmVudEFyZ3NcIjtcbmV4cG9ydCB7IFRyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHQgfSBmcm9tIFwiLi9UcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0XCI7XG5leHBvcnQgeyBUcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdCB9IGZyb20gXCIuL1RyYW5zbGF0aW9uU3ludGhlc2lzUmVzdWx0XCI7XG5leHBvcnQgeyBSZXN1bHRSZWFzb24gfSBmcm9tIFwiLi9SZXN1bHRSZWFzb25cIjtcbmV4cG9ydCB7IFNwZWVjaENvbmZpZywgU3BlZWNoQ29uZmlnSW1wbCB9IGZyb20gXCIuL1NwZWVjaENvbmZpZ1wiO1xuZXhwb3J0IHsgU3BlZWNoVHJhbnNsYXRpb25Db25maWcsIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbCB9IGZyb20gXCIuL1NwZWVjaFRyYW5zbGF0aW9uQ29uZmlnXCI7XG5leHBvcnQgeyBQcm9wZXJ0eUNvbGxlY3Rpb24gfSBmcm9tIFwiLi9Qcm9wZXJ0eUNvbGxlY3Rpb25cIjtcbmV4cG9ydCB7IFByb3BlcnR5SWQgfSBmcm9tIFwiLi9Qcm9wZXJ0eUlkXCI7XG5leHBvcnQgeyBSZWNvZ25pemVyIH0gZnJvbSBcIi4vUmVjb2duaXplclwiO1xuZXhwb3J0IHsgU3BlZWNoUmVjb2duaXplciB9IGZyb20gXCIuL1NwZWVjaFJlY29nbml6ZXJcIjtcbmV4cG9ydCB7IEludGVudFJlY29nbml6ZXIgfSBmcm9tIFwiLi9JbnRlbnRSZWNvZ25pemVyXCI7XG5leHBvcnQgeyBWb2ljZVByb2ZpbGVUeXBlIH0gZnJvbSBcIi4vVm9pY2VQcm9maWxlVHlwZVwiO1xuZXhwb3J0IHsgVHJhbnNsYXRpb25SZWNvZ25pemVyIH0gZnJvbSBcIi4vVHJhbnNsYXRpb25SZWNvZ25pemVyXCI7XG5leHBvcnQgeyBUcmFuc2xhdGlvbnMgfSBmcm9tIFwiLi9UcmFuc2xhdGlvbnNcIjtcbmV4cG9ydCB7IE5vTWF0Y2hSZWFzb24gfSBmcm9tIFwiLi9Ob01hdGNoUmVhc29uXCI7XG5leHBvcnQgeyBOb01hdGNoRGV0YWlscyB9IGZyb20gXCIuL05vTWF0Y2hEZXRhaWxzXCI7XG5leHBvcnQgeyBUcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MgfSBmcm9tIFwiLi9UcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3NcIjtcbmV4cG9ydCB7IEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MgfSBmcm9tIFwiLi9JbnRlbnRSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzXCI7XG5leHBvcnQgeyBDYW5jZWxsYXRpb25EZXRhaWxzQmFzZSB9IGZyb20gXCIuL0NhbmNlbGxhdGlvbkRldGFpbHNCYXNlXCI7XG5leHBvcnQgeyBDYW5jZWxsYXRpb25EZXRhaWxzIH0gZnJvbSBcIi4vQ2FuY2VsbGF0aW9uRGV0YWlsc1wiO1xuZXhwb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlIH0gZnJvbSBcIi4vQ2FuY2VsbGF0aW9uRXJyb3JDb2Rlc1wiO1xuZXhwb3J0IHsgQ29ubmVjdGlvbkV2ZW50QXJncyB9IGZyb20gXCIuL0Nvbm5lY3Rpb25FdmVudEFyZ3NcIjtcbmV4cG9ydCB7IFNlcnZpY2VFdmVudEFyZ3MgfSBmcm9tIFwiLi9TZXJ2aWNlRXZlbnRBcmdzXCI7XG5leHBvcnQgeyBDb25uZWN0aW9uIH0gZnJvbSBcIi4vQ29ubmVjdGlvblwiO1xuZXhwb3J0IHsgUGhyYXNlTGlzdEdyYW1tYXIgfSBmcm9tIFwiLi9QaHJhc2VMaXN0R3JhbW1hclwiO1xuZXhwb3J0IHsgRGlhbG9nU2VydmljZUNvbmZpZyB9IGZyb20gXCIuL0RpYWxvZ1NlcnZpY2VDb25maWdcIjtcbmV4cG9ydCB7IEJvdEZyYW1ld29ya0NvbmZpZyB9IGZyb20gXCIuL0JvdEZyYW1ld29ya0NvbmZpZ1wiO1xuZXhwb3J0IHsgQ3VzdG9tQ29tbWFuZHNDb25maWcgfSBmcm9tIFwiLi9DdXN0b21Db21tYW5kc0NvbmZpZ1wiO1xuZXhwb3J0IHsgRGlhbG9nU2VydmljZUNvbm5lY3RvciB9IGZyb20gXCIuL0RpYWxvZ1NlcnZpY2VDb25uZWN0b3JcIjtcbmV4cG9ydCB7IEFjdGl2aXR5UmVjZWl2ZWRFdmVudEFyZ3MgfSBmcm9tIFwiLi9BY3Rpdml0eVJlY2VpdmVkRXZlbnRBcmdzXCI7XG5leHBvcnQgeyBUdXJuU3RhdHVzUmVjZWl2ZWRFdmVudEFyZ3MgfSBmcm9tIFwiLi9UdXJuU3RhdHVzUmVjZWl2ZWRFdmVudEFyZ3NcIjtcbmV4cG9ydCB7IFNlcnZpY2VQcm9wZXJ0eUNoYW5uZWwgfSBmcm9tIFwiLi9TZXJ2aWNlUHJvcGVydHlDaGFubmVsXCI7XG5leHBvcnQgeyBQcm9mYW5pdHlPcHRpb24gfSBmcm9tIFwiLi9Qcm9mYW5pdHlPcHRpb25cIjtcbmV4cG9ydCB7IEJhc2VBdWRpb1BsYXllciB9IGZyb20gXCIuL0F1ZGlvL0Jhc2VBdWRpb1BsYXllclwiO1xuZXhwb3J0IHsgQ29ubmVjdGlvbk1lc3NhZ2VFdmVudEFyZ3MgfSBmcm9tIFwiLi9Db25uZWN0aW9uTWVzc2FnZUV2ZW50QXJnc1wiO1xuZXhwb3J0IHsgQ29ubmVjdGlvbk1lc3NhZ2UgfSBmcm9tIFwiLi9Db25uZWN0aW9uTWVzc2FnZVwiO1xuZXhwb3J0IHsgVm9pY2VQcm9maWxlIH0gZnJvbSBcIi4vVm9pY2VQcm9maWxlXCI7XG5leHBvcnQgeyBWb2ljZVByb2ZpbGVFbnJvbGxtZW50UmVzdWx0LCBWb2ljZVByb2ZpbGVFbnJvbGxtZW50Q2FuY2VsbGF0aW9uRGV0YWlscyB9IGZyb20gXCIuL1ZvaWNlUHJvZmlsZUVucm9sbG1lbnRSZXN1bHRcIjtcbmV4cG9ydCB7IFZvaWNlUHJvZmlsZVJlc3VsdCwgVm9pY2VQcm9maWxlQ2FuY2VsbGF0aW9uRGV0YWlscyB9IGZyb20gXCIuL1ZvaWNlUHJvZmlsZVJlc3VsdFwiO1xuZXhwb3J0IHsgVm9pY2VQcm9maWxlUGhyYXNlUmVzdWx0IH0gZnJvbSBcIi4vVm9pY2VQcm9maWxlUGhyYXNlUmVzdWx0XCI7XG5leHBvcnQgeyBWb2ljZVByb2ZpbGVDbGllbnQgfSBmcm9tIFwiLi9Wb2ljZVByb2ZpbGVDbGllbnRcIjtcbmV4cG9ydCB7IFNwZWFrZXJSZWNvZ25pemVyIH0gZnJvbSBcIi4vU3BlYWtlclJlY29nbml6ZXJcIjtcbmV4cG9ydCB7IFNwZWFrZXJJZGVudGlmaWNhdGlvbk1vZGVsIH0gZnJvbSBcIi4vU3BlYWtlcklkZW50aWZpY2F0aW9uTW9kZWxcIjtcbmV4cG9ydCB7IFNwZWFrZXJWZXJpZmljYXRpb25Nb2RlbCB9IGZyb20gXCIuL1NwZWFrZXJWZXJpZmljYXRpb25Nb2RlbFwiO1xuZXhwb3J0IHsgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnIH0gZnJvbSBcIi4vQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnXCI7XG5leHBvcnQgeyBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VSZXN1bHQgfSBmcm9tIFwiLi9BdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VSZXN1bHRcIjtcbmV4cG9ydCB7IFNvdXJjZUxhbmd1YWdlQ29uZmlnIH0gZnJvbSBcIi4vU291cmNlTGFuZ3VhZ2VDb25maWdcIjtcbmV4cG9ydCB7IFNwZWFrZXJSZWNvZ25pdGlvblJlc3VsdCwgU3BlYWtlclJlY29nbml0aW9uUmVzdWx0VHlwZSwgU3BlYWtlclJlY29nbml0aW9uQ2FuY2VsbGF0aW9uRGV0YWlscyB9IGZyb20gXCIuL1NwZWFrZXJSZWNvZ25pdGlvblJlc3VsdFwiO1xuZXhwb3J0IHsgQ29udmVyc2F0aW9uLCBDb252ZXJzYXRpb25FeHBpcmF0aW9uRXZlbnRBcmdzLCBDb252ZXJzYXRpb25QYXJ0aWNpcGFudHNDaGFuZ2VkRXZlbnRBcmdzLCBDb252ZXJzYXRpb25UcmFuc2xhdGlvbkNhbmNlbGVkRXZlbnRBcmdzLCBDb252ZXJzYXRpb25UcmFuc2xhdGlvbkV2ZW50QXJncywgQ29udmVyc2F0aW9uVHJhbnNsYXRpb25SZXN1bHQsIENvbnZlcnNhdGlvblRyYW5zbGF0b3IsIENvbnZlcnNhdGlvblRyYW5zY3JpYmVyLCBQYXJ0aWNpcGFudCwgUGFydGljaXBhbnRDaGFuZ2VkUmVhc29uLCBVc2VyIH0gZnJvbSBcIi4vVHJhbnNjcmlwdGlvbi9FeHBvcnRzXCI7XG5leHBvcnQgeyBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQgfSBmcm9tIFwiLi9TcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRcIjtcbmV4cG9ydCB7IFNwZWVjaFN5bnRoZXNpemVyIH0gZnJvbSBcIi4vU3BlZWNoU3ludGhlc2l6ZXJcIjtcbmV4cG9ydCB7IFN5bnRoZXNpc1Jlc3VsdCB9IGZyb20gXCIuL1N5bnRoZXNpc1Jlc3VsdFwiO1xuZXhwb3J0IHsgU3BlZWNoU3ludGhlc2lzUmVzdWx0IH0gZnJvbSBcIi4vU3BlZWNoU3ludGhlc2lzUmVzdWx0XCI7XG5leHBvcnQgeyBTcGVlY2hTeW50aGVzaXNFdmVudEFyZ3MgfSBmcm9tIFwiLi9TcGVlY2hTeW50aGVzaXNFdmVudEFyZ3NcIjtcbmV4cG9ydCB7IFNwZWVjaFN5bnRoZXNpc1dvcmRCb3VuZGFyeUV2ZW50QXJncyB9IGZyb20gXCIuL1NwZWVjaFN5bnRoZXNpc1dvcmRCb3VuZGFyeUV2ZW50QXJnc1wiO1xuZXhwb3J0IHsgU3BlZWNoU3ludGhlc2lzQm9va21hcmtFdmVudEFyZ3MgfSBmcm9tIFwiLi9TcGVlY2hTeW50aGVzaXNCb29rbWFya0V2ZW50QXJnc1wiO1xuZXhwb3J0IHsgU3BlZWNoU3ludGhlc2lzVmlzZW1lRXZlbnRBcmdzIH0gZnJvbSBcIi4vU3BlZWNoU3ludGhlc2lzVmlzZW1lRXZlbnRBcmdzXCI7XG5leHBvcnQgeyBTcGVlY2hTeW50aGVzaXNCb3VuZGFyeVR5cGUgfSBmcm9tIFwiLi9TcGVlY2hTeW50aGVzaXNCb3VuZGFyeVR5cGVcIjtcbmV4cG9ydCB7IFN5bnRoZXNpc1ZvaWNlc1Jlc3VsdCB9IGZyb20gXCIuL1N5bnRoZXNpc1ZvaWNlc1Jlc3VsdFwiO1xuZXhwb3J0IHsgVm9pY2VJbmZvIH0gZnJvbSBcIi4vVm9pY2VJbmZvXCI7XG5leHBvcnQgeyBTcGVha2VyQXVkaW9EZXN0aW5hdGlvbiB9IGZyb20gXCIuL0F1ZGlvL1NwZWFrZXJBdWRpb0Rlc3RpbmF0aW9uXCI7XG5leHBvcnQgeyBDb252ZXJzYXRpb25UcmFuc2NyaXB0aW9uQ2FuY2VsZWRFdmVudEFyZ3MgfSBmcm9tIFwiLi9Db252ZXJzYXRpb25UcmFuc2NyaXB0aW9uQ2FuY2VsZWRFdmVudEFyZ3NcIjtcbmV4cG9ydCB7IFByb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhZGluZ1N5c3RlbSB9IGZyb20gXCIuL1Byb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhZGluZ1N5c3RlbVwiO1xuZXhwb3J0IHsgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFudWxhcml0eSB9IGZyb20gXCIuL1Byb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhbnVsYXJpdHlcIjtcbmV4cG9ydCB7IFByb251bmNpYXRpb25Bc3Nlc3NtZW50Q29uZmlnIH0gZnJvbSBcIi4vUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRDb25maWdcIjtcbmV4cG9ydCB7IFByb251bmNpYXRpb25Bc3Nlc3NtZW50UmVzdWx0IH0gZnJvbSBcIi4vUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRSZXN1bHRcIjtcbmV4cG9ydCB7IExhbmd1YWdlSWRNb2RlIH0gZnJvbSBcIi4vTGFuZ3VhZ2VJZE1vZGVcIjtcbmV4cG9ydCB7IERpYWdub3N0aWNzIH0gZnJvbSBcIi4vRGlhZ25vc3RpY3NcIjtcbmV4cG9ydCB7IExvZ0xldmVsIH0gZnJvbSBcIi4vTG9nTGV2ZWxcIjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXhwb3J0cy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgSW50ZW50UmVjb2duaXRpb25FdmVudEFyZ3MgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIERlZmluZSBwYXlsb2FkIG9mIGludGVudCByZWNvZ25pdGlvbiBjYW5jZWxlZCByZXN1bHQgZXZlbnRzLlxuICogQGNsYXNzIEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3NcbiAqL1xuZXhwb3J0IGNsYXNzIEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MgZXh0ZW5kcyBJbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0NhbmNlbGxhdGlvblJlYXNvbn0gcmVzdWx0IC0gVGhlIHJlc3VsdCBvZiB0aGUgaW50ZW50IHJlY29nbml0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvZmZzZXQgLSBUaGUgb2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7SW50ZW50UmVjb2duaXRpb25SZXN1bHR9IHNlc3Npb25JZCAtIFRoZSBzZXNzaW9uIGlkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlYXNvbiwgZXJyb3JEZXRhaWxzLCBlcnJvckNvZGUsIHJlc3VsdCwgb2Zmc2V0LCBzZXNzaW9uSWQpIHtcbiAgICAgICAgc3VwZXIocmVzdWx0LCBvZmZzZXQsIHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5wcml2RXJyb3JEZXRhaWxzID0gZXJyb3JEZXRhaWxzO1xuICAgICAgICB0aGlzLnByaXZFcnJvckNvZGUgPSBlcnJvckNvZGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSByZWFzb24gdGhlIHJlY29nbml0aW9uIHdhcyBjYW5jZWxlZC5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MucHJvdG90eXBlLnJlYXNvblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7Q2FuY2VsbGF0aW9uUmVhc29ufSBTcGVjaWZpZXMgdGhlIHJlYXNvbiBjYW5jZWxlZC5cbiAgICAgKi9cbiAgICBnZXQgcmVhc29uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVhc29uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZXJyb3IgY29kZSBpbiBjYXNlIG9mIGFuIHVuc3VjY2Vzc2Z1bCByZWNvZ25pdGlvbi5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMS4wLlxuICAgICAqIEByZXR1cm4gQW4gZXJyb3IgY29kZSB0aGF0IHJlcHJlc2VudHMgdGhlIGVycm9yIHJlYXNvbi5cbiAgICAgKi9cbiAgICBnZXQgZXJyb3JDb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3JDb2RlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbiBjYXNlIG9mIGFuIHVuc3VjY2Vzc2Z1bCByZWNvZ25pdGlvbiwgcHJvdmlkZXMgZGV0YWlscyBvZiB0aGUgb2NjdXJyZWQgZXJyb3IuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLnByb3RvdHlwZS5lcnJvckRldGFpbHNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBlcnJvciBkZXRhaWxzLlxuICAgICAqL1xuICAgIGdldCBlcnJvckRldGFpbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckRldGFpbHM7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlbnRSZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBSZWNvZ25pdGlvbkV2ZW50QXJncyB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogSW50ZW50IHJlY29nbml0aW9uIHJlc3VsdCBldmVudCBhcmd1bWVudHMuXG4gKiBAY2xhc3NcbiAqL1xuZXhwb3J0IGNsYXNzIEludGVudFJlY29nbml0aW9uRXZlbnRBcmdzIGV4dGVuZHMgUmVjb2duaXRpb25FdmVudEFyZ3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHJlc3VsdCAtIFRoZSByZXN1bHQgb2YgdGhlIGludGVudCByZWNvZ25pdGlvbi5cbiAgICAgKiBAcGFyYW0gb2Zmc2V0IC0gVGhlIG9mZnNldC5cbiAgICAgKiBAcGFyYW0gc2Vzc2lvbklkIC0gVGhlIHNlc3Npb24gaWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVzdWx0LCBvZmZzZXQsIHNlc3Npb25JZCkge1xuICAgICAgICBzdXBlcihvZmZzZXQsIHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdlJlc3VsdCA9IHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50cyB0aGUgaW50ZW50IHJlY29nbml0aW9uIHJlc3VsdC5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml0aW9uRXZlbnRBcmdzLnByb3RvdHlwZS5yZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge0ludGVudFJlY29nbml0aW9uUmVzdWx0fSBSZXByZXNlbnRzIHRoZSBpbnRlbnQgcmVjb2duaXRpb24gcmVzdWx0LlxuICAgICAqL1xuICAgIGdldCByZXN1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN1bHQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlbnRSZWNvZ25pdGlvbkV2ZW50QXJncy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIEludGVudCByZWNvZ25pdGlvbiByZXN1bHQuXG4gKiBAY2xhc3NcbiAqL1xuZXhwb3J0IGNsYXNzIEludGVudFJlY29nbml0aW9uUmVzdWx0IGV4dGVuZHMgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIGludGVudElkIC0gVGhlIGludGVudCBpZC5cbiAgICAgKiBAcGFyYW0gcmVzdWx0SWQgLSBUaGUgcmVzdWx0IGlkLlxuICAgICAqIEBwYXJhbSByZWFzb24gLSBUaGUgcmVhc29uLlxuICAgICAqIEBwYXJhbSB0ZXh0IC0gVGhlIHJlY29nbml6ZWQgdGV4dC5cbiAgICAgKiBAcGFyYW0gZHVyYXRpb24gLSBUaGUgZHVyYXRpb24uXG4gICAgICogQHBhcmFtIG9mZnNldCAtIFRoZSBvZmZzZXQgaW50byB0aGUgc3RyZWFtLlxuICAgICAqIEBwYXJhbSBsYW5ndWFnZSAtIFByaW1hcnkgTGFuZ3VhZ2UgZGV0ZWN0ZWQsIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSBsYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2UgLSBQcmltYXJ5IExhbmd1YWdlIGNvbmZpZGVuY2UgKFwiVW5rbm93bixcIiBcIkxvdyxcIiBcIk1lZGl1bSxcIiBcIkhpZ2hcIi4uLiksIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSBlcnJvckRldGFpbHMgLSBFcnJvciBkZXRhaWxzLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ganNvbiAtIEFkZGl0aW9uYWwgSnNvbiwgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHByb3BlcnRpZXMgLSBBZGRpdGlvbmFsIHByb3BlcnRpZXMsIGlmIHByb3ZpZGVkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGludGVudElkLCByZXN1bHRJZCwgcmVhc29uLCB0ZXh0LCBkdXJhdGlvbiwgb2Zmc2V0LCBsYW5ndWFnZSwgbGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlLCBlcnJvckRldGFpbHMsIGpzb24sIHByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIocmVzdWx0SWQsIHJlYXNvbiwgdGV4dCwgZHVyYXRpb24sIG9mZnNldCwgbGFuZ3VhZ2UsIGxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSwgdW5kZWZpbmVkLCBlcnJvckRldGFpbHMsIGpzb24sIHByb3BlcnRpZXMpO1xuICAgICAgICB0aGlzLnByaXZJbnRlbnRJZCA9IGludGVudElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIFN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIGludGVudCBpZGVudGlmaWVyIGJlaW5nIHJlY29nbml6ZWQuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUuaW50ZW50SWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBpbnRlbnQgaWRlbnRpZmllciBiZWluZyByZWNvZ25pemVkLlxuICAgICAqL1xuICAgIGdldCBpbnRlbnRJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkludGVudElkO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW50ZW50UmVjb2duaXRpb25SZXN1bHQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgQWRkZWRMbUludGVudCwgSW50ZW50Q29ubmVjdGlvbkZhY3RvcnksIEludGVudFNlcnZpY2VSZWNvZ25pemVyLCBSZWNvZ25pdGlvbk1vZGUsIFJlY29nbml6ZXJDb25maWcgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzIH0gZnJvbSBcIi4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IFByb3BlcnR5SWQsIFJlY29nbml6ZXIsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBJbnRlbnQgcmVjb2duaXplci5cbiAqIEBjbGFzc1xuICovXG5leHBvcnQgY2xhc3MgSW50ZW50UmVjb2duaXplciBleHRlbmRzIFJlY29nbml6ZXIge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoZSBJbnRlbnRSZWNvZ25pemVyLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7U3BlZWNoQ29uZmlnfSBzcGVlY2hDb25maWcgLSBUaGUgc2V0IG9mIGNvbmZpZ3VyYXRpb24gcHJvcGVydGllcy5cbiAgICAgKiBAcGFyYW0ge0F1ZGlvQ29uZmlnfSBhdWRpb0NvbmZpZyAtIEFuIG9wdGlvbmFsIGF1ZGlvIGlucHV0IGNvbmZpZyBhc3NvY2lhdGVkIHdpdGggdGhlIHJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzcGVlY2hDb25maWcsIGF1ZGlvQ29uZmlnKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHNwZWVjaENvbmZpZywgXCJzcGVlY2hDb25maWdcIik7XG4gICAgICAgIGNvbnN0IGNvbmZpZ0ltcGwgPSBzcGVlY2hDb25maWc7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGNvbmZpZ0ltcGwsIFwic3BlZWNoQ29uZmlnXCIpO1xuICAgICAgICBzdXBlcihhdWRpb0NvbmZpZywgY29uZmlnSW1wbC5wcm9wZXJ0aWVzLCBuZXcgSW50ZW50Q29ubmVjdGlvbkZhY3RvcnkoKSk7XG4gICAgICAgIHRoaXMucHJpdkFkZGVkSW50ZW50cyA9IFtdO1xuICAgICAgICB0aGlzLnByaXZBZGRlZExtSW50ZW50cyA9IHt9O1xuICAgICAgICB0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IGNvbmZpZ0ltcGwucHJvcGVydGllcztcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSksIFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2VdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc3Bva2VuIGxhbmd1YWdlIG9mIHJlY29nbml0aW9uLlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgc3Bva2VuIGxhbmd1YWdlIG9mIHJlY29nbml0aW9uLlxuICAgICAqL1xuICAgIGdldCBzcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlKCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkSW50ZW50UmVjb2duaXplcik7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBhdXRob3JpemF0aW9uIHRva2VuIHVzZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgc2VydmljZS5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLmF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqL1xuICAgIGdldCBhdXRob3JpemF0aW9uVG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMvU2V0cyB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiB1c2VkIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIHNlcnZpY2UuXG4gICAgICogTm90ZTogUGxlYXNlIHVzZSBhIHRva2VuIGRlcml2ZWQgZnJvbSB5b3VyIExhbmd1YWdlVW5kZXJzdGFuZGluZyBzdWJzY3JpcHRpb24ga2V5IGZvciB0aGUgSW50ZW50IHJlY29nbml6ZXIuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5hdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gQXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBzZXQgYXV0aG9yaXphdGlvblRva2VuKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIEludGVudFJlY29nbml6ZXIuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5wcm9wZXJ0aWVzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyXG4gICAgICogdmFsdWVzIGRlZmluZWQgZm9yIHRoaXMgSW50ZW50UmVjb2duaXplci5cbiAgICAgKi9cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBpbnRlbnQgcmVjb2duaXRpb24sIGFuZCBzdG9wcyBhZnRlciB0aGUgZmlyc3QgdXR0ZXJhbmNlIGlzIHJlY29nbml6ZWQuXG4gICAgICogVGhlIHRhc2sgcmV0dXJucyB0aGUgcmVjb2duaXRpb24gdGV4dCBhbmQgaW50ZW50IGFzIHJlc3VsdC5cbiAgICAgKiBOb3RlOiBSZWNvZ25pemVPbmNlQXN5bmMoKSByZXR1cm5zIHdoZW4gdGhlIGZpcnN0IHV0dGVyYW5jZSBoYXMgYmVlbiByZWNvZ25pemVkLFxuICAgICAqIHNvIGl0IGlzIHN1aXRhYmxlIG9ubHkgZm9yIHNpbmdsZSBzaG90IHJlY29nbml0aW9uIGxpa2UgY29tbWFuZCBvciBxdWVyeS5cbiAgICAgKiBGb3IgbG9uZy1ydW5uaW5nIHJlY29nbml0aW9uLCB1c2UgU3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYygpIGluc3RlYWQuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5yZWNvZ25pemVPbmNlQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgdGhhdCByZWNlaXZlZCB0aGUgcmVjb2duaXRpb24gaGFzIGZpbmlzaGVkIHdpdGggYW4gSW50ZW50UmVjb2duaXRpb25SZXN1bHQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICByZWNvZ25pemVPbmNlQXN5bmMoY2IsIGVycikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkSW50ZW50UmVjb2duaXplcik7XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnByaXZBZGRlZExtSW50ZW50cykubGVuZ3RoICE9PSAwIHx8IHVuZGVmaW5lZCAhPT0gdGhpcy5wcml2VW1icmVsbGFJbnRlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmJ1aWxkU3BlZWNoQ29udGV4dCgpO1xuICAgICAgICAgICAgdGhpcy5wcml2UmVjby5zcGVlY2hDb250ZXh0LnNldFNlY3Rpb24oXCJpbnRlbnRcIiwgY29udGV4dC5JbnRlbnQpO1xuICAgICAgICAgICAgdGhpcy5wcml2UmVjby5keW5hbWljR3JhbW1hci5hZGRSZWZlcmVuY2VHcmFtbWFyKGNvbnRleHQuUmVmZXJlbmNlR3JhbW1hcnMpO1xuICAgICAgICAgICAgY29uc3QgaW50ZW50UmVjbyA9IHRoaXMucHJpdlJlY287XG4gICAgICAgICAgICBpbnRlbnRSZWNvLnNldEludGVudHModGhpcy5wcml2QWRkZWRMbUludGVudHMsIHRoaXMucHJpdlVtYnJlbGxhSW50ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMucmVjb2duaXplT25jZUFzeW5jSW1wbChSZWNvZ25pdGlvbk1vZGUuSW50ZXJhY3RpdmUpLCBjYiwgZXJyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHNwZWVjaCByZWNvZ25pdGlvbiwgdW50aWwgc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKCkgaXMgY2FsbGVkLlxuICAgICAqIFVzZXIgbXVzdCBzdWJzY3JpYmUgdG8gZXZlbnRzIHRvIHJlY2VpdmUgcmVjb2duaXRpb24gcmVzdWx0cy5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLnN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgaW52b2tlZCBvbmNlIHRoZSByZWNvZ25pdGlvbiBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIHN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmMoY2IsIGVycikge1xuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5wcml2QWRkZWRMbUludGVudHMpLmxlbmd0aCAhPT0gMCB8fCB1bmRlZmluZWQgIT09IHRoaXMucHJpdlVtYnJlbGxhSW50ZW50KSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5idWlsZFNwZWVjaENvbnRleHQoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlY28uc3BlZWNoQ29udGV4dC5zZXRTZWN0aW9uKFwiaW50ZW50XCIsIGNvbnRleHQuSW50ZW50KTtcbiAgICAgICAgICAgIHRoaXMucHJpdlJlY28uZHluYW1pY0dyYW1tYXIuYWRkUmVmZXJlbmNlR3JhbW1hcihjb250ZXh0LlJlZmVyZW5jZUdyYW1tYXJzKTtcbiAgICAgICAgICAgIGNvbnN0IGludGVudFJlY28gPSB0aGlzLnByaXZSZWNvO1xuICAgICAgICAgICAgaW50ZW50UmVjby5zZXRJbnRlbnRzKHRoaXMucHJpdkFkZGVkTG1JbnRlbnRzLCB0aGlzLnByaXZVbWJyZWxsYUludGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyh0aGlzLnN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmNJbXBsKFJlY29nbml0aW9uTW9kZS5Db252ZXJzYXRpb24pLCBjYiwgZXJyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RvcHMgY29udGludW91cyBpbnRlbnQgcmVjb2duaXRpb24uXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5zdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgaW52b2tlZCBvbmNlIHRoZSByZWNvZ25pdGlvbiBoYXMgc3RvcHBlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIHN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5zdG9wQ29udGludW91c1JlY29nbml0aW9uQXN5bmNJbXBsKCksIGNiLCBlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgc3BlZWNoIHJlY29nbml0aW9uIHdpdGgga2V5d29yZCBzcG90dGluZywgdW50aWwgc3RvcEtleXdvcmRSZWNvZ25pdGlvbkFzeW5jKCkgaXMgY2FsbGVkLlxuICAgICAqIFVzZXIgbXVzdCBzdWJzY3JpYmUgdG8gZXZlbnRzIHRvIHJlY2VpdmUgcmVjb2duaXRpb24gcmVzdWx0cy5cbiAgICAgKiBOb3RlOiBLZXkgd29yZCBzcG90dGluZyBmdW5jdGlvbmFsaXR5IGlzIG9ubHkgYXZhaWxhYmxlIG9uIHRoZSBTcGVlY2ggRGV2aWNlcyBTREsuXG4gICAgICogVGhpcyBmdW5jdGlvbmFsaXR5IGlzIGN1cnJlbnRseSBub3QgaW5jbHVkZWQgaW4gdGhlIFNESyBpdHNlbGYuXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5zdGFydEtleXdvcmRSZWNvZ25pdGlvbkFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7S2V5d29yZFJlY29nbml0aW9uTW9kZWx9IG1vZGVsIC0gVGhlIGtleXdvcmQgcmVjb2duaXRpb24gbW9kZWwgdGhhdCBzcGVjaWZpZXMgdGhlIGtleXdvcmQgdG8gYmUgcmVjb2duaXplZC5cbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayBpbnZva2VkIG9uY2UgdGhlIHJlY29nbml0aW9uIGhhcyBzdGFydGVkLlxuICAgICAqIEBwYXJhbSBlcnIgLSBDYWxsYmFjayBpbnZva2VkIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICovXG4gICAgc3RhcnRLZXl3b3JkUmVjb2duaXRpb25Bc3luYyhtb2RlbCwgY2IsIGVycikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwobW9kZWwsIFwibW9kZWxcIik7XG4gICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgZXJyKFwiTm90IHlldCBpbXBsZW1lbnRlZC5cIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RvcHMgY29udGludW91cyBzcGVlY2ggcmVjb2duaXRpb24uXG4gICAgICogTm90ZTogS2V5IHdvcmQgc3BvdHRpbmcgZnVuY3Rpb25hbGl0eSBpcyBvbmx5IGF2YWlsYWJsZSBvbiB0aGUgU3BlZWNoIERldmljZXMgU0RLLlxuICAgICAqIFRoaXMgZnVuY3Rpb25hbGl0eSBpcyBjdXJyZW50bHkgbm90IGluY2x1ZGVkIGluIHRoZSBTREsgaXRzZWxmLlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuc3RvcEtleXdvcmRSZWNvZ25pdGlvbkFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBjYiAtIENhbGxiYWNrIGludm9rZWQgb25jZSB0aGUgcmVjb2duaXRpb24gaGFzIHN0b3BwZWQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICBzdG9wS2V5d29yZFJlY29nbml0aW9uQXN5bmMoY2IsIGVycikge1xuICAgICAgICBpZiAoISFjYikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgcGhyYXNlIHRoYXQgc2hvdWxkIGJlIHJlY29nbml6ZWQgYXMgaW50ZW50LlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuYWRkSW50ZW50XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbnRlbnRJZCAtIEEgU3RyaW5nIHRoYXQgcmVwcmVzZW50cyB0aGUgaWRlbnRpZmllciBvZiB0aGUgaW50ZW50IHRvIGJlIHJlY29nbml6ZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBocmFzZSAtIEEgU3RyaW5nIHRoYXQgc3BlY2lmaWVzIHRoZSBwaHJhc2UgcmVwcmVzZW50aW5nIHRoZSBpbnRlbnQuXG4gICAgICovXG4gICAgYWRkSW50ZW50KHNpbXBsZVBocmFzZSwgaW50ZW50SWQpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UoaW50ZW50SWQsIFwiaW50ZW50SWRcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShzaW1wbGVQaHJhc2UsIFwic2ltcGxlUGhyYXNlXCIpO1xuICAgICAgICB0aGlzLnByaXZBZGRlZEludGVudHMucHVzaChbaW50ZW50SWQsIHNpbXBsZVBocmFzZV0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGludGVudCBmcm9tIExhbmd1YWdlIFVuZGVyc3RhbmRpbmcgc2VydmljZSBmb3IgcmVjb2duaXRpb24uXG4gICAgICogQG1lbWJlciBJbnRlbnRSZWNvZ25pemVyLnByb3RvdHlwZS5hZGRJbnRlbnRXaXRoTGFuZ3VhZ2VNb2RlbFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaW50ZW50SWQgLSBBIFN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIGlkZW50aWZpZXIgb2YgdGhlIGludGVudFxuICAgICAqIHRvIGJlIHJlY29nbml6ZWQuIElnbm9yZWQgaWYgaW50ZW50TmFtZSBpcyBlbXB0eS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZWwgLSBUaGUgaW50ZW50IG1vZGVsIGZyb20gTGFuZ3VhZ2UgVW5kZXJzdGFuZGluZyBzZXJ2aWNlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpbnRlbnROYW1lIC0gVGhlIGludGVudCBuYW1lIGRlZmluZWQgaW4gdGhlIGludGVudCBtb2RlbC4gSWYgaXRcbiAgICAgKiBpcyBlbXB0eSwgYWxsIGludGVudCBuYW1lcyBkZWZpbmVkIGluIHRoZSBtb2RlbCB3aWxsIGJlIGFkZGVkLlxuICAgICAqL1xuICAgIGFkZEludGVudFdpdGhMYW5ndWFnZU1vZGVsKGludGVudElkLCBtb2RlbCwgaW50ZW50TmFtZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkSW50ZW50UmVjb2duaXplcik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShpbnRlbnRJZCwgXCJpbnRlbnRJZFwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKG1vZGVsLCBcIm1vZGVsXCIpO1xuICAgICAgICBjb25zdCBtb2RlbEltcGwgPSBtb2RlbDtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKG1vZGVsSW1wbC5hcHBJZCwgXCJtb2RlbC5hcHBJZFwiKTtcbiAgICAgICAgdGhpcy5wcml2QWRkZWRMbUludGVudHNbaW50ZW50SWRdID0gbmV3IEFkZGVkTG1JbnRlbnQobW9kZWxJbXBsLCBpbnRlbnROYW1lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHN1bW1hcnkgQWRkcyBhbGwgaW50ZW50cyBmcm9tIHRoZSBzcGVjaWZpZWQgTGFuZ3VhZ2UgVW5kZXJzdGFuZGluZyBNb2RlbC5cbiAgICAgKiBAbWVtYmVyIEludGVudFJlY29nbml6ZXIucHJvdG90eXBlLmFkZEFsbEludGVudHNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7TGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWx9IG1vZGVsIC0gVGhlIGxhbmd1YWdlIHVuZGVyc3RhbmRpbmcgbW9kZWwgY29udGFpbmluZyB0aGUgaW50ZW50cy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaW50ZW50SWQgLSBBIGN1c3RvbSBpZCBTdHJpbmcgdG8gYmUgcmV0dXJuZWQgaW4gdGhlIEludGVudFJlY29nbml0aW9uUmVzdWx0J3MgZ2V0SW50ZW50SWQoKSBtZXRob2QuXG4gICAgICovXG4gICAgYWRkQWxsSW50ZW50cyhtb2RlbCwgaW50ZW50SWQpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKG1vZGVsLCBcIm1vZGVsXCIpO1xuICAgICAgICBjb25zdCBtb2RlbEltcGwgPSBtb2RlbDtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKG1vZGVsSW1wbC5hcHBJZCwgXCJtb2RlbC5hcHBJZFwiKTtcbiAgICAgICAgdGhpcy5wcml2VW1icmVsbGFJbnRlbnQgPSBuZXcgQWRkZWRMbUludGVudChtb2RlbEltcGwsIGludGVudElkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogY2xvc2VzIGFsbCBleHRlcm5hbCByZXNvdXJjZXMgaGVsZCBieSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBtZW1iZXIgSW50ZW50UmVjb2duaXplci5wcm90b3R5cGUuY2xvc2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY2xvc2UoY2IsIGVycm9yQ2IpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIpO1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMuZGlzcG9zZSh0cnVlKSwgY2IsIGVycm9yQ2IpO1xuICAgIH1cbiAgICBjcmVhdGVSZWNvZ25pemVyQ29uZmlnKHNwZWVjaENvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IFJlY29nbml6ZXJDb25maWcoc3BlZWNoQ29uZmlnLCB0aGlzLnByaXZQcm9wZXJ0aWVzKTtcbiAgICB9XG4gICAgY3JlYXRlU2VydmljZVJlY29nbml6ZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb0NvbmZpZywgcmVjb2duaXplckNvbmZpZykge1xuICAgICAgICBjb25zdCBhdWRpb0ltcGwgPSBhdWRpb0NvbmZpZztcbiAgICAgICAgcmV0dXJuIG5ldyBJbnRlbnRTZXJ2aWNlUmVjb2duaXplcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvSW1wbCwgcmVjb2duaXplckNvbmZpZywgdGhpcyk7XG4gICAgfVxuICAgIGRpc3Bvc2UoZGlzcG9zaW5nKSB7XG4gICAgICAgIGNvbnN0IF9zdXBlciA9IE9iamVjdC5jcmVhdGUobnVsbCwge1xuICAgICAgICAgICAgZGlzcG9zZTogeyBnZXQ6ICgpID0+IHN1cGVyLmRpc3Bvc2UgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZEaXNwb3NlZEludGVudFJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGlzcG9zaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2RGlzcG9zZWRJbnRlbnRSZWNvZ25pemVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB5aWVsZCBfc3VwZXIuZGlzcG9zZS5jYWxsKHRoaXMsIGRpc3Bvc2luZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBidWlsZFNwZWVjaENvbnRleHQoKSB7XG4gICAgICAgIGxldCBhcHBJZDtcbiAgICAgICAgbGV0IHJlZ2lvbjtcbiAgICAgICAgbGV0IHN1YnNjcmlwdGlvbktleTtcbiAgICAgICAgY29uc3QgcmVmR3JhbW1lcnMgPSBbXTtcbiAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gdGhpcy5wcml2VW1icmVsbGFJbnRlbnQpIHtcbiAgICAgICAgICAgIGFwcElkID0gdGhpcy5wcml2VW1icmVsbGFJbnRlbnQubW9kZWxJbXBsLmFwcElkO1xuICAgICAgICAgICAgcmVnaW9uID0gdGhpcy5wcml2VW1icmVsbGFJbnRlbnQubW9kZWxJbXBsLnJlZ2lvbjtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbktleSA9IHRoaXMucHJpdlVtYnJlbGxhSW50ZW50Lm1vZGVsSW1wbC5zdWJzY3JpcHRpb25LZXk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQnVpbGQgdGhlIHJlZmVyZW5jZSBncmFtbWVyIGFycmF5LlxuICAgICAgICBmb3IgKGNvbnN0IGludGVudElkIG9mIE9iamVjdC5rZXlzKHRoaXMucHJpdkFkZGVkTG1JbnRlbnRzKSkge1xuICAgICAgICAgICAgY29uc3QgYWRkZWRMbUludGVudCA9IHRoaXMucHJpdkFkZGVkTG1JbnRlbnRzW2ludGVudElkXTtcbiAgICAgICAgICAgIC8vIHZhbGlkYXRlIGFsbCB0aGUgc2FtZSBtb2RlbCwgcmVnaW9uLCBhbmQga2V5Li4uXG4gICAgICAgICAgICBpZiAoYXBwSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGFwcElkID0gYWRkZWRMbUludGVudC5tb2RlbEltcGwuYXBwSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoYXBwSWQgIT09IGFkZGVkTG1JbnRlbnQubW9kZWxJbXBsLmFwcElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludGVudHMgbXVzdCBhbGwgYmUgZnJvbSB0aGUgc2FtZSBMVUlTIG1vZGVsXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZWdpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJlZ2lvbiA9IGFkZGVkTG1JbnRlbnQubW9kZWxJbXBsLnJlZ2lvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChyZWdpb24gIT09IGFkZGVkTG1JbnRlbnQubW9kZWxJbXBsLnJlZ2lvbikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnRlbnRzIG11c3QgYWxsIGJlIGZyb20gdGhlIHNhbWUgTFVJUyBtb2RlbCBpbiBhIHNpbmdsZSByZWdpb25cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbktleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uS2V5ID0gYWRkZWRMbUludGVudC5tb2RlbEltcGwuc3Vic2NyaXB0aW9uS2V5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbktleSAhPT0gYWRkZWRMbUludGVudC5tb2RlbEltcGwuc3Vic2NyaXB0aW9uS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludGVudHMgbXVzdCBhbGwgdXNlIHRoZSBzYW1lIHN1YnNjcmlwdGlvbiBrZXlcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZ3JhbW1lciA9IFwibHVpcy9cIiArIGFwcElkICsgXCItUFJPRFVDVElPTiNcIiArIGludGVudElkO1xuICAgICAgICAgICAgcmVmR3JhbW1lcnMucHVzaChncmFtbWVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgSW50ZW50OiB7XG4gICAgICAgICAgICAgICAgaWQ6IGFwcElkLFxuICAgICAgICAgICAgICAgIGtleTogKHN1YnNjcmlwdGlvbktleSA9PT0gdW5kZWZpbmVkKSA/IHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleV0pIDogc3Vic2NyaXB0aW9uS2V5LFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyOiBcIkxVSVNcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBSZWZlcmVuY2VHcmFtbWFyczogKHVuZGVmaW5lZCA9PT0gdGhpcy5wcml2VW1icmVsbGFJbnRlbnQpID8gcmVmR3JhbW1lcnMgOiBbXCJsdWlzL1wiICsgYXBwSWQgKyBcIi1QUk9EVUNUSU9OXCJdLFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW50ZW50UmVjb2duaXplci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG4vKipcbiAqIFJlcHJlc2VudHMgYSBrZXl3b3JkIHJlY29nbml0aW9uIG1vZGVsIGZvciByZWNvZ25pemluZyB3aGVuXG4gKiB0aGUgdXNlciBzYXlzIGEga2V5d29yZCB0byBpbml0aWF0ZSBmdXJ0aGVyIHNwZWVjaCByZWNvZ25pdGlvbi5cbiAqIEBjbGFzcyBLZXl3b3JkUmVjb2duaXRpb25Nb2RlbFxuICovXG5leHBvcnQgY2xhc3MgS2V5d29yZFJlY29nbml0aW9uTW9kZWwge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbmQgaW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2UuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJpdkRpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGtleXdvcmQgcmVjb2duaXRpb24gbW9kZWwgdXNpbmcgdGhlIHNwZWNpZmllZCBmaWxlbmFtZS5cbiAgICAgKiBAbWVtYmVyIEtleXdvcmRSZWNvZ25pdGlvbk1vZGVsLmZyb21GaWxlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlTmFtZSAtIEEgc3RyaW5nIHRoYXQgcmVwcmVzZW50cyBmaWxlIG5hbWUgZm9yIHRoZSBrZXl3b3JkIHJlY29nbml0aW9uIG1vZGVsLlxuICAgICAqIE5vdGUsIHRoZSBmaWxlIGNhbiBwb2ludCB0byBhIHppcCBmaWxlIGluIHdoaWNoIGNhc2UgdGhlIG1vZGVsXG4gICAgICogd2lsbCBiZSBleHRyYWN0ZWQgZnJvbSB0aGUgemlwLlxuICAgICAqIEByZXR1cm5zIHtLZXl3b3JkUmVjb2duaXRpb25Nb2RlbH0gVGhlIGtleXdvcmQgcmVjb2duaXRpb24gbW9kZWwgYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUZpbGUoZmlsZU5hbWUpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZGaWxlRG9lc05vdEV4aXN0KGZpbGVOYW1lLCBcImZpbGVOYW1lXCIpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgeWV0IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGtleXdvcmQgcmVjb2duaXRpb24gbW9kZWwgdXNpbmcgdGhlIHNwZWNpZmllZCBmaWxlbmFtZS5cbiAgICAgKiBAbWVtYmVyIEtleXdvcmRSZWNvZ25pdGlvbk1vZGVsLmZyb21TdHJlYW1cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGUgLSBBIEZpbGUgdGhhdCByZXByZXNlbnRzIGZpbGUgZm9yIHRoZSBrZXl3b3JkIHJlY29nbml0aW9uIG1vZGVsLlxuICAgICAqIE5vdGUsIHRoZSBmaWxlIGNhbiBwb2ludCB0byBhIHppcCBmaWxlIGluIHdoaWNoIGNhc2UgdGhlIG1vZGVsIHdpbGwgYmUgZXh0cmFjdGVkIGZyb20gdGhlIHppcC5cbiAgICAgKiBAcmV0dXJucyB7S2V5d29yZFJlY29nbml0aW9uTW9kZWx9IFRoZSBrZXl3b3JkIHJlY29nbml0aW9uIG1vZGVsIGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21TdHJlYW0oZmlsZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwoZmlsZSwgXCJmaWxlXCIpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgeWV0IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcG9zZSBvZiBhc3NvY2lhdGVkIHJlc291cmNlcy5cbiAgICAgKiBAbWVtYmVyIEtleXdvcmRSZWNvZ25pdGlvbk1vZGVsLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdkRpc3Bvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZWQgPSB0cnVlO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2V5d29yZFJlY29nbml0aW9uTW9kZWwuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogTGFuZ3VhZ2UgSWRlbnRpZmljYXRpb24gbW9kZVxuICogQGNsYXNzIExhbmd1YWdlSWRNb2RlXG4gKi9cbmV4cG9ydCB2YXIgTGFuZ3VhZ2VJZE1vZGU7XG4oZnVuY3Rpb24gKExhbmd1YWdlSWRNb2RlKSB7XG4gICAgLyoqXG4gICAgICogRGV0ZWN0IGxhbmd1YWdlIGF0IGF1ZGlvIHN0YXJ0XG4gICAgICogQG1lbWJlciBMYW5ndWFnZUlkTW9kZS5BdFN0YXJ0XG4gICAgICovXG4gICAgTGFuZ3VhZ2VJZE1vZGVbTGFuZ3VhZ2VJZE1vZGVbXCJBdFN0YXJ0XCJdID0gMF0gPSBcIkF0U3RhcnRcIjtcbiAgICAvKipcbiAgICAgKiBDb250aW51b3VzbHkgZGV0ZWN0IGxhbmd1YWdlXG4gICAgICogQG1lbWJlciBMYW5ndWFnZUlkTW9kZS5Db250aW51b3VzXG4gICAgICovXG4gICAgTGFuZ3VhZ2VJZE1vZGVbTGFuZ3VhZ2VJZE1vZGVbXCJDb250aW51b3VzXCJdID0gMV0gPSBcIkNvbnRpbnVvdXNcIjtcbn0pKExhbmd1YWdlSWRNb2RlIHx8IChMYW5ndWFnZUlkTW9kZSA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxhbmd1YWdlSWRNb2RlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWNsYXNzZXMtcGVyLWZpbGVcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuL0NvbnRyYWN0c1wiO1xuLyoqXG4gKiBMYW5ndWFnZSB1bmRlcnN0YW5kaW5nIG1vZGVsXG4gKiBAY2xhc3MgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWxcbiAqL1xuZXhwb3J0IGNsYXNzIExhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gbGFuZ3VhZ2UgdW5kZXJzdGFuZGluZyBtb2RlbCB1c2luZyB0aGUgc3BlY2lmaWVkIGVuZHBvaW50LlxuICAgICAqIEBtZW1iZXIgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWwuZnJvbUVuZHBvaW50XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7VVJMfSB1cmkgLSBBIFN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIGVuZHBvaW50IG9mIHRoZSBsYW5ndWFnZSB1bmRlcnN0YW5kaW5nIG1vZGVsLlxuICAgICAqIEByZXR1cm5zIHtMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbH0gVGhlIGxhbmd1YWdlIHVuZGVyc3RhbmRpbmcgbW9kZWwgYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbUVuZHBvaW50KHVyaSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwodXJpLCBcInVyaVwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHVyaS5ob3N0bmFtZSwgXCJ1cmlcIik7XG4gICAgICAgIGNvbnN0IGxhbmdNb2RlbEltcCA9IG5ldyBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbEltcGwoKTtcbiAgICAgICAgLy8gTmVlZCB0byBleHRyYWN0IHRoZSBhcHAgSUQgZnJvbSB0aGUgVVJMLlxuICAgICAgICAvLyBVUkwgaXMgaW4gdGhlIGZvcm1hdDogaHR0cHM6Ly88cmVnaW9uPi5hcGkuY29nbml0aXZlLm1pY3Jvc29mdC5jb20vbHVpcy92Mi4wL2FwcHMvPEd1aWQ+P3N1YnNjcmlwdGlvbi1rZXk9PGtleT4mdGltZXpvbmVPZmZzZXQ9LTM2MFxuICAgICAgICAvLyBTdGFydCB0ZWFyaW5nIHRoZSBzdHJpbmcgYXBhcnQuXG4gICAgICAgIC8vIHJlZ2lvbiBjYW4gYmUgZXh0cmFjdGVkIGZyb20gdGhlIGhvc3QgbmFtZS5cbiAgICAgICAgY29uc3QgZmlyc3REb3QgPSB1cmkuaG9zdC5pbmRleE9mKFwiLlwiKTtcbiAgICAgICAgaWYgKC0xID09PSBmaXJzdERvdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGRldGVybWluZSByZWdpb24gZnJvbSBlbmRwb2ludFwiKTtcbiAgICAgICAgfVxuICAgICAgICBsYW5nTW9kZWxJbXAucmVnaW9uID0gdXJpLmhvc3Quc3Vic3RyKDAsIGZpcnN0RG90KTtcbiAgICAgICAgLy8gTm93IHRoZSBhcHAgSUQuXG4gICAgICAgIGNvbnN0IGxhc3RTZWdtZW50ID0gdXJpLnBhdGhuYW1lLmxhc3RJbmRleE9mKFwiL1wiKSArIDE7XG4gICAgICAgIGlmICgtMSA9PT0gbGFzdFNlZ21lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBkZXRlcm1pbmUgYXBwSWQgZnJvbSBlbmRwb2ludFwiKTtcbiAgICAgICAgfVxuICAgICAgICBsYW5nTW9kZWxJbXAuYXBwSWQgPSB1cmkucGF0aG5hbWUuc3Vic3RyKGxhc3RTZWdtZW50KTtcbiAgICAgICAgLy8gQW5kIGZpbmFsbHkgdGhlIGtleS5cbiAgICAgICAgbGFuZ01vZGVsSW1wLnN1YnNjcmlwdGlvbktleSA9IHVyaS5zZWFyY2hQYXJhbXMuZ2V0KFwic3Vic2NyaXB0aW9uLWtleVwiKTtcbiAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbGFuZ01vZGVsSW1wLnN1YnNjcmlwdGlvbktleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGRldGVybWluZSBzdWJzY3JpcHRpb24ga2V5IGZyb20gZW5kcG9pbnRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxhbmdNb2RlbEltcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBsYW5ndWFnZSB1bmRlcnN0YW5kaW5nIG1vZGVsIHVzaW5nIHRoZSBhcHBsaWNhdGlvbiBpZCBvZiBMYW5ndWFnZSBVbmRlcnN0YW5kaW5nIHNlcnZpY2UuXG4gICAgICogQG1lbWJlciBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbC5mcm9tQXBwSWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFwcElkIC0gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBhcHBsaWNhdGlvbiBpZCBvZiBMYW5ndWFnZSBVbmRlcnN0YW5kaW5nIHNlcnZpY2UuXG4gICAgICogQHJldHVybnMge0xhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsfSBUaGUgbGFuZ3VhZ2UgdW5kZXJzdGFuZGluZyBtb2RlbCBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tQXBwSWQoYXBwSWQpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKGFwcElkLCBcImFwcElkXCIpO1xuICAgICAgICBjb25zdCBsYW5nTW9kZWxJbXAgPSBuZXcgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWxJbXBsKCk7XG4gICAgICAgIGxhbmdNb2RlbEltcC5hcHBJZCA9IGFwcElkO1xuICAgICAgICByZXR1cm4gbGFuZ01vZGVsSW1wO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbGFuZ3VhZ2UgdW5kZXJzdGFuZGluZyBtb2RlbCB1c2luZyBob3N0bmFtZSwgc3Vic2NyaXB0aW9uIGtleSBhbmQgYXBwbGljYXRpb25cbiAgICAgKiBpZCBvZiBMYW5ndWFnZSBVbmRlcnN0YW5kaW5nIHNlcnZpY2UuXG4gICAgICogQG1lbWJlciBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbC5mcm9tU3Vic2NyaXB0aW9uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdWJzY3JpcHRpb25LZXkgLSBBIFN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIHN1YnNjcmlwdGlvbiBrZXkgb2ZcbiAgICAgKiBMYW5ndWFnZSBVbmRlcnN0YW5kaW5nIHNlcnZpY2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFwcElkIC0gQSBTdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBhcHBsaWNhdGlvbiBpZCBvZiBMYW5ndWFnZVxuICAgICAqIFVuZGVyc3RhbmRpbmcgc2VydmljZS5cbiAgICAgKiBAcGFyYW0ge0xhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsfSByZWdpb24gLSBBIFN0cmluZyB0aGF0IHJlcHJlc2VudHMgdGhlIHJlZ2lvblxuICAgICAqIG9mIHRoZSBMYW5ndWFnZSBVbmRlcnN0YW5kaW5nIHNlcnZpY2UgKHNlZSB0aGUgPGEgaHJlZj1cImh0dHBzOi8vYWthLm1zL2Nzc3BlZWNoL3JlZ2lvblwiPnJlZ2lvbiBwYWdlPC9hPikuXG4gICAgICogQHJldHVybnMge0xhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsfSBUaGUgbGFuZ3VhZ2UgdW5kZXJzdGFuZGluZyBtb2RlbCBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbktleSwgYXBwSWQsIHJlZ2lvbikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2Uoc3Vic2NyaXB0aW9uS2V5LCBcInN1YnNjcmlwdGlvbktleVwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKGFwcElkLCBcImFwcElkXCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocmVnaW9uLCBcInJlZ2lvblwiKTtcbiAgICAgICAgY29uc3QgbGFuZ01vZGVsSW1wID0gbmV3IExhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsSW1wbCgpO1xuICAgICAgICBsYW5nTW9kZWxJbXAuYXBwSWQgPSBhcHBJZDtcbiAgICAgICAgbGFuZ01vZGVsSW1wLnJlZ2lvbiA9IHJlZ2lvbjtcbiAgICAgICAgbGFuZ01vZGVsSW1wLnN1YnNjcmlwdGlvbktleSA9IHN1YnNjcmlwdGlvbktleTtcbiAgICAgICAgcmV0dXJuIGxhbmdNb2RlbEltcDtcbiAgICB9XG59XG4vKipcbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWxJbXBsXG4gKi9cbmV4cG9ydCBjbGFzcyBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbEltcGwgZXh0ZW5kcyBMYW5ndWFnZVVuZGVyc3RhbmRpbmdNb2RlbCB7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxhbmd1YWdlVW5kZXJzdGFuZGluZ01vZGVsLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBSZWNvZ25pdGlvblN0YXR1cywgU2ltcGxlU3BlZWNoUGhyYXNlIH0gZnJvbSBcIi4uLy4uL3NyYy9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IE5vTWF0Y2hSZWFzb24gfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIENvbnRhaW5zIGRldGFpbGVkIGluZm9ybWF0aW9uIGZvciBOb01hdGNoIHJlY29nbml0aW9uIHJlc3VsdHMuXG4gKiBAY2xhc3MgTm9NYXRjaERldGFpbHNcbiAqL1xuZXhwb3J0IGNsYXNzIE5vTWF0Y2hEZXRhaWxzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7Tm9NYXRjaFJlYXNvbn0gcmVhc29uIC0gVGhlIG5vLW1hdGNoIHJlYXNvbi5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZWFzb24pIHtcbiAgICAgICAgdGhpcy5wcml2UmVhc29uID0gcmVhc29uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIE5vTWF0Y2hEZXRhaWxzIG9iamVjdCBmb3IgdGhlIE5vTWF0Y2ggU3BlZWNoUmVjb2duaXRpb25SZXN1bHRzLlxuICAgICAqIEBtZW1iZXIgTm9NYXRjaERldGFpbHMuZnJvbVJlc3VsdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1NwZWVjaFJlY29nbml0aW9uUmVzdWx0IHwgSW50ZW50UmVjb2duaXRpb25SZXN1bHQgfCBUcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0fVxuICAgICAqIHJlc3VsdCAtIFRoZSByZWNvZ25pdGlvbiByZXN1bHQgdGhhdCB3YXMgbm90IHJlY29nbml6ZWQuXG4gICAgICogQHJldHVybnMge05vTWF0Y2hEZXRhaWxzfSBUaGUgbm8gbWF0Y2ggZGV0YWlscyBvYmplY3QgYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVJlc3VsdChyZXN1bHQpIHtcbiAgICAgICAgY29uc3Qgc2ltcGxlU3BlZWNoID0gU2ltcGxlU3BlZWNoUGhyYXNlLmZyb21KU09OKHJlc3VsdC5qc29uKTtcbiAgICAgICAgbGV0IHJlYXNvbiA9IE5vTWF0Y2hSZWFzb24uTm90UmVjb2duaXplZDtcbiAgICAgICAgc3dpdGNoIChzaW1wbGVTcGVlY2guUmVjb2duaXRpb25TdGF0dXMpIHtcbiAgICAgICAgICAgIGNhc2UgUmVjb2duaXRpb25TdGF0dXMuQmFiYmxlVGltZW91dDpcbiAgICAgICAgICAgICAgICByZWFzb24gPSBOb01hdGNoUmVhc29uLkluaXRpYWxCYWJibGVUaW1lb3V0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBSZWNvZ25pdGlvblN0YXR1cy5Jbml0aWFsU2lsZW5jZVRpbWVvdXQ6XG4gICAgICAgICAgICAgICAgcmVhc29uID0gTm9NYXRjaFJlYXNvbi5Jbml0aWFsU2lsZW5jZVRpbWVvdXQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJlYXNvbiA9IE5vTWF0Y2hSZWFzb24uTm90UmVjb2duaXplZDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IE5vTWF0Y2hEZXRhaWxzKHJlYXNvbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSByZWFzb24gdGhlIHJlY29nbml0aW9uIHdhcyBjYW5jZWxlZC5cbiAgICAgKiBAbWVtYmVyIE5vTWF0Y2hEZXRhaWxzLnByb3RvdHlwZS5yZWFzb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge05vTWF0Y2hSZWFzb259IFNwZWNpZmllcyB0aGUgcmVhc29uIGNhbmNlbGVkLlxuICAgICAqL1xuICAgIGdldCByZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Ob01hdGNoRGV0YWlscy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBEZWZpbmVzIHRoZSBwb3NzaWJsZSByZWFzb25zIGEgcmVjb2duaXRpb24gcmVzdWx0IG1pZ2h0IG5vdCBiZSByZWNvZ25pemVkLlxuICogQGNsYXNzIE5vTWF0Y2hSZWFzb25cbiAqL1xuZXhwb3J0IHZhciBOb01hdGNoUmVhc29uO1xuKGZ1bmN0aW9uIChOb01hdGNoUmVhc29uKSB7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoYXQgc3BlZWNoIHdhcyBkZXRlY3RlZCwgYnV0IG5vdCByZWNvZ25pemVkLlxuICAgICAqIEBtZW1iZXIgTm9NYXRjaFJlYXNvbi5Ob3RSZWNvZ25pemVkXG4gICAgICovXG4gICAgTm9NYXRjaFJlYXNvbltOb01hdGNoUmVhc29uW1wiTm90UmVjb2duaXplZFwiXSA9IDBdID0gXCJOb3RSZWNvZ25pemVkXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoYXQgdGhlIHN0YXJ0IG9mIHRoZSBhdWRpbyBzdHJlYW0gY29udGFpbmVkIG9ubHkgc2lsZW5jZSxcbiAgICAgKiBhbmQgdGhlIHNlcnZpY2UgdGltZWQgb3V0IHdhaXRpbmcgZm9yIHNwZWVjaC5cbiAgICAgKiBAbWVtYmVyIE5vTWF0Y2hSZWFzb24uSW5pdGlhbFNpbGVuY2VUaW1lb3V0XG4gICAgICovXG4gICAgTm9NYXRjaFJlYXNvbltOb01hdGNoUmVhc29uW1wiSW5pdGlhbFNpbGVuY2VUaW1lb3V0XCJdID0gMV0gPSBcIkluaXRpYWxTaWxlbmNlVGltZW91dFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBzdGFydCBvZiB0aGUgYXVkaW8gc3RyZWFtIGNvbnRhaW5lZCBvbmx5IG5vaXNlLFxuICAgICAqIGFuZCB0aGUgc2VydmljZSB0aW1lZCBvdXQgd2FpdGluZyBmb3Igc3BlZWNoLlxuICAgICAqIEBtZW1iZXIgTm9NYXRjaFJlYXNvbi5Jbml0aWFsQmFiYmxlVGltZW91dFxuICAgICAqL1xuICAgIE5vTWF0Y2hSZWFzb25bTm9NYXRjaFJlYXNvbltcIkluaXRpYWxCYWJibGVUaW1lb3V0XCJdID0gMl0gPSBcIkluaXRpYWxCYWJibGVUaW1lb3V0XCI7XG59KShOb01hdGNoUmVhc29uIHx8IChOb01hdGNoUmVhc29uID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Tm9NYXRjaFJlYXNvbi5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBEZWZpbmUgU3BlZWNoIFJlY29nbml6ZXIgb3V0cHV0IGZvcm1hdHMuXG4gKiBAY2xhc3MgT3V0cHV0Rm9ybWF0XG4gKi9cbmV4cG9ydCB2YXIgT3V0cHV0Rm9ybWF0O1xuKGZ1bmN0aW9uIChPdXRwdXRGb3JtYXQpIHtcbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIE91dHB1dEZvcm1hdC5TaW1wbGVcbiAgICAgKi9cbiAgICBPdXRwdXRGb3JtYXRbT3V0cHV0Rm9ybWF0W1wiU2ltcGxlXCJdID0gMF0gPSBcIlNpbXBsZVwiO1xuICAgIC8qKlxuICAgICAqIEBtZW1iZXIgT3V0cHV0Rm9ybWF0LkRldGFpbGVkXG4gICAgICovXG4gICAgT3V0cHV0Rm9ybWF0W091dHB1dEZvcm1hdFtcIkRldGFpbGVkXCJdID0gMV0gPSBcIkRldGFpbGVkXCI7XG59KShPdXRwdXRGb3JtYXQgfHwgKE91dHB1dEZvcm1hdCA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU91dHB1dEZvcm1hdC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBBbGxvd3MgYWRkaXRpb25zIG9mIG5ldyBwaHJhc2VzIHRvIGltcHJvdmUgc3BlZWNoIHJlY29nbml0aW9uLlxuICpcbiAqIFBocmFzZXMgYWRkZWQgdG8gdGhlIHJlY29nbml6ZXIgYXJlIGVmZmVjdGl2ZSBhdCB0aGUgc3RhcnQgb2YgdGhlIG5leHQgcmVjb2duaXRpb24sIG9yIHRoZSBuZXh0IHRpbWUgdGhlIFNwZWVjaFNESyBtdXN0IHJlY29ubmVjdFxuICogdG8gdGhlIHNwZWVjaCBzZXJ2aWNlLlxuICovXG5leHBvcnQgY2xhc3MgUGhyYXNlTGlzdEdyYW1tYXIge1xuICAgIGNvbnN0cnVjdG9yKHJlY29nQmFzZSkge1xuICAgICAgICB0aGlzLnByaXZHcmFtbWVyQnVpbGRlciA9IHJlY29nQmFzZS5keW5hbWljR3JhbW1hcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFBocmFzZUxpc3RHcmFtbWFyIGZyb20gYSBnaXZlbiBzcGVlY2ggcmVjb2duaXplci4gV2lsbCBhY2NlcHQgYW55IHJlY29nbml6ZXIgdGhhdCBkZXJpdmVzIGZyb20gQGNsYXNzIFJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHJlY29nbml6ZXIgVGhlIHJlY29nbml6ZXIgdG8gYWRkIHBocmFzZSBsaXN0cyB0by5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVJlY29nbml6ZXIocmVjb2duaXplcikge1xuICAgICAgICBjb25zdCByZWNvQmFzZSA9IHJlY29nbml6ZXIuaW50ZXJuYWxEYXRhO1xuICAgICAgICByZXR1cm4gbmV3IFBocmFzZUxpc3RHcmFtbWFyKHJlY29CYXNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIHNpbmdsZSBwaHJhc2UgdG8gdGhlIGN1cnJlbnQgcmVjb2duaXplci5cbiAgICAgKiBAcGFyYW0gcGhyYXNlIFBocmFzZSB0byBhZGQuXG4gICAgICovXG4gICAgYWRkUGhyYXNlKHBocmFzZSkge1xuICAgICAgICB0aGlzLnByaXZHcmFtbWVyQnVpbGRlci5hZGRQaHJhc2UocGhyYXNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBtdWx0aXBsZSBwaHJhc2VzIHRvIHRoZSBjdXJyZW50IHJlY29nbml6ZXIuXG4gICAgICogQHBhcmFtIHBocmFzZXMgQXJyYXkgb2YgcGhyYXNlcyB0byBhZGQuXG4gICAgICovXG4gICAgYWRkUGhyYXNlcyhwaHJhc2VzKSB7XG4gICAgICAgIHRoaXMucHJpdkdyYW1tZXJCdWlsZGVyLmFkZFBocmFzZShwaHJhc2VzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYXJzIGFsbCBwaHJhc2VzIGFkZGVkIHRvIHRoZSBjdXJyZW50IHJlY29nbml6ZXIuXG4gICAgICovXG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMucHJpdkdyYW1tZXJCdWlsZGVyLmNsZWFyUGhyYXNlcygpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGhyYXNlTGlzdEdyYW1tYXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogUHJvZmFuaXR5IG9wdGlvbi5cbiAqIEFkZGVkIGluIHZlcnNpb24gMS43LjAuXG4gKi9cbmV4cG9ydCB2YXIgUHJvZmFuaXR5T3B0aW9uO1xuKGZ1bmN0aW9uIChQcm9mYW5pdHlPcHRpb24pIHtcbiAgICBQcm9mYW5pdHlPcHRpb25bUHJvZmFuaXR5T3B0aW9uW1wiTWFza2VkXCJdID0gMF0gPSBcIk1hc2tlZFwiO1xuICAgIFByb2Zhbml0eU9wdGlvbltQcm9mYW5pdHlPcHRpb25bXCJSZW1vdmVkXCJdID0gMV0gPSBcIlJlbW92ZWRcIjtcbiAgICBQcm9mYW5pdHlPcHRpb25bUHJvZmFuaXR5T3B0aW9uW1wiUmF3XCJdID0gMl0gPSBcIlJhd1wiO1xufSkoUHJvZmFuaXR5T3B0aW9uIHx8IChQcm9mYW5pdHlPcHRpb24gPSB7fSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9mYW5pdHlPcHRpb24uanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFkaW5nU3lzdGVtLCBQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYW51bGFyaXR5LCBQcm9wZXJ0eUNvbGxlY3Rpb24sIFByb3BlcnR5SWQgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIFByb251bmNpYXRpb24gYXNzZXNzbWVudCBjb25maWd1cmF0aW9uLlxuICogQGNsYXNzIFByb251bmNpYXRpb25Bc3Nlc3NtZW50Q29uZmlnXG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTUuMC5cbiAqL1xuZXhwb3J0IGNsYXNzIFByb251bmNpYXRpb25Bc3Nlc3NtZW50Q29uZmlnIHtcbiAgICAvKipcbiAgICAgKiBQcm9udW5jaWF0aW9uQXNzZXNzbWVudENvbmZpZyBjb25zdHJ1Y3Rvci5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVmZXJlbmNlVGV4dFxuICAgICAqIEBwYXJhbSBncmFkaW5nU3lzdGVtXG4gICAgICogQHBhcmFtIGdyYW51bGFyaXR5XG4gICAgICogQHBhcmFtIGVuYWJsZU1pc2N1ZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlZmVyZW5jZVRleHQsIGdyYWRpbmdTeXN0ZW0gPSBQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYWRpbmdTeXN0ZW0uRml2ZVBvaW50LCBncmFudWxhcml0eSA9IFByb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhbnVsYXJpdHkuUGhvbmVtZSwgZW5hYmxlTWlzY3VlID0gZmFsc2UpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQocmVmZXJlbmNlVGV4dCwgXCJyZWZlcmVuY2VUZXh0XCIpO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfUmVmZXJlbmNlVGV4dCwgcmVmZXJlbmNlVGV4dCk7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Qcm9udW5jaWF0aW9uQXNzZXNzbWVudF9HcmFkaW5nU3lzdGVtLCBQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYWRpbmdTeXN0ZW1bZ3JhZGluZ1N5c3RlbV0pO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfR3JhbnVsYXJpdHksIFByb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhbnVsYXJpdHlbZ3JhbnVsYXJpdHldKTtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlByb251bmNpYXRpb25Bc3Nlc3NtZW50X0VuYWJsZU1pc2N1ZSwgU3RyaW5nKGVuYWJsZU1pc2N1ZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIFByb251bmNpYXRpb25Bc3Nlc3NtZW50Q29uZmlnLmZyb21KU09OXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBqc29uIFRoZSBqc29uIHN0cmluZyBjb250YWluaW5nIHRoZSBwcm9udW5jaWF0aW9uIGFzc2Vzc21lbnQgcGFyYW1ldGVycy5cbiAgICAgKiBAcmV0dXJuIHtQcm9udW5jaWF0aW9uQXNzZXNzbWVudENvbmZpZ30gSW5zdGFuY2Ugb2YgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRDb25maWdcbiAgICAgKiBAc3VtbWFyeSBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBQcm9udW5jaWF0aW9uQXNzZXNzbWVudENvbmZpZyBmcm9tIGpzb24uXG4gICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoanNvbiwgXCJqc29uXCIpO1xuICAgICAgICBjb25zdCBjb25maWcgPSBuZXcgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRDb25maWcoXCJcIik7XG4gICAgICAgIGNvbmZpZy5wcml2UHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgY29uZmlnLnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Qcm9udW5jaWF0aW9uQXNzZXNzbWVudF9Kc29uLCBqc29uKTtcbiAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUpzb24oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Qcm9udW5jaWF0aW9uQXNzZXNzbWVudF9QYXJhbXMpO1xuICAgIH1cbiAgICBhcHBseVRvKHJlY29nbml6ZXIpIHtcbiAgICAgICAgdGhpcy51cGRhdGVKc29uKCk7XG4gICAgICAgIGNvbnN0IHJlY29CYXNlID0gcmVjb2duaXplci5pbnRlcm5hbERhdGE7XG4gICAgICAgIHJlY29CYXNlLnNwZWVjaENvbnRleHQuc2V0UHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRQYXJhbXModGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfUGFyYW1zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHJlZmVyZW5jZSB0ZXh0LlxuICAgICAqIEBtZW1iZXIgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRDb25maWcucHJvdG90eXBlLnJlZmVyZW5jZVRleHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUmVmZXJlbmNlIHRleHQuXG4gICAgICovXG4gICAgZ2V0IHJlZmVyZW5jZVRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Qcm9udW5jaWF0aW9uQXNzZXNzbWVudF9SZWZlcmVuY2VUZXh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cy9TZXRzIHRoZSByZWZlcmVuY2UgdGV4dC5cbiAgICAgKiBAbWVtYmVyIFByb251bmNpYXRpb25Bc3Nlc3NtZW50Q29uZmlnLnByb3RvdHlwZS5yZWZlcmVuY2VUZXh0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZWZlcmVuY2VUZXh0IC0gUmVmZXJlbmNlIHRleHQuXG4gICAgICovXG4gICAgc2V0IHJlZmVyZW5jZVRleHQocmVmZXJlbmNlVGV4dCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocmVmZXJlbmNlVGV4dCwgXCJyZWZlcmVuY2VUZXh0XCIpO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Qcm9udW5jaWF0aW9uQXNzZXNzbWVudF9SZWZlcmVuY2VUZXh0LCByZWZlcmVuY2VUZXh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcGhvbmVtZSBhbHBoYWJldC5cbiAgICAgKiBUaGUgdmFsaWQgdmFsdWVzIGFyZSBcIlNBUElcIiAoZGVmYXVsdCkgYW5kIFwiSVBBXCIuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjIwLjBcbiAgICAgKiBAbWVtYmVyIFByb251bmNpYXRpb25Bc3Nlc3NtZW50Q29uZmlnLnByb3RvdHlwZS5waG9uZW1lQWxwaGFiZXRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBob25lbWVBbHBoYWJldCAtIFBob25lbWUgYWxwaGFiZXQuXG4gICAgICovXG4gICAgc2V0IHBob25lbWVBbHBoYWJldChwaG9uZW1lQWxwaGFiZXQpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHBob25lbWVBbHBoYWJldCwgXCJwaG9uZW1lQWxwaGFiZXRcIik7XG4gICAgICAgIHRoaXMucHJpdlBob25lbWVBbHBoYWJldCA9IHBob25lbWVBbHBoYWJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgYm9vbGVhbiBlbmFibGVNaXNjdWUgcHJvcGVydHkuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjI2LjBcbiAgICAgKiBAbWVtYmVyIFByb251bmNpYXRpb25Bc3Nlc3NtZW50Q29uZmlnLnByb3RvdHlwZS5lbmFibGVNaXNjdWVcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtib29sZWFufSBlbmFibGVNaXNjdWUgLSBlbmFibGUgbWlzY3VlLlxuICAgICAqL1xuICAgIHNldCBlbmFibGVNaXNjdWUoZW5hYmxlTWlzY3VlKSB7XG4gICAgICAgIGNvbnN0IGVuYWJsZU1pc2N1ZVN0cmluZyA9IGVuYWJsZU1pc2N1ZSA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Qcm9udW5jaWF0aW9uQXNzZXNzbWVudF9FbmFibGVNaXNjdWUsIGVuYWJsZU1pc2N1ZVN0cmluZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGJvb2xlYW4gZW5hYmxlTWlzY3VlIHByb3BlcnR5LlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4yNi4wXG4gICAgICogQG1lbWJlciBQcm9udW5jaWF0aW9uQXNzZXNzbWVudENvbmZpZy5wcm90b3R5cGUuZW5hYmxlTWlzY3VlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGVuYWJsZU1pc2N1ZSAtIGVuYWJsZSBtaXNjdWUuXG4gICAgICovXG4gICAgZ2V0IGVuYWJsZU1pc2N1ZSgpIHtcbiAgICAgICAgY29uc3QgZW5hYmxlTWlzY3VlU3RyaW5nID0gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfRW5hYmxlTWlzY3VlLCBcImZhbHNlXCIpO1xuICAgICAgICByZXR1cm4gKGVuYWJsZU1pc2N1ZVN0cmluZy50b0xvd2VyQ2FzZSgpID09PSBcInRydWVcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIG5iZXN0IHBob25lbWUgY291bnRcbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMjAuMFxuICAgICAqIEBtZW1iZXIgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRDb25maWcucHJvdG90eXBlLm5iZXN0UGhvbmVtZUNvdW50XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuYmVzdFBob25lbWVDb3VudCAtIE5CZXN0IHBob25lbWUgY291bnQuXG4gICAgICovXG4gICAgc2V0IG5iZXN0UGhvbmVtZUNvdW50KG5iZXN0UGhvbmVtZUNvdW50KSB7XG4gICAgICAgIHRoaXMucHJpdk5CZXN0UGhvbmVtZUNvdW50ID0gbmJlc3RQaG9uZW1lQ291bnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBtZW1iZXIgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRDb25maWcucHJvdG90eXBlLnByb3BlcnRpZXNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybiB7UHJvcGVydHlDb2xsZWN0aW9ufSBQcm9wZXJ0aWVzIG9mIHRoZSBjb25maWcuXG4gICAgICogQHN1bW1hcnkgR2V0cyBhIHByb251bmNpYXRpb24gYXNzZXNzbWVudCBjb25maWcgcHJvcGVydGllc1xuICAgICAqL1xuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcztcbiAgICB9XG4gICAgdXBkYXRlSnNvbigpIHtcbiAgICAgICAgY29uc3QganNvblN0cmluZyA9IHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Qcm9udW5jaWF0aW9uQXNzZXNzbWVudF9Kc29uLCBcInt9XCIpO1xuICAgICAgICBjb25zdCBwYXJhbXNKc29uID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcbiAgICAgICAgY29uc3QgcmVmZXJlbmNlVGV4dCA9IHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Qcm9udW5jaWF0aW9uQXNzZXNzbWVudF9SZWZlcmVuY2VUZXh0KTtcbiAgICAgICAgaWYgKHJlZmVyZW5jZVRleHQpIHtcbiAgICAgICAgICAgIHBhcmFtc0pzb24ucmVmZXJlbmNlVGV4dCA9IHJlZmVyZW5jZVRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ3JhZGluZ1N5c3RlbSA9IHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5Qcm9udW5jaWF0aW9uQXNzZXNzbWVudF9HcmFkaW5nU3lzdGVtKTtcbiAgICAgICAgaWYgKGdyYWRpbmdTeXN0ZW0pIHtcbiAgICAgICAgICAgIHBhcmFtc0pzb24uZ3JhZGluZ1N5c3RlbSA9IGdyYWRpbmdTeXN0ZW07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ3JhbnVsYXJpdHkgPSB0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfR3JhbnVsYXJpdHkpO1xuICAgICAgICBpZiAoZ3JhbnVsYXJpdHkpIHtcbiAgICAgICAgICAgIHBhcmFtc0pzb24uZ3JhbnVsYXJpdHkgPSBncmFudWxhcml0eTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcml2UGhvbmVtZUFscGhhYmV0KSB7XG4gICAgICAgICAgICBwYXJhbXNKc29uLnBob25lbWVBbHBoYWJldCA9IHRoaXMucHJpdlBob25lbWVBbHBoYWJldDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcml2TkJlc3RQaG9uZW1lQ291bnQpIHtcbiAgICAgICAgICAgIHBhcmFtc0pzb24ubmJlc3RQaG9uZW1lQ291bnQgPSB0aGlzLnByaXZOQmVzdFBob25lbWVDb3VudDtcbiAgICAgICAgfVxuICAgICAgICAvLyBhbHdheXMgc2V0IGRpbWVuc2lvbiB0byBDb21wcmVoZW5zaXZlXG4gICAgICAgIHBhcmFtc0pzb24uZGltZW5zaW9uID0gXCJDb21wcmVoZW5zaXZlXCI7XG4gICAgICAgIHBhcmFtc0pzb24uZW5hYmxlTWlzY3VlID0gdGhpcy5lbmFibGVNaXNjdWU7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5Qcm9udW5jaWF0aW9uQXNzZXNzbWVudF9QYXJhbXMsIEpTT04uc3RyaW5naWZ5KHBhcmFtc0pzb24pKTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb251bmNpYXRpb25Bc3Nlc3NtZW50Q29uZmlnLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgdGhlIHBvaW50IHN5c3RlbSBmb3IgcHJvbnVuY2lhdGlvbiBzY29yZSBjYWxpYnJhdGlvbjsgZGVmYXVsdCB2YWx1ZSBpcyBGaXZlUG9pbnQuXG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTUuMFxuICogQGNsYXNzIFByb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhZGluZ1N5c3RlbVxuICovXG5leHBvcnQgdmFyIFByb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhZGluZ1N5c3RlbTtcbihmdW5jdGlvbiAoUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFkaW5nU3lzdGVtKSB7XG4gICAgLyoqXG4gICAgICogRml2ZSBwb2ludCBjYWxpYnJhdGlvblxuICAgICAqIEBtZW1iZXIgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFkaW5nU3lzdGVtLkZpdmVQb2ludFxuICAgICAqL1xuICAgIFByb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhZGluZ1N5c3RlbVtQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYWRpbmdTeXN0ZW1bXCJGaXZlUG9pbnRcIl0gPSAxXSA9IFwiRml2ZVBvaW50XCI7XG4gICAgLyoqXG4gICAgICogSHVuZHJlZCBtYXJrXG4gICAgICogQG1lbWJlciBQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYWRpbmdTeXN0ZW0uSHVuZHJlZE1hcmtcbiAgICAgKi9cbiAgICBQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYWRpbmdTeXN0ZW1bUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFkaW5nU3lzdGVtW1wiSHVuZHJlZE1hcmtcIl0gPSAyXSA9IFwiSHVuZHJlZE1hcmtcIjtcbn0pKFByb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhZGluZ1N5c3RlbSB8fCAoUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFkaW5nU3lzdGVtID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFkaW5nU3lzdGVtLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgdGhlIHByb251bmNpYXRpb24gZXZhbHVhdGlvbiBncmFudWxhcml0eTsgZGVmYXVsdCB2YWx1ZSBpcyBQaG9uZW1lLlxuICogQWRkZWQgaW4gdmVyc2lvbiAxLjE1LjBcbiAqIEBjbGFzcyBQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYW51bGFyaXR5XG4gKi9cbmV4cG9ydCB2YXIgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFudWxhcml0eTtcbihmdW5jdGlvbiAoUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFudWxhcml0eSkge1xuICAgIC8qKlxuICAgICAqIFNob3dzIHRoZSBzY29yZSBvbiB0aGUgZnVsbCB0ZXh0LCB3b3JkIGFuZCBwaG9uZW1lIGxldmVsXG4gICAgICogQG1lbWJlciBQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYW51bGFyaXR5LlBob25lbWVcbiAgICAgKi9cbiAgICBQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYW51bGFyaXR5W1Byb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhbnVsYXJpdHlbXCJQaG9uZW1lXCJdID0gMV0gPSBcIlBob25lbWVcIjtcbiAgICAvKipcbiAgICAgKiBTaG93cyB0aGUgc2NvcmUgb24gdGhlIGZ1bGwgdGV4dCBhbmQgd29yZCBsZXZlbFxuICAgICAqIEBtZW1iZXIgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFudWxhcml0eS5Xb3JkXG4gICAgICovXG4gICAgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFudWxhcml0eVtQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYW51bGFyaXR5W1wiV29yZFwiXSA9IDJdID0gXCJXb3JkXCI7XG4gICAgLyoqXG4gICAgICogU2hvd3MgdGhlIHNjb3JlIG9uIHRoZSBmdWxsIHRleHQgbGV2ZWwgb25seVxuICAgICAqIEBtZW1iZXIgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFudWxhcml0eS5GdWxsVGV4dFxuICAgICAqL1xuICAgIFByb251bmNpYXRpb25Bc3Nlc3NtZW50R3JhbnVsYXJpdHlbUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFudWxhcml0eVtcIkZ1bGxUZXh0XCJdID0gM10gPSBcIkZ1bGxUZXh0XCI7XG59KShQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYW51bGFyaXR5IHx8IChQcm9udW5jaWF0aW9uQXNzZXNzbWVudEdyYW51bGFyaXR5ID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRHcmFudWxhcml0eS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUlkIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBQcm9udW5jaWF0aW9uIGFzc2Vzc21lbnQgcmVzdWx0cy5cbiAqIEBjbGFzcyBQcm9udW5jaWF0aW9uQXNzZXNzbWVudFJlc3VsdFxuICogQWRkZWQgaW4gdmVyc2lvbiAxLjE1LjAuXG4gKi9cbmV4cG9ydCBjbGFzcyBQcm9udW5jaWF0aW9uQXNzZXNzbWVudFJlc3VsdCB7XG4gICAgY29uc3RydWN0b3IoanNvblN0cmluZykge1xuICAgICAgICBjb25zdCBqID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoai5OQmVzdFswXSwgXCJOQmVzdFwiKTtcbiAgICAgICAgdGhpcy5wcml2UHJvbkpzb24gPSBqLk5CZXN0WzBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAbWVtYmVyIFByb251bmNpYXRpb25Bc3Nlc3NtZW50UmVzdWx0LmZyb21SZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtSZWNvZ25pdGlvblJlc3VsdH0gcmVzdWx0IFRoZSByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICogQHJldHVybiB7UHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRDb25maWd9IEluc3RhbmNlIG9mIFByb251bmNpYXRpb25Bc3Nlc3NtZW50Q29uZmlnXG4gICAgICogQHN1bW1hcnkgQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRSZXN1bHQgZnJvbSByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21SZXN1bHQocmVzdWx0KSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHJlc3VsdCwgXCJyZXN1bHRcIik7XG4gICAgICAgIGNvbnN0IGpzb24gPSByZXN1bHQucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uUmVzdWx0KTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoanNvbiwgXCJqc29uXCIpO1xuICAgICAgICByZXR1cm4gbmV3IFByb251bmNpYXRpb25Bc3Nlc3NtZW50UmVzdWx0KGpzb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBkZXRhaWwgcmVzdWx0IG9mIHByb251bmNpYXRpb24gYXNzZXNzbWVudC5cbiAgICAgKiBAbWVtYmVyIFByb251bmNpYXRpb25Bc3Nlc3NtZW50Q29uZmlnLnByb3RvdHlwZS5kZXRhaWxSZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge0RldGFpbFJlc3VsdH0gZGV0YWlsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBnZXQgZGV0YWlsUmVzdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvbkpzb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBzY29yZSBpbmRpY2F0aW5nIHRoZSBwcm9udW5jaWF0aW9uIGFjY3VyYWN5IG9mIHRoZSBnaXZlbiBzcGVlY2gsIHdoaWNoIGluZGljYXRlc1xuICAgICAqIGhvdyBjbG9zZWx5IHRoZSBwaG9uZW1lcyBtYXRjaCBhIG5hdGl2ZSBzcGVha2VyJ3MgcHJvbnVuY2lhdGlvbi5cbiAgICAgKiBAbWVtYmVyIFByb251bmNpYXRpb25Bc3Nlc3NtZW50UmVzdWx0LnByb3RvdHlwZS5hY2N1cmFjeVNjb3JlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IEFjY3VyYWN5IHNjb3JlLlxuICAgICAqL1xuICAgIGdldCBhY2N1cmFjeVNjb3JlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZXRhaWxSZXN1bHQuUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnQuQWNjdXJhY3lTY29yZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIG92ZXJhbGwgc2NvcmUgaW5kaWNhdGluZyB0aGUgcHJvbnVuY2lhdGlvbiBxdWFsaXR5IG9mIHRoZSBnaXZlbiBzcGVlY2guXG4gICAgICogVGhpcyBpcyBjYWxjdWxhdGVkIGZyb20gQWNjdXJhY3lTY29yZSwgRmx1ZW5jeVNjb3JlIGFuZCBDb21wbGV0ZW5lc3NTY29yZSB3aXRoIHdlaWdodC5cbiAgICAgKiBAbWVtYmVyIFByb251bmNpYXRpb25Bc3Nlc3NtZW50UmVzdWx0LnByb3RvdHlwZS5wcm9udW5jaWF0aW9uU2NvcmVcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge251bWJlcn0gUHJvbnVuY2lhdGlvbiBzY29yZS5cbiAgICAgKi9cbiAgICBnZXQgcHJvbnVuY2lhdGlvblNjb3JlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZXRhaWxSZXN1bHQuUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnQuUHJvblNjb3JlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgaW5kaWNhdGluZyB0aGUgY29tcGxldGVuZXNzIG9mIHRoZSBnaXZlbiBzcGVlY2ggYnkgY2FsY3VsYXRpbmcgdGhlIHJhdGlvIG9mIHByb25vdW5jZWQgd29yZHMgdG93YXJkcyBlbnRpcmUgaW5wdXQuXG4gICAgICogQG1lbWJlciBQcm9udW5jaWF0aW9uQXNzZXNzbWVudFJlc3VsdC5wcm90b3R5cGUuY29tcGxldGVuZXNzU2NvcmVcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge251bWJlcn0gQ29tcGxldGVuZXNzIHNjb3JlLlxuICAgICAqL1xuICAgIGdldCBjb21wbGV0ZW5lc3NTY29yZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGV0YWlsUmVzdWx0LlByb251bmNpYXRpb25Bc3Nlc3NtZW50LkNvbXBsZXRlbmVzc1Njb3JlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgaW5kaWNhdGluZyB0aGUgZmx1ZW5jeSBvZiB0aGUgZ2l2ZW4gc3BlZWNoLlxuICAgICAqIEBtZW1iZXIgUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRSZXN1bHQucHJvdG90eXBlLmZsdWVuY3lTY29yZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBGbHVlbmN5IHNjb3JlLlxuICAgICAqL1xuICAgIGdldCBmbHVlbmN5U2NvcmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRldGFpbFJlc3VsdC5Qcm9udW5jaWF0aW9uQXNzZXNzbWVudC5GbHVlbmN5U2NvcmU7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9udW5jaWF0aW9uQXNzZXNzbWVudFJlc3VsdC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgUHJvcGVydHlJZCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogUmVwcmVzZW50cyBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcy5cbiAqIEBjbGFzcyBQcm9wZXJ0eUNvbGxlY3Rpb25cbiAqL1xuZXhwb3J0IGNsYXNzIFByb3BlcnR5Q29sbGVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJpdktleXMgPSBbXTtcbiAgICAgICAgdGhpcy5wcml2VmFsdWVzID0gW107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlIGluIHR5cGUgU3RyaW5nLlxuICAgICAqIEN1cnJlbnRseSBvbmx5IFN0cmluZywgaW50IGFuZCBib29sIGFyZSBhbGxvd2VkLlxuICAgICAqIElmIHRoZSBuYW1lIGlzIG5vdCBhdmFpbGFibGUsIHRoZSBzcGVjaWZpZWQgZGVmYXVsdFZhbHVlIGlzIHJldHVybmVkLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXRQcm9wZXJ0eVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVGhlIHBhcmFtZXRlciBuYW1lLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbn0gZGVmIC0gVGhlIGRlZmF1bHQgdmFsdWUgd2hpY2ggaXMgcmV0dXJuZWQgaWYgdGhlIHBhcmFtZXRlclxuICAgICAqIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQHJldHVybnMge3N0cmluZ30gdmFsdWUgb2YgdGhlIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBnZXRQcm9wZXJ0eShrZXksIGRlZikge1xuICAgICAgICBsZXQga2V5VG9Vc2U7XG4gICAgICAgIGlmICh0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBrZXlUb1VzZSA9IGtleTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGtleVRvVXNlID0gUHJvcGVydHlJZFtrZXldO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdGhpcy5wcml2S2V5cy5sZW5ndGg7IG4rKykge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdktleXNbbl0gPT09IGtleVRvVXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpdlZhbHVlc1tuXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFN0cmluZyhkZWYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBTdHJpbmcgdmFsdWUgb2YgdGhlIHBhcmFtZXRlciBzcGVjaWZpZWQgYnkgbmFtZS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5Q29sbGVjdGlvbi5wcm90b3R5cGUuc2V0UHJvcGVydHlcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIFRoZSBwYXJhbWV0ZXIgbmFtZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgdmFsdWUgb2YgdGhlIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBzZXRQcm9wZXJ0eShrZXksIHZhbHVlKSB7XG4gICAgICAgIGxldCBrZXlUb1VzZTtcbiAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGtleVRvVXNlID0ga2V5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAga2V5VG9Vc2UgPSBQcm9wZXJ0eUlkW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0aGlzLnByaXZLZXlzLmxlbmd0aDsgbisrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2S2V5c1tuXSA9PT0ga2V5VG9Vc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZWYWx1ZXNbbl0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2S2V5cy5wdXNoKGtleVRvVXNlKTtcbiAgICAgICAgdGhpcy5wcml2VmFsdWVzLnB1c2godmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9uZXMgdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUNvbGxlY3Rpb24ucHJvdG90eXBlLmNsb25lXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IEEgY29weSBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKi9cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3QgY2xvbmVkTWFwID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHRoaXMucHJpdktleXMubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgICAgIGNsb25lZE1hcC5wcml2S2V5cy5wdXNoKHRoaXMucHJpdktleXNbbl0pO1xuICAgICAgICAgICAgY2xvbmVkTWFwLnByaXZWYWx1ZXMucHVzaCh0aGlzLnByaXZWYWx1ZXNbbl0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjbG9uZWRNYXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1lcmdlcyB0aGlzIHNldCBvZiBwcm9wZXJ0aWVzIGludG8gYW5vdGhlciwgbm8gb3ZlcndyaXRlcy5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5Q29sbGVjdGlvbi5wcm90b3R5cGUubWVyZ2VUb1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge1Byb3BlcnR5Q29sbGVjdGlvbn0gIGRlc3RpbmF0aW9uQ29sbGVjdGlvbiAtIFRoZSBjb2xsZWN0aW9uIHRvIG1lcmdlIGludG8uXG4gICAgICovXG4gICAgbWVyZ2VUbyhkZXN0aW5hdGlvbkNvbGxlY3Rpb24pIHtcbiAgICAgICAgdGhpcy5wcml2S2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGlmIChkZXN0aW5hdGlvbkNvbGxlY3Rpb24uZ2V0UHJvcGVydHkoa2V5LCB1bmRlZmluZWQpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0UHJvcGVydHkoa2V5KTtcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbkNvbGxlY3Rpb24uc2V0UHJvcGVydHkoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGtleXMgaW4gUHJvcGVydHkgQ29sbGVjdGlvbi5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5Q29sbGVjdGlvbi5wcm90b3R5cGUua2V5c1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nIFtdfSBLZXlzIGluIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBrZXlzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2S2V5cztcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb3BlcnR5Q29sbGVjdGlvbi5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBEZWZpbmVzIHNwZWVjaCBwcm9wZXJ0eSBpZHMuXG4gKiBAY2xhc3MgUHJvcGVydHlJZFxuICovXG5leHBvcnQgdmFyIFByb3BlcnR5SWQ7XG4oZnVuY3Rpb24gKFByb3BlcnR5SWQpIHtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIHN1YnNjcmlwdGlvbiBLZXkuIElmIHlvdSBhcmUgdXNpbmcgYW4gaW50ZW50IHJlY29nbml6ZXIsIHlvdSBuZWVkIHRvXG4gICAgICogc3BlY2lmeSB0aGUgTFVJUyBlbmRwb2ludCBrZXkgZm9yIHlvdXIgcGFydGljdWxhciBMVUlTIGFwcC4gVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIHlvdSBzaG91bGRuJ3RcbiAgICAgKiBoYXZlIHRvIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEluc3RlYWQsIHVzZSBbW1NwZWVjaENvbmZpZy5mcm9tU3Vic2NyaXB0aW9uXV0uXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleVxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleVwiXSA9IDBdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXlcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIGVuZHBvaW50ICh1cmwpLiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgeW91IHNob3VsZG4ndFxuICAgICAqIGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCwgdXNlIFtbU3BlZWNoQ29uZmlnLmZyb21FbmRwb2ludF1dLlxuICAgICAqIE5PVEU6IFRoaXMgZW5kcG9pbnQgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSBlbmRwb2ludCB1c2VkIHRvIG9idGFpbiBhbiBhY2Nlc3MgdG9rZW4uXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50XG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnRcIl0gPSAxXSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIHJlZ2lvbi4gVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIHlvdSBzaG91bGRuJ3QgaGF2ZSB0b1xuICAgICAqIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEluc3RlYWQsIHVzZSBbW1NwZWVjaENvbmZpZy5mcm9tU3Vic2NyaXB0aW9uXV0sIFtbU3BlZWNoQ29uZmlnLmZyb21FbmRwb2ludF1dLCBbW1NwZWVjaENvbmZpZy5mcm9tQXV0aG9yaXphdGlvblRva2VuXV0uXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvblxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvblwiXSA9IDJdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb25cIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIGF1dGhvcml6YXRpb24gdG9rZW4gKGFrYSBhY2Nlc3MgdG9rZW4pLiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcyxcbiAgICAgKiB5b3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCwgdXNlIFtbU3BlZWNoQ29uZmlnLmZyb21BdXRob3JpemF0aW9uVG9rZW5dXSwgW1tTcGVlY2hSZWNvZ25pemVyLmF1dGhvcml6YXRpb25Ub2tlbl1dLFxuICAgICAqIFtbSW50ZW50UmVjb2duaXplci5hdXRob3JpemF0aW9uVG9rZW5dXSwgW1tUcmFuc2xhdGlvblJlY29nbml6ZXIuYXV0aG9yaXphdGlvblRva2VuXV0sIFtbU3BlYWtlclJlY29nbml6ZXIuYXV0aG9yaXphdGlvblRva2VuXV0uXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW5cIl0gPSAzXSA9IFwiU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW5cIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIGF1dGhvcml6YXRpb24gdHlwZS4gQ3VycmVudGx5IHVudXNlZC5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVHlwZVxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1R5cGVcIl0gPSA0XSA9IFwiU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVHlwZVwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UgZW5kcG9pbnQgaWQuIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0XG4gICAgICogaGF2ZSB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkLCB1c2UgW1tTcGVlY2hDb25maWcuZW5kcG9pbnRJZF1dLlxuICAgICAqIE5PVEU6IFRoZSBlbmRwb2ludCBpZCBpcyBhdmFpbGFibGUgaW4gdGhlIFNwZWVjaCBQb3J0YWwsIGxpc3RlZCB1bmRlciBFbmRwb2ludCBEZXRhaWxzLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludElkXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnRJZFwiXSA9IDVdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludElkXCI7XG4gICAgLyoqXG4gICAgICogVGhlIGxpc3Qgb2YgY29tbWEgc2VwYXJhdGVkIGxhbmd1YWdlcyAoQkNQLTQ3IGZvcm1hdCkgdXNlZCBhcyB0YXJnZXQgdHJhbnNsYXRpb24gbGFuZ3VhZ2VzLiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcyxcbiAgICAgKiB5b3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCB1c2UgW1tTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5hZGRUYXJnZXRMYW5ndWFnZV1dLFxuICAgICAqIFtbU3BlZWNoVHJhbnNsYXRpb25Db25maWcudGFyZ2V0TGFuZ3VhZ2VzXV0sIFtbVHJhbnNsYXRpb25SZWNvZ25pemVyLnRhcmdldExhbmd1YWdlc11dLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Ub0xhbmd1YWdlc1wiXSA9IDZdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzXCI7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIENvZ25pdGl2ZSBTZXJ2aWNlIFRleHQgdG8gU3BlZWNoIFNlcnZpY2UgVm9pY2UuIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXNcbiAgICAgKiBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkLCB1c2UgW1tTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy52b2ljZU5hbWVdXS5cbiAgICAgKiBOT1RFOiBWYWxpZCB2b2ljZSBuYW1lcyBjYW4gYmUgZm91bmQgPGEgaHJlZj1cImh0dHBzOi8vYWthLm1zL2Nzc3BlZWNoL3ZvaWNlbmFtZXNcIj5oZXJlPC9hPi5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Wb2ljZVxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVm9pY2VcIl0gPSA3XSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Wb2ljZVwiO1xuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0aW9uIGZlYXR1cmVzLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvbkZlYXR1cmVzXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25GZWF0dXJlc1wiXSA9IDhdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvbkZlYXR1cmVzXCI7XG4gICAgLyoqXG4gICAgICogVGhlIExhbmd1YWdlIFVuZGVyc3RhbmRpbmcgU2VydmljZSBSZWdpb24uIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCwgdXNlIFtbTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nTW9kZWxdXS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSW50ZW50UmVnaW9uXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSW50ZW50UmVnaW9uXCJdID0gOV0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0ludGVudFJlZ2lvblwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBob3N0IG5hbWUgb2YgdGhlIHByb3h5IHNlcnZlciB1c2VkIHRvIGNvbm5lY3QgdG8gdGhlIENvZ25pdGl2ZSBTZXJ2aWNlcyBTcGVlY2ggU2VydmljZS4gT25seSByZWxldmFudCBpbiBOb2RlLmpzIGVudmlyb25tZW50cy5cbiAgICAgKiBZb3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCB1c2UgPHNlZSBjcmVmPVwiU3BlZWNoQ29uZmlnLlNldFByb3h5KHN0cmluZyxpbnQsc3RyaW5nLHN0cmluZylcIi8+LlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS40LjAuXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlIb3N0TmFtZVwiXSA9IDEwXSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlIb3N0TmFtZVwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBwb3J0IG9mIHRoZSBwcm94eSBzZXJ2ZXIgdXNlZCB0byBjb25uZWN0IHRvIHRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UuIE9ubHkgcmVsZXZhbnQgaW4gTm9kZS5qcyBlbnZpcm9ubWVudHMuXG4gICAgICogWW91IHNob3VsZG4ndCBoYXZlIHRvIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEluc3RlYWQgdXNlIDxzZWUgY3JlZj1cIlNwZWVjaENvbmZpZy5TZXRQcm94eShzdHJpbmcsaW50LHN0cmluZyxzdHJpbmcpXCIvPi5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNC4wLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5UG9ydFwiXSA9IDExXSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlQb3J0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIHVzZXIgbmFtZSBvZiB0aGUgcHJveHkgc2VydmVyIHVzZWQgdG8gY29ubmVjdCB0byB0aGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlLiBPbmx5IHJlbGV2YW50IGluIE5vZGUuanMgZW52aXJvbm1lbnRzLlxuICAgICAqIFlvdSBzaG91bGRuJ3QgaGF2ZSB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkIHVzZSA8c2VlIGNyZWY9XCJTcGVlY2hDb25maWcuU2V0UHJveHkoc3RyaW5nLGludCxzdHJpbmcsc3RyaW5nKVwiLz4uXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjQuMC5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVVzZXJOYW1lXCJdID0gMTJdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVVzZXJOYW1lXCI7XG4gICAgLyoqXG4gICAgICogVGhlIHBhc3N3b3JkIG9mIHRoZSBwcm94eSBzZXJ2ZXIgdXNlZCB0byBjb25uZWN0IHRvIHRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UuIE9ubHkgcmVsZXZhbnQgaW4gTm9kZS5qcyBlbnZpcm9ubWVudHMuXG4gICAgICogWW91IHNob3VsZG4ndCBoYXZlIHRvIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEluc3RlYWQgdXNlIDxzZWUgY3JlZj1cIlNwZWVjaENvbmZpZy5TZXRQcm94eShzdHJpbmcsaW50LHN0cmluZyxzdHJpbmcpXCIvPi5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNC4wLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5UGFzc3dvcmRcIl0gPSAxM10gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5UGFzc3dvcmRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIHJlY29nbml0aW9uIE1vZGUuIENhbiBiZSBcIklOVEVSQUNUSVZFXCIsIFwiQ09OVkVSU0FUSU9OXCIsIFwiRElDVEFUSU9OXCIuXG4gICAgICogVGhpcyBwcm9wZXJ0eSBpcyBpbnRlbmRlZCB0byBiZSByZWFkLW9ubHkuIFRoZSBTREsgaXMgdXNpbmcgaXQgaW50ZXJuYWxseS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb01vZGVcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTW9kZVwiXSA9IDE0XSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb01vZGVcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgc3Bva2VuIGxhbmd1YWdlIHRvIGJlIHJlY29nbml6ZWQgKGluIEJDUC00NyBmb3JtYXQpLiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgeW91IHNob3VsZG4ndCBoYXZlIHRvIHVzZSB0aGlzIHByb3BlcnR5XG4gICAgICogZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCwgdXNlIFtbU3BlZWNoQ29uZmlnLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VdXS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlXCJdID0gMTVdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2VcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgc2Vzc2lvbiBpZC4gVGhpcyBpZCBpcyBhIHVuaXZlcnNhbGx5IHVuaXF1ZSBpZGVudGlmaWVyIChha2EgVVVJRCkgcmVwcmVzZW50aW5nIGEgc3BlY2lmaWMgYmluZGluZyBvZiBhbiBhdWRpbyBpbnB1dCBzdHJlYW1cbiAgICAgKiBhbmQgdGhlIHVuZGVybHlpbmcgc3BlZWNoIHJlY29nbml0aW9uIGluc3RhbmNlIHRvIHdoaWNoIGl0IGlzIGJvdW5kLiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgeW91IHNob3VsZG4ndCBoYXZlIHRvIHVzZSB0aGlzXG4gICAgICogcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogSW5zdGVhZCB1c2UgW1tTZXNzaW9uRXZlbnRBcmdzLnNlc3Npb25JZF1dLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hfU2Vzc2lvbklkXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoX1Nlc3Npb25JZFwiXSA9IDE2XSA9IFwiU3BlZWNoX1Nlc3Npb25JZFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBzcG9rZW4gbGFuZ3VhZ2UgdG8gYmUgc3ludGhlc2l6ZWQgKGUuZy4gZW4tVVMpXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoTGFuZ3VhZ2VcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aExhbmd1YWdlXCJdID0gMTddID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aExhbmd1YWdlXCI7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIFRUUyB2b2ljZSB0byBiZSB1c2VkIGZvciBzcGVlY2ggc3ludGhlc2lzXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoVm9pY2VcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aFZvaWNlXCJdID0gMThdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aFZvaWNlXCI7XG4gICAgLyoqXG4gICAgICogVGhlIHN0cmluZyB0byBzcGVjaWZ5IFRUUyBvdXRwdXQgYXVkaW8gZm9ybWF0XG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoT3V0cHV0Rm9ybWF0XG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fU3ludGhPdXRwdXRGb3JtYXRcIl0gPSAxOV0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoT3V0cHV0Rm9ybWF0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIGxpc3Qgb2YgY29tbWEgc2VwYXJhdGVkIGxhbmd1YWdlcyB1c2VkIGFzIHBvc3NpYmxlIHNvdXJjZSBsYW5ndWFnZXNcbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTMuMFxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9BdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VzXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlc1wiXSA9IDIwXSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlc1wiO1xuICAgIC8qKlxuICAgICAqIFRoZSByZXF1ZXN0ZWQgQ29nbml0aXZlIFNlcnZpY2VzIFNwZWVjaCBTZXJ2aWNlIHJlc3BvbnNlIG91dHB1dCBmb3JtYXQgKHNpbXBsZSBvciBkZXRhaWxlZCkuIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0IGhhdmVcbiAgICAgKiB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkIHVzZSBbW1NwZWVjaENvbmZpZy5vdXRwdXRGb3JtYXRdXS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3REZXRhaWxlZFJlc3VsdFRydWVGYWxzZVxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0RGV0YWlsZWRSZXN1bHRUcnVlRmFsc2VcIl0gPSAyMV0gPSBcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0RGV0YWlsZWRSZXN1bHRUcnVlRmFsc2VcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVxdWVzdGVkIENvZ25pdGl2ZSBTZXJ2aWNlcyBTcGVlY2ggU2VydmljZSByZXNwb25zZSBvdXRwdXQgcHJvZmFuaXR5IGxldmVsLiBDdXJyZW50bHkgdW51c2VkLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFByb2Zhbml0eUZpbHRlclRydWVGYWxzZVxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0UHJvZmFuaXR5RmlsdGVyVHJ1ZUZhbHNlXCJdID0gMjJdID0gXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFByb2Zhbml0eUZpbHRlclRydWVGYWxzZVwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UgcmVzcG9uc2Ugb3V0cHV0IChpbiBKU09OIGZvcm1hdCkuIFRoaXMgcHJvcGVydHkgaXMgYXZhaWxhYmxlIG9uIHJlY29nbml0aW9uIHJlc3VsdCBvYmplY3RzIG9ubHkuXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uUmVzdWx0XG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHRcIl0gPSAyM10gPSBcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uUmVzdWx0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIENvZ25pdGl2ZSBTZXJ2aWNlcyBTcGVlY2ggU2VydmljZSBlcnJvciBkZXRhaWxzIChpbiBKU09OIGZvcm1hdCkuIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0IGhhdmUgdG9cbiAgICAgKiB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS4gSW5zdGVhZCB1c2UgW1tDYW5jZWxsYXRpb25EZXRhaWxzLmVycm9yRGV0YWlsc11dLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfSnNvbkVycm9yRGV0YWlsc1xuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uRXJyb3JEZXRhaWxzXCJdID0gMjRdID0gXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfSnNvbkVycm9yRGV0YWlsc1wiO1xuICAgIC8qKlxuICAgICAqIFRoZSBjYW5jZWxsYXRpb24gcmVhc29uLiBDdXJyZW50bHkgdW51c2VkLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5DYW5jZWxsYXRpb25EZXRhaWxzX1JlYXNvblxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIkNhbmNlbGxhdGlvbkRldGFpbHNfUmVhc29uXCJdID0gMjVdID0gXCJDYW5jZWxsYXRpb25EZXRhaWxzX1JlYXNvblwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBjYW5jZWxsYXRpb24gdGV4dC4gQ3VycmVudGx5IHVudXNlZC5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuQ2FuY2VsbGF0aW9uRGV0YWlsc19SZWFzb25UZXh0XG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiQ2FuY2VsbGF0aW9uRGV0YWlsc19SZWFzb25UZXh0XCJdID0gMjZdID0gXCJDYW5jZWxsYXRpb25EZXRhaWxzX1JlYXNvblRleHRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgQ2FuY2VsbGF0aW9uIGRldGFpbGVkIHRleHQuIEN1cnJlbnRseSB1bnVzZWQuXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLkNhbmNlbGxhdGlvbkRldGFpbHNfUmVhc29uRGV0YWlsZWRUZXh0XG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiQ2FuY2VsbGF0aW9uRGV0YWlsc19SZWFzb25EZXRhaWxlZFRleHRcIl0gPSAyN10gPSBcIkNhbmNlbGxhdGlvbkRldGFpbHNfUmVhc29uRGV0YWlsZWRUZXh0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIExhbmd1YWdlIFVuZGVyc3RhbmRpbmcgU2VydmljZSByZXNwb25zZSBvdXRwdXQgKGluIEpTT04gZm9ybWF0KS4gQXZhaWxhYmxlIHZpYSBbW0ludGVudFJlY29nbml0aW9uUmVzdWx0XV1cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHRcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJMYW5ndWFnZVVuZGVyc3RhbmRpbmdTZXJ2aWNlUmVzcG9uc2VfSnNvblJlc3VsdFwiXSA9IDI4XSA9IFwiTGFuZ3VhZ2VVbmRlcnN0YW5kaW5nU2VydmljZVJlc3BvbnNlX0pzb25SZXN1bHRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgVVJMIHN0cmluZyBidWlsdCBmcm9tIHNwZWVjaCBjb25maWd1cmF0aW9uLlxuICAgICAqIFRoaXMgcHJvcGVydHkgaXMgaW50ZW5kZWQgdG8gYmUgcmVhZC1vbmx5LiBUaGUgU0RLIGlzIHVzaW5nIGl0IGludGVybmFsbHkuXG4gICAgICogTk9URTogQWRkZWQgaW4gdmVyc2lvbiAxLjcuMC5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9VcmxcIl0gPSAyOV0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1VybFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBpbml0aWFsIHNpbGVuY2UgdGltZW91dCB2YWx1ZSAoaW4gbWlsbGlzZWNvbmRzKSB1c2VkIGJ5IHRoZSBzZXJ2aWNlLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS43LjBcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Jbml0aWFsU2lsZW5jZVRpbWVvdXRNc1wiXSA9IDMwXSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSW5pdGlhbFNpbGVuY2VUaW1lb3V0TXNcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgZW5kIHNpbGVuY2UgdGltZW91dCB2YWx1ZSAoaW4gbWlsbGlzZWNvbmRzKSB1c2VkIGJ5IHRoZSBzZXJ2aWNlLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS43LjBcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRTaWxlbmNlVGltZW91dE1zXCJdID0gMzFdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRTaWxlbmNlVGltZW91dE1zXCI7XG4gICAgLyoqXG4gICAgICogQSBkdXJhdGlvbiBvZiBkZXRlY3RlZCBzaWxlbmNlLCBtZWFzdXJlZCBpbiBtaWxsaXNlY29uZHMsIGFmdGVyIHdoaWNoIHNwZWVjaC10by10ZXh0IHdpbGwgZGV0ZXJtaW5lIGEgc3Bva2VuXG4gICAgICogcGhyYXNlIGhhcyBlbmRlZCBhbmQgZ2VuZXJhdGUgYSBmaW5hbCBSZWNvZ25pemVkIHJlc3VsdC4gQ29uZmlndXJpbmcgdGhpcyB0aW1lb3V0IG1heSBiZSBoZWxwZnVsIGluIHNpdHVhdGlvbnNcbiAgICAgKiB3aGVyZSBzcG9rZW4gaW5wdXQgaXMgc2lnbmlmaWNhbnRseSBmYXN0ZXIgb3Igc2xvd2VyIHRoYW4gdXN1YWwgYW5kIGRlZmF1bHQgc2VnbWVudGF0aW9uIGJlaGF2aW9yIGNvbnNpc3RlbnRseVxuICAgICAqIHlpZWxkcyByZXN1bHRzIHRoYXQgYXJlIHRvbyBsb25nIG9yIHRvbyBzaG9ydC4gU2VnbWVudGF0aW9uIHRpbWVvdXQgdmFsdWVzIHRoYXQgYXJlIGluYXBwcm9wcmlhdGVseSBoaWdoIG9yIGxvd1xuICAgICAqIGNhbiBuZWdhdGl2ZWx5IGFmZmVjdCBzcGVlY2gtdG8tdGV4dCBhY2N1cmFjeTsgdGhpcyBwcm9wZXJ0eSBzaG91bGQgYmUgY2FyZWZ1bGx5IGNvbmZpZ3VyZWQgYW5kIHRoZSByZXN1bHRpbmdcbiAgICAgKiBiZWhhdmlvciBzaG91bGQgYmUgdGhvcm91Z2hseSB2YWxpZGF0ZWQgYXMgaW50ZW5kZWQuXG4gICAgICpcbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aW1lb3V0IGNvbmZpZ3VyYXRpb24gdGhhdCBpbmNsdWRlcyBkaXNjdXNzaW9uIG9mIGRlZmF1bHQgYmVoYXZpb3JzLCBwbGVhc2UgdmlzaXRcbiAgICAgKiBodHRwczovL2FrYS5tcy9jc3NwZWVjaC90aW1lb3V0cy5cbiAgICAgKlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4yMS4wLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaF9TZWdtZW50YXRpb25TaWxlbmNlVGltZW91dE1zXCJdID0gMzJdID0gXCJTcGVlY2hfU2VnbWVudGF0aW9uU2lsZW5jZVRpbWVvdXRNc1wiO1xuICAgIC8qKlxuICAgICAqIEEgYm9vbGVhbiB2YWx1ZSBzcGVjaWZ5aW5nIHdoZXRoZXIgYXVkaW8gbG9nZ2luZyBpcyBlbmFibGVkIGluIHRoZSBzZXJ2aWNlIG9yIG5vdC5cbiAgICAgKiBBdWRpbyBhbmQgY29udGVudCBsb2dzIGFyZSBzdG9yZWQgZWl0aGVyIGluIE1pY3Jvc29mdC1vd25lZCBzdG9yYWdlLCBvciBpbiB5b3VyIG93biBzdG9yYWdlIGFjY291bnQgbGlua2VkXG4gICAgICogdG8geW91ciBDb2duaXRpdmUgU2VydmljZXMgc3Vic2NyaXB0aW9uIChCcmluZyBZb3VyIE93biBTdG9yYWdlIChCWU9TKSBlbmFibGVkIFNwZWVjaCByZXNvdXJjZSkuXG4gICAgICogVGhlIGxvZ3Mgd2lsbCBiZSByZW1vdmVkIGFmdGVyIDMwIGRheXMuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjcuMFxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuYWJsZUF1ZGlvTG9nZ2luZ1wiXSA9IDMzXSA9IFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5hYmxlQXVkaW9Mb2dnaW5nXCI7XG4gICAgLyoqXG4gICAgICogVGhlIHNwZWVjaCBzZXJ2aWNlIGNvbm5lY3Rpb24gbGFuZ3VhZ2UgaWRlbnRpZmllciBtb2RlLlxuICAgICAqIENhbiBiZSBcIkF0U3RhcnRcIiAodGhlIGRlZmF1bHQpLCBvciBcIkNvbnRpbnVvdXNcIi4gU2VlIExhbmd1YWdlXG4gICAgICogSWRlbnRpZmljYXRpb24gZG9jdW1lbnQgaHR0cHM6Ly9ha2EubXMvc3BlZWNoL2xpZD9waXZvdHM9cHJvZ3JhbW1pbmctbGFuZ3VhZ2UtamF2YXNjcmlwdFxuICAgICAqIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICogQWRkZWQgaW4gMS4yNS4wXG4gICAgICoqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0xhbmd1YWdlSWRNb2RlXCJdID0gMzRdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9MYW5ndWFnZUlkTW9kZVwiO1xuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHZhbHVlIHJlcHJlc2VudGluZyB0aGUgZGVzaXJlZCBlbmRwb2ludCB2ZXJzaW9uIHRvIHRhcmdldCBmb3IgU3BlZWNoIFJlY29nbml0aW9uLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4yMS4wXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb2duaXRpb25FbmRwb2ludFZlcnNpb25cIl0gPSAzNV0gPSBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29nbml0aW9uRW5kcG9pbnRWZXJzaW9uXCI7XG4gICAgLyoqXG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgdmFsdWUgdGhlIGN1cnJlbnQgc3BlYWtlciByZWNvZ25pdGlvbiBzY2VuYXJpby9tb2RlIChUZXh0SW5kZXBlbmRlbnRJZGVudGlmaWNhdGlvbiwgZXRjLikuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjIzLjBcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TcGVha2VySWRNb2RlXCJdID0gMzZdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TcGVha2VySWRNb2RlXCI7XG4gICAgLyoqXG4gICAgICogVGhlIHJlcXVlc3RlZCBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UgcmVzcG9uc2Ugb3V0cHV0IHByb2Zhbml0eSBzZXR0aW5nLlxuICAgICAqIEFsbG93ZWQgdmFsdWVzIGFyZSBcIm1hc2tlZFwiLCBcInJlbW92ZWRcIiwgYW5kIFwicmF3XCIuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjcuMC5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUHJvZmFuaXR5T3B0aW9uXCJdID0gMzddID0gXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUHJvZmFuaXR5T3B0aW9uXCI7XG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgdmFsdWUgc3BlY2lmeWluZyB3aGljaCBwb3N0IHByb2Nlc3Npbmcgb3B0aW9uIHNob3VsZCBiZSB1c2VkIGJ5IHNlcnZpY2UuXG4gICAgICogQWxsb3dlZCB2YWx1ZXMgYXJlIFwiVHJ1ZVRleHRcIi5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNy4wXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZVJlc3BvbnNlX1Bvc3RQcm9jZXNzaW5nT3B0aW9uXCJdID0gMzhdID0gXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUG9zdFByb2Nlc3NpbmdPcHRpb25cIjtcbiAgICAvKipcbiAgICAgKiBBIGJvb2xlYW4gdmFsdWUgc3BlY2lmeWluZyB3aGV0aGVyIHRvIGluY2x1ZGUgd29yZC1sZXZlbCB0aW1lc3RhbXBzIGluIHRoZSByZXNwb25zZSByZXN1bHQuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjcuMFxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0V29yZExldmVsVGltZXN0YW1wc1wiXSA9IDM5XSA9IFwiU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RXb3JkTGV2ZWxUaW1lc3RhbXBzXCI7XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiB0aW1lcyBhIHdvcmQgaGFzIHRvIGJlIGluIHBhcnRpYWwgcmVzdWx0cyB0byBiZSByZXR1cm5lZC5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuNy4wXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZVJlc3BvbnNlX1N0YWJsZVBhcnRpYWxSZXN1bHRUaHJlc2hvbGRcIl0gPSA0MF0gPSBcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9TdGFibGVQYXJ0aWFsUmVzdWx0VGhyZXNob2xkXCI7XG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgdmFsdWUgc3BlY2lmeWluZyB0aGUgb3V0cHV0IGZvcm1hdCBvcHRpb24gaW4gdGhlIHJlc3BvbnNlIHJlc3VsdC4gSW50ZXJuYWwgdXNlIG9ubHkuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjcuMC5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfT3V0cHV0Rm9ybWF0T3B0aW9uXCJdID0gNDFdID0gXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfT3V0cHV0Rm9ybWF0T3B0aW9uXCI7XG4gICAgLyoqXG4gICAgICogQSBib29sZWFuIHZhbHVlIHRvIHJlcXVlc3QgZm9yIHN0YWJpbGl6aW5nIHRyYW5zbGF0aW9uIHBhcnRpYWwgcmVzdWx0cyBieSBvbWl0dGluZyB3b3JkcyBpbiB0aGUgZW5kLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS43LjAuXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZVJlc3BvbnNlX1RyYW5zbGF0aW9uUmVxdWVzdFN0YWJsZVBhcnRpYWxSZXN1bHRcIl0gPSA0Ml0gPSBcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9UcmFuc2xhdGlvblJlcXVlc3RTdGFibGVQYXJ0aWFsUmVzdWx0XCI7XG4gICAgLyoqXG4gICAgICogQSBib29sZWFuIHZhbHVlIHNwZWNpZnlpbmcgd2hldGhlciB0byByZXF1ZXN0IFdvcmRCb3VuZGFyeSBldmVudHMuXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0V29yZEJvdW5kYXJ5XG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjIxLjAuXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RXb3JkQm91bmRhcnlcIl0gPSA0M10gPSBcIlNwZWVjaFNlcnZpY2VSZXNwb25zZV9SZXF1ZXN0V29yZEJvdW5kYXJ5XCI7XG4gICAgLyoqXG4gICAgICogQSBib29sZWFuIHZhbHVlIHNwZWNpZnlpbmcgd2hldGhlciB0byByZXF1ZXN0IHB1bmN0dWF0aW9uIGJvdW5kYXJ5IGluIFdvcmRCb3VuZGFyeSBFdmVudHMuIERlZmF1bHQgaXMgdHJ1ZS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RQdW5jdHVhdGlvbkJvdW5kYXJ5XG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjIxLjAuXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RQdW5jdHVhdGlvbkJvdW5kYXJ5XCJdID0gNDRdID0gXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFB1bmN0dWF0aW9uQm91bmRhcnlcIjtcbiAgICAvKipcbiAgICAgKiBBIGJvb2xlYW4gdmFsdWUgc3BlY2lmeWluZyB3aGV0aGVyIHRvIHJlcXVlc3Qgc2VudGVuY2UgYm91bmRhcnkgaW4gV29yZEJvdW5kYXJ5IEV2ZW50cy4gRGVmYXVsdCBpcyBmYWxzZS5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RTZW50ZW5jZUJvdW5kYXJ5XG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjIxLjAuXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RTZW50ZW5jZUJvdW5kYXJ5XCJdID0gNDVdID0gXCJTcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFNlbnRlbmNlQm91bmRhcnlcIjtcbiAgICAvKipcbiAgICAgKiBJZGVudGlmaWVyIHVzZWQgdG8gY29ubmVjdCB0byB0aGUgYmFja2VuZCBzZXJ2aWNlLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5Db252ZXJzYXRpb25fQXBwbGljYXRpb25JZFxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIkNvbnZlcnNhdGlvbl9BcHBsaWNhdGlvbklkXCJdID0gNDZdID0gXCJDb252ZXJzYXRpb25fQXBwbGljYXRpb25JZFwiO1xuICAgIC8qKlxuICAgICAqIFR5cGUgb2YgZGlhbG9nIGJhY2tlbmQgdG8gY29ubmVjdCB0by5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0RpYWxvZ1R5cGVcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJDb252ZXJzYXRpb25fRGlhbG9nVHlwZVwiXSA9IDQ3XSA9IFwiQ29udmVyc2F0aW9uX0RpYWxvZ1R5cGVcIjtcbiAgICAvKipcbiAgICAgKiBTaWxlbmNlIHRpbWVvdXQgZm9yIGxpc3RlbmluZ1xuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5Db252ZXJzYXRpb25fSW5pdGlhbF9TaWxlbmNlX1RpbWVvdXRcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJDb252ZXJzYXRpb25fSW5pdGlhbF9TaWxlbmNlX1RpbWVvdXRcIl0gPSA0OF0gPSBcIkNvbnZlcnNhdGlvbl9Jbml0aWFsX1NpbGVuY2VfVGltZW91dFwiO1xuICAgIC8qKlxuICAgICAqIEZyb20gSWQgdG8gYWRkIHRvIHNwZWVjaCByZWNvZ25pdGlvbiBhY3Rpdml0aWVzLlxuICAgICAqIEBtZW1iZXIgUHJvcGVydHlJZC5Db252ZXJzYXRpb25fRnJvbV9JZFxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIkNvbnZlcnNhdGlvbl9Gcm9tX0lkXCJdID0gNDldID0gXCJDb252ZXJzYXRpb25fRnJvbV9JZFwiO1xuICAgIC8qKlxuICAgICAqIENvbnZlcnNhdGlvbklkIGZvciB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX0NvbnZlcnNhdGlvbl9JZFxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIkNvbnZlcnNhdGlvbl9Db252ZXJzYXRpb25fSWRcIl0gPSA1MF0gPSBcIkNvbnZlcnNhdGlvbl9Db252ZXJzYXRpb25fSWRcIjtcbiAgICAvKipcbiAgICAgKiBDb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBjdXN0b20gdm9pY2UgZGVwbG95bWVudCBpZHMuXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9DdXN0b21fVm9pY2VfRGVwbG95bWVudF9JZHNcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJDb252ZXJzYXRpb25fQ3VzdG9tX1ZvaWNlX0RlcGxveW1lbnRfSWRzXCJdID0gNTFdID0gXCJDb252ZXJzYXRpb25fQ3VzdG9tX1ZvaWNlX0RlcGxveW1lbnRfSWRzXCI7XG4gICAgLyoqXG4gICAgICogU3BlZWNoIGFjdGl2aXR5IHRlbXBsYXRlLCBzdGFtcCBwcm9wZXJ0aWVzIGZyb20gdGhlIHRlbXBsYXRlIG9uIHRoZSBhY3Rpdml0eSBnZW5lcmF0ZWQgYnkgdGhlIHNlcnZpY2UgZm9yIHNwZWVjaC5cbiAgICAgKiBAbWVtYmVyIFByb3BlcnR5SWQuQ29udmVyc2F0aW9uX1NwZWVjaF9BY3Rpdml0eV9UZW1wbGF0ZVxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xMC4wLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIkNvbnZlcnNhdGlvbl9TcGVlY2hfQWN0aXZpdHlfVGVtcGxhdGVcIl0gPSA1Ml0gPSBcIkNvbnZlcnNhdGlvbl9TcGVlY2hfQWN0aXZpdHlfVGVtcGxhdGVcIjtcbiAgICAvKipcbiAgICAgKiBFbmFibGVzIG9yIGRpc2FibGVzIHRoZSByZWNlaXB0IG9mIHR1cm4gc3RhdHVzIG1lc3NhZ2VzIGFzIG9idGFpbmVkIG9uIHRoZSB0dXJuU3RhdHVzUmVjZWl2ZWQgZXZlbnQuXG4gICAgICogQG1lbWJlciBQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvbl9SZXF1ZXN0X0JvdF9TdGF0dXNfTWVzc2FnZXNcbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTUuMC5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJDb252ZXJzYXRpb25fUmVxdWVzdF9Cb3RfU3RhdHVzX01lc3NhZ2VzXCJdID0gNTNdID0gXCJDb252ZXJzYXRpb25fUmVxdWVzdF9Cb3RfU3RhdHVzX01lc3NhZ2VzXCI7XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSBjb25uZWN0aW9uIElEIHRvIGJlIHByb3ZpZGVkIGluIHRoZSBBZ2VudCBjb25maWd1cmF0aW9uIG1lc3NhZ2UsIGUuZy4gYSBEaXJlY3QgTGluZSB0b2tlbiBmb3JcbiAgICAgKiBjaGFubmVsIGF1dGhlbnRpY2F0aW9uLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xNS4xLlxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIkNvbnZlcnNhdGlvbl9BZ2VudF9Db25uZWN0aW9uX0lkXCJdID0gNTRdID0gXCJDb252ZXJzYXRpb25fQWdlbnRfQ29ubmVjdGlvbl9JZFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBDb2duaXRpdmUgU2VydmljZXMgU3BlZWNoIFNlcnZpY2UgaG9zdCAodXJsKS4gVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIHlvdSBzaG91bGRuJ3QgaGF2ZSB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBJbnN0ZWFkLCB1c2UgW1tTcGVlY2hDb25maWcuZnJvbUhvc3RdXS5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Ib3N0XCJdID0gNTVdID0gXCJTcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Ib3N0XCI7XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBob3N0IGZvciBzZXJ2aWNlIGNhbGxzIHRvIHRoZSBDb252ZXJzYXRpb24gVHJhbnNsYXRvciBSRVNUIG1hbmFnZW1lbnQgYW5kIHdlYnNvY2tldCBjYWxscy5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJDb252ZXJzYXRpb25UcmFuc2xhdG9yX0hvc3RcIl0gPSA1Nl0gPSBcIkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfSG9zdFwiO1xuICAgIC8qKlxuICAgICAqIE9wdGlvbmFsbHkgc2V0IHRoZSB0aGUgaG9zdCdzIGRpc3BsYXkgbmFtZS5cbiAgICAgKiBVc2VkIHdoZW4gam9pbmluZyBhIGNvbnZlcnNhdGlvbi5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJDb252ZXJzYXRpb25UcmFuc2xhdG9yX05hbWVcIl0gPSA1N10gPSBcIkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfTmFtZVwiO1xuICAgIC8qKlxuICAgICAqIE9wdGlvbmFsbHkgc2V0IGEgdmFsdWUgZm9yIHRoZSBYLUNvcnJlbGF0aW9uSWQgcmVxdWVzdCBoZWFkZXIuXG4gICAgICogVXNlZCBmb3IgdHJvdWJsZXNob290aW5nIGVycm9ycyBpbiB0aGUgc2VydmVyIGxvZ3MuIEl0IHNob3VsZCBiZSBhIHZhbGlkIGd1aWQuXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiQ29udmVyc2F0aW9uVHJhbnNsYXRvcl9Db3JyZWxhdGlvbklkXCJdID0gNThdID0gXCJDb252ZXJzYXRpb25UcmFuc2xhdG9yX0NvcnJlbGF0aW9uSWRcIjtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNvbnZlcnNhdGlvbiB0b2tlbiB0byBiZSBzZW50IHRvIHRoZSBzcGVlY2ggc2VydmljZS4gVGhpcyBlbmFibGVzIHRoZVxuICAgICAqIHNlcnZpY2UgdG8gc2VydmljZSBjYWxsIGZyb20gdGhlIHNwZWVjaCBzZXJ2aWNlIHRvIHRoZSBDb252ZXJzYXRpb24gVHJhbnNsYXRvciBzZXJ2aWNlIGZvciByZWxheWluZ1xuICAgICAqIHJlY29nbml0aW9ucy4gRm9yIGludGVybmFsIHVzZS5cbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJDb252ZXJzYXRpb25UcmFuc2xhdG9yX1Rva2VuXCJdID0gNTldID0gXCJDb252ZXJzYXRpb25UcmFuc2xhdG9yX1Rva2VuXCI7XG4gICAgLyoqXG4gICAgICogVGhlIHJlZmVyZW5jZSB0ZXh0IG9mIHRoZSBhdWRpbyBmb3IgcHJvbnVuY2lhdGlvbiBldmFsdWF0aW9uLlxuICAgICAqIEZvciB0aGlzIGFuZCB0aGUgZm9sbG93aW5nIHByb251bmNpYXRpb24gYXNzZXNzbWVudCBwYXJhbWV0ZXJzLCBzZWVcbiAgICAgKiBodHRwczovL2RvY3MubWljcm9zb2Z0LmNvbS9henVyZS9jb2duaXRpdmUtc2VydmljZXMvc3BlZWNoLXNlcnZpY2UvcmVzdC1zcGVlY2gtdG8tdGV4dCNwcm9udW5jaWF0aW9uLWFzc2Vzc21lbnQtcGFyYW1ldGVycyBmb3IgZGV0YWlscy5cbiAgICAgKiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgeW91IHNob3VsZG4ndCBoYXZlIHRvIHVzZSB0aGlzIHByb3BlcnR5IGRpcmVjdGx5LlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xNS4wXG4gICAgICovXG4gICAgUHJvcGVydHlJZFtQcm9wZXJ0eUlkW1wiUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfUmVmZXJlbmNlVGV4dFwiXSA9IDYwXSA9IFwiUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfUmVmZXJlbmNlVGV4dFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBwb2ludCBzeXN0ZW0gZm9yIHByb251bmNpYXRpb24gc2NvcmUgY2FsaWJyYXRpb24gKEZpdmVQb2ludCBvciBIdW5kcmVkTWFyaykuXG4gICAgICogVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIHlvdSBzaG91bGRuJ3QgaGF2ZSB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTUuMFxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlByb251bmNpYXRpb25Bc3Nlc3NtZW50X0dyYWRpbmdTeXN0ZW1cIl0gPSA2MV0gPSBcIlByb251bmNpYXRpb25Bc3Nlc3NtZW50X0dyYWRpbmdTeXN0ZW1cIjtcbiAgICAvKipcbiAgICAgKiBUaGUgcHJvbnVuY2lhdGlvbiBldmFsdWF0aW9uIGdyYW51bGFyaXR5IChQaG9uZW1lLCBXb3JkLCBvciBGdWxsVGV4dCkuXG4gICAgICogVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIHlvdSBzaG91bGRuJ3QgaGF2ZSB0byB1c2UgdGhpcyBwcm9wZXJ0eSBkaXJlY3RseS5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTUuMFxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlByb251bmNpYXRpb25Bc3Nlc3NtZW50X0dyYW51bGFyaXR5XCJdID0gNjJdID0gXCJQcm9udW5jaWF0aW9uQXNzZXNzbWVudF9HcmFudWxhcml0eVwiO1xuICAgIC8qKlxuICAgICAqIERlZmluZXMgaWYgZW5hYmxlIG1pc2N1ZSBjYWxjdWxhdGlvbi5cbiAgICAgKiBXaXRoIHRoaXMgZW5hYmxlZCwgdGhlIHByb25vdW5jZWQgd29yZHMgd2lsbCBiZSBjb21wYXJlZCB0byB0aGUgcmVmZXJlbmNlIHRleHQsXG4gICAgICogYW5kIHdpbGwgYmUgbWFya2VkIHdpdGggb21pc3Npb24vaW5zZXJ0aW9uIGJhc2VkIG9uIHRoZSBjb21wYXJpc29uLiBUaGUgZGVmYXVsdCBzZXR0aW5nIGlzIEZhbHNlLlxuICAgICAqIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjE1LjBcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJQcm9udW5jaWF0aW9uQXNzZXNzbWVudF9FbmFibGVNaXNjdWVcIl0gPSA2M10gPSBcIlByb251bmNpYXRpb25Bc3Nlc3NtZW50X0VuYWJsZU1pc2N1ZVwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBqc29uIHN0cmluZyBvZiBwcm9udW5jaWF0aW9uIGFzc2Vzc21lbnQgcGFyYW1ldGVyc1xuICAgICAqIFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCB5b3Ugc2hvdWxkbid0IGhhdmUgdG8gdXNlIHRoaXMgcHJvcGVydHkgZGlyZWN0bHkuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjE1LjBcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJQcm9udW5jaWF0aW9uQXNzZXNzbWVudF9Kc29uXCJdID0gNjRdID0gXCJQcm9udW5jaWF0aW9uQXNzZXNzbWVudF9Kc29uXCI7XG4gICAgLyoqXG4gICAgICogUHJvbnVuY2lhdGlvbiBhc3Nlc3NtZW50IHBhcmFtZXRlcnMuXG4gICAgICogVGhpcyBwcm9wZXJ0eSBpcyBpbnRlbmRlZCB0byBiZSByZWFkLW9ubHkuIFRoZSBTREsgaXMgdXNpbmcgaXQgaW50ZXJuYWxseS5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTUuMFxuICAgICAqL1xuICAgIFByb3BlcnR5SWRbUHJvcGVydHlJZFtcIlByb251bmNpYXRpb25Bc3Nlc3NtZW50X1BhcmFtc1wiXSA9IDY1XSA9IFwiUHJvbnVuY2lhdGlvbkFzc2Vzc21lbnRfUGFyYW1zXCI7XG4gICAgLyoqXG4gICAgICogVmVyc2lvbiBvZiBTcGVha2VyIFJlY29nbml0aW9uIEFQSSB0byB1c2UuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjE4LjBcbiAgICAgKi9cbiAgICBQcm9wZXJ0eUlkW1Byb3BlcnR5SWRbXCJTcGVha2VyUmVjb2duaXRpb25fQXBpX1ZlcnNpb25cIl0gPSA2Nl0gPSBcIlNwZWFrZXJSZWNvZ25pdGlvbl9BcGlfVmVyc2lvblwiO1xufSkoUHJvcGVydHlJZCB8fCAoUHJvcGVydHlJZCA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb3BlcnR5SWQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFNlc3Npb25FdmVudEFyZ3MgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIERlZmluZXMgcGF5bG9hZCBmb3Igc2Vzc2lvbiBldmVudHMgbGlrZSBTcGVlY2ggU3RhcnQvRW5kIERldGVjdGVkXG4gKiBAY2xhc3NcbiAqL1xuZXhwb3J0IGNsYXNzIFJlY29nbml0aW9uRXZlbnRBcmdzIGV4dGVuZHMgU2Vzc2lvbkV2ZW50QXJncyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2Vzc2lvbklkIC0gVGhlIHNlc3Npb24gaWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iob2Zmc2V0LCBzZXNzaW9uSWQpIHtcbiAgICAgICAgc3VwZXIoc2Vzc2lvbklkKTtcbiAgICAgICAgdGhpcy5wcml2T2Zmc2V0ID0gb2Zmc2V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRzIHRoZSBtZXNzYWdlIG9mZnNldFxuICAgICAqIEBtZW1iZXIgUmVjb2duaXRpb25FdmVudEFyZ3MucHJvdG90eXBlLm9mZnNldFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXQgb2Zmc2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2T2Zmc2V0O1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVjb2duaXRpb25FdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogRGVmaW5lcyByZXN1bHQgb2Ygc3BlZWNoIHJlY29nbml0aW9uLlxuICogQGNsYXNzIFJlY29nbml0aW9uUmVzdWx0XG4gKi9cbmV4cG9ydCBjbGFzcyBSZWNvZ25pdGlvblJlc3VsdCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVzdWx0SWQgLSBUaGUgcmVzdWx0IGlkLlxuICAgICAqIEBwYXJhbSB7UmVzdWx0UmVhc29ufSByZWFzb24gLSBUaGUgcmVhc29uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gVGhlIHJlY29nbml6ZWQgdGV4dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb24gLSBUaGUgZHVyYXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCAtIFRoZSBvZmZzZXQgaW50byB0aGUgc3RyZWFtLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZSAtIFByaW1hcnkgTGFuZ3VhZ2UgZGV0ZWN0ZWQsIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2UgLSBQcmltYXJ5IExhbmd1YWdlIGNvbmZpZGVuY2UgKFwiVW5rbm93bixcIiBcIkxvdyxcIiBcIk1lZGl1bSxcIiBcIkhpZ2hcIi4uLiksIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvckRldGFpbHMgLSBFcnJvciBkZXRhaWxzLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ganNvbiAtIEFkZGl0aW9uYWwgSnNvbiwgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtQcm9wZXJ0eUNvbGxlY3Rpb259IHByb3BlcnRpZXMgLSBBZGRpdGlvbmFsIHByb3BlcnRpZXMsIGlmIHByb3ZpZGVkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlc3VsdElkLCByZWFzb24sIHRleHQsIGR1cmF0aW9uLCBvZmZzZXQsIGxhbmd1YWdlLCBsYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2UsIGVycm9yRGV0YWlscywganNvbiwgcHJvcGVydGllcykge1xuICAgICAgICB0aGlzLnByaXZSZXN1bHRJZCA9IHJlc3VsdElkO1xuICAgICAgICB0aGlzLnByaXZSZWFzb24gPSByZWFzb247XG4gICAgICAgIHRoaXMucHJpdlRleHQgPSB0ZXh0O1xuICAgICAgICB0aGlzLnByaXZEdXJhdGlvbiA9IGR1cmF0aW9uO1xuICAgICAgICB0aGlzLnByaXZPZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIHRoaXMucHJpdkxhbmd1YWdlID0gbGFuZ3VhZ2U7XG4gICAgICAgIHRoaXMucHJpdkxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSA9IGxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZTtcbiAgICAgICAgdGhpcy5wcml2RXJyb3JEZXRhaWxzID0gZXJyb3JEZXRhaWxzO1xuICAgICAgICB0aGlzLnByaXZKc29uID0ganNvbjtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IHByb3BlcnRpZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgcmVzdWx0IGlkZW50aWZpZXIuXG4gICAgICogQG1lbWJlciBSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUucmVzdWx0SWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gU3BlY2lmaWVzIHRoZSByZXN1bHQgaWRlbnRpZmllci5cbiAgICAgKi9cbiAgICBnZXQgcmVzdWx0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN1bHRJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHN0YXR1cyBvZiB0aGUgcmVzdWx0LlxuICAgICAqIEBtZW1iZXIgUmVjb2duaXRpb25SZXN1bHQucHJvdG90eXBlLnJlYXNvblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7UmVzdWx0UmVhc29ufSBTcGVjaWZpZXMgc3RhdHVzIG9mIHRoZSByZXN1bHQuXG4gICAgICovXG4gICAgZ2V0IHJlYXNvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlYXNvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJlc2VudHMgdGhlIHJlY29nbml6ZWQgdGV4dCBpbiB0aGUgcmVzdWx0LlxuICAgICAqIEBtZW1iZXIgUmVjb2duaXRpb25SZXN1bHQucHJvdG90eXBlLnRleHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gUHJlc2VudHMgdGhlIHJlY29nbml6ZWQgdGV4dCBpbiB0aGUgcmVzdWx0LlxuICAgICAqL1xuICAgIGdldCB0ZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VGV4dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRHVyYXRpb24gb2YgcmVjb2duaXplZCBzcGVlY2ggaW4gMTAwIG5hbm8gc2Vjb25kIGluY3JlbWVudHMuXG4gICAgICogQG1lbWJlciBSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUuZHVyYXRpb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge251bWJlcn0gRHVyYXRpb24gb2YgcmVjb2duaXplZCBzcGVlY2ggaW4gMTAwIG5hbm8gc2Vjb25kIGluY3JlbWVudHMuXG4gICAgICovXG4gICAgZ2V0IGR1cmF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RHVyYXRpb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9mZnNldCBvZiByZWNvZ25pemVkIHNwZWVjaCBpbiAxMDAgbmFubyBzZWNvbmQgaW5jcmVtZW50cy5cbiAgICAgKiBAbWVtYmVyIFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZS5vZmZzZXRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge251bWJlcn0gT2Zmc2V0IG9mIHJlY29nbml6ZWQgc3BlZWNoIGluIDEwMCBuYW5vIHNlY29uZCBpbmNyZW1lbnRzLlxuICAgICAqL1xuICAgIGdldCBvZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZPZmZzZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByaW1hcnkgTGFuZ3VhZ2UgZGV0ZWN0ZWQuXG4gICAgICogQG1lbWJlciBSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUubGFuZ3VhZ2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gbGFuZ3VhZ2UgZGV0ZWN0ZWQuXG4gICAgICovXG4gICAgZ2V0IGxhbmd1YWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TGFuZ3VhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByaW1hcnkgTGFuZ3VhZ2UgZGV0ZWN0aW9uIGNvbmZpZGVuY2UgKFVua25vd24sIExvdywgTWVkaXVtLCBIaWdoKS5cbiAgICAgKiBAbWVtYmVyIFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZS5sYW5ndWFnZURldGVjdGlvbkNvbmZpZGVuY2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gZGV0ZWN0aW9uIGNvbmZpZGVuY2Ugc3RyZW5ndGguXG4gICAgICovXG4gICAgZ2V0IGxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW4gY2FzZSBvZiBhbiB1bnN1Y2Nlc3NmdWwgcmVjb2duaXRpb24sIHByb3ZpZGVzIGRldGFpbHMgb2YgdGhlIG9jY3VycmVkIGVycm9yLlxuICAgICAqIEBtZW1iZXIgUmVjb2duaXRpb25SZXN1bHQucHJvdG90eXBlLmVycm9yRGV0YWlsc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBhIGJyaWVmIGRlc2NyaXB0aW9uIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIGdldCBlcnJvckRldGFpbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckRldGFpbHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIGNvbnRhaW5pbmcgSnNvbiBzZXJpYWxpemVkIHJlY29nbml0aW9uIHJlc3VsdCBhcyBpdCB3YXMgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmljZS5cbiAgICAgKiBAbWVtYmVyIFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZS5qc29uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBKc29uIHNlcmlhbGl6ZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJlc3VsdC5cbiAgICAgKi9cbiAgICBnZXQganNvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkpzb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgcHJvcGVydGllcyBleHBvc2VkIGluIHRoZSByZXN1bHQuXG4gICAgICogQG1lbWJlciBSZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUucHJvcGVydGllc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7UHJvcGVydHlDb2xsZWN0aW9ufSBUaGUgc2V0IG9mIHByb3BlcnRpZXMgZXhwb3NlZCBpbiB0aGUgcmVzdWx0LlxuICAgICAqL1xuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcztcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlY29nbml0aW9uUmVzdWx0LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IENvZ25pdGl2ZVN1YnNjcmlwdGlvbktleUF1dGhlbnRpY2F0aW9uLCBDb2duaXRpdmVUb2tlbkF1dGhlbnRpY2F0aW9uLCBDb250ZXh0LCBPUywgU2VydmljZVJlY29nbml6ZXJCYXNlLCBTcGVlY2hTZXJ2aWNlQ29uZmlnLCB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IERlZmVycmVkLCBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzIH0gZnJvbSBcIi4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IEF1ZGlvQ29uZmlnLCBQcm9wZXJ0eUlkLCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogRGVmaW5lcyB0aGUgYmFzZSBjbGFzcyBSZWNvZ25pemVyIHdoaWNoIG1haW5seSBjb250YWlucyBjb21tb24gZXZlbnQgaGFuZGxlcnMuXG4gKiBAY2xhc3MgUmVjb2duaXplclxuICovXG5leHBvcnQgY2xhc3MgUmVjb2duaXplciB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgYSBSZWNvZ25pemVyXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtBdWRpb0NvbmZpZ30gYXVkaW9JbnB1dCAtIEFuIG9wdGlvbmFsIGF1ZGlvIGlucHV0IHN0cmVhbSBhc3NvY2lhdGVkIHdpdGggdGhlIHJlY29nbml6ZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhdWRpb0NvbmZpZywgcHJvcGVydGllcywgY29ubmVjdGlvbkZhY3RvcnkpIHtcbiAgICAgICAgdGhpcy5hdWRpb0NvbmZpZyA9IChhdWRpb0NvbmZpZyAhPT0gdW5kZWZpbmVkKSA/IGF1ZGlvQ29uZmlnIDogQXVkaW9Db25maWcuZnJvbURlZmF1bHRNaWNyb3Bob25lSW5wdXQoKTtcbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IHByb3BlcnRpZXMuY2xvbmUoKTtcbiAgICAgICAgdGhpcy5wcml2Q29ubmVjdGlvbkZhY3RvcnkgPSBjb25uZWN0aW9uRmFjdG9yeTtcbiAgICAgICAgdGhpcy5pbXBsQ29tbW9uUmVjb2duaXplclNldHVwKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc3Bvc2Ugb2YgYXNzb2NpYXRlZCByZXNvdXJjZXMuXG4gICAgICogQG1lbWJlciBSZWNvZ25pemVyLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZShjYiwgZXJyb3JDYikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkKTtcbiAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyh0aGlzLmRpc3Bvc2UodHJ1ZSksIGNiLCBlcnJvckNiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQEludGVybmFsXG4gICAgICogSW50ZXJuYWwgZGF0YSBtZW1iZXIgdG8gc3VwcG9ydCBmcm9tUmVjb2duaXplciogcGF0dGVybiBtZXRob2RzIG9uIG90aGVyIGNsYXNzZXMuXG4gICAgICogRG8gbm90IHVzZSBleHRlcm5hbGx5LCBvYmplY3QgcmV0dXJuZWQgd2lsbCBjaGFuZ2Ugd2l0aG91dCB3YXJuaW5nIG9yIG5vdGljZS5cbiAgICAgKi9cbiAgICBnZXQgaW50ZXJuYWxEYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVjbztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcGVyZm9ybXMgY2xlYW51cCBvZiByZXNvdXJjZXMuXG4gICAgICogVGhlIEJvb2xlYW4gcGFyYW1ldGVyIGRpc3Bvc2luZyBpbmRpY2F0ZXMgd2hldGhlciB0aGUgbWV0aG9kIGlzIGNhbGxlZFxuICAgICAqIGZyb20gRGlzcG9zZSAoaWYgZGlzcG9zaW5nIGlzIHRydWUpIG9yIGZyb20gdGhlIGZpbmFsaXplciAoaWYgZGlzcG9zaW5nIGlzIGZhbHNlKS5cbiAgICAgKiBEZXJpdmVkIGNsYXNzZXMgc2hvdWxkIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGRpc3Bvc2UgcmVzb3VyY2UgaWYgbmVlZGVkLlxuICAgICAqIEBtZW1iZXIgUmVjb2duaXplci5wcm90b3R5cGUuZGlzcG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGRpc3Bvc2luZyAtIEZsYWcgdG8gcmVxdWVzdCBkaXNwb3NhbC5cbiAgICAgKi9cbiAgICBkaXNwb3NlKGRpc3Bvc2luZykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkRpc3Bvc2VkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcml2RGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGRpc3Bvc2luZykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZSZWNvKSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdlJlY28uYXVkaW9Tb3VyY2UudHVybk9mZigpO1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZSZWNvLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSB0ZWxlbWV0cnkgc2V0dGluZy5cbiAgICAgKiBAbWVtYmVyIFJlY29nbml6ZXIucHJvdG90eXBlLnRlbGVtZXRyeUVuYWJsZWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgdGVsZW1ldHJ5IGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IHRlbGVtZXRyeUVuYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiBTZXJ2aWNlUmVjb2duaXplckJhc2UudGVsZW1ldHJ5RGF0YUVuYWJsZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGdsb2JhbGx5IGVuYWJsZXMgb3IgZGlzYWJsZXMgdGVsZW1ldHJ5LlxuICAgICAqIEBtZW1iZXIgUmVjb2duaXplci5wcm90b3R5cGUuZW5hYmxlVGVsZW1ldHJ5XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBlbmFibGVkIC0gR2xvYmFsIHNldHRpbmcgZm9yIHRlbGVtZXRyeSBjb2xsZWN0aW9uLlxuICAgICAqIElmIHNldCB0byB0cnVlLCB0ZWxlbWV0cnkgaW5mb3JtYXRpb24gbGlrZSBtaWNyb3Bob25lIGVycm9ycyxcbiAgICAgKiByZWNvZ25pdGlvbiBlcnJvcnMgYXJlIGNvbGxlY3RlZCBhbmQgc2VudCB0byBNaWNyb3NvZnQuXG4gICAgICogSWYgc2V0IHRvIGZhbHNlLCBubyB0ZWxlbWV0cnkgaXMgc2VudCB0byBNaWNyb3NvZnQuXG4gICAgICovXG4gICAgc3RhdGljIGVuYWJsZVRlbGVtZXRyeShlbmFibGVkKSB7XG4gICAgICAgIFNlcnZpY2VSZWNvZ25pemVyQmFzZS50ZWxlbWV0cnlEYXRhRW5hYmxlZCA9IGVuYWJsZWQ7XG4gICAgfVxuICAgIC8vIERvZXMgdGhlIGdlbmVyaWMgcmVjb2duaXplciBzZXR1cCB0aGF0IGlzIGNvbW1vbiBhY3Jvc3MgYWxsIHJlY29nbml6ZXIgdHlwZXMuXG4gICAgaW1wbENvbW1vblJlY29nbml6ZXJTZXR1cCgpIHtcbiAgICAgICAgbGV0IG9zUGxhdGZvcm0gPSAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikgPyBcIkJyb3dzZXJcIiA6IFwiTm9kZVwiO1xuICAgICAgICBsZXQgb3NOYW1lID0gXCJ1bmtub3duXCI7XG4gICAgICAgIGxldCBvc1ZlcnNpb24gPSBcInVua25vd25cIjtcbiAgICAgICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIG9zUGxhdGZvcm0gPSBvc1BsYXRmb3JtICsgXCIvXCIgKyBuYXZpZ2F0b3IucGxhdGZvcm07XG4gICAgICAgICAgICBvc05hbWUgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICAgICAgICAgICAgb3NWZXJzaW9uID0gbmF2aWdhdG9yLmFwcFZlcnNpb247XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVjb2duaXplckNvbmZpZyA9IHRoaXMuY3JlYXRlUmVjb2duaXplckNvbmZpZyhuZXcgU3BlZWNoU2VydmljZUNvbmZpZyhuZXcgQ29udGV4dChuZXcgT1Mob3NQbGF0Zm9ybSwgb3NOYW1lLCBvc1ZlcnNpb24pKSkpO1xuICAgICAgICB0aGlzLnByaXZSZWNvID0gdGhpcy5jcmVhdGVTZXJ2aWNlUmVjb2duaXplcihSZWNvZ25pemVyLmdldEF1dGhGcm9tUHJvcGVydGllcyh0aGlzLnByaXZQcm9wZXJ0aWVzKSwgdGhpcy5wcml2Q29ubmVjdGlvbkZhY3RvcnksIHRoaXMuYXVkaW9Db25maWcsIHJlY29nbml6ZXJDb25maWcpO1xuICAgIH1cbiAgICByZWNvZ25pemVPbmNlQXN5bmNJbXBsKHJlY29nbml0aW9uTW9kZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZCk7XG4gICAgICAgICAgICBjb25zdCByZXQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMuaW1wbFJlY29nbml6ZXJTdG9wKCk7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZSZWNvLnJlY29nbml6ZShyZWNvZ25pdGlvbk1vZGUsIHJldC5yZXNvbHZlLCByZXQucmVqZWN0KTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIHJldC5wcm9taXNlO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGFydENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jSW1wbChyZWNvZ25pdGlvbk1vZGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWQpO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdlJlY28ucmVjb2duaXplKHJlY29nbml0aW9uTW9kZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jSW1wbCgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWQpO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGltcGxSZWNvZ25pemVyU3RvcCgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZSZWNvKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2UmVjby5zdG9wUmVjb2duaXppbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRBdXRoRnJvbVByb3BlcnRpZXMocHJvcGVydGllcykge1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25LZXkgPSBwcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5LCB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBhdXRoZW50aWNhdGlvbiA9IChzdWJzY3JpcHRpb25LZXkgJiYgc3Vic2NyaXB0aW9uS2V5ICE9PSBcIlwiKSA/XG4gICAgICAgICAgICBuZXcgQ29nbml0aXZlU3Vic2NyaXB0aW9uS2V5QXV0aGVudGljYXRpb24oc3Vic2NyaXB0aW9uS2V5KSA6XG4gICAgICAgICAgICBuZXcgQ29nbml0aXZlVG9rZW5BdXRoZW50aWNhdGlvbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXV0aG9yaXphdGlvblRva2VuID0gcHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYXV0aG9yaXphdGlvblRva2VuKTtcbiAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdXRob3JpemF0aW9uVG9rZW4gPSBwcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4sIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShhdXRob3JpemF0aW9uVG9rZW4pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhdXRoZW50aWNhdGlvbjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlY29nbml6ZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogRGVmaW5lcyB0aGUgcG9zc2libGUgcmVhc29ucyBhIHJlY29nbml0aW9uIHJlc3VsdCBtaWdodCBiZSBnZW5lcmF0ZWQuXG4gKiBAY2xhc3MgUmVzdWx0UmVhc29uXG4gKi9cbmV4cG9ydCB2YXIgUmVzdWx0UmVhc29uO1xuKGZ1bmN0aW9uIChSZXN1bHRSZWFzb24pIHtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgc3BlZWNoIGNvdWxkIG5vdCBiZSByZWNvZ25pemVkLiBNb3JlIGRldGFpbHNcbiAgICAgKiBjYW4gYmUgZm91bmQgaW4gdGhlIE5vTWF0Y2hEZXRhaWxzIG9iamVjdC5cbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5Ob01hdGNoXG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIk5vTWF0Y2hcIl0gPSAwXSA9IFwiTm9NYXRjaFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSByZWNvZ25pdGlvbiB3YXMgY2FuY2VsZWQuIE1vcmUgZGV0YWlsc1xuICAgICAqIGNhbiBiZSBmb3VuZCB1c2luZyB0aGUgQ2FuY2VsbGF0aW9uRGV0YWlscyBvYmplY3QuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uQ2FuY2VsZWRcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiQ2FuY2VsZWRcIl0gPSAxXSA9IFwiQ2FuY2VsZWRcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIHNwZWVjaCByZXN1bHQgY29udGFpbnMgaHlwb3RoZXNpcyB0ZXh0LlxuICAgICAqIEBtZW1iZXIgUmVzdWx0UmVhc29uLlJlY29nbml6ZWRTcGVlY2hcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiUmVjb2duaXppbmdTcGVlY2hcIl0gPSAyXSA9IFwiUmVjb2duaXppbmdTcGVlY2hcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIHNwZWVjaCByZXN1bHQgY29udGFpbnMgZmluYWwgdGV4dCB0aGF0IGhhcyBiZWVuIHJlY29nbml6ZWQuXG4gICAgICogU3BlZWNoIFJlY29nbml0aW9uIGlzIG5vdyBjb21wbGV0ZSBmb3IgdGhpcyBwaHJhc2UuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uUmVjb2duaXplZFNwZWVjaFxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJSZWNvZ25pemVkU3BlZWNoXCJdID0gM10gPSBcIlJlY29nbml6ZWRTcGVlY2hcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIHNwZWVjaCByZXN1bHQgY29udGFpbnMgYSBmaW5hbGl6ZWQgYWNjZXB0YW5jZSBvZiBhIHByb3ZpZGVkIGtleXdvcmQuXG4gICAgICogU3BlZWNoIHJlY29nbml0aW9uIHdpbGwgY29udGludWUgdW5sZXNzIG90aGVyd2lzZSBjb25maWd1cmVkLlxuICAgICAqIEBtZW1iZXIgUmVzdWx0UmVhc29uLlJlY29nbml6ZWRLZXl3b3JkXG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIlJlY29nbml6ZWRLZXl3b3JkXCJdID0gNF0gPSBcIlJlY29nbml6ZWRLZXl3b3JkXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoZSBpbnRlbnQgcmVzdWx0IGNvbnRhaW5zIGh5cG90aGVzaXMgdGV4dCBhbmQgaW50ZW50LlxuICAgICAqIEBtZW1iZXIgUmVzdWx0UmVhc29uLlJlY29nbml6aW5nSW50ZW50XG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIlJlY29nbml6aW5nSW50ZW50XCJdID0gNV0gPSBcIlJlY29nbml6aW5nSW50ZW50XCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoZSBpbnRlbnQgcmVzdWx0IGNvbnRhaW5zIGZpbmFsIHRleHQgYW5kIGludGVudC5cbiAgICAgKiBTcGVlY2ggUmVjb2duaXRpb24gYW5kIEludGVudCBkZXRlcm1pbmF0aW9uIGFyZSBub3cgY29tcGxldGUgZm9yIHRoaXMgcGhyYXNlLlxuICAgICAqIEBtZW1iZXIgUmVzdWx0UmVhc29uLlJlY29nbml6ZWRJbnRlbnRcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiUmVjb2duaXplZEludGVudFwiXSA9IDZdID0gXCJSZWNvZ25pemVkSW50ZW50XCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoZSB0cmFuc2xhdGlvbiByZXN1bHQgY29udGFpbnMgaHlwb3RoZXNpcyB0ZXh0IGFuZCBpdHMgdHJhbnNsYXRpb24ocykuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uVHJhbnNsYXRpbmdTcGVlY2hcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiVHJhbnNsYXRpbmdTcGVlY2hcIl0gPSA3XSA9IFwiVHJhbnNsYXRpbmdTcGVlY2hcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIHRyYW5zbGF0aW9uIHJlc3VsdCBjb250YWlucyBmaW5hbCB0ZXh0IGFuZCBjb3JyZXNwb25kaW5nIHRyYW5zbGF0aW9uKHMpLlxuICAgICAqIFNwZWVjaCBSZWNvZ25pdGlvbiBhbmQgVHJhbnNsYXRpb24gYXJlIG5vdyBjb21wbGV0ZSBmb3IgdGhpcyBwaHJhc2UuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uVHJhbnNsYXRlZFNwZWVjaFxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJUcmFuc2xhdGVkU3BlZWNoXCJdID0gOF0gPSBcIlRyYW5zbGF0ZWRTcGVlY2hcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIHN5bnRoZXNpemVkIGF1ZGlvIHJlc3VsdCBjb250YWlucyBhIG5vbi16ZXJvIGFtb3VudCBvZiBhdWRpbyBkYXRhXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uU3ludGhlc2l6aW5nQXVkaW9cbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiU3ludGhlc2l6aW5nQXVkaW9cIl0gPSA5XSA9IFwiU3ludGhlc2l6aW5nQXVkaW9cIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIHN5bnRoZXNpemVkIGF1ZGlvIGlzIG5vdyBjb21wbGV0ZSBmb3IgdGhpcyBwaHJhc2UuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uU3ludGhlc2l6aW5nQXVkaW9Db21wbGV0ZWRcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiU3ludGhlc2l6aW5nQXVkaW9Db21wbGV0ZWRcIl0gPSAxMF0gPSBcIlN5bnRoZXNpemluZ0F1ZGlvQ29tcGxldGVkXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoZSBzcGVlY2ggc3ludGhlc2lzIGlzIG5vdyBzdGFydGVkXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uU3ludGhlc2l6aW5nQXVkaW9TdGFydGVkXG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIlN5bnRoZXNpemluZ0F1ZGlvU3RhcnRlZFwiXSA9IDExXSA9IFwiU3ludGhlc2l6aW5nQXVkaW9TdGFydGVkXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoZSB2b2ljZSBwcm9maWxlIGlzIGJlaW5nIGVucm9sbGVkIGFuZCBjdXN0b21lcnMgbmVlZCB0byBzZW5kIG1vcmUgYXVkaW8gdG8gY3JlYXRlIGEgdm9pY2UgcHJvZmlsZS5cbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5FbnJvbGxpbmdWb2ljZVByb2ZpbGVcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiRW5yb2xsaW5nVm9pY2VQcm9maWxlXCJdID0gMTJdID0gXCJFbnJvbGxpbmdWb2ljZVByb2ZpbGVcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhlIHZvaWNlIHByb2ZpbGUgaGFzIGJlZW4gZW5yb2xsZWQuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uRW5yb2xsZWRWb2ljZVByb2ZpbGVcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiRW5yb2xsZWRWb2ljZVByb2ZpbGVcIl0gPSAxM10gPSBcIkVucm9sbGVkVm9pY2VQcm9maWxlXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHN1Y2Nlc3NmdWwgaWRlbnRpZmljYXRpb24gb2Ygc29tZSBzcGVha2Vycy5cbiAgICAgKiBAbWVtYmVyIFJlc3VsdFJlYXNvbi5SZWNvZ25pemVkU3BlYWtlcnNcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiUmVjb2duaXplZFNwZWFrZXJzXCJdID0gMTRdID0gXCJSZWNvZ25pemVkU3BlYWtlcnNcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgc3VjY2Vzc2Z1bGx5IHZlcmlmaWVkIG9uZSBzcGVha2VyLlxuICAgICAqIEBtZW1iZXIgUmVzdWx0UmVhc29uLlJlY29nbml6ZWRTcGVha2VyXG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIlJlY29nbml6ZWRTcGVha2VyXCJdID0gMTVdID0gXCJSZWNvZ25pemVkU3BlYWtlclwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyBhIHZvaWNlIHByb2ZpbGUgaGFzIGJlZW4gcmVzZXQgc3VjY2Vzc2Z1bGx5LlxuICAgICAqIEBtZW1iZXIgUmVzdWx0UmVhc29uLlJlc2V0Vm9pY2VQcm9maWxlXG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIlJlc2V0Vm9pY2VQcm9maWxlXCJdID0gMTZdID0gXCJSZXNldFZvaWNlUHJvZmlsZVwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyBhIHZvaWNlIHByb2ZpbGUgaGFzIGJlZW4gZGVsZXRlZCBzdWNjZXNzZnVsbHkuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uRGVsZXRlZFZvaWNlUHJvZmlsZVxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJEZWxldGVkVm9pY2VQcm9maWxlXCJdID0gMTddID0gXCJEZWxldGVkVm9pY2VQcm9maWxlXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHN5bnRoZXNpcyB2b2ljZXMgbGlzdCBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgcmV0cmlldmVkLlxuICAgICAqIEBtZW1iZXIgUmVzdWx0UmVhc29uLlZvaWNlc0xpc3RSZXRyaWV2ZWRcbiAgICAgKi9cbiAgICBSZXN1bHRSZWFzb25bUmVzdWx0UmVhc29uW1wiVm9pY2VzTGlzdFJldHJpZXZlZFwiXSA9IDE4XSA9IFwiVm9pY2VzTGlzdFJldHJpZXZlZFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgdHJhbnNjcmlwdGlvbiByZXN1bHQgY29udGFpbnMgaHlwb3RoZXNpcyB0ZXh0IGFuZCBpdHMgdHJhbnNsYXRpb24ocykgZm9yXG4gICAgICogb3RoZXIgcGFydGljaXBhbnRzIGluIHRoZSBjb252ZXJzYXRpb24uXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uVHJhbnNsYXRpbmdQYXJ0aWNpcGFudFNwZWVjaFxuICAgICAqL1xuICAgIFJlc3VsdFJlYXNvbltSZXN1bHRSZWFzb25bXCJUcmFuc2xhdGluZ1BhcnRpY2lwYW50U3BlZWNoXCJdID0gMTldID0gXCJUcmFuc2xhdGluZ1BhcnRpY2lwYW50U3BlZWNoXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoZSB0cmFuc2NyaXB0aW9uIHJlc3VsdCBjb250YWlucyBmaW5hbCB0ZXh0IGFuZCBjb3JyZXNwb25kaW5nIHRyYW5zbGF0aW9uKHMpXG4gICAgICogZm9yIG90aGVyIHBhcnRpY2lwYW50cyBpbiB0aGUgY29udmVyc2F0aW9uLiBTcGVlY2ggUmVjb2duaXRpb24gYW5kIFRyYW5zbGF0aW9uIGFyZSBub3dcbiAgICAgKiBjb21wbGV0ZSBmb3IgdGhpcyBwaHJhc2UuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uVHJhbnNsYXRlZFBhcnRpY2lwYW50U3BlZWNoXG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIlRyYW5zbGF0ZWRQYXJ0aWNpcGFudFNwZWVjaFwiXSA9IDIwXSA9IFwiVHJhbnNsYXRlZFBhcnRpY2lwYW50U3BlZWNoXCI7XG4gICAgLyoqXG4gICAgICogPHN1bW1hcnk+XG4gICAgICogSW5kaWNhdGVzIHRoZSB0cmFuc2NyaXB0aW9uIHJlc3VsdCBjb250YWlucyB0aGUgaW5zdGFudCBtZXNzYWdlIGFuZCBjb3JyZXNwb25kaW5nXG4gICAgICogdHJhbnNsYXRpb24ocykuXG4gICAgICogQG1lbWJlciBSZXN1bHRSZWFzb24uVHJhbnNsYXRlZEluc3RhbnRNZXNzYWdlXG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIlRyYW5zbGF0ZWRJbnN0YW50TWVzc2FnZVwiXSA9IDIxXSA9IFwiVHJhbnNsYXRlZEluc3RhbnRNZXNzYWdlXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoZSB0cmFuc2NyaXB0aW9uIHJlc3VsdCBjb250YWlucyB0aGUgaW5zdGFudCBtZXNzYWdlIGZvciBvdGhlciBwYXJ0aWNpcGFudHNcbiAgICAgKiBpbiB0aGUgY29udmVyc2F0aW9uIGFuZCBjb3JyZXNwb25kaW5nIHRyYW5zbGF0aW9uKHMpLlxuICAgICAqIEBtZW1iZXIgUmVzdWx0UmVhc29uLlRyYW5zbGF0ZWRQYXJ0aWNpcGFudEluc3RhbnRNZXNzYWdlXG4gICAgICovXG4gICAgUmVzdWx0UmVhc29uW1Jlc3VsdFJlYXNvbltcIlRyYW5zbGF0ZWRQYXJ0aWNpcGFudEluc3RhbnRNZXNzYWdlXCJdID0gMjJdID0gXCJUcmFuc2xhdGVkUGFydGljaXBhbnRJbnN0YW50TWVzc2FnZVwiO1xufSkoUmVzdWx0UmVhc29uIHx8IChSZXN1bHRSZWFzb24gPSB7fSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZXN1bHRSZWFzb24uanMubWFwXG4iLCIvL1xuLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuIFNlZSBMSUNFTlNFLm1kIGZpbGUgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgZnVsbCBsaWNlbnNlIGluZm9ybWF0aW9uLlxuLy9cbmltcG9ydCB7IFNlc3Npb25FdmVudEFyZ3MgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIERlZmluZXMgcGF5bG9hZCBmb3IgYW55IFNlcnZpY2UgbWVzc2FnZSBldmVudFxuICogQWRkZWQgaW4gdmVyc2lvbiAxLjkuMFxuICovXG5leHBvcnQgY2xhc3MgU2VydmljZUV2ZW50QXJncyBleHRlbmRzIFNlc3Npb25FdmVudEFyZ3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGpzb24gLSBqc29uIHBheWxvYWQgb2YgdGhlIFVTUCBtZXNzYWdlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGpzb24sIG5hbWUsIHNlc3Npb25JZCkge1xuICAgICAgICBzdXBlcihzZXNzaW9uSWQpO1xuICAgICAgICB0aGlzLnByaXZKc29uUmVzdWx0ID0ganNvbjtcbiAgICAgICAgdGhpcy5wcml2RXZlbnROYW1lID0gbmFtZTtcbiAgICB9XG4gICAgZ2V0IGpzb25TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZKc29uUmVzdWx0O1xuICAgIH1cbiAgICBnZXQgZXZlbnROYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXZlbnROYW1lO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U2VydmljZUV2ZW50QXJncy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBEZWZpbmVzIGNoYW5uZWxzIHVzZWQgdG8gcGFzcyBwcm9wZXJ0eSBzZXR0aW5ncyB0byBzZXJ2aWNlLlxuICogQWRkZWQgaW4gdmVyc2lvbiAxLjcuMC5cbiAqL1xuZXhwb3J0IHZhciBTZXJ2aWNlUHJvcGVydHlDaGFubmVsO1xuKGZ1bmN0aW9uIChTZXJ2aWNlUHJvcGVydHlDaGFubmVsKSB7XG4gICAgLyoqXG4gICAgICogVXNlcyBVUkkgcXVlcnkgcGFyYW1ldGVyIHRvIHBhc3MgcHJvcGVydHkgc2V0dGluZ3MgdG8gc2VydmljZS5cbiAgICAgKi9cbiAgICBTZXJ2aWNlUHJvcGVydHlDaGFubmVsW1NlcnZpY2VQcm9wZXJ0eUNoYW5uZWxbXCJVcmlRdWVyeVBhcmFtZXRlclwiXSA9IDBdID0gXCJVcmlRdWVyeVBhcmFtZXRlclwiO1xufSkoU2VydmljZVByb3BlcnR5Q2hhbm5lbCB8fCAoU2VydmljZVByb3BlcnR5Q2hhbm5lbCA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNlcnZpY2VQcm9wZXJ0eUNoYW5uZWwuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogRGVmaW5lcyBjb250ZW50IGZvciBzZXNzaW9uIGV2ZW50cyBsaWtlIFNlc3Npb25TdGFydGVkL1N0b3BwZWQsIFNvdW5kU3RhcnRlZC9TdG9wcGVkLlxuICogQGNsYXNzIFNlc3Npb25FdmVudEFyZ3NcbiAqL1xuZXhwb3J0IGNsYXNzIFNlc3Npb25FdmVudEFyZ3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNlc3Npb25JZCAtIFRoZSBzZXNzaW9uIGlkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNlc3Npb25JZCkge1xuICAgICAgICB0aGlzLnByaXZTZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcHJlc2VudHMgdGhlIHNlc3Npb24gaWRlbnRpZmllci5cbiAgICAgKiBAbWVtYmVyIFNlc3Npb25FdmVudEFyZ3MucHJvdG90eXBlLnNlc3Npb25JZFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXByZXNlbnRzIHRoZSBzZXNzaW9uIGlkZW50aWZpZXIuXG4gICAgICovXG4gICAgZ2V0IHNlc3Npb25JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNlc3Npb25JZDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNlc3Npb25FdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuL0NvbnRyYWN0c1wiO1xuLyoqXG4gKiBTb3VyY2UgTGFuZ3VhZ2UgY29uZmlndXJhdGlvbi5cbiAqIEBjbGFzcyBTb3VyY2VMYW5ndWFnZUNvbmZpZ1xuICovXG5leHBvcnQgY2xhc3MgU291cmNlTGFuZ3VhZ2VDb25maWcge1xuICAgIGNvbnN0cnVjdG9yKGxhbmd1YWdlLCBlbmRwb2ludElkKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGxhbmd1YWdlLCBcImxhbmd1YWdlXCIpO1xuICAgICAgICB0aGlzLnByaXZMYW5ndWFnZSA9IGxhbmd1YWdlO1xuICAgICAgICB0aGlzLnByaXZFbmRwb2ludElkID0gZW5kcG9pbnRJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQG1lbWJlciBTb3VyY2VMYW5ndWFnZUNvbmZpZy5mcm9tTGFuZ3VhZ2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlIGxhbmd1YWdlIChlZy4gXCJlbi1VU1wiKSB2YWx1ZSBvZiBjb25maWcuXG4gICAgICogQHBhcmFtIHtzdHJpbmc/fSBlbmRwb2ludElkIGVuZHBvaW50SWQgb2YgbW9kZWwgYm91bmQgdG8gZ2l2ZW4gbGFuZ3VhZ2Ugb2YgY29uZmlnLlxuICAgICAqIEByZXR1cm4ge1NvdXJjZUxhbmd1YWdlQ29uZmlnfSBJbnN0YW5jZSBvZiBTb3VyY2VMYW5ndWFnZUNvbmZpZ1xuICAgICAqIEBzdW1tYXJ5IENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIFNvdXJjZUxhbmd1YWdlQ29uZmlnIHdpdGggdGhlIGdpdmVuIGxhbmd1YWdlIGFuZCBvcHRpb25hbCBlbmRwb2ludElkLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xMy4wLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tTGFuZ3VhZ2UobGFuZ3VhZ2UsIGVuZHBvaW50SWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3VyY2VMYW5ndWFnZUNvbmZpZyhsYW5ndWFnZSwgZW5kcG9pbnRJZCk7XG4gICAgfVxuICAgIGdldCBsYW5ndWFnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkxhbmd1YWdlO1xuICAgIH1cbiAgICBnZXQgZW5kcG9pbnRJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkVuZHBvaW50SWQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Tb3VyY2VMYW5ndWFnZUNvbmZpZy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBWb2ljZVByb2ZpbGVUeXBlLCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogRGVmaW5lcyBTcGVha2VySWRlbnRpZmljYXRpb25Nb2RlbCBjbGFzcyBmb3IgU3BlYWtlciBSZWNvZ25pdGlvblxuICogTW9kZWwgY29udGFpbnMgYSBzZXQgb2YgcHJvZmlsZXMgYWdhaW5zdCB3aGljaCB0byBpZGVudGlmeSBzcGVha2VyKHMpXG4gKiBAY2xhc3MgU3BlYWtlcklkZW50aWZpY2F0aW9uTW9kZWxcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWFrZXJJZGVudGlmaWNhdGlvbk1vZGVsIHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9maWxlcykge1xuICAgICAgICB0aGlzLnByaXZWb2ljZVByb2ZpbGVzID0gW107XG4gICAgICAgIHRoaXMucHJpdlByb2ZpbGVJZHMgPSBbXTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQocHJvZmlsZXMsIFwiVm9pY2VQcm9maWxlc1wiKTtcbiAgICAgICAgaWYgKHByb2ZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRW1wdHkgVm9pY2UgUHJvZmlsZXMgYXJyYXlcIik7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBwcm9maWxlIG9mIHByb2ZpbGVzKSB7XG4gICAgICAgICAgICBpZiAocHJvZmlsZS5wcm9maWxlVHlwZSAhPT0gVm9pY2VQcm9maWxlVHlwZS5UZXh0SW5kZXBlbmRlbnRJZGVudGlmaWNhdGlvbikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIklkZW50aWZpY2F0aW9uIG1vZGVsIGNhbiBvbmx5IGJlIGNyZWF0ZWQgZnJvbSBJZGVudGlmaWNhdGlvbiBwcm9maWxlOiBcIiArIHByb2ZpbGUucHJvZmlsZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJpdlZvaWNlUHJvZmlsZXMucHVzaChwcm9maWxlKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlByb2ZpbGVJZHMucHVzaChwcm9maWxlLnByb2ZpbGVJZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGZyb21Qcm9maWxlcyhwcm9maWxlcykge1xuICAgICAgICByZXR1cm4gbmV3IFNwZWFrZXJJZGVudGlmaWNhdGlvbk1vZGVsKHByb2ZpbGVzKTtcbiAgICB9XG4gICAgZ2V0IHZvaWNlUHJvZmlsZUlkcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb2ZpbGVJZHMuam9pbihcIixcIik7XG4gICAgfVxuICAgIGdldCBwcm9maWxlSWRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvZmlsZUlkcztcbiAgICB9XG4gICAgZ2V0IHNjZW5hcmlvKCkge1xuICAgICAgICByZXR1cm4gXCJUZXh0SW5kZXBlbmRlbnRJZGVudGlmaWNhdGlvblwiO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlYWtlcklkZW50aWZpY2F0aW9uTW9kZWwuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5pbXBvcnQgeyBDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25EZXRhaWxzQmFzZSwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBDYW5jZWxsYXRpb25SZWFzb24sIFByb3BlcnR5Q29sbGVjdGlvbiwgUHJvcGVydHlJZCwgUmVzdWx0UmVhc29uLCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbmV4cG9ydCB2YXIgU3BlYWtlclJlY29nbml0aW9uUmVzdWx0VHlwZTtcbihmdW5jdGlvbiAoU3BlYWtlclJlY29nbml0aW9uUmVzdWx0VHlwZSkge1xuICAgIFNwZWFrZXJSZWNvZ25pdGlvblJlc3VsdFR5cGVbU3BlYWtlclJlY29nbml0aW9uUmVzdWx0VHlwZVtcIlZlcmlmeVwiXSA9IDBdID0gXCJWZXJpZnlcIjtcbiAgICBTcGVha2VyUmVjb2duaXRpb25SZXN1bHRUeXBlW1NwZWFrZXJSZWNvZ25pdGlvblJlc3VsdFR5cGVbXCJJZGVudGlmeVwiXSA9IDFdID0gXCJJZGVudGlmeVwiO1xufSkoU3BlYWtlclJlY29nbml0aW9uUmVzdWx0VHlwZSB8fCAoU3BlYWtlclJlY29nbml0aW9uUmVzdWx0VHlwZSA9IHt9KSk7XG4vKipcbiAqIE91dHB1dCBmb3JtYXRcbiAqIEBjbGFzcyBTcGVha2VyUmVjb2duaXRpb25SZXN1bHRcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWFrZXJSZWNvZ25pdGlvblJlc3VsdCB7XG4gICAgY29uc3RydWN0b3IocmVzcG9uc2UsIHJlc3VsdFJlYXNvbiA9IFJlc3VsdFJlYXNvbi5SZWNvZ25pemVkU3BlYWtlciwgY2FuY2VsbGF0aW9uRXJyb3JDb2RlID0gQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLk5vRXJyb3IsIGVycm9yRGV0YWlscyA9IFwiXCIpIHtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgY29uc3QgcmVzdWx0VHlwZSA9IHJlc3BvbnNlLnNjZW5hcmlvID09PSBcIlRleHRJbmRlcGVuZGVudElkZW50aWZpY2F0aW9uXCIgPyBTcGVha2VyUmVjb2duaXRpb25SZXN1bHRUeXBlLklkZW50aWZ5IDogU3BlYWtlclJlY29nbml0aW9uUmVzdWx0VHlwZS5WZXJpZnk7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlc3VsdFJlYXNvbjtcbiAgICAgICAgaWYgKHRoaXMucHJpdlJlYXNvbiAhPT0gUmVzdWx0UmVhc29uLkNhbmNlbGVkKSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0VHlwZSA9PT0gU3BlYWtlclJlY29nbml0aW9uUmVzdWx0VHlwZS5JZGVudGlmeSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlByb2ZpbGVJZCA9IHJlc3BvbnNlLmlkZW50aWZpY2F0aW9uUmVzdWx0LmlkZW50aWZpZWRQcm9maWxlLnByb2ZpbGVJZDtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTY29yZSA9IHJlc3BvbnNlLmlkZW50aWZpY2F0aW9uUmVzdWx0LmlkZW50aWZpZWRQcm9maWxlLnNjb3JlO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IFJlc3VsdFJlYXNvbi5SZWNvZ25pemVkU3BlYWtlcnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTY29yZSA9IHJlc3BvbnNlLnZlcmlmaWNhdGlvblJlc3VsdC5zY29yZTtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UudmVyaWZpY2F0aW9uUmVzdWx0LnJlY29nbml0aW9uUmVzdWx0LnRvTG93ZXJDYXNlKCkgIT09IFwiYWNjZXB0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UmVhc29uID0gUmVzdWx0UmVhc29uLk5vTWF0Y2g7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS52ZXJpZmljYXRpb25SZXN1bHQucHJvZmlsZUlkICE9PSB1bmRlZmluZWQgJiYgcmVzcG9uc2UudmVyaWZpY2F0aW9uUmVzdWx0LnByb2ZpbGVJZCAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZQcm9maWxlSWQgPSByZXNwb25zZS52ZXJpZmljYXRpb25SZXN1bHQucHJvZmlsZUlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucHJpdkVycm9yRGV0YWlscyA9IGVycm9yRGV0YWlscztcbiAgICAgICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBDYW5jZWxsYXRpb25FcnJvckNvZGVbY2FuY2VsbGF0aW9uRXJyb3JDb2RlXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Kc29uUmVzdWx0LCBKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpO1xuICAgIH1cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxuICAgIGdldCByZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgfVxuICAgIGdldCBwcm9maWxlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9maWxlSWQ7XG4gICAgfVxuICAgIGdldCBlcnJvckRldGFpbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckRldGFpbHM7XG4gICAgfVxuICAgIGdldCBzY29yZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNjb3JlO1xuICAgIH1cbn1cbi8qKlxuICogQGNsYXNzIFNwZWFrZXJSZWNvZ25pdGlvbkNhbmNlbGxhdGlvbkRldGFpbHNcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWFrZXJSZWNvZ25pdGlvbkNhbmNlbGxhdGlvbkRldGFpbHMgZXh0ZW5kcyBDYW5jZWxsYXRpb25EZXRhaWxzQmFzZSB7XG4gICAgY29uc3RydWN0b3IocmVhc29uLCBlcnJvckRldGFpbHMsIGVycm9yQ29kZSkge1xuICAgICAgICBzdXBlcihyZWFzb24sIGVycm9yRGV0YWlscywgZXJyb3JDb2RlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBTcGVha2VyUmVjb2duaXRpb25DYW5jZWxsYXRpb25EZXRhaWxzIG9iamVjdCBmb3IgdGhlIGNhbmNlbGVkIFNwZWFrZXJSZWNvZ25pdGlvblJlc3VsdFxuICAgICAqIEBtZW1iZXIgU3BlYWtlclJlY29nbml0aW9uQ2FuY2VsbGF0aW9uRGV0YWlscy5mcm9tUmVzdWx0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7U3BlYWtlclJlY29nbml0aW9uUmVzdWx0fSByZXN1bHQgLSBUaGUgcmVzdWx0IHRoYXQgd2FzIGNhbmNlbGVkLlxuICAgICAqIEByZXR1cm5zIHtTcGVha2VyUmVjb2duaXRpb25DYW5jZWxsYXRpb25EZXRhaWxzfSBUaGUgY2FuY2VsbGF0aW9uIGRldGFpbHMgb2JqZWN0IGJlaW5nIGNyZWF0ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21SZXN1bHQocmVzdWx0KSB7XG4gICAgICAgIGNvbnN0IHJlYXNvbiA9IENhbmNlbGxhdGlvblJlYXNvbi5FcnJvcjtcbiAgICAgICAgbGV0IGVycm9yQ29kZSA9IENhbmNlbGxhdGlvbkVycm9yQ29kZS5Ob0Vycm9yO1xuICAgICAgICBpZiAoISFyZXN1bHQucHJvcGVydGllcykge1xuICAgICAgICAgICAgZXJyb3JDb2RlID0gQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW3Jlc3VsdC5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KENhbmNlbGxhdGlvbkVycm9yQ29kZVByb3BlcnR5TmFtZSwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlW0NhbmNlbGxhdGlvbkVycm9yQ29kZS5Ob0Vycm9yXSldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgU3BlYWtlclJlY29nbml0aW9uQ2FuY2VsbGF0aW9uRGV0YWlscyhyZWFzb24sIHJlc3VsdC5lcnJvckRldGFpbHMsIGVycm9yQ29kZSk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVha2VyUmVjb2duaXRpb25SZXN1bHQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgUmVjb2duaXplckNvbmZpZywgU3BlYWtlclJlY29nbml0aW9uQ29ubmVjdGlvbkZhY3RvcnksIFNwZWFrZXJTZXJ2aWNlUmVjb2duaXplciB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgUHJvcGVydHlJZCwgUmVjb2duaXplciwgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIERlZmluZXMgU3BlYWtlclJlY29nbml6ZXIgY2xhc3MgZm9yIFNwZWFrZXIgUmVjb2duaXRpb25cbiAqIEhhbmRsZXMgb3BlcmF0aW9ucyBmcm9tIHVzZXIgZm9yIFZvaWNlIFByb2ZpbGUgb3BlcmF0aW9ucyAoZS5nLiBjcmVhdGVQcm9maWxlLCBkZWxldGVQcm9maWxlKVxuICogQGNsYXNzIFNwZWFrZXJSZWNvZ25pemVyXG4gKi9cbmV4cG9ydCBjbGFzcyBTcGVha2VyUmVjb2duaXplciBleHRlbmRzIFJlY29nbml6ZXIge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoZSBTcGVha2VyUmVjb2duaXplci5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge1NwZWVjaENvbmZpZ30gc3BlZWNoQ29uZmlnIC0gVGhlIHNldCBvZiBjb25maWd1cmF0aW9uIHByb3BlcnRpZXMuXG4gICAgICogQHBhcmFtIHtBdWRpb0NvbmZpZ30gYXVkaW9Db25maWcgLSBBbiBvcHRpb25hbCBhdWRpbyBpbnB1dCBjb25maWcgYXNzb2NpYXRlZCB3aXRoIHRoZSByZWNvZ25pemVyXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc3BlZWNoQ29uZmlnLCBhdWRpb0NvbmZpZykge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChzcGVlY2hDb25maWcsIFwic3BlZWNoQ29uZmlnXCIpO1xuICAgICAgICBjb25zdCBjb25maWdJbXBsID0gc3BlZWNoQ29uZmlnO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChjb25maWdJbXBsLCBcInNwZWVjaENvbmZpZ1wiKTtcbiAgICAgICAgc3VwZXIoYXVkaW9Db25maWcsIGNvbmZpZ0ltcGwucHJvcGVydGllcywgbmV3IFNwZWFrZXJSZWNvZ25pdGlvbkNvbm5lY3Rpb25GYWN0b3J5KCkpO1xuICAgICAgICB0aGlzLnByaXZBdWRpb0NvbmZpZ0ltcGwgPSBhdWRpb0NvbmZpZztcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKHRoaXMucHJpdkF1ZGlvQ29uZmlnSW1wbCwgXCJhdWRpb0NvbmZpZ1wiKTtcbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZWRTcGVha2VyUmVjb2duaXplciA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gY29uZmlnSW1wbC5wcm9wZXJ0aWVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBhdXRob3JpemF0aW9uIHRva2VuIHVzZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgc2VydmljZS5cbiAgICAgKiBAbWVtYmVyIFNwZWFrZXJSZWNvZ25pemVyLnByb3RvdHlwZS5hdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBnZXQgYXV0aG9yaXphdGlvblRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzL1NldHMgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBzZXJ2aWNlLlxuICAgICAqIEBtZW1iZXIgU3BlYWtlclJlY29nbml6ZXIucHJvdG90eXBlLmF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdG9rZW4gLSBBdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqL1xuICAgIHNldCBhdXRob3JpemF0aW9uVG9rZW4odG9rZW4pIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRva2VuLCBcInRva2VuXCIpO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgdG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMgZGVmaW5lZCBmb3IgdGhpcyBTcGVha2VyUmVjb2duaXplci5cbiAgICAgKiBAbWVtYmVyIFNwZWFrZXJSZWNvZ25pemVyLnByb3RvdHlwZS5wcm9wZXJ0aWVzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIFNwZWFrZXJSZWNvZ25pemVyLlxuICAgICAqL1xuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHJlY29nbml0aW9uIHJlc3VsdCBmb3IgbW9kZWwgdXNpbmcgZ2l2ZW4gYXVkaW9cbiAgICAgKiBAbWVtYmVyIFNwZWFrZXJSZWNvZ25pemVyLnByb3RvdHlwZS5yZWNvZ25pemVPbmNlQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQGFzeW5jXG4gICAgICogQHBhcmFtIHtTcGVha2VySWRlbnRpZmljYXRpb25Nb2RlbCB8IFNwZWFrZXJWZXJpZmljYXRpb25Nb2RlbH0gbW9kZWwgTW9kZWwgY29udGFpbmluZyBWb2ljZSBQcm9maWxlcyB0byBiZSBpZGVudGlmaWVkXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgaW52b2tlZCBvbmNlIHJlc3VsdCBpcyByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIHJlY29nbml6ZU9uY2VBc3luYyhtb2RlbCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZFNwZWFrZXJSZWNvZ25pemVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlY29nbml6ZVNwZWFrZXJPbmNlQXN5bmNJbXBsKG1vZGVsKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY2x1ZGVkIGZvciBjb21wYXRpYmlsaXR5XG4gICAgICogQG1lbWJlciBTcGVha2VyUmVjb2duaXplci5wcm90b3R5cGUuY2xvc2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQGFzeW5jXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkU3BlYWtlclJlY29nbml6ZXIpO1xuICAgICAgICAgICAgeWllbGQgdGhpcy5kaXNwb3NlKHRydWUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVjb2duaXplU3BlYWtlck9uY2VBc3luY0ltcGwobW9kZWwpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWRTcGVha2VyUmVjb2duaXplcik7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLmltcGxSZWNvZ25pemVyU3RvcCgpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geWllbGQgdGhpcy5wcml2UmVjby5yZWNvZ25pemVTcGVha2VyKG1vZGVsKTtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMuaW1wbFJlY29nbml6ZXJTdG9wKCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW1wbFJlY29nbml6ZXJTdG9wKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdlJlY28pIHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZSZWNvLnN0b3BSZWNvZ25pemluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY3JlYXRlUmVjb2duaXplckNvbmZpZyhzcGVlY2hDb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWNvZ25pemVyQ29uZmlnKHNwZWVjaENvbmZpZywgdGhpcy5wcml2UHJvcGVydGllcyk7XG4gICAgfVxuICAgIGNyZWF0ZVNlcnZpY2VSZWNvZ25pemVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Db25maWcsIHJlY29nbml6ZXJDb25maWcpIHtcbiAgICAgICAgY29uc3QgYXVkaW9JbXBsID0gYXVkaW9Db25maWc7XG4gICAgICAgIHJldHVybiBuZXcgU3BlYWtlclNlcnZpY2VSZWNvZ25pemVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9JbXBsLCByZWNvZ25pemVyQ29uZmlnLCB0aGlzKTtcbiAgICB9XG4gICAgZGlzcG9zZShkaXNwb3NpbmcpIHtcbiAgICAgICAgY29uc3QgX3N1cGVyID0gT2JqZWN0LmNyZWF0ZShudWxsLCB7XG4gICAgICAgICAgICBkaXNwb3NlOiB7IGdldDogKCkgPT4gc3VwZXIuZGlzcG9zZSB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkRpc3Bvc2VkU3BlYWtlclJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGlzcG9zaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2RGlzcG9zZWRTcGVha2VyUmVjb2duaXplciA9IHRydWU7XG4gICAgICAgICAgICAgICAgeWllbGQgX3N1cGVyLmRpc3Bvc2UuY2FsbCh0aGlzLCBkaXNwb3NpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWFrZXJSZWNvZ25pemVyLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IFZvaWNlUHJvZmlsZVR5cGUsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBEZWZpbmVzIFNwZWFrZXJWZXJpZmljYXRpb25Nb2RlbCBjbGFzcyBmb3IgU3BlYWtlciBSZWNvZ25pdGlvblxuICogTW9kZWwgY29udGFpbnMgYSBwcm9maWxlIGFnYWluc3Qgd2hpY2ggdG8gdmVyaWZ5IGEgc3BlYWtlclxuICogQGNsYXNzIFNwZWFrZXJWZXJpZmljYXRpb25Nb2RlbFxuICovXG5leHBvcnQgY2xhc3MgU3BlYWtlclZlcmlmaWNhdGlvbk1vZGVsIHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9maWxlKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHByb2ZpbGUsIFwiVm9pY2VQcm9maWxlXCIpO1xuICAgICAgICBpZiAocHJvZmlsZS5wcm9maWxlVHlwZSA9PT0gVm9pY2VQcm9maWxlVHlwZS5UZXh0SW5kZXBlbmRlbnRJZGVudGlmaWNhdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmVyaWZpY2F0aW9uIG1vZGVsIGNhbm5vdCBiZSBjcmVhdGVkIGZyb20gSWRlbnRpZmljYXRpb24gcHJvZmlsZVwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZWb2ljZVByb2ZpbGUgPSBwcm9maWxlO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVByb2ZpbGUocHJvZmlsZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNwZWFrZXJWZXJpZmljYXRpb25Nb2RlbChwcm9maWxlKTtcbiAgICB9XG4gICAgZ2V0IHZvaWNlUHJvZmlsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlZvaWNlUHJvZmlsZTtcbiAgICB9XG4gICAgZ2V0IHByb2ZpbGVJZHMoKSB7XG4gICAgICAgIHJldHVybiBbdGhpcy52b2ljZVByb2ZpbGUucHJvZmlsZUlkXTtcbiAgICB9XG4gICAgZ2V0IHNjZW5hcmlvKCkge1xuICAgICAgICBpZiAodGhpcy52b2ljZVByb2ZpbGUucHJvZmlsZVR5cGUgPT09IFZvaWNlUHJvZmlsZVR5cGUuVGV4dERlcGVuZGVudFZlcmlmaWNhdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIFwiVGV4dERlcGVuZGVudFZlcmlmaWNhdGlvblwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiVGV4dEluZGVwZW5kZW50VmVyaWZpY2F0aW9uXCI7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWFrZXJWZXJpZmljYXRpb25Nb2RlbC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cbmltcG9ydCB7IEZvcmNlRGljdGF0aW9uUHJvcGVydHlOYW1lLCBPdXRwdXRGb3JtYXRQcm9wZXJ0eU5hbWUsIFNlcnZpY2VQcm9wZXJ0aWVzUHJvcGVydHlOYW1lIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBPdXRwdXRGb3JtYXQsIFByb2Zhbml0eU9wdGlvbiwgUHJvcGVydHlDb2xsZWN0aW9uLCBQcm9wZXJ0eUlkLCBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBTcGVlY2ggY29uZmlndXJhdGlvbi5cbiAqIEBjbGFzcyBTcGVlY2hDb25maWdcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWVjaENvbmZpZyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2UuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhdGljIGluc3RhbmNlIG9mIFNwZWVjaENvbmZpZyByZXR1cm5lZCBieSBwYXNzaW5nIHN1YnNjcmlwdGlvbktleSBhbmQgc2VydmljZSByZWdpb24uXG4gICAgICogTm90ZTogUGxlYXNlIHVzZSB5b3VyIExhbmd1YWdlVW5kZXJzdGFuZGluZyBzdWJzY3JpcHRpb24ga2V5IGluIGNhc2UgeW91IHdhbnQgdG8gdXNlIHRoZSBJbnRlbnQgcmVjb2duaXplci5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaENvbmZpZy5mcm9tU3Vic2NyaXB0aW9uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdWJzY3JpcHRpb25LZXkgLSBUaGUgc3Vic2NyaXB0aW9uIGtleS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVnaW9uIC0gVGhlIHJlZ2lvbiBuYW1lIChzZWUgdGhlIDxhIGhyZWY9XCJodHRwczovL2FrYS5tcy9jc3NwZWVjaC9yZWdpb25cIj5yZWdpb24gcGFnZTwvYT4pLlxuICAgICAqIEByZXR1cm5zIHtTcGVlY2hDb25maWd9IFRoZSBzcGVlY2ggZmFjdG9yeVxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbktleSwgcmVnaW9uKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShzdWJzY3JpcHRpb25LZXksIFwic3Vic2NyaXB0aW9uS2V5XCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocmVnaW9uLCBcInJlZ2lvblwiKTtcbiAgICAgICAgY29uc3Qgc3BlZWNoSW1wbCA9IG5ldyBTcGVlY2hDb25maWdJbXBsKCk7XG4gICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24sIHJlZ2lvbik7XG4gICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9JbnRlbnRSZWdpb24sIHJlZ2lvbik7XG4gICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXksIHN1YnNjcmlwdGlvbktleSk7XG4gICAgICAgIHJldHVybiBzcGVlY2hJbXBsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBzcGVlY2ggY29uZmlnIHdpdGggc3BlY2lmaWVkIGVuZHBvaW50IGFuZCBzdWJzY3JpcHRpb24ga2V5LlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGludGVuZGVkIG9ubHkgZm9yIHVzZXJzIHdobyB1c2UgYSBub24tc3RhbmRhcmQgc2VydmljZSBlbmRwb2ludCBvciBwYXJhbWV0ZXJzLlxuICAgICAqIE5vdGU6IFBsZWFzZSB1c2UgeW91ciBMYW5ndWFnZVVuZGVyc3RhbmRpbmcgc3Vic2NyaXB0aW9uIGtleSBpbiBjYXNlIHlvdSB3YW50IHRvIHVzZSB0aGUgSW50ZW50IHJlY29nbml6ZXIuXG4gICAgICogTm90ZTogVGhlIHF1ZXJ5IHBhcmFtZXRlcnMgc3BlY2lmaWVkIGluIHRoZSBlbmRwb2ludCBVUkwgYXJlIG5vdCBjaGFuZ2VkLCBldmVuIGlmIHRoZXkgYXJlIHNldCBieSBhbnkgb3RoZXIgQVBJcy5cbiAgICAgKiBGb3IgZXhhbXBsZSwgaWYgbGFuZ3VhZ2UgaXMgZGVmaW5lZCBpbiB0aGUgdXJpIGFzIHF1ZXJ5IHBhcmFtZXRlciBcImxhbmd1YWdlPWRlLURFXCIsIGFuZCBhbHNvIHNldCBieVxuICAgICAqIFNwZWVjaENvbmZpZy5zcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlID0gXCJlbi1VU1wiLCB0aGUgbGFuZ3VhZ2Ugc2V0dGluZyBpbiB1cmkgdGFrZXMgcHJlY2VkZW5jZSxcbiAgICAgKiBhbmQgdGhlIGVmZmVjdGl2ZSBsYW5ndWFnZSBpcyBcImRlLURFXCIuIE9ubHkgdGhlIHBhcmFtZXRlcnMgdGhhdCBhcmUgbm90IHNwZWNpZmllZCBpbiB0aGVcbiAgICAgKiBlbmRwb2ludCBVUkwgY2FuIGJlIHNldCBieSBvdGhlciBBUElzLlxuICAgICAqIE5vdGU6IFRvIHVzZSBhdXRob3JpemF0aW9uIHRva2VuIHdpdGggZnJvbUVuZHBvaW50LCBwYXNzIGFuIGVtcHR5IHN0cmluZyB0byB0aGUgc3Vic2NyaXB0aW9uS2V5IGluIHRoZVxuICAgICAqIGZyb21FbmRwb2ludCBtZXRob2QsIGFuZCB0aGVuIHNldCBhdXRob3JpemF0aW9uVG9rZW49XCJ0b2tlblwiIG9uIHRoZSBjcmVhdGVkIFNwZWVjaENvbmZpZyBpbnN0YW5jZSB0b1xuICAgICAqIHVzZSB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaENvbmZpZy5mcm9tRW5kcG9pbnRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtVUkx9IGVuZHBvaW50IC0gVGhlIHNlcnZpY2UgZW5kcG9pbnQgdG8gY29ubmVjdCB0by5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3Vic2NyaXB0aW9uS2V5IC0gVGhlIHN1YnNjcmlwdGlvbiBrZXkuIElmIGEgc3Vic2NyaXB0aW9uIGtleSBpcyBub3Qgc3BlY2lmaWVkLCBhbiBhdXRob3JpemF0aW9uIHRva2VuIG11c3QgYmUgc2V0LlxuICAgICAqIEByZXR1cm5zIHtTcGVlY2hDb25maWd9IEEgc3BlZWNoIGZhY3RvcnkgaW5zdGFuY2UuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21FbmRwb2ludChlbmRwb2ludCwgc3Vic2NyaXB0aW9uS2V5KSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChlbmRwb2ludCwgXCJlbmRwb2ludFwiKTtcbiAgICAgICAgY29uc3Qgc3BlZWNoSW1wbCA9IG5ldyBTcGVlY2hDb25maWdJbXBsKCk7XG4gICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludCwgZW5kcG9pbnQuaHJlZik7XG4gICAgICAgIGlmICh1bmRlZmluZWQgIT09IHN1YnNjcmlwdGlvbktleSkge1xuICAgICAgICAgICAgc3BlZWNoSW1wbC5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleSwgc3Vic2NyaXB0aW9uS2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3BlZWNoSW1wbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgc3BlZWNoIGNvbmZpZyB3aXRoIHNwZWNpZmllZCBob3N0IGFuZCBzdWJzY3JpcHRpb24ga2V5LlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGludGVuZGVkIG9ubHkgZm9yIHVzZXJzIHdobyB1c2UgYSBub24tZGVmYXVsdCBzZXJ2aWNlIGhvc3QuIFN0YW5kYXJkIHJlc291cmNlIHBhdGggd2lsbCBiZSBhc3N1bWVkLlxuICAgICAqIEZvciBzZXJ2aWNlcyB3aXRoIGEgbm9uLXN0YW5kYXJkIHJlc291cmNlIHBhdGggb3Igbm8gcGF0aCBhdCBhbGwsIHVzZSBmcm9tRW5kcG9pbnQgaW5zdGVhZC5cbiAgICAgKiBOb3RlOiBRdWVyeSBwYXJhbWV0ZXJzIGFyZSBub3QgYWxsb3dlZCBpbiB0aGUgaG9zdCBVUkkgYW5kIG11c3QgYmUgc2V0IGJ5IG90aGVyIEFQSXMuXG4gICAgICogTm90ZTogVG8gdXNlIGFuIGF1dGhvcml6YXRpb24gdG9rZW4gd2l0aCBmcm9tSG9zdCwgdXNlIGZyb21Ib3N0KFVSTCksXG4gICAgICogYW5kIHRoZW4gc2V0IHRoZSBBdXRob3JpemF0aW9uVG9rZW4gcHJvcGVydHkgb24gdGhlIGNyZWF0ZWQgU3BlZWNoQ29uZmlnIGluc3RhbmNlLlxuICAgICAqIE5vdGU6IEFkZGVkIGluIHZlcnNpb24gMS45LjAuXG4gICAgICogQG1lbWJlciBTcGVlY2hDb25maWcuZnJvbUhvc3RcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtVUkx9IGhvc3QgLSBUaGUgc2VydmljZSBlbmRwb2ludCB0byBjb25uZWN0IHRvLiBGb3JtYXQgaXMgXCJwcm90b2NvbDovL2hvc3Q6cG9ydFwiIHdoZXJlIFwiOnBvcnRcIiBpcyBvcHRpb25hbC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3Vic2NyaXB0aW9uS2V5IC0gVGhlIHN1YnNjcmlwdGlvbiBrZXkuIElmIGEgc3Vic2NyaXB0aW9uIGtleSBpcyBub3Qgc3BlY2lmaWVkLCBhbiBhdXRob3JpemF0aW9uIHRva2VuIG11c3QgYmUgc2V0LlxuICAgICAqIEByZXR1cm5zIHtTcGVlY2hDb25maWd9IEEgc3BlZWNoIGZhY3RvcnkgaW5zdGFuY2UuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21Ib3N0KGhvc3ROYW1lLCBzdWJzY3JpcHRpb25LZXkpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKGhvc3ROYW1lLCBcImhvc3ROYW1lXCIpO1xuICAgICAgICBjb25zdCBzcGVlY2hJbXBsID0gbmV3IFNwZWVjaENvbmZpZ0ltcGwoKTtcbiAgICAgICAgc3BlZWNoSW1wbC5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0hvc3QsIGhvc3ROYW1lLnByb3RvY29sICsgXCIvL1wiICsgaG9zdE5hbWUuaG9zdG5hbWUgKyAoaG9zdE5hbWUucG9ydCA9PT0gXCJcIiA/IFwiXCIgOiBcIjpcIiArIGhvc3ROYW1lLnBvcnQpKTtcbiAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gc3Vic2NyaXB0aW9uS2V5KSB7XG4gICAgICAgICAgICBzcGVlY2hJbXBsLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5LCBzdWJzY3JpcHRpb25LZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzcGVlY2hJbXBsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBzcGVlY2ggZmFjdG9yeSB3aXRoIHNwZWNpZmllZCBpbml0aWFsIGF1dGhvcml6YXRpb24gdG9rZW4gYW5kIHJlZ2lvbi5cbiAgICAgKiBOb3RlOiBUaGUgY2FsbGVyIG5lZWRzIHRvIGVuc3VyZSB0aGF0IHRoZSBhdXRob3JpemF0aW9uIHRva2VuIGlzIHZhbGlkLiBCZWZvcmUgdGhlIGF1dGhvcml6YXRpb24gdG9rZW5cbiAgICAgKiBleHBpcmVzLCB0aGUgY2FsbGVyIG5lZWRzIHRvIHJlZnJlc2ggaXQgYnkgY2FsbGluZyB0aGlzIHNldHRlciB3aXRoIGEgbmV3IHZhbGlkIHRva2VuLlxuICAgICAqIE5vdGU6IFBsZWFzZSB1c2UgYSB0b2tlbiBkZXJpdmVkIGZyb20geW91ciBMYW5ndWFnZVVuZGVyc3RhbmRpbmcgc3Vic2NyaXB0aW9uIGtleSBpbiBjYXNlIHlvdSB3YW50XG4gICAgICogdG8gdXNlIHRoZSBJbnRlbnQgcmVjb2duaXplci4gQXMgY29uZmlndXJhdGlvbiB2YWx1ZXMgYXJlIGNvcGllZCB3aGVuIGNyZWF0aW5nIGEgbmV3IHJlY29nbml6ZXIsXG4gICAgICogdGhlIG5ldyB0b2tlbiB2YWx1ZSB3aWxsIG5vdCBhcHBseSB0byByZWNvZ25pemVycyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIGNyZWF0ZWQuIEZvciByZWNvZ25pemVyc1xuICAgICAqIHRoYXQgaGF2ZSBiZWVuIGNyZWF0ZWQgYmVmb3JlLCB5b3UgbmVlZCB0byBzZXQgYXV0aG9yaXphdGlvbiB0b2tlbiBvZiB0aGUgY29ycmVzcG9uZGluZyByZWNvZ25pemVyXG4gICAgICogdG8gcmVmcmVzaCB0aGUgdG9rZW4uIE90aGVyd2lzZSwgdGhlIHJlY29nbml6ZXJzIHdpbGwgZW5jb3VudGVyIGVycm9ycyBkdXJpbmcgcmVjb2duaXRpb24uXG4gICAgICogQG1lbWJlciBTcGVlY2hDb25maWcuZnJvbUF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXV0aG9yaXphdGlvblRva2VuIC0gVGhlIGluaXRpYWwgYXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVnaW9uIC0gVGhlIHJlZ2lvbiBuYW1lIChzZWUgdGhlIDxhIGhyZWY9XCJodHRwczovL2FrYS5tcy9jc3NwZWVjaC9yZWdpb25cIj5yZWdpb24gcGFnZTwvYT4pLlxuICAgICAqIEByZXR1cm5zIHtTcGVlY2hDb25maWd9IEEgc3BlZWNoIGZhY3RvcnkgaW5zdGFuY2UuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21BdXRob3JpemF0aW9uVG9rZW4oYXV0aG9yaXphdGlvblRva2VuLCByZWdpb24pIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKGF1dGhvcml6YXRpb25Ub2tlbiwgXCJhdXRob3JpemF0aW9uVG9rZW5cIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShyZWdpb24sIFwicmVnaW9uXCIpO1xuICAgICAgICBjb25zdCBzcGVlY2hJbXBsID0gbmV3IFNwZWVjaENvbmZpZ0ltcGwoKTtcbiAgICAgICAgc3BlZWNoSW1wbC5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbiwgcmVnaW9uKTtcbiAgICAgICAgc3BlZWNoSW1wbC5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0ludGVudFJlZ2lvbiwgcmVnaW9uKTtcbiAgICAgICAgc3BlZWNoSW1wbC5hdXRob3JpemF0aW9uVG9rZW4gPSBhdXRob3JpemF0aW9uVG9rZW47XG4gICAgICAgIHJldHVybiBzcGVlY2hJbXBsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgdGhlIGNvbmZpZ3VyYXRpb24uXG4gICAgICogQG1lbWJlciBTcGVlY2hDb25maWcucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgICBjbG9zZSgpIHsgfVxufVxuLyoqXG4gKiBAcHVibGljXG4gKiBAY2xhc3MgU3BlZWNoQ29uZmlnSW1wbFxuICovXG5leHBvcnQgY2xhc3MgU3BlZWNoQ29uZmlnSW1wbCBleHRlbmRzIFNwZWVjaENvbmZpZyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgIHRoaXMuc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSA9IFwiZW4tVVNcIjsgLy8gU2hvdWxkIHdlIGhhdmUgYSBkZWZhdWx0P1xuICAgICAgICB0aGlzLm91dHB1dEZvcm1hdCA9IE91dHB1dEZvcm1hdC5TaW1wbGU7XG4gICAgfVxuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcztcbiAgICB9XG4gICAgZ2V0IGVuZFBvaW50KCkge1xuICAgICAgICByZXR1cm4gbmV3IFVSTCh0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnQpKTtcbiAgICB9XG4gICAgZ2V0IHN1YnNjcmlwdGlvbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXkpO1xuICAgIH1cbiAgICBnZXQgcmVnaW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbik7XG4gICAgfVxuICAgIGdldCBhdXRob3JpemF0aW9uVG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4pO1xuICAgIH1cbiAgICBzZXQgYXV0aG9yaXphdGlvblRva2VuKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgdmFsdWUpO1xuICAgIH1cbiAgICBnZXQgc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UpO1xuICAgIH1cbiAgICBzZXQgc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlLCB2YWx1ZSk7XG4gICAgfVxuICAgIGdldCBhdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0F1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZXMpO1xuICAgIH1cbiAgICBzZXQgYXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlcyh2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlcywgdmFsdWUpO1xuICAgIH1cbiAgICBnZXQgb3V0cHV0Rm9ybWF0KCkge1xuICAgICAgICByZXR1cm4gT3V0cHV0Rm9ybWF0W3RoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkoT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCB1bmRlZmluZWQpXTtcbiAgICB9XG4gICAgc2V0IG91dHB1dEZvcm1hdCh2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KE91dHB1dEZvcm1hdFByb3BlcnR5TmFtZSwgT3V0cHV0Rm9ybWF0W3ZhbHVlXSk7XG4gICAgfVxuICAgIGdldCBlbmRwb2ludElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50SWQpO1xuICAgIH1cbiAgICBzZXQgZW5kcG9pbnRJZCh2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnRJZCwgdmFsdWUpO1xuICAgIH1cbiAgICBzZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwodmFsdWUsIFwidmFsdWVcIik7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUpO1xuICAgIH1cbiAgICBnZXRQcm9wZXJ0eShuYW1lLCBkZWYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXMuZ2V0UHJvcGVydHkobmFtZSwgZGVmKTtcbiAgICB9XG4gICAgc2V0UHJveHkocHJveHlIb3N0TmFtZSwgcHJveHlQb3J0LCBwcm94eVVzZXJOYW1lLCBwcm94eVBhc3N3b3JkKSB7XG4gICAgICAgIHRoaXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5SG9zdE5hbWVdLCBwcm94eUhvc3ROYW1lKTtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlQb3J0XSwgcHJveHlQb3J0KTtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlVc2VyTmFtZV0sIHByb3h5VXNlck5hbWUpO1xuICAgICAgICB0aGlzLnNldFByb3BlcnR5KFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVBhc3N3b3JkXSwgcHJveHlQYXNzd29yZCk7XG4gICAgfVxuICAgIHNldFNlcnZpY2VQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgICBjb25zdCBjdXJyZW50UHJvcGVydGllcyA9IEpTT04ucGFyc2UodGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShTZXJ2aWNlUHJvcGVydGllc1Byb3BlcnR5TmFtZSwgXCJ7fVwiKSk7XG4gICAgICAgIGN1cnJlbnRQcm9wZXJ0aWVzW25hbWVdID0gdmFsdWU7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoU2VydmljZVByb3BlcnRpZXNQcm9wZXJ0eU5hbWUsIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRQcm9wZXJ0aWVzKSk7XG4gICAgfVxuICAgIHNldFByb2Zhbml0eShwcm9mYW5pdHkpIHtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VSZXNwb25zZV9Qcm9mYW5pdHlPcHRpb24sIFByb2Zhbml0eU9wdGlvbltwcm9mYW5pdHldKTtcbiAgICB9XG4gICAgZW5hYmxlQXVkaW9Mb2dnaW5nKCkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5hYmxlQXVkaW9Mb2dnaW5nLCBcInRydWVcIik7XG4gICAgfVxuICAgIHJlcXVlc3RXb3JkTGV2ZWxUaW1lc3RhbXBzKCkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1JlcXVlc3RXb3JkTGV2ZWxUaW1lc3RhbXBzLCBcInRydWVcIik7XG4gICAgfVxuICAgIGVuYWJsZURpY3RhdGlvbigpIHtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShGb3JjZURpY3RhdGlvblByb3BlcnR5TmFtZSwgXCJ0cnVlXCIpO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3QgcmV0ID0gbmV3IFNwZWVjaENvbmZpZ0ltcGwoKTtcbiAgICAgICAgcmV0LnByaXZQcm9wZXJ0aWVzID0gdGhpcy5wcml2UHJvcGVydGllcy5jbG9uZSgpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICBnZXQgc3BlZWNoU3ludGhlc2lzTGFuZ3VhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fU3ludGhMYW5ndWFnZSk7XG4gICAgfVxuICAgIHNldCBzcGVlY2hTeW50aGVzaXNMYW5ndWFnZShsYW5ndWFnZSkge1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fU3ludGhMYW5ndWFnZSwgbGFuZ3VhZ2UpO1xuICAgIH1cbiAgICBnZXQgc3BlZWNoU3ludGhlc2lzVm9pY2VOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoVm9pY2UpO1xuICAgIH1cbiAgICBzZXQgc3BlZWNoU3ludGhlc2lzVm9pY2VOYW1lKHZvaWNlKSB7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aFZvaWNlLCB2b2ljZSk7XG4gICAgfVxuICAgIGdldCBzcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQoKSB7XG4gICAgICAgIHJldHVybiBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbdGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoT3V0cHV0Rm9ybWF0LCB1bmRlZmluZWQpXTtcbiAgICB9XG4gICAgc2V0IHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdChmb3JtYXQpIHtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoT3V0cHV0Rm9ybWF0LCBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbZm9ybWF0XSk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hDb25maWcuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IENhbmNlbGxhdGlvbkV2ZW50QXJnc0Jhc2UsIH0gZnJvbSBcIi4vQ2FuY2VsbGF0aW9uRXZlbnRBcmdzQmFzZVwiO1xuZXhwb3J0IGNsYXNzIFNwZWVjaFJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MgZXh0ZW5kcyBDYW5jZWxsYXRpb25FdmVudEFyZ3NCYXNlIHtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cbmltcG9ydCB7IFJlY29nbml0aW9uRXZlbnRBcmdzIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBEZWZpbmVzIGNvbnRlbnRzIG9mIHNwZWVjaCByZWNvZ25pemluZy9yZWNvZ25pemVkIGV2ZW50LlxuICogQGNsYXNzIFNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzXG4gKi9cbmV4cG9ydCBjbGFzcyBTcGVlY2hSZWNvZ25pdGlvbkV2ZW50QXJncyBleHRlbmRzIFJlY29nbml0aW9uRXZlbnRBcmdzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7U3BlZWNoUmVjb2duaXRpb25SZXN1bHR9IHJlc3VsdCAtIFRoZSBzcGVlY2ggcmVjb2duaXRpb24gcmVzdWx0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgLSBUaGUgb2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzZXNzaW9uSWQgLSBUaGUgc2Vzc2lvbiBpZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZXN1bHQsIG9mZnNldCwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHN1cGVyKG9mZnNldCwgc2Vzc2lvbklkKTtcbiAgICAgICAgdGhpcy5wcml2UmVzdWx0ID0gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIHJlY29nbml0aW9uIHJlc3VsdC5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzLnByb3RvdHlwZS5yZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1NwZWVjaFJlY29nbml0aW9uUmVzdWx0fSB0aGUgcmVjb2duaXRpb24gcmVzdWx0LlxuICAgICAqL1xuICAgIGdldCByZXN1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN1bHQ7XG4gICAgfVxufVxuLyoqXG4gKiBEZWZpbmVzIGNvbnRlbnRzIG9mIGNvbnZlcnNhdGlvbiB0cmFuc2NyaWJlZC90cmFuc2NyaWJpbmcgZXZlbnQuXG4gKiBAY2xhc3MgQ29udmVyc2F0aW9uVHJhbnNjcmlwdGlvbkV2ZW50QXJnc1xuICovXG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uVHJhbnNjcmlwdGlvbkV2ZW50QXJncyBleHRlbmRzIFNwZWVjaFJlY29nbml0aW9uRXZlbnRBcmdzIHtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoUmVjb2duaXRpb25FdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFJlY29nbml0aW9uUmVzdWx0IH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBEZWZpbmVzIHJlc3VsdCBvZiBzcGVlY2ggcmVjb2duaXRpb24uXG4gKiBAY2xhc3MgU3BlZWNoUmVjb2duaXRpb25SZXN1bHRcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWVjaFJlY29nbml0aW9uUmVzdWx0IGV4dGVuZHMgUmVjb2duaXRpb25SZXN1bHQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXN1bHRJZCAtIFRoZSByZXN1bHQgaWQuXG4gICAgICogQHBhcmFtIHtSZXN1bHRSZWFzb259IHJlYXNvbiAtIFRoZSByZWFzb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgcmVjb2duaXplZCB0ZXh0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBkdXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldCBpbnRvIHRoZSBzdHJlYW0uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlIC0gUHJpbWFyeSBMYW5ndWFnZSBkZXRlY3RlZCwgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSAtIFByaW1hcnkgTGFuZ3VhZ2UgY29uZmlkZW5jZSAoXCJVbmtub3duLFwiIFwiTG93LFwiIFwiTWVkaXVtLFwiIFwiSGlnaFwiLi4uKSwgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNwZWFrZXJJZCAtIHNwZWFrZXIgaWQgZm9yIGNvbnZlcnNhdGlvbiB0cmFuc2NyaXB0aW9uLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXJyb3JEZXRhaWxzIC0gRXJyb3IgZGV0YWlscywgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGpzb24gLSBBZGRpdGlvbmFsIEpzb24sIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7UHJvcGVydHlDb2xsZWN0aW9ufSBwcm9wZXJ0aWVzIC0gQWRkaXRpb25hbCBwcm9wZXJ0aWVzLCBpZiBwcm92aWRlZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZXN1bHRJZCwgcmVhc29uLCB0ZXh0LCBkdXJhdGlvbiwgb2Zmc2V0LCBsYW5ndWFnZSwgbGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlLCBzcGVha2VySWQsIGVycm9yRGV0YWlscywganNvbiwgcHJvcGVydGllcykge1xuICAgICAgICBzdXBlcihyZXN1bHRJZCwgcmVhc29uLCB0ZXh0LCBkdXJhdGlvbiwgb2Zmc2V0LCBsYW5ndWFnZSwgbGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlLCBlcnJvckRldGFpbHMsIGpzb24sIHByb3BlcnRpZXMpO1xuICAgICAgICB0aGlzLnByaXZTcGVha2VySWQgPSBzcGVha2VySWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHNwZWFrZXIgaWQgZnJvbSBjb252ZXJzYXRpb24gdHJhbnNjcmlwdGlvbi9pZCBzY2VuYXJpb3NcbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml0aW9uUmVzdWx0LnByb3RvdHlwZS5zcGVha2VySWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gaWQgb2Ygc3BlYWtlciBpbiBnaXZlbiByZXN1bHRcbiAgICAgKi9cbiAgICBnZXQgc3BlYWtlcklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlYWtlcklkO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoUmVjb2duaXRpb25SZXN1bHQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCBSZWNvZ25pdGlvbk1vZGUsIFJlY29nbml6ZXJDb25maWcsIFNwZWVjaENvbm5lY3Rpb25GYWN0b3J5LCBTcGVlY2hTZXJ2aWNlUmVjb2duaXplciwgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzIH0gZnJvbSBcIi4uL2NvbW1vbi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IE91dHB1dEZvcm1hdCwgUHJvcGVydHlJZCwgUmVjb2duaXplciwgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIFBlcmZvcm1zIHNwZWVjaCByZWNvZ25pdGlvbiBmcm9tIG1pY3JvcGhvbmUsIGZpbGUsIG9yIG90aGVyIGF1ZGlvIGlucHV0IHN0cmVhbXMsIGFuZCBnZXRzIHRyYW5zY3JpYmVkIHRleHQgYXMgcmVzdWx0LlxuICogQGNsYXNzIFNwZWVjaFJlY29nbml6ZXJcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWVjaFJlY29nbml6ZXIgZXh0ZW5kcyBSZWNvZ25pemVyIHtcbiAgICAvKipcbiAgICAgKiBTcGVlY2hSZWNvZ25pemVyIGNvbnN0cnVjdG9yLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7U3BlZWNoQ29uZmlnfSBzcGVlY2hDb25maWcgLSBhbiBzZXQgb2YgaW5pdGlhbCBwcm9wZXJ0aWVzIGZvciB0aGlzIHJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0ge0F1ZGlvQ29uZmlnfSBhdWRpb0NvbmZpZyAtIEFuIG9wdGlvbmFsIGF1ZGlvIGNvbmZpZ3VyYXRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSByZWNvZ25pemVyXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc3BlZWNoQ29uZmlnLCBhdWRpb0NvbmZpZykge1xuICAgICAgICBjb25zdCBzcGVlY2hDb25maWdJbXBsID0gc3BlZWNoQ29uZmlnO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwoc3BlZWNoQ29uZmlnSW1wbCwgXCJzcGVlY2hDb25maWdcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShzcGVlY2hDb25maWdJbXBsLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UpLCBQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlXSk7XG4gICAgICAgIHN1cGVyKGF1ZGlvQ29uZmlnLCBzcGVlY2hDb25maWdJbXBsLnByb3BlcnRpZXMsIG5ldyBTcGVlY2hDb25uZWN0aW9uRmFjdG9yeSgpKTtcbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZWRSZWNvZ25pemVyID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWVjaFJlY29nbml6ZXIgY29uc3RydWN0b3IuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtTcGVlY2hDb25maWd9IHNwZWVjaENvbmZpZyAtIGFuIHNldCBvZiBpbml0aWFsIHByb3BlcnRpZXMgZm9yIHRoaXMgcmVjb2duaXplclxuICAgICAqIEBwYXJhbSB7QXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnfSBhdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWcgLSBBbiBzb3VyY2UgbGFuZ3VhZ2UgZGV0ZWN0aW9uIGNvbmZpZ3VyYXRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSByZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtBdWRpb0NvbmZpZ30gYXVkaW9Db25maWcgLSBBbiBvcHRpb25hbCBhdWRpbyBjb25maWd1cmF0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVjb2duaXplclxuICAgICAqL1xuICAgIHN0YXRpYyBGcm9tQ29uZmlnKHNwZWVjaENvbmZpZywgYXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnLCBhdWRpb0NvbmZpZykge1xuICAgICAgICBjb25zdCBzcGVlY2hDb25maWdJbXBsID0gc3BlZWNoQ29uZmlnO1xuICAgICAgICBhdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWcucHJvcGVydGllcy5tZXJnZVRvKHNwZWVjaENvbmZpZ0ltcGwucHJvcGVydGllcyk7XG4gICAgICAgIGNvbnN0IHJlY29nbml6ZXIgPSBuZXcgU3BlZWNoUmVjb2duaXplcihzcGVlY2hDb25maWcsIGF1ZGlvQ29uZmlnKTtcbiAgICAgICAgcmV0dXJuIHJlY29nbml6ZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGVuZHBvaW50IGlkIG9mIGEgY3VzdG9taXplZCBzcGVlY2ggbW9kZWwgdGhhdCBpcyB1c2VkIGZvciBzcGVlY2ggcmVjb2duaXRpb24uXG4gICAgICogQG1lbWJlciBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5lbmRwb2ludElkXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBlbmRwb2ludCBpZCBvZiBhIGN1c3RvbWl6ZWQgc3BlZWNoIG1vZGVsIHRoYXQgaXMgdXNlZCBmb3Igc3BlZWNoIHJlY29nbml0aW9uLlxuICAgICAqL1xuICAgIGdldCBlbmRwb2ludElkKCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkUmVjb2duaXplcik7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludElkLCBcIjAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMFwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiB1c2VkIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIHNlcnZpY2UuXG4gICAgICogQG1lbWJlciBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5hdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBnZXQgYXV0aG9yaXphdGlvblRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzL1NldHMgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBzZXJ2aWNlLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUuYXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIEF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICovXG4gICAgc2V0IGF1dGhvcml6YXRpb25Ub2tlbih0b2tlbikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodG9rZW4sIFwidG9rZW5cIik7XG4gICAgICAgIHRoaXMucHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCB0b2tlbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHNwb2tlbiBsYW5ndWFnZSBvZiByZWNvZ25pdGlvbi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIHNwb2tlbiBsYW5ndWFnZSBvZiByZWNvZ25pdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZSgpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZFJlY29nbml6ZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgb3V0cHV0IGZvcm1hdCBvZiByZWNvZ25pdGlvbi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLm91dHB1dEZvcm1hdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7T3V0cHV0Rm9ybWF0fSBUaGUgb3V0cHV0IGZvcm1hdCBvZiByZWNvZ25pdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgb3V0cHV0Rm9ybWF0KCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkUmVjb2duaXplcik7XG4gICAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCBPdXRwdXRGb3JtYXRbT3V0cHV0Rm9ybWF0LlNpbXBsZV0pID09PSBPdXRwdXRGb3JtYXRbT3V0cHV0Rm9ybWF0LlNpbXBsZV0pIHtcbiAgICAgICAgICAgIHJldHVybiBPdXRwdXRGb3JtYXQuU2ltcGxlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIE91dHB1dEZvcm1hdC5EZXRhaWxlZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMgZGVmaW5lZCBmb3IgdGhpcyBTcGVlY2hSZWNvZ25pemVyLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUucHJvcGVydGllc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7UHJvcGVydHlDb2xsZWN0aW9ufSBUaGUgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMgZGVmaW5lZCBmb3IgdGhpcyBTcGVlY2hSZWNvZ25pemVyLlxuICAgICAqL1xuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHNwZWVjaCByZWNvZ25pdGlvbiwgYW5kIHN0b3BzIGFmdGVyIHRoZSBmaXJzdCB1dHRlcmFuY2UgaXMgcmVjb2duaXplZC5cbiAgICAgKiBUaGUgdGFzayByZXR1cm5zIHRoZSByZWNvZ25pdGlvbiB0ZXh0IGFzIHJlc3VsdC5cbiAgICAgKiBOb3RlOiBSZWNvZ25pemVPbmNlQXN5bmMoKSByZXR1cm5zIHdoZW4gdGhlIGZpcnN0IHV0dGVyYW5jZSBoYXMgYmVlbiByZWNvZ25pemVkLFxuICAgICAqIHNvIGl0IGlzIHN1aXRhYmxlIG9ubHkgZm9yIHNpbmdsZSBzaG90IHJlY29nbml0aW9uXG4gICAgICogbGlrZSBjb21tYW5kIG9yIHF1ZXJ5LiBGb3IgbG9uZy1ydW5uaW5nIHJlY29nbml0aW9uLCB1c2UgU3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYygpIGluc3RlYWQuXG4gICAgICogQG1lbWJlciBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5yZWNvZ25pemVPbmNlQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgdGhhdCByZWNlaXZlZCB0aGUgU3BlZWNoUmVjb2duaXRpb25SZXN1bHQuXG4gICAgICogQHBhcmFtIGVyciAtIENhbGxiYWNrIGludm9rZWQgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKi9cbiAgICByZWNvZ25pemVPbmNlQXN5bmMoY2IsIGVycikge1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMucmVjb2duaXplT25jZUFzeW5jSW1wbChSZWNvZ25pdGlvbk1vZGUuSW50ZXJhY3RpdmUpLCBjYiwgZXJyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHNwZWVjaCByZWNvZ25pdGlvbiwgdW50aWwgc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKCkgaXMgY2FsbGVkLlxuICAgICAqIFVzZXIgbXVzdCBzdWJzY3JpYmUgdG8gZXZlbnRzIHRvIHJlY2VpdmUgcmVjb2duaXRpb24gcmVzdWx0cy5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLnN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgaW52b2tlZCBvbmNlIHRoZSByZWNvZ25pdGlvbiBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIHN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmMoY2IsIGVycikge1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMuc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luY0ltcGwoUmVjb2duaXRpb25Nb2RlLkNvbnZlcnNhdGlvbiksIGNiLCBlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wcyBjb250aW51b3VzIHNwZWVjaCByZWNvZ25pdGlvbi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLnN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayBpbnZva2VkIG9uY2UgdGhlIHJlY29nbml0aW9uIGhhcyBzdG9wcGVkLlxuICAgICAqIEBwYXJhbSBlcnIgLSBDYWxsYmFjayBpbnZva2VkIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICovXG4gICAgc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKGNiLCBlcnIpIHtcbiAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyh0aGlzLnN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luY0ltcGwoKSwgY2IsIGVycik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBzcGVlY2ggcmVjb2duaXRpb24gd2l0aCBrZXl3b3JkIHNwb3R0aW5nLCB1bnRpbFxuICAgICAqIHN0b3BLZXl3b3JkUmVjb2duaXRpb25Bc3luYygpIGlzIGNhbGxlZC5cbiAgICAgKiBVc2VyIG11c3Qgc3Vic2NyaWJlIHRvIGV2ZW50cyB0byByZWNlaXZlIHJlY29nbml0aW9uIHJlc3VsdHMuXG4gICAgICogTm90ZTogS2V5IHdvcmQgc3BvdHRpbmcgZnVuY3Rpb25hbGl0eSBpcyBvbmx5IGF2YWlsYWJsZSBvbiB0aGVcbiAgICAgKiBTcGVlY2ggRGV2aWNlcyBTREsuIFRoaXMgZnVuY3Rpb25hbGl0eSBpcyBjdXJyZW50bHkgbm90IGluY2x1ZGVkIGluIHRoZSBTREsgaXRzZWxmLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoUmVjb2duaXplci5wcm90b3R5cGUuc3RhcnRLZXl3b3JkUmVjb2duaXRpb25Bc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge0tleXdvcmRSZWNvZ25pdGlvbk1vZGVsfSBtb2RlbCBUaGUga2V5d29yZCByZWNvZ25pdGlvbiBtb2RlbCB0aGF0XG4gICAgICogc3BlY2lmaWVzIHRoZSBrZXl3b3JkIHRvIGJlIHJlY29nbml6ZWQuXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgaW52b2tlZCBvbmNlIHRoZSByZWNvZ25pdGlvbiBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIHN0YXJ0S2V5d29yZFJlY29nbml0aW9uQXN5bmMobW9kZWwsIGNiLCBlcnIpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKG1vZGVsLCBcIm1vZGVsXCIpO1xuICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgIGVycihcIk5vdCB5ZXQgaW1wbGVtZW50ZWQuXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIGNvbnRpbnVvdXMgc3BlZWNoIHJlY29nbml0aW9uLlxuICAgICAqIE5vdGU6IEtleSB3b3JkIHNwb3R0aW5nIGZ1bmN0aW9uYWxpdHkgaXMgb25seSBhdmFpbGFibGUgb24gdGhlXG4gICAgICogU3BlZWNoIERldmljZXMgU0RLLiBUaGlzIGZ1bmN0aW9uYWxpdHkgaXMgY3VycmVudGx5IG5vdCBpbmNsdWRlZCBpbiB0aGUgU0RLIGl0c2VsZi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLnN0b3BLZXl3b3JkUmVjb2duaXRpb25Bc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayBpbnZva2VkIG9uY2UgdGhlIHJlY29nbml0aW9uIGhhcyBzdG9wcGVkLlxuICAgICAqIEBwYXJhbSBlcnIgLSBDYWxsYmFjayBpbnZva2VkIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICovXG4gICAgc3RvcEtleXdvcmRSZWNvZ25pdGlvbkFzeW5jKGNiKSB7XG4gICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICBjYigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGNsb3NlcyBhbGwgZXh0ZXJuYWwgcmVzb3VyY2VzIGhlbGQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFJlY29nbml6ZXIucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKGNiLCBlcnJvckNiKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWRSZWNvZ25pemVyKTtcbiAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyh0aGlzLmRpc3Bvc2UodHJ1ZSksIGNiLCBlcnJvckNiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcG9zZXMgYW55IHJlc291cmNlcyBoZWxkIGJ5IHRoZSBvYmplY3QuXG4gICAgICogQG1lbWJlciBTcGVlY2hSZWNvZ25pemVyLnByb3RvdHlwZS5kaXNwb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGlzcG9zaW5nIC0gdHJ1ZSBpZiBkaXNwb3NpbmcgdGhlIG9iamVjdC5cbiAgICAgKi9cbiAgICBkaXNwb3NlKGRpc3Bvc2luZykge1xuICAgICAgICBjb25zdCBfc3VwZXIgPSBPYmplY3QuY3JlYXRlKG51bGwsIHtcbiAgICAgICAgICAgIGRpc3Bvc2U6IHsgZ2V0OiAoKSA9PiBzdXBlci5kaXNwb3NlIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2RGlzcG9zZWRSZWNvZ25pemVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpc3Bvc2luZykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkRpc3Bvc2VkUmVjb2duaXplciA9IHRydWU7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHlpZWxkIF9zdXBlci5kaXNwb3NlLmNhbGwodGhpcywgZGlzcG9zaW5nKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNyZWF0ZVJlY29nbml6ZXJDb25maWcoc3BlZWNoQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVjb2duaXplckNvbmZpZyhzcGVlY2hDb25maWcsIHRoaXMucHJpdlByb3BlcnRpZXMpO1xuICAgIH1cbiAgICBjcmVhdGVTZXJ2aWNlUmVjb2duaXplcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGF1ZGlvQ29uZmlnLCByZWNvZ25pemVyQ29uZmlnKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZ0ltcGwgPSBhdWRpb0NvbmZpZztcbiAgICAgICAgcmV0dXJuIG5ldyBTcGVlY2hTZXJ2aWNlUmVjb2duaXplcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGNvbmZpZ0ltcGwsIHJlY29nbml6ZXJDb25maWcsIHRoaXMpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoUmVjb2duaXplci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBEZWZpbmVzIGNvbnRlbnRzIG9mIHNwZWVjaCBzeW50aGVzaXMgYm9va21hcmsgZXZlbnQuXG4gKiBAY2xhc3MgU3BlZWNoU3ludGhlc2lzQm9va21hcmtFdmVudEFyZ3NcbiAqIEFkZGVkIGluIHZlcnNpb24gMS4xNi4wXG4gKi9cbmV4cG9ydCBjbGFzcyBTcGVlY2hTeW50aGVzaXNCb29rbWFya0V2ZW50QXJncyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYXVkaW9PZmZzZXQgLSBUaGUgYXVkaW8gb2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gVGhlIGJvb2ttYXJrIHRleHQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYXVkaW9PZmZzZXQsIHRleHQpIHtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9PZmZzZXQgPSBhdWRpb09mZnNldDtcbiAgICAgICAgdGhpcy5wcml2VGV4dCA9IHRleHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgYXVkaW8gb2Zmc2V0LlxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzQm9va21hcmtFdmVudEFyZ3MucHJvdG90eXBlLmF1ZGlvT2Zmc2V0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IHRoZSBhdWRpbyBvZmZzZXQuXG4gICAgICovXG4gICAgZ2V0IGF1ZGlvT2Zmc2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9PZmZzZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgYm9va21hcmsuXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNCb29rbWFya0V2ZW50QXJncy5wcm90b3R5cGUudGV4dFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgYm9va21hcmsgdGV4dC5cbiAgICAgKi9cbiAgICBnZXQgdGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlRleHQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hTeW50aGVzaXNCb29rbWFya0V2ZW50QXJncy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBEZWZpbmVzIHRoZSBib3VuZGFyeSB0eXBlIG9mIHNwZWVjaCBzeW50aGVzaXMgYm91bmRhcnkgZXZlbnQuXG4gKiBAY2xhc3MgU3BlZWNoU3ludGhlc2lzQm91bmRhcnlUeXBlXG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMjEuMFxuICovXG5leHBvcnQgdmFyIFNwZWVjaFN5bnRoZXNpc0JvdW5kYXJ5VHlwZTtcbihmdW5jdGlvbiAoU3BlZWNoU3ludGhlc2lzQm91bmRhcnlUeXBlKSB7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoZSBib3VuZGFyeSB0ZXh0IGlzIGEgd29yZC5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc0JvdW5kYXJ5VHlwZS5Xb3JkXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzQm91bmRhcnlUeXBlW1wiV29yZFwiXSA9IFwiV29yZEJvdW5kYXJ5XCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoZSBib3VuZGFyeSB0ZXh0IGlzIGEgcHVuY3R1YXRpb24uXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNCb3VuZGFyeVR5cGUuUHVuY3R1YXRpb25cbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNCb3VuZGFyeVR5cGVbXCJQdW5jdHVhdGlvblwiXSA9IFwiUHVuY3R1YXRpb25Cb3VuZGFyeVwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGUgYm91bmRhcnkgdGV4dCBpcyBhIHNlbnRlbmNlLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzQm91bmRhcnlUeXBlLlNlbnRlbmNlXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzQm91bmRhcnlUeXBlW1wiU2VudGVuY2VcIl0gPSBcIlNlbnRlbmNlQm91bmRhcnlcIjtcbn0pKFNwZWVjaFN5bnRoZXNpc0JvdW5kYXJ5VHlwZSB8fCAoU3BlZWNoU3ludGhlc2lzQm91bmRhcnlUeXBlID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoU3ludGhlc2lzQm91bmRhcnlUeXBlLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgY29udGVudHMgb2Ygc3BlZWNoIHN5bnRoZXNpcyBldmVudHMuXG4gKiBAY2xhc3MgU3BlZWNoU3ludGhlc2lzRXZlbnRBcmdzXG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTEuMFxuICovXG5leHBvcnQgY2xhc3MgU3BlZWNoU3ludGhlc2lzRXZlbnRBcmdzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7U3BlZWNoU3ludGhlc2lzUmVzdWx0fSByZXN1bHQgLSBUaGUgc3BlZWNoIHN5bnRoZXNpcyByZXN1bHQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVzdWx0KSB7XG4gICAgICAgIHRoaXMucHJpdlJlc3VsdCA9IHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSBzeW50aGVzaXMgcmVzdWx0LlxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzRXZlbnRBcmdzLnByb3RvdHlwZS5yZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1NwZWVjaFN5bnRoZXNpc1Jlc3VsdH0gdGhlIHN5bnRoZXNpcyByZXN1bHQuXG4gICAgICovXG4gICAgZ2V0IHJlc3VsdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlc3VsdDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaFN5bnRoZXNpc0V2ZW50QXJncy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBEZWZpbmUgc3BlZWNoIHN5bnRoZXNpcyBhdWRpbyBvdXRwdXQgZm9ybWF0cy5cbiAqIEBlbnVtIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFxuICogVXBkYXRlZCBpbiB2ZXJzaW9uIDEuMTcuMFxuICovXG5leHBvcnQgdmFyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdDtcbihmdW5jdGlvbiAoU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0KSB7XG4gICAgLyoqXG4gICAgICogcmF3LThraHotOGJpdC1tb25vLW11bGF3XG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmF3OEtoejhCaXRNb25vTVVMYXcsXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIlJhdzhLaHo4Qml0TW9ub01VTGF3XCJdID0gMF0gPSBcIlJhdzhLaHo4Qml0TW9ub01VTGF3XCI7XG4gICAgLyoqXG4gICAgICogcmlmZi0xNmtoei0xNmticHMtbW9uby1zaXJlblxuICAgICAqIEBub3RlIFVuc3VwcG9ydGVkIGJ5IHRoZSBzZXJ2aWNlLiBEbyBub3QgdXNlIHRoaXMgdmFsdWUuXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmlmZjE2S2h6MTZLYnBzTW9ub1NpcmVuXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIlJpZmYxNktoejE2S2Jwc01vbm9TaXJlblwiXSA9IDFdID0gXCJSaWZmMTZLaHoxNkticHNNb25vU2lyZW5cIjtcbiAgICAvKipcbiAgICAgKiBhdWRpby0xNmtoei0xNmticHMtbW9uby1zaXJlblxuICAgICAqIEBub3RlIFVuc3VwcG9ydGVkIGJ5IHRoZSBzZXJ2aWNlLiBEbyBub3QgdXNlIHRoaXMgdmFsdWUuXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuQXVkaW8xNktoejE2S2Jwc01vbm9TaXJlblxuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJBdWRpbzE2S2h6MTZLYnBzTW9ub1NpcmVuXCJdID0gMl0gPSBcIkF1ZGlvMTZLaHoxNkticHNNb25vU2lyZW5cIjtcbiAgICAvKipcbiAgICAgKiBhdWRpby0xNmtoei0zMmtiaXRyYXRlLW1vbm8tbXAzXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuQXVkaW8xNktoejMyS0JpdFJhdGVNb25vTXAzXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIkF1ZGlvMTZLaHozMktCaXRSYXRlTW9ub01wM1wiXSA9IDNdID0gXCJBdWRpbzE2S2h6MzJLQml0UmF0ZU1vbm9NcDNcIjtcbiAgICAvKipcbiAgICAgKiBhdWRpby0xNmtoei0xMjhrYml0cmF0ZS1tb25vLW1wM1xuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvMTZLaHoxMjhLQml0UmF0ZU1vbm9NcDNcbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiQXVkaW8xNktoejEyOEtCaXRSYXRlTW9ub01wM1wiXSA9IDRdID0gXCJBdWRpbzE2S2h6MTI4S0JpdFJhdGVNb25vTXAzXCI7XG4gICAgLyoqXG4gICAgICogYXVkaW8tMTZraHotNjRrYml0cmF0ZS1tb25vLW1wM1xuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvMTZLaHo2NEtCaXRSYXRlTW9ub01wM1xuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJBdWRpbzE2S2h6NjRLQml0UmF0ZU1vbm9NcDNcIl0gPSA1XSA9IFwiQXVkaW8xNktoejY0S0JpdFJhdGVNb25vTXAzXCI7XG4gICAgLyoqXG4gICAgICogYXVkaW8tMjRraHotNDhrYml0cmF0ZS1tb25vLW1wM1xuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvMjRLaHo0OEtCaXRSYXRlTW9ub01wM1xuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJBdWRpbzI0S2h6NDhLQml0UmF0ZU1vbm9NcDNcIl0gPSA2XSA9IFwiQXVkaW8yNEtoejQ4S0JpdFJhdGVNb25vTXAzXCI7XG4gICAgLyoqXG4gICAgICogYXVkaW8tMjRraHotOTZrYml0cmF0ZS1tb25vLW1wM1xuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvMjRLaHo5NktCaXRSYXRlTW9ub01wM1xuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJBdWRpbzI0S2h6OTZLQml0UmF0ZU1vbm9NcDNcIl0gPSA3XSA9IFwiQXVkaW8yNEtoejk2S0JpdFJhdGVNb25vTXAzXCI7XG4gICAgLyoqXG4gICAgICogYXVkaW8tMjRraHotMTYwa2JpdHJhdGUtbW9uby1tcDNcbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5BdWRpbzI0S2h6MTYwS0JpdFJhdGVNb25vTXAzXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIkF1ZGlvMjRLaHoxNjBLQml0UmF0ZU1vbm9NcDNcIl0gPSA4XSA9IFwiQXVkaW8yNEtoejE2MEtCaXRSYXRlTW9ub01wM1wiO1xuICAgIC8qKlxuICAgICAqIHJhdy0xNmtoei0xNmJpdC1tb25vLXRydWVzaWxrXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmF3MTZLaHoxNkJpdE1vbm9UcnVlU2lsa1xuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJSYXcxNktoejE2Qml0TW9ub1RydWVTaWxrXCJdID0gOV0gPSBcIlJhdzE2S2h6MTZCaXRNb25vVHJ1ZVNpbGtcIjtcbiAgICAvKipcbiAgICAgKiByaWZmLTE2a2h6LTE2Yml0LW1vbm8tcGNtXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmlmZjE2S2h6MTZCaXRNb25vUGNtXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIlJpZmYxNktoejE2Qml0TW9ub1BjbVwiXSA9IDEwXSA9IFwiUmlmZjE2S2h6MTZCaXRNb25vUGNtXCI7XG4gICAgLyoqXG4gICAgICogcmlmZi04a2h6LTE2Yml0LW1vbm8tcGNtXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmlmZjhLaHoxNkJpdE1vbm9QY21cbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiUmlmZjhLaHoxNkJpdE1vbm9QY21cIl0gPSAxMV0gPSBcIlJpZmY4S2h6MTZCaXRNb25vUGNtXCI7XG4gICAgLyoqXG4gICAgICogcmlmZi0yNGtoei0xNmJpdC1tb25vLXBjbVxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJpZmYyNEtoejE2Qml0TW9ub1BjbVxuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJSaWZmMjRLaHoxNkJpdE1vbm9QY21cIl0gPSAxMl0gPSBcIlJpZmYyNEtoejE2Qml0TW9ub1BjbVwiO1xuICAgIC8qKlxuICAgICAqIHJpZmYtOGtoei04Yml0LW1vbm8tbXVsYXdcbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SaWZmOEtoejhCaXRNb25vTVVMYXdcbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiUmlmZjhLaHo4Qml0TW9ub01VTGF3XCJdID0gMTNdID0gXCJSaWZmOEtoejhCaXRNb25vTVVMYXdcIjtcbiAgICAvKipcbiAgICAgKiByYXctMTZraHotMTZiaXQtbW9uby1wY21cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SYXcxNktoejE2Qml0TW9ub1BjbVxuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJSYXcxNktoejE2Qml0TW9ub1BjbVwiXSA9IDE0XSA9IFwiUmF3MTZLaHoxNkJpdE1vbm9QY21cIjtcbiAgICAvKipcbiAgICAgKiByYXctMjRraHotMTZiaXQtbW9uby1wY21cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SYXcyNEtoejE2Qml0TW9ub1BjbVxuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJSYXcyNEtoejE2Qml0TW9ub1BjbVwiXSA9IDE1XSA9IFwiUmF3MjRLaHoxNkJpdE1vbm9QY21cIjtcbiAgICAvKipcbiAgICAgKiByYXctOGtoei0xNmJpdC1tb25vLXBjbVxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJhdzhLaHoxNkJpdE1vbm9QY21cbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiUmF3OEtoejE2Qml0TW9ub1BjbVwiXSA9IDE2XSA9IFwiUmF3OEtoejE2Qml0TW9ub1BjbVwiO1xuICAgIC8qKlxuICAgICAqIG9nZy0xNmtoei0xNmJpdC1tb25vLW9wdXNcbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5PZ2cxNktoejE2Qml0TW9ub09wdXNcbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiT2dnMTZLaHoxNkJpdE1vbm9PcHVzXCJdID0gMTddID0gXCJPZ2cxNktoejE2Qml0TW9ub09wdXNcIjtcbiAgICAvKipcbiAgICAgKiBvZ2ctMjRraHotMTZiaXQtbW9uby1vcHVzXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuT2dnMjRLaHoxNkJpdE1vbm9PcHVzXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIk9nZzI0S2h6MTZCaXRNb25vT3B1c1wiXSA9IDE4XSA9IFwiT2dnMjRLaHoxNkJpdE1vbm9PcHVzXCI7XG4gICAgLyoqXG4gICAgICogcmF3LTQ4a2h6LTE2Yml0LW1vbm8tcGNtXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmF3NDhLaHoxNkJpdE1vbm9QY21cbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiUmF3NDhLaHoxNkJpdE1vbm9QY21cIl0gPSAxOV0gPSBcIlJhdzQ4S2h6MTZCaXRNb25vUGNtXCI7XG4gICAgLyoqXG4gICAgICogcmlmZi00OGtoei0xNmJpdC1tb25vLXBjbVxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJpZmY0OEtoejE2Qml0TW9ub1BjbVxuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJSaWZmNDhLaHoxNkJpdE1vbm9QY21cIl0gPSAyMF0gPSBcIlJpZmY0OEtoejE2Qml0TW9ub1BjbVwiO1xuICAgIC8qKlxuICAgICAqIGF1ZGlvLTQ4a2h6LTk2a2JpdHJhdGUtbW9uby1tcDNcbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5BdWRpbzQ4S2h6OTZLQml0UmF0ZU1vbm9NcDNcbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiQXVkaW80OEtoejk2S0JpdFJhdGVNb25vTXAzXCJdID0gMjFdID0gXCJBdWRpbzQ4S2h6OTZLQml0UmF0ZU1vbm9NcDNcIjtcbiAgICAvKipcbiAgICAgKiBhdWRpby00OGtoei0xOTJrYml0cmF0ZS1tb25vLW1wM1xuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvNDhLaHoxOTJLQml0UmF0ZU1vbm9NcDNcbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiQXVkaW80OEtoejE5MktCaXRSYXRlTW9ub01wM1wiXSA9IDIyXSA9IFwiQXVkaW80OEtoejE5MktCaXRSYXRlTW9ub01wM1wiO1xuICAgIC8qKlxuICAgICAqIG9nZy00OGtoei0xNmJpdC1tb25vLW9wdXNcbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTYuMFxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0Lk9nZzQ4S2h6MTZCaXRNb25vT3B1c1xuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJPZ2c0OEtoejE2Qml0TW9ub09wdXNcIl0gPSAyM10gPSBcIk9nZzQ4S2h6MTZCaXRNb25vT3B1c1wiO1xuICAgIC8qKlxuICAgICAqIHdlYm0tMTZraHotMTZiaXQtbW9uby1vcHVzXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjE2LjBcbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5XZWJtMTZLaHoxNkJpdE1vbm9PcHVzXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIldlYm0xNktoejE2Qml0TW9ub09wdXNcIl0gPSAyNF0gPSBcIldlYm0xNktoejE2Qml0TW9ub09wdXNcIjtcbiAgICAvKipcbiAgICAgKiB3ZWJtLTI0a2h6LTE2Yml0LW1vbm8tb3B1c1xuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xNi4wXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuV2VibTI0S2h6MTZCaXRNb25vT3B1c1xuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJXZWJtMjRLaHoxNkJpdE1vbm9PcHVzXCJdID0gMjVdID0gXCJXZWJtMjRLaHoxNkJpdE1vbm9PcHVzXCI7XG4gICAgLyoqXG4gICAgICogcmF3LTI0a2h6LTE2Yml0LW1vbm8tdHJ1ZXNpbGtcbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTcuMFxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJhdzI0S2h6MTZCaXRNb25vVHJ1ZVNpbGtcbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiUmF3MjRLaHoxNkJpdE1vbm9UcnVlU2lsa1wiXSA9IDI2XSA9IFwiUmF3MjRLaHoxNkJpdE1vbm9UcnVlU2lsa1wiO1xuICAgIC8qKlxuICAgICAqIHJhdy04a2h6LThiaXQtbW9uby1hbGF3XG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjE3LjBcbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5SYXc4S2h6OEJpdE1vbm9BTGF3XG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIlJhdzhLaHo4Qml0TW9ub0FMYXdcIl0gPSAyN10gPSBcIlJhdzhLaHo4Qml0TW9ub0FMYXdcIjtcbiAgICAvKipcbiAgICAgKiByaWZmLThraHotOGJpdC1tb25vLWFsYXdcbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTcuMFxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJpZmY4S2h6OEJpdE1vbm9BTGF3XG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIlJpZmY4S2h6OEJpdE1vbm9BTGF3XCJdID0gMjhdID0gXCJSaWZmOEtoejhCaXRNb25vQUxhd1wiO1xuICAgIC8qKlxuICAgICAqIHdlYm0tMjRraHotMTZiaXQtMjRrYnBzLW1vbm8tb3B1c1xuICAgICAqIEF1ZGlvIGNvbXByZXNzZWQgYnkgT1BVUyBjb2RlYyBpbiBhIHdlYm0gY29udGFpbmVyLCB3aXRoIGJpdHJhdGUgb2YgMjRrYnBzLCBvcHRpbWl6ZWQgZm9yIElvVCBzY2VuYXJpby5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMTkuMFxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LldlYm0yNEtoejE2Qml0MjRLYnBzTW9ub09wdXNcbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiV2VibTI0S2h6MTZCaXQyNEticHNNb25vT3B1c1wiXSA9IDI5XSA9IFwiV2VibTI0S2h6MTZCaXQyNEticHNNb25vT3B1c1wiO1xuICAgIC8qKlxuICAgICAqIGF1ZGlvLTE2a2h6LTE2Yml0LTMya2Jwcy1tb25vLW9wdXNcbiAgICAgKiBBdWRpbyBjb21wcmVzc2VkIGJ5IE9QVVMgY29kZWMgd2l0aG91dCBjb250YWluZXIsIHdpdGggYml0cmF0ZSBvZiAzMmticHMuXG4gICAgICogQWRkZWQgaW4gdmVyc2lvbiAxLjIwLjBcbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5BdWRpbzE2S2h6MTZCaXQzMkticHNNb25vT3B1c1xuICAgICAqL1xuICAgIFNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbXCJBdWRpbzE2S2h6MTZCaXQzMkticHNNb25vT3B1c1wiXSA9IDMwXSA9IFwiQXVkaW8xNktoejE2Qml0MzJLYnBzTW9ub09wdXNcIjtcbiAgICAvKipcbiAgICAgKiBhdWRpby0yNGtoei0xNmJpdC00OGticHMtbW9uby1vcHVzXG4gICAgICogQXVkaW8gY29tcHJlc3NlZCBieSBPUFVTIGNvZGVjIHdpdGhvdXQgY29udGFpbmVyLCB3aXRoIGJpdHJhdGUgb2YgNDhrYnBzLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4yMC4wXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuQXVkaW8yNEtoejE2Qml0NDhLYnBzTW9ub09wdXNcbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiQXVkaW8yNEtoejE2Qml0NDhLYnBzTW9ub09wdXNcIl0gPSAzMV0gPSBcIkF1ZGlvMjRLaHoxNkJpdDQ4S2Jwc01vbm9PcHVzXCI7XG4gICAgLyoqXG4gICAgICogYXVkaW8tMjRraHotMTZiaXQtMjRrYnBzLW1vbm8tb3B1c1xuICAgICAqIEF1ZGlvIGNvbXByZXNzZWQgYnkgT1BVUyBjb2RlYyB3aXRob3V0IGNvbnRhaW5lciwgd2l0aCBiaXRyYXRlIG9mIDI0a2Jwcy5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMjAuMFxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvMjRLaHoxNkJpdDI0S2Jwc01vbm9PcHVzXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIkF1ZGlvMjRLaHoxNkJpdDI0S2Jwc01vbm9PcHVzXCJdID0gMzJdID0gXCJBdWRpbzI0S2h6MTZCaXQyNEticHNNb25vT3B1c1wiO1xuICAgIC8qKlxuICAgICAqIHJhdy0yMjA1MGh6LTE2Yml0LW1vbm8tcGNtXG4gICAgICogUmF3IFBDTSBhdWRpbyBhdCAyMjA1MEh6IHNhbXBsaW5nIHJhdGUgYW5kIDE2LWJpdCBkZXB0aC5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMjIuMFxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJhdzIyMDUwSHoxNkJpdE1vbm9QY21cbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiUmF3MjIwNTBIejE2Qml0TW9ub1BjbVwiXSA9IDMzXSA9IFwiUmF3MjIwNTBIejE2Qml0TW9ub1BjbVwiO1xuICAgIC8qKlxuICAgICAqIHJpZmYtMjIwNTBoei0xNmJpdC1tb25vLXBjbVxuICAgICAqIFBDTSBhdWRpbyBhdCAyMjA1MEh6IHNhbXBsaW5nIHJhdGUgYW5kIDE2LWJpdCBkZXB0aCwgd2l0aCBSSUZGIGhlYWRlci5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMjIuMFxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJpZmYyMjA1MEh6MTZCaXRNb25vUGNtXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIlJpZmYyMjA1MEh6MTZCaXRNb25vUGNtXCJdID0gMzRdID0gXCJSaWZmMjIwNTBIejE2Qml0TW9ub1BjbVwiO1xuICAgIC8qKlxuICAgICAqIHJhdy00NDEwMGh6LTE2Yml0LW1vbm8tcGNtXG4gICAgICogUmF3IFBDTSBhdWRpbyBhdCA0NDEwMEh6IHNhbXBsaW5nIHJhdGUgYW5kIDE2LWJpdCBkZXB0aC5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMjIuMFxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJhdzQ0MTAwSHoxNkJpdE1vbm9QY21cbiAgICAgKi9cbiAgICBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1wiUmF3NDQxMDBIejE2Qml0TW9ub1BjbVwiXSA9IDM1XSA9IFwiUmF3NDQxMDBIejE2Qml0TW9ub1BjbVwiO1xuICAgIC8qKlxuICAgICAqIHJpZmYtNDQxMDBoei0xNmJpdC1tb25vLXBjbVxuICAgICAqIFBDTSBhdWRpbyBhdCA0NDEwMEh6IHNhbXBsaW5nIHJhdGUgYW5kIDE2LWJpdCBkZXB0aCwgd2l0aCBSSUZGIGhlYWRlci5cbiAgICAgKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMjIuMFxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LlJpZmY0NDEwMEh6MTZCaXRNb25vUGNtXG4gICAgICovXG4gICAgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0W1NwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdFtcIlJpZmY0NDEwMEh6MTZCaXRNb25vUGNtXCJdID0gMzZdID0gXCJSaWZmNDQxMDBIejE2Qml0TW9ub1BjbVwiO1xufSkoU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0IHx8IChTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQgPSB7fSkpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFN5bnRoZXNpc1Jlc3VsdCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogRGVmaW5lcyByZXN1bHQgb2Ygc3BlZWNoIHN5bnRoZXNpcy5cbiAqIEBjbGFzcyBTcGVlY2hTeW50aGVzaXNSZXN1bHRcbiAqIEFkZGVkIGluIHZlcnNpb24gMS4xMS4wXG4gKi9cbmV4cG9ydCBjbGFzcyBTcGVlY2hTeW50aGVzaXNSZXN1bHQgZXh0ZW5kcyBTeW50aGVzaXNSZXN1bHQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlc3VsdElkIC0gVGhlIHJlc3VsdCBpZC5cbiAgICAgKiBAcGFyYW0ge1Jlc3VsdFJlYXNvbn0gcmVhc29uIC0gVGhlIHJlYXNvbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBhdWRpb0RhdGEgLSBUaGUgc3ludGhlc2l6ZWQgYXVkaW8gYmluYXJ5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvckRldGFpbHMgLSBFcnJvciBkZXRhaWxzLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge1Byb3BlcnR5Q29sbGVjdGlvbn0gcHJvcGVydGllcyAtIEFkZGl0aW9uYWwgcHJvcGVydGllcywgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGF1ZGlvRHVyYXRpb24gLSBUaGUgYXVkaW8gZHVyYXRpb24uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVzdWx0SWQsIHJlYXNvbiwgYXVkaW9EYXRhLCBlcnJvckRldGFpbHMsIHByb3BlcnRpZXMsIGF1ZGlvRHVyYXRpb24pIHtcbiAgICAgICAgc3VwZXIocmVzdWx0SWQsIHJlYXNvbiwgZXJyb3JEZXRhaWxzLCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9EYXRhID0gYXVkaW9EYXRhO1xuICAgICAgICB0aGlzLnByaXZBdWRpb0R1cmF0aW9uID0gYXVkaW9EdXJhdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHN5bnRoZXNpemVkIGF1ZGlvIGRhdGFcbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc1Jlc3VsdC5wcm90b3R5cGUuYXVkaW9EYXRhXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtBcnJheUJ1ZmZlcn0gVGhlIHN5bnRoZXNpemVkIGF1ZGlvIGRhdGEuXG4gICAgICovXG4gICAgZ2V0IGF1ZGlvRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvRGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHRpbWUgZHVyYXRpb24gb2Ygc3ludGhlc2l6ZWQgYXVkaW8sIGluIHRpY2tzICgxMDAgbmFub3NlY29uZHMpLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzUmVzdWx0LnByb3RvdHlwZS5hdWRpb0R1cmF0aW9uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSB0aW1lIGR1cmF0aW9uIG9mIHN5bnRoZXNpemVkIGF1ZGlvLlxuICAgICAqL1xuICAgIGdldCBhdWRpb0R1cmF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QXVkaW9EdXJhdGlvbjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNwZWVjaFN5bnRoZXNpc1Jlc3VsdC5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBEZWZpbmVzIGNvbnRlbnRzIG9mIHNwZWVjaCBzeW50aGVzaXMgdmlzZW1lIGV2ZW50LlxuICogQGNsYXNzIFNwZWVjaFN5bnRoZXNpc1Zpc2VtZUV2ZW50QXJnc1xuICogQWRkZWQgaW4gdmVyc2lvbiAxLjE2LjBcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWVjaFN5bnRoZXNpc1Zpc2VtZUV2ZW50QXJncyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYXVkaW9PZmZzZXQgLSBUaGUgYXVkaW8gb2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2aXNlbWVJZCAtIFRoZSB2aXNlbWUgSUQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFuaW1hdGlvbiAtIFRoZSBhbmltYXRpb24sIGNvdWxkIGJlIGluIHN2ZyBvciBvdGhlciBmb3JtYXQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYXVkaW9PZmZzZXQsIHZpc2VtZUlkLCBhbmltYXRpb24pIHtcbiAgICAgICAgdGhpcy5wcml2QXVkaW9PZmZzZXQgPSBhdWRpb09mZnNldDtcbiAgICAgICAgdGhpcy5wcml2VmlzZW1lSWQgPSB2aXNlbWVJZDtcbiAgICAgICAgdGhpcy5wcml2QW5pbWF0aW9uID0gYW5pbWF0aW9uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIGF1ZGlvIG9mZnNldC5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc1Zpc2VtZUV2ZW50QXJncy5wcm90b3R5cGUuYXVkaW9PZmZzZXRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge251bWJlcn0gdGhlIGF1ZGlvIG9mZnNldC5cbiAgICAgKi9cbiAgICBnZXQgYXVkaW9PZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdWRpb09mZnNldDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSB2aXNlbWUgSUQuXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNWaXNlbWVFdmVudEFyZ3MucHJvdG90eXBlLnZpc2VtZUlkXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IHRoZSB2aXNlbWUgSUQuXG4gICAgICovXG4gICAgZ2V0IHZpc2VtZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VmlzZW1lSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgYW5pbWF0aW9uLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzVmlzZW1lRXZlbnRBcmdzLnByb3RvdHlwZS5hbmltYXRpb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gdGhlIGFuaW1hdGlvbiwgY291bGQgYmUgaW4gc3ZnIG9yIG90aGVyIGZvcm1hdC5cbiAgICAgKi9cbiAgICBnZXQgYW5pbWF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QW5pbWF0aW9uO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoU3ludGhlc2lzVmlzZW1lRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgY29udGVudHMgb2Ygc3BlZWNoIHN5bnRoZXNpcyB3b3JkIGJvdW5kYXJ5IGV2ZW50LlxuICogQGNsYXNzIFNwZWVjaFN5bnRoZXNpc1dvcmRCb3VuZGFyeUV2ZW50QXJnc1xuICogQWRkZWQgaW4gdmVyc2lvbiAxLjExLjBcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWVjaFN5bnRoZXNpc1dvcmRCb3VuZGFyeUV2ZW50QXJncyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYXVkaW9PZmZzZXQgLSBUaGUgYXVkaW8gb2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBhdWRpbyBkdXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFRoZSB0ZXh0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3b3JkTGVuZ3RoIC0gVGhlIGxlbmd0aCBvZiB0aGUgd29yZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGV4dE9mZnNldCAtIFRoZSB0ZXh0IG9mZnNldC5cbiAgICAgKiBAcGFyYW0ge1NwZWVjaFN5bnRoZXNpc0JvdW5kYXJ5VHlwZX0gYm91bmRhcnlUeXBlIC0gVGhlIGJvdW5kYXJ5IHR5cGVcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhdWRpb09mZnNldCwgZHVyYXRpb24sIHRleHQsIHdvcmRMZW5ndGgsIHRleHRPZmZzZXQsIGJvdW5kYXJ5VHlwZSkge1xuICAgICAgICB0aGlzLnByaXZBdWRpb09mZnNldCA9IGF1ZGlvT2Zmc2V0O1xuICAgICAgICB0aGlzLnByaXZEdXJhdGlvbiA9IGR1cmF0aW9uO1xuICAgICAgICB0aGlzLnByaXZUZXh0ID0gdGV4dDtcbiAgICAgICAgdGhpcy5wcml2V29yZExlbmd0aCA9IHdvcmRMZW5ndGg7XG4gICAgICAgIHRoaXMucHJpdlRleHRPZmZzZXQgPSB0ZXh0T2Zmc2V0O1xuICAgICAgICB0aGlzLnByaXZCb3VuZGFyeVR5cGUgPSBib3VuZGFyeVR5cGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgYXVkaW8gb2Zmc2V0LlxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzV29yZEJvdW5kYXJ5RXZlbnRBcmdzLnByb3RvdHlwZS5hdWRpb09mZnNldFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgYXVkaW8gb2Zmc2V0LlxuICAgICAqL1xuICAgIGdldCBhdWRpb09mZnNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvT2Zmc2V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIGR1cmF0aW9uLCBpbiB0aWNrcyAoMTAwIG5hbm9zZWNvbmRzKS5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc1dvcmRCb3VuZGFyeUV2ZW50QXJncy5wcm90b3R5cGUuZHVyYXRpb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge251bWJlcn0gRHVyYXRpb24gaW4gMTAwIG5hbm9zZWNvbmQgaW5jcmVtZW50cy5cbiAgICAgKi9cbiAgICBnZXQgZHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEdXJhdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSB0ZXh0IG9mIHRoZSB3b3JkIGJvdW5kYXJ5IGV2ZW50LlxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzV29yZEJvdW5kYXJ5RXZlbnRBcmdzLnByb3RvdHlwZS50ZXh0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSB0ZXh0LlxuICAgICAqL1xuICAgIGdldCB0ZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VGV4dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSB3b3JkIGxlbmd0aFxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2lzV29yZEJvdW5kYXJ5RXZlbnRBcmdzLnByb3RvdHlwZS53b3JkTGVuZ3RoXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IHRoZSB3b3JkIGxlbmd0aFxuICAgICAqL1xuICAgIGdldCB3b3JkTGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2V29yZExlbmd0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSB0ZXh0IG9mZnNldC5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpc1dvcmRCb3VuZGFyeUV2ZW50QXJncy5wcm90b3R5cGUudGV4dE9mZnNldFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgdGV4dCBvZmZzZXQuXG4gICAgICovXG4gICAgZ2V0IHRleHRPZmZzZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUZXh0T2Zmc2V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIGJvdW5kYXJ5IHR5cGUuXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXNXb3JkQm91bmRhcnlFdmVudEFyZ3MucHJvdG90eXBlLmJvdW5kYXJ5VHlwZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7U3BlZWNoU3ludGhlc2lzQm91bmRhcnlUeXBlfSB0aGUgYm91bmRhcnkgdHlwZS5cbiAgICAgKi9cbiAgICBnZXQgYm91bmRhcnlUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Qm91bmRhcnlUeXBlO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoU3ludGhlc2lzV29yZEJvdW5kYXJ5RXZlbnRBcmdzLmpzLm1hcFxuIiwiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWVtcHR5LWZ1bmN0aW9uICovXG4vLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgQXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlc09wZW5SYW5nZU9wdGlvbk5hbWUsIENvZ25pdGl2ZVN1YnNjcmlwdGlvbktleUF1dGhlbnRpY2F0aW9uLCBDb2duaXRpdmVUb2tlbkF1dGhlbnRpY2F0aW9uLCBDb250ZXh0LCBPUywgU3BlZWNoU2VydmljZUNvbmZpZywgU3BlZWNoU3ludGhlc2lzQ29ubmVjdGlvbkZhY3RvcnksIFN5bnRoZXNpc0FkYXB0ZXJCYXNlLCBTeW50aGVzaXNSZXN0QWRhcHRlciwgU3ludGhlc2l6ZXJDb25maWcsIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgY3JlYXRlTm9EYXNoR3VpZCwgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcywgUXVldWUgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IEF1ZGlvRmlsZVdyaXRlciB9IGZyb20gXCIuL0F1ZGlvL0F1ZGlvRmlsZVdyaXRlclwiO1xuaW1wb3J0IHsgQXVkaW9PdXRwdXRGb3JtYXRJbXBsIH0gZnJvbSBcIi4vQXVkaW8vQXVkaW9PdXRwdXRGb3JtYXRcIjtcbmltcG9ydCB7IFB1c2hBdWRpb091dHB1dFN0cmVhbUltcGwgfSBmcm9tIFwiLi9BdWRpby9BdWRpb091dHB1dFN0cmVhbVwiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBBdWRpb0NvbmZpZywgUHJvcGVydHlJZCwgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtLCBQdXNoQXVkaW9PdXRwdXRTdHJlYW1DYWxsYmFjaywgU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LCBTeW50aGVzaXNWb2ljZXNSZXN1bHQsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBEZWZpbmVzIHRoZSBjbGFzcyBTcGVlY2hTeW50aGVzaXplciBmb3IgdGV4dCB0byBzcGVlY2guXG4gKiBVcGRhdGVkIGluIHZlcnNpb24gMS4xNi4wXG4gKiBAY2xhc3MgU3BlZWNoU3ludGhlc2l6ZXJcbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWVjaFN5bnRoZXNpemVyIHtcbiAgICAvKipcbiAgICAgKiBTcGVlY2hTeW50aGVzaXplciBjb25zdHJ1Y3Rvci5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge1NwZWVjaENvbmZpZ30gc3BlZWNoQ29uZmlnIC0gQW4gc2V0IG9mIGluaXRpYWwgcHJvcGVydGllcyBmb3IgdGhpcyBzeW50aGVzaXplci5cbiAgICAgKiBAcGFyYW0ge0F1ZGlvQ29uZmlnfSBhdWRpb0NvbmZpZyAtIEFuIG9wdGlvbmFsIGF1ZGlvIGNvbmZpZ3VyYXRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBzeW50aGVzaXplci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzcGVlY2hDb25maWcsIGF1ZGlvQ29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHNwZWVjaENvbmZpZ0ltcGwgPSBzcGVlY2hDb25maWc7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChzcGVlY2hDb25maWdJbXBsLCBcInNwZWVjaENvbmZpZ1wiKTtcbiAgICAgICAgaWYgKGF1ZGlvQ29uZmlnICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoYXVkaW9Db25maWcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9Db25maWcgPSAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgPyB1bmRlZmluZWQgOiBBdWRpb0NvbmZpZy5mcm9tRGVmYXVsdFNwZWFrZXJPdXRwdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9Db25maWcgPSBhdWRpb0NvbmZpZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gc3BlZWNoQ29uZmlnSW1wbC5wcm9wZXJ0aWVzLmNsb25lKCk7XG4gICAgICAgIHRoaXMucHJpdkRpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdlN5bnRoZXNpemluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZDb25uZWN0aW9uRmFjdG9yeSA9IG5ldyBTcGVlY2hTeW50aGVzaXNDb25uZWN0aW9uRmFjdG9yeSgpO1xuICAgICAgICB0aGlzLnN5bnRoZXNpc1JlcXVlc3RRdWV1ZSA9IG5ldyBRdWV1ZSgpO1xuICAgICAgICB0aGlzLmltcGxDb21tb25TeW50aGVzaXplU2V0dXAoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiB1c2VkIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIHNlcnZpY2UuXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXplci5wcm90b3R5cGUuYXV0aG9yaXphdGlvblRva2VuXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICovXG4gICAgZ2V0IGF1dGhvcml6YXRpb25Ub2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cy9TZXRzIHRoZSBhdXRob3JpemF0aW9uIHRva2VuIHVzZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgc2VydmljZS5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpemVyLnByb3RvdHlwZS5hdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gQXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBzZXQgYXV0aG9yaXphdGlvblRva2VuKHRva2VuKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0b2tlbiwgXCJ0b2tlblwiKTtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4sIHRva2VuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbGxlY3Rpb24gb2YgcHJvcGVydGllcyBhbmQgdGhlaXIgdmFsdWVzIGRlZmluZWQgZm9yIHRoaXMgU3BlZWNoU3ludGhlc2l6ZXIuXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXplci5wcm90b3R5cGUucHJvcGVydGllc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7UHJvcGVydHlDb2xsZWN0aW9ufSBUaGUgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMgZGVmaW5lZCBmb3IgdGhpcyBTcGVlY2hTeW50aGVzaXplci5cbiAgICAgKi9cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyBpZiBhdXRvIGRldGVjdCBzb3VyY2UgbGFuZ3VhZ2UgaXMgZW5hYmxlZFxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2l6ZXIucHJvdG90eXBlLnByb3BlcnRpZXNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IGlmIGF1dG8gZGV0ZWN0IHNvdXJjZSBsYW5ndWFnZSBpcyBlbmFibGVkXG4gICAgICovXG4gICAgZ2V0IGF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0F1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZXMpID09PSBBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VzT3BlblJhbmdlT3B0aW9uTmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlZWNoU3ludGhlc2l6ZXIgY29uc3RydWN0b3IuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtTcGVlY2hDb25maWd9IHNwZWVjaENvbmZpZyAtIGFuIHNldCBvZiBpbml0aWFsIHByb3BlcnRpZXMgZm9yIHRoaXMgc3ludGhlc2l6ZXJcbiAgICAgKiBAcGFyYW0ge0F1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZ30gYXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnIC0gQW4gc291cmNlIGxhbmd1YWdlIGRldGVjdGlvbiBjb25maWd1cmF0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3ludGhlc2l6ZXJcbiAgICAgKiBAcGFyYW0ge0F1ZGlvQ29uZmlnfSBhdWRpb0NvbmZpZyAtIEFuIG9wdGlvbmFsIGF1ZGlvIGNvbmZpZ3VyYXRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBzeW50aGVzaXplclxuICAgICAqL1xuICAgIHN0YXRpYyBGcm9tQ29uZmlnKHNwZWVjaENvbmZpZywgYXV0b0RldGVjdFNvdXJjZUxhbmd1YWdlQ29uZmlnLCBhdWRpb0NvbmZpZykge1xuICAgICAgICBjb25zdCBzcGVlY2hDb25maWdJbXBsID0gc3BlZWNoQ29uZmlnO1xuICAgICAgICBhdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWcucHJvcGVydGllcy5tZXJnZVRvKHNwZWVjaENvbmZpZ0ltcGwucHJvcGVydGllcyk7XG4gICAgICAgIHJldHVybiBuZXcgU3BlZWNoU3ludGhlc2l6ZXIoc3BlZWNoQ29uZmlnLCBhdWRpb0NvbmZpZyk7XG4gICAgfVxuICAgIGJ1aWxkU3NtbCh0ZXh0KSB7XG4gICAgICAgIGNvbnN0IGxhbmd1YWdlVG9EZWZhdWx0Vm9pY2UgPSB7XG4gICAgICAgICAgICBbXCJhZi1aQVwiXTogXCJhZi1aQS1BZHJpTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJhbS1FVFwiXTogXCJhbS1FVC1BbWVoYU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiYXItQUVcIl06IFwiYXItQUUtRmF0aW1hTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJhci1CSFwiXTogXCJhci1CSC1BbGlOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImFyLURaXCJdOiBcImFyLURaLUFtaW5hTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJhci1FR1wiXTogXCJhci1FRy1TYWxtYU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiYXItSVFcIl06IFwiYXItSVEtQmFzc2VsTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJhci1KT1wiXTogXCJhci1KTy1TYW5hTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJhci1LV1wiXTogXCJhci1LVy1GYWhlZE5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiYXItTFlcIl06IFwiYXItTFktSW1hbk5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiYXItTUFcIl06IFwiYXItTUEtSmFtYWxOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImFyLVFBXCJdOiBcImFyLVFBLUFtYWxOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImFyLVNBXCJdOiBcImFyLVNBLUhhbWVkTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJhci1TWVwiXTogXCJhci1TWS1BbWFueU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiYXItVE5cIl06IFwiYXItVE4tSGVkaU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiYXItWUVcIl06IFwiYXItWUUtTWFyeWFtTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJiZy1CR1wiXTogXCJiZy1CRy1Cb3Jpc2xhdk5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiYm4tQkRcIl06IFwiYm4tQkQtTmFiYW5pdGFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImJuLUlOXCJdOiBcImJuLUlOLUJhc2hrYXJOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImNhLUVTXCJdOiBcImNhLUVTLUpvYW5hTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJjcy1DWlwiXTogXCJjcy1DWi1BbnRvbmluTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJjeS1HQlwiXTogXCJjeS1HQi1BbGVkTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJkYS1ES1wiXTogXCJkYS1ESy1DaHJpc3RlbE5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZGUtQVRcIl06IFwiZGUtQVQtSW5ncmlkTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJkZS1DSFwiXTogXCJkZS1DSC1KYW5OZXVyYWxcIixcbiAgICAgICAgICAgIFtcImRlLURFXCJdOiBcImRlLURFLUthdGphTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlbC1HUlwiXTogXCJlbC1HUi1BdGhpbmFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVuLUFVXCJdOiBcImVuLUFVLU5hdGFzaGFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVuLUNBXCJdOiBcImVuLUNBLUNsYXJhTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlbi1HQlwiXTogXCJlbi1HQi1MaWJieU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZW4tSEtcIl06IFwiZW4tSEstU2FtTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlbi1JRVwiXTogXCJlbi1JRS1Db25ub3JOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVuLUlOXCJdOiBcImVuLUlOLU5lZXJqYU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZW4tS0VcIl06IFwiZW4tS0UtQXNpbGlhTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlbi1OR1wiXTogXCJlbi1ORy1BYmVvTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlbi1OWlwiXTogXCJlbi1OWi1NaXRjaGVsbE5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZW4tUEhcIl06IFwiZW4tUEgtSmFtZXNOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVuLVNHXCJdOiBcImVuLVNHLUx1bmFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVuLVRaXCJdOiBcImVuLVRaLUVsaW11TmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlbi1VU1wiXTogXCJlbi1VUy1KZW5ueU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZW4tWkFcIl06IFwiZW4tWkEtTGVhaE5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZXMtQVJcIl06IFwiZXMtQVItRWxlbmFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVzLUJPXCJdOiBcImVzLUJPLU1hcmNlbG9OZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVzLUNMXCJdOiBcImVzLUNMLUNhdGFsaW5hTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlcy1DT1wiXTogXCJlcy1DTy1Hb256YWxvTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlcy1DUlwiXTogXCJlcy1DUi1KdWFuTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlcy1DVVwiXTogXCJlcy1DVS1CZWxreXNOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVzLURPXCJdOiBcImVzLURPLUVtaWxpb05ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZXMtRUNcIl06IFwiZXMtRUMtQW5kcmVhTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlcy1FU1wiXTogXCJlcy1FUy1BbHZhcm9OZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVzLUdRXCJdOiBcImVzLUdRLUphdmllck5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZXMtR1RcIl06IFwiZXMtR1QtQW5kcmVzTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlcy1ITlwiXTogXCJlcy1ITi1DYXJsb3NOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVzLU1YXCJdOiBcImVzLU1YLURhbGlhTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlcy1OSVwiXTogXCJlcy1OSS1GZWRlcmljb05ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZXMtUEFcIl06IFwiZXMtUEEtTWFyZ2FyaXRhTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlcy1QRVwiXTogXCJlcy1QRS1BbGV4TmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlcy1QUlwiXTogXCJlcy1QUi1LYXJpbmFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVzLVBZXCJdOiBcImVzLVBZLU1hcmlvTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJlcy1TVlwiXTogXCJlcy1TVi1Mb3JlbmFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVzLVVTXCJdOiBcImVzLVVTLUFsb25zb05ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZXMtVVlcIl06IFwiZXMtVVktTWF0ZW9OZXVyYWxcIixcbiAgICAgICAgICAgIFtcImVzLVZFXCJdOiBcImVzLVZFLVBhb2xhTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJldC1FRVwiXTogXCJldC1FRS1BbnVOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImZhLUlSXCJdOiBcImZhLUlSLURpbGFyYU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZmktRklcIl06IFwiZmktRkktU2VsbWFOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImZpbC1QSFwiXTogXCJmaWwtUEgtQW5nZWxvTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJmci1CRVwiXTogXCJmci1CRS1DaGFybGluZU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZnItQ0FcIl06IFwiZnItQ0EtU3lsdmllTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJmci1DSFwiXTogXCJmci1DSC1BcmlhbmVOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImZyLUZSXCJdOiBcImZyLUZSLURlbmlzZU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZ2EtSUVcIl06IFwiZ2EtSUUtQ29sbU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiZ2wtRVNcIl06IFwiZ2wtRVMtUm9pTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJndS1JTlwiXTogXCJndS1JTi1EaHdhbmlOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImhlLUlMXCJdOiBcImhlLUlMLUF2cmlOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImhpLUlOXCJdOiBcImhpLUlOLU1hZGh1ck5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiaHItSFJcIl06IFwiaHItSFItR2FicmlqZWxhTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJodS1IVVwiXTogXCJodS1IVS1Ob2VtaU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiaWQtSURcIl06IFwiaWQtSUQtQXJkaU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiaXMtSVNcIl06IFwiaXMtSVMtR3VkcnVuTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJpdC1JVFwiXTogXCJpdC1JVC1Jc2FiZWxsYU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wiamEtSlBcIl06IFwiamEtSlAtTmFuYW1pTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJqdi1JRFwiXTogXCJqdi1JRC1EaW1hc05ldXJhbFwiLFxuICAgICAgICAgICAgW1wia2stS1pcIl06IFwia2stS1otQWlndWxOZXVyYWxcIixcbiAgICAgICAgICAgIFtcImttLUtIXCJdOiBcImttLUtILVBpc2V0aE5ldXJhbFwiLFxuICAgICAgICAgICAgW1wia24tSU5cIl06IFwia24tSU4tR2FnYW5OZXVyYWxcIixcbiAgICAgICAgICAgIFtcImtvLUtSXCJdOiBcImtvLUtSLVN1bkhpTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJsby1MQVwiXTogXCJsby1MQS1DaGFudGhhdm9uZ05ldXJhbFwiLFxuICAgICAgICAgICAgW1wibHQtTFRcIl06IFwibHQtTFQtTGVvbmFzTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJsdi1MVlwiXTogXCJsdi1MVi1FdmVyaXRhTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJtay1NS1wiXTogXCJtay1NSy1BbGVrc2FuZGFyTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJtbC1JTlwiXTogXCJtbC1JTi1NaWRodW5OZXVyYWxcIixcbiAgICAgICAgICAgIFtcIm1yLUlOXCJdOiBcIm1yLUlOLUFhcm9oaU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wibXMtTVlcIl06IFwibXMtTVktT3NtYW5OZXVyYWxcIixcbiAgICAgICAgICAgIFtcIm10LU1UXCJdOiBcIm10LU1ULUdyYWNlTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJteS1NTVwiXTogXCJteS1NTS1OaWxhck5ldXJhbFwiLFxuICAgICAgICAgICAgW1wibmItTk9cIl06IFwibmItTk8tUGVybmlsbGVOZXVyYWxcIixcbiAgICAgICAgICAgIFtcIm5sLUJFXCJdOiBcIm5sLUJFLUFybmF1ZE5ldXJhbFwiLFxuICAgICAgICAgICAgW1wibmwtTkxcIl06IFwibmwtTkwtQ29sZXR0ZU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wicGwtUExcIl06IFwicGwtUEwtQWduaWVzemthTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJwcy1BRlwiXTogXCJwcy1BRi1HdWxOYXdhek5ldXJhbFwiLFxuICAgICAgICAgICAgW1wicHQtQlJcIl06IFwicHQtQlItRnJhbmNpc2NhTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJwdC1QVFwiXTogXCJwdC1QVC1EdWFydGVOZXVyYWxcIixcbiAgICAgICAgICAgIFtcInJvLVJPXCJdOiBcInJvLVJPLUFsaW5hTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJydS1SVVwiXTogXCJydS1SVS1TdmV0bGFuYU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wic2ktTEtcIl06IFwic2ktTEstU2FtZWVyYU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wic2stU0tcIl06IFwic2stU0stTHVrYXNOZXVyYWxcIixcbiAgICAgICAgICAgIFtcInNsLVNJXCJdOiBcInNsLVNJLVBldHJhTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJzby1TT1wiXTogXCJzby1TTy1NdXVzZU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wic3ItUlNcIl06IFwic3ItUlMtTmljaG9sYXNOZXVyYWxcIixcbiAgICAgICAgICAgIFtcInN1LUlEXCJdOiBcInN1LUlELUphamFuZ05ldXJhbFwiLFxuICAgICAgICAgICAgW1wic3YtU0VcIl06IFwic3YtU0UtU29maWVOZXVyYWxcIixcbiAgICAgICAgICAgIFtcInN3LUtFXCJdOiBcInN3LUtFLVJhZmlraU5ldXJhbFwiLFxuICAgICAgICAgICAgW1wic3ctVFpcIl06IFwic3ctVFotRGF1ZGlOZXVyYWxcIixcbiAgICAgICAgICAgIFtcInRhLUlOXCJdOiBcInRhLUlOLVBhbGxhdmlOZXVyYWxcIixcbiAgICAgICAgICAgIFtcInRhLUxLXCJdOiBcInRhLUxLLUt1bWFyTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJ0YS1TR1wiXTogXCJ0YS1TRy1BbmJ1TmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJ0ZS1JTlwiXTogXCJ0ZS1JTi1Nb2hhbk5ldXJhbFwiLFxuICAgICAgICAgICAgW1widGgtVEhcIl06IFwidGgtVEgtUHJlbXdhZGVlTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJ0ci1UUlwiXTogXCJ0ci1UUi1BaG1ldE5ldXJhbFwiLFxuICAgICAgICAgICAgW1widWstVUFcIl06IFwidWstVUEtT3N0YXBOZXVyYWxcIixcbiAgICAgICAgICAgIFtcInVyLUlOXCJdOiBcInVyLUlOLUd1bE5ldXJhbFwiLFxuICAgICAgICAgICAgW1widXItUEtcIl06IFwidXItUEstQXNhZE5ldXJhbFwiLFxuICAgICAgICAgICAgW1widXotVVpcIl06IFwidXotVVotTWFkaW5hTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJ2aS1WTlwiXTogXCJ2aS1WTi1Ib2FpTXlOZXVyYWxcIixcbiAgICAgICAgICAgIFtcInpoLUNOXCJdOiBcInpoLUNOLVhpYW94aWFvTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJ6aC1IS1wiXTogXCJ6aC1ISy1IaXVNYWFuTmV1cmFsXCIsXG4gICAgICAgICAgICBbXCJ6aC1UV1wiXTogXCJ6aC1UVy1Ic2lhb0NoZW5OZXVyYWxcIixcbiAgICAgICAgICAgIFtcInp1LVpBXCJdOiBcInp1LVpBLVRoYW5kb05ldXJhbFwiLFxuICAgICAgICB9O1xuICAgICAgICBsZXQgbGFuZ3VhZ2UgPSB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aExhbmd1YWdlLCBcImVuLVVTXCIpO1xuICAgICAgICBsZXQgdm9pY2UgPSB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aFZvaWNlLCBcIlwiKTtcbiAgICAgICAgbGV0IHNzbWwgPSBTcGVlY2hTeW50aGVzaXplci5YTUxFbmNvZGUodGV4dCk7XG4gICAgICAgIGlmICh0aGlzLmF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZSkge1xuICAgICAgICAgICAgbGFuZ3VhZ2UgPSBcImVuLVVTXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2b2ljZSA9IHZvaWNlIHx8IGxhbmd1YWdlVG9EZWZhdWx0Vm9pY2VbbGFuZ3VhZ2VdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2b2ljZSkge1xuICAgICAgICAgICAgc3NtbCA9IGA8dm9pY2UgbmFtZT0nJHt2b2ljZX0nPiR7c3NtbH08L3ZvaWNlPmA7XG4gICAgICAgIH1cbiAgICAgICAgc3NtbCA9IGA8c3BlYWsgdmVyc2lvbj0nMS4wJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMS8xMC9zeW50aGVzaXMnIHhtbG5zOm1zdHRzPSdodHRwOi8vd3d3LnczLm9yZy8yMDAxL21zdHRzJyB4bWxuczplbW89J2h0dHA6Ly93d3cudzMub3JnLzIwMDkvMTAvZW1vdGlvbm1sJyB4bWw6bGFuZz0nJHtsYW5ndWFnZX0nPiR7c3NtbH08L3NwZWFrPmA7XG4gICAgICAgIHJldHVybiBzc21sO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyBzcGVlY2ggc3ludGhlc2lzIG9uIHBsYWluIHRleHQuXG4gICAgICogVGhlIHRhc2sgcmV0dXJucyB0aGUgc3ludGhlc2lzIHJlc3VsdC5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpemVyLnByb3RvdHlwZS5zcGVha1RleHRBc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gdGV4dCAtIFRleHQgdG8gYmUgc3ludGhlc2l6ZWQuXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgdGhhdCByZWNlaXZlZCB0aGUgU3BlZWNoU3ludGhlc2lzUmVzdWx0LlxuICAgICAqIEBwYXJhbSBlcnIgLSBDYWxsYmFjayBpbnZva2VkIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICogQHBhcmFtIHN0cmVhbSAtIEF1ZGlvT3V0cHV0U3RyZWFtIHRvIHJlY2VpdmUgdGhlIHN5bnRoZXNpemVkIGF1ZGlvLlxuICAgICAqL1xuICAgIHNwZWFrVGV4dEFzeW5jKHRleHQsIGNiLCBlcnIsIHN0cmVhbSkge1xuICAgICAgICB0aGlzLnNwZWFrSW1wbCh0ZXh0LCBmYWxzZSwgY2IsIGVyciwgc3RyZWFtKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgc3BlZWNoIHN5bnRoZXNpcyBvbiBTU01MLlxuICAgICAqIFRoZSB0YXNrIHJldHVybnMgdGhlIHN5bnRoZXNpcyByZXN1bHQuXG4gICAgICogQG1lbWJlciBTcGVlY2hTeW50aGVzaXplci5wcm90b3R5cGUuc3BlYWtTc21sQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHNzbWwgLSBTU01MIHRvIGJlIHN5bnRoZXNpemVkLlxuICAgICAqIEBwYXJhbSBjYiAtIENhbGxiYWNrIHRoYXQgcmVjZWl2ZWQgdGhlIFNwZWVjaFN5bnRoZXNpc1Jlc3VsdC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqIEBwYXJhbSBzdHJlYW0gLSBBdWRpb091dHB1dFN0cmVhbSB0byByZWNlaXZlIHRoZSBzeW50aGVzaXplZCBhdWRpby5cbiAgICAgKi9cbiAgICBzcGVha1NzbWxBc3luYyhzc21sLCBjYiwgZXJyLCBzdHJlYW0pIHtcbiAgICAgICAgdGhpcy5zcGVha0ltcGwoc3NtbCwgdHJ1ZSwgY2IsIGVyciwgc3RyZWFtKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGxpc3Qgb2Ygc3ludGhlc2lzIHZvaWNlcyBhdmFpbGFibGUuXG4gICAgICogVGhlIHRhc2sgcmV0dXJucyB0aGUgc3ludGhlc2lzIHZvaWNlIHJlc3VsdC5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFN5bnRoZXNpemVyLnByb3RvdHlwZS5nZXRWb2ljZXNBc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBhc3luY1xuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gbG9jYWxlIC0gTG9jYWxlIG9mIHZvaWNlcyBpbiBCQ1AtNDcgZm9ybWF0OyBpZiBsZWZ0IGVtcHR5LCBnZXQgYWxsIGF2YWlsYWJsZSB2b2ljZXMuXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxTeW50aGVzaXNWb2ljZXNSZXN1bHQ+fSAtIFByb21pc2Ugb2YgYSBTeW50aGVzaXNWb2ljZXNSZXN1bHQuXG4gICAgICovXG4gICAgZ2V0Vm9pY2VzQXN5bmMobG9jYWxlID0gXCJcIikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Vm9pY2VzKGxvY2FsZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIG9mIGFzc29jaWF0ZWQgcmVzb3VyY2VzLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2l6ZXIucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKGNiLCBlcnIpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZCk7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5kaXNwb3NlKHRydWUpLCBjYiwgZXJyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQEludGVybmFsXG4gICAgICogRG8gbm90IHVzZSBleHRlcm5hbGx5LCBvYmplY3QgcmV0dXJuZWQgd2lsbCBjaGFuZ2Ugd2l0aG91dCB3YXJuaW5nIG9yIG5vdGljZS5cbiAgICAgKi9cbiAgICBnZXQgaW50ZXJuYWxEYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2QWRhcHRlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgcGVyZm9ybXMgY2xlYW51cCBvZiByZXNvdXJjZXMuXG4gICAgICogVGhlIEJvb2xlYW4gcGFyYW1ldGVyIGRpc3Bvc2luZyBpbmRpY2F0ZXMgd2hldGhlciB0aGUgbWV0aG9kIGlzIGNhbGxlZFxuICAgICAqIGZyb20gRGlzcG9zZSAoaWYgZGlzcG9zaW5nIGlzIHRydWUpIG9yIGZyb20gdGhlIGZpbmFsaXplciAoaWYgZGlzcG9zaW5nIGlzIGZhbHNlKS5cbiAgICAgKiBEZXJpdmVkIGNsYXNzZXMgc2hvdWxkIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGRpc3Bvc2UgcmVzb3VyY2UgaWYgbmVlZGVkLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoU3ludGhlc2l6ZXIucHJvdG90eXBlLmRpc3Bvc2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtib29sZWFufSBkaXNwb3NpbmcgLSBGbGFnIHRvIHJlcXVlc3QgZGlzcG9zYWwuXG4gICAgICovXG4gICAgZGlzcG9zZShkaXNwb3NpbmcpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaXZEaXNwb3NlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaXNwb3NpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcml2QWRhcHRlcikge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZBZGFwdGVyLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByaXZEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvL1xuICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgICAvLyBJTVBMRU1FTlRBVElPTi5cbiAgICAvLyBNb3ZlIHRvIGluZGVwZW5kZW50IGNsYXNzXG4gICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuICAgIC8vXG4gICAgY3JlYXRlU3ludGhlc2l6ZXJDb25maWcoc3BlZWNoQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3ludGhlc2l6ZXJDb25maWcoc3BlZWNoQ29uZmlnLCB0aGlzLnByaXZQcm9wZXJ0aWVzKTtcbiAgICB9XG4gICAgLy8gQ3JlYXRlcyB0aGUgc3ludGhlc2lzIGFkYXB0ZXJcbiAgICBjcmVhdGVTeW50aGVzaXNBZGFwdGVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9Db25maWcsIHN5bnRoZXNpemVyQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3ludGhlc2lzQWRhcHRlckJhc2UoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBzeW50aGVzaXplckNvbmZpZywgdGhpcywgdGhpcy5hdWRpb0NvbmZpZyk7XG4gICAgfVxuICAgIGltcGxDb21tb25TeW50aGVzaXplU2V0dXAoKSB7XG4gICAgICAgIGxldCBvc1BsYXRmb3JtID0gKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpID8gXCJCcm93c2VyXCIgOiBcIk5vZGVcIjtcbiAgICAgICAgbGV0IG9zTmFtZSA9IFwidW5rbm93blwiO1xuICAgICAgICBsZXQgb3NWZXJzaW9uID0gXCJ1bmtub3duXCI7XG4gICAgICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBvc1BsYXRmb3JtID0gb3NQbGF0Zm9ybSArIFwiL1wiICsgbmF2aWdhdG9yLnBsYXRmb3JtO1xuICAgICAgICAgICAgb3NOYW1lID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgICAgICAgICAgIG9zVmVyc2lvbiA9IG5hdmlnYXRvci5hcHBWZXJzaW9uO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN5bnRoZXNpemVyQ29uZmlnID0gdGhpcy5jcmVhdGVTeW50aGVzaXplckNvbmZpZyhuZXcgU3BlZWNoU2VydmljZUNvbmZpZyhuZXcgQ29udGV4dChuZXcgT1Mob3NQbGF0Zm9ybSwgb3NOYW1lLCBvc1ZlcnNpb24pKSkpO1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25LZXkgPSB0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5LCB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBhdXRoZW50aWNhdGlvbiA9IChzdWJzY3JpcHRpb25LZXkgJiYgc3Vic2NyaXB0aW9uS2V5ICE9PSBcIlwiKSA/XG4gICAgICAgICAgICBuZXcgQ29nbml0aXZlU3Vic2NyaXB0aW9uS2V5QXV0aGVudGljYXRpb24oc3Vic2NyaXB0aW9uS2V5KSA6XG4gICAgICAgICAgICBuZXcgQ29nbml0aXZlVG9rZW5BdXRoZW50aWNhdGlvbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXV0aG9yaXphdGlvblRva2VuID0gdGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYXV0aG9yaXphdGlvblRva2VuKTtcbiAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdXRob3JpemF0aW9uVG9rZW4gPSB0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4sIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShhdXRob3JpemF0aW9uVG9rZW4pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHJpdkFkYXB0ZXIgPSB0aGlzLmNyZWF0ZVN5bnRoZXNpc0FkYXB0ZXIoYXV0aGVudGljYXRpb24sIHRoaXMucHJpdkNvbm5lY3Rpb25GYWN0b3J5LCB0aGlzLmF1ZGlvQ29uZmlnLCBzeW50aGVzaXplckNvbmZpZyk7XG4gICAgICAgIHRoaXMucHJpdkFkYXB0ZXIuYXVkaW9PdXRwdXRGb3JtYXQgPSBBdWRpb091dHB1dEZvcm1hdEltcGwuZnJvbVNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdChTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fU3ludGhPdXRwdXRGb3JtYXQsIHVuZGVmaW5lZCldKTtcbiAgICAgICAgdGhpcy5wcml2UmVzdEFkYXB0ZXIgPSBuZXcgU3ludGhlc2lzUmVzdEFkYXB0ZXIoc3ludGhlc2l6ZXJDb25maWcsIGF1dGhlbnRpY2F0aW9uKTtcbiAgICB9XG4gICAgc3BlYWtJbXBsKHRleHQsIElzU3NtbCwgY2IsIGVyciwgZGF0YVN0cmVhbSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZCk7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgICAgICBsZXQgYXVkaW9EZXN0aW5hdGlvbjtcbiAgICAgICAgICAgIGlmIChkYXRhU3RyZWFtIGluc3RhbmNlb2YgUHVzaEF1ZGlvT3V0cHV0U3RyZWFtQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBhdWRpb0Rlc3RpbmF0aW9uID0gbmV3IFB1c2hBdWRpb091dHB1dFN0cmVhbUltcGwoZGF0YVN0cmVhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhU3RyZWFtIGluc3RhbmNlb2YgUHVsbEF1ZGlvT3V0cHV0U3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgYXVkaW9EZXN0aW5hdGlvbiA9IGRhdGFTdHJlYW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhU3RyZWFtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBhdWRpb0Rlc3RpbmF0aW9uID0gbmV3IEF1ZGlvRmlsZVdyaXRlcihkYXRhU3RyZWFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF1ZGlvRGVzdGluYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN5bnRoZXNpc1JlcXVlc3RRdWV1ZS5lbnF1ZXVlKG5ldyBTeW50aGVzaXNSZXF1ZXN0KHJlcXVlc3RJZCwgdGV4dCwgSXNTc21sLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlN5bnRoZXNpemluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYihlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNiID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICAgICAgdGhpcy5hZGFwdGVyU3BlYWsoKS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICAgICAgfSwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGF1ZGlvRGVzdGluYXRpb24pKTtcbiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5LWZ1bmN0aW9uICovXG4gICAgICAgICAgICB0aGlzLmFkYXB0ZXJTcGVhaygpLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlZEVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIGVycih0eXBlZEVycm9yLm5hbWUgKyBcIjogXCIgKyB0eXBlZEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEZXN0cm95IHRoZSBzeW50aGVzaXplci5cbiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWVtcHR5ICovXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UodHJ1ZSkuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRWb2ljZXMobG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SWQgPSBjcmVhdGVOb0Rhc2hHdWlkKCk7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucHJpdlJlc3RBZGFwdGVyLmdldFZvaWNlc0xpc3QocmVxdWVzdElkKTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5vayAmJiBBcnJheS5pc0FycmF5KHJlc3BvbnNlLmpzb24pKSB7XG4gICAgICAgICAgICAgICAgbGV0IGpzb24gPSByZXNwb25zZS5qc29uO1xuICAgICAgICAgICAgICAgIGlmICghIWxvY2FsZSAmJiBsb2NhbGUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBqc29uID0ganNvbi5maWx0ZXIoKGl0ZW0pID0+ICEhaXRlbS5Mb2NhbGUgJiYgaXRlbS5Mb2NhbGUudG9Mb3dlckNhc2UoKSA9PT0gbG9jYWxlLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFN5bnRoZXNpc1ZvaWNlc1Jlc3VsdChyZXF1ZXN0SWQsIGpzb24sIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFN5bnRoZXNpc1ZvaWNlc1Jlc3VsdChyZXF1ZXN0SWQsIHVuZGVmaW5lZCwgYEVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFkYXB0ZXJTcGVhaygpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wcml2RGlzcG9zZWQgJiYgIXRoaXMucHJpdlN5bnRoZXNpemluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlN5bnRoZXNpemluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHlpZWxkIHRoaXMuc3ludGhlc2lzUmVxdWVzdFF1ZXVlLmRlcXVldWUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2QWRhcHRlci5TcGVhayhyZXF1ZXN0LnRleHQsIHJlcXVlc3QuaXNTU01MLCByZXF1ZXN0LnJlcXVlc3RJZCwgcmVxdWVzdC5jYiwgcmVxdWVzdC5lcnIsIHJlcXVlc3QuZGF0YVN0cmVhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgWE1MRW5jb2RlKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRleHQucmVwbGFjZSgvJi9nLCBcIiZhbXA7XCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvPC9nLCBcIiZsdDtcIilcbiAgICAgICAgICAgIC5yZXBsYWNlKC8+L2csIFwiJmd0O1wiKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1wiL2csIFwiJnF1b3Q7XCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvJy9nLCBcIiZhcG9zO1wiKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgU3ludGhlc2lzUmVxdWVzdCB7XG4gICAgY29uc3RydWN0b3IocmVxdWVzdElkLCB0ZXh0LCBpc1NTTUwsIGNiLCBlcnIsIGRhdGFTdHJlYW0pIHtcbiAgICAgICAgdGhpcy5yZXF1ZXN0SWQgPSByZXF1ZXN0SWQ7XG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgICAgIHRoaXMuaXNTU01MID0gaXNTU01MO1xuICAgICAgICB0aGlzLmNiID0gY2I7XG4gICAgICAgIHRoaXMuZXJyID0gZXJyO1xuICAgICAgICB0aGlzLmRhdGFTdHJlYW0gPSBkYXRhU3RyZWFtO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3BlZWNoU3ludGhlc2l6ZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5pbXBvcnQgeyBGb3JjZURpY3RhdGlvblByb3BlcnR5TmFtZSwgT3V0cHV0Rm9ybWF0UHJvcGVydHlOYW1lLCBTZXJ2aWNlUHJvcGVydGllc1Byb3BlcnR5TmFtZSB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgT3V0cHV0Rm9ybWF0LCBQcm9mYW5pdHlPcHRpb24sIFByb3BlcnR5Q29sbGVjdGlvbiwgUHJvcGVydHlJZCwgU3BlZWNoQ29uZmlnLCBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQsIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBTcGVlY2ggdHJhbnNsYXRpb24gY29uZmlndXJhdGlvbi5cbiAqIEBjbGFzcyBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ1xuICovXG5leHBvcnQgY2xhc3MgU3BlZWNoVHJhbnNsYXRpb25Db25maWcgZXh0ZW5kcyBTcGVlY2hDb25maWcge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgcmVjb2duaXplciBjb25maWcuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXRpYyBpbnN0YW5jZSBvZiBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZyByZXR1cm5lZCBieSBwYXNzaW5nIGEgc3Vic2NyaXB0aW9uIGtleSBhbmQgc2VydmljZSByZWdpb24uXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5mcm9tU3Vic2NyaXB0aW9uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdWJzY3JpcHRpb25LZXkgLSBUaGUgc3Vic2NyaXB0aW9uIGtleS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVnaW9uIC0gVGhlIHJlZ2lvbiBuYW1lIChzZWUgdGhlIDxhIGhyZWY9XCJodHRwczovL2FrYS5tcy9jc3NwZWVjaC9yZWdpb25cIj5yZWdpb24gcGFnZTwvYT4pLlxuICAgICAqIEByZXR1cm5zIHtTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ30gVGhlIHNwZWVjaCB0cmFuc2xhdGlvbiBjb25maWcuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21TdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uS2V5LCByZWdpb24pIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHN1YnNjcmlwdGlvbktleSwgXCJzdWJzY3JpcHRpb25LZXlcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShyZWdpb24sIFwicmVnaW9uXCIpO1xuICAgICAgICBjb25zdCByZXQgPSBuZXcgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsKCk7XG4gICAgICAgIHJldC5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5LCBzdWJzY3JpcHRpb25LZXkpO1xuICAgICAgICByZXQucHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbiwgcmVnaW9uKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhdGljIGluc3RhbmNlIG9mIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnIHJldHVybmVkIGJ5IHBhc3NpbmcgYXV0aG9yaXphdGlvbiB0b2tlbiBhbmQgc2VydmljZSByZWdpb24uXG4gICAgICogTm90ZTogVGhlIGNhbGxlciBuZWVkcyB0byBlbnN1cmUgdGhhdCB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiBpcyB2YWxpZC4gQmVmb3JlIHRoZSBhdXRob3JpemF0aW9uIHRva2VuXG4gICAgICogZXhwaXJlcywgdGhlIGNhbGxlciBuZWVkcyB0byByZWZyZXNoIGl0IGJ5IHNldHRpbmcgdGhlIHByb3BlcnR5IGF1dGhvcml6YXRpb25Ub2tlbiB3aXRoIGEgbmV3XG4gICAgICogdmFsaWQgdG9rZW4uIE90aGVyd2lzZSwgYWxsIHRoZSByZWNvZ25pemVycyBjcmVhdGVkIGJ5IHRoaXMgU3BlZWNoVHJhbnNsYXRpb25Db25maWcgaW5zdGFuY2VcbiAgICAgKiB3aWxsIGVuY291bnRlciBlcnJvcnMgZHVyaW5nIHJlY29nbml0aW9uLlxuICAgICAqIEFzIGNvbmZpZ3VyYXRpb24gdmFsdWVzIGFyZSBjb3BpZWQgd2hlbiBjcmVhdGluZyBhIG5ldyByZWNvZ25pemVyLCB0aGUgbmV3IHRva2VuIHZhbHVlIHdpbGwgbm90IGFwcGx5XG4gICAgICogdG8gcmVjb2duaXplcnMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiBjcmVhdGVkLlxuICAgICAqIEZvciByZWNvZ25pemVycyB0aGF0IGhhdmUgYmVlbiBjcmVhdGVkIGJlZm9yZSwgeW91IG5lZWQgdG8gc2V0IGF1dGhvcml6YXRpb24gdG9rZW4gb2YgdGhlIGNvcnJlc3BvbmRpbmcgcmVjb2duaXplclxuICAgICAqIHRvIHJlZnJlc2ggdGhlIHRva2VuLiBPdGhlcndpc2UsIHRoZSByZWNvZ25pemVycyB3aWxsIGVuY291bnRlciBlcnJvcnMgZHVyaW5nIHJlY29nbml0aW9uLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWcuZnJvbUF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXV0aG9yaXphdGlvblRva2VuIC0gVGhlIGF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lvbiAtIFRoZSByZWdpb24gbmFtZSAoc2VlIHRoZSA8YSBocmVmPVwiaHR0cHM6Ly9ha2EubXMvY3NzcGVlY2gvcmVnaW9uXCI+cmVnaW9uIHBhZ2U8L2E+KS5cbiAgICAgKiBAcmV0dXJucyB7U3BlZWNoVHJhbnNsYXRpb25Db25maWd9IFRoZSBzcGVlY2ggdHJhbnNsYXRpb24gY29uZmlnLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tQXV0aG9yaXphdGlvblRva2VuKGF1dGhvcml6YXRpb25Ub2tlbiwgcmVnaW9uKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShhdXRob3JpemF0aW9uVG9rZW4sIFwiYXV0aG9yaXphdGlvblRva2VuXCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocmVnaW9uLCBcInJlZ2lvblwiKTtcbiAgICAgICAgY29uc3QgcmV0ID0gbmV3IFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbCgpO1xuICAgICAgICByZXQucHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCBhdXRob3JpemF0aW9uVG9rZW4pO1xuICAgICAgICByZXQucHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvbiwgcmVnaW9uKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgc3BlZWNoIGNvbmZpZyB3aXRoIHNwZWNpZmllZCBob3N0IGFuZCBzdWJzY3JpcHRpb24ga2V5LlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGludGVuZGVkIG9ubHkgZm9yIHVzZXJzIHdobyB1c2UgYSBub24tZGVmYXVsdCBzZXJ2aWNlIGhvc3QuIFN0YW5kYXJkIHJlc291cmNlIHBhdGggd2lsbCBiZSBhc3N1bWVkLlxuICAgICAqIEZvciBzZXJ2aWNlcyB3aXRoIGEgbm9uLXN0YW5kYXJkIHJlc291cmNlIHBhdGggb3Igbm8gcGF0aCBhdCBhbGwsIHVzZSBmcm9tRW5kcG9pbnQgaW5zdGVhZC5cbiAgICAgKiBOb3RlOiBRdWVyeSBwYXJhbWV0ZXJzIGFyZSBub3QgYWxsb3dlZCBpbiB0aGUgaG9zdCBVUkkgYW5kIG11c3QgYmUgc2V0IGJ5IG90aGVyIEFQSXMuXG4gICAgICogTm90ZTogVG8gdXNlIGFuIGF1dGhvcml6YXRpb24gdG9rZW4gd2l0aCBmcm9tSG9zdCwgdXNlIGZyb21Ib3N0KFVSTCksXG4gICAgICogYW5kIHRoZW4gc2V0IHRoZSBBdXRob3JpemF0aW9uVG9rZW4gcHJvcGVydHkgb24gdGhlIGNyZWF0ZWQgU3BlZWNoQ29uZmlnIGluc3RhbmNlLlxuICAgICAqIE5vdGU6IEFkZGVkIGluIHZlcnNpb24gMS45LjAuXG4gICAgICogQG1lbWJlciBTcGVlY2hDb25maWcuZnJvbUhvc3RcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtVUkx9IGhvc3QgLSBUaGUgc2VydmljZSBlbmRwb2ludCB0byBjb25uZWN0IHRvLiBGb3JtYXQgaXMgXCJwcm90b2NvbDovL2hvc3Q6cG9ydFwiIHdoZXJlIFwiOnBvcnRcIiBpcyBvcHRpb25hbC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3Vic2NyaXB0aW9uS2V5IC0gVGhlIHN1YnNjcmlwdGlvbiBrZXkuIElmIGEgc3Vic2NyaXB0aW9uIGtleSBpcyBub3Qgc3BlY2lmaWVkLCBhbiBhdXRob3JpemF0aW9uIHRva2VuIG11c3QgYmUgc2V0LlxuICAgICAqIEByZXR1cm5zIHtTcGVlY2hDb25maWd9IEEgc3BlZWNoIGZhY3RvcnkgaW5zdGFuY2UuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21Ib3N0KGhvc3ROYW1lLCBzdWJzY3JpcHRpb25LZXkpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKGhvc3ROYW1lLCBcImhvc3ROYW1lXCIpO1xuICAgICAgICBjb25zdCBzcGVlY2hJbXBsID0gbmV3IFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbCgpO1xuICAgICAgICBzcGVlY2hJbXBsLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSG9zdCwgaG9zdE5hbWUucHJvdG9jb2wgKyBcIi8vXCIgKyBob3N0TmFtZS5ob3N0bmFtZSArIChob3N0TmFtZS5wb3J0ID09PSBcIlwiID8gXCJcIiA6IFwiOlwiICsgaG9zdE5hbWUucG9ydCkpO1xuICAgICAgICBpZiAodW5kZWZpbmVkICE9PSBzdWJzY3JpcHRpb25LZXkpIHtcbiAgICAgICAgICAgIHNwZWVjaEltcGwuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXksIHN1YnNjcmlwdGlvbktleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNwZWVjaEltcGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIHNwZWVjaCB0cmFuc2xhdGlvbiBjb25maWcgd2l0aCBzcGVjaWZpZWQgZW5kcG9pbnQgYW5kIHN1YnNjcmlwdGlvbiBrZXkuXG4gICAgICogVGhpcyBtZXRob2QgaXMgaW50ZW5kZWQgb25seSBmb3IgdXNlcnMgd2hvIHVzZSBhIG5vbi1zdGFuZGFyZCBzZXJ2aWNlIGVuZHBvaW50IG9yIHBhcmFtdGVycy5cbiAgICAgKiBOb3RlOiBUaGUgcXVlcnkgcHJvcGVydGllcyBzcGVjaWZpZWQgaW4gdGhlIGVuZHBvaW50IFVSTCBhcmUgbm90IGNoYW5nZWQsIGV2ZW4gaWYgdGhleSBhcmVcbiAgICAgKiBzZXQgYnkgYW55IG90aGVyIEFQSXMuIEZvciBleGFtcGxlLCBpZiBsYW5ndWFnZSBpcyBkZWZpbmVkIGluIHRoZSB1cmkgYXMgcXVlcnkgcGFyYW1ldGVyXG4gICAgICogXCJsYW5ndWFnZT1kZS1ERVwiLCBhbmQgYWxzbyBzZXQgYnkgdGhlIHNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UgcHJvcGVydHksIHRoZSBsYW5ndWFnZVxuICAgICAqIHNldHRpbmcgaW4gdXJpIHRha2VzIHByZWNlZGVuY2UsIGFuZCB0aGUgZWZmZWN0aXZlIGxhbmd1YWdlIGlzIFwiZGUtREVcIi5cbiAgICAgKiBPbmx5IHRoZSBwcm9wZXJ0aWVzIHRoYXQgYXJlIG5vdCBzcGVjaWZpZWQgaW4gdGhlIGVuZHBvaW50IFVSTCBjYW4gYmUgc2V0IGJ5IG90aGVyIEFQSXMuXG4gICAgICogTm90ZTogVG8gdXNlIGF1dGhvcml6YXRpb24gdG9rZW4gd2l0aCBmcm9tRW5kcG9pbnQsIHBhc3MgYW4gZW1wdHkgc3RyaW5nIHRvIHRoZSBzdWJzY3JpcHRpb25LZXkgaW4gdGhlXG4gICAgICogZnJvbUVuZHBvaW50IG1ldGhvZCwgYW5kIHRoZW4gc2V0IGF1dGhvcml6YXRpb25Ub2tlbj1cInRva2VuXCIgb24gdGhlIGNyZWF0ZWQgU3BlZWNoQ29uZmlnIGluc3RhbmNlIHRvXG4gICAgICogdXNlIHRoZSBhdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWcuZnJvbUVuZHBvaW50XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7VVJMfSBlbmRwb2ludCAtIFRoZSBzZXJ2aWNlIGVuZHBvaW50IHRvIGNvbm5lY3QgdG8uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN1YnNjcmlwdGlvbktleSAtIFRoZSBzdWJzY3JpcHRpb24ga2V5LlxuICAgICAqIEByZXR1cm5zIHtTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ30gQSBzcGVlY2ggY29uZmlnIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tRW5kcG9pbnQoZW5kcG9pbnQsIHN1YnNjcmlwdGlvbktleSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwoZW5kcG9pbnQsIFwiZW5kcG9pbnRcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChzdWJzY3JpcHRpb25LZXksIFwic3Vic2NyaXB0aW9uS2V5XCIpO1xuICAgICAgICBjb25zdCByZXQgPSBuZXcgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsKCk7XG4gICAgICAgIHJldC5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnQsIGVuZHBvaW50LmhyZWYpO1xuICAgICAgICByZXQucHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleSwgc3Vic2NyaXB0aW9uS2V5KTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG59XG4vKipcbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsXG4gKi9cbmV4cG9ydCBjbGFzcyBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwgZXh0ZW5kcyBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgIHRoaXMub3V0cHV0Rm9ybWF0ID0gT3V0cHV0Rm9ybWF0LlNpbXBsZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cy9TZXRzIHRoZSBhdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqIElmIHRoaXMgaXMgc2V0LCBzdWJzY3JpcHRpb24ga2V5IGlzIGlnbm9yZWQuXG4gICAgICogVXNlciBuZWVkcyB0byBtYWtlIHN1cmUgdGhlIHByb3ZpZGVkIGF1dGhvcml6YXRpb24gdG9rZW4gaXMgdmFsaWQgYW5kIG5vdCBleHBpcmVkLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5hdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIGF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICovXG4gICAgc2V0IGF1dGhvcml6YXRpb25Ub2tlbih2YWx1ZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodmFsdWUsIFwidmFsdWVcIik7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzcGVlY2ggcmVjb2duaXRpb24gbGFuZ3VhZ2UuXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLnNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIGF1dGhvcml6YXRpb24gdG9rZW4uXG4gICAgICovXG4gICAgc2V0IHNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UodmFsdWUpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHZhbHVlLCBcInZhbHVlXCIpO1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHNwZWVjaCByZWNvZ25pdGlvbiBsYW5ndWFnZS5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUuc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBzcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlLlxuICAgICAqL1xuICAgIGdldCBzcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5zdWJzY3JpcHRpb25LZXlcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0IHN1YnNjcmlwdGlvbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0tleV0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvdXRwdXQgZm9ybWF0XG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLm91dHB1dEZvcm1hdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXQgb3V0cHV0Rm9ybWF0KCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgcmV0dXJuIE91dHB1dEZvcm1hdFt0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLmdldFByb3BlcnR5KE91dHB1dEZvcm1hdFByb3BlcnR5TmFtZSwgdW5kZWZpbmVkKV07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMvU2V0cyB0aGUgb3V0cHV0IGZvcm1hdFxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5vdXRwdXRGb3JtYXRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc2V0IG91dHB1dEZvcm1hdCh2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLnNldFByb3BlcnR5KE91dHB1dEZvcm1hdFByb3BlcnR5TmFtZSwgT3V0cHV0Rm9ybWF0W3ZhbHVlXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGVuZHBvaW50IGlkLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5lbmRwb2ludElkXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldCBlbmRwb2ludElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX0VuZHBvaW50SWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzL1NldHMgdGhlIGVuZHBvaW50IGlkLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5lbmRwb2ludElkXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNldCBlbmRwb2ludElkKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmRwb2ludElkLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhICh0ZXh0KSB0YXJnZXQgbGFuZ3VhZ2UgdG8gdHJhbnNsYXRlIGludG8uXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLmFkZFRhcmdldExhbmd1YWdlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFRoZSBsYW5ndWFnZSBzdWNoIGFzIGRlLURFXG4gICAgICovXG4gICAgYWRkVGFyZ2V0TGFuZ3VhZ2UodmFsdWUpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHZhbHVlLCBcInZhbHVlXCIpO1xuICAgICAgICBjb25zdCBsYW5ndWFnZXMgPSB0aGlzLnRhcmdldExhbmd1YWdlcztcbiAgICAgICAgbGFuZ3VhZ2VzLnB1c2godmFsdWUpO1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Ub0xhbmd1YWdlcywgbGFuZ3VhZ2VzLmpvaW4oXCIsXCIpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgKHRleHQpIHRhcmdldCBsYW5ndWFnZSB0byB0cmFuc2xhdGUgaW50by5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUudGFyZ2V0TGFuZ3VhZ2VzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFRoZSBsYW5ndWFnZSBzdWNoIGFzIGRlLURFXG4gICAgICovXG4gICAgZ2V0IHRhcmdldExhbmd1YWdlcygpIHtcbiAgICAgICAgaWYgKHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzLCB1bmRlZmluZWQpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Ub0xhbmd1YWdlcykuc3BsaXQoXCIsXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHZvaWNlIG5hbWUuXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLnZvaWNlTmFtZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXQgdm9pY2VOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Wb2ljZV0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzL1NldHMgdGhlIHZvaWNlIG9mIHRoZSB0cmFuc2xhdGVkIGxhbmd1YWdlLCBlbmFibGUgdm9pY2Ugc3ludGhlc2lzIG91dHB1dC5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUudm9pY2VOYW1lXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFRoZSBuYW1lIG9mIHRoZSB2b2ljZS5cbiAgICAgKi9cbiAgICBzZXQgdm9pY2VOYW1lKHZhbHVlKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh2YWx1ZSwgXCJ2YWx1ZVwiKTtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVm9pY2UsIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvdmlkZXMgdGhlIHJlZ2lvbi5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUucmVnaW9uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSByZWdpb24uXG4gICAgICovXG4gICAgZ2V0IHJlZ2lvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWdpb24pO1xuICAgIH1cbiAgICBzZXRQcm94eShwcm94eUhvc3ROYW1lLCBwcm94eVBvcnQsIHByb3h5VXNlck5hbWUsIHByb3h5UGFzc3dvcmQpIHtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlIb3N0TmFtZV0sIHByb3h5SG9zdE5hbWUpO1xuICAgICAgICB0aGlzLnNldFByb3BlcnR5KFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVBvcnRdLCBwcm94eVBvcnQpO1xuICAgICAgICB0aGlzLnNldFByb3BlcnR5KFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVVzZXJOYW1lXSwgcHJveHlVc2VyTmFtZSk7XG4gICAgICAgIHRoaXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5UGFzc3dvcmRdLCBwcm94eVBhc3N3b3JkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyBhbiBhcmJpdHJhcnkgcHJvcGVydHkgdmFsdWUuXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLmdldFByb3BlcnR5XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkZWYgLSBUaGUgZGVmYXVsdCB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgaW4gY2FzZSBpdCBpcyBub3Qgc2V0LlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkuXG4gICAgICovXG4gICAgZ2V0UHJvcGVydHkobmFtZSwgZGVmKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLmdldFByb3BlcnR5KG5hbWUsIGRlZik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMvU2V0cyBhbiBhcmJpdHJhcnkgcHJvcGVydHkgdmFsdWUuXG4gICAgICogQG1lbWJlciBTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ0ltcGwucHJvdG90eXBlLnNldFByb3BlcnR5XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgUHJvcGVydHlJZH0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBzZXQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBzZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLnNldFByb3BlcnR5KG5hbWUsIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvdmlkZXMgYWNjZXNzIHRvIGN1c3RvbSBwcm9wZXJ0aWVzLlxuICAgICAqIEBtZW1iZXIgU3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3RvdHlwZS5wcm9wZXJ0aWVzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IFRoZSBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcG9zZSBvZiBhc3NvY2lhdGVkIHJlc291cmNlcy5cbiAgICAgKiBAbWVtYmVyIFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnSW1wbC5wcm90b3R5cGUuY2xvc2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0U2VydmljZVByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRQcm9wZXJ0aWVzID0gSlNPTi5wYXJzZSh0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFNlcnZpY2VQcm9wZXJ0aWVzUHJvcGVydHlOYW1lLCBcInt9XCIpKTtcbiAgICAgICAgY3VycmVudFByb3BlcnRpZXNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5zZXRQcm9wZXJ0eShTZXJ2aWNlUHJvcGVydGllc1Byb3BlcnR5TmFtZSwgSlNPTi5zdHJpbmdpZnkoY3VycmVudFByb3BlcnRpZXMpKTtcbiAgICB9XG4gICAgc2V0UHJvZmFuaXR5KHByb2Zhbml0eSkge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1Byb2Zhbml0eU9wdGlvbiwgUHJvZmFuaXR5T3B0aW9uW3Byb2Zhbml0eV0pO1xuICAgIH1cbiAgICBlbmFibGVBdWRpb0xvZ2dpbmcoKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9FbmFibGVBdWRpb0xvZ2dpbmcsIFwidHJ1ZVwiKTtcbiAgICB9XG4gICAgcmVxdWVzdFdvcmRMZXZlbFRpbWVzdGFtcHMoKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlUmVzcG9uc2VfUmVxdWVzdFdvcmRMZXZlbFRpbWVzdGFtcHMsIFwidHJ1ZVwiKTtcbiAgICB9XG4gICAgZW5hYmxlRGljdGF0aW9uKCkge1xuICAgICAgICB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLnNldFByb3BlcnR5KEZvcmNlRGljdGF0aW9uUHJvcGVydHlOYW1lLCBcInRydWVcIik7XG4gICAgfVxuICAgIGdldCBzcGVlY2hTeW50aGVzaXNMYW5ndWFnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aExhbmd1YWdlKTtcbiAgICB9XG4gICAgc2V0IHNwZWVjaFN5bnRoZXNpc0xhbmd1YWdlKGxhbmd1YWdlKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9TeW50aExhbmd1YWdlLCBsYW5ndWFnZSk7XG4gICAgfVxuICAgIGdldCBzcGVlY2hTeW50aGVzaXNWb2ljZU5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fU3ludGhWb2ljZSk7XG4gICAgfVxuICAgIHNldCBzcGVlY2hTeW50aGVzaXNWb2ljZU5hbWUodm9pY2UpIHtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoVm9pY2UsIHZvaWNlKTtcbiAgICB9XG4gICAgZ2V0IHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdCgpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIHJldHVybiBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoT3V0cHV0Rm9ybWF0LCB1bmRlZmluZWQpXTtcbiAgICB9XG4gICAgc2V0IHNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdChmb3JtYXQpIHtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoUHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1N5bnRoT3V0cHV0Rm9ybWF0LCBTcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXRbZm9ybWF0XSk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBzeW50aGVzaXMgcmVzdWx0c1xuICogQGNsYXNzIFN5bnRoZXNpc1Jlc3VsdFxuICogQWRkZWQgaW4gdmVyc2lvbiAxLjIwLjBcbiAqL1xuZXhwb3J0IGNsYXNzIFN5bnRoZXNpc1Jlc3VsdCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVzdWx0SWQgLSBUaGUgcmVzdWx0IGlkLlxuICAgICAqIEBwYXJhbSB7UmVzdWx0UmVhc29ufSByZWFzb24gLSBUaGUgcmVhc29uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvckRldGFpbHMgLSBFcnJvciBkZXRhaWxzLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge1Byb3BlcnR5Q29sbGVjdGlvbn0gcHJvcGVydGllcyAtIEFkZGl0aW9uYWwgcHJvcGVydGllcywgaWYgcHJvdmlkZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVzdWx0SWQsIHJlYXNvbiwgZXJyb3JEZXRhaWxzLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHRoaXMucHJpdlJlc3VsdElkID0gcmVzdWx0SWQ7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5wcml2RXJyb3JEZXRhaWxzID0gZXJyb3JEZXRhaWxzO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gcHJvcGVydGllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSByZXN1bHQgaWRlbnRpZmllci5cbiAgICAgKiBAbWVtYmVyIFN5bnRoZXNpc1Jlc3VsdC5wcm90b3R5cGUucmVzdWx0SWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gU3BlY2lmaWVzIHRoZSByZXN1bHQgaWRlbnRpZmllci5cbiAgICAgKi9cbiAgICBnZXQgcmVzdWx0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN1bHRJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHN0YXR1cyBvZiB0aGUgcmVzdWx0LlxuICAgICAqIEBtZW1iZXIgU3ludGhlc2lzUmVzdWx0LnByb3RvdHlwZS5yZWFzb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1Jlc3VsdFJlYXNvbn0gU3BlY2lmaWVzIHN0YXR1cyBvZiB0aGUgcmVzdWx0LlxuICAgICAqL1xuICAgIGdldCByZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluIGNhc2Ugb2YgYW4gdW5zdWNjZXNzZnVsIHN5bnRoZXNpcywgcHJvdmlkZXMgZGV0YWlscyBvZiB0aGUgb2NjdXJyZWQgZXJyb3IuXG4gICAgICogQG1lbWJlciBTeW50aGVzaXNSZXN1bHQucHJvdG90eXBlLmVycm9yRGV0YWlsc1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBhIGJyaWVmIGRlc2NyaXB0aW9uIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIGdldCBlcnJvckRldGFpbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckRldGFpbHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgcHJvcGVydGllcyBleHBvc2VkIGluIHRoZSByZXN1bHQuXG4gICAgICogQG1lbWJlciBTeW50aGVzaXNSZXN1bHQucHJvdG90eXBlLnByb3BlcnRpZXNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1Byb3BlcnR5Q29sbGVjdGlvbn0gVGhlIHNldCBvZiBwcm9wZXJ0aWVzIGV4cG9zZWQgaW4gdGhlIHJlc3VsdC5cbiAgICAgKi9cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TeW50aGVzaXNSZXN1bHQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmltcG9ydCB7IFByb3BlcnR5Q29sbGVjdGlvbiwgUmVzdWx0UmVhc29uLCBTeW50aGVzaXNSZXN1bHQsIFZvaWNlSW5mbyB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogRGVmaW5lcyByZXN1bHQgb2Ygc3BlZWNoIHN5bnRoZXNpcy5cbiAqIEBjbGFzcyBTeW50aGVzaXNWb2ljZXNSZXN1bHRcbiAqIEFkZGVkIGluIHZlcnNpb24gMS4yMC4wXG4gKi9cbmV4cG9ydCBjbGFzcyBTeW50aGVzaXNWb2ljZXNSZXN1bHQgZXh0ZW5kcyBTeW50aGVzaXNSZXN1bHQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHJlcXVlc3RJZCAtIHJlc3VsdCBpZCBmb3IgcmVxdWVzdC5cbiAgICAgKiBAcGFyYW0ganNvbiAtIGpzb24gcGF5bG9hZCBmcm9tIGVuZHBvaW50LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlcXVlc3RJZCwganNvbiwgZXJyb3JEZXRhaWxzKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGpzb24pKSB7XG4gICAgICAgICAgICBzdXBlcihyZXF1ZXN0SWQsIFJlc3VsdFJlYXNvbi5Wb2ljZXNMaXN0UmV0cmlldmVkLCB1bmRlZmluZWQsIG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKSk7XG4gICAgICAgICAgICB0aGlzLnByaXZWb2ljZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBqc29uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Vm9pY2VzLnB1c2gobmV3IFZvaWNlSW5mbyhpdGVtKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdXBlcihyZXF1ZXN0SWQsIFJlc3VsdFJlYXNvbi5DYW5jZWxlZCwgZXJyb3JEZXRhaWxzID8gZXJyb3JEZXRhaWxzIDogXCJFcnJvciBpbmZvcm1hdGlvbiB1bmF2YWlsYWJsZVwiLCBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsaXN0IG9mIHZvaWNlc1xuICAgICAqIEBtZW1iZXIgU3ludGhlc2lzVm9pY2VzUmVzdWx0LnByb3RvdHlwZS52b2ljZXNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1ZvaWNlSW5mb1tdfSBMaXN0IG9mIHN5bnRoZXNpemVkIHZvaWNlcy5cbiAgICAgKi9cbiAgICBnZXQgdm9pY2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Vm9pY2VzO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ludGhlc2lzVm9pY2VzUmVzdWx0LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vLyBNdWx0aS1kZXZpY2UgQ29udmVyc2F0aW9uIGlzIGEgUHJldmlldyBmZWF0dXJlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtY2xhc3Nlcy1wZXItZmlsZSAqL1xuaW1wb3J0IHsgQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZywgQ29udmVyc2F0aW9uTWFuYWdlciwgQ29udmVyc2F0aW9uUmVjb2duaXplckZhY3RvcnksIENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMsIENvbnZlcnNhdGlvblRyYW5zbGF0b3JNZXNzYWdlVHlwZXMsIEludGVybmFsUGFydGljaXBhbnRzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyB9IGZyb20gXCIuLi8uLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4uL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgQ29udmVyc2F0aW9uUGFydGljaXBhbnRzQ2hhbmdlZEV2ZW50QXJncywgQ29udmVyc2F0aW9uVHJhbnNsYXRpb25FdmVudEFyZ3MsIFBhcnRpY2lwYW50LCBQYXJ0aWNpcGFudENoYW5nZWRSZWFzb24sIFByb2Zhbml0eU9wdGlvbiwgUHJvcGVydHlDb2xsZWN0aW9uLCBQcm9wZXJ0eUlkLCB9IGZyb20gXCIuLi9FeHBvcnRzXCI7XG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBjb252ZXJzYXRpb25cbiAgICAgKiBAcGFyYW0gc3BlZWNoQ29uZmlnXG4gICAgICogQHBhcmFtIGNiXG4gICAgICogQHBhcmFtIGVyclxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVDb252ZXJzYXRpb25Bc3luYyhzcGVlY2hDb25maWcsIGFyZzIsIGFyZzMsIGFyZzQpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoc3BlZWNoQ29uZmlnLCBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLnJlc3RFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIFwiY29uZmlnXCIpKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoc3BlZWNoQ29uZmlnLnJlZ2lvbiwgQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5yZXN0RXJyb3JzLmludmFsaWRBcmdzLnJlcGxhY2UoXCJ7YXJnfVwiLCBcIlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlZ2lvblwiKSk7XG4gICAgICAgIGlmICghc3BlZWNoQ29uZmlnLnN1YnNjcmlwdGlvbktleSAmJiAhc3BlZWNoQ29uZmlnLmdldFByb3BlcnR5KFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbl0pKSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChzcGVlY2hDb25maWcuc3Vic2NyaXB0aW9uS2V5LCBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLnJlc3RFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIFwiU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5XCIpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY29udmVyc2F0aW9uSW1wbDtcbiAgICAgICAgbGV0IGNiO1xuICAgICAgICBsZXQgZXJyO1xuICAgICAgICBpZiAodHlwZW9mIGFyZzIgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvbkltcGwgPSBuZXcgQ29udmVyc2F0aW9uSW1wbChzcGVlY2hDb25maWcsIGFyZzIpO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgICAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcygoKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgeyB9KSkoKSwgYXJnMywgYXJnNCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb252ZXJzYXRpb25JbXBsID0gbmV3IENvbnZlcnNhdGlvbkltcGwoc3BlZWNoQ29uZmlnKTtcbiAgICAgICAgICAgIGNiID0gYXJnMjtcbiAgICAgICAgICAgIGVyciA9IGFyZzM7XG4gICAgICAgICAgICBjb252ZXJzYXRpb25JbXBsLmNyZWF0ZUNvbnZlcnNhdGlvbkFzeW5jKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnZlcnNhdGlvbkltcGw7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvbkltcGwgZXh0ZW5kcyBDb252ZXJzYXRpb24ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGNvbnZlcnNhdGlvbiBpbXBsXG4gICAgICogQHBhcmFtIHNwZWVjaENvbmZpZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIG9wdGlvbmFsIGNvbnZlcnNhdGlvbklkXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc3BlZWNoQ29uZmlnLCBpZCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnByaXZFcnJvcnMgPSBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLnJlc3RFcnJvcnM7XG4gICAgICAgIC8qKiB3ZWJzb2NrZXQgY2FsbGJhY2tzICovXG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC90eXBlZGVmICovXG4gICAgICAgIHRoaXMub25Db25uZWN0ZWQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgdGhpcy5wcml2SXNDb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoISEoKF9hID0gdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNlc3Npb25TdGFydGVkKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLnNlc3Npb25TdGFydGVkKHRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3IsIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RlZCA9IChlKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICghISgoX2EgPSB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2Vzc2lvblN0b3BwZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3Iuc2Vzc2lvblN0b3BwZWQodGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvciwgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdm9pZCB0aGlzLmNsb3NlKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkNhbmNlbGVkID0gKHIsIGUpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhKChfYSA9IHRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYW5jZWxlZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvci5jYW5jZWxlZCh0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25QYXJ0aWNpcGFudFVwZGF0ZUNvbW1hbmRSZWNlaXZlZCA9IChyLCBlKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRQYXJ0aWNpcGFudCA9IHRoaXMucHJpdlBhcnRpY2lwYW50cy5nZXRQYXJ0aWNpcGFudChlLmlkKTtcbiAgICAgICAgICAgICAgICBpZiAodXBkYXRlZFBhcnRpY2lwYW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDb252ZXJzYXRpb25UcmFuc2xhdG9yQ29tbWFuZFR5cGVzLmNoYW5nZU5pY2tuYW1lOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRQYXJ0aWNpcGFudC5kaXNwbGF5TmFtZSA9IGUudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMuc2V0VXNlVFRTOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRQYXJ0aWNpcGFudC5pc1VzaW5nVHRzID0gZS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ29udmVyc2F0aW9uVHJhbnNsYXRvckNvbW1hbmRUeXBlcy5zZXRQcm9mYW5pdHlGaWx0ZXJpbmc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFBhcnRpY2lwYW50LnByb2Zhbml0eSA9IGUudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMuc2V0TXV0ZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkUGFydGljaXBhbnQuaXNNdXRlZCA9IGUudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb21tYW5kVHlwZXMuc2V0VHJhbnNsYXRlVG9MYW5ndWFnZXM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFBhcnRpY2lwYW50LnRyYW5zbGF0ZVRvTGFuZ3VhZ2VzID0gZS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZQYXJ0aWNpcGFudHMuYWRkT3JVcGRhdGVQYXJ0aWNpcGFudCh1cGRhdGVkUGFydGljaXBhbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLnBhcnRpY2lwYW50c0NoYW5nZWQodGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvciwgbmV3IENvbnZlcnNhdGlvblBhcnRpY2lwYW50c0NoYW5nZWRFdmVudEFyZ3MoUGFydGljaXBhbnRDaGFuZ2VkUmVhc29uLlVwZGF0ZWQsIFt0aGlzLnRvUGFydGljaXBhbnQodXBkYXRlZFBhcnRpY2lwYW50KV0sIGUuc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25Mb2NrUm9vbUNvbW1hbmRSZWNlaXZlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE9cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbk11dGVBbGxDb21tYW5kUmVjZWl2ZWQgPSAociwgZSkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZQYXJ0aWNpcGFudHMucGFydGljaXBhbnRzLmZvckVhY2goKHApID0+IHAuaXNNdXRlZCA9IChwLmlzSG9zdCA/IGZhbHNlIDogZS5pc011dGVkKSk7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLnBhcnRpY2lwYW50c0NoYW5nZWQodGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvciwgbmV3IENvbnZlcnNhdGlvblBhcnRpY2lwYW50c0NoYW5nZWRFdmVudEFyZ3MoUGFydGljaXBhbnRDaGFuZ2VkUmVhc29uLlVwZGF0ZWQsIHRoaXMudG9QYXJ0aWNpcGFudHMoZmFsc2UpLCBlLnNlc3Npb25JZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblBhcnRpY2lwYW50Sm9pbkNvbW1hbmRSZWNlaXZlZCA9IChyLCBlKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BhcnRpY2lwYW50ID0gdGhpcy5wcml2UGFydGljaXBhbnRzLmFkZE9yVXBkYXRlUGFydGljaXBhbnQoZS5wYXJ0aWNpcGFudCk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1BhcnRpY2lwYW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvci5wYXJ0aWNpcGFudHNDaGFuZ2VkKHRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3IsIG5ldyBDb252ZXJzYXRpb25QYXJ0aWNpcGFudHNDaGFuZ2VkRXZlbnRBcmdzKFBhcnRpY2lwYW50Q2hhbmdlZFJlYXNvbi5Kb2luZWRDb252ZXJzYXRpb24sIFt0aGlzLnRvUGFydGljaXBhbnQobmV3UGFydGljaXBhbnQpXSwgZS5zZXNzaW9uSWQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblBhcnRpY2lwYW50TGVhdmVDb21tYW5kUmVjZWl2ZWQgPSAociwgZSkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlamVjdGVkUGFydGljaXBhbnQgPSB0aGlzLnByaXZQYXJ0aWNpcGFudHMuZ2V0UGFydGljaXBhbnQoZS5wYXJ0aWNpcGFudC5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKGVqZWN0ZWRQYXJ0aWNpcGFudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgcGFydGljaXBhbnQgZnJvbSB0aGUgaW50ZXJuYWwgcGFydGljaXBhbnRzIGxpc3RcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2UGFydGljaXBhbnRzLmRlbGV0ZVBhcnRpY2lwYW50KGUucGFydGljaXBhbnQuaWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub3RpZnkgc3Vic2NyaWJlcnMgdGhhdCB0aGUgcGFydGljaXBhbnQgaGFzIGxlZnQgdGhlIGNvbnZlcnNhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvci5wYXJ0aWNpcGFudHNDaGFuZ2VkKHRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3IsIG5ldyBDb252ZXJzYXRpb25QYXJ0aWNpcGFudHNDaGFuZ2VkRXZlbnRBcmdzKFBhcnRpY2lwYW50Q2hhbmdlZFJlYXNvbi5MZWZ0Q29udmVyc2F0aW9uLCBbdGhpcy50b1BhcnRpY2lwYW50KGVqZWN0ZWRQYXJ0aWNpcGFudCldLCBlLnNlc3Npb25JZCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uVHJhbnNsYXRpb25SZWNlaXZlZCA9IChyLCBlKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZS5jb21tYW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgQ29udmVyc2F0aW9uVHJhbnNsYXRvck1lc3NhZ2VUeXBlcy5maW5hbDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLnRyYW5zY3JpYmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3IsIG5ldyBDb252ZXJzYXRpb25UcmFuc2xhdGlvbkV2ZW50QXJncyhlLnBheWxvYWQsIHVuZGVmaW5lZCwgZS5zZXNzaW9uSWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIENvbnZlcnNhdGlvblRyYW5zbGF0b3JNZXNzYWdlVHlwZXMucGFydGlhbDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLnRyYW5zY3JpYmluZyh0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLCBuZXcgQ29udmVyc2F0aW9uVHJhbnNsYXRpb25FdmVudEFyZ3MoZS5wYXlsb2FkLCB1bmRlZmluZWQsIGUuc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBDb252ZXJzYXRpb25UcmFuc2xhdG9yTWVzc2FnZVR5cGVzLmluc3RhbnRNZXNzYWdlOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3IudGV4dE1lc3NhZ2VSZWNlaXZlZCh0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLCBuZXcgQ29udmVyc2F0aW9uVHJhbnNsYXRpb25FdmVudEFyZ3MoZS5wYXlsb2FkLCB1bmRlZmluZWQsIGUuc2Vzc2lvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25QYXJ0aWNpcGFudHNMaXN0UmVjZWl2ZWQgPSAociwgZSkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgc2Vzc2lvbiB0b2tlbiBuZWVkcyB0byBiZSB1cGRhdGVkXG4gICAgICAgICAgICAgICAgaWYgKGUuc2Vzc2lvblRva2VuICE9PSB1bmRlZmluZWQgJiYgZS5zZXNzaW9uVG9rZW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Um9vbS50b2tlbiA9IGUuc2Vzc2lvblRva2VuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBzYXZlIHRoZSBwYXJ0aWNpcGFudHNcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZQYXJ0aWNpcGFudHMucGFydGljaXBhbnRzID0gWy4uLmUucGFydGljaXBhbnRzXTtcbiAgICAgICAgICAgICAgICAvLyBlbmFibGUgdGhlIGNvbnZlcnNhdGlvblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZQYXJ0aWNpcGFudHMubWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZJc1JlYWR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLnBhcnRpY2lwYW50c0NoYW5nZWQodGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvciwgbmV3IENvbnZlcnNhdGlvblBhcnRpY2lwYW50c0NoYW5nZWRFdmVudEFyZ3MoUGFydGljaXBhbnRDaGFuZ2VkUmVhc29uLkpvaW5lZENvbnZlcnNhdGlvbiwgdGhpcy50b1BhcnRpY2lwYW50cyh0cnVlKSwgZS5zZXNzaW9uSWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyB0aGUgaG9zdCwgdXBkYXRlIHRoZSBuaWNrbmFtZSBpZiBuZWVkZWRcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tZS5pc0hvc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbmlja25hbWUgPSAoX2EgPSB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuaWNrbmFtZSAhPT0gdW5kZWZpbmVkICYmIG5pY2tuYW1lLmxlbmd0aCA+IDAgJiYgbmlja25hbWUgIT09IHRoaXMubWUuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzc3VlIGEgY2hhbmdlIG5pY2tuYW1lIHJlcXVlc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlTmlja25hbWVBc3luYyhuaWNrbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25Db252ZXJzYXRpb25FeHBpcmF0aW9uID0gKHIsIGUpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yLmNvbnZlcnNhdGlvbkV4cGlyYXRpb24odGhpcy5wcml2Q29udmVyc2F0aW9uVHJhbnNsYXRvciwgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByaXZJc0Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZJc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbklkID0gXCJcIjtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgdGhpcy5wcml2TWFuYWdlciA9IG5ldyBDb252ZXJzYXRpb25NYW5hZ2VyKCk7XG4gICAgICAgIC8vIGNoZWNrIHRoZSBzcGVlY2ggbGFuZ3VhZ2VcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2UgPSBzcGVlY2hDb25maWcuZ2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZV0pO1xuICAgICAgICBpZiAoIWxhbmd1YWdlKSB7XG4gICAgICAgICAgICBzcGVlY2hDb25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZV0sIENvbnZlcnNhdGlvbkNvbm5lY3Rpb25Db25maWcuZGVmYXVsdExhbmd1YWdlQ29kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcml2TGFuZ3VhZ2UgPSBzcGVlY2hDb25maWcuZ2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZV0pO1xuICAgICAgICBpZiAoIWlkKSB7XG4gICAgICAgICAgICAvLyBjaGVjayB0aGUgdGFyZ2V0IGxhbmd1YWdlKHMpXG4gICAgICAgICAgICBpZiAoc3BlZWNoQ29uZmlnLnRhcmdldExhbmd1YWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBzcGVlY2hDb25maWcuYWRkVGFyZ2V0TGFuZ3VhZ2UodGhpcy5wcml2TGFuZ3VhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2hlY2sgdGhlIHByb2Zhbml0eSBzZXR0aW5nOiBzcGVlY2ggYW5kIGNvbnZlcnNhdGlvblRyYW5zbGF0b3Igc2hvdWxkIGJlIGluIHN5bmNcbiAgICAgICAgICAgIGNvbnN0IHByb2Zhbml0eSA9IHNwZWVjaENvbmZpZy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZVJlc3BvbnNlX1Byb2Zhbml0eU9wdGlvbl0pO1xuICAgICAgICAgICAgaWYgKCFwcm9mYW5pdHkpIHtcbiAgICAgICAgICAgICAgICBzcGVlY2hDb25maWcuc2V0UHJvZmFuaXR5KFByb2Zhbml0eU9wdGlvbi5NYXNrZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2hlY2sgdGhlIG5pY2tuYW1lOiBpdCBzaG91bGQgcGFzcyB0aGlzIHJlZ2V4OiBeXFx3KyhbXFxzLV1bXFx3XFwoXFwpXSspKiRcIlxuICAgICAgICAgICAgLy8gVE9ETzogc3BlY2lmeSB0aGUgcmVnZXggcmVxdWlyZWQuIE5pY2tuYW1lcyBtdXN0IGJlIHVuaXF1ZSBvciBnZXQgdGhlIGR1cGxpY2F0ZSBuaWNrbmFtZSBlcnJvclxuICAgICAgICAgICAgLy8gVE9ETzogY2hlY2sgd2hhdCB0aGUgbWF4IGxlbmd0aCBpcyBhbmQgaWYgYSB0cnVuY2F0aW9uIGlzIHJlcXVpcmVkIG9yIGlmIHRoZSBzZXJ2aWNlIGhhbmRsZXMgaXQgd2l0aG91dCBhbiBlcnJvclxuICAgICAgICAgICAgbGV0IGhvc3ROaWNrbmFtZSA9IHNwZWVjaENvbmZpZy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuQ29udmVyc2F0aW9uVHJhbnNsYXRvcl9OYW1lXSk7XG4gICAgICAgICAgICBpZiAoaG9zdE5pY2tuYW1lID09PSB1bmRlZmluZWQgfHwgaG9zdE5pY2tuYW1lID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaG9zdE5pY2tuYW1lID0gXCJIb3N0XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclRvb0xvbmcoaG9zdE5pY2tuYW1lLCBcIm5pY2tuYW1lXCIsIDUwKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVG9vU2hvcnQoaG9zdE5pY2tuYW1lLCBcIm5pY2tuYW1lXCIsIDIpO1xuICAgICAgICAgICAgc3BlZWNoQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWRbUHJvcGVydHlJZC5Db252ZXJzYXRpb25UcmFuc2xhdG9yX05hbWVdLCBob3N0Tmlja25hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uSWQgPSBpZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBzYXZlIHRoZSBzcGVlY2ggY29uZmlnIGZvciBmdXR1cmUgdXNhZ2VcbiAgICAgICAgdGhpcy5wcml2Q29uZmlnID0gc3BlZWNoQ29uZmlnO1xuICAgICAgICAvLyBzYXZlIHRoZSBjb25maWcgcHJvcGVydGllc1xuICAgICAgICBjb25zdCBjb25maWdJbXBsID0gc3BlZWNoQ29uZmlnO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGwoY29uZmlnSW1wbCwgXCJzcGVlY2hDb25maWdcIik7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMgPSBjb25maWdJbXBsLnByb3BlcnRpZXMuY2xvbmUoKTtcbiAgICAgICAgdGhpcy5wcml2SXNDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2UGFydGljaXBhbnRzID0gbmV3IEludGVybmFsUGFydGljaXBhbnRzKCk7XG4gICAgICAgIHRoaXMucHJpdklzUmVhZHkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2VGV4dE1lc3NhZ2VNYXhMZW5ndGggPSAxMDAwO1xuICAgIH1cbiAgICAvLyBnZXQgdGhlIGludGVybmFsIGRhdGEgYWJvdXQgYSBjb252ZXJzYXRpb25cbiAgICBnZXQgcm9vbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJvb207XG4gICAgfVxuICAgIC8vIGdldCB0aGUgd3JhcHBlciBmb3IgY29ubmVjdGluZyB0byB0aGUgd2Vic29ja2V0c1xuICAgIGdldCBjb25uZWN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplcjsgLy8gdGhpcy5wcml2Q29ubmVjdGlvbjtcbiAgICB9XG4gICAgLy8gZ2V0IHRoZSBjb25maWdcbiAgICBnZXQgY29uZmlnKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Q29uZmlnO1xuICAgIH1cbiAgICAvLyBnZXQgdGhlIGNvbnZlcnNhdGlvbiBJZFxuICAgIGdldCBjb252ZXJzYXRpb25JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJvb20gPyB0aGlzLnByaXZSb29tLnJvb21JZCA6IHRoaXMucHJpdkNvbnZlcnNhdGlvbklkO1xuICAgIH1cbiAgICAvLyBnZXQgdGhlIHByb3BlcnRpZXNcbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxuICAgIC8vIGdldCB0aGUgc3BlZWNoIGxhbmd1YWdlXG4gICAgZ2V0IHNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZMYW5ndWFnZTtcbiAgICB9XG4gICAgZ2V0IGlzTXV0ZWRCeUhvc3QoKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiAoKF9hID0gdGhpcy5wcml2UGFydGljaXBhbnRzLm1lKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaXNIb3N0KSA/IGZhbHNlIDogKF9iID0gdGhpcy5wcml2UGFydGljaXBhbnRzLm1lKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaXNNdXRlZDtcbiAgICB9XG4gICAgZ2V0IGlzQ29ubmVjdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNDb25uZWN0ZWQgJiYgdGhpcy5wcml2SXNSZWFkeTtcbiAgICB9XG4gICAgZ2V0IHBhcnRpY2lwYW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9QYXJ0aWNpcGFudHModHJ1ZSk7XG4gICAgfVxuICAgIGdldCBtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9QYXJ0aWNpcGFudCh0aGlzLnByaXZQYXJ0aWNpcGFudHMubWUpO1xuICAgIH1cbiAgICBnZXQgaG9zdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9QYXJ0aWNpcGFudCh0aGlzLnByaXZQYXJ0aWNpcGFudHMuaG9zdCk7XG4gICAgfVxuICAgIGdldCB0cmFuc2NyaWJlclJlY29nbml6ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUcmFuc2NyaWJlclJlY29nbml6ZXI7XG4gICAgfVxuICAgIGdldCBjb252ZXJzYXRpb25JbmZvKCkge1xuICAgICAgICBjb25zdCBjb252SWQgPSB0aGlzLmNvbnZlcnNhdGlvbklkO1xuICAgICAgICBjb25zdCBwID0gdGhpcy5wYXJ0aWNpcGFudHMubWFwKChwYXJ0KSA9PiAoe1xuICAgICAgICAgICAgaWQ6IHBhcnQuaWQsXG4gICAgICAgICAgICBwcmVmZXJyZWRMYW5ndWFnZTogcGFydC5wcmVmZXJyZWRMYW5ndWFnZSxcbiAgICAgICAgICAgIHZvaWNlOiBwYXJ0LnZvaWNlXG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgcHJvcHMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy50cmFuc2NyaXB0aW9uRXZlbnRLZXlzKSB7XG4gICAgICAgICAgICBjb25zdCB2YWwgPSB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoa2V5LCBcIlwiKTtcbiAgICAgICAgICAgIGlmICh2YWwgIT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBwcm9wc1trZXldID0gdmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZm8gPSB7IGlkOiBjb252SWQsIHBhcnRpY2lwYW50czogcCwgY29udmVyc2F0aW9uUHJvcGVydGllczogcHJvcHMgfTtcbiAgICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuICAgIGdldCBjYW5TZW5kKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc0Nvbm5lY3RlZCAmJiAhKChfYSA9IHRoaXMucHJpdlBhcnRpY2lwYW50cy5tZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlzTXV0ZWQpO1xuICAgIH1cbiAgICBnZXQgY2FuU2VuZEFzSG9zdCgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNDb25uZWN0ZWQgJiYgKChfYSA9IHRoaXMucHJpdlBhcnRpY2lwYW50cy5tZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlzSG9zdCk7XG4gICAgfVxuICAgIC8vIGdldCAvIHNldCB0aGUgc3BlZWNoIGF1dGggdG9rZW5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L21lbWJlci1vcmRlcmluZ1xuICAgIGdldCBhdXRob3JpemF0aW9uVG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUb2tlbjtcbiAgICB9XG4gICAgc2V0IGF1dGhvcml6YXRpb25Ub2tlbih2YWx1ZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodmFsdWUsIFwiYXV0aG9yaXphdGlvblRva2VuXCIpO1xuICAgICAgICB0aGlzLnByaXZUb2tlbiA9IHZhbHVlO1xuICAgIH1cbiAgICBzZXQgY29udmVyc2F0aW9uVHJhbnNsYXRvcihjb252ZXJzYXRpb25UcmFuc2xhdG9yKSB7XG4gICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3IgPSBjb252ZXJzYXRpb25UcmFuc2xhdG9yO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgY29udmVyc2F0aW9uIGFzIEhvc3RcbiAgICAgKiBAcGFyYW0gY2JcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICovXG4gICAgY3JlYXRlQ29udmVyc2F0aW9uQXN5bmMoY2IsIGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplcikge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkU3RhcnQpLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcml2TWFuYWdlci5jcmVhdGVPckpvaW4odGhpcy5wcml2UHJvcGVydGllcywgdW5kZWZpbmVkLCAoKHJvb20pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXJvb20pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgRXJyb3IodGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRDb25uZWN0KSwgZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Um9vbSA9IHJvb207XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDYWxsYmFjayhjYiwgZXJyKTtcbiAgICAgICAgICAgIH0pLCAoKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgZXJyKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIGEgbmV3IGNvbnZlcnNhdGlvbiBhcyBob3N0LlxuICAgICAqIEBwYXJhbSBjYlxuICAgICAqIEBwYXJhbSBlcnJcbiAgICAgKi9cbiAgICBzdGFydENvbnZlcnNhdGlvbkFzeW5jKGNiLCBlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZXJlIGlzIGFscmVhZHkgYSByZWNvZ25pemVyXG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgRXJyb3IodGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRTdGFydCksIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjaGVjayBpZiB0aGVyZSBpcyBjb252ZXJzYXRpb24gZGF0YSBhdmFpbGFibGVcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpdlJvb20sIHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkQ29ubmVjdCk7XG4gICAgICAgICAgICAvLyBjb25uZWN0IHRvIHRoZSBjb252ZXJzYXRpb24gd2Vic29ja2V0XG4gICAgICAgICAgICB0aGlzLnByaXZQYXJ0aWNpcGFudHMubWVJZCA9IHRoaXMucHJpdlJvb20ucGFydGljaXBhbnRJZDtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIgPSBDb252ZXJzYXRpb25SZWNvZ25pemVyRmFjdG9yeS5mcm9tQ29uZmlnKHRoaXMsIHRoaXMucHJpdkNvbmZpZyk7XG4gICAgICAgICAgICAvLyBCZWNhdXNlIENvbnZlcnNhdGlvblRyYW5zbGF0b3IgbWFudWFsbHkgc2V0cyB1cCBhbmQgbWFuYWdlcyB0aGUgY29ubmVjdGlvbiwgQ29udmVyc2F0aW9uXG4gICAgICAgICAgICAvLyBoYXMgdG8gZm9yd2FyZCBzZXJ2aWNlUmVjb2duaXplciBjb25uZWN0aW9uIGV2ZW50cyB0aGF0IHVzdWFsbHkgZ2V0IHBhc3NlZCBhdXRvbWF0aWNhbGx5XG4gICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLmNvbm5lY3RlZCA9IHRoaXMub25Db25uZWN0ZWQ7XG4gICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLmRpc2Nvbm5lY3RlZCA9IHRoaXMub25EaXNjb25uZWN0ZWQ7XG4gICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLmNhbmNlbGVkID0gdGhpcy5vbkNhbmNlbGVkO1xuICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5wYXJ0aWNpcGFudFVwZGF0ZUNvbW1hbmRSZWNlaXZlZCA9IHRoaXMub25QYXJ0aWNpcGFudFVwZGF0ZUNvbW1hbmRSZWNlaXZlZDtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIubG9ja1Jvb21Db21tYW5kUmVjZWl2ZWQgPSB0aGlzLm9uTG9ja1Jvb21Db21tYW5kUmVjZWl2ZWQ7XG4gICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLm11dGVBbGxDb21tYW5kUmVjZWl2ZWQgPSB0aGlzLm9uTXV0ZUFsbENvbW1hbmRSZWNlaXZlZDtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIucGFydGljaXBhbnRKb2luQ29tbWFuZFJlY2VpdmVkID0gdGhpcy5vblBhcnRpY2lwYW50Sm9pbkNvbW1hbmRSZWNlaXZlZDtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIucGFydGljaXBhbnRMZWF2ZUNvbW1hbmRSZWNlaXZlZCA9IHRoaXMub25QYXJ0aWNpcGFudExlYXZlQ29tbWFuZFJlY2VpdmVkO1xuICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci50cmFuc2xhdGlvblJlY2VpdmVkID0gdGhpcy5vblRyYW5zbGF0aW9uUmVjZWl2ZWQ7XG4gICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLnBhcnRpY2lwYW50c0xpc3RSZWNlaXZlZCA9IHRoaXMub25QYXJ0aWNpcGFudHNMaXN0UmVjZWl2ZWQ7XG4gICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLmNvbnZlcnNhdGlvbkV4cGlyYXRpb24gPSB0aGlzLm9uQ29udmVyc2F0aW9uRXhwaXJhdGlvbjtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIuY29ubmVjdCh0aGlzLnByaXZSb29tLnRva2VuLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2FsbGJhY2soY2IsIGVycik7XG4gICAgICAgICAgICB9KSwgKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBlcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEpvaW4gYSBjb252ZXJzYXRpb24gYXMgYSBwYXJ0aWNpcGFudC5cbiAgICAgKiBAcGFyYW0geyBJUGFydGljaXBhbnQgfSBwYXJ0aWNpcGFudCAtIHBhcnRpY2lwYW50IHRvIGFkZFxuICAgICAqIEBwYXJhbSBjYlxuICAgICAqIEBwYXJhbSBlcnJcbiAgICAgKi9cbiAgICBhZGRQYXJ0aWNpcGFudEFzeW5jKHBhcnRpY2lwYW50LCBjYiwgZXJyKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHBhcnRpY2lwYW50LCBcIlBhcnRpY2lwYW50XCIpO1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMuYWRkUGFydGljaXBhbnRJbXBsQXN5bmMocGFydGljaXBhbnQpLCBjYiwgZXJyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSm9pbiBhIGNvbnZlcnNhdGlvbiBhcyBhIHBhcnRpY2lwYW50LlxuICAgICAqIEBwYXJhbSBjb252ZXJzYXRpb25cbiAgICAgKiBAcGFyYW0gbmlja25hbWVcbiAgICAgKiBAcGFyYW0gbGFuZ1xuICAgICAqIEBwYXJhbSBjYlxuICAgICAqIEBwYXJhbSBlcnJcbiAgICAgKi9cbiAgICBqb2luQ29udmVyc2F0aW9uQXN5bmMoY29udmVyc2F0aW9uSWQsIG5pY2tuYW1lLCBsYW5nLCBjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUT0RPXG4gICAgICAgICAgICAvLyBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyKSB7XG4gICAgICAgICAgICAvLyAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkU3RhcnQpO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKGNvbnZlcnNhdGlvbklkLCB0aGlzLnByaXZFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIFwiY29udmVyc2F0aW9uSWRcIikpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKG5pY2tuYW1lLCB0aGlzLnByaXZFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIFwibmlja25hbWVcIikpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKGxhbmcsIHRoaXMucHJpdkVycm9ycy5pbnZhbGlkQXJncy5yZXBsYWNlKFwie2FyZ31cIiwgXCJsYW5ndWFnZVwiKSk7XG4gICAgICAgICAgICAvLyBqb2luIHRoZSBjb252ZXJzYXRpb25cbiAgICAgICAgICAgIHRoaXMucHJpdk1hbmFnZXIuY3JlYXRlT3JKb2luKHRoaXMucHJpdlByb3BlcnRpZXMsIGNvbnZlcnNhdGlvbklkLCAoKHJvb20pID0+IHtcbiAgICAgICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChyb29tLCB0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZENvbm5lY3QpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlJvb20gPSByb29tO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbmZpZy5hdXRob3JpemF0aW9uVG9rZW4gPSByb29tLmNvZ25pdGl2ZVNwZWVjaEF1dGhUb2tlbjtcbiAgICAgICAgICAgICAgICAvLyBqb2luIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgY2Iocm9vbS5jb2duaXRpdmVTcGVlY2hBdXRoVG9rZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLCAoKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgZXJyKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBhIGNvbnZlcnNhdGlvblxuICAgICAqIEBwYXJhbSBjYlxuICAgICAqIEBwYXJhbSBlcnJcbiAgICAgKi9cbiAgICBkZWxldGVDb252ZXJzYXRpb25Bc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5kZWxldGVDb252ZXJzYXRpb25JbXBsQXN5bmMoKSwgY2IsIGVycik7XG4gICAgfVxuICAgIGRlbGV0ZUNvbnZlcnNhdGlvbkltcGxBc3luYygpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpdlByb3BlcnRpZXMsIHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkQ29ubmVjdCk7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodGhpcy5wcml2Um9vbS50b2tlbiwgdGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRDb25uZWN0KTtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdk1hbmFnZXIubGVhdmUodGhpcy5wcml2UHJvcGVydGllcywgdGhpcy5wcml2Um9vbS50b2tlbik7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElzc3VlcyBhIHJlcXVlc3QgdG8gY2xvc2UgdGhlIGNsaWVudCB3ZWJzb2NrZXRzXG4gICAgICogQHBhcmFtIGNiXG4gICAgICogQHBhcmFtIGVyclxuICAgICAqL1xuICAgIGVuZENvbnZlcnNhdGlvbkFzeW5jKGNiLCBlcnIpIHtcbiAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyh0aGlzLmVuZENvbnZlcnNhdGlvbkltcGxBc3luYygpLCBjYiwgZXJyKTtcbiAgICB9XG4gICAgZW5kQ29udmVyc2F0aW9uSW1wbEFzeW5jKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZSh0cnVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXNzdWVzIGEgcmVxdWVzdCB0byBsb2NrIHRoZSBjb252ZXJzYXRpb25cbiAgICAgKiBAcGFyYW0gY2JcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICovXG4gICAgbG9ja0NvbnZlcnNhdGlvbkFzeW5jKGNiLCBlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2SXNEaXNwb3NlZCk7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIuaXNEaXNwb3NlZCgpKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpdlJvb20sIHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkU2VuZCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2FuU2VuZEFzSG9zdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkQ29udmVyc2F0aW9uLnJlcGxhY2UoXCJ7Y29tbWFuZH1cIiwgXCJsb2NrXCIpKSwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLnNlbmRSZXF1ZXN0KHRoaXMuZ2V0TG9ja0NvbW1hbmQodHJ1ZSksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2FsbGJhY2soY2IsIGVycik7XG4gICAgICAgICAgICAgICAgfSksICgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgZXJyKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBlcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElzc3VlcyBhIHJlcXVlc3QgdG8gbXV0ZSB0aGUgY29udmVyc2F0aW9uXG4gICAgICogQHBhcmFtIGNiXG4gICAgICogQHBhcmFtIGVyclxuICAgICAqL1xuICAgIG11dGVBbGxQYXJ0aWNpcGFudHNBc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdklzRGlzcG9zZWQpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLmlzRGlzcG9zZWQoKSk7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZCh0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLCB0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZFNlbmQpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQodGhpcy5wcml2Um9vbSwgdGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRTZW5kKTtcbiAgICAgICAgICAgIC8vIGNoZWNrIHRoZSB1c2VyJ3MgcGVybWlzc2lvbnNcbiAgICAgICAgICAgIGlmICghdGhpcy5jYW5TZW5kQXNIb3N0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgRXJyb3IodGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRDb252ZXJzYXRpb24ucmVwbGFjZShcIntjb21tYW5kfVwiLCBcIm11dGVcIikpLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplcikge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIuc2VuZFJlcXVlc3QodGhpcy5nZXRNdXRlQWxsQ29tbWFuZCh0cnVlKSwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDYWxsYmFjayhjYiwgZXJyKTtcbiAgICAgICAgICAgICAgICB9KSwgKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBlcnIpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSXNzdWVzIGEgcmVxdWVzdCB0byBtdXRlIGEgcGFydGljaXBhbnQgaW4gdGhlIGNvbnZlcnNhdGlvblxuICAgICAqIEBwYXJhbSB1c2VySWRcbiAgICAgKiBAcGFyYW0gY2JcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICovXG4gICAgbXV0ZVBhcnRpY2lwYW50QXN5bmModXNlcklkLCBjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdklzRGlzcG9zZWQpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLmlzRGlzcG9zZWQoKSk7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodXNlcklkLCB0aGlzLnByaXZFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIFwidXNlcklkXCIpKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpdlJvb20sIHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkU2VuZCk7XG4gICAgICAgICAgICAvLyBjaGVjayB0aGUgY29ubmVjdGlvbiBpcyBvcGVuIChob3N0ICsgcGFydGljaXBhbnQgY2FuIHBlcmZvcm0gdGhlIG11dGUgY29tbWFuZClcbiAgICAgICAgICAgIGlmICghdGhpcy5jYW5TZW5kKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgRXJyb3IodGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRTZW5kKSwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmIG5vdCBob3N0LCBjaGVjayB0aGUgcGFydGljaXBhbnQgaXMgbm90IG11dGluZyBhbm90aGVyIHBhcnRpY2lwYW50XG4gICAgICAgICAgICBpZiAoIXRoaXMubWUuaXNIb3N0ICYmIHRoaXMubWUuaWQgIT09IHVzZXJJZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkUGFydGljaXBhbnQucmVwbGFjZShcIntjb21tYW5kfVwiLCBcIm11dGVcIikpLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2hlY2sgdGhlIHVzZXIgZXhpc3RzXG4gICAgICAgICAgICBjb25zdCBleGlzdHMgPSB0aGlzLnByaXZQYXJ0aWNpcGFudHMuZ2V0UGFydGljaXBhbnRJbmRleCh1c2VySWQpO1xuICAgICAgICAgICAgaWYgKGV4aXN0cyA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKG5ldyBFcnJvcih0aGlzLnByaXZFcnJvcnMuaW52YWxpZFBhcnRpY2lwYW50UmVxdWVzdCksIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5zZW5kUmVxdWVzdCh0aGlzLmdldE11dGVDb21tYW5kKHVzZXJJZCwgdHJ1ZSksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2FsbGJhY2soY2IsIGVycik7XG4gICAgICAgICAgICAgICAgfSksICgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgZXJyKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBlcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElzc3VlcyBhIHJlcXVlc3QgdG8gcmVtb3ZlIGEgcGFydGljaXBhbnQgZnJvbSB0aGUgY29udmVyc2F0aW9uXG4gICAgICogQHBhcmFtIHVzZXJJZFxuICAgICAqIEBwYXJhbSBjYlxuICAgICAqIEBwYXJhbSBlcnJcbiAgICAgKi9cbiAgICByZW1vdmVQYXJ0aWNpcGFudEFzeW5jKHVzZXJJZCwgY2IsIGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZJc0Rpc3Bvc2VkKTtcbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlRyYW5zY3JpYmVyUmVjb2duaXplciAmJiB1c2VySWQuaGFzT3duUHJvcGVydHkoXCJpZFwiKSkge1xuICAgICAgICAgICAgICAgIC8vIEFzc3VtZSB0aGlzIGlzIGEgdHJhbnNjcmlwdGlvbiBwYXJ0aWNpcGFudFxuICAgICAgICAgICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5yZW1vdmVQYXJ0aWNpcGFudEltcGxBc3luYyh1c2VySWQpLCBjYiwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5pc0Rpc3Bvc2VkKCkpO1xuICAgICAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpdlJvb20sIHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkU2VuZCk7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNhblNlbmRBc0hvc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgRXJyb3IodGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRQYXJ0aWNpcGFudC5yZXBsYWNlKFwie2NvbW1hbmR9XCIsIFwicmVtb3ZlXCIpKSwgZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHBhcnRpY2lwYW50SWQgPSBcIlwiO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdXNlcklkID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50SWQgPSB1c2VySWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHVzZXJJZC5oYXNPd25Qcm9wZXJ0eShcImlkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdXNlcklkO1xuICAgICAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudElkID0gcGFydGljaXBhbnQuaWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHVzZXJJZC5oYXNPd25Qcm9wZXJ0eShcInVzZXJJZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gdXNlcklkO1xuICAgICAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudElkID0gdXNlci51c2VySWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShwYXJ0aWNpcGFudElkLCB0aGlzLnByaXZFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIFwidXNlcklkXCIpKTtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayB0aGUgcGFydGljaXBhbnQgZXhpc3RzXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnBhcnRpY2lwYW50cy5maW5kSW5kZXgoKHApID0+IHAuaWQgPT09IHBhcnRpY2lwYW50SWQpO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgRXJyb3IodGhpcy5wcml2RXJyb3JzLmludmFsaWRQYXJ0aWNpcGFudFJlcXVlc3QpLCBlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIuc2VuZFJlcXVlc3QodGhpcy5nZXRFamVjdENvbW1hbmQocGFydGljaXBhbnRJZCksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNhbGxiYWNrKGNiLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KSwgKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSXNzdWVzIGEgcmVxdWVzdCB0byB1bmxvY2sgdGhlIGNvbnZlcnNhdGlvblxuICAgICAqIEBwYXJhbSBjYlxuICAgICAqIEBwYXJhbSBlcnJcbiAgICAgKi9cbiAgICB1bmxvY2tDb252ZXJzYXRpb25Bc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdklzRGlzcG9zZWQpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLmlzRGlzcG9zZWQoKSk7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZCh0aGlzLnByaXZSb29tLCB0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZFNlbmQpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNhblNlbmRBc0hvc3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKG5ldyBFcnJvcih0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZENvbnZlcnNhdGlvbi5yZXBsYWNlKFwie2NvbW1hbmR9XCIsIFwidW5sb2NrXCIpKSwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLnNlbmRSZXF1ZXN0KHRoaXMuZ2V0TG9ja0NvbW1hbmQoZmFsc2UpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNhbGxiYWNrKGNiLCBlcnIpO1xuICAgICAgICAgICAgICAgIH0pLCAoKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJc3N1ZXMgYSByZXF1ZXN0IHRvIHVubXV0ZSBhbGwgcGFydGljaXBhbnRzIGluIHRoZSBjb252ZXJzYXRpb25cbiAgICAgKiBAcGFyYW0gY2JcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICovXG4gICAgdW5tdXRlQWxsUGFydGljaXBhbnRzQXN5bmMoY2IsIGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZJc0Rpc3Bvc2VkKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5pc0Rpc3Bvc2VkKCkpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQodGhpcy5wcml2Um9vbSwgdGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRTZW5kKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jYW5TZW5kQXNIb3N0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgRXJyb3IodGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRDb252ZXJzYXRpb24ucmVwbGFjZShcIntjb21tYW5kfVwiLCBcInVubXV0ZSBhbGxcIikpLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplcikge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIuc2VuZFJlcXVlc3QodGhpcy5nZXRNdXRlQWxsQ29tbWFuZChmYWxzZSksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2FsbGJhY2soY2IsIGVycik7XG4gICAgICAgICAgICAgICAgfSksICgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgZXJyKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBlcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElzc3VlcyBhIHJlcXVlc3QgdG8gdW5tdXRlIGEgcGFydGljaXBhbnQgaW4gdGhlIGNvbnZlcnNhdGlvblxuICAgICAqIEBwYXJhbSB1c2VySWRcbiAgICAgKiBAcGFyYW0gY2JcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICovXG4gICAgdW5tdXRlUGFydGljaXBhbnRBc3luYyh1c2VySWQsIGNiLCBlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2SXNEaXNwb3NlZCk7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIuaXNEaXNwb3NlZCgpKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh1c2VySWQsIHRoaXMucHJpdkVycm9ycy5pbnZhbGlkQXJncy5yZXBsYWNlKFwie2FyZ31cIiwgXCJ1c2VySWRcIikpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQodGhpcy5wcml2Um9vbSwgdGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRTZW5kKTtcbiAgICAgICAgICAgIC8vIGNoZWNrIHRoZSBjb25uZWN0aW9uIGlzIG9wZW4gKGhvc3QgKyBwYXJ0aWNpcGFudCBjYW4gcGVyZm9ybSB0aGUgbXV0ZSBjb21tYW5kKVxuICAgICAgICAgICAgaWYgKCF0aGlzLmNhblNlbmQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKG5ldyBFcnJvcih0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZFNlbmQpLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgbm90IGhvc3QsIGNoZWNrIHRoZSBwYXJ0aWNpcGFudCBpcyBub3QgbXV0aW5nIGFub3RoZXIgcGFydGljaXBhbnRcbiAgICAgICAgICAgIGlmICghdGhpcy5tZS5pc0hvc3QgJiYgdGhpcy5tZS5pZCAhPT0gdXNlcklkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgRXJyb3IodGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRQYXJ0aWNpcGFudC5yZXBsYWNlKFwie2NvbW1hbmR9XCIsIFwibXV0ZVwiKSksIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjaGVjayB0aGUgdXNlciBleGlzdHNcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0cyA9IHRoaXMucHJpdlBhcnRpY2lwYW50cy5nZXRQYXJ0aWNpcGFudEluZGV4KHVzZXJJZCk7XG4gICAgICAgICAgICBpZiAoZXhpc3RzID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5pbnZhbGlkUGFydGljaXBhbnRSZXF1ZXN0KSwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLnNlbmRSZXF1ZXN0KHRoaXMuZ2V0TXV0ZUNvbW1hbmQodXNlcklkLCBmYWxzZSksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2FsbGJhY2soY2IsIGVycik7XG4gICAgICAgICAgICAgICAgfSksICgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgZXJyKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBlcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYSB0ZXh0IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0gbWVzc2FnZVxuICAgICAqIEBwYXJhbSBjYlxuICAgICAqIEBwYXJhbSBlcnJcbiAgICAgKi9cbiAgICBzZW5kVGV4dE1lc3NhZ2VBc3luYyhtZXNzYWdlLCBjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdklzRGlzcG9zZWQpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLmlzRGlzcG9zZWQoKSk7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UobWVzc2FnZSwgdGhpcy5wcml2RXJyb3JzLmludmFsaWRBcmdzLnJlcGxhY2UoXCJ7YXJnfVwiLCBcIm1lc3NhZ2VcIikpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQodGhpcy5wcml2Um9vbSwgdGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRTZW5kKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jYW5TZW5kKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgRXJyb3IodGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRTZW5kKSwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRPRE86IGlzIGEgbWF4IGxlbmd0aCBjaGVjayByZXF1aXJlZD9cbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmxlbmd0aCA+IHRoaXMucHJpdlRleHRNZXNzYWdlTWF4TGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgRXJyb3IodGhpcy5wcml2RXJyb3JzLmludmFsaWRBcmdzLnJlcGxhY2UoXCJ7YXJnfVwiLCBcIm1lc3NhZ2UgbGVuZ3RoXCIpKSwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLnNlbmRSZXF1ZXN0KHRoaXMuZ2V0TWVzc2FnZUNvbW1hbmQobWVzc2FnZSksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2FsbGJhY2soY2IsIGVycik7XG4gICAgICAgICAgICAgICAgfSksICgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgZXJyKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBlcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0cmFuc2xhdGVkIHRvIGxhbmd1YWdlc1xuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IGxhbmd1YWdlcyAtIGxhbmd1YWdlcyB0byB0cmFuc2xhdGUgdG9cbiAgICAgKiBAcGFyYW0gY2JcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICovXG4gICAgc2V0VHJhbnNsYXRlZExhbmd1YWdlc0FzeW5jKGxhbmd1YWdlcywgY2IsIGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZJc0Rpc3Bvc2VkKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplci5pc0Rpc3Bvc2VkKCkpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZBcnJheUVtcHR5T3JXaGl0ZXNwYWNlKGxhbmd1YWdlcywgdGhpcy5wcml2RXJyb3JzLmludmFsaWRBcmdzLnJlcGxhY2UoXCJ7YXJnfVwiLCBcImxhbmd1YWdlc1wiKSk7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZCh0aGlzLnByaXZSb29tLCB0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZFNlbmQpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNhblNlbmQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKG5ldyBFcnJvcih0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZFNlbmQpLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplcikge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIuc2VuZFJlcXVlc3QodGhpcy5nZXRTZXRUcmFuc2xhdGVUb0xhbmd1YWdlc0NvbW1hbmQobGFuZ3VhZ2VzKSwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDYWxsYmFjayhjYiwgZXJyKTtcbiAgICAgICAgICAgICAgICB9KSwgKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBlcnIpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlIG5pY2tuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5pY2tuYW1lIC0gbmV3IG5pY2tuYW1lIGZvciB0aGUgcm9vbVxuICAgICAqIEBwYXJhbSBjYlxuICAgICAqIEBwYXJhbSBlcnJcbiAgICAgKi9cbiAgICBjaGFuZ2VOaWNrbmFtZUFzeW5jKG5pY2tuYW1lLCBjYiwgZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdklzRGlzcG9zZWQpO1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyLmlzRGlzcG9zZWQoKSk7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2Uobmlja25hbWUsIHRoaXMucHJpdkVycm9ycy5pbnZhbGlkQXJncy5yZXBsYWNlKFwie2FyZ31cIiwgXCJuaWNrbmFtZVwiKSk7XG4gICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZCh0aGlzLnByaXZSb29tLCB0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZFNlbmQpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNhblNlbmQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKG5ldyBFcnJvcih0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZFNlbmQpLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplcikge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblJlY29nbml6ZXIuc2VuZFJlcXVlc3QodGhpcy5nZXRDaGFuZ2VOaWNrbmFtZUNvbW1hbmQobmlja25hbWUpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNhbGxiYWNrKGNiLCBlcnIpO1xuICAgICAgICAgICAgICAgIH0pLCAoKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc0Rpc3Bvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNEaXNwb3NlZDtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICBpZiAoISF0aGlzLmNvbmZpZykge1xuICAgICAgICAgICAgdGhpcy5jb25maWcuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByaXZDb25maWcgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucHJpdkxhbmd1YWdlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByaXZSb29tID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByaXZUb2tlbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wcml2TWFuYWdlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wcml2SXNDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2SXNSZWFkeSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZQYXJ0aWNpcGFudHMgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbm5lY3RUcmFuc2NyaWJlclJlY29nbml6ZXIocmVjb2duaXplcikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2VHJhbnNjcmliZXJSZWNvZ25pemVyKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2VHJhbnNjcmliZXJSZWNvZ25pemVyLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCByZWNvZ25pemVyLmVuZm9yY2VBdWRpb0dhdGluZygpO1xuICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNjcmliZXJSZWNvZ25pemVyID0gcmVjb2duaXplcjtcbiAgICAgICAgICAgIHRoaXMucHJpdlRyYW5zY3JpYmVyUmVjb2duaXplci5jb252ZXJzYXRpb24gPSB0aGlzO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0S2VlcEFsaXZlKCkge1xuICAgICAgICBjb25zdCBuaWNrbmFtZSA9ICghIXRoaXMubWUpID8gdGhpcy5tZS5kaXNwbGF5TmFtZSA6IFwiZGVmYXVsdF9uaWNrbmFtZVwiO1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgaWQ6IFwiMFwiLFxuICAgICAgICAgICAgbmlja25hbWUsXG4gICAgICAgICAgICBwYXJ0aWNpcGFudElkOiB0aGlzLnByaXZSb29tLnBhcnRpY2lwYW50SWQsXG4gICAgICAgICAgICByb29tSWQ6IHRoaXMucHJpdlJvb20ucm9vbUlkLFxuICAgICAgICAgICAgdHlwZTogQ29udmVyc2F0aW9uVHJhbnNsYXRvck1lc3NhZ2VUeXBlcy5rZWVwQWxpdmVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qIGVzbGludC1lbmFibGUgQHR5cGVzY3JpcHQtZXNsaW50L3R5cGVkZWYgKi9cbiAgICBhZGRQYXJ0aWNpcGFudEltcGxBc3luYyhwYXJ0aWNpcGFudCkge1xuICAgICAgICBjb25zdCBuZXdQYXJ0aWNpcGFudCA9IHRoaXMucHJpdlBhcnRpY2lwYW50cy5hZGRPclVwZGF0ZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50KTtcbiAgICAgICAgaWYgKG5ld1BhcnRpY2lwYW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlRyYW5zY3JpYmVyUmVjb2duaXplcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkluZm8gPSB0aGlzLmNvbnZlcnNhdGlvbkluZm87XG4gICAgICAgICAgICAgICAgY29udmVyc2F0aW9uSW5mby5wYXJ0aWNpcGFudHMgPSBbcGFydGljaXBhbnRdO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZUcmFuc2NyaWJlclJlY29nbml6ZXIucHVzaENvbnZlcnNhdGlvbkV2ZW50KGNvbnZlcnNhdGlvbkluZm8sIFwiam9pblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVQYXJ0aWNpcGFudEltcGxBc3luYyhwYXJ0aWNpcGFudCkge1xuICAgICAgICB0aGlzLnByaXZQYXJ0aWNpcGFudHMuZGVsZXRlUGFydGljaXBhbnQocGFydGljaXBhbnQuaWQpO1xuICAgICAgICBjb25zdCBjb252ZXJzYXRpb25JbmZvID0gdGhpcy5jb252ZXJzYXRpb25JbmZvO1xuICAgICAgICBjb252ZXJzYXRpb25JbmZvLnBhcnRpY2lwYW50cyA9IFtwYXJ0aWNpcGFudF07XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUcmFuc2NyaWJlclJlY29nbml6ZXIucHVzaENvbnZlcnNhdGlvbkV2ZW50KGNvbnZlcnNhdGlvbkluZm8sIFwibGVhdmVcIik7XG4gICAgfVxuICAgIGNsb3NlKGRpc3Bvc2UpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZJc0Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHlpZWxkICgoX2EgPSB0aGlzLnByaXZDb252ZXJzYXRpb25SZWNvZ25pemVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2xvc2UoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uUmVjb2duaXplciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnByaXZDb252ZXJzYXRpb25UcmFuc2xhdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvblRyYW5zbGF0b3IuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9yXG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaXNwb3NlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKiogSGVscGVycyAqL1xuICAgIGhhbmRsZUNhbGxiYWNrKGNiLCBlcnIpIHtcbiAgICAgICAgaWYgKCEhY2IpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEhZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVFcnJvcihlcnJvciwgZXJyKSB7XG4gICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlZEVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgZXJyKHR5cGVkRXJyb3IubmFtZSArIFwiOiBcIiArIHR5cGVkRXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlcnIoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBQYXJ0aWNpcGFudCBIZWxwZXJzICovXG4gICAgdG9QYXJ0aWNpcGFudHMoaW5jbHVkZUhvc3QpIHtcbiAgICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5wcml2UGFydGljaXBhbnRzLnBhcnRpY2lwYW50cy5tYXAoKHApID0+ICh0aGlzLnRvUGFydGljaXBhbnQocCkpKTtcbiAgICAgICAgaWYgKCFpbmNsdWRlSG9zdCkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnRpY2lwYW50cy5maWx0ZXIoKHApID0+IHAuaXNIb3N0ID09PSBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcGFydGljaXBhbnRzO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvUGFydGljaXBhbnQocCkge1xuICAgICAgICByZXR1cm4gbmV3IFBhcnRpY2lwYW50KHAuaWQsIHAuYXZhdGFyLCBwLmRpc3BsYXlOYW1lLCBwLmlzSG9zdCwgcC5pc011dGVkLCBwLmlzVXNpbmdUdHMsIHAucHJlZmVycmVkTGFuZ3VhZ2UsIHAudm9pY2UpO1xuICAgIH1cbiAgICBnZXRNdXRlQWxsQ29tbWFuZChpc011dGVkKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0aGlzLnByaXZSb29tLnJvb21JZCwgXCJjb252ZXJzYXRpb25JZFwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRoaXMucHJpdlJvb20ucGFydGljaXBhbnRJZCwgXCJwYXJ0aWNpcGFudElkXCIpO1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgY29tbWFuZDogQ29udmVyc2F0aW9uVHJhbnNsYXRvckNvbW1hbmRUeXBlcy5zZXRNdXRlQWxsLFxuICAgICAgICAgICAgcGFydGljaXBhbnRJZDogdGhpcy5wcml2Um9vbS5wYXJ0aWNpcGFudElkLFxuICAgICAgICAgICAgcm9vbWlkOiB0aGlzLnByaXZSb29tLnJvb21JZCxcbiAgICAgICAgICAgIHR5cGU6IENvbnZlcnNhdGlvblRyYW5zbGF0b3JNZXNzYWdlVHlwZXMucGFydGljaXBhbnRDb21tYW5kLFxuICAgICAgICAgICAgdmFsdWU6IGlzTXV0ZWRcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldE11dGVDb21tYW5kKHBhcnRpY2lwYW50SWQsIGlzTXV0ZWQpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRoaXMucHJpdlJvb20ucm9vbUlkLCBcImNvbnZlcnNhdGlvbklkXCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocGFydGljaXBhbnRJZCwgXCJwYXJ0aWNpcGFudElkXCIpO1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgY29tbWFuZDogQ29udmVyc2F0aW9uVHJhbnNsYXRvckNvbW1hbmRUeXBlcy5zZXRNdXRlLFxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9iamVjdC1zaG9ydGhhbmRcbiAgICAgICAgICAgIHBhcnRpY2lwYW50SWQ6IHBhcnRpY2lwYW50SWQsXG4gICAgICAgICAgICByb29taWQ6IHRoaXMucHJpdlJvb20ucm9vbUlkLFxuICAgICAgICAgICAgdHlwZTogQ29udmVyc2F0aW9uVHJhbnNsYXRvck1lc3NhZ2VUeXBlcy5wYXJ0aWNpcGFudENvbW1hbmQsXG4gICAgICAgICAgICB2YWx1ZTogaXNNdXRlZFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0TG9ja0NvbW1hbmQoaXNMb2NrZWQpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRoaXMucHJpdlJvb20ucm9vbUlkLCBcImNvbnZlcnNhdGlvbklkXCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodGhpcy5wcml2Um9vbS5wYXJ0aWNpcGFudElkLCBcInBhcnRpY2lwYW50SWRcIik7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBjb21tYW5kOiBDb252ZXJzYXRpb25UcmFuc2xhdG9yQ29tbWFuZFR5cGVzLnNldExvY2tTdGF0ZSxcbiAgICAgICAgICAgIHBhcnRpY2lwYW50SWQ6IHRoaXMucHJpdlJvb20ucGFydGljaXBhbnRJZCxcbiAgICAgICAgICAgIHJvb21pZDogdGhpcy5wcml2Um9vbS5yb29tSWQsXG4gICAgICAgICAgICB0eXBlOiBDb252ZXJzYXRpb25UcmFuc2xhdG9yTWVzc2FnZVR5cGVzLnBhcnRpY2lwYW50Q29tbWFuZCxcbiAgICAgICAgICAgIHZhbHVlOiBpc0xvY2tlZFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0RWplY3RDb21tYW5kKHBhcnRpY2lwYW50SWQpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRoaXMucHJpdlJvb20ucm9vbUlkLCBcImNvbnZlcnNhdGlvbklkXCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UocGFydGljaXBhbnRJZCwgXCJwYXJ0aWNpcGFudElkXCIpO1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgY29tbWFuZDogQ29udmVyc2F0aW9uVHJhbnNsYXRvckNvbW1hbmRUeXBlcy5lamVjdFBhcnRpY2lwYW50LFxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9iamVjdC1zaG9ydGhhbmRcbiAgICAgICAgICAgIHBhcnRpY2lwYW50SWQ6IHBhcnRpY2lwYW50SWQsXG4gICAgICAgICAgICByb29taWQ6IHRoaXMucHJpdlJvb20ucm9vbUlkLFxuICAgICAgICAgICAgdHlwZTogQ29udmVyc2F0aW9uVHJhbnNsYXRvck1lc3NhZ2VUeXBlcy5wYXJ0aWNpcGFudENvbW1hbmQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRTZXRUcmFuc2xhdGVUb0xhbmd1YWdlc0NvbW1hbmQobGFuZ3VhZ2VzKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0aGlzLnByaXZSb29tLnJvb21JZCwgXCJjb252ZXJzYXRpb25JZFwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRoaXMucHJpdlJvb20ucGFydGljaXBhbnRJZCwgXCJwYXJ0aWNpcGFudElkXCIpO1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgY29tbWFuZDogQ29udmVyc2F0aW9uVHJhbnNsYXRvckNvbW1hbmRUeXBlcy5zZXRUcmFuc2xhdGVUb0xhbmd1YWdlcyxcbiAgICAgICAgICAgIHBhcnRpY2lwYW50SWQ6IHRoaXMucHJpdlJvb20ucGFydGljaXBhbnRJZCxcbiAgICAgICAgICAgIHJvb21pZDogdGhpcy5wcml2Um9vbS5yb29tSWQsXG4gICAgICAgICAgICB0eXBlOiBDb252ZXJzYXRpb25UcmFuc2xhdG9yTWVzc2FnZVR5cGVzLnBhcnRpY2lwYW50Q29tbWFuZCxcbiAgICAgICAgICAgIHZhbHVlOiBsYW5ndWFnZXNcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldENoYW5nZU5pY2tuYW1lQ29tbWFuZChuaWNrbmFtZSkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UodGhpcy5wcml2Um9vbS5yb29tSWQsIFwiY29udmVyc2F0aW9uSWRcIik7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShuaWNrbmFtZSwgXCJuaWNrbmFtZVwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRoaXMucHJpdlJvb20ucGFydGljaXBhbnRJZCwgXCJwYXJ0aWNpcGFudElkXCIpO1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgY29tbWFuZDogQ29udmVyc2F0aW9uVHJhbnNsYXRvckNvbW1hbmRUeXBlcy5jaGFuZ2VOaWNrbmFtZSxcbiAgICAgICAgICAgIG5pY2tuYW1lLFxuICAgICAgICAgICAgcGFydGljaXBhbnRJZDogdGhpcy5wcml2Um9vbS5wYXJ0aWNpcGFudElkLFxuICAgICAgICAgICAgcm9vbWlkOiB0aGlzLnByaXZSb29tLnJvb21JZCxcbiAgICAgICAgICAgIHR5cGU6IENvbnZlcnNhdGlvblRyYW5zbGF0b3JNZXNzYWdlVHlwZXMucGFydGljaXBhbnRDb21tYW5kLFxuICAgICAgICAgICAgdmFsdWU6IG5pY2tuYW1lXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRNZXNzYWdlQ29tbWFuZChtZXNzYWdlKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0aGlzLnByaXZSb29tLnJvb21JZCwgXCJjb252ZXJzYXRpb25JZFwiKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRoaXMucHJpdlJvb20ucGFydGljaXBhbnRJZCwgXCJwYXJ0aWNpcGFudElkXCIpO1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2UobWVzc2FnZSwgXCJtZXNzYWdlXCIpO1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgcGFydGljaXBhbnRJZDogdGhpcy5wcml2Um9vbS5wYXJ0aWNpcGFudElkLFxuICAgICAgICAgICAgcm9vbUlkOiB0aGlzLnByaXZSb29tLnJvb21JZCxcbiAgICAgICAgICAgIHRleHQ6IG1lc3NhZ2UsXG4gICAgICAgICAgICB0eXBlOiBDb252ZXJzYXRpb25UcmFuc2xhdG9yTWVzc2FnZVR5cGVzLmluc3RhbnRNZXNzYWdlXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29udmVyc2F0aW9uLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uQ29tbW9uIHtcbiAgICBjb25zdHJ1Y3RvcihhdWRpb0NvbmZpZykge1xuICAgICAgICB0aGlzLnByaXZBdWRpb0NvbmZpZyA9IGF1ZGlvQ29uZmlnO1xuICAgIH1cbiAgICBoYW5kbGVDYWxsYmFjayhjYiwgZXJyKSB7XG4gICAgICAgIGlmICghIWNiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmICghIWVycikge1xuICAgICAgICAgICAgICAgICAgICBlcnIoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2IgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlRXJyb3IoZXJyb3IsIGVycikge1xuICAgICAgICBpZiAoISFlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZWRFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgIGVycih0eXBlZEVycm9yLm5hbWUgKyBcIjogXCIgKyB0eXBlZEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZXJyKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29udmVyc2F0aW9uQ29tbW9uLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vLyBNdWx0aS1kZXZpY2UgQ29udmVyc2F0aW9uIGlzIGEgUHJldmlldyBmZWF0dXJlLlxuaW1wb3J0IHsgU2Vzc2lvbkV2ZW50QXJncyB9IGZyb20gXCIuLi9FeHBvcnRzXCI7XG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uRXhwaXJhdGlvbkV2ZW50QXJncyBleHRlbmRzIFNlc3Npb25FdmVudEFyZ3Mge1xuICAgIGNvbnN0cnVjdG9yKGV4cGlyYXRpb25UaW1lLCBzZXNzaW9uSWQpIHtcbiAgICAgICAgc3VwZXIoc2Vzc2lvbklkKTtcbiAgICAgICAgdGhpcy5wcml2RXhwaXJhdGlvblRpbWUgPSBleHBpcmF0aW9uVGltZTtcbiAgICB9XG4gICAgLyoqIEhvdyBtdWNoIGxvbmdlciB1bnRpbCB0aGUgY29udmVyc2F0aW9uIGV4cGlyZXMgKGluIG1pbnV0ZXMpLiAqL1xuICAgIGdldCBleHBpcmF0aW9uVGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkV4cGlyYXRpb25UaW1lO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29udmVyc2F0aW9uRXhwaXJhdGlvbkV2ZW50QXJncy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLy8gTXVsdGktZGV2aWNlIENvbnZlcnNhdGlvbiBpcyBhIFByZXZpZXcgZmVhdHVyZS5cbmltcG9ydCB7IFNlc3Npb25FdmVudEFyZ3MgfSBmcm9tIFwiLi4vRXhwb3J0c1wiO1xuZXhwb3J0IGNsYXNzIENvbnZlcnNhdGlvblBhcnRpY2lwYW50c0NoYW5nZWRFdmVudEFyZ3MgZXh0ZW5kcyBTZXNzaW9uRXZlbnRBcmdzIHtcbiAgICBjb25zdHJ1Y3RvcihyZWFzb24sIHBhcnRpY2lwYW50cywgc2Vzc2lvbklkKSB7XG4gICAgICAgIHN1cGVyKHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5wcml2UGFydGljaXBhbnQgPSBwYXJ0aWNpcGFudHM7XG4gICAgfVxuICAgIGdldCByZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgfVxuICAgIGdldCBwYXJ0aWNpcGFudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQYXJ0aWNpcGFudDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvblBhcnRpY2lwYW50c0NoYW5nZWRFdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgVHJhbnNjcmliZXJSZWNvZ25pemVyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyB9IGZyb20gXCIuLi8uLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4uL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgQ29ubmVjdGlvbiwgUHJvcGVydHlDb2xsZWN0aW9uLCBQcm9wZXJ0eUlkIH0gZnJvbSBcIi4uL0V4cG9ydHNcIjtcbmV4cG9ydCBjbGFzcyBDb252ZXJzYXRpb25UcmFuc2NyaWJlciB7XG4gICAgLyoqXG4gICAgICogQ29udmVyc2F0aW9uVHJhbnNjcmliZXIgY29uc3RydWN0b3IuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtBdWRpb0NvbmZpZ30gYXVkaW9Db25maWcgLSBBbiBvcHRpb25hbCBhdWRpbyBjb25maWd1cmF0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVjb2duaXplclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvQ29uZmlnKSB7XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvQ29uZmlnID0gYXVkaW9Db25maWc7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucHJpdkRpc3Bvc2VkUmVjb2duaXplciA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBzcG9rZW4gbGFuZ3VhZ2Ugb2YgcmVjb2duaXRpb24uXG4gICAgICogQG1lbWJlciBDb252ZXJzYXRpb25UcmFuc2NyaWJlci5wcm90b3R5cGUuc3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgc3Bva2VuIGxhbmd1YWdlIG9mIHJlY29nbml0aW9uLlxuICAgICAqL1xuICAgIGdldCBzcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlKCkge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkUmVjb2duaXplcik7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2UpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbiBvZiBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXMgZGVmaW5lZCBmb3IgdGhpcyBDb252ZXJzYXRpb25UcmFuc2NyaWJlci5cbiAgICAgKiBAbWVtYmVyIENvbnZlcnNhdGlvblRyYW5zY3JpYmVyLnByb3RvdHlwZS5wcm9wZXJ0aWVzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIENvbnZlcnNhdGlvblRyYW5zY3JpYmVyLlxuICAgICAqL1xuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQEludGVybmFsXG4gICAgICogSW50ZXJuYWwgZGF0YSBtZW1iZXIgdG8gc3VwcG9ydCBmcm9tUmVjb2duaXplciogcGF0dGVybiBtZXRob2RzIG9uIG90aGVyIGNsYXNzZXMuXG4gICAgICogRG8gbm90IHVzZSBleHRlcm5hbGx5LCBvYmplY3QgcmV0dXJuZWQgd2lsbCBjaGFuZ2Ugd2l0aG91dCB3YXJuaW5nIG9yIG5vdGljZS5cbiAgICAgKi9cbiAgICBnZXQgaW50ZXJuYWxEYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVjb2duaXplci5pbnRlcm5hbERhdGE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBEZXByZWNhdGVkXG4gICAgICogQE9ic29sZXRlXG4gICAgICogUGxlYXNlIHVzZSB0aGUgQ29ubmVjdGlvbi5mcm9tUmVjb2duaXplciBwYXR0ZXJuIHRvIG9idGFpbiBhIGNvbm5lY3Rpb24gb2JqZWN0XG4gICAgICovXG4gICAgZ2V0IGNvbm5lY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBDb25uZWN0aW9uLmZyb21SZWNvZ25pemVyKHRoaXMucHJpdlJlY29nbml6ZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBhdXRob3JpemF0aW9uIHRva2VuIHVzZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgc2VydmljZS5cbiAgICAgKiBAbWVtYmVyIENvbnZlcnNhdGlvblRyYW5zY3JpYmVyLnByb3RvdHlwZS5hdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBnZXQgYXV0aG9yaXphdGlvblRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzL1NldHMgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBzZXJ2aWNlLlxuICAgICAqIEBtZW1iZXIgQ29udmVyc2F0aW9uVHJhbnNjcmliZXIucHJvdG90eXBlLmF1dGhvcml6YXRpb25Ub2tlblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdG9rZW4gLSBBdXRob3JpemF0aW9uIHRva2VuLlxuICAgICAqL1xuICAgIHNldCBhdXRob3JpemF0aW9uVG9rZW4odG9rZW4pIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRva2VuLCBcInRva2VuXCIpO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMuc2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQXV0aG9yaXphdGlvbl9Ub2tlbiwgdG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0NvbnZlcnNhdGlvbn0gY29udmVyc2F0aW9uIC0gY29udmVyc2F0aW9uIHRvIGJlIHJlY29nbml6ZWRcbiAgICAgKi9cbiAgICBqb2luQ29udmVyc2F0aW9uQXN5bmMoY29udmVyc2F0aW9uLCBjYiwgZXJyKSB7XG4gICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbkltcGwgPSBjb252ZXJzYXRpb247XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGNvbnZlcnNhdGlvbkltcGwsIFwiQ29udmVyc2F0aW9uXCIpO1xuICAgICAgICAvLyByZWYgdGhlIGNvbnZlcnNhdGlvbiBvYmplY3RcbiAgICAgICAgLy8gY3JlYXRlIHJlY29nbml6ZXIgYW5kIHN1YnNjcmliZSB0byByZWNvZ25pemVyIGV2ZW50c1xuICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyID0gbmV3IFRyYW5zY3JpYmVyUmVjb2duaXplcihjb252ZXJzYXRpb24uY29uZmlnLCB0aGlzLnByaXZBdWRpb0NvbmZpZyk7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpdlJlY29nbml6ZXIsIFwiUmVjb2duaXplclwiKTtcbiAgICAgICAgdGhpcy5wcml2UmVjb2duaXplci5jb25uZWN0Q2FsbGJhY2tzKHRoaXMpO1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKGNvbnZlcnNhdGlvbkltcGwuY29ubmVjdFRyYW5zY3JpYmVyUmVjb2duaXplcih0aGlzLnByaXZSZWNvZ25pemVyKSwgY2IsIGVycik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBjb252ZXJzYXRpb24gdHJhbnNjcmlwdGlvbiwgdW50aWwgc3RvcFRyYW5zY3JpYmluZ0FzeW5jKCkgaXMgY2FsbGVkLlxuICAgICAqIFVzZXIgbXVzdCBzdWJzY3JpYmUgdG8gZXZlbnRzIHRvIHJlY2VpdmUgdHJhbnNjcmlwdGlvbiByZXN1bHRzLlxuICAgICAqIEBtZW1iZXIgQ29udmVyc2F0aW9uVHJhbnNjcmliZXIucHJvdG90eXBlLnN0YXJ0VHJhbnNjcmliaW5nQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIGNiIC0gQ2FsbGJhY2sgaW52b2tlZCBvbmNlIHRoZSB0cmFuc2NyaXB0aW9uIGhhcyBzdGFydGVkLlxuICAgICAqIEBwYXJhbSBlcnIgLSBDYWxsYmFjayBpbnZva2VkIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICovXG4gICAgc3RhcnRUcmFuc2NyaWJpbmdBc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXIuc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyhjYiwgZXJyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIGNvbnZlcnNhdGlvbiB0cmFuc2NyaXB0aW9uLCB1bnRpbCBzdG9wVHJhbnNjcmliaW5nQXN5bmMoKSBpcyBjYWxsZWQuXG4gICAgICogVXNlciBtdXN0IHN1YnNjcmliZSB0byBldmVudHMgdG8gcmVjZWl2ZSB0cmFuc2NyaXB0aW9uIHJlc3VsdHMuXG4gICAgICogQG1lbWJlciBDb252ZXJzYXRpb25UcmFuc2NyaWJlci5wcm90b3R5cGUuc3RvcFRyYW5zY3JpYmluZ0FzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBjYiAtIENhbGxiYWNrIGludm9rZWQgb25jZSB0aGUgdHJhbnNjcmlwdGlvbiBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIHN0b3BUcmFuc2NyaWJpbmdBc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIHRoaXMucHJpdlJlY29nbml6ZXIuc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKGNiLCBlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMZWF2ZSB0aGUgY3VycmVudCBjb252ZXJzYXRpb24uIEFmdGVyIHRoaXMgaXMgY2FsbGVkLCB5b3Ugd2lsbCBubyBsb25nZXIgcmVjZWl2ZSBhbnkgZXZlbnRzLlxuICAgICAqL1xuICAgIGxlYXZlQ29udmVyc2F0aW9uQXN5bmMoY2IsIGVycikge1xuICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyLmRpc2Nvbm5lY3RDYWxsYmFja3MoKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3MoKCgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsgcmV0dXJuOyB9KSkoKSwgY2IsIGVycik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGNsb3NlcyBhbGwgZXh0ZXJuYWwgcmVzb3VyY2VzIGhlbGQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAbWVtYmVyIENvbnZlcnNhdGlvblRyYW5zY3JpYmVyLnByb3RvdHlwZS5jbG9zZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZShjYiwgZXJyb3JDYikge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZkRpc3Bvc2VkKHRoaXMucHJpdkRpc3Bvc2VkUmVjb2duaXplcik7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5kaXNwb3NlKHRydWUpLCBjYiwgZXJyb3JDYik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc3Bvc2VzIGFueSByZXNvdXJjZXMgaGVsZCBieSB0aGUgb2JqZWN0LlxuICAgICAqIEBtZW1iZXIgQ29udmVyc2F0aW9uVHJhbnNjcmliZXIucHJvdG90eXBlLmRpc3Bvc2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtib29sZWFufSBkaXNwb3NpbmcgLSB0cnVlIGlmIGRpc3Bvc2luZyB0aGUgb2JqZWN0LlxuICAgICAqL1xuICAgIGRpc3Bvc2UoZGlzcG9zaW5nKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2RGlzcG9zZWRSZWNvZ25pemVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2UmVjb2duaXplcikge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucHJpdlJlY29nbml6ZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZSZWNvZ25pemVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpc3Bvc2luZykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkRpc3Bvc2VkUmVjb2duaXplciA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29udmVyc2F0aW9uVHJhbnNjcmliZXIuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8vIE11bHRpLWRldmljZSBDb252ZXJzYXRpb24gaXMgYSBQcmV2aWV3IGZlYXR1cmUuXG5pbXBvcnQgeyBDYW5jZWxsYXRpb25FdmVudEFyZ3NCYXNlIH0gZnJvbSBcIi4uL0NhbmNlbGxhdGlvbkV2ZW50QXJnc0Jhc2VcIjtcbmV4cG9ydCBjbGFzcyBDb252ZXJzYXRpb25UcmFuc2xhdGlvbkNhbmNlbGVkRXZlbnRBcmdzIGV4dGVuZHMgQ2FuY2VsbGF0aW9uRXZlbnRBcmdzQmFzZSB7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvblRyYW5zbGF0aW9uQ2FuY2VsZWRFdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8vIE11bHRpLWRldmljZSBDb252ZXJzYXRpb24gaXMgYSBQcmV2aWV3IGZlYXR1cmUuXG5pbXBvcnQgeyBSZWNvZ25pdGlvbkV2ZW50QXJncyB9IGZyb20gXCIuLi9FeHBvcnRzXCI7XG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uVHJhbnNsYXRpb25FdmVudEFyZ3MgZXh0ZW5kcyBSZWNvZ25pdGlvbkV2ZW50QXJncyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0NvbnZlcnNhdGlvblRyYW5zbGF0aW9uUmVzdWx0fSByZXN1bHQgLSBUaGUgdHJhbnNsYXRpb24gcmVjb2duaXRpb24gcmVzdWx0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgLSBUaGUgb2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzZXNzaW9uSWQgLSBUaGUgc2Vzc2lvbiBpZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZXN1bHQsIG9mZnNldCwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHN1cGVyKG9mZnNldCwgc2Vzc2lvbklkKTtcbiAgICAgICAgdGhpcy5wcml2UmVzdWx0ID0gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIHJlY29nbml0aW9uIHJlc3VsdC5cbiAgICAgKiBAcmV0dXJucyB7Q29udmVyc2F0aW9uVHJhbnNsYXRpb25SZXN1bHR9IHRoZSByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICovXG4gICAgZ2V0IHJlc3VsdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlc3VsdDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvblRyYW5zbGF0aW9uRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vLyBNdWx0aS1kZXZpY2UgQ29udmVyc2F0aW9uIGlzIGEgUHJldmlldyBmZWF0dXJlLlxuaW1wb3J0IHsgVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdCB9IGZyb20gXCIuLi9UcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0XCI7XG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uVHJhbnNsYXRpb25SZXN1bHQgZXh0ZW5kcyBUcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJ0aWNpcGFudElkLCB0cmFuc2xhdGlvbnMsIG9yaWdpbmFsTGFuZ3VhZ2UsIHJlc3VsdElkLCByZWFzb24sIHRleHQsIGR1cmF0aW9uLCBvZmZzZXQsIGVycm9yRGV0YWlscywganNvbiwgcHJvcGVydGllcykge1xuICAgICAgICBzdXBlcih0cmFuc2xhdGlvbnMsIHJlc3VsdElkLCByZWFzb24sIHRleHQsIGR1cmF0aW9uLCBvZmZzZXQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBlcnJvckRldGFpbHMsIGpzb24sIHByb3BlcnRpZXMpO1xuICAgICAgICB0aGlzLnByaXZJZCA9IHBhcnRpY2lwYW50SWQ7XG4gICAgICAgIHRoaXMucHJpdk9yaWdMYW5nID0gb3JpZ2luYWxMYW5ndWFnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgcGFydGljaXBhbnQgdGhpcyByZXN1bHQgaXMgZm9yLlxuICAgICAqL1xuICAgIGdldCBwYXJ0aWNpcGFudElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBvcmlnaW5hbCBsYW5ndWFnZSB0aGlzIHJlc3VsdCB3YXMgaW4uXG4gICAgICovXG4gICAgZ2V0IG9yaWdpbmFsTGFuZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdk9yaWdMYW5nO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29udmVyc2F0aW9uVHJhbnNsYXRpb25SZXN1bHQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8vIE11bHRpLWRldmljZSBDb252ZXJzYXRpb24gaXMgYSBQcmV2aWV3IGZlYXR1cmUuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5pbXBvcnQgeyBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLCBTZXJ2aWNlUHJvcGVydGllc1Byb3BlcnR5TmFtZSwgfSBmcm9tIFwiLi4vLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25UcmFuc2xhdG9yQ29ubmVjdGlvbkZhY3RvcnkgfSBmcm9tIFwiLi4vLi4vY29tbW9uLnNwZWVjaC9UcmFuc2NyaXB0aW9uL0NvbnZlcnNhdGlvblRyYW5zbGF0b3JDb25uZWN0aW9uRmFjdG9yeVwiO1xuaW1wb3J0IHsgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyB9IGZyb20gXCIuLi8uLi9jb21tb24vRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4uL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgQXVkaW9Db25maWcsIENhbmNlbGxhdGlvbkVycm9yQ29kZSwgQ2FuY2VsbGF0aW9uUmVhc29uLCBQcm9mYW5pdHlPcHRpb24sIFByb3BlcnR5Q29sbGVjdGlvbiwgUHJvcGVydHlJZCwgU2VydmljZVByb3BlcnR5Q2hhbm5lbCwgU3BlZWNoVHJhbnNsYXRpb25Db25maWcsIFRyYW5zbGF0aW9uUmVjb2duaXplciB9IGZyb20gXCIuLi9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25JbXBsIH0gZnJvbSBcIi4vQ29udmVyc2F0aW9uXCI7XG5pbXBvcnQgeyBDb252ZXJzYXRpb25Db21tb24sIENvbnZlcnNhdGlvblRyYW5zbGF0aW9uQ2FuY2VsZWRFdmVudEFyZ3MgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG5leHBvcnQgdmFyIFNwZWVjaFN0YXRlO1xuKGZ1bmN0aW9uIChTcGVlY2hTdGF0ZSkge1xuICAgIFNwZWVjaFN0YXRlW1NwZWVjaFN0YXRlW1wiSW5hY3RpdmVcIl0gPSAwXSA9IFwiSW5hY3RpdmVcIjtcbiAgICBTcGVlY2hTdGF0ZVtTcGVlY2hTdGF0ZVtcIkNvbm5lY3RpbmdcIl0gPSAxXSA9IFwiQ29ubmVjdGluZ1wiO1xuICAgIFNwZWVjaFN0YXRlW1NwZWVjaFN0YXRlW1wiQ29ubmVjdGVkXCJdID0gMl0gPSBcIkNvbm5lY3RlZFwiO1xufSkoU3BlZWNoU3RhdGUgfHwgKFNwZWVjaFN0YXRlID0ge30pKTtcbi8vIGNoaWxkIGNsYXNzIG9mIFRyYW5zbGF0aW9uUmVjb2duaXplciBtZWFudCBvbmx5IGZvciB1c2Ugd2l0aCBDb252ZXJzYXRpb25UcmFuc2xhdG9yXG5jbGFzcyBDb252ZXJzYXRpb25UcmFuc2xhdGlvblJlY29nbml6ZXIgZXh0ZW5kcyBUcmFuc2xhdGlvblJlY29nbml6ZXIge1xuICAgIGNvbnN0cnVjdG9yKHNwZWVjaENvbmZpZywgYXVkaW9Db25maWcsIHRyYW5zbGF0b3IsIGNvbnZHZXR0ZXIpIHtcbiAgICAgICAgc3VwZXIoc3BlZWNoQ29uZmlnLCBhdWRpb0NvbmZpZywgbmV3IENvbnZlcnNhdGlvblRyYW5zbGF0b3JDb25uZWN0aW9uRmFjdG9yeShjb252R2V0dGVyKSk7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFN0YXRlID0gU3BlZWNoU3RhdGUuSW5hY3RpdmU7XG4gICAgICAgIGlmICghIXRyYW5zbGF0b3IpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlRyYW5zbGF0b3IgPSB0cmFuc2xhdG9yO1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uU3RhcnRlZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hTdGF0ZSA9IFNwZWVjaFN0YXRlLkNvbm5lY3RlZDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnNlc3Npb25TdG9wcGVkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFN0YXRlID0gU3BlZWNoU3RhdGUuSW5hY3RpdmU7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5yZWNvZ25pemluZyA9ICh0ciwgZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghIXRoaXMucHJpdlRyYW5zbGF0b3IucmVjb2duaXppbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRvci5yZWNvZ25pemluZyh0aGlzLnByaXZUcmFuc2xhdG9yLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1taXN1c2VkLXByb21pc2VzXG4gICAgICAgICAgICB0aGlzLnJlY29nbml6ZWQgPSAodHIsIGUpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYW4gZXJyb3IgY29ubmVjdGluZyB0byB0aGUgY29udmVyc2F0aW9uIHNlcnZpY2UgZnJvbSB0aGUgc3BlZWNoIHNlcnZpY2UgdGhlIGVycm9yIHdpbGwgYmUgcmV0dXJuZWQgaW4gdGhlIEVycm9yRGV0YWlscyBmaWVsZC5cbiAgICAgICAgICAgICAgICBpZiAoKF9hID0gZS5yZXN1bHQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lcnJvckRldGFpbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5jYW5jZWxTcGVlY2goKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogZm9ybWF0IHRoZSBlcnJvciBtZXNzYWdlIGNvbnRhaW5lZCBpbiAnZXJyb3JEZXRhaWxzJ1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpcmVDYW5jZWxFdmVudChlLnJlc3VsdC5lcnJvckRldGFpbHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2VHJhbnNsYXRvci5yZWNvZ25pemVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZUcmFuc2xhdG9yLnJlY29nbml6ZWQodGhpcy5wcml2VHJhbnNsYXRvciwgZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW1pc3VzZWQtcHJvbWlzZXNcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsZWQgPSAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdlNwZWVjaFN0YXRlICE9PSBTcGVlY2hTdGF0ZS5JbmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5jYW5jZWxTcGVlY2goKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFN0YXRlID0gU3BlZWNoU3RhdGUuSW5hY3RpdmU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgc3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTcGVlY2hTdGF0ZTtcbiAgICB9XG4gICAgc2V0IHN0YXRlKG5ld1N0YXRlKSB7XG4gICAgICAgIHRoaXMucHJpdlNwZWVjaFN0YXRlID0gbmV3U3RhdGU7XG4gICAgfVxuICAgIG9uQ29ubmVjdGlvbigpIHtcbiAgICAgICAgdGhpcy5wcml2U3BlZWNoU3RhdGUgPSBTcGVlY2hTdGF0ZS5Db25uZWN0ZWQ7XG4gICAgfVxuICAgIG9uRGlzY29ubmVjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFN0YXRlID0gU3BlZWNoU3RhdGUuSW5hY3RpdmU7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLmNhbmNlbFNwZWVjaCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmlyZSBhIGNhbmNlbCBldmVudFxuICAgICAqIEBwYXJhbSBlcnJvclxuICAgICAqL1xuICAgIGZpcmVDYW5jZWxFdmVudChlcnJvcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2VHJhbnNsYXRvci5jYW5jZWxlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbmNlbEV2ZW50ID0gbmV3IENvbnZlcnNhdGlvblRyYW5zbGF0aW9uQ2FuY2VsZWRFdmVudEFyZ3MoQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yLCBlcnJvciwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLlJ1bnRpbWVFcnJvcik7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2VHJhbnNsYXRvci5jYW5jZWxlZCh0aGlzLnByaXZUcmFuc2xhdG9yLCBjYW5jZWxFdmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vXG4gICAgICAgIH1cbiAgICB9XG4gICAgY2FuY2VsU3BlZWNoKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKCk7XG4gICAgICAgICAgICAgICAgeWllbGQgKChfYSA9IHRoaXMucHJpdlJlY28pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kaXNjb25uZWN0KCkpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFN0YXRlID0gU3BlZWNoU3RhdGUuSW5hY3RpdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIGlnbm9yZSB0aGUgZXJyb3JcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBKb2luLCBsZWF2ZSBvciBjb25uZWN0IHRvIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgQ29udmVyc2F0aW9uVHJhbnNsYXRvciBleHRlbmRzIENvbnZlcnNhdGlvbkNvbW1vbiB7XG4gICAgY29uc3RydWN0b3IoYXVkaW9Db25maWcpIHtcbiAgICAgICAgc3VwZXIoYXVkaW9Db25maWcpO1xuICAgICAgICB0aGlzLnByaXZFcnJvcnMgPSBDb252ZXJzYXRpb25Db25uZWN0aW9uQ29uZmlnLnJlc3RFcnJvcnM7XG4gICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcml2SXNTcGVha2luZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByaXZQbGFjZWhvbGRlcktleSA9IFwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDVcIjtcbiAgICAgICAgdGhpcy5wcml2UGxhY2Vob2xkZXJSZWdpb24gPSBcIndlc3R1c1wiO1xuICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gbmV3IFByb3BlcnR5Q29sbGVjdGlvbigpO1xuICAgIH1cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxuICAgIGdldCBzcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3BlZWNoUmVjb2duaXRpb25MYW5ndWFnZTtcbiAgICB9XG4gICAgZ2V0IHBhcnRpY2lwYW50cygpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5wcml2Q29udmVyc2F0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucGFydGljaXBhbnRzO1xuICAgIH1cbiAgICBnZXQgY2FuU3BlYWsoKSB7XG4gICAgICAgIC8vIGlzIHRoZXJlIGEgQ29udmVyc2F0aW9uIHdlYnNvY2tldCBhdmFpbGFibGUgYW5kIGhhcyB0aGUgUmVjb2duaXplciBiZWVuIHNldCB1cFxuICAgICAgICBpZiAoIXRoaXMucHJpdkNvbnZlcnNhdGlvbi5pc0Nvbm5lY3RlZCB8fCAhdGhpcy5wcml2Q1RSZWNvZ25pemVyKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaXMgdGhlIHVzZXIgYWxyZWFkeSBzcGVha2luZ1xuICAgICAgICBpZiAodGhpcy5wcml2SXNTcGVha2luZyB8fCB0aGlzLnByaXZDVFJlY29nbml6ZXIuc3RhdGUgPT09IFNwZWVjaFN0YXRlLkNvbm5lY3RlZCB8fCB0aGlzLnByaXZDVFJlY29nbml6ZXIuc3RhdGUgPT09IFNwZWVjaFN0YXRlLkNvbm5lY3RpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpcyB0aGUgdXNlciBtdXRlZFxuICAgICAgICBpZiAodGhpcy5wcml2Q29udmVyc2F0aW9uLmlzTXV0ZWRCeUhvc3QpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgc2V0U2VydmljZVByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRQcm9wZXJ0aWVzID0gSlNPTi5wYXJzZSh0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KFNlcnZpY2VQcm9wZXJ0aWVzUHJvcGVydHlOYW1lLCBcInt9XCIpKTtcbiAgICAgICAgY3VycmVudFByb3BlcnRpZXNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShTZXJ2aWNlUHJvcGVydGllc1Byb3BlcnR5TmFtZSwgSlNPTi5zdHJpbmdpZnkoY3VycmVudFByb3BlcnRpZXMpKTtcbiAgICB9XG4gICAgam9pbkNvbnZlcnNhdGlvbkFzeW5jKGNvbnZlcnNhdGlvbiwgbmlja25hbWUsIHBhcmFtMSwgcGFyYW0yLCBwYXJhbTMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udmVyc2F0aW9uID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoY29udmVyc2F0aW9uLCB0aGlzLnByaXZFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIFwiY29udmVyc2F0aW9uIGlkXCIpKTtcbiAgICAgICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPcldoaXRlc3BhY2Uobmlja25hbWUsIHRoaXMucHJpdkVycm9ycy5pbnZhbGlkQXJncy5yZXBsYWNlKFwie2FyZ31cIiwgXCJuaWNrbmFtZVwiKSk7XG4gICAgICAgICAgICAgICAgaWYgKCEhdGhpcy5wcml2Q29udmVyc2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkU3RhcnQpLCBwYXJhbTMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgbGFuZyA9IHBhcmFtMTtcbiAgICAgICAgICAgICAgICBpZiAobGFuZyA9PT0gdW5kZWZpbmVkIHx8IGxhbmcgPT09IG51bGwgfHwgbGFuZyA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICBsYW5nID0gQ29udmVyc2F0aW9uQ29ubmVjdGlvbkNvbmZpZy5kZWZhdWx0TGFuZ3VhZ2VDb2RlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgYSBwbGFjZWhvbGRlciBjb25maWdcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZyA9IFNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnLmZyb21TdWJzY3JpcHRpb24odGhpcy5wcml2UGxhY2Vob2xkZXJLZXksIHRoaXMucHJpdlBsYWNlaG9sZGVyUmVnaW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5zZXRQcm9mYW5pdHkoUHJvZmFuaXR5T3B0aW9uLk1hc2tlZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoVHJhbnNsYXRpb25Db25maWcuYWRkVGFyZ2V0TGFuZ3VhZ2UobGFuZyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoVHJhbnNsYXRpb25Db25maWcuc2V0UHJvcGVydHkoUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZV0sIGxhbmcpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWRbUHJvcGVydHlJZC5Db252ZXJzYXRpb25UcmFuc2xhdG9yX05hbWVdLCBuaWNrbmFtZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcGVydHlJZHNUb0NvcHkgPSBbXG4gICAgICAgICAgICAgICAgICAgIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fSG9zdCxcbiAgICAgICAgICAgICAgICAgICAgUHJvcGVydHlJZC5Db252ZXJzYXRpb25UcmFuc2xhdG9yX0hvc3QsXG4gICAgICAgICAgICAgICAgICAgIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fRW5kcG9pbnQsXG4gICAgICAgICAgICAgICAgICAgIFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUHJveHlIb3N0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICBQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1Byb3h5UG9ydCxcbiAgICAgICAgICAgICAgICAgICAgUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9Qcm94eVVzZXJOYW1lLFxuICAgICAgICAgICAgICAgICAgICBcIkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfTXVsdGlDaGFubmVsQXVkaW9cIixcbiAgICAgICAgICAgICAgICAgICAgXCJDb252ZXJzYXRpb25UcmFuc2xhdG9yX1JlZ2lvblwiXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHByb3Agb2YgcHJvcGVydHlJZHNUb0NvcHkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnByaXZQcm9wZXJ0aWVzLmdldFByb3BlcnR5KHByb3ApO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHR5cGVvZiBwcm9wID09PSBcInN0cmluZ1wiID8gcHJvcCA6IFByb3BlcnR5SWRbcHJvcF07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5zZXRQcm9wZXJ0eShrZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UHJvcGVydGllcyA9IEpTT04ucGFyc2UodGhpcy5wcml2UHJvcGVydGllcy5nZXRQcm9wZXJ0eShTZXJ2aWNlUHJvcGVydGllc1Byb3BlcnR5TmFtZSwgXCJ7fVwiKSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwcm9wIG9mIE9iamVjdC5rZXlzKGN1cnJlbnRQcm9wZXJ0aWVzKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5zZXRTZXJ2aWNlUHJvcGVydHkocHJvcCwgY3VycmVudFByb3BlcnRpZXNbcHJvcF0sIFNlcnZpY2VQcm9wZXJ0eUNoYW5uZWwuVXJpUXVlcnlQYXJhbWV0ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBqb2luIHRoZSBjb252ZXJzYXRpb25cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb24gPSBuZXcgQ29udmVyc2F0aW9uSW1wbCh0aGlzLnByaXZTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uLmNvbnZlcnNhdGlvblRyYW5zbGF0b3IgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbi5qb2luQ29udmVyc2F0aW9uQXN5bmMoY29udmVyc2F0aW9uLCBuaWNrbmFtZSwgbGFuZywgKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkQ29ubmVjdCksIHBhcmFtMyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoVHJhbnNsYXRpb25Db25maWcuYXV0aG9yaXphdGlvblRva2VuID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb24ucm9vbS5pc0hvc3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29ubmVjdCB0byB0aGUgd3NcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q29udmVyc2F0aW9uLnN0YXJ0Q29udmVyc2F0aW9uQXN5bmMoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2FsbGJhY2socGFyYW0yLCBwYXJhbTMpO1xuICAgICAgICAgICAgICAgICAgICB9KSwgKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgcGFyYW0zKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0pLCAoKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIHBhcmFtMyk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGNvbnZlcnNhdGlvbiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGNvbnZlcnNhdGlvbiwgdGhpcy5wcml2RXJyb3JzLmludmFsaWRBcmdzLnJlcGxhY2UoXCJ7YXJnfVwiLCBcImNvbnZlcnNhdGlvbiBpZFwiKSk7XG4gICAgICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKG5pY2tuYW1lLCB0aGlzLnByaXZFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIFwibmlja25hbWVcIikpO1xuICAgICAgICAgICAgICAgIC8vIHNhdmUgdGhlIG5pY2tuYW1lXG4gICAgICAgICAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLkNvbnZlcnNhdGlvblRyYW5zbGF0b3JfTmFtZSwgbmlja25hbWUpO1xuICAgICAgICAgICAgICAgIC8vIHJlZiB0aGUgY29udmVyc2F0aW9uIG9iamVjdFxuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbiA9IGNvbnZlcnNhdGlvbjtcbiAgICAgICAgICAgICAgICAvLyByZWYgdGhlIGNvbnZlcnNhdGlvbiB0cmFuc2xhdG9yIG9iamVjdFxuICAgICAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbi5jb252ZXJzYXRpb25UcmFuc2xhdG9yID0gdGhpcztcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb24ucm9vbS5pc0hvc3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvbiwgdGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRDb25uZWN0KTtcbiAgICAgICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZCh0aGlzLnByaXZDb252ZXJzYXRpb24ucm9vbS50b2tlbiwgdGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRDb25uZWN0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZyA9IGNvbnZlcnNhdGlvbi5jb25maWc7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDYWxsYmFjayhwYXJhbTEsIHBhcmFtMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKG5ldyBFcnJvcih0aGlzLnByaXZFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIFwiaW52YWxpZCBjb252ZXJzYXRpb24gdHlwZVwiKSksIHBhcmFtMik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCB0eXBlb2YgcGFyYW0xID09PSBcInN0cmluZ1wiID8gcGFyYW0zIDogcGFyYW0yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBMZWF2ZSB0aGUgY29udmVyc2F0aW9uXG4gICAgICogQHBhcmFtIGNiXG4gICAgICogQHBhcmFtIGVyclxuICAgICAqL1xuICAgIGxlYXZlQ29udmVyc2F0aW9uQXN5bmMoY2IsIGVycikge1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKCgoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyBzdG9wIHRoZSBzcGVlY2ggd2Vic29ja2V0XG4gICAgICAgICAgICB5aWVsZCB0aGlzLmNhbmNlbFNwZWVjaCgpO1xuICAgICAgICAgICAgLy8gc3RvcCB0aGUgd2Vic29ja2V0XG4gICAgICAgICAgICB5aWVsZCB0aGlzLnByaXZDb252ZXJzYXRpb24uZW5kQ29udmVyc2F0aW9uSW1wbEFzeW5jKCk7XG4gICAgICAgICAgICAvLyBodHRwcyBkZWxldGUgcmVxdWVzdFxuICAgICAgICAgICAgeWllbGQgdGhpcy5wcml2Q29udmVyc2F0aW9uLmRlbGV0ZUNvbnZlcnNhdGlvbkltcGxBc3luYygpO1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIH0pKSgpLCBjYiwgZXJyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhIHRleHQgbWVzc2FnZVxuICAgICAqIEBwYXJhbSBtZXNzYWdlXG4gICAgICogQHBhcmFtIGNiXG4gICAgICogQHBhcmFtIGVyclxuICAgICAqL1xuICAgIHNlbmRUZXh0TWVzc2FnZUFzeW5jKG1lc3NhZ2UsIGNiLCBlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvbiwgdGhpcy5wcml2RXJyb3JzLnBlcm1pc3Npb25EZW5pZWRTZW5kKTtcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZShtZXNzYWdlLCB0aGlzLnByaXZFcnJvcnMuaW52YWxpZEFyZ3MucmVwbGFjZShcInthcmd9XCIsIG1lc3NhZ2UpKTtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbi5zZW5kVGV4dE1lc3NhZ2VBc3luYyhtZXNzYWdlLCBjYiwgZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnQgc3BlYWtpbmdcbiAgICAgKiBAcGFyYW0gY2JcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICovXG4gICAgc3RhcnRUcmFuc2NyaWJpbmdBc3luYyhjYiwgZXJyKSB7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3MoKCgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQodGhpcy5wcml2Q29udmVyc2F0aW9uLCB0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZFNlbmQpO1xuICAgICAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHRoaXMucHJpdkNvbnZlcnNhdGlvbi5yb29tLnRva2VuLCB0aGlzLnByaXZFcnJvcnMucGVybWlzc2lvbkRlbmllZENvbm5lY3QpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZDVFJlY29nbml6ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmNvbm5lY3RUcmFuc2xhdG9yUmVjb2duaXplcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZCh0aGlzLnByaXZDVFJlY29nbml6ZXIsIHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkU2VuZCk7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNhblNwZWFrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKHRoaXMucHJpdkVycm9ycy5wZXJtaXNzaW9uRGVuaWVkU2VuZCksIGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMuc3RhcnRDb250aW51b3VzUmVjb2duaXRpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZJc1NwZWFraW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdklzU3BlYWtpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmNhbmNlbFNwZWVjaCgpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkoKSwgY2IsIGVycik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3Agc3BlYWtpbmdcbiAgICAgKiBAcGFyYW0gY2JcbiAgICAgKiBAcGFyYW0gZXJyXG4gICAgICovXG4gICAgc3RvcFRyYW5zY3JpYmluZ0FzeW5jKGNiLCBlcnIpIHtcbiAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcygoKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJpdklzU3BlYWtpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RvcCBzcGVlY2hcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgdGhpcy5jYW5jZWxTcGVlY2goKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBzdG9wIHRoZSByZWNvZ25pdGlvbiBidXQgbGVhdmUgdGhlIHdlYnNvY2tldCBvcGVuXG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNTcGVha2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHlpZWxkIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcml2Q1RSZWNvZ25pemVyLnN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyhyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5jYW5jZWxTcGVlY2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpKCksIGNiLCBlcnIpO1xuICAgIH1cbiAgICBpc0Rpc3Bvc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNEaXNwb3NlZDtcbiAgICB9XG4gICAgZGlzcG9zZShyZWFzb24sIHN1Y2Nlc3MsIGVycikge1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKCgoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rpc3Bvc2VkICYmICF0aGlzLnByaXZJc1NwZWFraW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgdGhpcy5jYW5jZWxTcGVlY2goKTtcbiAgICAgICAgICAgIHRoaXMucHJpdklzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wcml2U3BlZWNoVHJhbnNsYXRpb25Db25maWcuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnByaXZQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5wcml2QXVkaW9Db25maWcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnByaXZTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMucHJpdkNvbnZlcnNhdGlvbi5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLnByaXZDb252ZXJzYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIH0pKSgpLCBzdWNjZXNzLCBlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYW5jZWwgdGhlIHNwZWVjaCB3ZWJzb2NrZXRcbiAgICAgKi9cbiAgICBjYW5jZWxTcGVlY2goKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2SXNTcGVha2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHlpZWxkICgoX2EgPSB0aGlzLnByaXZDVFJlY29nbml6ZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vbkRpc2Nvbm5lY3Rpb24oKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2Q1RSZWNvZ25pemVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBpZ25vcmUgdGhlIGVycm9yXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25uZWN0IHRvIHRoZSBzcGVlY2ggdHJhbnNsYXRpb24gcmVjb2duaXplci5cbiAgICAgKiBDdXJyZW50bHkgdGhlcmUgaXMgbm8gbGFuZ3VhZ2UgdmFsaWRhdGlvbiBwZXJmb3JtZWQgYmVmb3JlIHNlbmRpbmcgdGhlIFNwZWVjaExhbmd1YWdlIGNvZGUgdG8gdGhlIHNlcnZpY2UuXG4gICAgICogSWYgaXQncyBhbiBpbnZhbGlkIGxhbmd1YWdlIHRoZSByYXcgZXJyb3Igd2lsbCBiZTogJ0Vycm9yIGR1cmluZyBXZWJTb2NrZXQgaGFuZHNoYWtlOiBVbmV4cGVjdGVkIHJlc3BvbnNlIGNvZGU6IDQwMCdcbiAgICAgKiBlLmcuIHBhc3MgaW4gJ2ZyJyBpbnN0ZWFkIG9mICdmci1GUicsIG9yIGEgdGV4dC1vbmx5IGxhbmd1YWdlICdjeSdcbiAgICAgKi9cbiAgICBjb25uZWN0VHJhbnNsYXRvclJlY29nbml6ZXIoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZBdWRpb0NvbmZpZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdkF1ZGlvQ29uZmlnID0gQXVkaW9Db25maWcuZnJvbURlZmF1bHRNaWNyb3Bob25lSW5wdXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gY2xlYXIgdGhlIHRlbXAgc3Vic2NyaXB0aW9uIGtleSBpZiBpdCdzIGEgcGFydGljaXBhbnQgam9pbmluZ1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByaXZTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fS2V5XSlcbiAgICAgICAgICAgICAgICAgICAgPT09IHRoaXMucHJpdlBsYWNlaG9sZGVyS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnLnNldFByb3BlcnR5KFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9LZXldLCBcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY29udkdldHRlciA9ICgpID0+IHRoaXMucHJpdkNvbnZlcnNhdGlvbjtcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZDVFJlY29nbml6ZXIgPSBuZXcgQ29udmVyc2F0aW9uVHJhbnNsYXRpb25SZWNvZ25pemVyKHRoaXMucHJpdlNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnLCB0aGlzLnByaXZBdWRpb0NvbmZpZywgdGhpcywgY29udkdldHRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmNhbmNlbFNwZWVjaCgpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHRoZSBzdGFydCBzcGVha2luZyByZXF1ZXN0XG4gICAgICovXG4gICAgc3RhcnRDb250aW51b3VzUmVjb2duaXRpb24oKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByaXZDVFJlY29nbml6ZXIuc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luYyhyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZlcnNhdGlvblRyYW5zbGF0b3IuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8vIE11bHRpLWRldmljZSBDb252ZXJzYXRpb24gaXMgYSBQcmV2aWV3IGZlYXR1cmUuXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtY2xhc3Nlcy1wZXItZmlsZSAqL1xuaW1wb3J0IHsgUHJvcGVydHlDb2xsZWN0aW9uIH0gZnJvbSBcIi4uL0V4cG9ydHNcIjtcbmV4cG9ydCBjbGFzcyBVc2VyIHtcbiAgICBjb25zdHJ1Y3Rvcih1c2VySWQpIHtcbiAgICAgICAgdGhpcy5wcml2VXNlcklkID0gdXNlcklkO1xuICAgIH1cbiAgICBnZXQgdXNlcklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VXNlcklkO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBQYXJ0aWNpcGFudCB7XG4gICAgY29uc3RydWN0b3IoaWQsIGF2YXRhciwgZGlzcGxheU5hbWUsIGlzSG9zdCwgaXNNdXRlZCwgaXNVc2luZ1R0cywgcHJlZmVycmVkTGFuZ3VhZ2UsIHZvaWNlKSB7XG4gICAgICAgIHRoaXMucHJpdklkID0gaWQ7XG4gICAgICAgIHRoaXMucHJpdkF2YXRhciA9IGF2YXRhcjtcbiAgICAgICAgdGhpcy5wcml2RGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZTtcbiAgICAgICAgdGhpcy5wcml2SXNIb3N0ID0gaXNIb3N0O1xuICAgICAgICB0aGlzLnByaXZJc011dGVkID0gaXNNdXRlZDtcbiAgICAgICAgdGhpcy5wcml2SXNVc2luZ1R0cyA9IGlzVXNpbmdUdHM7XG4gICAgICAgIHRoaXMucHJpdlByZWZlcnJlZExhbmd1YWdlID0gcHJlZmVycmVkTGFuZ3VhZ2U7XG4gICAgICAgIHRoaXMucHJpdlZvaWNlID0gdm9pY2U7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgfVxuICAgIGdldCBhdmF0YXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZBdmF0YXI7XG4gICAgfVxuICAgIGdldCBkaXNwbGF5TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkRpc3BsYXlOYW1lO1xuICAgIH1cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJZDtcbiAgICB9XG4gICAgZ2V0IHByZWZlcnJlZExhbmd1YWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJlZmVycmVkTGFuZ3VhZ2U7XG4gICAgfVxuICAgIGdldCBpc0hvc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc0hvc3Q7XG4gICAgfVxuICAgIGdldCBpc011dGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SXNNdXRlZDtcbiAgICB9XG4gICAgZ2V0IGlzVXNpbmdUdHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZJc1VzaW5nVHRzO1xuICAgIH1cbiAgICBnZXQgdm9pY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZWb2ljZTtcbiAgICB9XG4gICAgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9wZXJ0aWVzO1xuICAgIH1cbiAgICBzdGF0aWMgRnJvbShpZCwgbGFuZ3VhZ2UsIHZvaWNlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUGFydGljaXBhbnQoaWQsIFwiXCIsIGlkLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBsYW5ndWFnZSwgdm9pY2UpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SVBhcnRpY2lwYW50LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vLyBNdWx0aS1kZXZpY2UgQ29udmVyc2F0aW9uIGlzIGEgUHJldmlldyBmZWF0dXJlLlxuZXhwb3J0IHZhciBQYXJ0aWNpcGFudENoYW5nZWRSZWFzb247XG4oZnVuY3Rpb24gKFBhcnRpY2lwYW50Q2hhbmdlZFJlYXNvbikge1xuICAgIC8qKiBQYXJ0aWNpcGFudCBoYXMgam9pbmVkIHRoZSBjb252ZXJzYXRpb24uICovXG4gICAgUGFydGljaXBhbnRDaGFuZ2VkUmVhc29uW1BhcnRpY2lwYW50Q2hhbmdlZFJlYXNvbltcIkpvaW5lZENvbnZlcnNhdGlvblwiXSA9IDBdID0gXCJKb2luZWRDb252ZXJzYXRpb25cIjtcbiAgICAvKiogUGFydGljaXBhbnQgaGFzIGxlZnQgdGhlIGNvbnZlcnNhdGlvbi4gVGhpcyBjb3VsZCBiZSB2b2x1bnRhcnksIG9yIGludm9sdW50YXJ5XG4gICAgICogKGUuZy4gdGhleSBhcmUgZXhwZXJpZW5jaW5nIG5ldHdvcmtpbmcgaXNzdWVzKS5cbiAgICAgKi9cbiAgICBQYXJ0aWNpcGFudENoYW5nZWRSZWFzb25bUGFydGljaXBhbnRDaGFuZ2VkUmVhc29uW1wiTGVmdENvbnZlcnNhdGlvblwiXSA9IDFdID0gXCJMZWZ0Q29udmVyc2F0aW9uXCI7XG4gICAgLyoqIFRoZSBwYXJ0aWNpcGFudHMnIHN0YXRlIGhhcyBjaGFuZ2VkIChlLmcuIHRoZXkgYmVjYW1lIG11dGVkLCBjaGFuZ2VkIHRoZWlyIG5pY2tuYW1lKS4gKi9cbiAgICBQYXJ0aWNpcGFudENoYW5nZWRSZWFzb25bUGFydGljaXBhbnRDaGFuZ2VkUmVhc29uW1wiVXBkYXRlZFwiXSA9IDJdID0gXCJVcGRhdGVkXCI7XG59KShQYXJ0aWNpcGFudENoYW5nZWRSZWFzb24gfHwgKFBhcnRpY2lwYW50Q2hhbmdlZFJlYXNvbiA9IHt9KSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBhcnRpY2lwYW50Q2hhbmdlZFJlYXNvbi5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLyoqXG4gKiBEZWZpbmUgcGF5bG9hZCBvZiBzcGVlY2ggcmVjb2duaXRpb24gY2FuY2VsZWQgcmVzdWx0IGV2ZW50cy5cbiAqIEBjbGFzcyBUcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3NcbiAqL1xuZXhwb3J0IGNsYXNzIFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2Vzc2lvbmlkIC0gVGhlIHNlc3Npb24gaWQuXG4gICAgICogQHBhcmFtIHtDYW5jZWxsYXRpb25SZWFzb259IGNhbmNlbGxhdGlvblJlYXNvbiAtIFRoZSBjYW5jZWxsYXRpb24gcmVhc29uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvckRldGFpbHMgLSBFcnJvciBkZXRhaWxzLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge1RyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHR9IHJlc3VsdCAtIFRoZSByZXN1bHQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc2Vzc2lvbmlkLCBjYW5jZWxsYXRpb25SZWFzb24sIGVycm9yRGV0YWlscywgZXJyb3JDb2RlLCByZXN1bHQpIHtcbiAgICAgICAgdGhpcy5wcml2Q2FuY2VsUmVhc29uID0gY2FuY2VsbGF0aW9uUmVhc29uO1xuICAgICAgICB0aGlzLnByaXZFcnJvckRldGFpbHMgPSBlcnJvckRldGFpbHM7XG4gICAgICAgIHRoaXMucHJpdlJlc3VsdCA9IHJlc3VsdDtcbiAgICAgICAgdGhpcy5wcml2U2Vzc2lvbklkID0gc2Vzc2lvbmlkO1xuICAgICAgICB0aGlzLnByaXZFcnJvckNvZGUgPSBlcnJvckNvZGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgcmVjb2duaXRpb24gcmVzdWx0LlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLnByb3RvdHlwZS5yZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1RyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHR9IHRoZSByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICovXG4gICAgZ2V0IHJlc3VsdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSBzZXNzaW9uIGlkZW50aWZpZXIuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml0aW9uQ2FuY2VsZWRFdmVudEFyZ3MucHJvdG90eXBlLnNlc3Npb25JZFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgc2Vzc2lvbiBpZGVudGlmaWVyLlxuICAgICAqL1xuICAgIGdldCBzZXNzaW9uSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZTZXNzaW9uSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSByZWFzb24gdGhlIHJlY29nbml0aW9uIHdhcyBjYW5jZWxlZC5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncy5wcm90b3R5cGUucmVhc29uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtDYW5jZWxsYXRpb25SZWFzb259IFNwZWNpZmllcyB0aGUgcmVhc29uIGNhbmNlbGVkLlxuICAgICAqL1xuICAgIGdldCByZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZDYW5jZWxSZWFzb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBlcnJvciBjb2RlIGluIGNhc2Ugb2YgYW4gdW5zdWNjZXNzZnVsIHJlY29nbml0aW9uLlxuICAgICAqIEFkZGVkIGluIHZlcnNpb24gMS4xLjAuXG4gICAgICogQHJldHVybiBBbiBlcnJvciBjb2RlIHRoYXQgcmVwcmVzZW50cyB0aGUgZXJyb3IgcmVhc29uLlxuICAgICAqL1xuICAgIGdldCBlcnJvckNvZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckNvZGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluIGNhc2Ugb2YgYW4gdW5zdWNjZXNzZnVsIHJlY29nbml0aW9uLCBwcm92aWRlcyBkZXRhaWxzIG9mIHRoZSBvY2N1cnJlZCBlcnJvci5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXRpb25DYW5jZWxlZEV2ZW50QXJncy5wcm90b3R5cGUuZXJyb3JEZXRhaWxzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEEgU3RyaW5nIHRoYXQgcmVwcmVzZW50cyB0aGUgZXJyb3IgZGV0YWlscy5cbiAgICAgKi9cbiAgICBnZXQgZXJyb3JEZXRhaWxzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RXJyb3JEZXRhaWxzO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNsYXRpb25SZWNvZ25pdGlvbkNhbmNlbGVkRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBSZWNvZ25pdGlvbkV2ZW50QXJncyB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogVHJhbnNsYXRpb24gdGV4dCByZXN1bHQgZXZlbnQgYXJndW1lbnRzLlxuICogQGNsYXNzIFRyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3NcbiAqL1xuZXhwb3J0IGNsYXNzIFRyYW5zbGF0aW9uUmVjb2duaXRpb25FdmVudEFyZ3MgZXh0ZW5kcyBSZWNvZ25pdGlvbkV2ZW50QXJncyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge1RyYW5zbGF0aW9uUmVjb2duaXRpb25SZXN1bHR9IHJlc3VsdCAtIFRoZSB0cmFuc2xhdGlvbiByZWNvZ25pdGlvbiByZXN1bHQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCAtIFRoZSBvZmZzZXQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNlc3Npb25JZCAtIFRoZSBzZXNzaW9uIGlkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlc3VsdCwgb2Zmc2V0LCBzZXNzaW9uSWQpIHtcbiAgICAgICAgc3VwZXIob2Zmc2V0LCBzZXNzaW9uSWQpO1xuICAgICAgICB0aGlzLnByaXZSZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB0aGUgcmVjb2duaXRpb24gcmVzdWx0LlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pdGlvbkV2ZW50QXJncy5wcm90b3R5cGUucmVzdWx0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtUcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0fSB0aGUgcmVjb2duaXRpb24gcmVzdWx0LlxuICAgICAqL1xuICAgIGdldCByZXN1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZXN1bHQ7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2xhdGlvblJlY29nbml0aW9uRXZlbnRBcmdzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBTcGVlY2hSZWNvZ25pdGlvblJlc3VsdCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogVHJhbnNsYXRpb24gdGV4dCByZXN1bHQuXG4gKiBAY2xhc3MgVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdFxuICovXG5leHBvcnQgY2xhc3MgVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdCBleHRlbmRzIFNwZWVjaFJlY29nbml0aW9uUmVzdWx0IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7VHJhbnNsYXRpb25zfSB0cmFuc2xhdGlvbnMgLSBUaGUgdHJhbnNsYXRpb25zLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZXN1bHRJZCAtIFRoZSByZXN1bHQgaWQuXG4gICAgICogQHBhcmFtIHtSZXN1bHRSZWFzb259IHJlYXNvbiAtIFRoZSByZWFzb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgcmVjb2duaXplZCB0ZXh0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBkdXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldCBpbnRvIHRoZSBzdHJlYW0uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlIC0gUHJpbWFyeSBMYW5ndWFnZSBkZXRlY3RlZCwgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSAtIFByaW1hcnkgTGFuZ3VhZ2UgY29uZmlkZW5jZSAoXCJVbmtub3duLFwiIFwiTG93LFwiIFwiTWVkaXVtLFwiIFwiSGlnaFwiLi4uKSwgaWYgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yRGV0YWlscyAtIEVycm9yIGRldGFpbHMsIGlmIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBqc29uIC0gQWRkaXRpb25hbCBKc29uLCBpZiBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0ge1Byb3BlcnR5Q29sbGVjdGlvbn0gcHJvcGVydGllcyAtIEFkZGl0aW9uYWwgcHJvcGVydGllcywgaWYgcHJvdmlkZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodHJhbnNsYXRpb25zLCByZXN1bHRJZCwgcmVhc29uLCB0ZXh0LCBkdXJhdGlvbiwgb2Zmc2V0LCBsYW5ndWFnZSwgbGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlLCBlcnJvckRldGFpbHMsIGpzb24sIHByb3BlcnRpZXMpIHtcbiAgICAgICAgc3VwZXIocmVzdWx0SWQsIHJlYXNvbiwgdGV4dCwgZHVyYXRpb24sIG9mZnNldCwgbGFuZ3VhZ2UsIGxhbmd1YWdlRGV0ZWN0aW9uQ29uZmlkZW5jZSwgdW5kZWZpbmVkLCBlcnJvckRldGFpbHMsIGpzb24sIHByb3BlcnRpZXMpO1xuICAgICAgICB0aGlzLnByaXZUcmFuc2xhdGlvbnMgPSB0cmFuc2xhdGlvbnM7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tU3BlZWNoUmVjb2duaXRpb25SZXN1bHQocmVzdWx0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdCh1bmRlZmluZWQsIHJlc3VsdC5yZXN1bHRJZCwgcmVzdWx0LnJlYXNvbiwgcmVzdWx0LnRleHQsIHJlc3VsdC5kdXJhdGlvbiwgcmVzdWx0Lm9mZnNldCwgcmVzdWx0Lmxhbmd1YWdlLCByZXN1bHQubGFuZ3VhZ2VEZXRlY3Rpb25Db25maWRlbmNlLCByZXN1bHQuZXJyb3JEZXRhaWxzLCByZXN1bHQuanNvbiwgcmVzdWx0LnByb3BlcnRpZXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcmVzZW50cyB0aGUgdHJhbnNsYXRpb24gcmVzdWx0cy4gRWFjaCBpdGVtIGluIHRoZSBkaWN0aW9uYXJ5IHJlcHJlc2VudHNcbiAgICAgKiBhIHRyYW5zbGF0aW9uIHJlc3VsdCBpbiBvbmUgb2YgdGFyZ2V0IGxhbmd1YWdlcywgd2hlcmUgdGhlIGtleSBpcyB0aGUgbmFtZVxuICAgICAqIG9mIHRoZSB0YXJnZXQgbGFuZ3VhZ2UsIGluIEJDUC00NyBmb3JtYXQsIGFuZCB0aGUgdmFsdWUgaXMgdGhlIHRyYW5zbGF0aW9uXG4gICAgICogdGV4dCBpbiB0aGUgc3BlY2lmaWVkIGxhbmd1YWdlLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pdGlvblJlc3VsdC5wcm90b3R5cGUudHJhbnNsYXRpb25zXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtUcmFuc2xhdGlvbnN9IHRoZSBjdXJyZW50IHRyYW5zbGF0aW9uIG1hcCB0aGF0IGhvbGRzIGFsbCB0cmFuc2xhdGlvbnMgcmVxdWVzdGVkLlxuICAgICAqL1xuICAgIGdldCB0cmFuc2xhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUcmFuc2xhdGlvbnM7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UcmFuc2xhdGlvblJlY29nbml0aW9uUmVzdWx0LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IFJlY29nbml0aW9uTW9kZSwgUmVjb2duaXplckNvbmZpZywgVHJhbnNsYXRpb25Db25uZWN0aW9uRmFjdG9yeSwgVHJhbnNsYXRpb25TZXJ2aWNlUmVjb2duaXplciB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3MgfSBmcm9tIFwiLi4vY29tbW9uL0V4cG9ydHNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb24gfSBmcm9tIFwiLi9Db25uZWN0aW9uXCI7XG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IFByb3BlcnR5SWQsIFJlY29nbml6ZXIgfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIFRyYW5zbGF0aW9uIHJlY29nbml6ZXJcbiAqIEBjbGFzcyBUcmFuc2xhdGlvblJlY29nbml6ZXJcbiAqL1xuZXhwb3J0IGNsYXNzIFRyYW5zbGF0aW9uUmVjb2duaXplciBleHRlbmRzIFJlY29nbml6ZXIge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoZSBUcmFuc2xhdGlvblJlY29nbml6ZXIuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtTcGVlY2hUcmFuc2xhdGlvbkNvbmZpZ30gc3BlZWNoQ29uZmlnIC0gU2V0IG9mIHByb3BlcnRpZXMgdG8gY29uZmlndXJlIHRoaXMgcmVjb2duaXplci5cbiAgICAgKiBAcGFyYW0ge0F1ZGlvQ29uZmlnfSBhdWRpb0NvbmZpZyAtIEFuIG9wdGlvbmFsIGF1ZGlvIGNvbmZpZyBhc3NvY2lhdGVkIHdpdGggdGhlIHJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0ge0lDb25uZWN0aW9uRmFjdG9yeX0gY29ubmVjdGlvbkZhY3RvcnkgLSBBbiBvcHRpb25hbCBjb25uZWN0aW9uIGZhY3RvcnkgdG8gdXNlIHRvIGdlbmVyYXRlIHRoZSBlbmRwb2ludCBVUklzLCBoZWFkZXJzIHRvIHNldCwgZXRjLi4uXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc3BlZWNoQ29uZmlnLCBhdWRpb0NvbmZpZywgY29ubmVjdGlvbkZhY3RvcnkpIHtcbiAgICAgICAgY29uc3QgY29uZmlnSW1wbCA9IHNwZWVjaENvbmZpZztcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsKGNvbmZpZ0ltcGwsIFwic3BlZWNoQ29uZmlnXCIpO1xuICAgICAgICBzdXBlcihhdWRpb0NvbmZpZywgY29uZmlnSW1wbC5wcm9wZXJ0aWVzLCBjb25uZWN0aW9uRmFjdG9yeSB8fCBuZXcgVHJhbnNsYXRpb25Db25uZWN0aW9uRmFjdG9yeSgpKTtcbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZWRUcmFuc2xhdGlvblJlY29nbml6ZXIgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVm9pY2UsIHVuZGVmaW5lZCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVm9pY2UpLCBQcm9wZXJ0eUlkW1Byb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Wb2ljZV0pO1xuICAgICAgICB9XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzKSwgUHJvcGVydHlJZFtQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVG9MYW5ndWFnZXNdKTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JXaGl0ZXNwYWNlKHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1JlY29MYW5ndWFnZSksIFByb3BlcnR5SWRbUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9SZWNvTGFuZ3VhZ2VdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNsYXRpb25SZWNvZ25pemVyIGNvbnN0cnVjdG9yLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7U3BlZWNoVHJhbnNsYXRpb25Db25maWd9IHNwZWVjaFRyYW5zbGF0aW9uQ29uZmlnIC0gYW4gc2V0IG9mIGluaXRpYWwgcHJvcGVydGllcyBmb3IgdGhpcyByZWNvZ25pemVyXG4gICAgICogQHBhcmFtIHtBdXRvRGV0ZWN0U291cmNlTGFuZ3VhZ2VDb25maWd9IGF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZyAtIEFuIHNvdXJjZSBsYW5ndWFnZSBkZXRlY3Rpb24gY29uZmlndXJhdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIHJlY29nbml6ZXJcbiAgICAgKiBAcGFyYW0ge0F1ZGlvQ29uZmlnfSBhdWRpb0NvbmZpZyAtIEFuIG9wdGlvbmFsIGF1ZGlvIGNvbmZpZ3VyYXRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSByZWNvZ25pemVyXG4gICAgICovXG4gICAgc3RhdGljIEZyb21Db25maWcoc3BlZWNoVHJhbnNsYXRpb25Db25maWcsIGF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZywgYXVkaW9Db25maWcpIHtcbiAgICAgICAgY29uc3Qgc3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsID0gc3BlZWNoVHJhbnNsYXRpb25Db25maWc7XG4gICAgICAgIGF1dG9EZXRlY3RTb3VyY2VMYW5ndWFnZUNvbmZpZy5wcm9wZXJ0aWVzLm1lcmdlVG8oc3BlZWNoVHJhbnNsYXRpb25Db25maWdJbXBsLnByb3BlcnRpZXMpO1xuICAgICAgICByZXR1cm4gbmV3IFRyYW5zbGF0aW9uUmVjb2duaXplcihzcGVlY2hUcmFuc2xhdGlvbkNvbmZpZywgYXVkaW9Db25maWcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsYW5ndWFnZSBuYW1lIHRoYXQgd2FzIHNldCB3aGVuIHRoZSByZWNvZ25pemVyIHdhcyBjcmVhdGVkLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS5zcGVlY2hSZWNvZ25pdGlvbkxhbmd1YWdlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IEdldHMgdGhlIGxhbmd1YWdlIG5hbWUgdGhhdCB3YXMgc2V0IHdoZW4gdGhlIHJlY29nbml6ZXIgd2FzIGNyZWF0ZWQuXG4gICAgICovXG4gICAgZ2V0IHNwZWVjaFJlY29nbml0aW9uTGFuZ3VhZ2UoKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWRUcmFuc2xhdGlvblJlY29nbml6ZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fUmVjb0xhbmd1YWdlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0YXJnZXQgbGFuZ3VhZ2VzIGZvciB0cmFuc2xhdGlvbiB0aGF0IHdlcmUgc2V0IHdoZW4gdGhlIHJlY29nbml6ZXIgd2FzIGNyZWF0ZWQuXG4gICAgICogVGhlIGxhbmd1YWdlIGlzIHNwZWNpZmllZCBpbiBCQ1AtNDcgZm9ybWF0LiBUaGUgdHJhbnNsYXRpb24gd2lsbCBwcm92aWRlIHRyYW5zbGF0ZWQgdGV4dCBmb3IgZWFjaCBvZiBsYW5ndWFnZS5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXplci5wcm90b3R5cGUudGFyZ2V0TGFuZ3VhZ2VzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmdbXX0gR2V0cyB0YXJnZXQgbGFuZ3VhZ2VzIGZvciB0cmFuc2xhdGlvbiB0aGF0IHdlcmUgc2V0IHdoZW4gdGhlIHJlY29nbml6ZXIgd2FzIGNyZWF0ZWQuXG4gICAgICovXG4gICAgZ2V0IHRhcmdldExhbmd1YWdlcygpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZFRyYW5zbGF0aW9uUmVjb2duaXplcik7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzKS5zcGxpdChcIixcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG5hbWUgb2Ygb3V0cHV0IHZvaWNlLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS52b2ljZU5hbWVcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gdGhlIG5hbWUgb2Ygb3V0cHV0IHZvaWNlLlxuICAgICAqL1xuICAgIGdldCB2b2ljZU5hbWUoKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmRGlzcG9zZWQodGhpcy5wcml2RGlzcG9zZWRUcmFuc2xhdGlvblJlY29nbml6ZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Wb2ljZSwgdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbGxlY3Rpb24gb2YgcHJvcGVydGllcyBhbmQgdGhlaXIgdmFsdWVzIGRlZmluZWQgZm9yIHRoaXMgVHJhbnNsYXRpb25SZWNvZ25pemVyLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS5wcm9wZXJ0aWVzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIFRyYW5zbGF0aW9uUmVjb2duaXplci5cbiAgICAgKi9cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBzZXJ2aWNlLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS5hdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBnZXQgYXV0aG9yaXphdGlvblRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzL1NldHMgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBzZXJ2aWNlLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS5hdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gQXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBzZXQgYXV0aG9yaXphdGlvblRva2VuKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VBdXRob3JpemF0aW9uX1Rva2VuLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyByZWNvZ25pdGlvbiBhbmQgdHJhbnNsYXRpb24sIGFuZCBzdG9wcyBhZnRlciB0aGUgZmlyc3QgdXR0ZXJhbmNlIGlzIHJlY29nbml6ZWQuXG4gICAgICogVGhlIHRhc2sgcmV0dXJucyB0aGUgdHJhbnNsYXRpb24gdGV4dCBhcyByZXN1bHQuXG4gICAgICogTm90ZTogcmVjb2duaXplT25jZUFzeW5jIHJldHVybnMgd2hlbiB0aGUgZmlyc3QgdXR0ZXJhbmNlIGhhcyBiZWVuIHJlY29nbml6ZWQsIHNvIGl0IGlzIHN1aXRhYmxlIG9ubHlcbiAgICAgKiBmb3Igc2luZ2xlIHNob3QgcmVjb2duaXRpb24gbGlrZSBjb21tYW5kIG9yIHF1ZXJ5LiBGb3IgbG9uZy1ydW5uaW5nIHJlY29nbml0aW9uLFxuICAgICAqIHVzZSBzdGFydENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKCkgaW5zdGVhZC5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXplci5wcm90b3R5cGUucmVjb2duaXplT25jZUFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBjYiAtIENhbGxiYWNrIHRoYXQgcmVjZWl2ZWQgdGhlIHJlc3VsdCB3aGVuIHRoZSB0cmFuc2xhdGlvbiBoYXMgY29tcGxldGVkLlxuICAgICAqIEBwYXJhbSBlcnIgLSBDYWxsYmFjayBpbnZva2VkIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICovXG4gICAgcmVjb2duaXplT25jZUFzeW5jKGNiLCBlcnIpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZFRyYW5zbGF0aW9uUmVjb2duaXplcik7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5yZWNvZ25pemVPbmNlQXN5bmNJbXBsKFJlY29nbml0aW9uTW9kZS5Db252ZXJzYXRpb24pLCBjYiwgZXJyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHJlY29nbml0aW9uIGFuZCB0cmFuc2xhdGlvbiwgdW50aWwgc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKCkgaXMgY2FsbGVkLlxuICAgICAqIFVzZXIgbXVzdCBzdWJzY3JpYmUgdG8gZXZlbnRzIHRvIHJlY2VpdmUgdHJhbnNsYXRpb24gcmVzdWx0cy5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXplci5wcm90b3R5cGUuc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcGFyYW0gY2IgLSBDYWxsYmFjayB0aGF0IHJlY2VpdmVkIHRoZSB0cmFuc2xhdGlvbiBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcGFyYW0gZXJyIC0gQ2FsbGJhY2sgaW52b2tlZCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqL1xuICAgIHN0YXJ0Q29udGludW91c1JlY29nbml0aW9uQXN5bmMoY2IsIGVycikge1xuICAgICAgICBtYXJzaGFsUHJvbWlzZVRvQ2FsbGJhY2tzKHRoaXMuc3RhcnRDb250aW51b3VzUmVjb2duaXRpb25Bc3luY0ltcGwoUmVjb2duaXRpb25Nb2RlLkNvbnZlcnNhdGlvbiksIGNiLCBlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wcyBjb250aW51b3VzIHJlY29nbml0aW9uIGFuZCB0cmFuc2xhdGlvbi5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXplci5wcm90b3R5cGUuc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSBjYiAtIENhbGxiYWNrIHRoYXQgcmVjZWl2ZWQgdGhlIHRyYW5zbGF0aW9uIGhhcyBzdG9wcGVkLlxuICAgICAqIEBwYXJhbSBlcnIgLSBDYWxsYmFjayBpbnZva2VkIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICovXG4gICAgc3RvcENvbnRpbnVvdXNSZWNvZ25pdGlvbkFzeW5jKGNiLCBlcnIpIHtcbiAgICAgICAgbWFyc2hhbFByb21pc2VUb0NhbGxiYWNrcyh0aGlzLnN0b3BDb250aW51b3VzUmVjb2duaXRpb25Bc3luY0ltcGwoKSwgY2IsIGVycik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGR5bmFtaWNhbGx5IHJlbW92ZSBhIGxhbmd1YWdlIGZyb20gbGlzdCBvZiB0YXJnZXQgbGFuZ3VhZ2VcbiAgICAgKiAoY2FuIGJlIHVzZWQgd2hpbGUgcmVjb2duaXRpb24gaXMgb25nb2luZylcbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXplci5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0TGFuZ3VhZ2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0gbGFuZyAtIGxhbmd1YWdlIHRvIGJlIHJlbW92ZWRcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgcmVtb3ZlVGFyZ2V0TGFuZ3VhZ2UobGFuZykge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChsYW5nLCBcImxhbmd1YWdlIHRvIGJlIHJlbW92ZWRcIik7XG4gICAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzLCB1bmRlZmluZWQpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGxhbmd1YWdlcyA9IHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVG9MYW5ndWFnZXMpLnNwbGl0KFwiLFwiKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbGFuZ3VhZ2VzLmluZGV4T2YobGFuZyk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIGxhbmd1YWdlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVG9MYW5ndWFnZXMsIGxhbmd1YWdlcy5qb2luKFwiLFwiKSk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVMYW5ndWFnZXMobGFuZ3VhZ2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBkeW5hbWljYWxseSBhZGQgYSBsYW5ndWFnZSB0byBsaXN0IG9mIHRhcmdldCBsYW5ndWFnZVxuICAgICAqIChjYW4gYmUgdXNlZCB3aGlsZSByZWNvZ25pdGlvbiBpcyBvbmdvaW5nKVxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25SZWNvZ25pemVyLnByb3RvdHlwZS5hZGRUYXJnZXRMYW5ndWFnZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwYXJhbSBsYW5nIC0gbGFuZ3VhZ2UgdG8gYmUgYWRkZWRcbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgYWRkVGFyZ2V0TGFuZ3VhZ2UobGFuZykge1xuICAgICAgICBDb250cmFjdHMudGhyb3dJZk51bGxPclVuZGVmaW5lZChsYW5nLCBcImxhbmd1YWdlIHRvIGJlIGFkZGVkXCIpO1xuICAgICAgICBsZXQgbGFuZ3VhZ2VzID0gW107XG4gICAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoUHJvcGVydHlJZC5TcGVlY2hTZXJ2aWNlQ29ubmVjdGlvbl9UcmFuc2xhdGlvblRvTGFuZ3VhZ2VzLCB1bmRlZmluZWQpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxhbmd1YWdlcyA9IHRoaXMucHJvcGVydGllcy5nZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVG9MYW5ndWFnZXMpLnNwbGl0KFwiLFwiKTtcbiAgICAgICAgICAgIGlmICghbGFuZ3VhZ2VzLmluY2x1ZGVzKGxhbmcpKSB7XG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2VzLnB1c2gobGFuZyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUNvbm5lY3Rpb25fVHJhbnNsYXRpb25Ub0xhbmd1YWdlcywgbGFuZ3VhZ2VzLmpvaW4oXCIsXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucHJvcGVydGllcy5zZXRQcm9wZXJ0eShQcm9wZXJ0eUlkLlNwZWVjaFNlcnZpY2VDb25uZWN0aW9uX1RyYW5zbGF0aW9uVG9MYW5ndWFnZXMsIGxhbmcpO1xuICAgICAgICAgICAgbGFuZ3VhZ2VzID0gW2xhbmddO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlTGFuZ3VhZ2VzKGxhbmd1YWdlcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGNsb3NlcyBhbGwgZXh0ZXJuYWwgcmVzb3VyY2VzIGhlbGQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXplci5wcm90b3R5cGUuY2xvc2VcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY2xvc2UoY2IsIGVycm9yQ2IpIHtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZEaXNwb3NlZCh0aGlzLnByaXZEaXNwb3NlZFRyYW5zbGF0aW9uUmVjb2duaXplcik7XG4gICAgICAgIG1hcnNoYWxQcm9taXNlVG9DYWxsYmFja3ModGhpcy5kaXNwb3NlKHRydWUpLCBjYiwgZXJyb3JDYik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGhhbmRsZXMgQ29ubmVjdGlvbkVzdGFibGlzaGVkRXZlbnQgZm9yIGNvbnZlcnNhdGlvbiB0cmFuc2xhdGlvbiBzY2VuYXJpb3MuXG4gICAgICogQG1lbWJlciBUcmFuc2xhdGlvblJlY29nbml6ZXIucHJvdG90eXBlLm9uQ29ubmVjdGlvblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWVtcHR5LWZ1bmN0aW9uXG4gICAgb25Db25uZWN0aW9uKCkgeyB9XG4gICAgLyoqXG4gICAgICogaGFuZGxlcyBkaXNjb25uZWN0aW9uIGV2ZW50cyBmb3IgY29udmVyc2F0aW9uIHRyYW5zbGF0aW9uIHNjZW5hcmlvcy5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uUmVjb2duaXplci5wcm90b3R5cGUub25EaXNjb25uZWN0aW9uXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgICBvbkRpc2Nvbm5lY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7IH0pO1xuICAgIH1cbiAgICBkaXNwb3NlKGRpc3Bvc2luZykge1xuICAgICAgICBjb25zdCBfc3VwZXIgPSBPYmplY3QuY3JlYXRlKG51bGwsIHtcbiAgICAgICAgICAgIGRpc3Bvc2U6IHsgZ2V0OiAoKSA9PiBzdXBlci5kaXNwb3NlIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcml2RGlzcG9zZWRUcmFuc2xhdGlvblJlY29nbml6ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByaXZEaXNwb3NlZFRyYW5zbGF0aW9uUmVjb2duaXplciA9IHRydWU7XG4gICAgICAgICAgICBpZiAoZGlzcG9zaW5nKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5pbXBsUmVjb2duaXplclN0b3AoKTtcbiAgICAgICAgICAgICAgICB5aWVsZCBfc3VwZXIuZGlzcG9zZS5jYWxsKHRoaXMsIGRpc3Bvc2luZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjcmVhdGVSZWNvZ25pemVyQ29uZmlnKHNwZWVjaENvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IFJlY29nbml6ZXJDb25maWcoc3BlZWNoQ29uZmlnLCB0aGlzLnByaXZQcm9wZXJ0aWVzKTtcbiAgICB9XG4gICAgY3JlYXRlU2VydmljZVJlY29nbml6ZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb0NvbmZpZywgcmVjb2duaXplckNvbmZpZykge1xuICAgICAgICBjb25zdCBjb25maWdJbXBsID0gYXVkaW9Db25maWc7XG4gICAgICAgIHJldHVybiBuZXcgVHJhbnNsYXRpb25TZXJ2aWNlUmVjb2duaXplcihhdXRoZW50aWNhdGlvbiwgY29ubmVjdGlvbkZhY3RvcnksIGNvbmZpZ0ltcGwsIHJlY29nbml6ZXJDb25maWcsIHRoaXMpO1xuICAgIH1cbiAgICB1cGRhdGVMYW5ndWFnZXMobGFuZ3VhZ2VzKSB7XG4gICAgICAgIGNvbnN0IGNvbm4gPSBDb25uZWN0aW9uLmZyb21SZWNvZ25pemVyKHRoaXMpO1xuICAgICAgICBpZiAoISFjb25uKSB7XG4gICAgICAgICAgICBjb25uLnNldE1lc3NhZ2VQcm9wZXJ0eShcInNwZWVjaC5jb250ZXh0XCIsIFwidHJhbnNsYXRpb25jb250ZXh0XCIsIHsgdG86IGxhbmd1YWdlcyB9KTtcbiAgICAgICAgICAgIGNvbm4uc2VuZE1lc3NhZ2VBc3luYyhcImV2ZW50XCIsIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBpZDogXCJ0cmFuc2xhdGlvblwiLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwidXBkYXRlTGFuZ3VhZ2VcIixcbiAgICAgICAgICAgICAgICB0bzogbGFuZ3VhZ2VzXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9uUmVjb2duaXplci5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgU2Vzc2lvbkV2ZW50QXJncyB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogVHJhbnNsYXRpb24gU3ludGhlc2lzIGV2ZW50IGFyZ3VtZW50c1xuICogQGNsYXNzIFRyYW5zbGF0aW9uU3ludGhlc2lzRXZlbnRBcmdzXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc2xhdGlvblN5bnRoZXNpc0V2ZW50QXJncyBleHRlbmRzIFNlc3Npb25FdmVudEFyZ3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtUcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdH0gcmVzdWx0IC0gVGhlIHRyYW5zbGF0aW9uIHN5bnRoZXNpcyByZXN1bHQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNlc3Npb25JZCAtIFRoZSBzZXNzaW9uIGlkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlc3VsdCwgc2Vzc2lvbklkKSB7XG4gICAgICAgIHN1cGVyKHNlc3Npb25JZCk7XG4gICAgICAgIHRoaXMucHJpdlJlc3VsdCA9IHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoZSB0cmFuc2xhdGlvbiBzeW50aGVzaXMgcmVzdWx0LlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25TeW50aGVzaXNFdmVudEFyZ3MucHJvdG90eXBlLnJlc3VsdFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7VHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHR9IFNwZWNpZmllcyB0aGUgdHJhbnNsYXRpb24gc3ludGhlc2lzIHJlc3VsdC5cbiAgICAgKi9cbiAgICBnZXQgcmVzdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UmVzdWx0O1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNsYXRpb25TeW50aGVzaXNFdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogRGVmaW5lcyB0cmFuc2xhdGlvbiBzeW50aGVzaXMgcmVzdWx0LCBpLmUuIHRoZSB2b2ljZSBvdXRwdXQgb2YgdGhlIHRyYW5zbGF0ZWRcbiAqIHRleHQgaW4gdGhlIHRhcmdldCBsYW5ndWFnZS5cbiAqIEBjbGFzcyBUcmFuc2xhdGlvblN5bnRoZXNpc1Jlc3VsdFxuICovXG5leHBvcnQgY2xhc3MgVHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtSZXN1bHRSZWFzb259IHJlYXNvbiAtIFRoZSBzeW50aGVzaXMgcmVhc29uLlxuICAgICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGF1ZGlvIC0gVGhlIGF1ZGlvIGRhdGEuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmVhc29uLCBhdWRpbykge1xuICAgICAgICB0aGlzLnByaXZSZWFzb24gPSByZWFzb247XG4gICAgICAgIHRoaXMucHJpdkF1ZGlvID0gYXVkaW87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0ZWQgdGV4dCBpbiB0aGUgdGFyZ2V0IGxhbmd1YWdlLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25TeW50aGVzaXNSZXN1bHQucHJvdG90eXBlLmF1ZGlvXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtBcnJheUJ1ZmZlcn0gVHJhbnNsYXRlZCBhdWRpbyBpbiB0aGUgdGFyZ2V0IGxhbmd1YWdlLlxuICAgICAqL1xuICAgIGdldCBhdWRpbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkF1ZGlvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgc3ludGhlc2lzIHN0YXR1cy5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9uU3ludGhlc2lzUmVzdWx0LnByb3RvdHlwZS5yZWFzb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge1Jlc3VsdFJlYXNvbn0gVGhlIHN5bnRoZXNpcyBzdGF0dXMuXG4gICAgICovXG4gICAgZ2V0IHJlYXNvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlJlYXNvbjtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0aW9uU3ludGhlc2lzUmVzdWx0LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBQcm9wZXJ0eUNvbGxlY3Rpb24gfSBmcm9tIFwiLi9FeHBvcnRzXCI7XG4vKipcbiAqIFJlcHJlc2VudHMgY29sbGVjdGlvbiBvZiBwYXJhbWV0ZXJzIGFuZCB0aGVpciB2YWx1ZXMuXG4gKiBAY2xhc3MgVHJhbnNsYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc2xhdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBVc2UgYW4gUHJvcGVydHlDb2xsZWN0aW9uIGludGVybmFsbHksIGp1c3Qgd3JhcHBpbmcgaXQgdG8gaGlkZSB0aGUgfCBlbnVtIHN5bnRheCBpdCBoYXMuXG4gICAgICAgIHRoaXMucHJpdk1hcCA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsYW5ndWFnZXMgaW4gdGhlIG9iamVjdCBpbiBhIFN0cmluZyBhcnJheS5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9ucy5wcm90b3R5cGUubGFuZ3VhZ2VzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmdbXX0gbGFuZ3VhZ2VzIGluIHRyYW5zbGF0aW9ucyBvYmplY3QuXG4gICAgICovXG4gICAgZ2V0IGxhbmd1YWdlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdk1hcC5rZXlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwYXJhbWV0ZXIgdmFsdWUgaW4gdHlwZSBTdHJpbmcuIFRoZSBwYXJhbWV0ZXIgbXVzdCBoYXZlIHRoZSBzYW1lIHR5cGUgYXMgU3RyaW5nLlxuICAgICAqIEN1cnJlbnRseSBvbmx5IFN0cmluZywgaW50IGFuZCBib29sIGFyZSBhbGxvd2VkLlxuICAgICAqIElmIHRoZSBuYW1lIGlzIG5vdCBhdmFpbGFibGUsIHRoZSBzcGVjaWZpZWQgZGVmYXVsdFZhbHVlIGlzIHJldHVybmVkLlxuICAgICAqIEBtZW1iZXIgVHJhbnNsYXRpb25zLnByb3RvdHlwZS5nZXRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIFRoZSBwYXJhbWV0ZXIgbmFtZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGVmIC0gVGhlIGRlZmF1bHQgdmFsdWUgd2hpY2ggaXMgcmV0dXJuZWQgaWYgdGhlIHBhcmFtZXRlciBpcyBub3QgYXZhaWxhYmxlIGluIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IHZhbHVlIG9mIHRoZSBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgZ2V0KGtleSwgZGVmKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZNYXAuZ2V0UHJvcGVydHkoa2V5LCBkZWYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBTdHJpbmcgdmFsdWUgb2YgdGhlIHBhcmFtZXRlciBzcGVjaWZpZWQgYnkgbmFtZS5cbiAgICAgKiBAbWVtYmVyIFRyYW5zbGF0aW9ucy5wcm90b3R5cGUuc2V0XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBUaGUgcGFyYW1ldGVyIG5hbWUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIHZhbHVlIG9mIHRoZSBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5wcml2TWFwLnNldFByb3BlcnR5KGtleSwgdmFsdWUpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJhbnNsYXRpb25zLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBUdXJuU3RhdHVzUmVzcG9uc2VQYXlsb2FkIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvU2VydmljZU1lc3NhZ2VzL1R1cm5TdGF0dXNQYXlsb2FkXCI7XG4vKipcbiAqIERlZmluZXMgY29udGVudHMgb2YgcmVjZWl2ZWQgbWVzc2FnZS9ldmVudHMuXG4gKiBAY2xhc3MgVHVyblN0YXR1c1JlY2VpdmVkRXZlbnRBcmdzXG4gKi9cbmV4cG9ydCBjbGFzcyBUdXJuU3RhdHVzUmVjZWl2ZWRFdmVudEFyZ3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR1cm5TdGF0dXMgLSBUaGUgSlNPTi1lbmNvZGVkIHR1cm4gc3RhdHVzIG1lc3NhZ2UuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodHVyblN0YXR1cykge1xuICAgICAgICB0aGlzLnByaXZUdXJuU3RhdHVzID0gVHVyblN0YXR1c1Jlc3BvbnNlUGF5bG9hZC5mcm9tSlNPTih0dXJuU3RhdHVzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW50ZXJhY3Rpb24gaWRlbnRpZmllciBhc3NvY2lhdGVkIHdpdGggdGhpcyB0dXJuIHN0YXR1cyBldmVudC5cbiAgICAgKiBAbWVtYmVyIFR1cm5TdGF0dXNSZWNlaXZlZEV2ZW50QXJncy5wcm90b3R5cGUuaW50ZXJhY3Rpb25JZFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7YW55fSB0aGUgcmVjZWl2ZWQgaW50ZXJhY3Rpb24gaWQuXG4gICAgICovXG4gICAgZ2V0IGludGVyYWN0aW9uSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUdXJuU3RhdHVzLmludGVyYWN0aW9uSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGNvbnZlcnNhdGlvbiBpZGVudGlmaWVyIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHR1cm4gc3RhdHVzIGV2ZW50LlxuICAgICAqIEBtZW1iZXIgVHVyblN0YXR1c1JlY2VpdmVkRXZlbnRBcmdzLnByb3RvdHlwZS5jb252ZXJzYXRpb25JZFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7YW55fSB0aGUgcmVjZWl2ZWQgY29udmVyc2F0aW9uIGlkLlxuICAgICAqL1xuICAgIGdldCBjb252ZXJzYXRpb25JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlR1cm5TdGF0dXMuY29udmVyc2F0aW9uSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHJlY2VpdmVkIHR1cm4gc3RhdHVzIGNvZGUuXG4gICAgICogQG1lbWJlciBUdXJuU3RhdHVzUmVjZWl2ZWRFdmVudEFyZ3MucHJvdG90eXBlLnN0YXR1c0NvZGVcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge251bWJlcn0gdGhlIHJlY2VpdmVkIHR1cm4gc3RhdHVzLlxuICAgICAqL1xuICAgIGdldCBzdGF0dXNDb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2VHVyblN0YXR1cy5zdGF0dXNDb2RlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtcmV0dXJuXG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UdXJuU3RhdHVzUmVjZWl2ZWRFdmVudEFyZ3MuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogRGVmaW5lcyB0aGUgZ2VuZGVyIG9mIHN5bnRoZXNpcyB2b2ljZXMuXG4gKiBBZGRlZCBpbiB2ZXJzaW9uIDEuMjAuMC5cbiAqL1xuZXhwb3J0IHZhciBTeW50aGVzaXNWb2ljZUdlbmRlcjtcbihmdW5jdGlvbiAoU3ludGhlc2lzVm9pY2VHZW5kZXIpIHtcbiAgICAvKiogR2VuZGVyIHVua25vd24gKi9cbiAgICBTeW50aGVzaXNWb2ljZUdlbmRlcltTeW50aGVzaXNWb2ljZUdlbmRlcltcIlVua25vd25cIl0gPSAwXSA9IFwiVW5rbm93blwiO1xuICAgIC8qKiBGZW1hbGUgdm9pY2UgKi9cbiAgICBTeW50aGVzaXNWb2ljZUdlbmRlcltTeW50aGVzaXNWb2ljZUdlbmRlcltcIkZlbWFsZVwiXSA9IDFdID0gXCJGZW1hbGVcIjtcbiAgICAvKiogTWFsZSB2b2ljZSAqL1xuICAgIFN5bnRoZXNpc1ZvaWNlR2VuZGVyW1N5bnRoZXNpc1ZvaWNlR2VuZGVyW1wiTWFsZVwiXSA9IDJdID0gXCJNYWxlXCI7XG59KShTeW50aGVzaXNWb2ljZUdlbmRlciB8fCAoU3ludGhlc2lzVm9pY2VHZW5kZXIgPSB7fSkpO1xuZXhwb3J0IHZhciBTeW50aGVzaXNWb2ljZVR5cGU7XG4oZnVuY3Rpb24gKFN5bnRoZXNpc1ZvaWNlVHlwZSkge1xuICAgIFN5bnRoZXNpc1ZvaWNlVHlwZVtTeW50aGVzaXNWb2ljZVR5cGVbXCJPbmxpbmVOZXVyYWxcIl0gPSAxXSA9IFwiT25saW5lTmV1cmFsXCI7XG4gICAgU3ludGhlc2lzVm9pY2VUeXBlW1N5bnRoZXNpc1ZvaWNlVHlwZVtcIk9ubGluZVN0YW5kYXJkXCJdID0gMl0gPSBcIk9ubGluZVN0YW5kYXJkXCI7XG4gICAgU3ludGhlc2lzVm9pY2VUeXBlW1N5bnRoZXNpc1ZvaWNlVHlwZVtcIk9mZmxpbmVOZXVyYWxcIl0gPSAzXSA9IFwiT2ZmbGluZU5ldXJhbFwiO1xuICAgIFN5bnRoZXNpc1ZvaWNlVHlwZVtTeW50aGVzaXNWb2ljZVR5cGVbXCJPZmZsaW5lU3RhbmRhcmRcIl0gPSA0XSA9IFwiT2ZmbGluZVN0YW5kYXJkXCI7XG59KShTeW50aGVzaXNWb2ljZVR5cGUgfHwgKFN5bnRoZXNpc1ZvaWNlVHlwZSA9IHt9KSk7XG4vKipcbiAqIEluZm9ybWF0aW9uIGFib3V0IFNwZWVjaCBTeW50aGVzaXMgdm9pY2VcbiAqIEFkZGVkIGluIHZlcnNpb24gMS4yMC4wLlxuICogQGNsYXNzIFZvaWNlSW5mb1xuICovXG5leHBvcnQgY2xhc3MgVm9pY2VJbmZvIHtcbiAgICBjb25zdHJ1Y3Rvcihqc29uKSB7XG4gICAgICAgIHRoaXMucHJpdlN0eWxlTGlzdCA9IFtdO1xuICAgICAgICB0aGlzLnByaXZWb2ljZVBhdGggPSBcIlwiO1xuICAgICAgICBpZiAoISFqc29uKSB7XG4gICAgICAgICAgICB0aGlzLnByaXZOYW1lID0ganNvbi5OYW1lO1xuICAgICAgICAgICAgdGhpcy5wcml2TG9jYWxlID0ganNvbi5Mb2NhbGU7XG4gICAgICAgICAgICB0aGlzLnByaXZTaG9ydE5hbWUgPSBqc29uLlNob3J0TmFtZTtcbiAgICAgICAgICAgIHRoaXMucHJpdkxvY2FsZU5hbWUgPSBqc29uLkxvY2FsZU5hbWU7XG4gICAgICAgICAgICB0aGlzLnByaXZMb2NhbE5hbWUgPSBqc29uLkxvY2FsTmFtZTtcbiAgICAgICAgICAgIHRoaXMucHJpdlZvaWNlVHlwZSA9IGpzb24uVm9pY2VUeXBlLmVuZHNXaXRoKFwiU3RhbmRhcmRcIikgPyBTeW50aGVzaXNWb2ljZVR5cGUuT25saW5lU3RhbmRhcmQgOiBTeW50aGVzaXNWb2ljZVR5cGUuT25saW5lTmV1cmFsO1xuICAgICAgICAgICAgdGhpcy5wcml2R2VuZGVyID0ganNvbi5HZW5kZXIgPT09IFwiTWFsZVwiID8gU3ludGhlc2lzVm9pY2VHZW5kZXIuTWFsZSA6IGpzb24uR2VuZGVyID09PSBcIkZlbWFsZVwiID8gU3ludGhlc2lzVm9pY2VHZW5kZXIuRmVtYWxlIDogU3ludGhlc2lzVm9pY2VHZW5kZXIuVW5rbm93bjtcbiAgICAgICAgICAgIGlmICghIWpzb24uU3R5bGVMaXN0ICYmIEFycmF5LmlzQXJyYXkoanNvbi5TdHlsZUxpc3QpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzdHlsZSBvZiBqc29uLlN0eWxlTGlzdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaXZTdHlsZUxpc3QucHVzaChzdHlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2TmFtZTtcbiAgICB9XG4gICAgZ2V0IGxvY2FsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkxvY2FsZTtcbiAgICB9XG4gICAgZ2V0IHNob3J0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlNob3J0TmFtZTtcbiAgICB9XG4gICAgZ2V0IGxvY2FsTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkxvY2FsTmFtZTtcbiAgICB9XG4gICAgZ2V0IGxvY2FsZU5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZMb2NhbGVOYW1lO1xuICAgIH1cbiAgICBnZXQgZ2VuZGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2R2VuZGVyO1xuICAgIH1cbiAgICBnZXQgdm9pY2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Vm9pY2VUeXBlO1xuICAgIH1cbiAgICBnZXQgc3R5bGVMaXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2U3R5bGVMaXN0O1xuICAgIH1cbiAgICBnZXQgdm9pY2VQYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2Vm9pY2VQYXRoO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Vm9pY2VJbmZvLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKipcbiAqIERlZmluZXMgVm9pY2UgUHJvZmlsZSBjbGFzcyBmb3IgU3BlYWtlciBSZWNvZ25pdGlvblxuICogQGNsYXNzIFZvaWNlUHJvZmlsZVxuICovXG5leHBvcnQgY2xhc3MgVm9pY2VQcm9maWxlIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9maWxlSWQgLSBwcm9maWxlSWQgb2YgdGhpcyBWb2ljZSBQcm9maWxlLlxuICAgICAqIEBwYXJhbSB7Vm9pY2VQcm9maWxlVHlwZX0gcHJvZmlsZVR5cGUgLSBwcm9maWxlVHlwZSBvZiB0aGlzIFZvaWNlIFByb2ZpbGUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocHJvZmlsZUlkLCBwcm9maWxlVHlwZSkge1xuICAgICAgICB0aGlzLnByaXZJZCA9IHByb2ZpbGVJZDtcbiAgICAgICAgdGhpcy5wcml2UHJvZmlsZVR5cGUgPSBwcm9maWxlVHlwZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogcHJvZmlsZUlkIG9mIHRoaXMgVm9pY2UgUHJvZmlsZSBpbnN0YW5jZVxuICAgICAqIEBtZW1iZXIgVm9pY2VQcm9maWxlLnByb3RvdHlwZS5wcm9maWxlSWRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gcHJvZmlsZUlkIG9mIHRoaXMgVm9pY2UgUHJvZmlsZSBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBnZXQgcHJvZmlsZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2SWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIHByb2ZpbGVUeXBlIG9mIHRoaXMgVm9pY2UgUHJvZmlsZSBpbnN0YW5jZVxuICAgICAqIEBtZW1iZXIgVm9pY2VQcm9maWxlLnByb3RvdHlwZS5wcm9maWxlVHlwZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAcmV0dXJucyB7Vm9pY2VQcm9maWxlVHlwZX0gcHJvZmlsZSB0eXBlIG9mIHRoaXMgVm9pY2UgUHJvZmlsZSBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBnZXQgcHJvZmlsZVR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZQcm9maWxlVHlwZTtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZvaWNlUHJvZmlsZS5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBSZWNvZ25pemVyQ29uZmlnLCBWb2ljZVByb2ZpbGVDb25uZWN0aW9uRmFjdG9yeSwgVm9pY2VTZXJ2aWNlUmVjb2duaXplciB9IGZyb20gXCIuLi9jb21tb24uc3BlZWNoL0V4cG9ydHNcIjtcbmltcG9ydCB7IEF1ZGlvQ29uZmlnIH0gZnJvbSBcIi4vQXVkaW8vQXVkaW9Db25maWdcIjtcbmltcG9ydCB7IENvbnRyYWN0cyB9IGZyb20gXCIuL0NvbnRyYWN0c1wiO1xuaW1wb3J0IHsgQXVkaW9JbnB1dFN0cmVhbSwgUHJvcGVydHlJZCwgUmVjb2duaXplciwgUmVzdWx0UmVhc29uLCBWb2ljZVByb2ZpbGUsIFZvaWNlUHJvZmlsZVJlc3VsdCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogRGVmaW5lcyBWb2ljZVByb2ZpbGVDbGllbnQgY2xhc3MgZm9yIFNwZWFrZXIgUmVjb2duaXRpb25cbiAqIEhhbmRsZXMgb3BlcmF0aW9ucyBmcm9tIHVzZXIgZm9yIFZvaWNlIFByb2ZpbGUgb3BlcmF0aW9ucyAoZS5nLiBjcmVhdGVQcm9maWxlLCBkZWxldGVQcm9maWxlKVxuICogQGNsYXNzIFZvaWNlUHJvZmlsZUNsaWVudFxuICovXG5leHBvcnQgY2xhc3MgVm9pY2VQcm9maWxlQ2xpZW50IGV4dGVuZHMgUmVjb2duaXplciB7XG4gICAgLyoqXG4gICAgICogVm9pY2VQcm9maWxlQ2xpZW50IGNvbnN0cnVjdG9yLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7U3BlZWNoQ29uZmlnfSBzcGVlY2hDb25maWcgLSBBbiBzZXQgb2YgaW5pdGlhbCBwcm9wZXJ0aWVzIGZvciB0aGlzIHN5bnRoZXNpemVyIChhdXRoZW50aWNhdGlvbiBrZXksIHJlZ2lvbiwgJmMpXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc3BlZWNoQ29uZmlnKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKHNwZWVjaENvbmZpZywgXCJzcGVlY2hDb25maWdcIik7XG4gICAgICAgIGNvbnN0IHNwZWVjaENvbmZpZ0ltcGwgPSBzcGVlY2hDb25maWc7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbChzcGVlY2hDb25maWdJbXBsLCBcInNwZWVjaENvbmZpZ1wiKTtcbiAgICAgICAgc3VwZXIoQXVkaW9Db25maWcuZnJvbVN0cmVhbUlucHV0KEF1ZGlvSW5wdXRTdHJlYW0uY3JlYXRlUHVzaFN0cmVhbSgpKSwgc3BlZWNoQ29uZmlnSW1wbC5wcm9wZXJ0aWVzLCBuZXcgVm9pY2VQcm9maWxlQ29ubmVjdGlvbkZhY3RvcnkoKSk7XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMgPSBzcGVlY2hDb25maWdJbXBsLnByb3BlcnRpZXMuY2xvbmUoKTtcbiAgICAgICAgdGhpcy5wcml2Vm9pY2VBZGFwdGVyID0gdGhpcy5wcml2UmVjbztcbiAgICAgICAgdGhpcy5wcml2RGlzcG9zZWRWb2ljZUFkYXB0ZXIgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbGxlY3Rpb24gb2YgcHJvcGVydGllcyBhbmQgdGhlaXIgdmFsdWVzIGRlZmluZWQgZm9yIHRoaXMgVm9pY2VQcm9maWxlQ2xpZW50LlxuICAgICAqIEBtZW1iZXIgVm9pY2VQcm9maWxlQ2xpZW50LnByb3RvdHlwZS5wcm9wZXJ0aWVzXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtQcm9wZXJ0eUNvbGxlY3Rpb259IFRoZSBjb2xsZWN0aW9uIG9mIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcyBkZWZpbmVkIGZvciB0aGlzIFZvaWNlUHJvZmlsZUNsaWVudC5cbiAgICAgKi9cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBzZXJ2aWNlLlxuICAgICAqIEBtZW1iZXIgVm9pY2VQcm9maWxlQ2xpZW50LnByb3RvdHlwZS5hdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHJldHVybnMge3N0cmluZ30gQXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBnZXQgYXV0aG9yaXphdGlvblRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzL1NldHMgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBzZXJ2aWNlLlxuICAgICAqIEBtZW1iZXIgVm9pY2VQcm9maWxlQ2xpZW50LnByb3RvdHlwZS5hdXRob3JpemF0aW9uVG9rZW5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gQXV0aG9yaXphdGlvbiB0b2tlbi5cbiAgICAgKi9cbiAgICBzZXQgYXV0aG9yaXphdGlvblRva2VuKHRva2VuKSB7XG4gICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yV2hpdGVzcGFjZSh0b2tlbiwgXCJ0b2tlblwiKTtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzLnNldFByb3BlcnR5KFByb3BlcnR5SWQuU3BlZWNoU2VydmljZUF1dGhvcml6YXRpb25fVG9rZW4sIHRva2VuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgc3BlYWtlciByZWNvZ25pdGlvbiB2b2ljZSBwcm9maWxlXG4gICAgICogQG1lbWJlciBWb2ljZVByb2ZpbGVDbGllbnQucHJvdG90eXBlLmNyZWF0ZVByb2ZpbGVBc3luY1xuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAYXN5bmNcbiAgICAgKiBAcGFyYW0ge1ZvaWNlUHJvZmlsZVR5cGV9IHByb2ZpbGVUeXBlIFR5cGUgb2YgVm9pY2UgUHJvZmlsZSB0byBiZSBjcmVhdGVkXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxhbmcgTGFuZ3VhZ2Ugc3RyaW5nIChsb2NhbGUpIGZvciBWb2ljZSBQcm9maWxlXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxWb2ljZVByb2ZpbGU+fSAtIFByb21pc2Ugb2YgYSBWb2ljZVByb2ZpbGUuXG4gICAgICovXG4gICAgY3JlYXRlUHJvZmlsZUFzeW5jKHByb2ZpbGVUeXBlLCBsYW5nKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9maWxlSWRzID0geWllbGQgdGhpcy5wcml2Vm9pY2VBZGFwdGVyLmNyZWF0ZVByb2ZpbGUocHJvZmlsZVR5cGUsIGxhbmcpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWb2ljZVByb2ZpbGUocHJvZmlsZUlkc1swXSwgcHJvZmlsZVR5cGUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGN1cnJlbnQgaW5mb3JtYXRpb24gb2YgYSB2b2ljZSBwcm9maWxlXG4gICAgICogQG1lbWJlciBWb2ljZVByb2ZpbGVDbGllbnQucHJvdG90eXBlLnJldHJpZXZlRW5yb2xsbWVudFJlc3VsdEFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBhc3luY1xuICAgICAqIEBwYXJhbSB7Vm9pY2VQcm9maWxlfSBwcm9maWxlIFZvaWNlIFByb2ZpbGUgdG8gcmV0cmlldmUgaW5mbyBmb3JcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFZvaWNlUHJvZmlsZUVucm9sbG1lbnRSZXN1bHQ+fSAtIFByb21pc2Ugb2YgYSBWb2ljZVByb2ZpbGVFbnJvbGxtZW50UmVzdWx0LlxuICAgICAqL1xuICAgIHJldHJpZXZlRW5yb2xsbWVudFJlc3VsdEFzeW5jKHByb2ZpbGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZWb2ljZUFkYXB0ZXIucmV0cmlldmVFbnJvbGxtZW50UmVzdWx0KHByb2ZpbGUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGFsbCB2b2ljZSBwcm9maWxlcyBvbiBhY2NvdW50IHdpdGggZ2l2ZW4gdm9pY2UgcHJvZmlsZSB0eXBlXG4gICAgICogQG1lbWJlciBWb2ljZVByb2ZpbGVDbGllbnQucHJvdG90eXBlLmdldEFsbFByb2ZpbGVzQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQGFzeW5jXG4gICAgICogQHBhcmFtIHtWb2ljZVByb2ZpbGVUeXBlfSBwcm9maWxlVHlwZSBwcm9maWxlIHR5cGUgKGlkZW50aWZpY2F0aW9uL3ZlcmlmaWNhdGlvbikgZm9yIHdoaWNoIHRvIGxpc3QgcHJvZmlsZXNcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFZvaWNlUHJvZmlsZUVucm9sbG1lbnRSZXN1bHRbXT59IC0gUHJvbWlzZSBvZiBhbiBhcnJheSBvZiBWb2ljZVByb2ZpbGVFbnJvbGxtZW50UmVzdWx0cy5cbiAgICAgKi9cbiAgICBnZXRBbGxQcm9maWxlc0FzeW5jKHByb2ZpbGVUeXBlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Vm9pY2VBZGFwdGVyLmdldEFsbFByb2ZpbGVzKHByb2ZpbGVUeXBlKTtcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICBjb25zdCByZXN1bHQ6IHsganNvbjogeyB2YWx1ZTogRW5yb2xsbWVudFJlc3VsdEpTT05bXSB9IH0gPSBhd2FpdCB0aGlzLnByaXZBZGFwdGVyLmdldFByb2ZpbGVzKHByb2ZpbGVUeXBlKTtcbiAgICAgICAgICAgIGlmIChwcm9maWxlVHlwZSA9PT0gVm9pY2VQcm9maWxlVHlwZS5UZXh0SW5kZXBlbmRlbnRJZGVudGlmaWNhdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBWb2ljZVByb2ZpbGVFbnJvbGxtZW50UmVzdWx0LkZyb21JZGVudGlmaWNhdGlvblByb2ZpbGVMaXN0KHJlc3VsdC5qc29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBWb2ljZVByb2ZpbGVFbnJvbGxtZW50UmVzdWx0LkZyb21WZXJpZmljYXRpb25Qcm9maWxlTGlzdChyZXN1bHQuanNvbik7XG4gICAgICAgICAgICAqL1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHZhbGlkIGF1dGhvcml6YXRpb24gcGhyYXNlcyBmb3Igdm9pY2UgcHJvZmlsZSBlbnJvbGxtZW50XG4gICAgICogQG1lbWJlciBWb2ljZVByb2ZpbGVDbGllbnQucHJvdG90eXBlLmdldEFjdGl2YXRpb25QaHJhc2VzQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQGFzeW5jXG4gICAgICogQHBhcmFtIHtWb2ljZVByb2ZpbGVUeXBlfSBwcm9maWxlVHlwZSBQcm9maWxlIFR5cGUgdG8gZ2V0IGFjdGl2YXRpb24gcGhyYXNlcyBmb3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZyBMYW5ndWFnZSBzdHJpbmcgKGxvY2FsZSkgZm9yIFZvaWNlIFByb2ZpbGVcbiAgICAgKi9cbiAgICBnZXRBY3RpdmF0aW9uUGhyYXNlc0FzeW5jKHByb2ZpbGVUeXBlLCBsYW5nKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Vm9pY2VBZGFwdGVyLmdldEFjdGl2YXRpb25QaHJhc2VzKHByb2ZpbGVUeXBlLCBsYW5nKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHNwZWFrZXIgcmVjb2duaXRpb24gdm9pY2UgcHJvZmlsZVxuICAgICAqIEBtZW1iZXIgVm9pY2VQcm9maWxlQ2xpZW50LnByb3RvdHlwZS5lbnJvbGxQcm9maWxlQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQGFzeW5jXG4gICAgICogQHBhcmFtIHtWb2ljZVByb2ZpbGV9IHByb2ZpbGUgVm9pY2UgUHJvZmlsZSB0byBjcmVhdGUgZW5yb2xsbWVudCBmb3JcbiAgICAgKiBAcGFyYW0ge0F1ZGlvQ29uZmlnfSBhdWRpb0NvbmZpZyBzb3VyY2UgaW5mbyBmcm9tIHdoaWNoIHRvIGNyZWF0ZSBlbnJvbGxtZW50XG4gICAgICogQHJldHVybiB7UHJvbWlzZTxWb2ljZVByb2ZpbGVFbnJvbGxtZW50UmVzdWx0Pn0gLSBQcm9taXNlIG9mIGEgVm9pY2VQcm9maWxlRW5yb2xsbWVudFJlc3VsdC5cbiAgICAgKi9cbiAgICBlbnJvbGxQcm9maWxlQXN5bmMocHJvZmlsZSwgYXVkaW9Db25maWcpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZ0ltcGwgPSBhdWRpb0NvbmZpZztcbiAgICAgICAgICAgIENvbnRyYWN0cy50aHJvd0lmTnVsbE9yVW5kZWZpbmVkKGNvbmZpZ0ltcGwsIFwiYXVkaW9Db25maWdcIik7XG4gICAgICAgICAgICB0aGlzLmF1ZGlvQ29uZmlnID0gYXVkaW9Db25maWc7XG4gICAgICAgICAgICB0aGlzLnByaXZWb2ljZUFkYXB0ZXIuU3BlYWtlckF1ZGlvU291cmNlID0gY29uZmlnSW1wbDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZWb2ljZUFkYXB0ZXIuZW5yb2xsUHJvZmlsZShwcm9maWxlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBhIHNwZWFrZXIgcmVjb2duaXRpb24gdm9pY2UgcHJvZmlsZVxuICAgICAqIEBtZW1iZXIgVm9pY2VQcm9maWxlQ2xpZW50LnByb3RvdHlwZS5kZWxldGVQcm9maWxlQXN5bmNcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQGFzeW5jXG4gICAgICogQHBhcmFtIHtWb2ljZVByb2ZpbGV9IHByb2ZpbGUgVm9pY2UgUHJvZmlsZSB0byBiZSBkZWxldGVkXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxWb2ljZVByb2ZpbGVSZXN1bHQ+fSAtIFByb21pc2Ugb2YgYSBWb2ljZVByb2ZpbGVSZXN1bHQuXG4gICAgICovXG4gICAgZGVsZXRlUHJvZmlsZUFzeW5jKHByb2ZpbGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByaXZWb2ljZUFkYXB0ZXIuZGVsZXRlUHJvZmlsZShwcm9maWxlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbGwgZW5yb2xsbWVudHMgZm9yIGEgc3BlYWtlciByZWNvZ25pdGlvbiB2b2ljZSBwcm9maWxlXG4gICAgICogQG1lbWJlciBWb2ljZVByb2ZpbGVDbGllbnQucHJvdG90eXBlLnJlc2V0UHJvZmlsZUFzeW5jXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBhc3luY1xuICAgICAqIEBwYXJhbSB7Vm9pY2VQcm9maWxlfSBwcm9maWxlIFZvaWNlIFByb2ZpbGUgdG8gYmUgcmVzZXRcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPFZvaWNlUHJvZmlsZVJlc3VsdD59IC0gUHJvbWlzZSBvZiBhIFZvaWNlUHJvZmlsZVJlc3VsdC5cbiAgICAgKi9cbiAgICByZXNldFByb2ZpbGVBc3luYyhwcm9maWxlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcml2Vm9pY2VBZGFwdGVyLnJlc2V0UHJvZmlsZShwcm9maWxlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFuIHVwIG9iamVjdCBhbmQgY2xvc2UgdW5kZXJseWluZyBjb25uZWN0aW9uXG4gICAgICogQG1lbWJlciBWb2ljZVByb2ZpbGVDbGllbnQucHJvdG90eXBlLmNsb3NlXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQGFzeW5jXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgeWllbGQgdGhpcy5kaXNwb3NlKHRydWUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY3JlYXRlU2VydmljZVJlY29nbml6ZXIoYXV0aGVudGljYXRpb24sIGNvbm5lY3Rpb25GYWN0b3J5LCBhdWRpb0NvbmZpZywgcmVjb2duaXplckNvbmZpZykge1xuICAgICAgICBjb25zdCBhdWRpb0ltcGwgPSBhdWRpb0NvbmZpZztcbiAgICAgICAgcmV0dXJuIG5ldyBWb2ljZVNlcnZpY2VSZWNvZ25pemVyKGF1dGhlbnRpY2F0aW9uLCBjb25uZWN0aW9uRmFjdG9yeSwgYXVkaW9JbXBsLCByZWNvZ25pemVyQ29uZmlnLCB0aGlzKTtcbiAgICB9XG4gICAgZGlzcG9zZShkaXNwb3NpbmcpIHtcbiAgICAgICAgY29uc3QgX3N1cGVyID0gT2JqZWN0LmNyZWF0ZShudWxsLCB7XG4gICAgICAgICAgICBkaXNwb3NlOiB7IGdldDogKCkgPT4gc3VwZXIuZGlzcG9zZSB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpdkRpc3Bvc2VkVm9pY2VBZGFwdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcml2RGlzcG9zZWRWb2ljZUFkYXB0ZXIgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGRpc3Bvc2luZykge1xuICAgICAgICAgICAgICAgIHlpZWxkIF9zdXBlci5kaXNwb3NlLmNhbGwodGhpcywgZGlzcG9zaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNyZWF0ZVJlY29nbml6ZXJDb25maWcoc3BlZWNoQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVjb2duaXplckNvbmZpZyhzcGVlY2hDb25maWcsIHRoaXMucHJvcGVydGllcyk7XG4gICAgfVxuICAgIGdldFJlc3VsdChyZXN1bHQsIHN1Y2Nlc3NSZWFzb24pIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBuZXcgVm9pY2VQcm9maWxlUmVzdWx0KHJlc3VsdC5vayA/IHN1Y2Nlc3NSZWFzb24gOiBSZXN1bHRSZWFzb24uQ2FuY2VsZWQsIHJlc3VsdC5zdGF0dXNUZXh0KTtcbiAgICAgICAgcmV0dXJuIChyZXNwb25zZSk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Wb2ljZVByb2ZpbGVDbGllbnQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5pbXBvcnQgeyBDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUgfSBmcm9tIFwiLi4vY29tbW9uLnNwZWVjaC9FeHBvcnRzXCI7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25EZXRhaWxzQmFzZSwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBDYW5jZWxsYXRpb25SZWFzb24sIFByb3BlcnR5Q29sbGVjdGlvbiwgUmVzdWx0UmVhc29uIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBPdXRwdXQgZm9ybWF0XG4gKiBAY2xhc3MgVm9pY2VQcm9maWxlRW5yb2xsbWVudFJlc3VsdFxuICovXG5leHBvcnQgY2xhc3MgVm9pY2VQcm9maWxlRW5yb2xsbWVudFJlc3VsdCB7XG4gICAgY29uc3RydWN0b3IocmVhc29uLCBqc29uLCBzdGF0dXNUZXh0KSB7XG4gICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgdGhpcy5wcml2UHJvcGVydGllcyA9IG5ldyBQcm9wZXJ0eUNvbGxlY3Rpb24oKTtcbiAgICAgICAgaWYgKHRoaXMucHJpdlJlYXNvbiAhPT0gUmVzdWx0UmVhc29uLkNhbmNlbGVkKSB7XG4gICAgICAgICAgICBpZiAoISFqc29uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcml2RGV0YWlscyA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJpdkRldGFpbHMuZW5yb2xsbWVudFN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSBcImVucm9sbGluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpdlJlYXNvbiA9IFJlc3VsdFJlYXNvbi5FbnJvbGxpbmdWb2ljZVByb2ZpbGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcml2RXJyb3JEZXRhaWxzID0gc3RhdHVzVGV4dDtcbiAgICAgICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBDYW5jZWxsYXRpb25FcnJvckNvZGVbQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLlNlcnZpY2VFcnJvcl0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCByZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgfVxuICAgIGdldCBlbnJvbGxtZW50c0NvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2RGV0YWlscy5lbnJvbGxtZW50c0NvdW50O1xuICAgIH1cbiAgICBnZXQgZW5yb2xsbWVudHNMZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZEZXRhaWxzLmVucm9sbG1lbnRzTGVuZ3RoO1xuICAgIH1cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdlByb3BlcnRpZXM7XG4gICAgfVxuICAgIGdldCBlbnJvbGxtZW50UmVzdWx0RGV0YWlscygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkRldGFpbHM7XG4gICAgfVxuICAgIGdldCBlcnJvckRldGFpbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZFcnJvckRldGFpbHM7XG4gICAgfVxuICAgIHN0YXRpYyBGcm9tSWRlbnRpZmljYXRpb25Qcm9maWxlTGlzdChqc29uKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGpzb24udmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlYXNvbiA9IGl0ZW0uZW5yb2xsbWVudFN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSBcImVucm9sbGluZ1wiID9cbiAgICAgICAgICAgICAgICBSZXN1bHRSZWFzb24uRW5yb2xsaW5nVm9pY2VQcm9maWxlIDogaXRlbS5lbnJvbGxtZW50U3RhdHVzLnRvTG93ZXJDYXNlKCkgPT09IFwiZW5yb2xsZWRcIiA/XG4gICAgICAgICAgICAgICAgUmVzdWx0UmVhc29uLkVucm9sbGVkVm9pY2VQcm9maWxlIDogUmVzdWx0UmVhc29uLkNhbmNlbGVkO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFZvaWNlUHJvZmlsZUVucm9sbG1lbnRSZXN1bHQocmVhc29uLCBudWxsLCBudWxsKTtcbiAgICAgICAgICAgIHJlc3VsdC5wcml2RGV0YWlscyA9IHRoaXMuZ2V0SWRlbnRpZmljYXRpb25EZXRhaWxzKGl0ZW0pO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIHN0YXRpYyBGcm9tVmVyaWZpY2F0aW9uUHJvZmlsZUxpc3QoanNvbikge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBqc29uLnZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCByZWFzb24gPSBpdGVtLmVucm9sbG1lbnRTdGF0dXMudG9Mb3dlckNhc2UoKSA9PT0gXCJlbnJvbGxpbmdcIiA/XG4gICAgICAgICAgICAgICAgUmVzdWx0UmVhc29uLkVucm9sbGluZ1ZvaWNlUHJvZmlsZSA6IGl0ZW0uZW5yb2xsbWVudFN0YXR1cy50b0xvd2VyQ2FzZSgpID09PSBcImVucm9sbGVkXCIgP1xuICAgICAgICAgICAgICAgIFJlc3VsdFJlYXNvbi5FbnJvbGxlZFZvaWNlUHJvZmlsZSA6IFJlc3VsdFJlYXNvbi5DYW5jZWxlZDtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBWb2ljZVByb2ZpbGVFbnJvbGxtZW50UmVzdWx0KHJlYXNvbiwgbnVsbCwgbnVsbCk7XG4gICAgICAgICAgICByZXN1bHQucHJpdkRldGFpbHMgPSB0aGlzLmdldFZlcmlmaWNhdGlvbkRldGFpbHMoaXRlbSk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2gocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG4gICAgc3RhdGljIGdldElkZW50aWZpY2F0aW9uRGV0YWlscyhqc29uKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhdWRpb0xlbmd0aDoganNvbi5hdWRpb0xlbmd0aCA/IHBhcnNlRmxvYXQoanNvbi5hdWRpb0xlbmd0aCkgOiAwLFxuICAgICAgICAgICAgYXVkaW9TcGVlY2hMZW5ndGg6IGpzb24uYXVkaW9TcGVlY2hMZW5ndGggPyBwYXJzZUZsb2F0KGpzb24uYXVkaW9TcGVlY2hMZW5ndGgpIDogMCxcbiAgICAgICAgICAgIGVucm9sbG1lbnRTdGF0dXM6IGpzb24uZW5yb2xsbWVudFN0YXR1cyxcbiAgICAgICAgICAgIGVucm9sbG1lbnRzQ291bnQ6IGpzb24uZW5yb2xsbWVudHNDb3VudCB8fCAwLFxuICAgICAgICAgICAgZW5yb2xsbWVudHNMZW5ndGg6IGpzb24uZW5yb2xsbWVudHNMZW5ndGggPyBwYXJzZUZsb2F0KGpzb24uZW5yb2xsbWVudHNMZW5ndGgpIDogMCxcbiAgICAgICAgICAgIGVucm9sbG1lbnRzU3BlZWNoTGVuZ3RoOiBqc29uLmVucm9sbG1lbnRzU3BlZWNoTGVuZ3RoID8gcGFyc2VGbG9hdChqc29uLmVucm9sbG1lbnRzU3BlZWNoTGVuZ3RoKSA6IDAsXG4gICAgICAgICAgICBwcm9maWxlSWQ6IGpzb24ucHJvZmlsZUlkIHx8IGpzb24uaWRlbnRpZmljYXRpb25Qcm9maWxlSWQsXG4gICAgICAgICAgICByZW1haW5pbmdFbnJvbGxtZW50c1NwZWVjaExlbmd0aDoganNvbi5yZW1haW5pbmdFbnJvbGxtZW50c1NwZWVjaExlbmd0aCA/IHBhcnNlRmxvYXQoanNvbi5yZW1haW5pbmdFbnJvbGxtZW50c1NwZWVjaExlbmd0aCkgOiAwXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBnZXRWZXJpZmljYXRpb25EZXRhaWxzKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGF1ZGlvTGVuZ3RoOiBqc29uLmF1ZGlvTGVuZ3RoID8gcGFyc2VGbG9hdChqc29uLmF1ZGlvTGVuZ3RoKSA6IDAsXG4gICAgICAgICAgICBhdWRpb1NwZWVjaExlbmd0aDoganNvbi5hdWRpb1NwZWVjaExlbmd0aCA/IHBhcnNlRmxvYXQoanNvbi5hdWRpb1NwZWVjaExlbmd0aCkgOiAwLFxuICAgICAgICAgICAgZW5yb2xsbWVudFN0YXR1czoganNvbi5lbnJvbGxtZW50U3RhdHVzLFxuICAgICAgICAgICAgZW5yb2xsbWVudHNDb3VudDoganNvbi5lbnJvbGxtZW50c0NvdW50LFxuICAgICAgICAgICAgZW5yb2xsbWVudHNMZW5ndGg6IGpzb24uZW5yb2xsbWVudHNMZW5ndGggPyBwYXJzZUZsb2F0KGpzb24uZW5yb2xsbWVudHNMZW5ndGgpIDogMCxcbiAgICAgICAgICAgIGVucm9sbG1lbnRzU3BlZWNoTGVuZ3RoOiBqc29uLmVucm9sbG1lbnRzU3BlZWNoTGVuZ3RoID8gcGFyc2VGbG9hdChqc29uLmVucm9sbG1lbnRzU3BlZWNoTGVuZ3RoKSA6IDAsXG4gICAgICAgICAgICBwcm9maWxlSWQ6IGpzb24ucHJvZmlsZUlkIHx8IGpzb24udmVyaWZpY2F0aW9uUHJvZmlsZUlkLFxuICAgICAgICAgICAgcmVtYWluaW5nRW5yb2xsbWVudHNDb3VudDoganNvbi5yZW1haW5pbmdFbnJvbGxtZW50cyB8fCBqc29uLnJlbWFpbmluZ0Vucm9sbG1lbnRzQ291bnQsXG4gICAgICAgICAgICByZW1haW5pbmdFbnJvbGxtZW50c1NwZWVjaExlbmd0aDoganNvbi5yZW1haW5pbmdFbnJvbGxtZW50c1NwZWVjaExlbmd0aCA/IHBhcnNlRmxvYXQoanNvbi5yZW1haW5pbmdFbnJvbGxtZW50c1NwZWVjaExlbmd0aCkgOiAwXG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBAY2xhc3MgVm9pY2VQcm9maWxlRW5yb2xsbWVudENhbmNlbGxhdGlvbkRldGFpbHNcbiAqL1xuZXhwb3J0IGNsYXNzIFZvaWNlUHJvZmlsZUVucm9sbG1lbnRDYW5jZWxsYXRpb25EZXRhaWxzIGV4dGVuZHMgQ2FuY2VsbGF0aW9uRGV0YWlsc0Jhc2Uge1xuICAgIGNvbnN0cnVjdG9yKHJlYXNvbiwgZXJyb3JEZXRhaWxzLCBlcnJvckNvZGUpIHtcbiAgICAgICAgc3VwZXIocmVhc29uLCBlcnJvckRldGFpbHMsIGVycm9yQ29kZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgVm9pY2VQcm9maWxlRW5yb2xsbWVudENhbmNlbGxhdGlvbkRldGFpbHMgb2JqZWN0IGZvciB0aGUgY2FuY2VsZWQgVm9pY2VQcm9maWxlRW5yb2xsbWVudFJlc3VsdC5cbiAgICAgKiBAbWVtYmVyIFZvaWNlUHJvZmlsZUVucm9sbG1lbnRDYW5jZWxsYXRpb25EZXRhaWxzLmZyb21SZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtWb2ljZVByb2ZpbGVFbnJvbGxtZW50UmVzdWx0fSByZXN1bHQgLSBUaGUgcmVzdWx0IHRoYXQgd2FzIGNhbmNlbGVkLlxuICAgICAqIEByZXR1cm5zIHtWb2ljZVByb2ZpbGVFbnJvbGxtZW50Q2FuY2VsbGF0aW9uRGV0YWlsc30gVGhlIGNhbmNlbGxhdGlvbiBkZXRhaWxzIG9iamVjdCBiZWluZyBjcmVhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tUmVzdWx0KHJlc3VsdCkge1xuICAgICAgICBjb25zdCByZWFzb24gPSBDYW5jZWxsYXRpb25SZWFzb24uRXJyb3I7XG4gICAgICAgIGxldCBlcnJvckNvZGUgPSBDYW5jZWxsYXRpb25FcnJvckNvZGUuTm9FcnJvcjtcbiAgICAgICAgaWYgKCEhcmVzdWx0LnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGVycm9yQ29kZSA9IENhbmNlbGxhdGlvbkVycm9yQ29kZVtyZXN1bHQucHJvcGVydGllcy5nZXRQcm9wZXJ0eShDYW5jZWxsYXRpb25FcnJvckNvZGVQcm9wZXJ0eU5hbWUsIENhbmNlbGxhdGlvbkVycm9yQ29kZVtDYW5jZWxsYXRpb25FcnJvckNvZGUuTm9FcnJvcl0pXTsgLy9lc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBWb2ljZVByb2ZpbGVFbnJvbGxtZW50Q2FuY2VsbGF0aW9uRGV0YWlscyhyZWFzb24sIHJlc3VsdC5lcnJvckRldGFpbHMsIGVycm9yQ29kZSk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Wb2ljZVByb2ZpbGVFbnJvbGxtZW50UmVzdWx0LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBDb250cmFjdHMgfSBmcm9tIFwiLi9Db250cmFjdHNcIjtcbmltcG9ydCB7IFZvaWNlUHJvZmlsZVJlc3VsdCB9IGZyb20gXCIuL0V4cG9ydHNcIjtcbi8qKlxuICogT3V0cHV0IGZvcm1hdFxuICogQGNsYXNzIFZvaWNlUHJvZmlsZVBocmFzZVJlc3VsdFxuICovXG5leHBvcnQgY2xhc3MgVm9pY2VQcm9maWxlUGhyYXNlUmVzdWx0IGV4dGVuZHMgVm9pY2VQcm9maWxlUmVzdWx0IHtcbiAgICBjb25zdHJ1Y3RvcihyZWFzb24sIHN0YXR1c1RleHQsIHR5cGUsIHBocmFzZUFycmF5KSB7XG4gICAgICAgIHN1cGVyKHJlYXNvbiwgc3RhdHVzVGV4dCk7XG4gICAgICAgIHRoaXMucHJpdlBocmFzZXMgPSBbXTtcbiAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQocGhyYXNlQXJyYXksIFwicGhyYXNlIGFycmF5XCIpO1xuICAgICAgICB0aGlzLnByaXZUeXBlID0gdHlwZTtcbiAgICAgICAgaWYgKCEhcGhyYXNlQXJyYXkgJiYgISFwaHJhc2VBcnJheVswXSkge1xuICAgICAgICAgICAgdGhpcy5wcml2UGhyYXNlcyA9IHBocmFzZUFycmF5O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBwaHJhc2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UGhyYXNlcztcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZUeXBlO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Vm9pY2VQcm9maWxlUGhyYXNlUmVzdWx0LmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtY2xhc3Nlcy1wZXItZmlsZSAqL1xuaW1wb3J0IHsgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lIH0gZnJvbSBcIi4uL2NvbW1vbi5zcGVlY2gvRXhwb3J0c1wiO1xuaW1wb3J0IHsgQ29udHJhY3RzIH0gZnJvbSBcIi4vQ29udHJhY3RzXCI7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25EZXRhaWxzQmFzZSwgQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLCBDYW5jZWxsYXRpb25SZWFzb24sIFByb3BlcnR5Q29sbGVjdGlvbiwgUmVzdWx0UmVhc29uIH0gZnJvbSBcIi4vRXhwb3J0c1wiO1xuLyoqXG4gKiBPdXRwdXQgZm9ybWF0XG4gKiBAY2xhc3MgVm9pY2VQcm9maWxlUmVzdWx0XG4gKi9cbmV4cG9ydCBjbGFzcyBWb2ljZVByb2ZpbGVSZXN1bHQge1xuICAgIGNvbnN0cnVjdG9yKHJlYXNvbiwgc3RhdHVzVGV4dCkge1xuICAgICAgICB0aGlzLnByaXZSZWFzb24gPSByZWFzb247XG4gICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMgPSBuZXcgUHJvcGVydHlDb2xsZWN0aW9uKCk7XG4gICAgICAgIGlmIChyZWFzb24gPT09IFJlc3VsdFJlYXNvbi5DYW5jZWxlZCkge1xuICAgICAgICAgICAgQ29udHJhY3RzLnRocm93SWZOdWxsT3JVbmRlZmluZWQoc3RhdHVzVGV4dCwgXCJzdGF0dXNUZXh0XCIpO1xuICAgICAgICAgICAgdGhpcy5wcml2RXJyb3JEZXRhaWxzID0gc3RhdHVzVGV4dDtcbiAgICAgICAgICAgIHRoaXMucHJpdlByb3BlcnRpZXMuc2V0UHJvcGVydHkoQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBDYW5jZWxsYXRpb25FcnJvckNvZGVbQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLlNlcnZpY2VFcnJvcl0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCByZWFzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaXZSZWFzb247XG4gICAgfVxuICAgIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcml2UHJvcGVydGllcztcbiAgICB9XG4gICAgZ2V0IGVycm9yRGV0YWlscygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpdkVycm9yRGV0YWlscztcbiAgICB9XG59XG4vKipcbiAqIEBjbGFzcyBWb2ljZVByb2ZpbGVDYW5jZWxsYXRpb25EZXRhaWxzXG4gKi9cbmV4cG9ydCBjbGFzcyBWb2ljZVByb2ZpbGVDYW5jZWxsYXRpb25EZXRhaWxzIGV4dGVuZHMgQ2FuY2VsbGF0aW9uRGV0YWlsc0Jhc2Uge1xuICAgIGNvbnN0cnVjdG9yKHJlYXNvbiwgZXJyb3JEZXRhaWxzLCBlcnJvckNvZGUpIHtcbiAgICAgICAgc3VwZXIocmVhc29uLCBlcnJvckRldGFpbHMsIGVycm9yQ29kZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgVm9pY2VQcm9maWxlQ2FuY2VsbGF0aW9uRGV0YWlscyBvYmplY3QgZm9yIHRoZSBjYW5jZWxlZCBWb2ljZVByb2ZpbGVSZXN1bHQuXG4gICAgICogQG1lbWJlciBWb2ljZVByb2ZpbGVDYW5jZWxsYXRpb25EZXRhaWxzLmZyb21SZXN1bHRcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtWb2ljZVByb2ZpbGVSZXN1bHR9IHJlc3VsdCAtIFRoZSByZXN1bHQgdGhhdCB3YXMgY2FuY2VsZWQuXG4gICAgICogQHJldHVybnMge1ZvaWNlUHJvZmlsZUNhbmNlbGxhdGlvbkRldGFpbHN9IFRoZSBjYW5jZWxsYXRpb24gZGV0YWlscyBvYmplY3QgYmVpbmcgY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVJlc3VsdChyZXN1bHQpIHtcbiAgICAgICAgY29uc3QgcmVhc29uID0gQ2FuY2VsbGF0aW9uUmVhc29uLkVycm9yO1xuICAgICAgICBsZXQgZXJyb3JDb2RlID0gQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLk5vRXJyb3I7XG4gICAgICAgIGlmICghIXJlc3VsdC5wcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBlcnJvckNvZGUgPSBDYW5jZWxsYXRpb25FcnJvckNvZGVbcmVzdWx0LnByb3BlcnRpZXMuZ2V0UHJvcGVydHkoQ2FuY2VsbGF0aW9uRXJyb3JDb2RlUHJvcGVydHlOYW1lLCBDYW5jZWxsYXRpb25FcnJvckNvZGVbQ2FuY2VsbGF0aW9uRXJyb3JDb2RlLk5vRXJyb3JdKV07IC8vZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgVm9pY2VQcm9maWxlQ2FuY2VsbGF0aW9uRGV0YWlscyhyZWFzb24sIHJlc3VsdC5lcnJvckRldGFpbHMsIGVycm9yQ29kZSk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Wb2ljZVByb2ZpbGVSZXN1bHQuanMubWFwXG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8qKlxuICogT3V0cHV0IGZvcm1hdFxuICogQGNsYXNzIFZvaWNlUHJvZmlsZVR5cGVcbiAqL1xuZXhwb3J0IHZhciBWb2ljZVByb2ZpbGVUeXBlO1xuKGZ1bmN0aW9uIChWb2ljZVByb2ZpbGVUeXBlKSB7XG4gICAgLyoqXG4gICAgICogVGV4dCBpbmRlcGVuZGVudCBzcGVha2VyIGlkZW50aWZpY2F0aW9uXG4gICAgICogQG1lbWJlciBWb2ljZVByb2ZpbGVUeXBlLlRleHRJbmRlcGVuZGVudElkZW50aWZpY2F0aW9uXG4gICAgICovXG4gICAgVm9pY2VQcm9maWxlVHlwZVtWb2ljZVByb2ZpbGVUeXBlW1wiVGV4dEluZGVwZW5kZW50SWRlbnRpZmljYXRpb25cIl0gPSAwXSA9IFwiVGV4dEluZGVwZW5kZW50SWRlbnRpZmljYXRpb25cIjtcbiAgICAvKipcbiAgICAgKiBUZXh0IGRlcGVuZGVudCBzcGVha2VyIHZlcmlmaWNhdGlvblxuICAgICAqIEBtZW1iZXIgVm9pY2VQcm9maWxlVHlwZS5UZXh0RGVwZW5kZW50VmVyaWZpY2F0aW9uXG4gICAgICovXG4gICAgVm9pY2VQcm9maWxlVHlwZVtWb2ljZVByb2ZpbGVUeXBlW1wiVGV4dERlcGVuZGVudFZlcmlmaWNhdGlvblwiXSA9IDFdID0gXCJUZXh0RGVwZW5kZW50VmVyaWZpY2F0aW9uXCI7XG4gICAgLyoqXG4gICAgICogVGV4dCBpbmRlcGVuZGVudCBzcGVha2VyIHZlcmlmaWNhdGlvblxuICAgICAqIEBtZW1iZXIgVm9pY2VQcm9maWxlVHlwZS5UZXh0SW5kZXBlbmRlbnRWZXJpZmljYXRpb25cbiAgICAgKi9cbiAgICBWb2ljZVByb2ZpbGVUeXBlW1ZvaWNlUHJvZmlsZVR5cGVbXCJUZXh0SW5kZXBlbmRlbnRWZXJpZmljYXRpb25cIl0gPSAyXSA9IFwiVGV4dEluZGVwZW5kZW50VmVyaWZpY2F0aW9uXCI7XG59KShWb2ljZVByb2ZpbGVUeXBlIHx8IChWb2ljZVByb2ZpbGVUeXBlID0ge30pKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Vm9pY2VQcm9maWxlVHlwZS5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5tb2RlbHMgPSBleHBvcnRzLmZyZWVNb2RlbHMgPSB2b2lkIDA7XG5leHBvcnRzLmZyZWVNb2RlbHMgPSBbXG4gICAge1xuICAgICAgICAnbmFtZSc6ICdHb29nbGU6IEdlbW1hIDdCIChmcmVlKScsXG4gICAgICAgICdpZCc6ICdnb29nbGUvZ2VtbWEtN2ItaXQ6ZnJlZSdcbiAgICB9LFxuICAgIHtcbiAgICAgICAgJ25hbWUnOiAnTWV0YTogTGxhbWEgMyA4QiBJbnN0cnVjdCAoZnJlZSknLFxuICAgICAgICAnaWQnOiAnbWV0YS1sbGFtYS9sbGFtYS0zLThiLWluc3RydWN0OmZyZWUnXG4gICAgfSxcbiAgICB7XG4gICAgICAgICduYW1lJzogJ09wZW5DaGF0IDMuNSAoZnJlZSknLFxuICAgICAgICAnaWQnOiAnb3BlbmNoYXQvb3BlbmNoYXQtN2I6ZnJlZSdcbiAgICB9LFxuICAgIHtcbiAgICAgICAgJ25hbWUnOiAnTWlzdHJhbCA3QiBJbnN0cnVjdCAoZnJlZSknLFxuICAgICAgICAnaWQnOiAnbWlzdHJhbGFpL21pc3RyYWwtN2ItaW5zdHJ1Y3Q6ZnJlZSdcbiAgICB9LFxuXTtcbmV4cG9ydHMubW9kZWxzID0gW1xuICAgIC4uLmV4cG9ydHMuZnJlZU1vZGVscyxcbiAgICB7XG4gICAgICAgICduYW1lJzogJ2dwdC0zLjUtdHVyYm8nLFxuICAgICAgICAnaWQnOiAnb3BlbmFpL2dwdC0zLjUtdHVyYm8nXG4gICAgfSxcbiAgICB7XG4gICAgICAgICduYW1lJzogJ2dwdC0zLjUtdHVyYm8tMTZrJyxcbiAgICAgICAgJ2lkJzogJ29wZW5haS9ncHQtMy41LXR1cmJvLTE2aydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgJ25hbWUnOiAnT3BlbkFJOiBHUFQtNG8nLFxuICAgICAgICAnaWQnOiAnb3BlbmFpL2dwdC00bydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgJ25hbWUnOiAnZ3B0LTQnLFxuICAgICAgICAnaWQnOiAnb3BlbmFpL2dwdC00J1xuICAgIH0sXG4gICAge1xuICAgICAgICAnbmFtZSc6ICdncHQtNC0zMmsnLFxuICAgICAgICAnaWQnOiAnb3BlbmFpL2dwdC00LTMyaydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgJ25hbWUnOiAnR29vZ2xlOiBHZW1pbmkgUHJvIDEuMCcsXG4gICAgICAgICdpZCc6ICdnb29nbGUvZ2VtaW5pLXBybydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgJ25hbWUnOiAnR29vZ2xlOiBQYUxNIDIgQ2hhdCAzMmsnLFxuICAgICAgICAnaWQnOiAnZ29vZ2xlL3BhbG0tMi1jaGF0LWJpc29uLTMyaydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgJ25hbWUnOiAnQW50aHJvcGljOiBDbGF1ZGUgMyBIYWlrdScsXG4gICAgICAgICdpZCc6ICdhbnRocm9waWMvY2xhdWRlLTMtaGFpa3UnXG4gICAgfSxcbiAgICB7XG4gICAgICAgICduYW1lJzogJ0FudGhyb3BpYzogQ2xhdWRlIDMgT3B1cycsXG4gICAgICAgICdpZCc6ICdhbnRocm9waWMvY2xhdWRlLTMtb3B1cydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgJ25hbWUnOiAnY2xhdWRlLTInLFxuICAgICAgICAnaWQnOiAnYW50aHJvcGljL2NsYXVkZS0yJ1xuICAgIH0sXG4gICAge1xuICAgICAgICAnbmFtZSc6ICdjbGF1ZGUtaW5zdGFudC12MScsXG4gICAgICAgICdpZCc6ICdhbnRocm9waWMvY2xhdWRlLWluc3RhbnQtdjEnXG4gICAgfSxcbiAgICB7XG4gICAgICAgICduYW1lJzogJ1BhTE0gMiBCaXNvbicsXG4gICAgICAgICdpZCc6ICdnb29nbGUvcGFsbS0yLWNoYXQtYmlzb24nXG4gICAgfSxcbiAgICB7XG4gICAgICAgICduYW1lJzogJ0xsYW1hIHYyIDEzQiBDaGF0IChiZXRhKScsXG4gICAgICAgICdpZCc6ICdtZXRhLWxsYW1hL2xsYW1hLTItMTNiLWNoYXQnXG4gICAgfVxuXTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnNhdmVPcHRpb25zID0gZXhwb3J0cy5nZXRTZXR0aW5ncyA9IHZvaWQgMDtcbmNvbnN0IHdlYmV4dGVuc2lvbl9wb2x5ZmlsbF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJ3ZWJleHRlbnNpb24tcG9seWZpbGxcIikpO1xuY29uc3QgbW9kZWxzXzEgPSByZXF1aXJlKFwiLi9tb2RlbHNcIik7XG5mdW5jdGlvbiBnZXRTZXR0aW5ncygpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBsZXQgaXRlbXMgPSB5aWVsZCB3ZWJleHRlbnNpb25fcG9seWZpbGxfMS5kZWZhdWx0LnN0b3JhZ2Uuc3luYy5nZXQoe1xuICAgICAgICAgICAgXCJvcGVuQXBpS2V5XCI6ICcnLFxuICAgICAgICAgICAgXCJvcGVuQXBpRW5kcG9pbnRcIjogJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20nLFxuICAgICAgICAgICAgXCJ1bnNwbGFzaEFwaUtleVwiOiAnJyxcbiAgICAgICAgICAgIFwiY3VycmVudExhbmd1YWdlXCI6ICdDaGluZXNlIFNpbXBsaWZpZWQnLFxuICAgICAgICAgICAgXCJ0YXJnZXRMYW5ndWFnZVwiOiAnVW5pdGVkIFN0YXRlcycsXG4gICAgICAgICAgICBcImFua2lEZWNrTmFtZVwiOiAnJyxcbiAgICAgICAgICAgIFwibGljZW5zZUtleVwiOiAnJyxcbiAgICAgICAgICAgIFwic2hvd1lvdXR1YmVCdXR0b25cIjogdHJ1ZSxcbiAgICAgICAgICAgIFwibW9kZWxcIjogbW9kZWxzXzEubW9kZWxzWzBdWydpZCddLFxuICAgICAgICAgICAgXCJmcmVlTW9kZWxcIjogbW9kZWxzXzEuZnJlZU1vZGVsc1swXVsnaWQnXSxcbiAgICAgICAgICAgIFwiYXBpS2V5U2VsZWN0aW9uXCI6ICdzY291dGVyRnJlZUFJJyxcbiAgICAgICAgICAgIFwibmV3TGljZW5zZUtleVwiOiAnJyxcbiAgICAgICAgICAgIFwiY29udGV4dE1lbnVcIjogZmFsc2UsXG4gICAgICAgICAgICBcIm9sbGFtYU1vZGVsXCI6ICdsbGFtYTInLFxuICAgICAgICAgICAgXCJvbGxhbWFBcGlFbmRwb2ludFwiOiAnaHR0cDovL2xvY2FsaG9zdDoxMTQzNCcsXG4gICAgICAgICAgICBcInVzZXJJZFwiOiAnJyAvLyDnlKjmiLcgSURcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpdGVtcztcbiAgICB9KTtcbn1cbmV4cG9ydHMuZ2V0U2V0dGluZ3MgPSBnZXRTZXR0aW5ncztcbmZ1bmN0aW9uIHNhdmVPcHRpb25zKHZhbHVlcykge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIC8vIOiOt+WPlumUruWAvOWvuVxuICAgICAgICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXModmFsdWVzKTtcbiAgICAgICAgLy8g6YGN5Y6G6ZSu5YC85a+5XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGVudHJpZXMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBLZXk6ICR7a2V5fSwgVmFsdWU6ICR7dmFsdWV9YCk7XG4gICAgICAgICAgICB5aWVsZCB3ZWJleHRlbnNpb25fcG9seWZpbGxfMS5kZWZhdWx0LnN0b3JhZ2Uuc3luYy5zZXQoe1xuICAgICAgICAgICAgICAgIFtrZXldOiB2YWx1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5leHBvcnRzLnNhdmVPcHRpb25zID0gc2F2ZU9wdGlvbnM7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3Qgd2ViZXh0ZW5zaW9uX3BvbHlmaWxsXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIndlYmV4dGVuc2lvbi1wb2x5ZmlsbFwiKSk7XG5jb25zdCB1dGlsXzEgPSByZXF1aXJlKFwiLi4vdXRpbFwiKTtcbmNvbnN0IHVuc3BsYXNoX2pzXzEgPSByZXF1aXJlKFwidW5zcGxhc2gtanNcIik7XG5jb25zdCB1dGlsXzIgPSByZXF1aXJlKFwiLi4vT3B0aW9ucy91dGlsXCIpO1xuLy8gaW1wb3J0IHsgbW9kZWxzIH0gZnJvbSAnLi4vb3B0aW9ucy9tb2RlbHMnXG5jb25zdCB1dGlsXzMgPSByZXF1aXJlKFwiLi4vdXRpbFwiKTtcbmNvbnN0IHV0aWxfNCA9IHJlcXVpcmUoXCIuLi91dGlsXCIpO1xuLy8gY29udGVudCBzY3JpcHQg5YWz6Zet56qX5Y+j5pe277yM5bCG5q2k5YC86K6+5Li6IGZhbHNlIOS7peS4reaWreaVsOaNrua4suafk1xuLy8gbGV0IGlzQ29udGludWUgPSB0cnVlXG5sZXQgdXNlcklkO1xudHJ5IHtcbiAgICAoMCwgdXRpbF80LmdldFVzZXJJbmZvKSgpLnRoZW4oKHVzZXJJbmZvKSA9PiB7XG4gICAgICAgIHVzZXJJZCA9IHVzZXJJbmZvLnVzZXJJZDtcbiAgICB9KTtcbn1cbmNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbn1cbmxldCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuLy8g55So5oi35a6J6KOF5oiW6ICF5Y2H57qn5o+S5Lu25oiW6ICF5omL5Yqo6YeN5paw6L295YWl5o+S5Lu25pe25Lya6Kem5Y+R5q2k5LqL5Lu2XG53ZWJleHRlbnNpb25fcG9seWZpbGxfMS5kZWZhdWx0LnJ1bnRpbWUub25JbnN0YWxsZWQuYWRkTGlzdGVuZXIoZnVuY3Rpb24gKCkge1xuICAgIC8vIGFtcGxpdHVkZS50cmFjayhcImluc3RhbGxcIilcbn0pO1xuLy8g5Y246L295o+S5Lu25ZCO5byV5a+85aGr5YaZ5Y246L295Y6f5Zug77yM5biu5Yqp5Lqn5ZOB5LyY5YyWXG53ZWJleHRlbnNpb25fcG9seWZpbGxfMS5kZWZhdWx0LnJ1bnRpbWUuc2V0VW5pbnN0YWxsVVJMKFwiaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZm9ybXMvZC9lLzFGQUlwUUxTZG9iR1FOM08wQ2s0ZlZyZ2Z2UlpNbWUzZGUtMk9hRXAxcEZ0aWJaa1Uwa29jMzd3L3ZpZXdmb3JtP3VzcD1zZl9saW5rXCIpO1xuLy8g54K55Ye75Y+z5LiK6KeS5o+S5Lu25oyJ6ZKuXG53ZWJleHRlbnNpb25fcG9seWZpbGxfMS5kZWZhdWx0LmFjdGlvbi5vbkNsaWNrZWQuYWRkTGlzdGVuZXIoZnVuY3Rpb24gKHRhYikge1xuICAgIGNvbnNvbGUubG9nKCfngrnlh7vmj5Lku7bmjInpkq4nKTtcbiAgICAvLyBicm93c2VyLnJ1bnRpbWUub3Blbk9wdGlvbnNQYWdlKCk7IC8vIOaJk+W8gOaJqeWxleeahE9wdGlvbnPpobXpnaJcbn0pO1xuLy8g5Yib5bu65Y+z6ZSu6I+c5Y2VXG53ZWJleHRlbnNpb25fcG9seWZpbGxfMS5kZWZhdWx0LmNvbnRleHRNZW51cy5jcmVhdGUoe1xuICAgIGlkOiBcIjJcIixcbiAgICB0aXRsZTogXCJSdW4gbGFzdCBwcm9tcHRcIixcbiAgICBjb250ZXh0czogW1wic2VsZWN0aW9uXCJdLFxufSwgKCkgPT4ge1xuICAgIHdlYmV4dGVuc2lvbl9wb2x5ZmlsbF8xLmRlZmF1bHQucnVudGltZS5sYXN0RXJyb3I7XG59KTtcbndlYmV4dGVuc2lvbl9wb2x5ZmlsbF8xLmRlZmF1bHQuY29udGV4dE1lbnVzLmNyZWF0ZSh7XG4gICAgaWQ6IFwiMVwiLFxuICAgIHRpdGxlOiBcIk9wZW5cIixcbiAgICBjb250ZXh0czogW1wic2VsZWN0aW9uXCJdLFxufSwgKCkgPT4ge1xuICAgIHdlYmV4dGVuc2lvbl9wb2x5ZmlsbF8xLmRlZmF1bHQucnVudGltZS5sYXN0RXJyb3I7XG59KTtcbi8vIOWPs+mUruiPnOWNleeCueWHu+S6i+S7tlxud2ViZXh0ZW5zaW9uX3BvbHlmaWxsXzEuZGVmYXVsdC5jb250ZXh0TWVudXMub25DbGlja2VkLmFkZExpc3RlbmVyKGZ1bmN0aW9uIChpbmZvLCBfdGFiKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgY29uc3QgcnVuUHJvbXB0ID0gaW5mby5tZW51SXRlbUlkID09PSAnMicgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIHNlbmRNZXNzYWdlVG9Db250ZW50KHJ1blByb21wdCk7XG4gICAgfSk7XG59KTtcbi8vIOebkeWQrCB0YWIg5Y+Y5YyWXG53ZWJleHRlbnNpb25fcG9seWZpbGxfMS5kZWZhdWx0LnRhYnMub25VcGRhdGVkLmFkZExpc3RlbmVyKGZ1bmN0aW9uICh0YWJJZCwgY2hhbmdlSW5mbywgdGFiKSB7XG4gICAgaWYgKGNoYW5nZUluZm8udXJsKSB7XG4gICAgICAgIGlmIChjaGFuZ2VJbmZvLnVybC5pbmRleE9mKCd5b3V0dWJlLmNvbScpKSB7XG4gICAgICAgICAgICB3ZWJleHRlbnNpb25fcG9seWZpbGxfMS5kZWZhdWx0LnRhYnMuc2VuZE1lc3NhZ2UodGFiSWQsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAndGFiT25VcGRhdGVkJywgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGVJbllvdVR1YmU6IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuLy8g55uR5ZCs5b+r5o236ZSuXG53ZWJleHRlbnNpb25fcG9seWZpbGxfMS5kZWZhdWx0LmNvbW1hbmRzLm9uQ29tbWFuZC5hZGRMaXN0ZW5lcihmdW5jdGlvbiAoY29tbWFuZCkge1xuICAgIGlmIChjb21tYW5kID09PSAnUnVuTGFzdFByb21wdCcpIHtcbiAgICAgICAgLy8g5omn6KGM55u45YWz5Luj56CBXG4gICAgICAgIHNlbmRNZXNzYWdlVG9Db250ZW50KCk7XG4gICAgfVxuICAgIGlmIChjb21tYW5kID09PSAnT3BlbicpIHtcbiAgICAgICAgLy8g5omn6KGM55u45YWz5Luj56CBXG4gICAgICAgIHNlbmRNZXNzYWdlVG9Db250ZW50KGZhbHNlKTtcbiAgICB9XG59KTtcbmxldCBwb3B1cFBvcnQ7XG4vLyDplb/ov57mjqXvvIzkuLvopoHlpITnkIYgR1BUIOaVsOaNrlxud2ViZXh0ZW5zaW9uX3BvbHlmaWxsXzEuZGVmYXVsdC5ydW50aW1lLm9uQ29ubmVjdC5hZGRMaXN0ZW5lcihwb3J0ID0+IHtcbiAgICAvLyDmlLbliLAgY29udGVudCBzY3JpcHQg5raI5oGvXG4gICAgY29uc29sZS5sb2coJ+i/nuaOpeS4rS0tLS0tLS0tLS0tLScpO1xuICAgIGNvbnNvbGUubG9nKHBvcnQpO1xuICAgIGlmIChwb3J0Lm5hbWUgPT09ICdmcm9tUG9wdXBDYXJkJykge1xuICAgICAgICBwb3B1cFBvcnQgPSBwb3J0O1xuICAgICAgICBjb25zb2xlLmxvZyhcInBvcnQubmFtZSA9PT0gJ2Zyb21Qb3B1cENhcmQnXCIpO1xuICAgIH1cbiAgICAvLyBhbXBsaXR1ZGUuaW5pdChwcm9jZXNzLmVudi5BTVBMSVRVREVfS0VZIGFzIHN0cmluZyk7XG4gICAgLy8gYW1wbGl0dWRlLnRyYWNrKCdleGVjdXRpdmVQcm9tcHQnKTtcbiAgICAvLyDmjqXmlLYgY29udGVudCBzY3JpcHQg55qE5raI5oGvXG4gICAgcG9ydC5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoKG1zZykgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfmjqXmlLbmtojmga/vvJonLCBtc2cpO1xuICAgICAgICAvLyDlgZzmraLmuLLmn5PmlbDmja5cbiAgICAgICAgaWYgKG1zZy50eXBlID09PSAnU3RvcFRoZUNvbnZlcnNhdGlvbicpIHtcbiAgICAgICAgICAgIC8vIGlzQ29udGludWUgPSBmYWxzZVxuICAgICAgICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtc2cudHlwZSA9PT0gJ2dldEtub3dsZWRnZScpIHtcbiAgICAgICAgICAgIC8vIOiOt+WPliBBUEkgS2V5IOetieWtmOWCqOeahOaVsOaNrlxuICAgICAgICAgICAgLy8gbGV0IG9wZW5BcGlLZXk6IHN0cmluZywgYXBpS2V5U2VsZWN0aW9uOiBzdHJpbmcsIG1vZGVsOiBzdHJpbmcsIGxpY2Vuc2VLZXk6IHN0cmluZywgY3VycmVudExhbmd1YWdlLCBvcGVuQXBpRW5kcG9pbnQ6IHN0cmluZywgdGFyZ2V0TGFuZ3VhZ2UgPSAnJ1xuICAgICAgICAgICAgKDAsIHV0aWxfMi5nZXRTZXR0aW5ncykoKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAvLyDor7fmsYIgIEdQVCDmlbDmja5cbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgICAgICAgICAvLyBsZXQgbWVzc2FnZXMgPSBtc2cubWVzc2FnZXNcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0QUlQYXJhbWV0ZXI6Jyk7XG4gICAgICAgICAgICAgICAgKDAsIHV0aWxfNC5nZXRBSVBhcmFtZXRlcikobXNnLm1lc3NhZ2VzKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcGVuQXBpRW5kcG9pbnQgPSAoX2EgPSByZXN1bHQuZGF0YSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNoYXRDb21wbGV0aW9ucy51cmw7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LmRhdGEgfHwgb3BlbkFwaUVuZHBvaW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcnQucG9zdE1lc3NhZ2UoeyAndHlwZSc6ICdzZW5kR1BURGF0YScsICdzdGF0dXMnOiAnaW52YWxpZF9hcGlfa2V5JywgJ2NvbnRlbnQnOiAn8J+lsiBBUEkgS2V5IGVycm9yLiBQbGVhc2UgbW9kaWZ5IGFuZCB0cnkgYWdhaW4uLicgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYm9keSA9IHJlc3VsdC5kYXRhLmNoYXRDb21wbGV0aW9ucy5ib2R5O1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYm9keS5tZXNzYWdlcyA9IG1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbml0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogcmVzdWx0LmRhdGEuY2hhdENvbXBsZXRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgQXBpVHlwZSA9IHJlc3VsdC5hcGlLZXlTZWxlY3Rpb247XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQXBpVHlwZTonKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKEFwaVR5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2JvZHk6Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhib2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcGlUeXBlID09PSAnY2hhdEdQVFdlYicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3J0LnBvc3RNZXNzYWdlKHsgJ3R5cGUnOiAnc2VuZEdQVERhdGEnLCAnc3RhdHVzJzogJ2RvbmUnLCAnY29udGVudCc6ICfimqDvuI8gQ2hhdEdQVCBXZWIgaXMgdGVtcG9yYXJpbHkgbm90IHN1cHBvcnRlZC4gUGxlYXNlIHN3aXRjaCB0byBhbm90aGVyIG1ldGhvZC4nIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKDAsIHV0aWxfMy5mZXRjaFNTRSkob3BlbkFwaUVuZHBvaW50LCBpbml0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTWVzc2FnZTogKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhuaOpeaUtuWIsOeahOaVsOaNrlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKEFwaVR5cGUgPT09ICdjaGF0R1BUV2ViJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBpZiAoJ2lzX2NvbXBsZXRpb24nIGluIGRhdGEgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBwb3J0LnBvc3RNZXNzYWdlKHsgJ3R5cGUnOiAnc2VuZEdQVERhdGEnLCAnQXBpVHlwZSc6IEFwaVR5cGUsICdzdGF0dXMnOiAncHJvY2VzcycsICdjb250ZW50JzogZGF0YS5tZXNzYWdlLmNvbnRlbnQucGFydHNbMF0gfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgaWYgKGRhdGEuY2hvaWNlc1swXS5maW5pc2hfcmVhc29uICE9PSAnc3RvcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBwb3J0LnBvc3RNZXNzYWdlKHsgJ3R5cGUnOiAnc2VuZEdQVERhdGEnLCAnQXBpVHlwZSc6IEFwaVR5cGUsICdzdGF0dXMnOiAncHJvY2VzcycsICdjb250ZW50JzogZGF0YS5jaG9pY2VzWzBdLmRlbHRhLmNvbnRlbnQgPyBkYXRhLmNob2ljZXNbMF0uZGVsdGEuY29udGVudCA6ICcnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmNob2ljZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbmlzaF9yZWFzb24gPSBkYXRhLmNob2ljZXNbMF0uZmluaXNoX3JlYXNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXBpVHlwZSA9PT0gJ29sbGFtYScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9ydC5wb3N0TWVzc2FnZSh7ICd0eXBlJzogJ3NlbmRHUFREYXRhJywgJ0FwaVR5cGUnOiBBcGlUeXBlLCAnc3RhdHVzJzogJ3Byb2Nlc3MnLCAnY29udGVudCc6IGRhdGEgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmluaXNoX3JlYXNvbiAhPT0gJ3N0b3AnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3J0LnBvc3RNZXNzYWdlKHsgJ3R5cGUnOiAnc2VuZEdQVERhdGEnLCAnQXBpVHlwZSc6IEFwaVR5cGUsICdzdGF0dXMnOiAncHJvY2VzcycsICdjb250ZW50JzogZGF0YS5jaG9pY2VzWzBdLmRlbHRhLmNvbnRlbnQgPyBkYXRhLmNob2ljZXNbMF0uZGVsdGEuY29udGVudCA6ICcnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoQXBpVHlwZSA9PT0gJ3Njb3V0ZXJGcmVlQUknIHx8IEFwaVR5cGUgPT09ICdsaWNlbnNlS2V5JykgJiYgZmluaXNoX3JlYXNvbiA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9ydC5wb3N0TWVzc2FnZSh7ICd0eXBlJzogJ3NlbmRHUFREYXRhJywgJ0FwaVR5cGUnOiBBcGlUeXBlLCAnc3RhdHVzJzogJ3Byb2Nlc3MnLCAnY29udGVudCc6IGDwn6WyZXJyb3I6ICR7ZGF0YS5jaG9pY2VzWzBdLmVycm9yLm1lc3NhZ2V9YCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FbmQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhiBTU0Ug6L+e5o6l57uT5p2f55qE6YC76L6RXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3J0LnBvc3RNZXNzYWdlKHsgJ3R5cGUnOiAnc2VuZEdQVERhdGEnLCAnc3RhdHVzJzogJ2RvbmUnLCAnY29udGVudCc6ICcnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yOiBlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlpITnkIbplJnor6/nmoTpgLvovpFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluZGV4T2YoJ2Fib3J0ZWQnKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5byA5ZCv5paw55qE6K+35rGC77yM5Lit5pat5pen6K+35rGCXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aXBzID0gJ/CfpbJTb3JyeSwgYW4gZXJyb3IgaGFwcGVuZWQsIHBsZWFzZSByZXRyeS4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcnQucG9zdE1lc3NhZ2UoeyAndHlwZSc6ICdzZW5kR1BURGF0YScsICdzdGF0dXMnOiAnZXJyb3InLCAnY29udGVudCc6IHRpcHMgKyAnKCcgKyBlcnJvci5tZXNzYWdlICsgJyknLCAnY29kZSc6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5pivIENoYXRHUFQgV2ViIOaooeW8j+eahCA0MDEg6ZSZ6K+v77yM5YiZ5pu05pawIHRva2Vu77yM54S25ZCO5byV5a+855So5oi36YeN6K+VXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDAsIHV0aWxfMy5nZXRDaGF0R1BUU2Vzc2lvbikoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIEFwaVR5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHBvcnQucG9zdE1lc3NhZ2UoeyAndHlwZSc6ICdzZW5kR1BURGF0YScsICdzdGF0dXMnOiAnZXJyb3InLCAnY29udGVudCc6IGVycm9yID8gJ/CfpbIgJyArIGVycm9yIDogJ/CfpbIgU29tZXRoaW5nIHdlbnQgd3JvbmcsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1zZy50eXBlID09PSAnZ2V0RGljdGlvbmFyeURhdGEnKSB7XG4gICAgICAgICAgICAvLyDojrflj5bor43lhbjmlbDmja5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkICgwLCB1dGlsXzEuZ2V0RGljdGlvbmFyeURhdGEpKG1zZy5rZXlXb3JkKTtcbiAgICAgICAgICAgIHBvcnQucG9zdE1lc3NhZ2UocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobXNnLnR5cGUgPT09ICdVUERBVEVfUE9QVVBfQ0FSRCcpIHtcbiAgICAgICAgICAgIHBvcHVwUG9ydC5wb3N0TWVzc2FnZShtc2cpO1xuICAgICAgICAgICAgLy8gcG9ydC5wb3N0TWVzc2FnZShtc2cpO1xuICAgICAgICB9XG4gICAgfSkpO1xufSk7XG4vLyDnm5HlkKzkuIDmrKHmgKfmtojmga9cbndlYmV4dGVuc2lvbl9wb2x5ZmlsbF8xLmRlZmF1bHQucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoaGFuZGxlTWVzc2FnZSk7XG5mdW5jdGlvbiBoYW5kbGVNZXNzYWdlKHJlcXVlc3QsIHNlbmRlciwgc2VuZFJlc3BvbnNlKSB7XG4gICAgY29uc29sZS5sb2coXCJNZXNzYWdlIGZyb20gdGhlIGNvbnRlbnQgc2NyaXB0OiBcIiArXG4gICAgICAgIHJlcXVlc3QudHlwZSk7XG4gICAgLy8gRGVmaW5lIHNlbmRSZXNwb25zZSBhcyBhbiBhc3luYyBmdW5jdGlvblxuICAgIGNvbnN0IGFzeW5jU2VuZFJlc3BvbnNlID0gKHJlc3BvbnNlKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB5aWVsZCBzZW5kUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAocmVxdWVzdC50eXBlID09PSAnZ2V0VW5zcGxhc2hJbWFnZXMnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdiYWNrZ3JvdW5kIGdldFVuc3BsYXNoSW1hZ2VzOicpO1xuICAgICAgICAvLyDojrflj5blm77niYdcbiAgICAgICAgaWYgKHJlcXVlc3Qua2V5V29yZCkge1xuICAgICAgICAgICAgLy8gcG9ydC5wb3N0TWVzc2FnZSh7ICd0eXBlJzogJ3NlbmRJbWdEYXRhJywgJ3N0YXR1cyc6ICdlbmQnLCAnaW1ncyc6IGltZ3MgfSlcbiAgICAgICAgICAgICgwLCB1dGlsXzEudW5zcGxhc2hTZWFyY2hQaG90b3MpKHByb2Nlc3MuZW52LlVOU1BMQVNIX0FQSV9LRVksIHJlcXVlc3Qua2V5V29yZCkudGhlbigoaW1ncykgPT4ge1xuICAgICAgICAgICAgICAgIC8vIHBvcnQucG9zdE1lc3NhZ2UoeyAndHlwZSc6ICdzZW5kSW1nRGF0YScsICdzdGF0dXMnOiAnZW5kJywgJ2ltZ3MnOiBpbWdzIH0pXG4gICAgICAgICAgICAgICAgYXN5bmNTZW5kUmVzcG9uc2UoeyB0eXBlOiAnc2VuZEltZ0RhdGEnLCBzdGF0dXM6ICdlbmQnLCAnaW1ncyc6IGltZ3MgfSk7XG4gICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHJlcXVlc3QudHlwZSA9PT0gJ2FkZE5vdGUnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdhZGROb3RlJyk7XG4gICAgICAgIC8vIFVuc3BsYXNoXG4gICAgICAgIGNvbnN0IHVuc3BsYXNoID0gKDAsIHVuc3BsYXNoX2pzXzEuY3JlYXRlQXBpKSh7XG4gICAgICAgICAgICBhY2Nlc3NLZXk6IHByb2Nlc3MuZW52LlVOU1BMQVNIX0FQSV9LRVlcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChyZXF1ZXN0Lm1lc3NhZ2VzLnVuc3BsYXNoX2Rvd25sb2FkX2xvY2F0aW9uICE9PSB1bmRlZmluZWQgJiYgcmVxdWVzdC5tZXNzYWdlcy51bnNwbGFzaF9kb3dubG9hZF9sb2NhdGlvbiAhPT0gJycpIHtcbiAgICAgICAgICAgIHVuc3BsYXNoLnBob3Rvcy50cmFja0Rvd25sb2FkKHsgZG93bmxvYWRMb2NhdGlvbjogcmVxdWVzdC5tZXNzYWdlcy51bnNwbGFzaF9kb3dubG9hZF9sb2NhdGlvbiwgfSkudGhlbigocmVzdWx0KSA9PiBjb25zb2xlLmxvZyhyZXN1bHQpKTtcbiAgICAgICAgfVxuICAgICAgICAoMCwgdXRpbF8xLmFua2lBY3Rpb24pKHJlcXVlc3QubWVzc2FnZXMuYW5raV9hY3Rpb25fdHlwZSwgNiwgcmVxdWVzdC5tZXNzYWdlcy5hbmtpX2FyZ3VtZW50cykudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAvLyDlj43ppojlpITnkIbnu5PmnpxcbiAgICAgICAgICAgIGFzeW5jU2VuZFJlc3BvbnNlKHsgdHlwZTogJ2FkZFRvQW5raScsIHJlc3VsdDogJ3N1Y2Nlc3MnLCBkYXRhOiByZXN1bHQucmVzdWx0LCBlcnJvcjogcmVzdWx0LmVycm9yIH0pO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICBhc3luY1NlbmRSZXNwb25zZSh7IHR5cGU6ICdhZGRUb0Fua2knLCByZXN1bHQ6ICdmYWlsdXJlJywgZXJyb3I6IGVycm9yLmVycm9yIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gUmV0dXJuIHRydWUgdG8gaW5mb3JtIHNlbmRSZXNwb25zZSB0aGF0IHlvdSB3aWxsIGJlIGNhbGxpbmcgaXQgYXN5bmNocm9ub3VzbHlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIOiOt+WPlueUqOaIt+iuvue9rueahOeJjOe7hOWSjOaooeadv1xuICAgIGlmIChyZXF1ZXN0LnR5cGUgPT09ICdzZXRNb2RlbCcpIHtcbiAgICAgICAgY29uc3QgaXNBbmtpU3BhY2UgPSByZXF1ZXN0Lm1lc3NhZ2VzLmlzQW5raVNwYWNlO1xuICAgICAgICAvLyDojrflj5YgRGVja05hbWVcbiAgICAgICAgKDAsIHV0aWxfMS5nZXREZWZhdWx0RGVja05hbWUpKCkudGhlbigocmVzdWx0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBsZXQgZGVmYXVsdERlY2tOYW1lID0gcmVzdWx0LmRlZmF1bHREZWNrTmFtZTtcbiAgICAgICAgICAgIGlmIChkZWZhdWx0RGVja05hbWUgPT09ICcnIHx8IGRlZmF1bHREZWNrTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdERlY2tOYW1lID0gJ0RlZmF1bHQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8g6I635Y+W55So5oi355qE5omA5pyJIG1vZGVsIOWQjeensFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RlbE5hbWVzID0geWllbGQgKDAsIHV0aWxfMS5hbmtpQWN0aW9uKSgnbW9kZWxOYW1lcycsIDYpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtb2RlbE5hbWVzOicpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1vZGVsTmFtZXMpO1xuICAgICAgICAgICAgICAgIGlmICghbW9kZWxOYW1lcy5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RlbHMgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21vZGVsTmFtZSc6ICdTY291dGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2FyZFRlbXBsYXRlcyc6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiAnQ2FyZDEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Zyb250JzogJ3t7RnJvbnR9fScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQmFjayc6IGB7e0Zyb250fX1cbiAgICAgICAgICAgICAgICAgIDxociBpZD1hbnN3ZXI+XG4gICAgICAgICAgICAgICAgICB7e0JhY2t9fWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2luT3JkZXJGaWVsZHMnOiBbXCJGcm9udFwiLCBcIkJhY2tcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lzQW5raVNwYWNlJzogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21vZGVsTmFtZSc6ICdTY291dGVyIENsb3plIFRleHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjYXJkVGVtcGxhdGVzJzogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbmFtZSc6ICdDYXJkMicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRnJvbnQnOiAne3tjbG96ZTpUZXh0fX0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0JhY2snOiBge3tjbG96ZTpUZXh0fX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnI+e3tNb3JlfX1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpbk9yZGVyRmllbGRzJzogW1wiVGV4dFwiLCBcIk1vcmVcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lzQW5raVNwYWNlJzogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAvLyDpgY3ljobmqKHlnovmlbDnu4TvvIzlpoLmnpzlrZjlnKjliJnov5Tlm57nu5kgY29udGVudO+8jOWmguaenOS4jeWtmOWcqOWImeaWsOW7ulxuICAgICAgICAgICAgICAgICAgICAvLyDnlKjkuo7lrZjlgqggbW9kZWwg55u45YWz55qE5pWw5o2u77yM6L+U5Zue57uZIGNvbnRlbnQg5bCG56yU6K6w5re75Yqg5YiwIEFua2lcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1vZGVsRGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvbWlzZXMgPSBtb2RlbHMubWFwKChtb2RlbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kZWxOYW1lcy5yZXN1bHQuaW5jbHVkZXMobW9kZWwubW9kZWxOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzmnIkgU2NvdXRlciBNb2RlbCDliJnojrflj5YgTW9kZWwg55qE5a2X5q61XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLCB1dGlsXzEuYW5raUFjdGlvbikoJ21vZGVsRmllbGROYW1lcycsIDYsIHsgJ21vZGVsTmFtZSc6IG1vZGVsLm1vZGVsTmFtZSB9KS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmVzdWx0Lmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlrZfmrrXlsJHkuo4gMiDkuKrml7bml6Dms5Xmt7vliqDnrJTorrDvvIzlvJXlr7znlKjmiLfkv67mlLlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbERhdGEucHVzaCh7ICdtb2RlbE5hbWUnOiBtb2RlbC5tb2RlbE5hbWUsICdmaWVsZDEnOiByZXN1bHQucmVzdWx0WzBdLCAnZmllbGQyJzogbnVsbCwgJ2lzQW5raVNwYWNlJzogbW9kZWwuaXNBbmtpU3BhY2UgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbERhdGEucHVzaCh7ICdtb2RlbE5hbWUnOiBtb2RlbC5tb2RlbE5hbWUsICdmaWVsZDEnOiByZXN1bHQucmVzdWx0WzBdLCAnZmllbGQyJzogcmVzdWx0LnJlc3VsdFsxXSwgJ2lzQW5raVNwYWNlJzogbW9kZWwuaXNBbmtpU3BhY2UgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7IC8vIFJlc29sdmUgdGhlIFByb21pc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzmsqHmnIkgU2NvdXRlciDpu5jorqTnmoQgTW9kZWzvvIzliJnliJvlu7pcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDAsIHV0aWxfMS5hbmtpQWN0aW9uKSgnY3JlYXRlTW9kZWwnLCA2LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbW9kZWxOYW1lJzogbW9kZWwubW9kZWxOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2luT3JkZXJGaWVsZHMnOiBtb2RlbC5pbk9yZGVyRmllbGRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NhcmRUZW1wbGF0ZXMnOiBtb2RlbC5jYXJkVGVtcGxhdGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lzQ2xvemUnOiBtb2RlbC5pc0Fua2lTcGFjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjc3MnOiB1dGlsXzMuY2FyZFN0eWxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbERhdGEucHVzaCh7ICdtb2RlbE5hbWUnOiBtb2RlbC5tb2RlbE5hbWUsICdmaWVsZDEnOiByZXN1bHQucmVzdWx0LmZsZHNbMF0ubmFtZSwgJ2ZpZWxkMic6IHJlc3VsdC5yZXN1bHQuZmxkc1sxXS5uYW1lLCAnaXNBbmtpU3BhY2UnOiBtb2RlbC5pc0Fua2lTcGFjZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsgLy8gUmVzb2x2ZSB0aGUgUHJvbWlzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIOetieW+heaJgOaciSBQcm9taXNlIOWujOaIkFxuICAgICAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtb2RlbERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmNTZW5kUmVzcG9uc2UoeyB0eXBlOiAnc2V0TW9kZWwnLCByZXN1bHQ6ICdzdWNjZXNzJywgZGF0YTogeyAnZGVmYXVsdERlY2tOYW1lJzogZGVmYXVsdERlY2tOYW1lLCAnbW9kZWxEYXRhJzogbW9kZWxEYXRhIH0sIGVycm9yOiByZXN1bHQuZXJyb3IgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBhc3luY1NlbmRSZXNwb25zZSh7IHR5cGU6ICdzZXRNb2RlbCcsIHJlc3VsdDogJ2ZhaWx1cmUnLCBlcnJvcjogZXJyb3IgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gYnJvd3Nlci5zdG9yYWdlLnN5bmMuZ2V0KHsgJ2Fua2lEZWNrTmFtZSc6ICdEZWZhdWx0JyB9KS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgLy8gfSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChyZXF1ZXN0LnR5cGUgPT09ICdndWlFZGl0Tm90ZScpIHtcbiAgICAgICAgKDAsIHV0aWxfMS5hbmtpQWN0aW9uKShyZXF1ZXN0Lm1lc3NhZ2VzLmFua2lfYWN0aW9uX3R5cGUsIDYsIHJlcXVlc3QubWVzc2FnZXMuYW5raV9hcmd1bWVudHMpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgLy8g5Y+N6aaI5aSE55CG57uT5p6cXG4gICAgICAgICAgICBhc3luY1NlbmRSZXNwb25zZSh7IHR5cGU6ICdndWlFZGl0Tm90ZScsIHJlc3VsdDogJ3N1Y2Nlc3MnLCBkYXRhOiByZXN1bHQucmVzdWx0LCBlcnJvcjogcmVzdWx0LmVycm9yIH0pO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICBhc3luY1NlbmRSZXNwb25zZSh7IHR5cGU6ICdndWlFZGl0Tm90ZScsIHJlc3VsdDogJ2ZhaWx1cmUnLCBlcnJvcjogZXJyb3IuZXJyb3IgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBSZXR1cm4gdHJ1ZSB0byBpbmZvcm0gc2VuZFJlc3BvbnNlIHRoYXQgeW91IHdpbGwgYmUgY2FsbGluZyBpdCBhc3luY2hyb25vdXNseVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHJlcXVlc3QudHlwZSA9PT0gJ2Fua2lBY3Rpb24nKSB7XG4gICAgICAgICgwLCB1dGlsXzEuYW5raUFjdGlvbikocmVxdWVzdC5tZXNzYWdlcy5hbmtpX2FjdGlvbl90eXBlLCA2LCByZXF1ZXN0Lm1lc3NhZ2VzLmFua2lfYXJndW1lbnRzKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIC8vIOWPjemmiOWkhOeQhue7k+aenFxuICAgICAgICAgICAgYXN5bmNTZW5kUmVzcG9uc2UocmVzdWx0KTtcbiAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBhc3luY1NlbmRSZXNwb25zZShlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHJlcXVlc3QudHlwZSA9PT0gJ2FtcGxpdHVkZVRyYWNrJykge1xuICAgICAgICBmZXRjaCgnaHR0cHM6Ly9hcGkuYW1wbGl0dWRlLmNvbS8yL2h0dHBhcGknLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBhcGlfa2V5OiBwcm9jZXNzLmVudi5BTVBMSVRVREVfS0VZLFxuICAgICAgICAgICAgICAgIGV2ZW50czogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudF90eXBlOiByZXF1ZXN0Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiBjb25zb2xlLmxvZyhkYXRhKSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOicsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAocmVxdWVzdC50eXBlID09PSAnZ2V0VXNlclN0YXR1cycpIHtcbiAgICAgICAgLy8g6I635Y+W55So5oi355qEIExpY2Vuc2UgS2V5XG4gICAgICAgICgwLCB1dGlsXzIuZ2V0U2V0dGluZ3MpKCkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsaWNlbnNlS2V5ID0gcmVzdWx0LmxpY2Vuc2VLZXk7XG4gICAgICAgICAgICAvLyDojrflj5YgS2V5IOeahOS9memine+8jOacieS9memineWImeWPr+W8gOWQr+mrmOe6p+WKn+iDvVxuICAgICAgICAgICAgY29uc3QgZGF0YSA9ICgwLCB1dGlsXzQuZ2V0QmFsYW5jZSkobGljZW5zZUtleSk7XG4gICAgICAgICAgICBhc3luY1NlbmRSZXNwb25zZShkYXRhKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAocmVxdWVzdC50eXBlID09PSAnZ2V0VXNlckluZm8nKSB7XG4gICAgICAgICgwLCB1dGlsXzQuZ2V0VXNlckluZm8pKCkudGhlbigodXNlckluZm8pID0+IHtcbiAgICAgICAgICAgIGFzeW5jU2VuZFJlc3BvbnNlKHVzZXJJbmZvKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAocmVxdWVzdC50eXBlID09PSAnZ2VuZXJhdGlvbnNJbWFnZXMnKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSAoMCwgdXRpbF80LmdlbmVyYXRpb25zSW1hZ2VzKShyZXF1ZXN0LmRhdGEucHJvbXB0KTtcbiAgICAgICAgYXN5bmNTZW5kUmVzcG9uc2UoZGF0YSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAocmVxdWVzdC50eXBlID09PSAnVVBEQVRFX1BPUFVQX0NBUkQnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzZW5kTWVzc2FnZScpO1xuICAgICAgICBwb3B1cFBvcnQucG9zdE1lc3NhZ2UocmVxdWVzdCk7XG4gICAgfVxufVxuY29uc3Qgc2VuZE1lc3NhZ2VUb0NvbnRlbnQgPSAocnVuUHJvbXB0KSA9PiB7XG4gICAgbGV0IG5lZWRUb1J1blByb21wdCA9IHJ1blByb21wdDtcbiAgICBpZiAobmVlZFRvUnVuUHJvbXB0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmVlZFRvUnVuUHJvbXB0ID0gdHJ1ZTtcbiAgICB9XG4gICAgd2ViZXh0ZW5zaW9uX3BvbHlmaWxsXzEuZGVmYXVsdC50YWJzLnF1ZXJ5KHsgYWN0aXZlOiB0cnVlLCBjdXJyZW50V2luZG93OiB0cnVlIH0pLnRoZW4oKHRhYnMpID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBhY3RpdmVUYWIgPSB0YWJzWzBdO1xuICAgICAgICBsZXQgdElEID0gKF9hID0gYWN0aXZlVGFiLmlkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAtMTtcbiAgICAgICAgaWYgKGFjdGl2ZVRhYiAmJiBhY3RpdmVUYWIuaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGV0IGIgPSB3ZWJleHRlbnNpb25fcG9seWZpbGxfMS5kZWZhdWx0LnRhYnMuc2VuZE1lc3NhZ2UodElELCB7IHR5cGU6ICdvcGVuLXNjb3V0ZXInLCBydW5Qcm9tcHQ6IG5lZWRUb1J1blByb21wdCB9KTtcbiAgICAgICAgICAgIC8vIOW3suefpeaDheWGte+8muWImuWuieijheaPkuS7tuaXtuebtOaOpeS9v+eUqOS8muaKpemUme+8iOWIt+aWsOmhtemdouWQjuS9v+eUqOWImeato+W4uO+8ie+8jOatpOaXtumcgOimgei9veWFpSBjb250ZW50X3NjcmlwdC5qcyDmiY3ooYxcbiAgICAgICAgICAgIC8vIGIuY2F0Y2goZSA9PiB7XG4gICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgLy8gICBjb25zb2xlLmxvZygnY2F0Y2gnKTtcbiAgICAgICAgICAgIC8vICAgYnJvd3Nlci5zY3JpcHRpbmcuZXhlY3V0ZVNjcmlwdCh7XG4gICAgICAgICAgICAvLyAgICAgdGFyZ2V0OiB7IHRhYklkOiB0SUQgfSxcbiAgICAgICAgICAgIC8vICAgICBmaWxlczogW1wianMvdmVuZG9yLmpzXCIsIFwianMvY29udGVudF9zY3JpcHQuanNcIl0sXG4gICAgICAgICAgICAvLyAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCdjaHJvbWUuc2NyaXB0aW5nLmV4ZWN1dGVTY3JpcHQnKTtcbiAgICAgICAgICAgIC8vICAgfSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAvLyAgICAgYnJvd3Nlci50YWJzLnNlbmRNZXNzYWdlKHRJRCwgeyB0eXBlOiAnb3Blbi1zY291dGVyJyB9KVxuICAgICAgICAgICAgLy8gICB9KVxuICAgICAgICAgICAgLy8gfSlcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmZldGNoY3VycmVudExhbmd1YWdlID0gZXhwb3J0cy5sYW5ndWFnZUNvZGVzID0gZXhwb3J0cy5sYW5nID0gdm9pZCAwO1xuY29uc3Qgd2ViZXh0ZW5zaW9uX3BvbHlmaWxsXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIndlYmV4dGVuc2lvbi1wb2x5ZmlsbFwiKSk7XG4vLyDlpJror63oqIDkv6Hmga9cbmV4cG9ydHMubGFuZyA9IHtcbiAgICAnQXJhYmljJzoge1xuICAgICAgICAnbmFtZSc6ICfYp9mE2LnYsdio2YrYqScsXG4gICAgICAgICdpZCc6ICdBcmFiaWMnLFxuICAgICAgICAnUHJvbXB0MSc6IHtcbiAgICAgICAgICAgICdleHBsYW5hdGlvbic6ICfYp9iz2KrYrtiv2KfZhSDYp9mE2YTYutipINin2YTYudix2KjZitipINmE2KrZgdiz2YrYsSDZhdi52YbZiSDYp9mE2YPZhNmF2KfYqiDZiNiv2YjYsdmH2Kcg2KfZhNmG2K3ZiNmKINmB2Yog2KfZhNis2YXZhNipJ1xuICAgICAgICB9LFxuICAgICAgICAnUHJvbXB0Mic6IHtcbiAgICAgICAgICAgICd0cmFuc2xhdGUnOiAn2KrYsdis2YXYqSDYp9mE2KzZhdmEINil2YTZiSDYp9mE2LnYsdio2YrYqScsXG4gICAgICAgICAgICAnZXhwbGFuYXRpb24nOiAn2LTYsditINin2YTZhdi52LHZgdipINin2YTZhtit2YjZitipJ1xuICAgICAgICB9LFxuICAgICAgICAnUHJvbXB0Myc6IHtcbiAgICAgICAgICAgICd2YWxpZGF0aW9uJzogJ9io2YjYtdmB2YMg2K7YqNmK2LHZi9inINmB2Yog2KfZhNmE2LrYqdiMINmK2LHYrNmJINin2YTYqtit2YLZgiDZhdmGINin2YTYrNmF2YQg2KfZhNiq2Yog2YLYr9mF2KrZh9inLiDYpdiw2Kcg2YPYp9mG2Kog2KfZhNis2YXZhNipINi62YrYsSDYtdit2YrYrdip2Iwg2YHYo9i02LEg2LnZhNmJINin2YTYrti32KMg2KjYp9mE2YTYutipINin2YTYudix2KjZitipINmI2YLYr9mFINin2YTYrNmF2YTYqSDYp9mE2YXYtdit2K3YqS4g2KfZhNis2YXZhNipOidcbiAgICAgICAgfSxcbiAgICAgICAgJ2F1ZGlvVVJMJzogJ2h0dHBzOi8vZGljdC55b3VkYW8uY29tL2RpY3R2b2ljZT9sZT1hciZ0eXBlPTAmYXVkaW89J1xuICAgIH0sXG4gICAgJ0NoaW5lc2UgU2ltcGxpZmllZCc6IHtcbiAgICAgICAgJ25hbWUnOiAn566A5L2T5Lit5paHJyxcbiAgICAgICAgJ2lkJzogJ0NoaW5lc2UgU2ltcGxpZmllZCcsXG4gICAgICAgICdQcm9tcHQxJzoge1xuICAgICAgICAgICAgJ2V4cGxhbmF0aW9uJzogJ+S9v+eUqOS4reaWh+ino+mHiuWNleivjeWcqOWPpeWtkOS4reeahOWQq+S5ieWSjOivreazleS9nOeUqCdcbiAgICAgICAgfSxcbiAgICAgICAgJ1Byb21wdDInOiB7XG4gICAgICAgICAgICAndHJhbnNsYXRlJzogJ+WwhuWPpeWtkOe/u+ivkeS4uuS4reaWhycsXG4gICAgICAgICAgICAnZXhwbGFuYXRpb24nOiAn6Kej6YeK6K+t5rOV55+l6K+GJ1xuICAgICAgICB9LFxuICAgICAgICAnUHJvbXB0Myc6IHtcbiAgICAgICAgICAgICd2YWxpZGF0aW9uJzogJ+S9nOS4uuS4gOS4quivreiogOS4k+Wutu+8jOivt+ajgOafpeaIkeaPkOS+m+eahOWPpeWtkOOAguWmguaenOWPpeWtkOS4jeato+ehru+8jOmCo+S5iOeUqOS4reaWh+aMh+WHuumUmeivr++8jOW5tuaPkOS+m+S/ruaUueWQjueahOWPpeWtkOOAguWPpeWtkO+8midcbiAgICAgICAgfSxcbiAgICAgICAgJ2F1ZGlvVVJMJzogJ2h0dHBzOi8vZGljdC55b3VkYW8uY29tL2RpY3R2b2ljZT9sZT16aCZ0eXBlPTAmYXVkaW89J1xuICAgIH0sXG4gICAgJ0NoaW5lc2UgVHJhZGl0aW9uYWwnOiB7XG4gICAgICAgICduYW1lJzogJ+e5gemrlOS4reaWhycsXG4gICAgICAgICdpZCc6ICdDaGluZXNlIFRyYWRpdGlvbmFsJyxcbiAgICAgICAgJ1Byb21wdDEnOiB7XG4gICAgICAgICAgICAnZXhwbGFuYXRpb24nOiAn5L2/55So57mB6auU5Lit5paH6Kej6YeL5Zau6Kme5Zyo5Y+l5a2Q5Lit55qE5ZCr576p5ZKM6Kqe5rOV5L2c55SoJ1xuICAgICAgICB9LFxuICAgICAgICAnUHJvbXB0Mic6IHtcbiAgICAgICAgICAgICd0cmFuc2xhdGUnOiAn5bCH5Y+l5a2Q57+76K2v54K657mB6auU5Lit5paHJyxcbiAgICAgICAgICAgICdleHBsYW5hdGlvbic6ICfop6Pph4voqp7ms5Xnn6XorZgnXG4gICAgICAgIH0sXG4gICAgICAgICdQcm9tcHQzJzoge1xuICAgICAgICAgICAgJ3ZhbGlkYXRpb24nOiAn5L2c54K65LiA5YCL6Kqe6KiA5bCI5a6277yM6KuL5qqi5p+l5oiR5o+Q5L6b55qE5Y+l5a2Q44CC5aaC5p6c5Y+l5a2Q5LiN5q2j56K677yM6YKj6bq855So57mB6auU5Lit5paH5oyH5Ye66Yyv6Kqk77yM5Lim5o+Q5L6b5L+u5pS55b6M55qE5Y+l5a2Q44CC5Y+l5a2Q77yaJ1xuICAgICAgICB9LFxuICAgICAgICAnYXVkaW9VUkwnOiAnaHR0cHM6Ly9kaWN0LnlvdWRhby5jb20vZGljdHZvaWNlP2xlPXpoJnR5cGU9MCZhdWRpbz0nXG4gICAgfSxcbiAgICAnRHV0Y2gnOiB7XG4gICAgICAgICduYW1lJzogJ05lZGVybGFuZHMnLFxuICAgICAgICAnaWQnOiAnRHV0Y2gnLFxuICAgICAgICAnUHJvbXB0MSc6IHtcbiAgICAgICAgICAgICdleHBsYW5hdGlvbic6ICdHZWJydWlrIGhldCBOZWRlcmxhbmRzIG9tIGRlIGJldGVrZW5pcyB2YW4gd29vcmRlbiBlbiBodW4gZ3JhbW1hdGljYWxlIHJvbCBpbiBkZSB6aW4gdWl0IHRlIGxlZ2dlbidcbiAgICAgICAgfSxcbiAgICAgICAgJ1Byb21wdDInOiB7XG4gICAgICAgICAgICAndHJhbnNsYXRlJzogJ1ZlcnRhYWwgZGUgemluIG5hYXIgaGV0IE5lZGVybGFuZHMnLFxuICAgICAgICAgICAgJ2V4cGxhbmF0aW9uJzogJ0xlZyBkZSBncmFtbWF0aWNhbGUga2VubmlzIHVpdCdcbiAgICAgICAgfSxcbiAgICAgICAgJ1Byb21wdDMnOiB7XG4gICAgICAgICAgICAndmFsaWRhdGlvbic6ICdBbHMgdGFhbGV4cGVydCwgY29udHJvbGVlciBkZSB6aW4gZGllIGlrIGhlYiBnZWdldmVuLiBBbHMgZGUgemluIG9uanVpc3QgaXMsIHdpanMgZGFuIGRlIGZvdXQgYWFuIGluIGhldCBOZWRlcmxhbmRzIGVuIGdlZWYgZGUgZ2Vjb3JyaWdlZXJkZSB6aW4uIFppbjonXG4gICAgICAgIH0sXG4gICAgICAgICdhdWRpb1VSTCc6ICdodHRwczovL2RpY3QueW91ZGFvLmNvbS9kaWN0dm9pY2U/bGU9bmwmdHlwZT0wJmF1ZGlvPSdcbiAgICB9LFxuICAgICdVbml0ZWQgU3RhdGVzJzoge1xuICAgICAgICAnbmFtZSc6ICdFbmdsaXNoJyxcbiAgICAgICAgJ2lkJzogJ1VuaXRlZCBTdGF0ZXMnLFxuICAgICAgICAnUHJvbXB0MSc6IHtcbiAgICAgICAgICAgICdleHBsYW5hdGlvbic6ICdVc2UgRW5nbGlzaCB0byBleHBsYWluIHRoZSBtZWFuaW5nIGFuZCBncmFtbWF0aWNhbCByb2xlIG9mIHdvcmRzIGluIHNlbnRlbmNlcydcbiAgICAgICAgfSxcbiAgICAgICAgJ1Byb21wdDInOiB7XG4gICAgICAgICAgICAndHJhbnNsYXRlJzogJ1RyYW5zbGF0ZSBzZW50ZW5jZXMgaW50byBFbmdsaXNoJyxcbiAgICAgICAgICAgICdleHBsYW5hdGlvbic6ICdFeHBsYWluIGdyYW1tYXRpY2FsIGtub3dsZWRnZSdcbiAgICAgICAgfSxcbiAgICAgICAgJ1Byb21wdDMnOiB7XG4gICAgICAgICAgICAndmFsaWRhdGlvbic6ICdBcyBhIGxhbmd1YWdlIGV4cGVydCwgcGxlYXNlIGNoZWNrIHRoZSBzZW50ZW5jZXMgSSBwcm92aWRlZC4gSWYgdGhlIHNlbnRlbmNlIGlzIGluY29ycmVjdCwgdGhlbiBwb2ludCBvdXQgdGhlIGVycm9yIGluIEVuZ2xpc2ggYW5kIHByb3ZpZGUgdGhlIGNvcnJlY3RlZCBzZW50ZW5jZS4gU2VudGVuY2U6J1xuICAgICAgICB9LFxuICAgICAgICAnYXVkaW9VUkwnOiAnaHR0cHM6Ly9kaWN0LnlvdWRhby5jb20vZGljdHZvaWNlP3R5cGU9MCZhdWRpbz0nXG4gICAgfSxcbiAgICAnVW5pdGVkIEtpbmdkb20nOiB7XG4gICAgICAgICduYW1lJzogJ0VuZ2xpc2gnLFxuICAgICAgICAnaWQnOiAnVW5pdGVkIEtpbmdkb20nLFxuICAgICAgICAnUHJvbXB0MSc6IHtcbiAgICAgICAgICAgICdleHBsYW5hdGlvbic6ICdVc2UgRW5nbGlzaCB0byBleHBsYWluIHRoZSBtZWFuaW5nIGFuZCBncmFtbWF0aWNhbCByb2xlIG9mIHdvcmRzIGluIHNlbnRlbmNlcydcbiAgICAgICAgfSxcbiAgICAgICAgJ1Byb21wdDInOiB7XG4gICAgICAgICAgICAndHJhbnNsYXRlJzogJ1RyYW5zbGF0ZSBzZW50ZW5jZXMgaW50byBFbmdsaXNoJyxcbiAgICAgICAgICAgICdleHBsYW5hdGlvbic6ICdFeHBsYWluIGdyYW1tYXRpY2FsIGtub3dsZWRnZSdcbiAgICAgICAgfSxcbiAgICAgICAgJ1Byb21wdDMnOiB7XG4gICAgICAgICAgICAndmFsaWRhdGlvbic6ICdBcyBhIGxhbmd1YWdlIGV4cGVydCwgcGxlYXNlIGNoZWNrIHRoZSBzZW50ZW5jZXMgSSBwcm92aWRlZC4gSWYgdGhlIHNlbnRlbmNlIGlzIGluY29ycmVjdCwgdGhlbiBwb2ludCBvdXQgdGhlIGVycm9yIGluIEVuZ2xpc2ggYW5kIHByb3ZpZGUgdGhlIGNvcnJlY3RlZCBzZW50ZW5jZS4gU2VudGVuY2U6J1xuICAgICAgICB9LFxuICAgICAgICAnYXVkaW9VUkwnOiAnaHR0cHM6Ly9kaWN0LnlvdWRhby5jb20vZGljdHZvaWNlP3R5cGU9MSZhdWRpbz0nXG4gICAgfSxcbiAgICAnRnJlbmNoJzoge1xuICAgICAgICAnbmFtZSc6ICdGcmFuw6dhaXMnLFxuICAgICAgICAnaWQnOiAnRnJlbmNoJyxcbiAgICAgICAgJ1Byb21wdDEnOiB7XG4gICAgICAgICAgICAnZXhwbGFuYXRpb24nOiAnVXRpbGlzZXogbGUgZnJhbsOnYWlzIHBvdXIgZXhwbGlxdWVyIGxhIHNpZ25pZmljYXRpb24gZGVzIG1vdHMgZXQgbGV1ciByw7RsZSBncmFtbWF0aWNhbCBkYW5zIGxhIHBocmFzZSdcbiAgICAgICAgfSxcbiAgICAgICAgJ1Byb21wdDInOiB7XG4gICAgICAgICAgICAndHJhbnNsYXRlJzogJ1RyYWR1aXNleiBsYSBwaHJhc2UgZW4gZnJhbsOnYWlzJyxcbiAgICAgICAgICAgICdleHBsYW5hdGlvbic6ICdFeHBsaXF1ZXogbGVzIGNvbm5haXNzYW5jZXMgZ3JhbW1hdGljYWxlcydcbiAgICAgICAgfSxcbiAgICAgICAgJ1Byb21wdDMnOiB7XG4gICAgICAgICAgICAndmFsaWRhdGlvbic6IFwiRW4gdGFudCBxdSdleHBlcnQgZW4gbGFuZ3VlcywgdmV1aWxsZXogdsOpcmlmaWVyIGxhIHBocmFzZSBxdWUgaidhaSBmb3VybmllLiBTaSBsYSBwaHJhc2UgZXN0IGluY29ycmVjdGUsIHZldWlsbGV6IGluZGlxdWVyIGwnZXJyZXVyIGVuIGZyYW7Dp2FpcyBldCBmb3VybmlyIGxhIHBocmFzZSBjb3JyaWfDqWUuTGEgcGhyYXNlOiBcIlxuICAgICAgICB9LFxuICAgICAgICAnYXVkaW9VUkwnOiAnaHR0cHM6Ly9kaWN0LnlvdWRhby5jb20vZGljdHZvaWNlP2xlPWZyJnR5cGU9MCZhdWRpbz0nXG4gICAgfSxcbiAgICAnR2VybWFuJzoge1xuICAgICAgICAnbmFtZSc6ICdEZXV0c2NoJyxcbiAgICAgICAgJ2lkJzogJ0dlcm1hbicsXG4gICAgICAgICdQcm9tcHQxJzoge1xuICAgICAgICAgICAgJ2V4cGxhbmF0aW9uJzogJ1ZlcndlbmRlbiBTaWUgRGV1dHNjaCwgdW0gZGllIEJlZGV1dHVuZyB2b24gV8O2cnRlcm4gdW5kIGlocmUgZ3JhbW1hdGlrYWxpc2NoZSBSb2xsZSBpbSBTYXR6IHp1IGVya2zDpHJlbidcbiAgICAgICAgfSxcbiAgICAgICAgJ1Byb21wdDInOiB7XG4gICAgICAgICAgICAndHJhbnNsYXRlJzogJ8OcYmVyc2V0emVuIFNpZSBkZW4gU2F0eiBpbnMgRGV1dHNjaGUnLFxuICAgICAgICAgICAgJ2V4cGxhbmF0aW9uJzogJ0Vya2zDpHJlbiBTaWUgZ3JhbW1hdGlrYWxpc2NoZSBLZW5udG5pc3NlJ1xuICAgICAgICB9LFxuICAgICAgICAnUHJvbXB0Myc6IHtcbiAgICAgICAgICAgICd2YWxpZGF0aW9uJzogJ0FscyBTcHJhY2hleHBlcnRlIMO8YmVycHLDvGZlbiBTaWUgYml0dGUgZGVuIHZvbiBtaXIgYmVyZWl0Z2VzdGVsbHRlbiBTYXR6LiBXZW5uIGRlciBTYXR6IGZhbHNjaCBpc3QsIGdlYmVuIFNpZSBiaXR0ZSBkZW4gRmVobGVyIGF1ZiBEZXV0c2NoIGFuIHVuZCBnZWJlbiBTaWUgZGVuIGtvcnJpZ2llcnRlbiBTYXR6IGFuLiBEZXIgU2F0ejonXG4gICAgICAgIH0sXG4gICAgICAgICdhdWRpb1VSTCc6ICdodHRwczovL2RpY3QueW91ZGFvLmNvbS9kaWN0dm9pY2U/bGU9ZGUmdHlwZT0wJmF1ZGlvPSdcbiAgICB9LFxuICAgICdIaW5kaSc6IHtcbiAgICAgICAgJ25hbWUnOiAn4KS54KS/4KSo4KWN4KSm4KWAJyxcbiAgICAgICAgJ2lkJzogJ0hpbmRpJyxcbiAgICAgICAgJ1Byb21wdDEnOiB7XG4gICAgICAgICAgICAnZXhwbGFuYXRpb24nOiAn4KS24KSs4KWN4KSm4KWL4KSCIOCkleClhyDgpIXgpLDgpY3gpKUg4KSU4KSwIOCkteCkvuCkleCljeCkryDgpK7gpYfgpIIg4KSJ4KSo4KSV4KWAIOCkteCljeCkr+CkvuCkleCksOCko+Ckv+CklSDgpK3gpYLgpK7gpL/gpJXgpL4g4KSV4KS+IOCkteCkv+CkteCksOCkoyDgpKbgpYfgpKjgpYcg4KSV4KWHIOCksuCkv+CkjyDgpLngpL/gpILgpKbgpYAg4KSV4KS+IOCkieCkquCkr+Cli+CklyDgpJXgpLDgpYfgpIInXG4gICAgICAgIH0sXG4gICAgICAgICdQcm9tcHQyJzoge1xuICAgICAgICAgICAgJ3RyYW5zbGF0ZSc6ICfgpLXgpL7gpJXgpY3gpK8g4KSV4KS+IOCkueCkv+CkguCkpuClgCDgpK7gpYfgpIIg4KSF4KSo4KWB4KS14KS+4KSmIOCkleCksOClh+CkgicsXG4gICAgICAgICAgICAnZXhwbGFuYXRpb24nOiAn4KS14KWN4KSv4KS+4KSV4KSw4KSjIOCknOCljeCknuCkvuCkqCDgpJXgpL4g4KS14KS/4KS14KSw4KSjIOCkpuClh+CkgidcbiAgICAgICAgfSxcbiAgICAgICAgJ1Byb21wdDMnOiB7XG4gICAgICAgICAgICAndmFsaWRhdGlvbic6ICfgpK3gpL7gpLfgpL4g4KS14KS/4KS24KWH4KS34KSc4KWN4KSeIOCkleClhyDgpLDgpYLgpKog4KSu4KWH4KSCLCDgpJXgpYPgpKrgpK/gpL4g4KSu4KWI4KSC4KSo4KWHIOCkquClh+CktiDgpJXgpL/gpI8g4KSX4KSPIOCkteCkvuCkleCljeCkr+Cli+CkgiDgpJXgpYAg4KSc4KS+4KSC4KSaIOCkleCksOClh+CkguClpCDgpK/gpKbgpL8g4KS14KS+4KSV4KWN4KSvIOCkl+CksuCkpCDgpLngpYgsIOCkpOCliyDgpJXgpYPgpKrgpK/gpL4g4KS54KS/4KSC4KSm4KWAIOCkruClh+CkgiDgpKTgpY3gpLDgpYHgpJ/gpL8g4KSs4KSk4KS+4KSP4KSCIOCklOCksCDgpLjgpLngpYAg4KSV4KS/4KSPIOCkl+CkjyDgpLXgpL7gpJXgpY3gpK8g4KSq4KWN4KSw4KSm4KS+4KSoIOCkleCksOClh+CkguClpCDgpLXgpL7gpJXgpY3gpK86J1xuICAgICAgICB9LFxuICAgICAgICAnYXVkaW9VUkwnOiAnaHR0cHM6Ly9kaWN0LnlvdWRhby5jb20vZGljdHZvaWNlP2xlPWhpJnR5cGU9MCZhdWRpbz0nXG4gICAgfSxcbiAgICAnSW5kb25lc2lhbic6IHtcbiAgICAgICAgJ25hbWUnOiAnQmFoYXNhIEluZG9uZXNpYScsXG4gICAgICAgICdpZCc6ICdJbmRvbmVzaWFuJyxcbiAgICAgICAgJ1Byb21wdDEnOiB7XG4gICAgICAgICAgICAnZXhwbGFuYXRpb24nOiAnTWVuZ2d1bmFrYW4gYmFoYXNhIEluZG9uZXNpYSB1bnR1ayBtZW5qZWxhc2thbiBtYWtuYSBrYXRhIGRhbiBwZXJhbiBncmFtYXRpa2FsbnlhIGRhbGFtIGthbGltYXQnXG4gICAgICAgIH0sXG4gICAgICAgICdQcm9tcHQyJzoge1xuICAgICAgICAgICAgJ3RyYW5zbGF0ZSc6ICdNZW5lcmplbWFoa2FuIGthbGltYXQga2UgZGFsYW0gYmFoYXNhIEluZG9uZXNpYScsXG4gICAgICAgICAgICAnZXhwbGFuYXRpb24nOiAnTWVuamVsYXNrYW4gcGVuZ2V0YWh1YW4gdGF0YSBiYWhhc2EnXG4gICAgICAgIH0sXG4gICAgICAgICdQcm9tcHQzJzoge1xuICAgICAgICAgICAgJ3ZhbGlkYXRpb24nOiAnU2ViYWdhaSBhaGxpIGJhaGFzYSwgbW9ob24gcGVyaWtzYSBrYWxpbWF0IHlhbmcgc2F5YSBiZXJpa2FuLiBKaWthIGthbGltYXQgdGlkYWsgYmVuYXIsIHRvbG9uZyB0dW5qdWtrYW4ga2VzYWxhaGFubnlhIGRhbGFtIGJhaGFzYSBJbmRvbmVzaWEgZGFuIGJlcmlrYW4ga2FsaW1hdCB5YW5nIGJlbmFyLiBLYWxpbWF0OidcbiAgICAgICAgfSxcbiAgICAgICAgJ2F1ZGlvVVJMJzogJ2h0dHBzOi8vZGljdC55b3VkYW8uY29tL2RpY3R2b2ljZT9sZT1pZCZ0eXBlPTAmYXVkaW89J1xuICAgIH0sXG4gICAgJ0l0YWxpYW4nOiB7XG4gICAgICAgICduYW1lJzogJ0l0YWxpYW5vJyxcbiAgICAgICAgJ2lkJzogJ0l0YWxpYW4nLFxuICAgICAgICAnUHJvbXB0MSc6IHtcbiAgICAgICAgICAgICdleHBsYW5hdGlvbic6ICdVc2EgbFxcJ2l0YWxpYW5vIHBlciBzcGllZ2FyZSBpbCBzaWduaWZpY2F0byBkZWxsZSBwYXJvbGUgZSBpbCBsb3JvIHJ1b2xvIGdyYW1tYXRpY2FsZSBuZWxsYSBmcmFzZSdcbiAgICAgICAgfSxcbiAgICAgICAgJ1Byb21wdDInOiB7XG4gICAgICAgICAgICAndHJhbnNsYXRlJzogJ1RyYWR1cnJlIGxhIGZyYXNlIGluIGl0YWxpYW5vJyxcbiAgICAgICAgICAgICdleHBsYW5hdGlvbic6ICdTcGllZ2F6aW9uZSBkZWxsYSBjb25vc2NlbnphIGdyYW1tYXRpY2FsZSdcbiAgICAgICAgfSxcbiAgICAgICAgJ1Byb21wdDMnOiB7XG4gICAgICAgICAgICAndmFsaWRhdGlvbic6ICdJbiBxdWFudG8gZXNwZXJ0byBkaSBsaW5ndWEsIGNvbnRyb2xsYSBsYSBmcmFzZSBjaGUgaG8gZm9ybml0by4gU2UgbGEgZnJhc2Ugbm9uIMOoIGNvcnJldHRhLCBpbmRpY2EgbFxcJ2Vycm9yZSBpbiBpdGFsaWFubyBlIGZvcm5pc2NpIGxhIGZyYXNlIGNvcnJldHRhLiBGcmFzZTonXG4gICAgICAgIH0sXG4gICAgICAgICdhdWRpb1VSTCc6ICdodHRwczovL2RpY3QueW91ZGFvLmNvbS9kaWN0dm9pY2U/bGU9aXQmdHlwZT0wJmF1ZGlvPSdcbiAgICB9LFxuICAgICdKYXBhbmVzZSc6IHtcbiAgICAgICAgJ25hbWUnOiAn5pel5pys6KqeJyxcbiAgICAgICAgJ2lkJzogJ0phcGFuZXNlJyxcbiAgICAgICAgJ1Byb21wdDEnOiB7XG4gICAgICAgICAgICAnZXhwbGFuYXRpb24nOiAn5Y2Y6Kqe44Gu5oSP5ZGz44Go5paH5rOV5LiK44Gu5b255Ymy44KS6Kqs5piO44GZ44KL44Gf44KB44Gr5pel5pys6Kqe44KS5L2/55So44GZ44KLJ1xuICAgICAgICB9LFxuICAgICAgICAnUHJvbXB0Mic6IHtcbiAgICAgICAgICAgICd0cmFuc2xhdGUnOiAn5paH44KS5pel5pys6Kqe44Gr57+76Kiz44GZ44KLJyxcbiAgICAgICAgICAgICdleHBsYW5hdGlvbic6ICfmlofms5XnmoTjgarnn6XorZjjga7oqqzmmI4nXG4gICAgICAgIH0sXG4gICAgICAgICdQcm9tcHQzJzoge1xuICAgICAgICAgICAgJ3ZhbGlkYXRpb24nOiAn6KiA6Kqe44Gu5bCC6ZaA5a6244Go44GX44Gm44CB5o+Q5L6b44GV44KM44Gf5paH56ug44KS56K66KqN44GX44Gm44GP44Gg44GV44GE44CC5paH56ug44GM5q2j44GX44GP44Gq44GE5aC05ZCI44Gv44CB5pel5pys6Kqe44Gn44Ko44Op44O844KS5oyH5pGY44GX44CB5L+u5q2j5b6M44Gu5paH56ug44KS5o+Q5L6b44GX44Gm44GP44Gg44GV44GE44CC5paH56ug77yaJ1xuICAgICAgICB9LFxuICAgICAgICAnYXVkaW9VUkwnOiAnaHR0cHM6Ly9kaWN0LnlvdWRhby5jb20vZGljdHZvaWNlP2xlPWphcCZ0eXBlPTAmYXVkaW89J1xuICAgIH0sXG4gICAgJ0tvcmVhbic6IHtcbiAgICAgICAgJ25hbWUnOiAn7ZWc6rWt7Ja0JyxcbiAgICAgICAgJ2lkJzogJ0tvcmVhbicsXG4gICAgICAgICdQcm9tcHQxJzoge1xuICAgICAgICAgICAgJ2V4cGxhbmF0aW9uJzogJ+uLqOyWtOydmCDsnZjrr7jsmYAg66y47J6l7JeQ7ISc7J2YIOusuOuyleyggSDsl63tlaDsnYQg7ISk66qF7ZWY6riwIOychO2VtCDtlZzqta3slrTrpbwg7IKs7Jqp7ZWp64uI64ukLidcbiAgICAgICAgfSxcbiAgICAgICAgJ1Byb21wdDInOiB7XG4gICAgICAgICAgICAndHJhbnNsYXRlJzogJ+usuOyepeydhCDtlZzqta3slrTroZwg67KI7Jet7ZWY7IS47JqULicsXG4gICAgICAgICAgICAnZXhwbGFuYXRpb24nOiAn66y467KVIOyngOyLnSDshKTrqoUnXG4gICAgICAgIH0sXG4gICAgICAgICdQcm9tcHQzJzoge1xuICAgICAgICAgICAgJ3ZhbGlkYXRpb24nOiAn7Ja47Ja0IOyghOusuOqwgOuhnOyEnCDsoJzsi5ztlZwg66y47J6l7J2EIO2ZleyduO2VtCDso7zshLjsmpQuIOunjOyVvSDrrLjsnqXsnbQg7YuA66C464uk66m0LCDtlZzqta3slrTroZwg7Jik66WY66W8IOyngOygge2VmOqzoCDsiJjsoJXrkJwg66y47J6l7J2EIOygnOyLnO2VtCDso7zshLjsmpQuIOusuOyepTogJ1xuICAgICAgICB9LFxuICAgICAgICAnYXVkaW9VUkwnOiAnaHR0cHM6Ly9kaWN0LnlvdWRhby5jb20vZGljdHZvaWNlP2xlPWtvJnR5cGU9MCZhdWRpbz0nXG4gICAgfSxcbiAgICAnUG9ydHVndWVzZSc6IHtcbiAgICAgICAgJ25hbWUnOiAnUG9ydHVndcOqcycsXG4gICAgICAgICdpZCc6ICdQb3J0dWd1ZXNlJyxcbiAgICAgICAgJ1Byb21wdDEnOiB7XG4gICAgICAgICAgICAnZXhwbGFuYXRpb24nOiAnVXNhciBvIHBvcnR1Z3XDqnMgcGFyYSBleHBsaWNhciBvIHNpZ25pZmljYWRvIGRhcyBwYWxhdnJhcyBlIG8gcGFwZWwgZ3JhbWF0aWNhbCBkZWxhcyBuYSBmcmFzZSdcbiAgICAgICAgfSxcbiAgICAgICAgJ1Byb21wdDInOiB7XG4gICAgICAgICAgICAndHJhbnNsYXRlJzogJ1RyYWR1emEgYSBmcmFzZSBwYXJhIG8gcG9ydHVndcOqcycsXG4gICAgICAgICAgICAnZXhwbGFuYXRpb24nOiAnRXhwbGljYcOnw6NvIGRvIGNvbmhlY2ltZW50byBncmFtYXRpY2FsJ1xuICAgICAgICB9LFxuICAgICAgICAnUHJvbXB0Myc6IHtcbiAgICAgICAgICAgICd2YWxpZGF0aW9uJzogJ0NvbW8gZXNwZWNpYWxpc3RhIGVtIGxpbmd1YWdlbSwgdmVyaWZpcXVlIGEgZnJhc2UgcXVlIGV1IGZvcm5lY2kuIFNlIGEgZnJhc2UgZXN0aXZlciBpbmNvcnJldGEsIGluZGlxdWUgbyBlcnJvIGVtIHBvcnR1Z3XDqnMgZSBmb3JuZcOnYSBhIGZyYXNlIGNvcnJpZ2lkYS4gRnJhc2U6ICdcbiAgICAgICAgfSxcbiAgICAgICAgJ2F1ZGlvVVJMJzogJ2h0dHBzOi8vZGljdC55b3VkYW8uY29tL2RpY3R2b2ljZT9sZT1wdCZ0eXBlPTAmYXVkaW89J1xuICAgIH0sXG4gICAgJ1J1c3NpYW4nOiB7XG4gICAgICAgICduYW1lJzogJ9Cg0YPRgdGB0LrQuNC5JyxcbiAgICAgICAgJ2lkJzogJ1J1c3NpYW4nLFxuICAgICAgICAnUHJvbXB0MSc6IHtcbiAgICAgICAgICAgICdleHBsYW5hdGlvbic6ICfQmNGB0L/QvtC70YzQt9GD0LnRgtC1INGA0YPRgdGB0LrQuNC5INGP0LfRi9C6LCDRh9GC0L7QsdGLINC+0LHRitGP0YHQvdC40YLRjCDQt9C90LDRh9C10L3QuNC1INGB0LvQvtCyINC4INC40YUg0LPRgNCw0LzQvNCw0YLQuNGH0LXRgdC60YPRjiDRgNC+0LvRjCDQsiDQv9GA0LXQtNC70L7QttC10L3QuNC4J1xuICAgICAgICB9LFxuICAgICAgICAnUHJvbXB0Mic6IHtcbiAgICAgICAgICAgICd0cmFuc2xhdGUnOiAn0J/QtdGA0LXQstC10YHRgtC4INC/0YDQtdC00LvQvtC20LXQvdC40LUg0L3QsCDRgNGD0YHRgdC60LjQuSDRj9C30YvQuicsXG4gICAgICAgICAgICAnZXhwbGFuYXRpb24nOiAn0J7QsdGK0Y/RgdC90LXQvdC40LUg0LPRgNCw0LzQvNCw0YLQuNGH0LXRgdC60LjRhSDQt9C90LDQvdC40LknXG4gICAgICAgIH0sXG4gICAgICAgICdQcm9tcHQzJzoge1xuICAgICAgICAgICAgJ3ZhbGlkYXRpb24nOiAn0JIg0LrQsNGH0LXRgdGC0LLQtSDRjdC60YHQv9C10YDRgtCwINC/0L4g0Y/Qt9GL0LrRgywg0L/QvtC20LDQu9GD0LnRgdGC0LAsINC/0YDQvtCy0LXRgNGM0YLQtSDQv9GA0LXQtNC70L7QttC10L3QuNC1LCDQutC+0YLQvtGA0L7QtSDRjyDQv9GA0LXQtNGB0YLQsNCy0LjQuy4g0JXRgdC70Lgg0L/RgNC10LTQu9C+0LbQtdC90LjQtSDQvdC10LLQtdGA0L3QvtC1LCDRgtC+INC/0L7QttCw0LvRg9C50YHRgtCwLCDRg9C60LDQt9GL0LLQsNC50YLQtSDQvtGI0LjQsdC60YMg0L3QsCDRgNGD0YHRgdC60L7QvCDRj9C30YvQutC1INC4INC/0YDQtdC00L7RgdGC0LDQstC70Y/QudGC0LUg0LjRgdC/0YDQsNCy0LvQtdC90L3QvtC1INC/0YDQtdC00LvQvtC20LXQvdC40LUuINCf0YDQtdC00LvQvtC20LXQvdC40LU6J1xuICAgICAgICB9LFxuICAgICAgICAnYXVkaW9VUkwnOiAnaHR0cHM6Ly9kaWN0LnlvdWRhby5jb20vZGljdHZvaWNlP2xlPXJ1JnR5cGU9MCZhdWRpbz0nXG4gICAgfSxcbiAgICAnU3BhbmlzaCc6IHtcbiAgICAgICAgJ25hbWUnOiAnRXNwYcOxb2wnLFxuICAgICAgICAnaWQnOiAnU3BhbmlzaCcsXG4gICAgICAgICdQcm9tcHQxJzoge1xuICAgICAgICAgICAgJ2V4cGxhbmF0aW9uJzogJ1V0aWxpY2UgZWwgZXNwYcOxb2wgcGFyYSBleHBsaWNhciBlbCBzaWduaWZpY2FkbyBkZSBsYXMgcGFsYWJyYXMgeSBzdSBmdW5jacOzbiBncmFtYXRpY2FsIGVuIGxhIG9yYWNpw7NuJ1xuICAgICAgICB9LFxuICAgICAgICAnUHJvbXB0Mic6IHtcbiAgICAgICAgICAgICd0cmFuc2xhdGUnOiAnVHJhZHVjaXIgbGEgb3JhY2nDs24gYWwgZXNwYcOxb2wnLFxuICAgICAgICAgICAgJ2V4cGxhbmF0aW9uJzogJ0V4cGxpY2FjacOzbiBkZSBjb25vY2ltaWVudG9zIGdyYW1hdGljYWxlcydcbiAgICAgICAgfSxcbiAgICAgICAgJ1Byb21wdDMnOiB7XG4gICAgICAgICAgICAndmFsaWRhdGlvbic6ICdDb21vIGV4cGVydG8gZW4gaWRpb21hcywgcG9yIGZhdm9yLCBjb21wcnVlYmUgbGEgb3JhY2nDs24gcXVlIGhlIHByb3BvcmNpb25hZG8uIFNpIGxhIG9yYWNpw7NuIGVzIGluY29ycmVjdGEsIHBvciBmYXZvciwgaW5kaXF1ZSBlbCBlcnJvciBlbiBlc3Bhw7FvbCB5IHByb3BvcmNpb25lIGxhIG9yYWNpw7NuIGNvcnJlZ2lkYS4gT3JhY2nDs246J1xuICAgICAgICB9LFxuICAgICAgICAnYXVkaW9VUkwnOiAnaHR0cHM6Ly9kaWN0LnlvdWRhby5jb20vZGljdHZvaWNlP2xlPWVzJnR5cGU9MCZhdWRpbz0nXG4gICAgfSxcbiAgICAnVHVya2lzaCc6IHtcbiAgICAgICAgJ25hbWUnOiAnVMO8cmvDp2UnLFxuICAgICAgICAnaWQnOiAnVHVya2lzaCcsXG4gICAgICAgICdQcm9tcHQxJzoge1xuICAgICAgICAgICAgJ2V4cGxhbmF0aW9uJzogJ0tlbGltZWxlcmluIGFubGFtxLFuxLEgdmUgY8O8bWxlZGVraSBkaWxiaWxnaXNlbCByb2zDvG7DvCBhw6fEsWtsYW1hayBpw6dpbiBUw7xya8OnZXlpIGt1bGxhbsSxbidcbiAgICAgICAgfSxcbiAgICAgICAgJ1Byb21wdDInOiB7XG4gICAgICAgICAgICAndHJhbnNsYXRlJzogJ0PDvG1sZXlpIFTDvHJrw6dleWUgw6dldmlyaW4nLFxuICAgICAgICAgICAgJ2V4cGxhbmF0aW9uJzogJ0RpbGJpbGdpc2kgYmlsZ2lzaSBhw6fEsWtsYW1hc8SxJ1xuICAgICAgICB9LFxuICAgICAgICAnUHJvbXB0Myc6IHtcbiAgICAgICAgICAgICd2YWxpZGF0aW9uJzogJ0RpbCB1em1hbsSxIG9sYXJhaywgbMO8dGZlbiBzdW5kdcSfdW0gY8O8bWxleWkga29udHJvbCBlZGluLiBFxJ9lciBjw7xtbGUgeWFubMSxxZ9zYSwgbMO8dGZlbiBoYXRhecSxIFTDvHJrw6dlIG9sYXJhayBiZWxpcnRpbiB2ZSBkw7x6ZWx0aWxtacWfIGPDvG1sZXlpIHNhxJ9sYXnEsW4uIEPDvG1sZTonXG4gICAgICAgIH0sXG4gICAgICAgICdhdWRpb1VSTCc6ICdodHRwczovL2RpY3QueW91ZGFvLmNvbS9kaWN0dm9pY2U/bGU9dHImdHlwZT0wJmF1ZGlvPSdcbiAgICB9XG59O1xuZXhwb3J0cy5sYW5ndWFnZUNvZGVzID0ge1xuICAgIFwiQXJhYmljXCI6IFwiYXItQUUtRmF0aW1hTmV1cmFsXCIsXG4gICAgXCJDaGluZXNlIFNpbXBsaWZpZWRcIjogXCJ6aC1DTi1YaWFveGlhb05ldXJhbFwiLFxuICAgIFwiQ2hpbmVzZSBUcmFkaXRpb25hbFwiOiBcInpoLVRXLUhzaWFvQ2hlbk5ldXJhbFwiLFxuICAgIFwiRHV0Y2hcIjogXCJubC1OTC1Db2xldHRlTmV1cmFsXCIsXG4gICAgXCJFbmdsaXNoXCI6IFwiZW4tVVMtQXJpYU5ldXJhbFwiLFxuICAgIFwiVW5pdGVkIFN0YXRlc1wiOiBcImVuLVVTLUFyaWFOZXVyYWxcIixcbiAgICBcIlVuaXRlZCBLaW5nZG9tXCI6IFwiZW4tR0ItTGliYnlOZXVyYWxcIixcbiAgICBcIkZyZW5jaFwiOiBcImZyLUZSLURlbmlzZU5ldXJhbFwiLFxuICAgIFwiR2VybWFuXCI6IFwiZGUtREUtS2F0amFOZXVyYWxcIixcbiAgICBcIkhpbmRpXCI6IFwiaGktSU4tTWFkaHVyTmV1cmFsXCIsXG4gICAgXCJJbmRvbmVzaWFuXCI6IFwiaWQtSUQtQXJkaU5ldXJhbFwiLFxuICAgIFwiSXRhbGlhblwiOiBcIml0LUlULUVsc2FOZXVyYWxcIixcbiAgICBcIkphcGFuZXNlXCI6IFwiamEtSlAtTmFuYW1pTmV1cmFsXCIsXG4gICAgXCJLb3JlYW5cIjogXCJrby1LUi1TdW5IaU5ldXJhbFwiLFxuICAgIFwiUG9ydHVndWVzZVwiOiBcInB0LUJSLUZyYW5jaXNjYU5ldXJhbFwiLFxuICAgIFwiUnVzc2lhblwiOiBcInJ1LVJVLVN2ZXRsYW5hTmV1cmFsXCIsXG4gICAgXCJTcGFuaXNoXCI6IFwiZXMtRVMtRWx2aXJhTmV1cmFsXCIsXG4gICAgXCJUdXJraXNoXCI6IFwidHItVFItQWhtZXROZXVyYWxcIlxufTtcbi8vIOiOt+WPluivreiogFxuY29uc3QgZmV0Y2hjdXJyZW50TGFuZ3VhZ2UgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICBsZXQgciA9IG51bGw7XG4gICAgeWllbGQgd2ViZXh0ZW5zaW9uX3BvbHlmaWxsXzEuZGVmYXVsdC5zdG9yYWdlLnN5bmMuZ2V0KHsgJ2N1cnJlbnRMYW5ndWFnZSc6ICdDaGluZXNlIFNpbXBsaWZpZWQnLCAndGFyZ2V0TGFuZ3VhZ2UnOiAnVW5pdGVkIFN0YXRlcycgfSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIC8vIOm7mOiupOWAvFxuICAgICAgICBsZXQgYyA9IGV4cG9ydHMubGFuZ1snQ2hpbmVzZSBTaW1wbGlmaWVkJ107XG4gICAgICAgIGxldCB0ID0gZXhwb3J0cy5sYW5nWydVbml0ZWQgU3RhdGVzJ107XG4gICAgICAgIGMgPSBzd2l0Y2hMYW5nKHJlc3VsdC5jdXJyZW50TGFuZ3VhZ2UpO1xuICAgICAgICB0ID0gc3dpdGNoTGFuZyhyZXN1bHQudGFyZ2V0TGFuZ3VhZ2UpO1xuICAgICAgICByID0geyAnY3VycmVudCc6IGMsICd0YXJnZXQnOiB0IH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHI7XG59KTtcbmV4cG9ydHMuZmV0Y2hjdXJyZW50TGFuZ3VhZ2UgPSBmZXRjaGN1cnJlbnRMYW5ndWFnZTtcbmNvbnN0IHN3aXRjaExhbmcgPSAoc3RyKSA9PiB7XG4gICAgc3dpdGNoIChzdHIpIHtcbiAgICAgICAgY2FzZSAnQXJhYmljJzpcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLmxhbmdbJ0FyYWJpYyddO1xuICAgICAgICBjYXNlICdDaGluZXNlIFNpbXBsaWZpZWQnOlxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMubGFuZ1snQ2hpbmVzZSBTaW1wbGlmaWVkJ107XG4gICAgICAgIGNhc2UgJ0NoaW5lc2UgVHJhZGl0aW9uYWwnOlxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMubGFuZ1snQ2hpbmVzZSBUcmFkaXRpb25hbCddO1xuICAgICAgICBjYXNlICdEdXRjaCc6XG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5sYW5nWydEdXRjaCddO1xuICAgICAgICBjYXNlICdVbml0ZWQgU3RhdGVzJzpcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLmxhbmdbJ1VuaXRlZCBTdGF0ZXMnXTtcbiAgICAgICAgY2FzZSAnRW5nbGlzaCc6XG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5sYW5nWydVbml0ZWQgU3RhdGVzJ107XG4gICAgICAgIGNhc2UgJ1VuaXRlZCBLaW5nZG9tJzpcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLmxhbmdbJ1VuaXRlZCBLaW5nZG9tJ107XG4gICAgICAgIGNhc2UgJ0ZyZW5jaCc6XG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5sYW5nWydGcmVuY2gnXTtcbiAgICAgICAgY2FzZSAnR2VybWFuJzpcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLmxhbmdbJ0dlcm1hbiddO1xuICAgICAgICBjYXNlICdIaW5kaSc6XG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5sYW5nWydIaW5kaSddO1xuICAgICAgICBjYXNlICdJbmRvbmVzaWFuJzpcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLmxhbmdbJ0luZG9uZXNpYW4nXTtcbiAgICAgICAgY2FzZSAnSXRhbGlhbic6XG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5sYW5nWydJdGFsaWFuJ107XG4gICAgICAgIGNhc2UgJ0phcGFuZXNlJzpcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLmxhbmdbJ0phcGFuZXNlJ107XG4gICAgICAgIGNhc2UgJ0tvcmVhbic6XG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5sYW5nWydLb3JlYW4nXTtcbiAgICAgICAgY2FzZSAnUG9ydHVndWVzZSc6XG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5sYW5nWydQb3J0dWd1ZXNlJ107XG4gICAgICAgIGNhc2UgJ1J1c3NpYW4nOlxuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMubGFuZ1snUnVzc2lhbiddO1xuICAgICAgICBjYXNlICdTcGFuaXNoJzpcbiAgICAgICAgICAgIHJldHVybiBleHBvcnRzLmxhbmdbJ1NwYW5pc2gnXTtcbiAgICAgICAgY2FzZSAnVHVya2lzaCc6XG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5sYW5nWydUdXJraXNoJ107XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZXhwb3J0cy5sYW5nWydDaGluZXNlIFNpbXBsaWZpZWQnXTtcbiAgICB9XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jYXJkU3R5bGUgPSBleHBvcnRzLmdldFVzZXJJbmZvID0gZXhwb3J0cy5nZXRCYWxhbmNlID0gZXhwb3J0cy5mZXRjaFNTRSA9IGV4cG9ydHMuZ2V0Q2hhdEdQVFNlc3Npb24gPSBleHBvcnRzLnRleHRUb1NwZWVjaERvd25sb2FkID0gZXhwb3J0cy5wbGF5VGV4dFRvU3BlZWNoID0gZXhwb3J0cy5nZXREZWZhdWx0RGVja05hbWUgPSBleHBvcnRzLmdldENoYXRHUFRXZWJUb2tlbiA9IGV4cG9ydHMuZ2V0QUlQYXJhbWV0ZXIgPSBleHBvcnRzLmdlbmVyYXRpb25zSW1hZ2VzID0gZXhwb3J0cy5nZXREaWN0aW9uYXJ5RGF0YSA9IGV4cG9ydHMudW5zcGxhc2hTZWFyY2hQaG90b3MgPSBleHBvcnRzLmFua2lBY3Rpb24gPSB2b2lkIDA7XG5jb25zdCB3ZWJleHRlbnNpb25fcG9seWZpbGxfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwid2ViZXh0ZW5zaW9uLXBvbHlmaWxsXCIpKTtcbmNvbnN0IHVuc3BsYXNoX2pzXzEgPSByZXF1aXJlKFwidW5zcGxhc2gtanNcIik7XG5jb25zdCBzZGsgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIm1pY3Jvc29mdC1jb2duaXRpdmVzZXJ2aWNlcy1zcGVlY2gtc2RrXCIpKTtcbmNvbnN0IHV1aWRfMSA9IHJlcXVpcmUoXCJ1dWlkXCIpO1xuY29uc3QgdXRpbF8xID0gcmVxdWlyZShcIi4vT3B0aW9ucy91dGlsXCIpO1xuY29uc3QgaXNvXzYzOV8xXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImlzby02MzktMVwiKSk7XG5jb25zdCBsYW5nXzEgPSByZXF1aXJlKFwiLi9saWIvbGFuZ1wiKTtcbmNvbnN0IGV2ZW50c291cmNlX3BhcnNlcl8xID0gcmVxdWlyZShcImV2ZW50c291cmNlLXBhcnNlclwiKTtcbi8vIOWwhuS/oeaBr+a3u+WKoOWIsCBBbmtpXG5mdW5jdGlvbiBhbmtpQWN0aW9uKGFjdGlvbiwgdmVyc2lvbiwgcGFyYW1zID0ge30pIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBmZXRjaCgnaHR0cDovLzEyNy4wLjAuMTo4NzY1Jywge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgXCJhY3Rpb25cIjogYWN0aW9uLCBcInZlcnNpb25cIjogdmVyc2lvbiwgXCJwYXJhbXNcIjogcGFyYW1zIH0pXG4gICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7XG4gICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHsgJ3Jlc3VsdCc6IFtdLCAnZXJyb3InOiAnUGxlYXNlIG9wZW4gdGhlIEFua2kgY2xpZW50IGFuZCBpbnN0YWxsIHRoZSBBbmtpLUNvbm5lY3QgcGx1Z2luIGJlZm9yZSB0cnlpbmcgYWdhaW4uJyB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5leHBvcnRzLmFua2lBY3Rpb24gPSBhbmtpQWN0aW9uO1xuLy8g5ZyoIHVuc3BsYXNoIOS4reaQnOe0oueFp+eJh1xuZnVuY3Rpb24gdW5zcGxhc2hTZWFyY2hQaG90b3MoQVBJX0tFWSwgcXVlcnkpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB1bnNwbGFzaCA9ICgwLCB1bnNwbGFzaF9qc18xLmNyZWF0ZUFwaSkoe1xuICAgICAgICAgICAgYWNjZXNzS2V5OiBBUElfS0VZLFxuICAgICAgICB9KTtcbiAgICAgICAgdW5zcGxhc2guc2VhcmNoLmdldFBob3Rvcyh7XG4gICAgICAgICAgICBxdWVyeTogcXVlcnksXG4gICAgICAgIH0pLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIGlmICgoKF9hID0gZGF0YS5yZXNwb25zZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlc3VsdHMubGVuZ3RoKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgoX2IgPSBkYXRhLnJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IucmVzdWx0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5leHBvcnRzLnVuc3BsYXNoU2VhcmNoUGhvdG9zID0gdW5zcGxhc2hTZWFyY2hQaG90b3M7XG4vLyDojrflj5bor43lhbjmlbDmja5cbmNvbnN0IGdldERpY3Rpb25hcnlEYXRhID0gKGtleVdvcmQpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIC8vIOiOt+WPlueUqOaIt+ivreiogFxuICAgIGNvbnN0IFNldHRpbmdzID0geWllbGQgKDAsIHV0aWxfMS5nZXRTZXR0aW5ncykoKTtcbiAgICBjb25zdCB0YXJnZXRMYW5ndWFnZSA9IFNldHRpbmdzLnRhcmdldExhbmd1YWdlO1xuICAgIC8vIOiOt+WPluivjeWFuOaVsOaNrlxuICAgIGxldCB1cmwgPSBuZXcgVVJMKCdodHRwczovL2RpY3QueW91ZGFvLmNvbS9qc29uYXBpJyk7XG4gICAgbGV0IHBhcmFtcyA9IHtcbiAgICAgICAgeG1sVmVyc2lvbjogJzUuMScsXG4gICAgICAgIGxlOiBpc29fNjM5XzFfMS5kZWZhdWx0LmdldENvZGUodGFyZ2V0TGFuZ3VhZ2UpLFxuICAgICAgICBxOiBrZXlXb3JkXG4gICAgfTtcbiAgICB1cmwuc2VhcmNoID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhwYXJhbXMpLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgRXJyb3JNc2cgPSAn8J+lsiBTb3JyeSwgTm8gUmVzdWx0cyBGb3VuZCBmb3IgdGhpcyBXb3JkLic7XG4gICAgY29uc3QgRXJyb3JSZXN1bHQgPSB7ICd0eXBlJzogJ3NlbmRHUFREYXRhJywgJ3N0YXR1cyc6ICdlcnJvcicsICdjb250ZW50JzogRXJyb3JNc2csICdjaGF0SWQnOiAnJyB9O1xuICAgIHJldHVybiBmZXRjaCh1cmwpXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgcmV0dXJuIEVycm9yUmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7IC8vIOi/lOWbnuS4gOS4quWMheWQq+WTjeW6lOaVsOaNrueahCBKU09OIOWvueixoVxuICAgIH0pXG4gICAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICBsZXQgbXNnID0gJyc7XG4gICAgICAgIHN3aXRjaCAodGFyZ2V0TGFuZ3VhZ2UpIHtcbiAgICAgICAgICAgIGNhc2UgJ1NwYW5pc2gnOlxuICAgICAgICAgICAgICAgIGlmICgnbXVsdGxlJyBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIG1zZyA9IGtleVdvcmQgKyAnIC8nICsgZGF0YS5tdWx0bGUud29yZFswXS5waG9uZSArICcvJyArICdcXG4nICsgZGF0YS5tdWx0bGUud29yZFswXS50cnNbMF0udHJbMF0ubC5pWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgnZmFueWknIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgbXNnID0gZGF0YS5mYW55aS50cmFuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJ211bHRsZScgaW4gZGF0YSB8fCAnZmFueWknIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgJ3R5cGUnOiAnc2VuZEdQVERhdGEnLCAnc3RhdHVzJzogJ2RvbmUnLCAnY29udGVudCc6IG1zZywgJ2NoYXRJZCc6ICcnIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRXJyb3JSZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnRnJlbmNoJzpcbiAgICAgICAgICAgICAgICBpZiAoJ2ZjJyBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIG1zZyA9IGtleVdvcmQgKyAnIC8nICsgZGF0YS5mYy53b3JkWzBdLnBob25lICsgJy8nICsgJ1xcbicgKyBkYXRhLmZjLndvcmRbMF0udHJzWzBdLnRyWzBdLmwuaVswXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoJ2ZhbnlpJyBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIG1zZyA9IGRhdGEuZmFueWkudHJhbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCdmYycgaW4gZGF0YSB8fCAnZmFueWknIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgJ3R5cGUnOiAnc2VuZEdQVERhdGEnLCAnc3RhdHVzJzogJ2RvbmUnLCAnY29udGVudCc6IG1zZywgJ2NoYXRJZCc6ICcnIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRXJyb3JSZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnSmFwYW5lc2UnOlxuICAgICAgICAgICAgICAgIGlmICgnamMnIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgbXNnID0ga2V5V29yZCArICcgLycgKyBkYXRhLmpjLndvcmRbMF1bXCJyZXR1cm4tcGhyYXNlXCJdLmwuaSArICcvJyArICdcXG4nICsgZGF0YS5qYy53b3JkWzBdLnRyc1swXS50clswXS5sLmlbMF07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7ICd0eXBlJzogJ3NlbmRHUFREYXRhJywgJ3N0YXR1cyc6ICdkb25lJywgJ2NvbnRlbnQnOiBtc2csICdjaGF0SWQnOiAnJyB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgnZmFueWknIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgbXNnID0gZGF0YS5mYW55aS50cmFuO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAndHlwZSc6ICdzZW5kR1BURGF0YScsICdzdGF0dXMnOiAnZG9uZScsICdjb250ZW50JzogbXNnLCAnY2hhdElkJzogJycgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoJ2phVHJhbnNQam0nIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgbXNnID0gZGF0YS5qYVRyYW5zUGptLmZhbnlpLnRyYW47XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7ICd0eXBlJzogJ3NlbmRHUFREYXRhJywgJ3N0YXR1cyc6ICdkb25lJywgJ2NvbnRlbnQnOiBtc2csICdjaGF0SWQnOiAnJyB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgnbmV3amMnIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgbXNnID0gZGF0YS5uZXdqYy53b3JkLnNlbnNlWzBdLnBockxpc3RbMF0uam1zeTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgJ3R5cGUnOiAnc2VuZEdQVERhdGEnLCAnc3RhdHVzJzogJ2RvbmUnLCAnY29udGVudCc6IG1zZywgJ2NoYXRJZCc6ICcnIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRXJyb3JSZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvLyBFbmdsaXNoXG4gICAgICAgICAgICAgICAgaWYgKCdlYycgaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBtc2cgPSBrZXlXb3JkICsgJyAvJyArIGRhdGEuZWMud29yZFswXS51c3Bob25lICsgJy8nICsgJ1xcbicgKyBkYXRhLmVjLndvcmRbMF0udHJzWzBdLnRyWzBdLmwuaVswXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoJ2ZhbnlpJyBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIG1zZyA9IGRhdGEuZmFueWkudHJhbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCdlYycgaW4gZGF0YSB8fCAnZmFueWknIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgJ3R5cGUnOiAnc2VuZEdQVERhdGEnLCAnc3RhdHVzJzogJ2RvbmUnLCAnY29udGVudCc6IG1zZywgJ2NoYXRJZCc6ICcnIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRXJyb3JSZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSlcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICByZXR1cm4gRXJyb3JSZXN1bHQ7XG4gICAgfSk7XG59KTtcbmV4cG9ydHMuZ2V0RGljdGlvbmFyeURhdGEgPSBnZXREaWN0aW9uYXJ5RGF0YTtcbi8vIEFJIOe7mOWbvlxuZnVuY3Rpb24gZ2VuZXJhdGlvbnNJbWFnZXMocHJvbXB0KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgZ2V0QUlQYXJhbWV0ZXIoW10pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgY29uc3Qgb3BlbkFwaUVuZHBvaW50ID0gKF9hID0gcmVzdWx0LmRhdGEpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbWFnZXNHZW5lcmF0aW9ucy51cmw7XG4gICAgICAgICAgICBpZiAoIXJlc3VsdC5kYXRhIHx8IG9wZW5BcGlFbmRwb2ludCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDkvb/nlKggb3BlbiByb3V0ZXIg5ZKMIGFpcHJveHkg5pyN5Yqh5pe25peg5rOV6I635Y+W5Zu+54mHXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5hcGlLZXlTZWxlY3Rpb24gPT09ICdsaWNlbnNlS2V5JyB8fCAob3BlbkFwaUVuZHBvaW50ID09PSBudWxsIHx8IG9wZW5BcGlFbmRwb2ludCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3BlbkFwaUVuZHBvaW50LmluZGV4T2YoJ2FwaS5haXByb3h5JykpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdzdWNjZWVkZWQnOiBmYWxzZSwgZGF0YTogW10gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgIFwicHJvbXB0XCI6IHByb21wdCxcbiAgICAgICAgICAgICAgICAgICAgXCJuXCI6IDIsXG4gICAgICAgICAgICAgICAgICAgIFwic2l6ZVwiOiBcIjUxMng1MTJcIlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IHJlc3VsdC5kYXRhLmltYWdlc0dlbmVyYXRpb25zLmhlYWRlcnM7XG4gICAgICAgICAgICAgICAgZmV0Y2gob3BlbkFwaUVuZHBvaW50LCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzXG4gICAgICAgICAgICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdzdWNjZWVkZWQnOiBmYWxzZSwgJ2RhdGEnOiB7fSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5qc29uKCkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09PSBcIm5vdFJ1bm5pbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF6dXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nTGlzdCA9IG9wZW5BcGlFbmRwb2ludC5zcGxpdCgnL29wZW5haS8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBzdHJpbmdMaXN0WzBdICsgJy9vcGVuYWkvJyArICdvcGVyYXRpb25zL2ltYWdlcy8nICsgZGF0YS5pZCArICc/YXBpLXZlcnNpb249MjAyMy0wNi0wMS1wcmV2aWV3JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaCh1cmwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09PSAnc3VjY2VlZGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeyAnc3VjY2VlZGVkJzogdHJ1ZSwgJ2RhdGEnOiBkYXRhLnJlc3VsdCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpOyAvLyDku7vliqHmiJDlip/ml7bmuIXpmaTova7or6JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gJ2ZhaWxlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eUn+aIkOWbvueJh+Wksei0pVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeyAnc3VjY2VlZGVkJzogZmFsc2UsICdkYXRhJzogZGF0YS5lcnJvciB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpOyAvLyDku7vliqHmiJDlip/ml7bmuIXpmaTova7or6JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ2Vycm9yJyBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeyAnc3VjY2VlZGVkJzogZmFsc2UsICdkYXRhJzogZGF0YS5lcnJvciB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeyAnc3VjY2VlZGVkJzogdHJ1ZSwgJ2RhdGEnOiBkYXRhIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSkpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeyAnc3VjY2VlZGVkJzogZmFsc2UsICdkYXRhJzogZXJyb3IgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZXhwb3J0cy5nZW5lcmF0aW9uc0ltYWdlcyA9IGdlbmVyYXRpb25zSW1hZ2VzO1xuZnVuY3Rpb24gZ2V0QUlQYXJhbWV0ZXIobWVzc2FnZXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBkZWZhdWx0T3BlbkFwaUVuZHBvaW50ID0gJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20nO1xuICAgICAgICAoMCwgdXRpbF8xLmdldFNldHRpbmdzKSgpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYXBpS2V5U2VsZWN0aW9uID0gcmVzdWx0LmFwaUtleVNlbGVjdGlvbjtcbiAgICAgICAgICAgIGNvbnN0IGxpY2Vuc2VLZXkgPSByZXN1bHQubGljZW5zZUtleTtcbiAgICAgICAgICAgIGxldCBvcGVuQXBpS2V5ID0gcmVzdWx0Lm9wZW5BcGlLZXk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50TGFuZ3VhZ2UgPSByZXN1bHQuY3VycmVudExhbmd1YWdlO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0TGFuZ3VhZ2UgPSByZXN1bHQudGFyZ2V0TGFuZ3VhZ2U7XG4gICAgICAgICAgICBjb25zdCBtb2RlbCA9IHJlc3VsdC5tb2RlbDtcbiAgICAgICAgICAgIGNvbnN0IGZyZWVNb2RlbCA9IHJlc3VsdC5mcmVlTW9kZWw7XG4gICAgICAgICAgICBsZXQgb3BlbkFwaUVuZHBvaW50ID0gcmVzdWx0Lm9wZW5BcGlFbmRwb2ludDtcbiAgICAgICAgICAgIGlmIChvcGVuQXBpRW5kcG9pbnQubGVuZ3RoIDwgNSkge1xuICAgICAgICAgICAgICAgIG9wZW5BcGlFbmRwb2ludCA9IGRlZmF1bHRPcGVuQXBpRW5kcG9pbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgaGVhZGVycyA9IHt9O1xuICAgICAgICAgICAgbGV0IGJvZHk7XG4gICAgICAgICAgICBsZXQgaW1nT3BlbkFwaUVuZHBvaW50ID0gJyc7XG4gICAgICAgICAgICBzd2l0Y2ggKGFwaUtleVNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3Njb3V0ZXJGcmVlQUknOlxuICAgICAgICAgICAgICAgICAgICAvLyBzY291dGVyIOaPkOS+m+eahOWFjei0uSBBSVxuICAgICAgICAgICAgICAgICAgICBvcGVuQXBpRW5kcG9pbnQgPSAnaHR0cHM6Ly9vcGVucm91dGVyLmFpL2FwaS92MS9jaGF0L2NvbXBsZXRpb25zJztcbiAgICAgICAgICAgICAgICAgICAgaW1nT3BlbkFwaUVuZHBvaW50ID0gJ2h0dHBzOi8vb3BlbnJvdXRlci5haS9hcGkvdjEvaW1hZ2VzL2dlbmVyYXRpb25zJztcbiAgICAgICAgICAgICAgICAgICAgb3BlbkFwaUtleSA9IGxpY2Vuc2VLZXk7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHByb2Nlc3MuZW52LkZSRUVfQUlfS0VZLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdIVFRQLVJlZmVyZXInOiAnaHR0cHM6Ly9ub3Rlcy5kYWJpbmcub25lLycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnWC1UaXRsZSc6ICdTY291dGVyRnJlZUFJJ1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBib2R5ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJtb2RlbFwiOiBmcmVlTW9kZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm1lc3NhZ2VzXCI6IG1lc3NhZ2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0ZW1wZXJhdHVyZVwiOiAwLjcsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm1heF90b2tlbnNcIjogNDIwLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b3BfcFwiOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJmcmVxdWVuY3lfcGVuYWx0eVwiOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJwcmVzZW5jZV9wZW5hbHR5XCI6IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0cmVhbVwiOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3Jlc3VsdCc6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdhcGlLZXlTZWxlY3Rpb24nOiBhcGlLZXlTZWxlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2hhdENvbXBsZXRpb25zJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndXJsJzogb3BlbkFwaUVuZHBvaW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGVhZGVycyc6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdib2R5JzogYm9keVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ltYWdlc0dlbmVyYXRpb25zJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndXJsJzogaW1nT3BlbkFwaUVuZHBvaW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGVhZGVycyc6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbGljZW5zZUtleSc6XG4gICAgICAgICAgICAgICAgICAgIC8vIG9wZW5yb3V0ZXJcbiAgICAgICAgICAgICAgICAgICAgb3BlbkFwaUtleSA9IGxpY2Vuc2VLZXk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGVuQXBpS2V5Lmxlbmd0aCA8IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdyZXN1bHQnOiAnZmFpbHVyZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FwaUtleVNlbGVjdGlvbic6IGFwaUtleVNlbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9wZW5BcGlFbmRwb2ludCA9ICdodHRwczovL29wZW5yb3V0ZXIuYWkvYXBpL3YxL2NoYXQvY29tcGxldGlvbnMnO1xuICAgICAgICAgICAgICAgICAgICBpbWdPcGVuQXBpRW5kcG9pbnQgPSAnaHR0cHM6Ly9vcGVucm91dGVyLmFpL2FwaS92MS9pbWFnZXMvZ2VuZXJhdGlvbnMnO1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBvcGVuQXBpS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdIVFRQLVJlZmVyZXInOiAnaHR0cHM6Ly9ub3Rlcy5kYWJpbmcub25lLycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnWC1UaXRsZSc6ICdTY291dGVyJ1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBib2R5ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJtb2RlbFwiOiBtb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibWVzc2FnZXNcIjogbWVzc2FnZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRlbXBlcmF0dXJlXCI6IDAuNyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibWF4X3Rva2Vuc1wiOiA0MjAsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRvcF9wXCI6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImZyZXF1ZW5jeV9wZW5hbHR5XCI6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInByZXNlbmNlX3BlbmFsdHlcIjogMixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3RyZWFtXCI6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAncmVzdWx0JzogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2FwaUtleVNlbGVjdGlvbic6IGFwaUtleVNlbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjaGF0Q29tcGxldGlvbnMnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd1cmwnOiBvcGVuQXBpRW5kcG9pbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoZWFkZXJzJzogaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JvZHknOiBib2R5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaW1hZ2VzR2VuZXJhdGlvbnMnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd1cmwnOiBpbWdPcGVuQXBpRW5kcG9pbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoZWFkZXJzJzogaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdvbGxhbWEnOlxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0geyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLCB9O1xuICAgICAgICAgICAgICAgICAgICBvcGVuQXBpRW5kcG9pbnQgPSByZXN1bHQub2xsYW1hQXBpRW5kcG9pbnQ7XG4gICAgICAgICAgICAgICAgICAgIC8vIOWOu+mZpOerr+eCueacq+WwvueahCBcXCDnrKblj7dcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZW5BcGlFbmRwb2ludC5zbGljZSgtMSkgPT09IFwiL1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuQXBpRW5kcG9pbnQgPSBvcGVuQXBpRW5kcG9pbnQuc2xpY2UoMCwgLTEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGltZ09wZW5BcGlFbmRwb2ludCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBvcGVuQXBpRW5kcG9pbnQgKz0gJy9hcGkvY2hhdCc7XG4gICAgICAgICAgICAgICAgICAgIGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIm1vZGVsXCI6IHJlc3VsdC5vbGxhbWFNb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibWVzc2FnZXNcIjogbWVzc2FnZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcInRlbXBlcmF0dXJlXCI6IDAuNyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFwibWF4X3Rva2Vuc1wiOiA0MjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcInRvcF9wXCI6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcImZyZXF1ZW5jeV9wZW5hbHR5XCI6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcInByZXNlbmNlX3BlbmFsdHlcIjogMixcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFwic3RyZWFtXCI6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAncmVzdWx0JzogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2FwaUtleVNlbGVjdGlvbic6IGFwaUtleVNlbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjaGF0Q29tcGxldGlvbnMnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd1cmwnOiBvcGVuQXBpRW5kcG9pbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoZWFkZXJzJzogaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JvZHknOiBib2R5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaW1hZ2VzR2VuZXJhdGlvbnMnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd1cmwnOiBpbWdPcGVuQXBpRW5kcG9pbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoZWFkZXJzJzogaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdteU93bk9wZW5BaUtleSc6XG4gICAgICAgICAgICAgICAgICAgIC8vIOS9v+eUqOeUqOaIt+iHquW3seeahCBLZXlcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZW5BcGlLZXkubGVuZ3RoIDwgNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Jlc3VsdCc6ICdmYWlsdXJlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXBpS2V5U2VsZWN0aW9uJzogYXBpS2V5U2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZW5BcGlFbmRwb2ludC5pbmRleE9mKCdhenVyZS5jb20nKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBenVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJ2h0dHBzOi8vWU9VUkRFUExPWU1FTlRTLm9wZW5haS5henVyZS5jb20vb3BlbmFpL2RlcGxveW1lbnRzL1lPVVJERVBMT1lNRU5UUy9jaGF0L2NvbXBsZXRpb25zP2FwaS12ZXJzaW9uPTIwMjMtMDMtMTUtcHJldmlldydcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmluZ0xpc3QgPSBvcGVuQXBpRW5kcG9pbnQuc3BsaXQoJy9vcGVuYWkvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbWdPcGVuQXBpRW5kcG9pbnQgPSBzdHJpbmdMaXN0WzBdICsgJy9vcGVuYWkvJyArICdpbWFnZXMvZ2VuZXJhdGlvbnM6c3VibWl0P2FwaS12ZXJzaW9uPTIwMjMtMDYtMDEtcHJldmlldyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0geyAnYXBpLWtleSc6IG9wZW5BcGlLZXksICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibW9kZWxcIjogXCJncHQtMzUtdHVyYm9cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1lc3NhZ2VzXCI6IG1lc3NhZ2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidGVtcGVyYXR1cmVcIjogMC43LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibWF4X3Rva2Vuc1wiOiA0MjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b3BfcFwiOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZnJlcXVlbmN5X3BlbmFsdHlcIjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInByZXNlbmNlX3BlbmFsdHlcIjogMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0cmVhbVwiOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9wZW5BcGlFbmRwb2ludC5pbmRleE9mKCdhcGkucGF3YW4ua3JkJykgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF3YW5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtb2RlbCA9ICdwYWktMDAxJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gL1xcL1xcL1teXFwvXStcXC8oW15cXC9dKylcXC8vO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBvcGVuQXBpRW5kcG9pbnQubWF0Y2gocmVnZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgb3BlbkFwaUtleSwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWOu+mZpCB2MSDnrKblj7dcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5BcGlFbmRwb2ludCA9IG9wZW5BcGlFbmRwb2ludC5yZXBsYWNlKCd2MScsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWOu+mZpOerr+eCueacq+WwvueahCBcXCDnrKblj7dcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcGVuQXBpRW5kcG9pbnQuc2xpY2UoLTEpID09PSBcIi9cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5BcGlFbmRwb2ludCA9IG9wZW5BcGlFbmRwb2ludC5zbGljZSgwLCAtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpbWdPcGVuQXBpRW5kcG9pbnQgPSBvcGVuQXBpRW5kcG9pbnQgKyAnL3YxL2ltYWdlcy9nZW5lcmF0aW9ucyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuQXBpRW5kcG9pbnQgKz0gJy92MS9jaGF0L2NvbXBsZXRpb25zJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtb2RlbFwiOiBtb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1lc3NhZ2VzXCI6IG1lc3NhZ2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidGVtcGVyYXR1cmVcIjogMC43LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibWF4X3Rva2Vuc1wiOiA0MjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b3BfcFwiOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZnJlcXVlbmN5X3BlbmFsdHlcIjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInByZXNlbmNlX3BlbmFsdHlcIjogMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0cmVhbVwiOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Jlc3VsdCc6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXBpS2V5U2VsZWN0aW9uJzogYXBpS2V5U2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2hhdENvbXBsZXRpb25zJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3VybCc6IG9wZW5BcGlFbmRwb2ludCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoZWFkZXJzJzogaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdib2R5JzogYm9keVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaW1hZ2VzR2VuZXJhdGlvbnMnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndXJsJzogaW1nT3BlbkFwaUVuZHBvaW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hlYWRlcnMnOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPcGVuQUlcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSB7ICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgb3BlbkFwaUtleSwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWOu+mZpOerr+eCueacq+WwvueahCBcXCDnrKblj7dcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcGVuQXBpRW5kcG9pbnQuc2xpY2UoLTEpID09PSBcIi9cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5BcGlFbmRwb2ludCA9IG9wZW5BcGlFbmRwb2ludC5zbGljZSgwLCAtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpbWdPcGVuQXBpRW5kcG9pbnQgPSBvcGVuQXBpRW5kcG9pbnQgKyAnL3YxL2ltYWdlcy9nZW5lcmF0aW9ucyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuQXBpRW5kcG9pbnQgKz0gJy92MS9jaGF0L2NvbXBsZXRpb25zJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJtb2RlbFwiOiBcImdwdC0zLjUtdHVyYm9cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1lc3NhZ2VzXCI6IG1lc3NhZ2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidGVtcGVyYXR1cmVcIjogMC43LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibWF4X3Rva2Vuc1wiOiA0MjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0b3BfcFwiOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZnJlcXVlbmN5X3BlbmFsdHlcIjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInByZXNlbmNlX3BlbmFsdHlcIjogMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInN0cmVhbVwiOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3Jlc3VsdCc6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdhcGlLZXlTZWxlY3Rpb24nOiBhcGlLZXlTZWxlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2hhdENvbXBsZXRpb25zJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndXJsJzogb3BlbkFwaUVuZHBvaW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGVhZGVycyc6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdib2R5JzogYm9keVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ltYWdlc0dlbmVyYXRpb25zJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndXJsJzogaW1nT3BlbkFwaUVuZHBvaW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGVhZGVycyc6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hhdEdQVCBXZWJcbiAgICAgICAgICAgICAgICAgICAgLy8g6I635Y+WIHRva2VuXG4gICAgICAgICAgICAgICAgICAgIGdldENoYXRHUFRXZWJUb2tlbigpLnRoZW4odG9rZW4gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TWVzc2FnZXMgPSBtZXNzYWdlcy5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogKDAsIHV1aWRfMS52NCkoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZTogaXRlbS5yb2xlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50X3R5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRzOiBbaXRlbS5jb250ZW50XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuQXBpRW5kcG9pbnQgPSAnaHR0cHM6Ly9jaGF0Lm9wZW5haS5jb20vYmFja2VuZC1hcGkvY29udmVyc2F0aW9uJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGltZ09wZW5BcGlFbmRwb2ludCA9ICdodHRwczovL29wZW5yb3V0ZXIuYWkvYXBpL3YxL2ltYWdlcy9nZW5lcmF0aW9ucyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlblxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnbmV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXM6IG5ld01lc3NhZ2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiAndGV4dC1kYXZpbmNpLTAwMi1yZW5kZXItc2hhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRfbWVzc2FnZV9pZDogKDAsIHV1aWRfMS52NCkoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaXN0b3J5X2FuZF90cmFpbmluZ19kaXNhYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAncmVzdWx0JzogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhcGlLZXlTZWxlY3Rpb24nOiBhcGlLZXlTZWxlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjaGF0Q29tcGxldGlvbnMnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndXJsJzogb3BlbkFwaUVuZHBvaW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hlYWRlcnMnOiBoZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JvZHknOiBib2R5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpbWFnZXNHZW5lcmF0aW9ucyc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd1cmwnOiBpbWdPcGVuQXBpRW5kcG9pbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGVhZGVycyc6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6ZSZ6K+v5aSE55CGXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IgKyAnIFBsZWFzZSBFbnN1cmUgdGhhdCBZb3UgQXJlIExvZ2dlZCBpbnRvIFtDaGF0R1BUXShodHRwczovL2NoYXQub3BlbmFpLmNvbS8pLicpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZXhwb3J0cy5nZXRBSVBhcmFtZXRlciA9IGdldEFJUGFyYW1ldGVyO1xuZnVuY3Rpb24gZ2V0Q2hhdEdQVFdlYlRva2VuKCkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdnZXRDaGF0R1BUV2ViVG9rZW4nKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHdlYmV4dGVuc2lvbl9wb2x5ZmlsbF8xLmRlZmF1bHQuc3RvcmFnZS5sb2NhbC5nZXQoWydhdXRoRGF0YSddKS50aGVuKChyZXN1bHQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdXRoRGF0YSA9IHJlc3VsdC5hdXRoRGF0YTtcbiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICBpZiAoYXV0aERhdGEgJiYgYXV0aERhdGEudG9rZW4gJiYgYXV0aERhdGEuZXhwaXJ5ICYmIGF1dGhEYXRhLmV4cGlyeSA+IG5vdykge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGF1dGhEYXRhLnRva2VuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2NoYXQub3BlbmFpLmNvbS9hcGkvYXV0aC9zZXNzaW9uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHJlamVjdChcIkNvdWxkbid0IGZldGNoIHRoZSB0b2tlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmV0Y2ggdGhlIHRva2VuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmICgnYWNjZXNzVG9rZW4nIGluIGRhdGEgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgcmVqZWN0KFwiQ291bGRuJ3QgZmV0Y2ggdGhlIHRva2VuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc3QgdXBkYXRlZEF1dGhEYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICB0b2tlbjogZGF0YS5hY2Nlc3NUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgZXhwaXJ5OiBEYXRlLnBhcnNlKGRhdGEuZXhwaXJlcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJyb3dzZXIuc3RvcmFnZS5sb2NhbC5zZXQoeyBhdXRoRGF0YTogdXBkYXRlZEF1dGhEYXRhIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICByZXNvbHZlKHVwZGF0ZWRBdXRoRGF0YS50b2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKDAsIGV4cG9ydHMuZ2V0Q2hhdEdQVFNlc3Npb24pKCkudGhlbih0b2tlbiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0b2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5leHBvcnRzLmdldENoYXRHUFRXZWJUb2tlbiA9IGdldENoYXRHUFRXZWJUb2tlbjtcbi8vIOiOt+WPliBBbmtpIOeahCBEZWNrIOWQjeensO+8jOa3u+WKoOWIsOWNoeeJh+S8muWtmOaUvuWIsOi/memHjFxuZnVuY3Rpb24gZ2V0RGVmYXVsdERlY2tOYW1lKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGxldCBkZWZhdWx0RGVja05hbWUgPSAnJztcbiAgICAgICAgLy8g6I635Y+W55So5oi36K6+572u55qEIERlY2sgTmFtZVxuICAgICAgICB3ZWJleHRlbnNpb25fcG9seWZpbGxfMS5kZWZhdWx0LnN0b3JhZ2Uuc3luYy5nZXQoW1wiYW5raURlY2tOYW1lXCJdKS50aGVuKChyZXN1bHQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZXN1bHQ6Jyk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5hbmtpRGVja05hbWUpIHtcbiAgICAgICAgICAgICAgICAvLyDnlKjmiLfmnInorr7nva5cbiAgICAgICAgICAgICAgICBkZWZhdWx0RGVja05hbWUgPSByZXN1bHQuYW5raURlY2tOYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8g55So5oi35pyq6K6+572uXG4gICAgICAgICAgICAgICAgLy8g6I635Y+WIEFua2kg55qE54mM57uE5YiX6KGoXG4gICAgICAgICAgICAgICAgZGVmYXVsdERlY2tOYW1lID0geWllbGQgYW5raUFjdGlvbignZGVja05hbWVzJywgNikudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOWwhuesrOS4gOS4queJjOe7hOS9nOS4uum7mOiupOeJjOe7hFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnJlc3VsdFswXTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvbHZlKHsgJ2RlZmF1bHREZWNrTmFtZSc6IGRlZmF1bHREZWNrTmFtZSB9KTtcbiAgICAgICAgfSkpO1xuICAgIH0pO1xufVxuZXhwb3J0cy5nZXREZWZhdWx0RGVja05hbWUgPSBnZXREZWZhdWx0RGVja05hbWU7XG5jb25zdCBwbGF5VGV4dFRvU3BlZWNoID0gKHRleHQsIHZvaWNlLCB0YXJnZXRMYW5ndWFnZSkgPT4ge1xuICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSA+PSAwKSB7XG4gICAgICAgIGNvbnN0IGF1ZGlvVXJsID0gbGFuZ18xLmxhbmdbdGFyZ2V0TGFuZ3VhZ2VdWydhdWRpb1VSTCddO1xuICAgICAgICBsZXQgYXVkaW8gPSBuZXcgQXVkaW8oYXVkaW9VcmwgKyB0ZXh0KTtcbiAgICAgICAgYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkZGF0YScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgYXVkaW8ucGxheSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGF1ZGlvQ29uZmlnID0gc2RrLkF1ZGlvQ29uZmlnLmZyb21EZWZhdWx0U3BlYWtlck91dHB1dCgpO1xuICAgICAgICBjb25zdCBzcGVlY2hDb25maWcgPSBzZGsuU3BlZWNoQ29uZmlnLmZyb21TdWJzY3JpcHRpb24ocHJvY2Vzcy5lbnYuQVpVUkVfVFRTX0FQSV9LRVksIHByb2Nlc3MuZW52LkFaVVJFX1RUU19TUEVFQ0hfUkVHSU9OKTtcbiAgICAgICAgc3BlZWNoQ29uZmlnLnNwZWVjaFN5bnRoZXNpc1ZvaWNlTmFtZSA9IHZvaWNlO1xuICAgICAgICBzcGVlY2hDb25maWcuc3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0ID0gc2RrLlNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdC5BdWRpbzE2S2h6MTI4S0JpdFJhdGVNb25vTXAzO1xuICAgICAgICBjb25zdCBzeW50aGVzaXplciA9IG5ldyBzZGsuU3BlZWNoU3ludGhlc2l6ZXIoc3BlZWNoQ29uZmlnLCBhdWRpb0NvbmZpZyk7XG4gICAgICAgIHN5bnRoZXNpemVyLnNwZWFrVGV4dEFzeW5jKHRleHQsIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQucmVhc29uID09PSBzZGsuUmVzdWx0UmVhc29uLlN5bnRoZXNpemluZ0F1ZGlvQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3N5bnRoZXNpcyBmaW5pc2hlZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NwZWVjaCBzeW50aGVzaXMgY2FuY2VsZWQsICcgKyByZXN1bHQuZXJyb3JEZXRhaWxzICsgJ1xcbkRpZCB5b3Ugc2V0IHRoZSBzcGVlY2ggcmVzb3VyY2Uga2V5IGFuZCByZWdpb24gdmFsdWVzPycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3ludGhlc2l6ZXIuY2xvc2UoKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgc3ludGhlc2l6ZXIuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxufTtcbmV4cG9ydHMucGxheVRleHRUb1NwZWVjaCA9IHBsYXlUZXh0VG9TcGVlY2g7XG5jb25zdCB0ZXh0VG9TcGVlY2hEb3dubG9hZCA9ICh0ZXh0LCB2b2ljZSkgPT4ge1xuICAgIGNvbnN0IHB1bGxTdHJlYW0gPSBzZGsuQXVkaW9PdXRwdXRTdHJlYW0uY3JlYXRlUHVsbFN0cmVhbSgpO1xuICAgIGNvbnN0IGF1ZGlvQ29uZmlnID0gc2RrLkF1ZGlvQ29uZmlnLmZyb21TdHJlYW1PdXRwdXQocHVsbFN0cmVhbSk7XG4gICAgY29uc3Qgc3BlZWNoQ29uZmlnID0gc2RrLlNwZWVjaENvbmZpZy5mcm9tU3Vic2NyaXB0aW9uKHByb2Nlc3MuZW52LkFaVVJFX1RUU19BUElfS0VZLCBwcm9jZXNzLmVudi5BWlVSRV9UVFNfU1BFRUNIX1JFR0lPTik7XG4gICAgc3BlZWNoQ29uZmlnLnNwZWVjaFN5bnRoZXNpc1ZvaWNlTmFtZSA9IHZvaWNlO1xuICAgIHNwZWVjaENvbmZpZy5zcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQgPSBzZGsuU3BlZWNoU3ludGhlc2lzT3V0cHV0Rm9ybWF0LkF1ZGlvMTZLaHoxMjhLQml0UmF0ZU1vbm9NcDM7XG4gICAgY29uc3Qgc3ludGhlc2l6ZXIgPSBuZXcgc2RrLlNwZWVjaFN5bnRoZXNpemVyKHNwZWVjaENvbmZpZywgYXVkaW9Db25maWcpO1xuICAgIHN5bnRoZXNpemVyLnNwZWFrVGV4dEFzeW5jKHRleHQsIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHN5bnRoZXNpemVyLmNsb3NlKCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0LnJlYXNvbiA9PT0gc2RrLlJlc3VsdFJlYXNvbi5TeW50aGVzaXppbmdBdWRpb0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgIGxldCBhbGxDaHVua3MgPSBbXTtcbiAgICAgICAgICAgICAgICBsZXQgY2h1bms7XG4gICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0J1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcigxNjAwMCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rQ291bnQgPSB5aWVsZCBwdWxsU3RyZWFtLnJlYWQoYXVkaW9CdWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICBjaHVuayA9IGF1ZGlvQnVmZmVyLnNsaWNlKDAsIGNodW5rQ291bnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmtDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbENodW5rcy5wdXNoKGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gd2hpbGUgKGNodW5rLmJ5dGVMZW5ndGggPiAwKTtcbiAgICAgICAgICAgICAgICBsZXQgYmxvYiA9IG5ldyBCbG9iKGFsbENodW5rcywgeyAndHlwZSc6ICdhdWRpby9tcDMnIH0pO1xuICAgICAgICAgICAgICAgIGxldCB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICAgICAgICBsZXQgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpO1xuICAgICAgICAgICAgICAgIGEuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBhLmhyZWYgPSB1cmw7XG4gICAgICAgICAgICAgICAgYS5kb3dubG9hZCA9IGBBdWRpb18ke25ldyBEYXRlKCkuZ2V0VGltZSgpfS5tcDNgO1xuICAgICAgICAgICAgICAgIGEuY2xpY2soKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBUVFMgRmFpbGVkOiAke3Jlc3VsdC5lcnJvckRldGFpbHN9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwdWxsU3RyZWFtLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBUVFMgRmFpbGVkOiAke2Vycm9yfWApO1xuICAgICAgICBzeW50aGVzaXplci5jbG9zZSgpO1xuICAgICAgICBwdWxsU3RyZWFtLmNsb3NlKCk7XG4gICAgfSk7XG59O1xuZXhwb3J0cy50ZXh0VG9TcGVlY2hEb3dubG9hZCA9IHRleHRUb1NwZWVjaERvd25sb2FkO1xuY29uc3QgZ2V0Q2hhdEdQVFNlc3Npb24gPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAvLyBjb25zdCBVUkwgPSAnaHR0cHM6Ly9jaGF0Lm9wZW5haS5jb20vYXBpL2F1dGgvc2Vzc2lvbidcbiAgICAvLyB0cnkge1xuICAgIC8vICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChVUkwpO1xuICAgIC8vICAgLy8g5Y+v6IO96ZyA6KaB5aSE55CG6ZmkMjAw5aSW55qE5YW25LuW54q25oCB56CB77yaXG4gICAgLy8gICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgLy8gICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCBlcnJvciwgc3RhdHVzID0gJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgLy8gICB9XG4gICAgLy8gICAvLyDlgYforr7mnI3liqHlmajov5Tlm57kuoZKU09O5qC85byP55qE5ZON5bqU5L2T77yaXG4gICAgLy8gICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIC8vICAgcmV0dXJuIGRhdGE7XG4gICAgLy8gfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBmZXRjaCBzZXNzaW9uOiAke2Vycm9yfWApO1xuICAgIC8vICAgdGhyb3cgZXJyb3I7IC8vIOaIluiAhei/lOWbnuS4gOS4qum7mOiupOeahC/plJnor6/nmoTnu5PmnpxcbiAgICAvLyB9XG4gICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCBmZXRjaCgnaHR0cHM6Ly9jaGF0Lm9wZW5haS5jb20vYXBpL2F1dGgvc2Vzc2lvbicpO1xuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgcmV0dXJuIFwiQ291bGRuJ3QgZmV0Y2ggdGhlIHRva2VuXCI7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZldGNoIHRoZSB0b2tlblwiKTtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IHlpZWxkIHJlc3BvbnNlLmpzb24oKTtcbiAgICBpZiAoJ2FjY2Vzc1Rva2VuJyBpbiBkYXRhICE9PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBcIkNvdWxkbid0IGZldGNoIHRoZSB0b2tlblwiO1xuICAgIH1cbiAgICBjb25zdCB1cGRhdGVkQXV0aERhdGEgPSB7XG4gICAgICAgIHRva2VuOiBkYXRhLmFjY2Vzc1Rva2VuLFxuICAgICAgICBleHBpcnk6IERhdGUucGFyc2UoZGF0YS5leHBpcmVzKVxuICAgIH07XG4gICAgd2ViZXh0ZW5zaW9uX3BvbHlmaWxsXzEuZGVmYXVsdC5zdG9yYWdlLmxvY2FsLnNldCh7IGF1dGhEYXRhOiB1cGRhdGVkQXV0aERhdGEgfSkudGhlbigoKSA9PiB7XG4gICAgICAgIHJldHVybiB1cGRhdGVkQXV0aERhdGEudG9rZW47XG4gICAgfSk7XG59KTtcbmV4cG9ydHMuZ2V0Q2hhdEdQVFNlc3Npb24gPSBnZXRDaGF0R1BUU2Vzc2lvbjtcbmNvbnN0IGZldGNoU1NFID0gKHVybCwgcmVxdWVzdEluaXQsIG9wdGlvbnMsIGFwaVR5cGUpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCB7IG9uTWVzc2FnZSwgb25FbmQsIG9uRXJyb3IgfSA9IG9wdGlvbnM7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCBmZXRjaCh1cmwsIHJlcXVlc3RJbml0KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgb25FcnJvciAmJiBvbkVycm9yKG5ldyBFcnJvcihgSFRUUCBlcnJvciwgc3RhdHVzID0gJHtyZXNwb25zZS5zdGF0dXN9YCkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlciA9ICgwLCBldmVudHNvdXJjZV9wYXJzZXJfMS5jcmVhdGVQYXJzZXIpKChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdldmVudCcpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGF0YSAhPT0gJ1tET05FXScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb25NZXNzYWdlICYmIG9uTWVzc2FnZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgb25FcnJvciAmJiBvbkVycm9yKG5ldyBFcnJvcignRmFpbGVkIHRvIHBhcnNlIFNTRSBldmVudCBkYXRhJykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IChfYSA9IHJlc3BvbnNlLmJvZHkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRSZWFkZXIoKTtcbiAgICAgICAgaWYgKHJlYWRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IHlpZWxkIHJlYWRlci5yZWFkKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkVuZCAmJiBvbkVuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyID0gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFwaVR5cGUgPT09ICdvbGxhbWEnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udGVudHMgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb25TdHJpbmdzID0gc3RyLnRyaW0oKS5zcGxpdCgnXFxuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uU3RyaW5ncy5mb3JFYWNoKGpzb25TdHIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOino+aekOavj+S4qiBKU09OIOWtl+espuS4suaIkOS4uuS4gOS4quWvueixoVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uT2JqZWN0ID0gSlNPTi5wYXJzZShqc29uU3RyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25PYmplY3QubWVzc2FnZSAmJiBqc29uT2JqZWN0Lm1lc3NhZ2UuY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudHMgKz0ganNvbk9iamVjdC5tZXNzYWdlLmNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJQYXJzaW5nIGVycm9yOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhuino+aekOmUmeivr++8jOS+i+WmguaJk+WNsOmUmeivr+aXpeW/l1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgb25NZXNzYWdlICYmIG9uTWVzc2FnZShjb250ZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuZmVlZChzdHIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgcmVhZGVyLnJlbGVhc2VMb2NrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJzZXIucmVzZXQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgb25FcnJvciAmJiBvbkVycm9yKG5ldyBFcnJvcihgRmV0Y2ggcmVxdWVzdCBmYWlsZWQ6ICR7ZXJyb3J9YCkpO1xuICAgIH1cbn0pO1xuZXhwb3J0cy5mZXRjaFNTRSA9IGZldGNoU1NFO1xuLy8gZXhwb3J0IGNvbnN0IHBsYXlUZXh0VG9TcGVlY2ggPSBhc3luYyAodGV4dDogc3RyaW5nLCB2b2ljZTogc3RyaW5nKSA9PiB7XG4vLyAgIGNvbnN0IHNwZWVjaENvbmZpZyA9IHNkay5TcGVlY2hDb25maWcuZnJvbVN1YnNjcmlwdGlvbihwcm9jZXNzLmVudi5BWlVSRV9UVFNfQVBJX0tFWSBhcyBzdHJpbmcsIHByb2Nlc3MuZW52LkFaVVJFX1RUU19TUEVFQ0hfUkVHSU9OIGFzIHN0cmluZyk7XG4vLyAgIHNwZWVjaENvbmZpZy5zcGVlY2hTeW50aGVzaXNWb2ljZU5hbWUgPSB2b2ljZTtcbi8vICAgc3BlZWNoQ29uZmlnLnNwZWVjaFN5bnRoZXNpc091dHB1dEZvcm1hdCA9IHNkay5TcGVlY2hTeW50aGVzaXNPdXRwdXRGb3JtYXQuUmlmZjE2S2h6MTZCaXRNb25vUGNtO1xuLy8gICBjb25zdCBzeW50aGVzaXplciA9IG5ldyBzZGsuU3BlZWNoU3ludGhlc2l6ZXIoc3BlZWNoQ29uZmlnLCB1bmRlZmluZWQpO1xuLy8gICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4vLyAgICAgc3ludGhlc2l6ZXIuc3BlYWtUZXh0QXN5bmMoXG4vLyAgICAgICB0ZXh0LFxuLy8gICAgICAgZnVuY3Rpb24gKHJlc3VsdCkge1xuLy8gICAgICAgICBpZiAocmVzdWx0LnJlYXNvbiA9PT0gc2RrLlJlc3VsdFJlYXNvbi5TeW50aGVzaXppbmdBdWRpb0NvbXBsZXRlZCkge1xuLy8gICAgICAgICAgIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW3Jlc3VsdC5hdWRpb0RhdGFdKSkpO1xuLy8gICAgICAgICAgIGF1ZGlvLnBsYXkoKTtcbi8vICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuLy8gICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgIHJlamVjdChcbi8vICAgICAgICAgICAgICdTcGVlY2ggc3ludGhlc2lzIGNhbmNlbGVkLCAnICsgcmVzdWx0LmVycm9yRGV0YWlscyArICdcXG5EaWQgeW91IHNldCB0aGUgc3BlZWNoIHJlc291cmNlIGtleSBhbmQgcmVnaW9uIHZhbHVlcz8nXG4vLyAgICAgICAgICAgKTtcbi8vICAgICAgICAgfVxuLy8gICAgICAgfSxcbi8vICAgICAgIGZ1bmN0aW9uIChlcnIpIHtcbi8vICAgICAgICAgcmVqZWN0KCdlcnIgLSAnICsgZXJyKTtcbi8vICAgICAgIH1cbi8vICAgICApO1xuLy8gICB9KS5maW5hbGx5KCgpID0+IHtcbi8vICAgICBzeW50aGVzaXplci5jbG9zZSgpO1xuLy8gICB9KTtcbi8vIH07XG5jb25zdCBnZXRCYWxhbmNlID0gKGFwaUtleSkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHVybCA9ICdodHRwczovL29wZW5yb3V0ZXIuYWkvYXBpL3YxL2F1dGgva2V5JztcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhcGlLZXksICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsIH07XG4gICAgICAgIGZldGNoKHVybCwge1xuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyc1xuICAgICAgICB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgcmVzcG9uc2UuanNvbigpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcbmV4cG9ydHMuZ2V0QmFsYW5jZSA9IGdldEJhbGFuY2U7XG5jb25zdCBjaGVja0xpY2Vuc2VLZXkgPSAoa2V5KSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICBjb25zb2xlLmxvZygnY2hlY2tMaWNlbnNlS2V5IGZyb20gbGVtb25zcXVlZXp5OicpO1xuICAgIGxldCB2ZXJpZmllZCA9IGZhbHNlO1xuICAgIC8vIOS7jiBMZW1vbnNxdWVlenkg6aqM6K+BIEtleVxuICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgZmV0Y2goJ2h0dHBzOi8vYXBpLmxlbW9uc3F1ZWV6eS5jb20vdjEvbGljZW5zZXMvdmFsaWRhdGUnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBsaWNlbnNlX2tleToga2V5LFxuICAgICAgICB9KVxuICAgIH0pO1xuICAgIGNvbnN0IGRhdGEgPSB5aWVsZCByZXNwb25zZS5qc29uKCk7IC8vIOWPr+S7peS9v+eUqOi/meS4quadpei/m+ihjOmineWklueahOaTjeS9nFxuICAgIHZlcmlmaWVkID0gZGF0YS52YWxpZDtcbiAgICBjb25zb2xlLmxvZyh2ZXJpZmllZCk7XG4gICAgaWYgKCF2ZXJpZmllZCkge1xuICAgICAgICBjb25zb2xlLmxvZygnY2hlY2tMaWNlbnNlS2V5IGZyb20gZGFiaW5nOicpO1xuICAgICAgICBjb25zdCByZXMgPSB5aWVsZCBmZXRjaCgnaHR0cHM6Ly9hcGkuc2NvdXRlci5kYWJpbmcub25lL2FwaS9jaGVja3RMaWNlbnNlS2V5Jywge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIHJlcy5qc29uKCk7XG4gICAgICAgIHZlcmlmaWVkID0gZGF0YS52ZXJpZmllZDtcbiAgICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKHZlcmlmaWVkKTtcbiAgICByZXR1cm4gdmVyaWZpZWQ7XG59KTtcbmNvbnN0IGdldFVzZXJJbmZvID0gKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdnZXRVc2VySW5mbycpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICgwLCB1dGlsXzEuZ2V0U2V0dGluZ3MpKCkudGhlbigocmVzdWx0KSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmICh3ZWJleHRlbnNpb25fcG9seWZpbGxfMS5kZWZhdWx0LnJ1bnRpbWUubGFzdEVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdmVyaWZpZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQubmV3TGljZW5zZUtleSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXN1bHQubmV3TGljZW5zZUtleTonKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0cnVlKTtcbiAgICAgICAgICAgICAgICB2ZXJpZmllZCA9IHlpZWxkIGNoZWNrTGljZW5zZUtleShyZXN1bHQubmV3TGljZW5zZUtleSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldFVzZXJJbmZvIHJlc3VsdDonKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2ZXJpZmllZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyDojrflj5bnlKjmiLcgSURcbiAgICAgICAgICAgIGxldCB1bmlxdWVJZDtcbiAgICAgICAgICAgIGlmIChyZXN1bHQudXNlcklkKSB7XG4gICAgICAgICAgICAgICAgdW5pcXVlSWQgPSByZXN1bHQudXNlcklkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdW5pcXVlSWQgPSAoMCwgdXVpZF8xLnY0KSgpO1xuICAgICAgICAgICAgICAgIHdlYmV4dGVuc2lvbl9wb2x5ZmlsbF8xLmRlZmF1bHQuc3RvcmFnZS5zeW5jLnNldCh7IHVzZXJJZDogdW5pcXVlSWQgfSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaHJvbWUucnVudGltZS5sYXN0RXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh3ZWJleHRlbnNpb25fcG9seWZpbGxfMS5kZWZhdWx0LnJ1bnRpbWUubGFzdEVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc29sdmUodW5pcXVlSWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHsgJ3VzZXJJZCc6IHVuaXF1ZUlkLCAndmVyaWZpZWQnOiB2ZXJpZmllZCwgJ2NvbnRleHRNZW51JzogcmVzdWx0LmNvbnRleHRNZW51LCAnc2hvd1lvdXR1YmVCdXR0b24nOiByZXN1bHQuc2hvd1lvdXR1YmVCdXR0b24gfTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXNwb25zZTonKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICB9KSk7XG4gICAgfSk7XG59O1xuZXhwb3J0cy5nZXRVc2VySW5mbyA9IGdldFVzZXJJbmZvO1xuLyog5Y2h54mH5qC35byP5Y+v6IO96ZqP552A54mI5pys6L+t5Luj5LiN5pat5pu05paw77yMKOWIoOaOieaLrOWPt+WGheeahOaWh+Wtl+WPr+S7peaaguWBnOiHquWKqOabtOaWsCkgfCBDYXJkIHN0eWxlcyBtYXkgYmUgdXBkYXRlZCB3aXRoIGVhY2ggdmVyc2lvbiBpdGVyYXRpb24sIChkZWxldGluZyB0aGUgdGV4dCBpbiB0aGUgcGFyZW50aGVzZXMgY2FuIHBhdXNlIHRoZSBhdXRvLXVwZGF0ZSkuICovXG5leHBvcnRzLmNhcmRTdHlsZSA9IGBcblxuICAuY2FyZCB7XG4gICAgZm9udC1mYW1pbHk6IGFyaWFsO1xuICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICBjb2xvcjogcmdiKDAgMCAwIC8gODQlKTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgIGxpbmUtaGVpZ2h0OiAxLjY7XG4gIH1cblxuICBibG9ja3F1b3RlIHtcbiAgICBib3JkZXItbGVmdDogNXB4IHNvbGlkICNjY2M7XG4gICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgbWFyZ2luLWxlZnQ6MDtcbiAgICBtYXJnaW4tcmlnaHQ6MDtcblx0XHRiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMCAwIDAgLyA0JSk7XG4gIH1cblxuICBhIHtcbiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgfVxuXG4gIGltZyB7XG4gICAgbWF4LWhlaWdodDogMzIwcHg7XG4gIH1cblxuICAuYW5raVNwYWNlIHtcbiAgICBjb2xvcjojRjA4QTI0O1xuICB9XG5cbiAgLmtleVdvcmQge1xuICAgIGNvbG9yOiNGMDhBMjQ7XG4gIH1cblxuICB0YWJsZSB7XG4gICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcbiAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICAgIG1hcmdpbjowO1xuICAgIHBhZGRpbmc6MDtcbiAgICB3aWR0aDogMTAwJTtcbiAgfVxuXG4gIHRhYmxlIHRyIHtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xuICAgIHBhZGRpbmc6IDVweDtcbiAgfVxuXG4gIHRhYmxlIHRoLCB0YWJsZSB0ZCB7XG4gICAgcGFkZGluZzogMTBweDtcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICB9XG5cbiAgdGFibGUgdGgge1xuICAgIGxldHRlci1zcGFjaW5nOiAxcHg7XG4gICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgfWA7XG4iLCJpbXBvcnQgeyBwYXJzZSB9IGZyb20gJ2NvbnRlbnQtdHlwZSc7XG5cbmZ1bmN0aW9uIF9leHRlbmRzKCkge1xuICBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH07XG5cbiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSB7fTtcbiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICB2YXIga2V5LCBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAga2V5ID0gc291cmNlS2V5c1tpXTtcbiAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlO1xuICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG52YXIgY2hlY2tJc1N0cmluZyA9IC8qI19fUFVSRV9fKi9nZXRSZWZpbmVtZW50KGZ1bmN0aW9uICh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogbnVsbDtcbn0pO1xudmFyIGlzRGVmaW5lZCA9IGZ1bmN0aW9uIGlzRGVmaW5lZCh4KSB7XG4gIHJldHVybiB4ICE9PSBudWxsICYmIHggIT09IHVuZGVmaW5lZDtcbn07XG5mdW5jdGlvbiBnZXRSZWZpbmVtZW50KGdldEIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG4gICAgcmV0dXJuIGlzRGVmaW5lZChnZXRCKGEpKTtcbiAgfTtcbn1cbnZhciBjaGVja0lzTm9uRW1wdHlBcnJheSA9IGZ1bmN0aW9uIGNoZWNrSXNOb25FbXB0eUFycmF5KGEpIHtcbiAgcmV0dXJuIGEubGVuZ3RoID4gMDtcbn07XG5cbi8qKiBUYWtlcyBhIGRpY3Rpb25hcnkgY29udGFpbmluZyBudWxsaXNoIHZhbHVlcyBhbmQgcmV0dXJucyBhIGRpY3Rpb25hcnkgb2YgYWxsIHRoZSBkZWZpbmVkXHJcbiAqIChub24tbnVsbGlzaCkgdmFsdWVzLlxyXG4gKi9cblxudmFyIGNvbXBhY3REZWZpbmVkID0gZnVuY3Rpb24gY29tcGFjdERlZmluZWQob2JqKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvYmopLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBrZXkpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciB2YWx1ZSA9IG9ialtrZXldO1xuICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgYWNjLCBpc0RlZmluZWQodmFsdWUpID8gKF9yZWYgPSB7fSwgX3JlZltrZXldID0gdmFsdWUsIF9yZWYpIDoge30pO1xuICB9LCB7fSk7XG59O1xuZnVuY3Rpb24gZmxvdygpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGZucyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBmbnNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICB2YXIgbGVuID0gZm5zLmxlbmd0aCAtIDE7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCB4ID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICB4W19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgfVxuXG4gICAgdmFyIHkgPSBmbnNbMF0uYXBwbHkodGhpcywgeCk7XG5cbiAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBsZW47IGkrKykge1xuICAgICAgeSA9IGZuc1tpXS5jYWxsKHRoaXMsIHkpO1xuICAgIH1cblxuICAgIHJldHVybiB5O1xuICB9O1xufVxuXG52YXIgY2hlY2tJc09iamVjdCA9IC8qI19fUFVSRV9fKi9nZXRSZWZpbmVtZW50KGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICByZXR1cm4gaXNEZWZpbmVkKHJlc3BvbnNlKSAmJiB0eXBlb2YgcmVzcG9uc2UgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KHJlc3BvbnNlKSA/IHJlc3BvbnNlIDogbnVsbDtcbn0pO1xudmFyIGNoZWNrSXNFcnJvcnMgPSAvKiNfX1BVUkVfXyovZ2V0UmVmaW5lbWVudChmdW5jdGlvbiAoZXJyb3JzKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KGVycm9ycykgJiYgZXJyb3JzLmV2ZXJ5KGNoZWNrSXNTdHJpbmcpICYmIGNoZWNrSXNOb25FbXB0eUFycmF5KGVycm9ycykgPyBlcnJvcnMgOiBudWxsO1xufSk7XG52YXIgY2hlY2tJc0FwaUVycm9yID0gLyojX19QVVJFX18qL2dldFJlZmluZW1lbnQoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gIHJldHVybiBjaGVja0lzT2JqZWN0KHJlc3BvbnNlKSAmJiAnZXJyb3JzJyBpbiByZXNwb25zZSAmJiBjaGVja0lzRXJyb3JzKHJlc3BvbnNlLmVycm9ycykgPyB7XG4gICAgZXJyb3JzOiByZXNwb25zZS5lcnJvcnNcbiAgfSA6IG51bGw7XG59KTtcbnZhciBnZXRFcnJvckZvckJhZFN0YXR1c0NvZGUgPSBmdW5jdGlvbiBnZXRFcnJvckZvckJhZFN0YXR1c0NvZGUoanNvblJlc3BvbnNlKSB7XG4gIGlmIChjaGVja0lzQXBpRXJyb3IoanNvblJlc3BvbnNlKSkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcnM6IGpzb25SZXNwb25zZS5lcnJvcnMsXG4gICAgICBzb3VyY2U6ICdhcGknXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3JzOiBbJ1Jlc3BvbmRlZCB3aXRoIGEgc3RhdHVzIGNvZGUgb3V0c2lkZSB0aGUgMnh4IHJhbmdlLCBhbmQgdGhlIHJlc3BvbnNlIGJvZHkgaXMgbm90IHJlY29nbmlzYWJsZS4nXSxcbiAgICAgIHNvdXJjZTogJ2RlY29kaW5nJ1xuICAgIH07XG4gIH1cbn07XG52YXIgRGVjb2RpbmdFcnJvciA9IGZ1bmN0aW9uIERlY29kaW5nRXJyb3IobWVzc2FnZSkge1xuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xufTtcblxudmFyIENPTlRFTlRfVFlQRV9SRVNQT05TRV9IRUFERVIgPSAnY29udGVudC10eXBlJztcbnZhciBDT05URU5UX1RZUEVfSlNPTiA9ICdhcHBsaWNhdGlvbi9qc29uJztcblxudmFyIGNoZWNrSXNKc29uUmVzcG9uc2UgPSBmdW5jdGlvbiBjaGVja0lzSnNvblJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gIHZhciBjb250ZW50VHlwZUhlYWRlciA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KENPTlRFTlRfVFlQRV9SRVNQT05TRV9IRUFERVIpO1xuICByZXR1cm4gaXNEZWZpbmVkKGNvbnRlbnRUeXBlSGVhZGVyKSAmJiBwYXJzZShjb250ZW50VHlwZUhlYWRlcikudHlwZSA9PT0gQ09OVEVOVF9UWVBFX0pTT047XG59O1xuLyoqXHJcbiAqIE5vdGU6IHJlc3RyaWN0IHRoZSB0eXBlIG9mIEpTT04gdG8gYEFueUpzb25gIHNvIHRoYXQgYGFueWAgZG9lc24ndCBsZWFrIGRvd25zdHJlYW0uXHJcbiAqL1xuXG5cbnZhciBnZXRKc29uUmVzcG9uc2UgPSBmdW5jdGlvbiBnZXRKc29uUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgaWYgKGNoZWNrSXNKc29uUmVzcG9uc2UocmVzcG9uc2UpKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVtcImNhdGNoXCJdKGZ1bmN0aW9uIChfZXJyKSB7XG4gICAgICB0aHJvdyBuZXcgRGVjb2RpbmdFcnJvcigndW5hYmxlIHRvIHBhcnNlIEpTT04gcmVzcG9uc2UuJyk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IERlY29kaW5nRXJyb3IoJ2V4cGVjdGVkIEpTT04gcmVzcG9uc2UgZnJvbSBzZXJ2ZXIuJyk7XG4gIH1cbn07XG5cbnZhciBoYW5kbGVGZXRjaFJlc3BvbnNlID0gZnVuY3Rpb24gaGFuZGxlRmV0Y2hSZXNwb25zZShoYW5kbGVSZXNwb25zZSkge1xuICByZXR1cm4gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIChyZXNwb25zZS5vayA/IGhhbmRsZVJlc3BvbnNlKHtcbiAgICAgIHJlc3BvbnNlOiByZXNwb25zZVxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGhhbmRsZWRSZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgcmVzcG9uc2U6IGhhbmRsZWRSZXNwb25zZSxcbiAgICAgICAgb3JpZ2luYWxSZXNwb25zZTogcmVzcG9uc2VcbiAgICAgIH07XG4gICAgfSkgOiBnZXRKc29uUmVzcG9uc2UocmVzcG9uc2UpLnRoZW4oZnVuY3Rpb24gKGpzb25SZXNwb25zZSkge1xuICAgICAgcmV0dXJuIF9leHRlbmRzKHtcbiAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXNcbiAgICAgIH0sIGdldEVycm9yRm9yQmFkU3RhdHVzQ29kZShqc29uUmVzcG9uc2UpLCB7XG4gICAgICAgIG9yaWdpbmFsUmVzcG9uc2U6IHJlc3BvbnNlXG4gICAgICB9KTtcbiAgICB9KSlbXCJjYXRjaFwiXShmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIC8qKlxyXG4gICAgICAgKiBXZSB3YW50IHRvIHNlcGFyYXRlIGV4cGVjdGVkIGRlY29kaW5nIGVycm9ycyBmcm9tIHVua25vd24gb25lcy4gV2UgZG8gc28gYnkgdGhyb3dpbmcgYSBjdXN0b21cclxuICAgICAgICogYERlY29kaW5nRXJyb3JgIHdoZW5ldmVyIHdlIGVuY291bnRlciBvbmUgd2l0aGluIGBoYW5kbGVGZXRjaFJlc3BvbnNlYCBhbmQgY2F0Y2ggdGhlbSBhbGxcclxuICAgICAgICogaGVyZS4gVGhpcyBhbGxvd3MgdXMgdG8gZWFzaWx5IGhhbmRsZSBhbGwgb2YgdGhlc2UgZXJyb3JzIGF0IG9uY2UuIFVuZXhwZWN0ZWQgZXJyb3JzIGFyZSBub3RcclxuICAgICAgICogY2F1Z2h0LCBzbyB0aGF0IHRoZXkgYnViYmxlIHVwIGFuZCBmYWlsIGxvdWRseS5cclxuICAgICAgICpcclxuICAgICAgICogTm90ZTogSWRlYWxseSB3ZSdkIHVzZSBhbiBFaXRoZXIgdHlwZSwgYnV0IHRoaXMgZG9lcyB0aGUgam9iIHdpdGhvdXQgaW50cm9kdWNpbmcgZGVwZW5kZW5jaWVzXHJcbiAgICAgICAqIGxpa2UgYGZwLXRzYC5cclxuICAgICAgICovXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBEZWNvZGluZ0Vycm9yKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICBzb3VyY2U6ICdkZWNvZGluZycsXG4gICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgb3JpZ2luYWxSZXNwb25zZTogcmVzcG9uc2UsXG4gICAgICAgICAgZXJyb3JzOiBbZXJyb3IubWVzc2FnZV1cbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xufTtcbnZhciBjYXN0UmVzcG9uc2UgPSBmdW5jdGlvbiBjYXN0UmVzcG9uc2UoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoX3JlZikge1xuICAgIHZhciByZXNwb25zZSA9IF9yZWYucmVzcG9uc2U7XG4gICAgcmV0dXJuIGdldEpzb25SZXNwb25zZShyZXNwb25zZSk7XG4gIH07XG59O1xuXG52YXIgYWRkUXVlcnlUb1VybCA9IGZ1bmN0aW9uIGFkZFF1ZXJ5VG9VcmwocXVlcnkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh1cmwpIHtcbiAgICBPYmplY3Qua2V5cyhxdWVyeSkuZm9yRWFjaChmdW5jdGlvbiAocXVlcnlLZXkpIHtcbiAgICAgIHJldHVybiB1cmwuc2VhcmNoUGFyYW1zLnNldChxdWVyeUtleSwgcXVlcnlbcXVlcnlLZXldLnRvU3RyaW5nKCkpO1xuICAgIH0pO1xuICB9O1xufTtcblxudmFyIGFkZFBhdGhuYW1lVG9VcmwgPSBmdW5jdGlvbiBhZGRQYXRobmFtZVRvVXJsKHBhdGhuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodXJsKSB7XG4gICAgLy8gV2hlbiB0aGVyZSBpcyBubyBleGlzdGluZyBwYXRobmFtZSwgdGhlIHZhbHVlIGlzIGAvYC4gQXBwZW5kaW5nIHdvdWxkIGdpdmUgdXMgYSBVUkwgd2l0aCB0d29cbiAgICAvLyBmb3J3YXJkIHNsYXNoZXMuIFRoaXMgaXMgd2h5IHdlIHJlcGxhY2UgdGhlIHZhbHVlIGluIHRoYXQgc2NlbmFyaW8uXG4gICAgaWYgKHVybC5wYXRobmFtZSA9PT0gJy8nKSB7XG4gICAgICB1cmwucGF0aG5hbWUgPSBwYXRobmFtZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdXJsLnBhdGhuYW1lICs9IHBhdGhuYW1lO1xuICAgIH1cbiAgfTtcbn07XG5cbnZhciBidWlsZFVybCA9IGZ1bmN0aW9uIGJ1aWxkVXJsKF9yZWYpIHtcbiAgdmFyIHBhdGhuYW1lID0gX3JlZi5wYXRobmFtZSxcbiAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhcGlVcmwpIHtcbiAgICB2YXIgdXJsID0gbmV3IFVSTChhcGlVcmwpO1xuICAgIGFkZFBhdGhuYW1lVG9VcmwocGF0aG5hbWUpKHVybCk7XG4gICAgYWRkUXVlcnlUb1VybChxdWVyeSkodXJsKTtcbiAgICByZXR1cm4gdXJsLnRvU3RyaW5nKCk7XG4gIH07XG59O1xuXG52YXIgZ2V0UXVlcnlGcm9tU2VhcmNoUGFyYW1zID0gZnVuY3Rpb24gZ2V0UXVlcnlGcm9tU2VhcmNoUGFyYW1zKHNlYXJjaFBhcmFtcykge1xuICB2YXIgcXVlcnkgPSB7fTtcbiAgc2VhcmNoUGFyYW1zLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcbiAgICBxdWVyeVtrZXldID0gdmFsdWU7XG4gIH0pO1xuICByZXR1cm4gcXVlcnk7XG59O1xuXG52YXIgcGFyc2VRdWVyeUFuZFBhdGhuYW1lID0gZnVuY3Rpb24gcGFyc2VRdWVyeUFuZFBhdGhuYW1lKHVybCkge1xuICB2YXIgX1VSTCA9IG5ldyBVUkwodXJsKSxcbiAgICAgIHBhdGhuYW1lID0gX1VSTC5wYXRobmFtZSxcbiAgICAgIHNlYXJjaFBhcmFtcyA9IF9VUkwuc2VhcmNoUGFyYW1zO1xuXG4gIHZhciBxdWVyeSA9IGdldFF1ZXJ5RnJvbVNlYXJjaFBhcmFtcyhzZWFyY2hQYXJhbXMpO1xuICByZXR1cm4ge1xuICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICBwYXRobmFtZTogcGF0aG5hbWUgPT09ICcvJyA/IHVuZGVmaW5lZCA6IHBhdGhuYW1lXG4gIH07XG59O1xuXG4vKipcclxuICogaGVscGVyIHVzZWQgdG8gdHlwZS1jaGVjayB0aGUgYXJndW1lbnRzLCBhbmQgYWRkIGRlZmF1bHQgcGFyYW1zIGZvciBhbGwgcmVxdWVzdHNcclxuICovXG5cbnZhciBjcmVhdGVSZXF1ZXN0SGFuZGxlciA9IGZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3RIYW5kbGVyKGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoYSwgYWRkaXRpb25hbEZldGNoT3B0aW9ucykge1xuICAgIGlmIChhZGRpdGlvbmFsRmV0Y2hPcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIGFkZGl0aW9uYWxGZXRjaE9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgX2ZuID0gZm4oYSksXG4gICAgICAgIGhlYWRlcnMgPSBfZm4uaGVhZGVycyxcbiAgICAgICAgcXVlcnkgPSBfZm4ucXVlcnksXG4gICAgICAgIGJhc2VSZXFQYXJhbXMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfZm4sIFtcImhlYWRlcnNcIiwgXCJxdWVyeVwiXSk7XG5cbiAgICByZXR1cm4gX2V4dGVuZHMoe30sIGJhc2VSZXFQYXJhbXMsIGFkZGl0aW9uYWxGZXRjaE9wdGlvbnMsIHtcbiAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgIGhlYWRlcnM6IF9leHRlbmRzKHt9LCBoZWFkZXJzLCBhZGRpdGlvbmFsRmV0Y2hPcHRpb25zLmhlYWRlcnMpXG4gICAgfSk7XG4gIH07XG59O1xudmFyIG1ha2VFbmRwb2ludCA9IGZ1bmN0aW9uIG1ha2VFbmRwb2ludChlbmRwb2ludCkge1xuICByZXR1cm4gZW5kcG9pbnQ7XG59O1xudmFyIGluaXRNYWtlUmVxdWVzdCA9IGZ1bmN0aW9uIGluaXRNYWtlUmVxdWVzdChfcmVmKSB7XG4gIHZhciBhY2Nlc3NLZXkgPSBfcmVmLmFjY2Vzc0tleSxcbiAgICAgIF9yZWYkYXBpVmVyc2lvbiA9IF9yZWYuYXBpVmVyc2lvbixcbiAgICAgIGFwaVZlcnNpb24gPSBfcmVmJGFwaVZlcnNpb24gPT09IHZvaWQgMCA/ICd2MScgOiBfcmVmJGFwaVZlcnNpb24sXG4gICAgICBfcmVmJGFwaVVybCA9IF9yZWYuYXBpVXJsLFxuICAgICAgYXBpVXJsID0gX3JlZiRhcGlVcmwgPT09IHZvaWQgMCA/ICdodHRwczovL2FwaS51bnNwbGFzaC5jb20nIDogX3JlZiRhcGlVcmwsXG4gICAgICBnZW5lcmFsSGVhZGVycyA9IF9yZWYuaGVhZGVycyxcbiAgICAgIHByb3ZpZGVkRmV0Y2ggPSBfcmVmLmZldGNoLFxuICAgICAgZ2VuZXJhbEZldGNoT3B0aW9ucyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKF9yZWYsIFtcImFjY2Vzc0tleVwiLCBcImFwaVZlcnNpb25cIiwgXCJhcGlVcmxcIiwgXCJoZWFkZXJzXCIsIFwiZmV0Y2hcIl0pO1xuXG4gIHJldHVybiBmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICB2YXIgaGFuZGxlUmVzcG9uc2UgPSBfcmVmMi5oYW5kbGVSZXNwb25zZSxcbiAgICAgICAgaGFuZGxlUmVxdWVzdCA9IF9yZWYyLmhhbmRsZVJlcXVlc3Q7XG4gICAgcmV0dXJuIGZsb3coaGFuZGxlUmVxdWVzdCwgZnVuY3Rpb24gKF9yZWYzKSB7XG4gICAgICB2YXIgcGF0aG5hbWUgPSBfcmVmMy5wYXRobmFtZSxcbiAgICAgICAgICBxdWVyeSA9IF9yZWYzLnF1ZXJ5LFxuICAgICAgICAgIF9yZWYzJG1ldGhvZCA9IF9yZWYzLm1ldGhvZCxcbiAgICAgICAgICBtZXRob2QgPSBfcmVmMyRtZXRob2QgPT09IHZvaWQgMCA/ICdHRVQnIDogX3JlZjMkbWV0aG9kLFxuICAgICAgICAgIGVuZHBvaW50SGVhZGVycyA9IF9yZWYzLmhlYWRlcnMsXG4gICAgICAgICAgYm9keSA9IF9yZWYzLmJvZHksXG4gICAgICAgICAgc2lnbmFsID0gX3JlZjMuc2lnbmFsO1xuICAgICAgdmFyIHVybCA9IGJ1aWxkVXJsKHtcbiAgICAgICAgcGF0aG5hbWU6IHBhdGhuYW1lLFxuICAgICAgICBxdWVyeTogcXVlcnlcbiAgICAgIH0pKGFwaVVybCk7XG5cbiAgICAgIHZhciBmZXRjaE9wdGlvbnMgPSBfZXh0ZW5kcyh7XG4gICAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgICBoZWFkZXJzOiBfZXh0ZW5kcyh7fSwgZ2VuZXJhbEhlYWRlcnMsIGVuZHBvaW50SGVhZGVycywge1xuICAgICAgICAgICdBY2NlcHQtVmVyc2lvbic6IGFwaVZlcnNpb25cbiAgICAgICAgfSwgaXNEZWZpbmVkKGFjY2Vzc0tleSkgPyB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogXCJDbGllbnQtSUQgXCIgKyBhY2Nlc3NLZXlcbiAgICAgICAgfSA6IHt9KSxcbiAgICAgICAgYm9keTogYm9keSxcbiAgICAgICAgc2lnbmFsOiBzaWduYWxcbiAgICAgIH0sIGdlbmVyYWxGZXRjaE9wdGlvbnMpO1xuXG4gICAgICB2YXIgZmV0Y2hUb1VzZSA9IHByb3ZpZGVkRmV0Y2ggIT0gbnVsbCA/IHByb3ZpZGVkRmV0Y2ggOiBmZXRjaDtcbiAgICAgIHJldHVybiBmZXRjaFRvVXNlKHVybCwgZmV0Y2hPcHRpb25zKS50aGVuKGhhbmRsZUZldGNoUmVzcG9uc2UoaGFuZGxlUmVzcG9uc2UpKTtcbiAgICB9KTtcbiAgfTtcbn07XG5cbnZhciBUT1RBTF9SRVNQT05TRV9IRUFERVIgPSAneC10b3RhbCc7XG5cbnZhciBnZXRUb3RhbEZyb21BcGlGZWVkUmVzcG9uc2UgPSBmdW5jdGlvbiBnZXRUb3RhbEZyb21BcGlGZWVkUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgdmFyIHRvdGFsc1N0ciA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KFRPVEFMX1JFU1BPTlNFX0hFQURFUik7XG5cbiAgaWYgKGlzRGVmaW5lZCh0b3RhbHNTdHIpKSB7XG4gICAgdmFyIHRvdGFsID0gcGFyc2VJbnQodG90YWxzU3RyKTtcblxuICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKHRvdGFsKSkge1xuICAgICAgcmV0dXJuIHRvdGFsO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRGVjb2RpbmdFcnJvcihcImV4cGVjdGVkIFwiICsgVE9UQUxfUkVTUE9OU0VfSEVBREVSICsgXCIgaGVhZGVyIHRvIGJlIHZhbGlkIGludGVnZXIuXCIpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRGVjb2RpbmdFcnJvcihcImV4cGVjdGVkIFwiICsgVE9UQUxfUkVTUE9OU0VfSEVBREVSICsgXCIgaGVhZGVyIHRvIGV4aXN0LlwiKTtcbiAgfVxufTtcblxudmFyIGhhbmRsZUZlZWRSZXNwb25zZSA9IGZ1bmN0aW9uIGhhbmRsZUZlZWRSZXNwb25zZSgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgdmFyIHJlc3BvbnNlID0gX3JlZi5yZXNwb25zZTtcbiAgICByZXR1cm4gY2FzdFJlc3BvbnNlKCkoe1xuICAgICAgcmVzcG9uc2U6IHJlc3BvbnNlXG4gICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0cykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdWx0czogcmVzdWx0cyxcbiAgICAgICAgdG90YWw6IGdldFRvdGFsRnJvbUFwaUZlZWRSZXNwb25zZShyZXNwb25zZSlcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG59O1xuXG52YXIgZ2V0Q29sbGVjdGlvbnMgPSBmdW5jdGlvbiBnZXRDb2xsZWN0aW9ucyhjb2xsZWN0aW9uSWRzKSB7XG4gIHJldHVybiBpc0RlZmluZWQoY29sbGVjdGlvbklkcykgPyB7XG4gICAgY29sbGVjdGlvbnM6IGNvbGxlY3Rpb25JZHMuam9pbigpXG4gIH0gOiB7fTtcbn07XG52YXIgZ2V0VG9waWNzID0gZnVuY3Rpb24gZ2V0VG9waWNzKHRvcGljSWRzKSB7XG4gIHJldHVybiBpc0RlZmluZWQodG9waWNJZHMpID8ge1xuICAgIHRvcGljczogdG9waWNJZHMuam9pbigpXG4gIH0gOiB7fTtcbn07XG52YXIgZ2V0RmVlZFBhcmFtcyA9IGZ1bmN0aW9uIGdldEZlZWRQYXJhbXMoX3JlZikge1xuICB2YXIgcGFnZSA9IF9yZWYucGFnZSxcbiAgICAgIHBlclBhZ2UgPSBfcmVmLnBlclBhZ2UsXG4gICAgICBvcmRlckJ5ID0gX3JlZi5vcmRlckJ5O1xuICByZXR1cm4gY29tcGFjdERlZmluZWQoe1xuICAgIHBlcl9wYWdlOiBwZXJQYWdlLFxuICAgIG9yZGVyX2J5OiBvcmRlckJ5LFxuICAgIHBhZ2U6IHBhZ2VcbiAgfSk7XG59O1xuXG52YXIgQ09MTEVDVElPTlNfUEFUSF9QUkVGSVggPSAnL2NvbGxlY3Rpb25zJztcbnZhciBnZXRQaG90b3MgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICB2YXIgZ2V0UGF0aG5hbWUgPSBmdW5jdGlvbiBnZXRQYXRobmFtZShfcmVmKSB7XG4gICAgdmFyIGNvbGxlY3Rpb25JZCA9IF9yZWYuY29sbGVjdGlvbklkO1xuICAgIHJldHVybiBDT0xMRUNUSU9OU19QQVRIX1BSRUZJWCArIFwiL1wiICsgY29sbGVjdGlvbklkICsgXCIvcGhvdG9zXCI7XG4gIH07XG5cbiAgcmV0dXJuIG1ha2VFbmRwb2ludCh7XG4gICAgZ2V0UGF0aG5hbWU6IGdldFBhdGhuYW1lLFxuICAgIGhhbmRsZVJlcXVlc3Q6IGNyZWF0ZVJlcXVlc3RIYW5kbGVyKGZ1bmN0aW9uIChfcmVmMikge1xuICAgICAgdmFyIGNvbGxlY3Rpb25JZCA9IF9yZWYyLmNvbGxlY3Rpb25JZCxcbiAgICAgICAgICBvcmllbnRhdGlvbiA9IF9yZWYyLm9yaWVudGF0aW9uLFxuICAgICAgICAgIHBhZ2luYXRpb25QYXJhbXMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmMiwgW1wiY29sbGVjdGlvbklkXCIsIFwib3JpZW50YXRpb25cIl0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXRobmFtZTogZ2V0UGF0aG5hbWUoe1xuICAgICAgICAgIGNvbGxlY3Rpb25JZDogY29sbGVjdGlvbklkXG4gICAgICAgIH0pLFxuICAgICAgICBxdWVyeTogY29tcGFjdERlZmluZWQoX2V4dGVuZHMoe30sIGdldEZlZWRQYXJhbXMocGFnaW5hdGlvblBhcmFtcyksIHtcbiAgICAgICAgICBvcmllbnRhdGlvbjogb3JpZW50YXRpb25cbiAgICAgICAgfSkpXG4gICAgICB9O1xuICAgIH0pLFxuICAgIGhhbmRsZVJlc3BvbnNlOiBoYW5kbGVGZWVkUmVzcG9uc2UoKVxuICB9KTtcbn0oKTtcbnZhciBnZXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICB2YXIgZ2V0UGF0aG5hbWUgPSBmdW5jdGlvbiBnZXRQYXRobmFtZShfcmVmMykge1xuICAgIHZhciBjb2xsZWN0aW9uSWQgPSBfcmVmMy5jb2xsZWN0aW9uSWQ7XG4gICAgcmV0dXJuIENPTExFQ1RJT05TX1BBVEhfUFJFRklYICsgXCIvXCIgKyBjb2xsZWN0aW9uSWQ7XG4gIH07XG5cbiAgcmV0dXJuIG1ha2VFbmRwb2ludCh7XG4gICAgZ2V0UGF0aG5hbWU6IGdldFBhdGhuYW1lLFxuICAgIGhhbmRsZVJlcXVlc3Q6IGNyZWF0ZVJlcXVlc3RIYW5kbGVyKGZ1bmN0aW9uIChfcmVmNCkge1xuICAgICAgdmFyIGNvbGxlY3Rpb25JZCA9IF9yZWY0LmNvbGxlY3Rpb25JZDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhdGhuYW1lOiBnZXRQYXRobmFtZSh7XG4gICAgICAgICAgY29sbGVjdGlvbklkOiBjb2xsZWN0aW9uSWRcbiAgICAgICAgfSksXG4gICAgICAgIHF1ZXJ5OiB7fVxuICAgICAgfTtcbiAgICB9KSxcbiAgICBoYW5kbGVSZXNwb25zZTogY2FzdFJlc3BvbnNlKClcbiAgfSk7XG59KCk7XG52YXIgbGlzdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIHZhciBnZXRQYXRobmFtZSA9IGZ1bmN0aW9uIGdldFBhdGhuYW1lKCkge1xuICAgIHJldHVybiBDT0xMRUNUSU9OU19QQVRIX1BSRUZJWDtcbiAgfTtcblxuICByZXR1cm4gbWFrZUVuZHBvaW50KHtcbiAgICBnZXRQYXRobmFtZTogZ2V0UGF0aG5hbWUsXG4gICAgaGFuZGxlUmVxdWVzdDogY3JlYXRlUmVxdWVzdEhhbmRsZXIoZnVuY3Rpb24gKHBhZ2luYXRpb25QYXJhbXMpIHtcbiAgICAgIGlmIChwYWdpbmF0aW9uUGFyYW1zID09PSB2b2lkIDApIHtcbiAgICAgICAgcGFnaW5hdGlvblBhcmFtcyA9IHt9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXRobmFtZTogZ2V0UGF0aG5hbWUoKSxcbiAgICAgICAgcXVlcnk6IGdldEZlZWRQYXJhbXMocGFnaW5hdGlvblBhcmFtcylcbiAgICAgIH07XG4gICAgfSksXG4gICAgaGFuZGxlUmVzcG9uc2U6IGhhbmRsZUZlZWRSZXNwb25zZSgpXG4gIH0pO1xufSgpO1xudmFyIGdldFJlbGF0ZWQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICB2YXIgZ2V0UGF0aG5hbWUgPSBmdW5jdGlvbiBnZXRQYXRobmFtZShfcmVmNSkge1xuICAgIHZhciBjb2xsZWN0aW9uSWQgPSBfcmVmNS5jb2xsZWN0aW9uSWQ7XG4gICAgcmV0dXJuIENPTExFQ1RJT05TX1BBVEhfUFJFRklYICsgXCIvXCIgKyBjb2xsZWN0aW9uSWQgKyBcIi9yZWxhdGVkXCI7XG4gIH07XG5cbiAgcmV0dXJuIG1ha2VFbmRwb2ludCh7XG4gICAgZ2V0UGF0aG5hbWU6IGdldFBhdGhuYW1lLFxuICAgIGhhbmRsZVJlcXVlc3Q6IGNyZWF0ZVJlcXVlc3RIYW5kbGVyKGZ1bmN0aW9uIChfcmVmNikge1xuICAgICAgdmFyIGNvbGxlY3Rpb25JZCA9IF9yZWY2LmNvbGxlY3Rpb25JZDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhdGhuYW1lOiBnZXRQYXRobmFtZSh7XG4gICAgICAgICAgY29sbGVjdGlvbklkOiBjb2xsZWN0aW9uSWRcbiAgICAgICAgfSksXG4gICAgICAgIHF1ZXJ5OiB7fVxuICAgICAgfTtcbiAgICB9KSxcbiAgICBoYW5kbGVSZXNwb25zZTogY2FzdFJlc3BvbnNlKClcbiAgfSk7XG59KCk7XG5cbnZhciBpbmRleCA9IHtcbiAgX19wcm90b19fOiBudWxsLFxuICBnZXRQaG90b3M6IGdldFBob3RvcyxcbiAgZ2V0OiBnZXQsXG4gIGxpc3Q6IGxpc3QsXG4gIGdldFJlbGF0ZWQ6IGdldFJlbGF0ZWRcbn07XG5cbnZhciBQSE9UT1NfUEFUSF9QUkVGSVggPSAnL3Bob3Rvcyc7XG52YXIgbGlzdCQxID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgdmFyIF9nZXRQYXRobmFtZSA9IGZ1bmN0aW9uIGdldFBhdGhuYW1lKCkge1xuICAgIHJldHVybiBQSE9UT1NfUEFUSF9QUkVGSVg7XG4gIH07XG5cbiAgcmV0dXJuIG1ha2VFbmRwb2ludCh7XG4gICAgLy8gV3JhcHBlciB1c2VzIHR5cGUgdHJpY2sgdG8gYWxsb3cgMCBhcmdzXG4gICAgZ2V0UGF0aG5hbWU6IGZ1bmN0aW9uIGdldFBhdGhuYW1lKF9wYXJhbXMpIHtcbiAgICAgIHJldHVybiBfZ2V0UGF0aG5hbWUoKTtcbiAgICB9LFxuICAgIGhhbmRsZVJlcXVlc3Q6IGNyZWF0ZVJlcXVlc3RIYW5kbGVyKGZ1bmN0aW9uIChmZWVkUGFyYW1zKSB7XG4gICAgICBpZiAoZmVlZFBhcmFtcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGZlZWRQYXJhbXMgPSB7fTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aG5hbWU6IFBIT1RPU19QQVRIX1BSRUZJWCxcbiAgICAgICAgcXVlcnk6IGNvbXBhY3REZWZpbmVkKGdldEZlZWRQYXJhbXMoZmVlZFBhcmFtcykpXG4gICAgICB9O1xuICAgIH0pLFxuICAgIGhhbmRsZVJlc3BvbnNlOiBoYW5kbGVGZWVkUmVzcG9uc2UoKVxuICB9KTtcbn0oKTtcbnZhciBnZXQkMSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIHZhciBnZXRQYXRobmFtZSA9IGZ1bmN0aW9uIGdldFBhdGhuYW1lKF9yZWYpIHtcbiAgICB2YXIgcGhvdG9JZCA9IF9yZWYucGhvdG9JZDtcbiAgICByZXR1cm4gUEhPVE9TX1BBVEhfUFJFRklYICsgXCIvXCIgKyBwaG90b0lkO1xuICB9O1xuXG4gIHJldHVybiBtYWtlRW5kcG9pbnQoe1xuICAgIGdldFBhdGhuYW1lOiBnZXRQYXRobmFtZSxcbiAgICBoYW5kbGVSZXF1ZXN0OiBjcmVhdGVSZXF1ZXN0SGFuZGxlcihmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICAgIHZhciBwaG90b0lkID0gX3JlZjIucGhvdG9JZDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhdGhuYW1lOiBnZXRQYXRobmFtZSh7XG4gICAgICAgICAgcGhvdG9JZDogcGhvdG9JZFxuICAgICAgICB9KSxcbiAgICAgICAgcXVlcnk6IHt9XG4gICAgICB9O1xuICAgIH0pLFxuICAgIGhhbmRsZVJlc3BvbnNlOiBjYXN0UmVzcG9uc2UoKVxuICB9KTtcbn0oKTtcbnZhciBnZXRTdGF0cyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIHZhciBnZXRQYXRobmFtZSA9IGZ1bmN0aW9uIGdldFBhdGhuYW1lKF9yZWYzKSB7XG4gICAgdmFyIHBob3RvSWQgPSBfcmVmMy5waG90b0lkO1xuICAgIHJldHVybiBQSE9UT1NfUEFUSF9QUkVGSVggKyBcIi9cIiArIHBob3RvSWQgKyBcIi9zdGF0aXN0aWNzXCI7XG4gIH07XG5cbiAgcmV0dXJuIG1ha2VFbmRwb2ludCh7XG4gICAgZ2V0UGF0aG5hbWU6IGdldFBhdGhuYW1lLFxuICAgIGhhbmRsZVJlcXVlc3Q6IGNyZWF0ZVJlcXVlc3RIYW5kbGVyKGZ1bmN0aW9uIChfcmVmNCkge1xuICAgICAgdmFyIHBob3RvSWQgPSBfcmVmNC5waG90b0lkO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aG5hbWU6IGdldFBhdGhuYW1lKHtcbiAgICAgICAgICBwaG90b0lkOiBwaG90b0lkXG4gICAgICAgIH0pLFxuICAgICAgICBxdWVyeToge31cbiAgICAgIH07XG4gICAgfSksXG4gICAgaGFuZGxlUmVzcG9uc2U6IGNhc3RSZXNwb25zZSgpXG4gIH0pO1xufSgpO1xudmFyIGdldFJhbmRvbSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIHZhciBnZXRQYXRobmFtZSA9IGZ1bmN0aW9uIGdldFBhdGhuYW1lKCkge1xuICAgIHJldHVybiBQSE9UT1NfUEFUSF9QUkVGSVggKyBcIi9yYW5kb21cIjtcbiAgfTtcblxuICByZXR1cm4gbWFrZUVuZHBvaW50KHtcbiAgICBnZXRQYXRobmFtZTogZ2V0UGF0aG5hbWUsXG4gICAgaGFuZGxlUmVxdWVzdDogY3JlYXRlUmVxdWVzdEhhbmRsZXIoZnVuY3Rpb24gKF90ZW1wKSB7XG4gICAgICB2YXIgX3JlZjUgPSBfdGVtcCA9PT0gdm9pZCAwID8ge30gOiBfdGVtcCxcbiAgICAgICAgICBjb2xsZWN0aW9uSWRzID0gX3JlZjUuY29sbGVjdGlvbklkcyxcbiAgICAgICAgICBjb250ZW50RmlsdGVyID0gX3JlZjUuY29udGVudEZpbHRlcixcbiAgICAgICAgICB0b3BpY0lkcyA9IF9yZWY1LnRvcGljSWRzLFxuICAgICAgICAgIHF1ZXJ5UGFyYW1zID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UoX3JlZjUsIFtcImNvbGxlY3Rpb25JZHNcIiwgXCJjb250ZW50RmlsdGVyXCIsIFwidG9waWNJZHNcIl0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXRobmFtZTogZ2V0UGF0aG5hbWUoKSxcbiAgICAgICAgcXVlcnk6IGNvbXBhY3REZWZpbmVkKF9leHRlbmRzKHt9LCBxdWVyeVBhcmFtcywge1xuICAgICAgICAgIGNvbnRlbnRfZmlsdGVyOiBjb250ZW50RmlsdGVyXG4gICAgICAgIH0sIGdldENvbGxlY3Rpb25zKGNvbGxlY3Rpb25JZHMpLCBnZXRUb3BpY3ModG9waWNJZHMpKSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAvKipcclxuICAgICAgICAgICAqIEF2b2lkIHJlc3BvbnNlIGNhY2hpbmdcclxuICAgICAgICAgICAqL1xuICAgICAgICAgICdjYWNoZS1jb250cm9sJzogJ25vLWNhY2hlJ1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pLFxuICAgIGhhbmRsZVJlc3BvbnNlOiBjYXN0UmVzcG9uc2UoKVxuICB9KTtcbn0oKTtcbnZhciB0cmFja0Rvd25sb2FkID0ge1xuICBoYW5kbGVSZXF1ZXN0OiAvKiNfX1BVUkVfXyovY3JlYXRlUmVxdWVzdEhhbmRsZXIoZnVuY3Rpb24gKF9yZWY2KSB7XG4gICAgdmFyIGRvd25sb2FkTG9jYXRpb24gPSBfcmVmNi5kb3dubG9hZExvY2F0aW9uO1xuXG4gICAgdmFyIF9wYXJzZVF1ZXJ5QW5kUGF0aG5hbSA9IHBhcnNlUXVlcnlBbmRQYXRobmFtZShkb3dubG9hZExvY2F0aW9uKSxcbiAgICAgICAgcGF0aG5hbWUgPSBfcGFyc2VRdWVyeUFuZFBhdGhuYW0ucGF0aG5hbWUsXG4gICAgICAgIHF1ZXJ5ID0gX3BhcnNlUXVlcnlBbmRQYXRobmFtLnF1ZXJ5O1xuXG4gICAgaWYgKCFpc0RlZmluZWQocGF0aG5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBwYXJzZSBwYXRobmFtZSBmcm9tIHVybC4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGF0aG5hbWU6IHBhdGhuYW1lLFxuICAgICAgcXVlcnk6IGNvbXBhY3REZWZpbmVkKHF1ZXJ5KVxuICAgIH07XG4gIH0pLFxuICBoYW5kbGVSZXNwb25zZTogLyojX19QVVJFX18qL2Nhc3RSZXNwb25zZSgpXG59O1xuXG52YXIgaW5kZXgkMSA9IHtcbiAgX19wcm90b19fOiBudWxsLFxuICBsaXN0OiBsaXN0JDEsXG4gIGdldDogZ2V0JDEsXG4gIGdldFN0YXRzOiBnZXRTdGF0cyxcbiAgZ2V0UmFuZG9tOiBnZXRSYW5kb20sXG4gIHRyYWNrRG93bmxvYWQ6IHRyYWNrRG93bmxvYWRcbn07XG5cbnZhciBTRUFSQ0hfUEFUSF9QUkVGSVggPSBcIi9zZWFyY2hcIjtcbnZhciBnZXRQaG90b3MkMSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIHZhciBfZ2V0UGF0aG5hbWUgPSBmdW5jdGlvbiBnZXRQYXRobmFtZSgpIHtcbiAgICByZXR1cm4gU0VBUkNIX1BBVEhfUFJFRklYICsgXCIvcGhvdG9zXCI7XG4gIH07XG5cbiAgcmV0dXJuIG1ha2VFbmRwb2ludCh7XG4gICAgLy8gV3JhcHBlciB1c2VzIHR5cGUgdHJpY2sgdG8gYWxsb3cgMCBhcmdzXG4gICAgZ2V0UGF0aG5hbWU6IGZ1bmN0aW9uIGdldFBhdGhuYW1lKF9wYXJhbXMpIHtcbiAgICAgIHJldHVybiBfZ2V0UGF0aG5hbWUoKTtcbiAgICB9LFxuICAgIGhhbmRsZVJlcXVlc3Q6IGNyZWF0ZVJlcXVlc3RIYW5kbGVyKGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgICB2YXIgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHBhZ2UgPSBfcmVmLnBhZ2UsXG4gICAgICAgICAgcGVyUGFnZSA9IF9yZWYucGVyUGFnZSxcbiAgICAgICAgICBvcmRlckJ5ID0gX3JlZi5vcmRlckJ5LFxuICAgICAgICAgIGNvbGxlY3Rpb25JZHMgPSBfcmVmLmNvbGxlY3Rpb25JZHMsXG4gICAgICAgICAgbGFuZyA9IF9yZWYubGFuZyxcbiAgICAgICAgICBjb250ZW50RmlsdGVyID0gX3JlZi5jb250ZW50RmlsdGVyLFxuICAgICAgICAgIGZpbHRlcnMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmLCBbXCJxdWVyeVwiLCBcInBhZ2VcIiwgXCJwZXJQYWdlXCIsIFwib3JkZXJCeVwiLCBcImNvbGxlY3Rpb25JZHNcIiwgXCJsYW5nXCIsIFwiY29udGVudEZpbHRlclwiXSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhdGhuYW1lOiBfZ2V0UGF0aG5hbWUoKSxcbiAgICAgICAgcXVlcnk6IGNvbXBhY3REZWZpbmVkKF9leHRlbmRzKHtcbiAgICAgICAgICBxdWVyeTogcXVlcnksXG4gICAgICAgICAgY29udGVudF9maWx0ZXI6IGNvbnRlbnRGaWx0ZXIsXG4gICAgICAgICAgbGFuZzogbGFuZyxcbiAgICAgICAgICBvcmRlcl9ieTogb3JkZXJCeVxuICAgICAgICB9LCBnZXRGZWVkUGFyYW1zKHtcbiAgICAgICAgICBwYWdlOiBwYWdlLFxuICAgICAgICAgIHBlclBhZ2U6IHBlclBhZ2VcbiAgICAgICAgfSksIGdldENvbGxlY3Rpb25zKGNvbGxlY3Rpb25JZHMpLCBmaWx0ZXJzKSlcbiAgICAgIH07XG4gICAgfSksXG4gICAgaGFuZGxlUmVzcG9uc2U6IGNhc3RSZXNwb25zZSgpXG4gIH0pO1xufSgpO1xudmFyIGdldENvbGxlY3Rpb25zJDEgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICB2YXIgX2dldFBhdGhuYW1lMiA9IGZ1bmN0aW9uIGdldFBhdGhuYW1lKCkge1xuICAgIHJldHVybiBTRUFSQ0hfUEFUSF9QUkVGSVggKyBcIi9jb2xsZWN0aW9uc1wiO1xuICB9O1xuXG4gIHJldHVybiBtYWtlRW5kcG9pbnQoe1xuICAgIC8vIFdyYXBwZXIgdXNlcyB0eXBlIHRyaWNrIHRvIGFsbG93IDAgYXJnc1xuICAgIGdldFBhdGhuYW1lOiBmdW5jdGlvbiBnZXRQYXRobmFtZShfcGFyYW1zKSB7XG4gICAgICByZXR1cm4gX2dldFBhdGhuYW1lMigpO1xuICAgIH0sXG4gICAgaGFuZGxlUmVxdWVzdDogY3JlYXRlUmVxdWVzdEhhbmRsZXIoZnVuY3Rpb24gKF9yZWYyKSB7XG4gICAgICB2YXIgcXVlcnkgPSBfcmVmMi5xdWVyeSxcbiAgICAgICAgICBwYWdpbmF0aW9uUGFyYW1zID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UoX3JlZjIsIFtcInF1ZXJ5XCJdKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aG5hbWU6IF9nZXRQYXRobmFtZTIoKSxcbiAgICAgICAgcXVlcnk6IF9leHRlbmRzKHtcbiAgICAgICAgICBxdWVyeTogcXVlcnlcbiAgICAgICAgfSwgZ2V0RmVlZFBhcmFtcyhwYWdpbmF0aW9uUGFyYW1zKSlcbiAgICAgIH07XG4gICAgfSksXG4gICAgaGFuZGxlUmVzcG9uc2U6IGNhc3RSZXNwb25zZSgpXG4gIH0pO1xufSgpO1xudmFyIGdldFVzZXJzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgdmFyIF9nZXRQYXRobmFtZTMgPSBmdW5jdGlvbiBnZXRQYXRobmFtZSgpIHtcbiAgICByZXR1cm4gU0VBUkNIX1BBVEhfUFJFRklYICsgXCIvdXNlcnNcIjtcbiAgfTtcblxuICByZXR1cm4gbWFrZUVuZHBvaW50KHtcbiAgICAvLyBXcmFwcGVyIHVzZXMgdHlwZSB0cmljayB0byBhbGxvdyAwIGFyZ3NcbiAgICBnZXRQYXRobmFtZTogZnVuY3Rpb24gZ2V0UGF0aG5hbWUoX3BhcmFtcykge1xuICAgICAgcmV0dXJuIF9nZXRQYXRobmFtZTMoKTtcbiAgICB9LFxuICAgIGhhbmRsZVJlcXVlc3Q6IGNyZWF0ZVJlcXVlc3RIYW5kbGVyKGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgdmFyIHF1ZXJ5ID0gX3JlZjMucXVlcnksXG4gICAgICAgICAgcGFnaW5hdGlvblBhcmFtcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKF9yZWYzLCBbXCJxdWVyeVwiXSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhdGhuYW1lOiBfZ2V0UGF0aG5hbWUzKCksXG4gICAgICAgIHF1ZXJ5OiBfZXh0ZW5kcyh7XG4gICAgICAgICAgcXVlcnk6IHF1ZXJ5XG4gICAgICAgIH0sIGdldEZlZWRQYXJhbXMocGFnaW5hdGlvblBhcmFtcykpXG4gICAgICB9O1xuICAgIH0pLFxuICAgIGhhbmRsZVJlc3BvbnNlOiBjYXN0UmVzcG9uc2UoKVxuICB9KTtcbn0oKTtcblxudmFyIGluZGV4JDIgPSB7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgZ2V0UGhvdG9zOiBnZXRQaG90b3MkMSxcbiAgZ2V0Q29sbGVjdGlvbnM6IGdldENvbGxlY3Rpb25zJDEsXG4gIGdldFVzZXJzOiBnZXRVc2Vyc1xufTtcblxudmFyIFVTRVJTX1BBVEhfUFJFRklYID0gJy91c2Vycyc7XG52YXIgZ2V0JDIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICB2YXIgZ2V0UGF0aG5hbWUgPSBmdW5jdGlvbiBnZXRQYXRobmFtZShfcmVmKSB7XG4gICAgdmFyIHVzZXJuYW1lID0gX3JlZi51c2VybmFtZTtcbiAgICByZXR1cm4gVVNFUlNfUEFUSF9QUkVGSVggKyBcIi9cIiArIHVzZXJuYW1lO1xuICB9O1xuXG4gIHJldHVybiBtYWtlRW5kcG9pbnQoe1xuICAgIGdldFBhdGhuYW1lOiBnZXRQYXRobmFtZSxcbiAgICBoYW5kbGVSZXF1ZXN0OiBjcmVhdGVSZXF1ZXN0SGFuZGxlcihmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICAgIHZhciB1c2VybmFtZSA9IF9yZWYyLnVzZXJuYW1lO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aG5hbWU6IGdldFBhdGhuYW1lKHtcbiAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWVcbiAgICAgICAgfSksXG4gICAgICAgIHF1ZXJ5OiB7fVxuICAgICAgfTtcbiAgICB9KSxcbiAgICBoYW5kbGVSZXNwb25zZTogY2FzdFJlc3BvbnNlKClcbiAgfSk7XG59KCk7XG52YXIgZ2V0UGhvdG9zJDIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICB2YXIgZ2V0UGF0aG5hbWUgPSBmdW5jdGlvbiBnZXRQYXRobmFtZShfcmVmMykge1xuICAgIHZhciB1c2VybmFtZSA9IF9yZWYzLnVzZXJuYW1lO1xuICAgIHJldHVybiBVU0VSU19QQVRIX1BSRUZJWCArIFwiL1wiICsgdXNlcm5hbWUgKyBcIi9waG90b3NcIjtcbiAgfTtcblxuICByZXR1cm4gbWFrZUVuZHBvaW50KHtcbiAgICBnZXRQYXRobmFtZTogZ2V0UGF0aG5hbWUsXG4gICAgaGFuZGxlUmVxdWVzdDogY3JlYXRlUmVxdWVzdEhhbmRsZXIoZnVuY3Rpb24gKF9yZWY0KSB7XG4gICAgICB2YXIgdXNlcm5hbWUgPSBfcmVmNC51c2VybmFtZSxcbiAgICAgICAgICBzdGF0cyA9IF9yZWY0LnN0YXRzLFxuICAgICAgICAgIG9yaWVudGF0aW9uID0gX3JlZjQub3JpZW50YXRpb24sXG4gICAgICAgICAgcGFnaW5hdGlvblBhcmFtcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKF9yZWY0LCBbXCJ1c2VybmFtZVwiLCBcInN0YXRzXCIsIFwib3JpZW50YXRpb25cIl0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXRobmFtZTogZ2V0UGF0aG5hbWUoe1xuICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZVxuICAgICAgICB9KSxcbiAgICAgICAgcXVlcnk6IGNvbXBhY3REZWZpbmVkKF9leHRlbmRzKHt9LCBnZXRGZWVkUGFyYW1zKHBhZ2luYXRpb25QYXJhbXMpLCB7XG4gICAgICAgICAgb3JpZW50YXRpb246IG9yaWVudGF0aW9uLFxuICAgICAgICAgIHN0YXRzOiBzdGF0c1xuICAgICAgICB9KSlcbiAgICAgIH07XG4gICAgfSksXG4gICAgaGFuZGxlUmVzcG9uc2U6IGhhbmRsZUZlZWRSZXNwb25zZSgpXG4gIH0pO1xufSgpO1xudmFyIGdldExpa2VzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgdmFyIGdldFBhdGhuYW1lID0gZnVuY3Rpb24gZ2V0UGF0aG5hbWUoX3JlZjUpIHtcbiAgICB2YXIgdXNlcm5hbWUgPSBfcmVmNS51c2VybmFtZTtcbiAgICByZXR1cm4gVVNFUlNfUEFUSF9QUkVGSVggKyBcIi9cIiArIHVzZXJuYW1lICsgXCIvbGlrZXNcIjtcbiAgfTtcblxuICByZXR1cm4gbWFrZUVuZHBvaW50KHtcbiAgICBnZXRQYXRobmFtZTogZ2V0UGF0aG5hbWUsXG4gICAgaGFuZGxlUmVxdWVzdDogY3JlYXRlUmVxdWVzdEhhbmRsZXIoZnVuY3Rpb24gKF9yZWY2KSB7XG4gICAgICB2YXIgdXNlcm5hbWUgPSBfcmVmNi51c2VybmFtZSxcbiAgICAgICAgICBvcmllbnRhdGlvbiA9IF9yZWY2Lm9yaWVudGF0aW9uLFxuICAgICAgICAgIHBhZ2luYXRpb25QYXJhbXMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmNiwgW1widXNlcm5hbWVcIiwgXCJvcmllbnRhdGlvblwiXSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhdGhuYW1lOiBnZXRQYXRobmFtZSh7XG4gICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lXG4gICAgICAgIH0pLFxuICAgICAgICBxdWVyeTogY29tcGFjdERlZmluZWQoX2V4dGVuZHMoe30sIGdldEZlZWRQYXJhbXMocGFnaW5hdGlvblBhcmFtcyksIHtcbiAgICAgICAgICBvcmllbnRhdGlvbjogb3JpZW50YXRpb25cbiAgICAgICAgfSkpXG4gICAgICB9O1xuICAgIH0pLFxuICAgIGhhbmRsZVJlc3BvbnNlOiBoYW5kbGVGZWVkUmVzcG9uc2UoKVxuICB9KTtcbn0oKTtcbnZhciBnZXRDb2xsZWN0aW9ucyQyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgdmFyIGdldFBhdGhuYW1lID0gZnVuY3Rpb24gZ2V0UGF0aG5hbWUoX3JlZjcpIHtcbiAgICB2YXIgdXNlcm5hbWUgPSBfcmVmNy51c2VybmFtZTtcbiAgICByZXR1cm4gVVNFUlNfUEFUSF9QUkVGSVggKyBcIi9cIiArIHVzZXJuYW1lICsgXCIvY29sbGVjdGlvbnNcIjtcbiAgfTtcblxuICByZXR1cm4gbWFrZUVuZHBvaW50KHtcbiAgICBnZXRQYXRobmFtZTogZ2V0UGF0aG5hbWUsXG4gICAgaGFuZGxlUmVxdWVzdDogY3JlYXRlUmVxdWVzdEhhbmRsZXIoZnVuY3Rpb24gKF9yZWY4KSB7XG4gICAgICB2YXIgdXNlcm5hbWUgPSBfcmVmOC51c2VybmFtZSxcbiAgICAgICAgICBwYWdpbmF0aW9uUGFyYW1zID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UoX3JlZjgsIFtcInVzZXJuYW1lXCJdKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aG5hbWU6IGdldFBhdGhuYW1lKHtcbiAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWVcbiAgICAgICAgfSksXG4gICAgICAgIHF1ZXJ5OiBnZXRGZWVkUGFyYW1zKHBhZ2luYXRpb25QYXJhbXMpXG4gICAgICB9O1xuICAgIH0pLFxuICAgIGhhbmRsZVJlc3BvbnNlOiBoYW5kbGVGZWVkUmVzcG9uc2UoKVxuICB9KTtcbn0oKTtcblxudmFyIGluZGV4JDMgPSB7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgZ2V0OiBnZXQkMixcbiAgZ2V0UGhvdG9zOiBnZXRQaG90b3MkMixcbiAgZ2V0TGlrZXM6IGdldExpa2VzLFxuICBnZXRDb2xsZWN0aW9uczogZ2V0Q29sbGVjdGlvbnMkMlxufTtcblxudmFyIEJBU0VfVE9QSUNfUEFUSCA9ICcvdG9waWNzJztcblxudmFyIGdldFRvcGljUGF0aCA9IGZ1bmN0aW9uIGdldFRvcGljUGF0aChfcmVmKSB7XG4gIHZhciB0b3BpY0lkT3JTbHVnID0gX3JlZi50b3BpY0lkT3JTbHVnO1xuICByZXR1cm4gQkFTRV9UT1BJQ19QQVRIICsgXCIvXCIgKyB0b3BpY0lkT3JTbHVnO1xufTtcblxudmFyIGxpc3QkMiA9IC8qI19fUFVSRV9fKi9tYWtlRW5kcG9pbnQoe1xuICBnZXRQYXRobmFtZTogZ2V0VG9waWNQYXRoLFxuICBoYW5kbGVSZXF1ZXN0OiBmdW5jdGlvbiBoYW5kbGVSZXF1ZXN0KF9yZWYyKSB7XG4gICAgdmFyIHBhZ2UgPSBfcmVmMi5wYWdlLFxuICAgICAgICBwZXJQYWdlID0gX3JlZjIucGVyUGFnZSxcbiAgICAgICAgb3JkZXJCeSA9IF9yZWYyLm9yZGVyQnksXG4gICAgICAgIHRvcGljSWRzT3JTbHVncyA9IF9yZWYyLnRvcGljSWRzT3JTbHVncztcbiAgICByZXR1cm4ge1xuICAgICAgcGF0aG5hbWU6IEJBU0VfVE9QSUNfUEFUSCxcbiAgICAgIHF1ZXJ5OiBjb21wYWN0RGVmaW5lZChfZXh0ZW5kcyh7fSwgZ2V0RmVlZFBhcmFtcyh7XG4gICAgICAgIHBhZ2U6IHBhZ2UsXG4gICAgICAgIHBlclBhZ2U6IHBlclBhZ2VcbiAgICAgIH0pLCB7XG4gICAgICAgIGlkczogdG9waWNJZHNPclNsdWdzID09IG51bGwgPyB2b2lkIDAgOiB0b3BpY0lkc09yU2x1Z3Muam9pbignLCcpLFxuICAgICAgICBvcmRlcl9ieTogb3JkZXJCeVxuICAgICAgfSkpXG4gICAgfTtcbiAgfSxcbiAgaGFuZGxlUmVzcG9uc2U6IC8qI19fUFVSRV9fKi9oYW5kbGVGZWVkUmVzcG9uc2UoKVxufSk7XG52YXIgZ2V0JDMgPSAvKiNfX1BVUkVfXyovbWFrZUVuZHBvaW50KHtcbiAgZ2V0UGF0aG5hbWU6IGdldFRvcGljUGF0aCxcbiAgaGFuZGxlUmVxdWVzdDogZnVuY3Rpb24gaGFuZGxlUmVxdWVzdChfcmVmMykge1xuICAgIHZhciB0b3BpY0lkT3JTbHVnID0gX3JlZjMudG9waWNJZE9yU2x1ZztcbiAgICByZXR1cm4ge1xuICAgICAgcGF0aG5hbWU6IGdldFRvcGljUGF0aCh7XG4gICAgICAgIHRvcGljSWRPclNsdWc6IHRvcGljSWRPclNsdWdcbiAgICAgIH0pLFxuICAgICAgcXVlcnk6IHt9XG4gICAgfTtcbiAgfSxcbiAgaGFuZGxlUmVzcG9uc2U6IC8qI19fUFVSRV9fKi9jYXN0UmVzcG9uc2UoKVxufSk7XG52YXIgZ2V0UGhvdG9zJDMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICB2YXIgZ2V0UGF0aG5hbWUgPSAvKiNfX1BVUkVfXyovZmxvdyhnZXRUb3BpY1BhdGgsIGZ1bmN0aW9uICh0b3BpY1BhdGgpIHtcbiAgICByZXR1cm4gdG9waWNQYXRoICsgXCIvcGhvdG9zXCI7XG4gIH0pO1xuICByZXR1cm4gbWFrZUVuZHBvaW50KHtcbiAgICBnZXRQYXRobmFtZTogZ2V0UGF0aG5hbWUsXG4gICAgaGFuZGxlUmVxdWVzdDogZnVuY3Rpb24gaGFuZGxlUmVxdWVzdChfcmVmNCkge1xuICAgICAgdmFyIHRvcGljSWRPclNsdWcgPSBfcmVmNC50b3BpY0lkT3JTbHVnLFxuICAgICAgICAgIG9yaWVudGF0aW9uID0gX3JlZjQub3JpZW50YXRpb24sXG4gICAgICAgICAgZmVlZFBhcmFtcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKF9yZWY0LCBbXCJ0b3BpY0lkT3JTbHVnXCIsIFwib3JpZW50YXRpb25cIl0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXRobmFtZTogZ2V0UGF0aG5hbWUoe1xuICAgICAgICAgIHRvcGljSWRPclNsdWc6IHRvcGljSWRPclNsdWdcbiAgICAgICAgfSksXG4gICAgICAgIHF1ZXJ5OiBjb21wYWN0RGVmaW5lZChfZXh0ZW5kcyh7fSwgZ2V0RmVlZFBhcmFtcyhmZWVkUGFyYW1zKSwge1xuICAgICAgICAgIG9yaWVudGF0aW9uOiBvcmllbnRhdGlvblxuICAgICAgICB9KSlcbiAgICAgIH07XG4gICAgfSxcbiAgICBoYW5kbGVSZXNwb25zZTogaGFuZGxlRmVlZFJlc3BvbnNlKClcbiAgfSk7XG59KCk7XG5cbnZhciBpbmRleCQ0ID0ge1xuICBfX3Byb3RvX186IG51bGwsXG4gIGxpc3Q6IGxpc3QkMixcbiAgZ2V0OiBnZXQkMyxcbiAgZ2V0UGhvdG9zOiBnZXRQaG90b3MkM1xufTtcblxudmFyIHRyYWNrTm9uSG90TGlua2VkUGhvdG9WaWV3ID0gZnVuY3Rpb24gdHJhY2tOb25Ib3RMaW5rZWRQaG90b1ZpZXcoX3JlZikge1xuICB2YXIgYXBwSWQgPSBfcmVmLmFwcElkO1xuICByZXR1cm4gZnVuY3Rpb24gKF9yZWYyKSB7XG4gICAgdmFyIHBob3RvSWQgPSBfcmVmMi5waG90b0lkO1xuICAgIHZhciBpZHMgPSAhQXJyYXkuaXNBcnJheShwaG90b0lkKSA/IFtwaG90b0lkXSA6IHBob3RvSWQ7XG5cbiAgICBpZiAoaWRzLmxlbmd0aCA+IDIwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBjYW5ub3QgdHJhY2sgbW9yZSB0aGFuIDIwIHBob3RvcyBhdCBvbmNlLiBQbGVhc2UgdHJ5IGFnYWluIHdpdGggZmV3ZXIgcGhvdG9zLicpO1xuICAgIH1cblxuICAgIHJldHVybiBmZXRjaChcInZpZXdzLnVuc3BsYXNoLmNvbS92P3Bob3RvX2lkPVwiICsgaWRzLmpvaW4oKSArIFwiJmFwcF9pZD1cIiArIGFwcElkKTtcbiAgfTtcbn07XG5cblxuXG52YXIgaW50ZXJuYWxzID0ge1xuICBfX3Byb3RvX186IG51bGwsXG4gIGNvbGxlY3Rpb25zOiBpbmRleCxcbiAgcGhvdG9zOiBpbmRleCQxLFxuICBzZWFyY2g6IGluZGV4JDIsXG4gIHVzZXJzOiBpbmRleCQzLFxuICB0b3BpY3M6IGluZGV4JDQsXG4gIHRyYWNrTm9uSG90TGlua2VkUGhvdG9WaWV3OiB0cmFja05vbkhvdExpbmtlZFBob3RvVmlld1xufTtcblxudmFyIExhbmd1YWdlO1xuXG4oZnVuY3Rpb24gKExhbmd1YWdlKSB7XG4gIExhbmd1YWdlW1wiQWZyaWthYW5zXCJdID0gXCJhZlwiO1xuICBMYW5ndWFnZVtcIkFtaGFyaWNcIl0gPSBcImFtXCI7XG4gIExhbmd1YWdlW1wiQXJhYmljXCJdID0gXCJhclwiO1xuICBMYW5ndWFnZVtcIkF6ZXJiYWlqYW5pXCJdID0gXCJhelwiO1xuICBMYW5ndWFnZVtcIkJlbGFydXNpYW5cIl0gPSBcImJlXCI7XG4gIExhbmd1YWdlW1wiQnVsZ2FyaWFuXCJdID0gXCJiZ1wiO1xuICBMYW5ndWFnZVtcIkJlbmdhbGlcIl0gPSBcImJuXCI7XG4gIExhbmd1YWdlW1wiQm9zbmlhblwiXSA9IFwiYnNcIjtcbiAgTGFuZ3VhZ2VbXCJDYXRhbGFuXCJdID0gXCJjYVwiO1xuICBMYW5ndWFnZVtcIkNlYnVhbm9cIl0gPSBcImNlYlwiO1xuICBMYW5ndWFnZVtcIkNvcnNpY2FuXCJdID0gXCJjb1wiO1xuICBMYW5ndWFnZVtcIkN6ZWNoXCJdID0gXCJjc1wiO1xuICBMYW5ndWFnZVtcIldlbHNoXCJdID0gXCJjeVwiO1xuICBMYW5ndWFnZVtcIkRhbmlzaFwiXSA9IFwiZGFcIjtcbiAgTGFuZ3VhZ2VbXCJHZXJtYW5cIl0gPSBcImRlXCI7XG4gIExhbmd1YWdlW1wiR3JlZWtcIl0gPSBcImVsXCI7XG4gIExhbmd1YWdlW1wiRW5nbGlzaFwiXSA9IFwiZW5cIjtcbiAgTGFuZ3VhZ2VbXCJFc3BlcmFudG9cIl0gPSBcImVvXCI7XG4gIExhbmd1YWdlW1wiU3BhbmlzaFwiXSA9IFwiZXNcIjtcbiAgTGFuZ3VhZ2VbXCJFc3RvbmlhblwiXSA9IFwiZXRcIjtcbiAgTGFuZ3VhZ2VbXCJCYXNxdWVcIl0gPSBcImV1XCI7XG4gIExhbmd1YWdlW1wiUGVyc2lhblwiXSA9IFwiZmFcIjtcbiAgTGFuZ3VhZ2VbXCJGaW5uaXNoXCJdID0gXCJmaVwiO1xuICBMYW5ndWFnZVtcIkZyZW5jaFwiXSA9IFwiZnJcIjtcbiAgTGFuZ3VhZ2VbXCJGcmlzaWFuXCJdID0gXCJmeVwiO1xuICBMYW5ndWFnZVtcIklyaXNoXCJdID0gXCJnYVwiO1xuICBMYW5ndWFnZVtcIlNjb3RzR2FlbGljXCJdID0gXCJnZFwiO1xuICBMYW5ndWFnZVtcIkdhbGljaWFuXCJdID0gXCJnbFwiO1xuICBMYW5ndWFnZVtcIkd1amFyYXRpXCJdID0gXCJndVwiO1xuICBMYW5ndWFnZVtcIkhhdXNhXCJdID0gXCJoYVwiO1xuICBMYW5ndWFnZVtcIkhhd2FpaWFuXCJdID0gXCJoYXdcIjtcbiAgTGFuZ3VhZ2VbXCJIaW5kaVwiXSA9IFwiaGlcIjtcbiAgTGFuZ3VhZ2VbXCJIbW9uZ1wiXSA9IFwiaG1uXCI7XG4gIExhbmd1YWdlW1wiQ3JvYXRpYW5cIl0gPSBcImhyXCI7XG4gIExhbmd1YWdlW1wiSGFpdGlhbkNyZW9sZVwiXSA9IFwiaHRcIjtcbiAgTGFuZ3VhZ2VbXCJIdW5nYXJpYW5cIl0gPSBcImh1XCI7XG4gIExhbmd1YWdlW1wiQXJtZW5pYW5cIl0gPSBcImh5XCI7XG4gIExhbmd1YWdlW1wiSW5kb25lc2lhblwiXSA9IFwiaWRcIjtcbiAgTGFuZ3VhZ2VbXCJJZ2JvXCJdID0gXCJpZ1wiO1xuICBMYW5ndWFnZVtcIkljZWxhbmRpY1wiXSA9IFwiaXNcIjtcbiAgTGFuZ3VhZ2VbXCJJdGFsaWFuXCJdID0gXCJpdFwiO1xuICBMYW5ndWFnZVtcIkhlYnJld1wiXSA9IFwiaXdcIjtcbiAgTGFuZ3VhZ2VbXCJKYXBhbmVzZVwiXSA9IFwiamFcIjtcbiAgTGFuZ3VhZ2VbXCJKYXZhbmVzZVwiXSA9IFwiandcIjtcbiAgTGFuZ3VhZ2VbXCJHZW9yZ2lhblwiXSA9IFwia2FcIjtcbiAgTGFuZ3VhZ2VbXCJLYXpha2hcIl0gPSBcImtrXCI7XG4gIExhbmd1YWdlW1wiS2htZXJcIl0gPSBcImttXCI7XG4gIExhbmd1YWdlW1wiS2FubmFkYVwiXSA9IFwia25cIjtcbiAgTGFuZ3VhZ2VbXCJLb3JlYW5cIl0gPSBcImtvXCI7XG4gIExhbmd1YWdlW1wiS3VyZGlzaFwiXSA9IFwia3VcIjtcbiAgTGFuZ3VhZ2VbXCJLeXJneXpcIl0gPSBcImt5XCI7XG4gIExhbmd1YWdlW1wiTGF0aW5cIl0gPSBcImxhXCI7XG4gIExhbmd1YWdlW1wiTHV4ZW1ib3VyZ2lzaFwiXSA9IFwibGJcIjtcbiAgTGFuZ3VhZ2VbXCJMYW9cIl0gPSBcImxvXCI7XG4gIExhbmd1YWdlW1wiTGl0aHVhbmlhblwiXSA9IFwibHRcIjtcbiAgTGFuZ3VhZ2VbXCJMYXR2aWFuXCJdID0gXCJsdlwiO1xuICBMYW5ndWFnZVtcIk1hbGFnYXN5XCJdID0gXCJtZ1wiO1xuICBMYW5ndWFnZVtcIk1hb3JpXCJdID0gXCJtaVwiO1xuICBMYW5ndWFnZVtcIk1hY2Vkb25pYW5cIl0gPSBcIm1rXCI7XG4gIExhbmd1YWdlW1wiTWFsYXlhbGFtXCJdID0gXCJtbFwiO1xuICBMYW5ndWFnZVtcIk1vbmdvbGlhblwiXSA9IFwibW5cIjtcbiAgTGFuZ3VhZ2VbXCJNYXJhdGhpXCJdID0gXCJtclwiO1xuICBMYW5ndWFnZVtcIk1hbGF5XCJdID0gXCJtc1wiO1xuICBMYW5ndWFnZVtcIk1hbHRlc2VcIl0gPSBcIm10XCI7XG4gIExhbmd1YWdlW1wiTXlhbm1hclwiXSA9IFwibXlcIjtcbiAgTGFuZ3VhZ2VbXCJOZXBhbGlcIl0gPSBcIm5lXCI7XG4gIExhbmd1YWdlW1wiRHV0Y2hcIl0gPSBcIm5sXCI7XG4gIExhbmd1YWdlW1wiTm9yd2VnaWFuXCJdID0gXCJub1wiO1xuICBMYW5ndWFnZVtcIk55YW5qYVwiXSA9IFwibnlcIjtcbiAgTGFuZ3VhZ2VbXCJPcml5YVwiXSA9IFwib3JcIjtcbiAgTGFuZ3VhZ2VbXCJQdW5qYWJpXCJdID0gXCJwYVwiO1xuICBMYW5ndWFnZVtcIlBvbGlzaFwiXSA9IFwicGxcIjtcbiAgTGFuZ3VhZ2VbXCJQYXNodG9cIl0gPSBcInBzXCI7XG4gIExhbmd1YWdlW1wiUG9ydHVndWVzZVwiXSA9IFwicHRcIjtcbiAgTGFuZ3VhZ2VbXCJSb21hbmlhblwiXSA9IFwicm9cIjtcbiAgTGFuZ3VhZ2VbXCJSdXNzaWFuXCJdID0gXCJydVwiO1xuICBMYW5ndWFnZVtcIktpbnlhcndhbmRhXCJdID0gXCJyd1wiO1xuICBMYW5ndWFnZVtcIlNpbmRoaVwiXSA9IFwic2RcIjtcbiAgTGFuZ3VhZ2VbXCJTaW5oYWxhXCJdID0gXCJzaVwiO1xuICBMYW5ndWFnZVtcIlNsb3Zha1wiXSA9IFwic2tcIjtcbiAgTGFuZ3VhZ2VbXCJTbG92ZW5pYW5cIl0gPSBcInNsXCI7XG4gIExhbmd1YWdlW1wiU2Ftb2FuXCJdID0gXCJzbVwiO1xuICBMYW5ndWFnZVtcIlNob25hXCJdID0gXCJzblwiO1xuICBMYW5ndWFnZVtcIlNvbWFsaVwiXSA9IFwic29cIjtcbiAgTGFuZ3VhZ2VbXCJBbGJhbmlhblwiXSA9IFwic3FcIjtcbiAgTGFuZ3VhZ2VbXCJTZXJiaWFuXCJdID0gXCJzclwiO1xuICBMYW5ndWFnZVtcIlNlc290aG9cIl0gPSBcInN0XCI7XG4gIExhbmd1YWdlW1wiU3VuZGFuZXNlXCJdID0gXCJzdVwiO1xuICBMYW5ndWFnZVtcIlN3ZWRpc2hcIl0gPSBcInN2XCI7XG4gIExhbmd1YWdlW1wiU3dhaGlsaVwiXSA9IFwic3dcIjtcbiAgTGFuZ3VhZ2VbXCJUYW1pbFwiXSA9IFwidGFcIjtcbiAgTGFuZ3VhZ2VbXCJUZWx1Z3VcIl0gPSBcInRlXCI7XG4gIExhbmd1YWdlW1wiVGFqaWtcIl0gPSBcInRnXCI7XG4gIExhbmd1YWdlW1wiVGhhaVwiXSA9IFwidGhcIjtcbiAgTGFuZ3VhZ2VbXCJUdXJrbWVuXCJdID0gXCJ0a1wiO1xuICBMYW5ndWFnZVtcIkZpbGlwaW5vXCJdID0gXCJ0bFwiO1xuICBMYW5ndWFnZVtcIlR1cmtpc2hcIl0gPSBcInRyXCI7XG4gIExhbmd1YWdlW1wiVGF0YXJcIl0gPSBcInR0XCI7XG4gIExhbmd1YWdlW1wiVWlnaHVyXCJdID0gXCJ1Z1wiO1xuICBMYW5ndWFnZVtcIlVrcmFpbmlhblwiXSA9IFwidWtcIjtcbiAgTGFuZ3VhZ2VbXCJVcmR1XCJdID0gXCJ1clwiO1xuICBMYW5ndWFnZVtcIlV6YmVrXCJdID0gXCJ1elwiO1xuICBMYW5ndWFnZVtcIlZpZXRuYW1lc2VcIl0gPSBcInZpXCI7XG4gIExhbmd1YWdlW1wiWGhvc2FcIl0gPSBcInhoXCI7XG4gIExhbmd1YWdlW1wiWWlkZGlzaFwiXSA9IFwieWlcIjtcbiAgTGFuZ3VhZ2VbXCJZb3J1YmFcIl0gPSBcInlvXCI7XG4gIExhbmd1YWdlW1wiQ2hpbmVzZVNpbXBsaWZpZWRcIl0gPSBcInpoXCI7XG4gIExhbmd1YWdlW1wiQ2hpbmVzZVRyYWRpdGlvbmFsXCJdID0gXCJ6aC1UV1wiO1xuICBMYW5ndWFnZVtcIlp1bHVcIl0gPSBcInp1XCI7XG59KShMYW5ndWFnZSB8fCAoTGFuZ3VhZ2UgPSB7fSkpO1xuXG52YXIgT3JkZXJCeTtcblxuKGZ1bmN0aW9uIChPcmRlckJ5KSB7XG4gIE9yZGVyQnlbXCJMQVRFU1RcIl0gPSBcImxhdGVzdFwiO1xuICBPcmRlckJ5W1wiUE9QVUxBUlwiXSA9IFwicG9wdWxhclwiO1xuICBPcmRlckJ5W1wiVklFV1NcIl0gPSBcInZpZXdzXCI7XG4gIE9yZGVyQnlbXCJET1dOTE9BRFNcIl0gPSBcImRvd25sb2Fkc1wiO1xuICBPcmRlckJ5W1wiT0xERVNUXCJdID0gXCJvbGRlc3RcIjtcbn0pKE9yZGVyQnkgfHwgKE9yZGVyQnkgPSB7fSkpO1xuXG52YXIgY3JlYXRlQXBpID0gLyojX19QVVJFX18qL2Zsb3coaW5pdE1ha2VSZXF1ZXN0LCBmdW5jdGlvbiAobWFrZVJlcXVlc3QpIHtcbiAgcmV0dXJuIHtcbiAgICBwaG90b3M6IHtcbiAgICAgIGdldDogbWFrZVJlcXVlc3QoZ2V0JDEpLFxuICAgICAgbGlzdDogbWFrZVJlcXVlc3QobGlzdCQxKSxcbiAgICAgIGdldFN0YXRzOiBtYWtlUmVxdWVzdChnZXRTdGF0cyksXG4gICAgICBnZXRSYW5kb206IG1ha2VSZXF1ZXN0KGdldFJhbmRvbSksXG4gICAgICB0cmFja0Rvd25sb2FkOiBtYWtlUmVxdWVzdCh0cmFja0Rvd25sb2FkKVxuICAgIH0sXG4gICAgdXNlcnM6IHtcbiAgICAgIGdldFBob3RvczogbWFrZVJlcXVlc3QoZ2V0UGhvdG9zJDIpLFxuICAgICAgZ2V0Q29sbGVjdGlvbnM6IG1ha2VSZXF1ZXN0KGdldENvbGxlY3Rpb25zJDIpLFxuICAgICAgZ2V0TGlrZXM6IG1ha2VSZXF1ZXN0KGdldExpa2VzKSxcbiAgICAgIGdldDogbWFrZVJlcXVlc3QoZ2V0JDIpXG4gICAgfSxcbiAgICBzZWFyY2g6IHtcbiAgICAgIGdldENvbGxlY3Rpb25zOiBtYWtlUmVxdWVzdChnZXRDb2xsZWN0aW9ucyQxKSxcbiAgICAgIGdldFBob3RvczogbWFrZVJlcXVlc3QoZ2V0UGhvdG9zJDEpLFxuICAgICAgZ2V0VXNlcnM6IG1ha2VSZXF1ZXN0KGdldFVzZXJzKVxuICAgIH0sXG4gICAgY29sbGVjdGlvbnM6IHtcbiAgICAgIGdldFBob3RvczogbWFrZVJlcXVlc3QoZ2V0UGhvdG9zKSxcbiAgICAgIGdldDogbWFrZVJlcXVlc3QoZ2V0KSxcbiAgICAgIGxpc3Q6IG1ha2VSZXF1ZXN0KGxpc3QpLFxuICAgICAgZ2V0UmVsYXRlZDogbWFrZVJlcXVlc3QoZ2V0UmVsYXRlZClcbiAgICB9LFxuICAgIHRvcGljczoge1xuICAgICAgbGlzdDogbWFrZVJlcXVlc3QobGlzdCQyKSxcbiAgICAgIGdldDogbWFrZVJlcXVlc3QoZ2V0JDMpLFxuICAgICAgZ2V0UGhvdG9zOiBtYWtlUmVxdWVzdChnZXRQaG90b3MkMylcbiAgICB9XG4gIH07XG59KTtcblxuZXhwb3J0IHsgTGFuZ3VhZ2UsIE9yZGVyQnksIGludGVybmFscyBhcyBfaW50ZXJuYWxzLCBjcmVhdGVBcGkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuc3BsYXNoLWpzLmVzbS5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiTklMXCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9uaWwuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJwYXJzZVwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfcGFyc2UuZGVmYXVsdDtcbiAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJzdHJpbmdpZnlcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX3N0cmluZ2lmeS5kZWZhdWx0O1xuICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInYxXCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF92LmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidjNcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX3YyLmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidjRcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX3YzLmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidjVcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX3Y0LmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidmFsaWRhdGVcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX3ZhbGlkYXRlLmRlZmF1bHQ7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidmVyc2lvblwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfdmVyc2lvbi5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF92ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92MS5qc1wiKSk7XG5cbnZhciBfdjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3YzLmpzXCIpKTtcblxudmFyIF92MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdjQuanNcIikpO1xuXG52YXIgX3Y0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92NS5qc1wiKSk7XG5cbnZhciBfbmlsID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9uaWwuanNcIikpO1xuXG52YXIgX3ZlcnNpb24gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3ZlcnNpb24uanNcIikpO1xuXG52YXIgX3ZhbGlkYXRlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi92YWxpZGF0ZS5qc1wiKSk7XG5cbnZhciBfc3RyaW5naWZ5ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9zdHJpbmdpZnkuanNcIikpO1xuXG52YXIgX3BhcnNlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9wYXJzZS5qc1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbi8qXG4gKiBCcm93c2VyLWNvbXBhdGlibGUgSmF2YVNjcmlwdCBNRDVcbiAqXG4gKiBNb2RpZmljYXRpb24gb2YgSmF2YVNjcmlwdCBNRDVcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ibHVlaW1wL0phdmFTY3JpcHQtTUQ1XG4gKlxuICogQ29weXJpZ2h0IDIwMTEsIFNlYmFzdGlhbiBUc2NoYW5cbiAqIGh0dHBzOi8vYmx1ZWltcC5uZXRcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2U6XG4gKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVFxuICpcbiAqIEJhc2VkIG9uXG4gKiBBIEphdmFTY3JpcHQgaW1wbGVtZW50YXRpb24gb2YgdGhlIFJTQSBEYXRhIFNlY3VyaXR5LCBJbmMuIE1ENSBNZXNzYWdlXG4gKiBEaWdlc3QgQWxnb3JpdGhtLCBhcyBkZWZpbmVkIGluIFJGQyAxMzIxLlxuICogVmVyc2lvbiAyLjIgQ29weXJpZ2h0IChDKSBQYXVsIEpvaG5zdG9uIDE5OTkgLSAyMDA5XG4gKiBPdGhlciBjb250cmlidXRvcnM6IEdyZWcgSG9sdCwgQW5kcmV3IEtlcGVydCwgWWRuYXIsIExvc3RpbmV0XG4gKiBEaXN0cmlidXRlZCB1bmRlciB0aGUgQlNEIExpY2Vuc2VcbiAqIFNlZSBodHRwOi8vcGFqaG9tZS5vcmcudWsvY3J5cHQvbWQ1IGZvciBtb3JlIGluZm8uXG4gKi9cbmZ1bmN0aW9uIG1kNShieXRlcykge1xuICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xuICAgIGNvbnN0IG1zZyA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChieXRlcykpOyAvLyBVVEY4IGVzY2FwZVxuXG4gICAgYnl0ZXMgPSBuZXcgVWludDhBcnJheShtc2cubGVuZ3RoKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgKytpKSB7XG4gICAgICBieXRlc1tpXSA9IG1zZy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtZDVUb0hleEVuY29kZWRBcnJheSh3b3Jkc1RvTWQ1KGJ5dGVzVG9Xb3JkcyhieXRlcyksIGJ5dGVzLmxlbmd0aCAqIDgpKTtcbn1cbi8qXG4gKiBDb252ZXJ0IGFuIGFycmF5IG9mIGxpdHRsZS1lbmRpYW4gd29yZHMgdG8gYW4gYXJyYXkgb2YgYnl0ZXNcbiAqL1xuXG5cbmZ1bmN0aW9uIG1kNVRvSGV4RW5jb2RlZEFycmF5KGlucHV0KSB7XG4gIGNvbnN0IG91dHB1dCA9IFtdO1xuICBjb25zdCBsZW5ndGgzMiA9IGlucHV0Lmxlbmd0aCAqIDMyO1xuICBjb25zdCBoZXhUYWIgPSAnMDEyMzQ1Njc4OWFiY2RlZic7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGgzMjsgaSArPSA4KSB7XG4gICAgY29uc3QgeCA9IGlucHV0W2kgPj4gNV0gPj4+IGkgJSAzMiAmIDB4ZmY7XG4gICAgY29uc3QgaGV4ID0gcGFyc2VJbnQoaGV4VGFiLmNoYXJBdCh4ID4+PiA0ICYgMHgwZikgKyBoZXhUYWIuY2hhckF0KHggJiAweDBmKSwgMTYpO1xuICAgIG91dHB1dC5wdXNoKGhleCk7XG4gIH1cblxuICByZXR1cm4gb3V0cHV0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGUgb3V0cHV0IGxlbmd0aCB3aXRoIHBhZGRpbmcgYW5kIGJpdCBsZW5ndGhcbiAqL1xuXG5cbmZ1bmN0aW9uIGdldE91dHB1dExlbmd0aChpbnB1dExlbmd0aDgpIHtcbiAgcmV0dXJuIChpbnB1dExlbmd0aDggKyA2NCA+Pj4gOSA8PCA0KSArIDE0ICsgMTtcbn1cbi8qXG4gKiBDYWxjdWxhdGUgdGhlIE1ENSBvZiBhbiBhcnJheSBvZiBsaXR0bGUtZW5kaWFuIHdvcmRzLCBhbmQgYSBiaXQgbGVuZ3RoLlxuICovXG5cblxuZnVuY3Rpb24gd29yZHNUb01kNSh4LCBsZW4pIHtcbiAgLyogYXBwZW5kIHBhZGRpbmcgKi9cbiAgeFtsZW4gPj4gNV0gfD0gMHg4MCA8PCBsZW4gJSAzMjtcbiAgeFtnZXRPdXRwdXRMZW5ndGgobGVuKSAtIDFdID0gbGVuO1xuICBsZXQgYSA9IDE3MzI1ODQxOTM7XG4gIGxldCBiID0gLTI3MTczMzg3OTtcbiAgbGV0IGMgPSAtMTczMjU4NDE5NDtcbiAgbGV0IGQgPSAyNzE3MzM4Nzg7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSArPSAxNikge1xuICAgIGNvbnN0IG9sZGEgPSBhO1xuICAgIGNvbnN0IG9sZGIgPSBiO1xuICAgIGNvbnN0IG9sZGMgPSBjO1xuICAgIGNvbnN0IG9sZGQgPSBkO1xuICAgIGEgPSBtZDVmZihhLCBiLCBjLCBkLCB4W2ldLCA3LCAtNjgwODc2OTM2KTtcbiAgICBkID0gbWQ1ZmYoZCwgYSwgYiwgYywgeFtpICsgMV0sIDEyLCAtMzg5NTY0NTg2KTtcbiAgICBjID0gbWQ1ZmYoYywgZCwgYSwgYiwgeFtpICsgMl0sIDE3LCA2MDYxMDU4MTkpO1xuICAgIGIgPSBtZDVmZihiLCBjLCBkLCBhLCB4W2kgKyAzXSwgMjIsIC0xMDQ0NTI1MzMwKTtcbiAgICBhID0gbWQ1ZmYoYSwgYiwgYywgZCwgeFtpICsgNF0sIDcsIC0xNzY0MTg4OTcpO1xuICAgIGQgPSBtZDVmZihkLCBhLCBiLCBjLCB4W2kgKyA1XSwgMTIsIDEyMDAwODA0MjYpO1xuICAgIGMgPSBtZDVmZihjLCBkLCBhLCBiLCB4W2kgKyA2XSwgMTcsIC0xNDczMjMxMzQxKTtcbiAgICBiID0gbWQ1ZmYoYiwgYywgZCwgYSwgeFtpICsgN10sIDIyLCAtNDU3MDU5ODMpO1xuICAgIGEgPSBtZDVmZihhLCBiLCBjLCBkLCB4W2kgKyA4XSwgNywgMTc3MDAzNTQxNik7XG4gICAgZCA9IG1kNWZmKGQsIGEsIGIsIGMsIHhbaSArIDldLCAxMiwgLTE5NTg0MTQ0MTcpO1xuICAgIGMgPSBtZDVmZihjLCBkLCBhLCBiLCB4W2kgKyAxMF0sIDE3LCAtNDIwNjMpO1xuICAgIGIgPSBtZDVmZihiLCBjLCBkLCBhLCB4W2kgKyAxMV0sIDIyLCAtMTk5MDQwNDE2Mik7XG4gICAgYSA9IG1kNWZmKGEsIGIsIGMsIGQsIHhbaSArIDEyXSwgNywgMTgwNDYwMzY4Mik7XG4gICAgZCA9IG1kNWZmKGQsIGEsIGIsIGMsIHhbaSArIDEzXSwgMTIsIC00MDM0MTEwMSk7XG4gICAgYyA9IG1kNWZmKGMsIGQsIGEsIGIsIHhbaSArIDE0XSwgMTcsIC0xNTAyMDAyMjkwKTtcbiAgICBiID0gbWQ1ZmYoYiwgYywgZCwgYSwgeFtpICsgMTVdLCAyMiwgMTIzNjUzNTMyOSk7XG4gICAgYSA9IG1kNWdnKGEsIGIsIGMsIGQsIHhbaSArIDFdLCA1LCAtMTY1Nzk2NTEwKTtcbiAgICBkID0gbWQ1Z2coZCwgYSwgYiwgYywgeFtpICsgNl0sIDksIC0xMDY5NTAxNjMyKTtcbiAgICBjID0gbWQ1Z2coYywgZCwgYSwgYiwgeFtpICsgMTFdLCAxNCwgNjQzNzE3NzEzKTtcbiAgICBiID0gbWQ1Z2coYiwgYywgZCwgYSwgeFtpXSwgMjAsIC0zNzM4OTczMDIpO1xuICAgIGEgPSBtZDVnZyhhLCBiLCBjLCBkLCB4W2kgKyA1XSwgNSwgLTcwMTU1ODY5MSk7XG4gICAgZCA9IG1kNWdnKGQsIGEsIGIsIGMsIHhbaSArIDEwXSwgOSwgMzgwMTYwODMpO1xuICAgIGMgPSBtZDVnZyhjLCBkLCBhLCBiLCB4W2kgKyAxNV0sIDE0LCAtNjYwNDc4MzM1KTtcbiAgICBiID0gbWQ1Z2coYiwgYywgZCwgYSwgeFtpICsgNF0sIDIwLCAtNDA1NTM3ODQ4KTtcbiAgICBhID0gbWQ1Z2coYSwgYiwgYywgZCwgeFtpICsgOV0sIDUsIDU2ODQ0NjQzOCk7XG4gICAgZCA9IG1kNWdnKGQsIGEsIGIsIGMsIHhbaSArIDE0XSwgOSwgLTEwMTk4MDM2OTApO1xuICAgIGMgPSBtZDVnZyhjLCBkLCBhLCBiLCB4W2kgKyAzXSwgMTQsIC0xODczNjM5NjEpO1xuICAgIGIgPSBtZDVnZyhiLCBjLCBkLCBhLCB4W2kgKyA4XSwgMjAsIDExNjM1MzE1MDEpO1xuICAgIGEgPSBtZDVnZyhhLCBiLCBjLCBkLCB4W2kgKyAxM10sIDUsIC0xNDQ0NjgxNDY3KTtcbiAgICBkID0gbWQ1Z2coZCwgYSwgYiwgYywgeFtpICsgMl0sIDksIC01MTQwMzc4NCk7XG4gICAgYyA9IG1kNWdnKGMsIGQsIGEsIGIsIHhbaSArIDddLCAxNCwgMTczNTMyODQ3Myk7XG4gICAgYiA9IG1kNWdnKGIsIGMsIGQsIGEsIHhbaSArIDEyXSwgMjAsIC0xOTI2NjA3NzM0KTtcbiAgICBhID0gbWQ1aGgoYSwgYiwgYywgZCwgeFtpICsgNV0sIDQsIC0zNzg1NTgpO1xuICAgIGQgPSBtZDVoaChkLCBhLCBiLCBjLCB4W2kgKyA4XSwgMTEsIC0yMDIyNTc0NDYzKTtcbiAgICBjID0gbWQ1aGgoYywgZCwgYSwgYiwgeFtpICsgMTFdLCAxNiwgMTgzOTAzMDU2Mik7XG4gICAgYiA9IG1kNWhoKGIsIGMsIGQsIGEsIHhbaSArIDE0XSwgMjMsIC0zNTMwOTU1Nik7XG4gICAgYSA9IG1kNWhoKGEsIGIsIGMsIGQsIHhbaSArIDFdLCA0LCAtMTUzMDk5MjA2MCk7XG4gICAgZCA9IG1kNWhoKGQsIGEsIGIsIGMsIHhbaSArIDRdLCAxMSwgMTI3Mjg5MzM1Myk7XG4gICAgYyA9IG1kNWhoKGMsIGQsIGEsIGIsIHhbaSArIDddLCAxNiwgLTE1NTQ5NzYzMik7XG4gICAgYiA9IG1kNWhoKGIsIGMsIGQsIGEsIHhbaSArIDEwXSwgMjMsIC0xMDk0NzMwNjQwKTtcbiAgICBhID0gbWQ1aGgoYSwgYiwgYywgZCwgeFtpICsgMTNdLCA0LCA2ODEyNzkxNzQpO1xuICAgIGQgPSBtZDVoaChkLCBhLCBiLCBjLCB4W2ldLCAxMSwgLTM1ODUzNzIyMik7XG4gICAgYyA9IG1kNWhoKGMsIGQsIGEsIGIsIHhbaSArIDNdLCAxNiwgLTcyMjUyMTk3OSk7XG4gICAgYiA9IG1kNWhoKGIsIGMsIGQsIGEsIHhbaSArIDZdLCAyMywgNzYwMjkxODkpO1xuICAgIGEgPSBtZDVoaChhLCBiLCBjLCBkLCB4W2kgKyA5XSwgNCwgLTY0MDM2NDQ4Nyk7XG4gICAgZCA9IG1kNWhoKGQsIGEsIGIsIGMsIHhbaSArIDEyXSwgMTEsIC00MjE4MTU4MzUpO1xuICAgIGMgPSBtZDVoaChjLCBkLCBhLCBiLCB4W2kgKyAxNV0sIDE2LCA1MzA3NDI1MjApO1xuICAgIGIgPSBtZDVoaChiLCBjLCBkLCBhLCB4W2kgKyAyXSwgMjMsIC05OTUzMzg2NTEpO1xuICAgIGEgPSBtZDVpaShhLCBiLCBjLCBkLCB4W2ldLCA2LCAtMTk4NjMwODQ0KTtcbiAgICBkID0gbWQ1aWkoZCwgYSwgYiwgYywgeFtpICsgN10sIDEwLCAxMTI2ODkxNDE1KTtcbiAgICBjID0gbWQ1aWkoYywgZCwgYSwgYiwgeFtpICsgMTRdLCAxNSwgLTE0MTYzNTQ5MDUpO1xuICAgIGIgPSBtZDVpaShiLCBjLCBkLCBhLCB4W2kgKyA1XSwgMjEsIC01NzQzNDA1NSk7XG4gICAgYSA9IG1kNWlpKGEsIGIsIGMsIGQsIHhbaSArIDEyXSwgNiwgMTcwMDQ4NTU3MSk7XG4gICAgZCA9IG1kNWlpKGQsIGEsIGIsIGMsIHhbaSArIDNdLCAxMCwgLTE4OTQ5ODY2MDYpO1xuICAgIGMgPSBtZDVpaShjLCBkLCBhLCBiLCB4W2kgKyAxMF0sIDE1LCAtMTA1MTUyMyk7XG4gICAgYiA9IG1kNWlpKGIsIGMsIGQsIGEsIHhbaSArIDFdLCAyMSwgLTIwNTQ5MjI3OTkpO1xuICAgIGEgPSBtZDVpaShhLCBiLCBjLCBkLCB4W2kgKyA4XSwgNiwgMTg3MzMxMzM1OSk7XG4gICAgZCA9IG1kNWlpKGQsIGEsIGIsIGMsIHhbaSArIDE1XSwgMTAsIC0zMDYxMTc0NCk7XG4gICAgYyA9IG1kNWlpKGMsIGQsIGEsIGIsIHhbaSArIDZdLCAxNSwgLTE1NjAxOTgzODApO1xuICAgIGIgPSBtZDVpaShiLCBjLCBkLCBhLCB4W2kgKyAxM10sIDIxLCAxMzA5MTUxNjQ5KTtcbiAgICBhID0gbWQ1aWkoYSwgYiwgYywgZCwgeFtpICsgNF0sIDYsIC0xNDU1MjMwNzApO1xuICAgIGQgPSBtZDVpaShkLCBhLCBiLCBjLCB4W2kgKyAxMV0sIDEwLCAtMTEyMDIxMDM3OSk7XG4gICAgYyA9IG1kNWlpKGMsIGQsIGEsIGIsIHhbaSArIDJdLCAxNSwgNzE4Nzg3MjU5KTtcbiAgICBiID0gbWQ1aWkoYiwgYywgZCwgYSwgeFtpICsgOV0sIDIxLCAtMzQzNDg1NTUxKTtcbiAgICBhID0gc2FmZUFkZChhLCBvbGRhKTtcbiAgICBiID0gc2FmZUFkZChiLCBvbGRiKTtcbiAgICBjID0gc2FmZUFkZChjLCBvbGRjKTtcbiAgICBkID0gc2FmZUFkZChkLCBvbGRkKTtcbiAgfVxuXG4gIHJldHVybiBbYSwgYiwgYywgZF07XG59XG4vKlxuICogQ29udmVydCBhbiBhcnJheSBieXRlcyB0byBhbiBhcnJheSBvZiBsaXR0bGUtZW5kaWFuIHdvcmRzXG4gKiBDaGFyYWN0ZXJzID4yNTUgaGF2ZSB0aGVpciBoaWdoLWJ5dGUgc2lsZW50bHkgaWdub3JlZC5cbiAqL1xuXG5cbmZ1bmN0aW9uIGJ5dGVzVG9Xb3JkcyhpbnB1dCkge1xuICBpZiAoaW5wdXQubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgY29uc3QgbGVuZ3RoOCA9IGlucHV0Lmxlbmd0aCAqIDg7XG4gIGNvbnN0IG91dHB1dCA9IG5ldyBVaW50MzJBcnJheShnZXRPdXRwdXRMZW5ndGgobGVuZ3RoOCkpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoODsgaSArPSA4KSB7XG4gICAgb3V0cHV0W2kgPj4gNV0gfD0gKGlucHV0W2kgLyA4XSAmIDB4ZmYpIDw8IGkgJSAzMjtcbiAgfVxuXG4gIHJldHVybiBvdXRwdXQ7XG59XG4vKlxuICogQWRkIGludGVnZXJzLCB3cmFwcGluZyBhdCAyXjMyLiBUaGlzIHVzZXMgMTYtYml0IG9wZXJhdGlvbnMgaW50ZXJuYWxseVxuICogdG8gd29yayBhcm91bmQgYnVncyBpbiBzb21lIEpTIGludGVycHJldGVycy5cbiAqL1xuXG5cbmZ1bmN0aW9uIHNhZmVBZGQoeCwgeSkge1xuICBjb25zdCBsc3cgPSAoeCAmIDB4ZmZmZikgKyAoeSAmIDB4ZmZmZik7XG4gIGNvbnN0IG1zdyA9ICh4ID4+IDE2KSArICh5ID4+IDE2KSArIChsc3cgPj4gMTYpO1xuICByZXR1cm4gbXN3IDw8IDE2IHwgbHN3ICYgMHhmZmZmO1xufVxuLypcbiAqIEJpdHdpc2Ugcm90YXRlIGEgMzItYml0IG51bWJlciB0byB0aGUgbGVmdC5cbiAqL1xuXG5cbmZ1bmN0aW9uIGJpdFJvdGF0ZUxlZnQobnVtLCBjbnQpIHtcbiAgcmV0dXJuIG51bSA8PCBjbnQgfCBudW0gPj4+IDMyIC0gY250O1xufVxuLypcbiAqIFRoZXNlIGZ1bmN0aW9ucyBpbXBsZW1lbnQgdGhlIGZvdXIgYmFzaWMgb3BlcmF0aW9ucyB0aGUgYWxnb3JpdGhtIHVzZXMuXG4gKi9cblxuXG5mdW5jdGlvbiBtZDVjbW4ocSwgYSwgYiwgeCwgcywgdCkge1xuICByZXR1cm4gc2FmZUFkZChiaXRSb3RhdGVMZWZ0KHNhZmVBZGQoc2FmZUFkZChhLCBxKSwgc2FmZUFkZCh4LCB0KSksIHMpLCBiKTtcbn1cblxuZnVuY3Rpb24gbWQ1ZmYoYSwgYiwgYywgZCwgeCwgcywgdCkge1xuICByZXR1cm4gbWQ1Y21uKGIgJiBjIHwgfmIgJiBkLCBhLCBiLCB4LCBzLCB0KTtcbn1cblxuZnVuY3Rpb24gbWQ1Z2coYSwgYiwgYywgZCwgeCwgcywgdCkge1xuICByZXR1cm4gbWQ1Y21uKGIgJiBkIHwgYyAmIH5kLCBhLCBiLCB4LCBzLCB0KTtcbn1cblxuZnVuY3Rpb24gbWQ1aGgoYSwgYiwgYywgZCwgeCwgcywgdCkge1xuICByZXR1cm4gbWQ1Y21uKGIgXiBjIF4gZCwgYSwgYiwgeCwgcywgdCk7XG59XG5cbmZ1bmN0aW9uIG1kNWlpKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHtcbiAgcmV0dXJuIG1kNWNtbihjIF4gKGIgfCB+ZCksIGEsIGIsIHgsIHMsIHQpO1xufVxuXG52YXIgX2RlZmF1bHQgPSBtZDU7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbmNvbnN0IHJhbmRvbVVVSUQgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8ucmFuZG9tVVVJRCAmJiBjcnlwdG8ucmFuZG9tVVVJRC5iaW5kKGNyeXB0byk7XG52YXIgX2RlZmF1bHQgPSB7XG4gIHJhbmRvbVVVSURcbn07XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBfZGVmYXVsdCA9ICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAnO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfdmFsaWRhdGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3ZhbGlkYXRlLmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gcGFyc2UodXVpZCkge1xuICBpZiAoISgwLCBfdmFsaWRhdGUuZGVmYXVsdCkodXVpZCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ0ludmFsaWQgVVVJRCcpO1xuICB9XG5cbiAgbGV0IHY7XG4gIGNvbnN0IGFyciA9IG5ldyBVaW50OEFycmF5KDE2KTsgLy8gUGFyc2UgIyMjIyMjIyMtLi4uLi0uLi4uLS4uLi4tLi4uLi4uLi4uLi4uXG5cbiAgYXJyWzBdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDAsIDgpLCAxNikpID4+PiAyNDtcbiAgYXJyWzFdID0gdiA+Pj4gMTYgJiAweGZmO1xuICBhcnJbMl0gPSB2ID4+PiA4ICYgMHhmZjtcbiAgYXJyWzNdID0gdiAmIDB4ZmY7IC8vIFBhcnNlIC4uLi4uLi4uLSMjIyMtLi4uLi0uLi4uLS4uLi4uLi4uLi4uLlxuXG4gIGFycls0XSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSg5LCAxMyksIDE2KSkgPj4+IDg7XG4gIGFycls1XSA9IHYgJiAweGZmOyAvLyBQYXJzZSAuLi4uLi4uLi0uLi4uLSMjIyMtLi4uLi0uLi4uLi4uLi4uLi5cblxuICBhcnJbNl0gPSAodiA9IHBhcnNlSW50KHV1aWQuc2xpY2UoMTQsIDE4KSwgMTYpKSA+Pj4gODtcbiAgYXJyWzddID0gdiAmIDB4ZmY7IC8vIFBhcnNlIC4uLi4uLi4uLS4uLi4tLi4uLi0jIyMjLS4uLi4uLi4uLi4uLlxuXG4gIGFycls4XSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSgxOSwgMjMpLCAxNikpID4+PiA4O1xuICBhcnJbOV0gPSB2ICYgMHhmZjsgLy8gUGFyc2UgLi4uLi4uLi4tLi4uLi0uLi4uLS4uLi4tIyMjIyMjIyMjIyMjXG4gIC8vIChVc2UgXCIvXCIgdG8gYXZvaWQgMzItYml0IHRydW5jYXRpb24gd2hlbiBiaXQtc2hpZnRpbmcgaGlnaC1vcmRlciBieXRlcylcblxuICBhcnJbMTBdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDI0LCAzNiksIDE2KSkgLyAweDEwMDAwMDAwMDAwICYgMHhmZjtcbiAgYXJyWzExXSA9IHYgLyAweDEwMDAwMDAwMCAmIDB4ZmY7XG4gIGFyclsxMl0gPSB2ID4+PiAyNCAmIDB4ZmY7XG4gIGFyclsxM10gPSB2ID4+PiAxNiAmIDB4ZmY7XG4gIGFyclsxNF0gPSB2ID4+PiA4ICYgMHhmZjtcbiAgYXJyWzE1XSA9IHYgJiAweGZmO1xuICByZXR1cm4gYXJyO1xufVxuXG52YXIgX2RlZmF1bHQgPSBwYXJzZTtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xudmFyIF9kZWZhdWx0ID0gL14oPzpbMC05YS1mXXs4fS1bMC05YS1mXXs0fS1bMS01XVswLTlhLWZdezN9LVs4OWFiXVswLTlhLWZdezN9LVswLTlhLWZdezEyfXwwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDApJC9pO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBybmc7XG4vLyBVbmlxdWUgSUQgY3JlYXRpb24gcmVxdWlyZXMgYSBoaWdoIHF1YWxpdHkgcmFuZG9tICMgZ2VuZXJhdG9yLiBJbiB0aGUgYnJvd3NlciB3ZSB0aGVyZWZvcmVcbi8vIHJlcXVpcmUgdGhlIGNyeXB0byBBUEkgYW5kIGRvIG5vdCBzdXBwb3J0IGJ1aWx0LWluIGZhbGxiYWNrIHRvIGxvd2VyIHF1YWxpdHkgcmFuZG9tIG51bWJlclxuLy8gZ2VuZXJhdG9ycyAobGlrZSBNYXRoLnJhbmRvbSgpKS5cbmxldCBnZXRSYW5kb21WYWx1ZXM7XG5jb25zdCBybmRzOCA9IG5ldyBVaW50OEFycmF5KDE2KTtcblxuZnVuY3Rpb24gcm5nKCkge1xuICAvLyBsYXp5IGxvYWQgc28gdGhhdCBlbnZpcm9ubWVudHMgdGhhdCBuZWVkIHRvIHBvbHlmaWxsIGhhdmUgYSBjaGFuY2UgdG8gZG8gc29cbiAgaWYgKCFnZXRSYW5kb21WYWx1ZXMpIHtcbiAgICAvLyBnZXRSYW5kb21WYWx1ZXMgbmVlZHMgdG8gYmUgaW52b2tlZCBpbiBhIGNvbnRleHQgd2hlcmUgXCJ0aGlzXCIgaXMgYSBDcnlwdG8gaW1wbGVtZW50YXRpb24uXG4gICAgZ2V0UmFuZG9tVmFsdWVzID0gdHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKTtcblxuICAgIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyeXB0by5nZXRSYW5kb21WYWx1ZXMoKSBub3Qgc3VwcG9ydGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkI2dldHJhbmRvbXZhbHVlcy1ub3Qtc3VwcG9ydGVkJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGdldFJhbmRvbVZhbHVlcyhybmRzOCk7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbi8vIEFkYXB0ZWQgZnJvbSBDaHJpcyBWZW5lc3MnIFNIQTEgY29kZSBhdFxuLy8gaHR0cDovL3d3dy5tb3ZhYmxlLXR5cGUuY28udWsvc2NyaXB0cy9zaGExLmh0bWxcbmZ1bmN0aW9uIGYocywgeCwgeSwgeikge1xuICBzd2l0Y2ggKHMpIHtcbiAgICBjYXNlIDA6XG4gICAgICByZXR1cm4geCAmIHkgXiB+eCAmIHo7XG5cbiAgICBjYXNlIDE6XG4gICAgICByZXR1cm4geCBeIHkgXiB6O1xuXG4gICAgY2FzZSAyOlxuICAgICAgcmV0dXJuIHggJiB5IF4geCAmIHogXiB5ICYgejtcblxuICAgIGNhc2UgMzpcbiAgICAgIHJldHVybiB4IF4geSBeIHo7XG4gIH1cbn1cblxuZnVuY3Rpb24gUk9UTCh4LCBuKSB7XG4gIHJldHVybiB4IDw8IG4gfCB4ID4+PiAzMiAtIG47XG59XG5cbmZ1bmN0aW9uIHNoYTEoYnl0ZXMpIHtcbiAgY29uc3QgSyA9IFsweDVhODI3OTk5LCAweDZlZDllYmExLCAweDhmMWJiY2RjLCAweGNhNjJjMWQ2XTtcbiAgY29uc3QgSCA9IFsweDY3NDUyMzAxLCAweGVmY2RhYjg5LCAweDk4YmFkY2ZlLCAweDEwMzI1NDc2LCAweGMzZDJlMWYwXTtcblxuICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xuICAgIGNvbnN0IG1zZyA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChieXRlcykpOyAvLyBVVEY4IGVzY2FwZVxuXG4gICAgYnl0ZXMgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgKytpKSB7XG4gICAgICBieXRlcy5wdXNoKG1zZy5jaGFyQ29kZUF0KGkpKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkoYnl0ZXMpKSB7XG4gICAgLy8gQ29udmVydCBBcnJheS1saWtlIHRvIEFycmF5XG4gICAgYnl0ZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChieXRlcyk7XG4gIH1cblxuICBieXRlcy5wdXNoKDB4ODApO1xuICBjb25zdCBsID0gYnl0ZXMubGVuZ3RoIC8gNCArIDI7XG4gIGNvbnN0IE4gPSBNYXRoLmNlaWwobCAvIDE2KTtcbiAgY29uc3QgTSA9IG5ldyBBcnJheShOKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IE47ICsraSkge1xuICAgIGNvbnN0IGFyciA9IG5ldyBVaW50MzJBcnJheSgxNik7XG5cbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IDE2OyArK2opIHtcbiAgICAgIGFycltqXSA9IGJ5dGVzW2kgKiA2NCArIGogKiA0XSA8PCAyNCB8IGJ5dGVzW2kgKiA2NCArIGogKiA0ICsgMV0gPDwgMTYgfCBieXRlc1tpICogNjQgKyBqICogNCArIDJdIDw8IDggfCBieXRlc1tpICogNjQgKyBqICogNCArIDNdO1xuICAgIH1cblxuICAgIE1baV0gPSBhcnI7XG4gIH1cblxuICBNW04gLSAxXVsxNF0gPSAoYnl0ZXMubGVuZ3RoIC0gMSkgKiA4IC8gTWF0aC5wb3coMiwgMzIpO1xuICBNW04gLSAxXVsxNF0gPSBNYXRoLmZsb29yKE1bTiAtIDFdWzE0XSk7XG4gIE1bTiAtIDFdWzE1XSA9IChieXRlcy5sZW5ndGggLSAxKSAqIDggJiAweGZmZmZmZmZmO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgTjsgKytpKSB7XG4gICAgY29uc3QgVyA9IG5ldyBVaW50MzJBcnJheSg4MCk7XG5cbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IDE2OyArK3QpIHtcbiAgICAgIFdbdF0gPSBNW2ldW3RdO1xuICAgIH1cblxuICAgIGZvciAobGV0IHQgPSAxNjsgdCA8IDgwOyArK3QpIHtcbiAgICAgIFdbdF0gPSBST1RMKFdbdCAtIDNdIF4gV1t0IC0gOF0gXiBXW3QgLSAxNF0gXiBXW3QgLSAxNl0sIDEpO1xuICAgIH1cblxuICAgIGxldCBhID0gSFswXTtcbiAgICBsZXQgYiA9IEhbMV07XG4gICAgbGV0IGMgPSBIWzJdO1xuICAgIGxldCBkID0gSFszXTtcbiAgICBsZXQgZSA9IEhbNF07XG5cbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IDgwOyArK3QpIHtcbiAgICAgIGNvbnN0IHMgPSBNYXRoLmZsb29yKHQgLyAyMCk7XG4gICAgICBjb25zdCBUID0gUk9UTChhLCA1KSArIGYocywgYiwgYywgZCkgKyBlICsgS1tzXSArIFdbdF0gPj4+IDA7XG4gICAgICBlID0gZDtcbiAgICAgIGQgPSBjO1xuICAgICAgYyA9IFJPVEwoYiwgMzApID4+PiAwO1xuICAgICAgYiA9IGE7XG4gICAgICBhID0gVDtcbiAgICB9XG5cbiAgICBIWzBdID0gSFswXSArIGEgPj4+IDA7XG4gICAgSFsxXSA9IEhbMV0gKyBiID4+PiAwO1xuICAgIEhbMl0gPSBIWzJdICsgYyA+Pj4gMDtcbiAgICBIWzNdID0gSFszXSArIGQgPj4+IDA7XG4gICAgSFs0XSA9IEhbNF0gKyBlID4+PiAwO1xuICB9XG5cbiAgcmV0dXJuIFtIWzBdID4+IDI0ICYgMHhmZiwgSFswXSA+PiAxNiAmIDB4ZmYsIEhbMF0gPj4gOCAmIDB4ZmYsIEhbMF0gJiAweGZmLCBIWzFdID4+IDI0ICYgMHhmZiwgSFsxXSA+PiAxNiAmIDB4ZmYsIEhbMV0gPj4gOCAmIDB4ZmYsIEhbMV0gJiAweGZmLCBIWzJdID4+IDI0ICYgMHhmZiwgSFsyXSA+PiAxNiAmIDB4ZmYsIEhbMl0gPj4gOCAmIDB4ZmYsIEhbMl0gJiAweGZmLCBIWzNdID4+IDI0ICYgMHhmZiwgSFszXSA+PiAxNiAmIDB4ZmYsIEhbM10gPj4gOCAmIDB4ZmYsIEhbM10gJiAweGZmLCBIWzRdID4+IDI0ICYgMHhmZiwgSFs0XSA+PiAxNiAmIDB4ZmYsIEhbNF0gPj4gOCAmIDB4ZmYsIEhbNF0gJiAweGZmXTtcbn1cblxudmFyIF9kZWZhdWx0ID0gc2hhMTtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuZXhwb3J0cy51bnNhZmVTdHJpbmdpZnkgPSB1bnNhZmVTdHJpbmdpZnk7XG5cbnZhciBfdmFsaWRhdGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3ZhbGlkYXRlLmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG5jb25zdCBieXRlVG9IZXggPSBbXTtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXgucHVzaCgoaSArIDB4MTAwKS50b1N0cmluZygxNikuc2xpY2UoMSkpO1xufVxuXG5mdW5jdGlvbiB1bnNhZmVTdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gIC8vIE5vdGU6IEJlIGNhcmVmdWwgZWRpdGluZyB0aGlzIGNvZGUhICBJdCdzIGJlZW4gdHVuZWQgZm9yIHBlcmZvcm1hbmNlXG4gIC8vIGFuZCB3b3JrcyBpbiB3YXlzIHlvdSBtYXkgbm90IGV4cGVjdC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZC9wdWxsLzQzNFxuICByZXR1cm4gKGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgM11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDVdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA3XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDhdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxM11dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNV1dKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gIGNvbnN0IHV1aWQgPSB1bnNhZmVTdHJpbmdpZnkoYXJyLCBvZmZzZXQpOyAvLyBDb25zaXN0ZW5jeSBjaGVjayBmb3IgdmFsaWQgVVVJRC4gIElmIHRoaXMgdGhyb3dzLCBpdCdzIGxpa2VseSBkdWUgdG8gb25lXG4gIC8vIG9mIHRoZSBmb2xsb3dpbmc6XG4gIC8vIC0gT25lIG9yIG1vcmUgaW5wdXQgYXJyYXkgdmFsdWVzIGRvbid0IG1hcCB0byBhIGhleCBvY3RldCAobGVhZGluZyB0b1xuICAvLyBcInVuZGVmaW5lZFwiIGluIHRoZSB1dWlkKVxuICAvLyAtIEludmFsaWQgaW5wdXQgdmFsdWVzIGZvciB0aGUgUkZDIGB2ZXJzaW9uYCBvciBgdmFyaWFudGAgZmllbGRzXG5cbiAgaWYgKCEoMCwgX3ZhbGlkYXRlLmRlZmF1bHQpKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdTdHJpbmdpZmllZCBVVUlEIGlzIGludmFsaWQnKTtcbiAgfVxuXG4gIHJldHVybiB1dWlkO1xufVxuXG52YXIgX2RlZmF1bHQgPSBzdHJpbmdpZnk7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcblxudmFyIF9ybmcgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3JuZy5qc1wiKSk7XG5cbnZhciBfc3RyaW5naWZ5ID0gcmVxdWlyZShcIi4vc3RyaW5naWZ5LmpzXCIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vLyAqKmB2MSgpYCAtIEdlbmVyYXRlIHRpbWUtYmFzZWQgVVVJRCoqXG4vL1xuLy8gSW5zcGlyZWQgYnkgaHR0cHM6Ly9naXRodWIuY29tL0xpb3NLL1VVSUQuanNcbi8vIGFuZCBodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvdXVpZC5odG1sXG5sZXQgX25vZGVJZDtcblxubGV0IF9jbG9ja3NlcTsgLy8gUHJldmlvdXMgdXVpZCBjcmVhdGlvbiB0aW1lXG5cblxubGV0IF9sYXN0TVNlY3MgPSAwO1xubGV0IF9sYXN0TlNlY3MgPSAwOyAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkIGZvciBBUEkgZGV0YWlsc1xuXG5mdW5jdGlvbiB2MShvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICBsZXQgaSA9IGJ1ZiAmJiBvZmZzZXQgfHwgMDtcbiAgY29uc3QgYiA9IGJ1ZiB8fCBuZXcgQXJyYXkoMTYpO1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgbGV0IG5vZGUgPSBvcHRpb25zLm5vZGUgfHwgX25vZGVJZDtcbiAgbGV0IGNsb2Nrc2VxID0gb3B0aW9ucy5jbG9ja3NlcSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbG9ja3NlcSA6IF9jbG9ja3NlcTsgLy8gbm9kZSBhbmQgY2xvY2tzZXEgbmVlZCB0byBiZSBpbml0aWFsaXplZCB0byByYW5kb20gdmFsdWVzIGlmIHRoZXkncmUgbm90XG4gIC8vIHNwZWNpZmllZC4gIFdlIGRvIHRoaXMgbGF6aWx5IHRvIG1pbmltaXplIGlzc3VlcyByZWxhdGVkIHRvIGluc3VmZmljaWVudFxuICAvLyBzeXN0ZW0gZW50cm9weS4gIFNlZSAjMTg5XG5cbiAgaWYgKG5vZGUgPT0gbnVsbCB8fCBjbG9ja3NlcSA9PSBudWxsKSB7XG4gICAgY29uc3Qgc2VlZEJ5dGVzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IF9ybmcuZGVmYXVsdCkoKTtcblxuICAgIGlmIChub2RlID09IG51bGwpIHtcbiAgICAgIC8vIFBlciA0LjUsIGNyZWF0ZSBhbmQgNDgtYml0IG5vZGUgaWQsICg0NyByYW5kb20gYml0cyArIG11bHRpY2FzdCBiaXQgPSAxKVxuICAgICAgbm9kZSA9IF9ub2RlSWQgPSBbc2VlZEJ5dGVzWzBdIHwgMHgwMSwgc2VlZEJ5dGVzWzFdLCBzZWVkQnl0ZXNbMl0sIHNlZWRCeXRlc1szXSwgc2VlZEJ5dGVzWzRdLCBzZWVkQnl0ZXNbNV1dO1xuICAgIH1cblxuICAgIGlmIChjbG9ja3NlcSA9PSBudWxsKSB7XG4gICAgICAvLyBQZXIgNC4yLjIsIHJhbmRvbWl6ZSAoMTQgYml0KSBjbG9ja3NlcVxuICAgICAgY2xvY2tzZXEgPSBfY2xvY2tzZXEgPSAoc2VlZEJ5dGVzWzZdIDw8IDggfCBzZWVkQnl0ZXNbN10pICYgMHgzZmZmO1xuICAgIH1cbiAgfSAvLyBVVUlEIHRpbWVzdGFtcHMgYXJlIDEwMCBuYW5vLXNlY29uZCB1bml0cyBzaW5jZSB0aGUgR3JlZ29yaWFuIGVwb2NoLFxuICAvLyAoMTU4Mi0xMC0xNSAwMDowMCkuICBKU051bWJlcnMgYXJlbid0IHByZWNpc2UgZW5vdWdoIGZvciB0aGlzLCBzb1xuICAvLyB0aW1lIGlzIGhhbmRsZWQgaW50ZXJuYWxseSBhcyAnbXNlY3MnIChpbnRlZ2VyIG1pbGxpc2Vjb25kcykgYW5kICduc2VjcydcbiAgLy8gKDEwMC1uYW5vc2Vjb25kcyBvZmZzZXQgZnJvbSBtc2Vjcykgc2luY2UgdW5peCBlcG9jaCwgMTk3MC0wMS0wMSAwMDowMC5cblxuXG4gIGxldCBtc2VjcyA9IG9wdGlvbnMubXNlY3MgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubXNlY3MgOiBEYXRlLm5vdygpOyAvLyBQZXIgNC4yLjEuMiwgdXNlIGNvdW50IG9mIHV1aWQncyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBjdXJyZW50IGNsb2NrXG4gIC8vIGN5Y2xlIHRvIHNpbXVsYXRlIGhpZ2hlciByZXNvbHV0aW9uIGNsb2NrXG5cbiAgbGV0IG5zZWNzID0gb3B0aW9ucy5uc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5uc2VjcyA6IF9sYXN0TlNlY3MgKyAxOyAvLyBUaW1lIHNpbmNlIGxhc3QgdXVpZCBjcmVhdGlvbiAoaW4gbXNlY3MpXG5cbiAgY29uc3QgZHQgPSBtc2VjcyAtIF9sYXN0TVNlY3MgKyAobnNlY3MgLSBfbGFzdE5TZWNzKSAvIDEwMDAwOyAvLyBQZXIgNC4yLjEuMiwgQnVtcCBjbG9ja3NlcSBvbiBjbG9jayByZWdyZXNzaW9uXG5cbiAgaWYgKGR0IDwgMCAmJiBvcHRpb25zLmNsb2Nrc2VxID09PSB1bmRlZmluZWQpIHtcbiAgICBjbG9ja3NlcSA9IGNsb2Nrc2VxICsgMSAmIDB4M2ZmZjtcbiAgfSAvLyBSZXNldCBuc2VjcyBpZiBjbG9jayByZWdyZXNzZXMgKG5ldyBjbG9ja3NlcSkgb3Igd2UndmUgbW92ZWQgb250byBhIG5ld1xuICAvLyB0aW1lIGludGVydmFsXG5cblxuICBpZiAoKGR0IDwgMCB8fCBtc2VjcyA+IF9sYXN0TVNlY3MpICYmIG9wdGlvbnMubnNlY3MgPT09IHVuZGVmaW5lZCkge1xuICAgIG5zZWNzID0gMDtcbiAgfSAvLyBQZXIgNC4yLjEuMiBUaHJvdyBlcnJvciBpZiB0b28gbWFueSB1dWlkcyBhcmUgcmVxdWVzdGVkXG5cblxuICBpZiAobnNlY3MgPj0gMTAwMDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1dWlkLnYxKCk6IENhbid0IGNyZWF0ZSBtb3JlIHRoYW4gMTBNIHV1aWRzL3NlY1wiKTtcbiAgfVxuXG4gIF9sYXN0TVNlY3MgPSBtc2VjcztcbiAgX2xhc3ROU2VjcyA9IG5zZWNzO1xuICBfY2xvY2tzZXEgPSBjbG9ja3NlcTsgLy8gUGVyIDQuMS40IC0gQ29udmVydCBmcm9tIHVuaXggZXBvY2ggdG8gR3JlZ29yaWFuIGVwb2NoXG5cbiAgbXNlY3MgKz0gMTIyMTkyOTI4MDAwMDA7IC8vIGB0aW1lX2xvd2BcblxuICBjb25zdCB0bCA9ICgobXNlY3MgJiAweGZmZmZmZmYpICogMTAwMDAgKyBuc2VjcykgJSAweDEwMDAwMDAwMDtcbiAgYltpKytdID0gdGwgPj4+IDI0ICYgMHhmZjtcbiAgYltpKytdID0gdGwgPj4+IDE2ICYgMHhmZjtcbiAgYltpKytdID0gdGwgPj4+IDggJiAweGZmO1xuICBiW2krK10gPSB0bCAmIDB4ZmY7IC8vIGB0aW1lX21pZGBcblxuICBjb25zdCB0bWggPSBtc2VjcyAvIDB4MTAwMDAwMDAwICogMTAwMDAgJiAweGZmZmZmZmY7XG4gIGJbaSsrXSA9IHRtaCA+Pj4gOCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRtaCAmIDB4ZmY7IC8vIGB0aW1lX2hpZ2hfYW5kX3ZlcnNpb25gXG5cbiAgYltpKytdID0gdG1oID4+PiAyNCAmIDB4ZiB8IDB4MTA7IC8vIGluY2x1ZGUgdmVyc2lvblxuXG4gIGJbaSsrXSA9IHRtaCA+Pj4gMTYgJiAweGZmOyAvLyBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGAgKFBlciA0LjIuMiAtIGluY2x1ZGUgdmFyaWFudClcblxuICBiW2krK10gPSBjbG9ja3NlcSA+Pj4gOCB8IDB4ODA7IC8vIGBjbG9ja19zZXFfbG93YFxuXG4gIGJbaSsrXSA9IGNsb2Nrc2VxICYgMHhmZjsgLy8gYG5vZGVgXG5cbiAgZm9yIChsZXQgbiA9IDA7IG4gPCA2OyArK24pIHtcbiAgICBiW2kgKyBuXSA9IG5vZGVbbl07XG4gIH1cblxuICByZXR1cm4gYnVmIHx8ICgwLCBfc3RyaW5naWZ5LnVuc2FmZVN0cmluZ2lmeSkoYik7XG59XG5cbnZhciBfZGVmYXVsdCA9IHYxO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfdiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdjM1LmpzXCIpKTtcblxudmFyIF9tZCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vbWQ1LmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuY29uc3QgdjMgPSAoMCwgX3YuZGVmYXVsdCkoJ3YzJywgMHgzMCwgX21kLmRlZmF1bHQpO1xudmFyIF9kZWZhdWx0ID0gdjM7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuVVJMID0gZXhwb3J0cy5ETlMgPSB2b2lkIDA7XG5leHBvcnRzLmRlZmF1bHQgPSB2MzU7XG5cbnZhciBfc3RyaW5naWZ5ID0gcmVxdWlyZShcIi4vc3RyaW5naWZ5LmpzXCIpO1xuXG52YXIgX3BhcnNlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9wYXJzZS5qc1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIHN0cmluZ1RvQnl0ZXMoc3RyKSB7XG4gIHN0ciA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChzdHIpKTsgLy8gVVRGOCBlc2NhcGVcblxuICBjb25zdCBieXRlcyA9IFtdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgYnl0ZXMucHVzaChzdHIuY2hhckNvZGVBdChpKSk7XG4gIH1cblxuICByZXR1cm4gYnl0ZXM7XG59XG5cbmNvbnN0IEROUyA9ICc2YmE3YjgxMC05ZGFkLTExZDEtODBiNC0wMGMwNGZkNDMwYzgnO1xuZXhwb3J0cy5ETlMgPSBETlM7XG5jb25zdCBVUkwgPSAnNmJhN2I4MTEtOWRhZC0xMWQxLTgwYjQtMDBjMDRmZDQzMGM4JztcbmV4cG9ydHMuVVJMID0gVVJMO1xuXG5mdW5jdGlvbiB2MzUobmFtZSwgdmVyc2lvbiwgaGFzaGZ1bmMpIHtcbiAgZnVuY3Rpb24gZ2VuZXJhdGVVVUlEKHZhbHVlLCBuYW1lc3BhY2UsIGJ1Ziwgb2Zmc2V0KSB7XG4gICAgdmFyIF9uYW1lc3BhY2U7XG5cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgdmFsdWUgPSBzdHJpbmdUb0J5dGVzKHZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG5hbWVzcGFjZSA9ICgwLCBfcGFyc2UuZGVmYXVsdCkobmFtZXNwYWNlKTtcbiAgICB9XG5cbiAgICBpZiAoKChfbmFtZXNwYWNlID0gbmFtZXNwYWNlKSA9PT0gbnVsbCB8fCBfbmFtZXNwYWNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbmFtZXNwYWNlLmxlbmd0aCkgIT09IDE2KSB7XG4gICAgICB0aHJvdyBUeXBlRXJyb3IoJ05hbWVzcGFjZSBtdXN0IGJlIGFycmF5LWxpa2UgKDE2IGl0ZXJhYmxlIGludGVnZXIgdmFsdWVzLCAwLTI1NSknKTtcbiAgICB9IC8vIENvbXB1dGUgaGFzaCBvZiBuYW1lc3BhY2UgYW5kIHZhbHVlLCBQZXIgNC4zXG4gICAgLy8gRnV0dXJlOiBVc2Ugc3ByZWFkIHN5bnRheCB3aGVuIHN1cHBvcnRlZCBvbiBhbGwgcGxhdGZvcm1zLCBlLmcuIGBieXRlcyA9XG4gICAgLy8gaGFzaGZ1bmMoWy4uLm5hbWVzcGFjZSwgLi4uIHZhbHVlXSlgXG5cblxuICAgIGxldCBieXRlcyA9IG5ldyBVaW50OEFycmF5KDE2ICsgdmFsdWUubGVuZ3RoKTtcbiAgICBieXRlcy5zZXQobmFtZXNwYWNlKTtcbiAgICBieXRlcy5zZXQodmFsdWUsIG5hbWVzcGFjZS5sZW5ndGgpO1xuICAgIGJ5dGVzID0gaGFzaGZ1bmMoYnl0ZXMpO1xuICAgIGJ5dGVzWzZdID0gYnl0ZXNbNl0gJiAweDBmIHwgdmVyc2lvbjtcbiAgICBieXRlc1s4XSA9IGJ5dGVzWzhdICYgMHgzZiB8IDB4ODA7XG5cbiAgICBpZiAoYnVmKSB7XG4gICAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICAgIGJ1ZltvZmZzZXQgKyBpXSA9IGJ5dGVzW2ldO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnVmO1xuICAgIH1cblxuICAgIHJldHVybiAoMCwgX3N0cmluZ2lmeS51bnNhZmVTdHJpbmdpZnkpKGJ5dGVzKTtcbiAgfSAvLyBGdW5jdGlvbiNuYW1lIGlzIG5vdCBzZXR0YWJsZSBvbiBzb21lIHBsYXRmb3JtcyAoIzI3MClcblxuXG4gIHRyeSB7XG4gICAgZ2VuZXJhdGVVVUlELm5hbWUgPSBuYW1lOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZW1wdHlcbiAgfSBjYXRjaCAoZXJyKSB7fSAvLyBGb3IgQ29tbW9uSlMgZGVmYXVsdCBleHBvcnQgc3VwcG9ydFxuXG5cbiAgZ2VuZXJhdGVVVUlELkROUyA9IEROUztcbiAgZ2VuZXJhdGVVVUlELlVSTCA9IFVSTDtcbiAgcmV0dXJuIGdlbmVyYXRlVVVJRDtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcblxudmFyIF9uYXRpdmUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL25hdGl2ZS5qc1wiKSk7XG5cbnZhciBfcm5nID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9ybmcuanNcIikpO1xuXG52YXIgX3N0cmluZ2lmeSA9IHJlcXVpcmUoXCIuL3N0cmluZ2lmeS5qc1wiKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgaWYgKF9uYXRpdmUuZGVmYXVsdC5yYW5kb21VVUlEICYmICFidWYgJiYgIW9wdGlvbnMpIHtcbiAgICByZXR1cm4gX25hdGl2ZS5kZWZhdWx0LnJhbmRvbVVVSUQoKTtcbiAgfVxuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIGNvbnN0IHJuZHMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgX3JuZy5kZWZhdWx0KSgpOyAvLyBQZXIgNC40LCBzZXQgYml0cyBmb3IgdmVyc2lvbiBhbmQgYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgXG5cblxuICBybmRzWzZdID0gcm5kc1s2XSAmIDB4MGYgfCAweDQwO1xuICBybmRzWzhdID0gcm5kc1s4XSAmIDB4M2YgfCAweDgwOyAvLyBDb3B5IGJ5dGVzIHRvIGJ1ZmZlciwgaWYgcHJvdmlkZWRcblxuICBpZiAoYnVmKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyArK2kpIHtcbiAgICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHJuZHNbaV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1ZjtcbiAgfVxuXG4gIHJldHVybiAoMCwgX3N0cmluZ2lmeS51bnNhZmVTdHJpbmdpZnkpKHJuZHMpO1xufVxuXG52YXIgX2RlZmF1bHQgPSB2NDtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX3YgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3YzNS5qc1wiKSk7XG5cbnZhciBfc2hhID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9zaGExLmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuY29uc3QgdjUgPSAoMCwgX3YuZGVmYXVsdCkoJ3Y1JywgMHg1MCwgX3NoYS5kZWZhdWx0KTtcbnZhciBfZGVmYXVsdCA9IHY1O1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfcmVnZXggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3JlZ2V4LmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gdmFsaWRhdGUodXVpZCkge1xuICByZXR1cm4gdHlwZW9mIHV1aWQgPT09ICdzdHJpbmcnICYmIF9yZWdleC5kZWZhdWx0LnRlc3QodXVpZCk7XG59XG5cbnZhciBfZGVmYXVsdCA9IHZhbGlkYXRlO1xuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfdmFsaWRhdGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3ZhbGlkYXRlLmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gdmVyc2lvbih1dWlkKSB7XG4gIGlmICghKDAsIF92YWxpZGF0ZS5kZWZhdWx0KSh1dWlkKSkge1xuICAgIHRocm93IFR5cGVFcnJvcignSW52YWxpZCBVVUlEJyk7XG4gIH1cblxuICByZXR1cm4gcGFyc2VJbnQodXVpZC5zbGljZSgxNCwgMTUpLCAxNik7XG59XG5cbnZhciBfZGVmYXVsdCA9IHZlcnNpb247XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJjb25zdCByYW5kb21VVUlEID0gdHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLnJhbmRvbVVVSUQgJiYgY3J5cHRvLnJhbmRvbVVVSUQuYmluZChjcnlwdG8pO1xuZXhwb3J0IGRlZmF1bHQge1xuICByYW5kb21VVUlEXG59OyIsImV4cG9ydCBkZWZhdWx0IC9eKD86WzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzEtNV1bMC05YS1mXXszfS1bODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTsiLCIvLyBVbmlxdWUgSUQgY3JlYXRpb24gcmVxdWlyZXMgYSBoaWdoIHF1YWxpdHkgcmFuZG9tICMgZ2VuZXJhdG9yLiBJbiB0aGUgYnJvd3NlciB3ZSB0aGVyZWZvcmVcbi8vIHJlcXVpcmUgdGhlIGNyeXB0byBBUEkgYW5kIGRvIG5vdCBzdXBwb3J0IGJ1aWx0LWluIGZhbGxiYWNrIHRvIGxvd2VyIHF1YWxpdHkgcmFuZG9tIG51bWJlclxuLy8gZ2VuZXJhdG9ycyAobGlrZSBNYXRoLnJhbmRvbSgpKS5cbmxldCBnZXRSYW5kb21WYWx1ZXM7XG5jb25zdCBybmRzOCA9IG5ldyBVaW50OEFycmF5KDE2KTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJuZygpIHtcbiAgLy8gbGF6eSBsb2FkIHNvIHRoYXQgZW52aXJvbm1lbnRzIHRoYXQgbmVlZCB0byBwb2x5ZmlsbCBoYXZlIGEgY2hhbmNlIHRvIGRvIHNvXG4gIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgLy8gZ2V0UmFuZG9tVmFsdWVzIG5lZWRzIHRvIGJlIGludm9rZWQgaW4gYSBjb250ZXh0IHdoZXJlIFwidGhpc1wiIGlzIGEgQ3J5cHRvIGltcGxlbWVudGF0aW9uLlxuICAgIGdldFJhbmRvbVZhbHVlcyA9IHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0byk7XG5cbiAgICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZCcpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBnZXRSYW5kb21WYWx1ZXMocm5kczgpO1xufSIsImltcG9ydCB2YWxpZGF0ZSBmcm9tICcuL3ZhbGlkYXRlLmpzJztcbi8qKlxuICogQ29udmVydCBhcnJheSBvZiAxNiBieXRlIHZhbHVlcyB0byBVVUlEIHN0cmluZyBmb3JtYXQgb2YgdGhlIGZvcm06XG4gKiBYWFhYWFhYWC1YWFhYLVhYWFgtWFhYWC1YWFhYWFhYWFhYWFhcbiAqL1xuXG5jb25zdCBieXRlVG9IZXggPSBbXTtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXgucHVzaCgoaSArIDB4MTAwKS50b1N0cmluZygxNikuc2xpY2UoMSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICAvLyBOb3RlOiBCZSBjYXJlZnVsIGVkaXRpbmcgdGhpcyBjb2RlISAgSXQncyBiZWVuIHR1bmVkIGZvciBwZXJmb3JtYW5jZVxuICAvLyBhbmQgd29ya3MgaW4gd2F5cyB5b3UgbWF5IG5vdCBleHBlY3QuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQvcHVsbC80MzRcbiAgcmV0dXJuIChieXRlVG9IZXhbYXJyW29mZnNldCArIDBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDNdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA1XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDZdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgN11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA4XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDldXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTNdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTVdXSkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICBjb25zdCB1dWlkID0gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0KTsgLy8gQ29uc2lzdGVuY3kgY2hlY2sgZm9yIHZhbGlkIFVVSUQuICBJZiB0aGlzIHRocm93cywgaXQncyBsaWtlbHkgZHVlIHRvIG9uZVxuICAvLyBvZiB0aGUgZm9sbG93aW5nOlxuICAvLyAtIE9uZSBvciBtb3JlIGlucHV0IGFycmF5IHZhbHVlcyBkb24ndCBtYXAgdG8gYSBoZXggb2N0ZXQgKGxlYWRpbmcgdG9cbiAgLy8gXCJ1bmRlZmluZWRcIiBpbiB0aGUgdXVpZClcbiAgLy8gLSBJbnZhbGlkIGlucHV0IHZhbHVlcyBmb3IgdGhlIFJGQyBgdmVyc2lvbmAgb3IgYHZhcmlhbnRgIGZpZWxkc1xuXG4gIGlmICghdmFsaWRhdGUodXVpZCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ1N0cmluZ2lmaWVkIFVVSUQgaXMgaW52YWxpZCcpO1xuICB9XG5cbiAgcmV0dXJuIHV1aWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHN0cmluZ2lmeTsiLCJpbXBvcnQgbmF0aXZlIGZyb20gJy4vbmF0aXZlLmpzJztcbmltcG9ydCBybmcgZnJvbSAnLi9ybmcuanMnO1xuaW1wb3J0IHsgdW5zYWZlU3RyaW5naWZ5IH0gZnJvbSAnLi9zdHJpbmdpZnkuanMnO1xuXG5mdW5jdGlvbiB2NChvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICBpZiAobmF0aXZlLnJhbmRvbVVVSUQgJiYgIWJ1ZiAmJiAhb3B0aW9ucykge1xuICAgIHJldHVybiBuYXRpdmUucmFuZG9tVVVJRCgpO1xuICB9XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGNvbnN0IHJuZHMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpOyAvLyBQZXIgNC40LCBzZXQgYml0cyBmb3IgdmVyc2lvbiBhbmQgYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgXG5cbiAgcm5kc1s2XSA9IHJuZHNbNl0gJiAweDBmIHwgMHg0MDtcbiAgcm5kc1s4XSA9IHJuZHNbOF0gJiAweDNmIHwgMHg4MDsgLy8gQ29weSBieXRlcyB0byBidWZmZXIsIGlmIHByb3ZpZGVkXG5cbiAgaWYgKGJ1Zikge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgKytpKSB7XG4gICAgICBidWZbb2Zmc2V0ICsgaV0gPSBybmRzW2ldO1xuICAgIH1cblxuICAgIHJldHVybiBidWY7XG4gIH1cblxuICByZXR1cm4gdW5zYWZlU3RyaW5naWZ5KHJuZHMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2NDsiLCJpbXBvcnQgUkVHRVggZnJvbSAnLi9yZWdleC5qcyc7XG5cbmZ1bmN0aW9uIHZhbGlkYXRlKHV1aWQpIHtcbiAgcmV0dXJuIHR5cGVvZiB1dWlkID09PSAnc3RyaW5nJyAmJiBSRUdFWC50ZXN0KHV1aWQpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2YWxpZGF0ZTsiLCIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoXCJ3ZWJleHRlbnNpb24tcG9seWZpbGxcIiwgW1wibW9kdWxlXCJdLCBmYWN0b3J5KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGZhY3RvcnkobW9kdWxlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbW9kID0ge1xuICAgICAgZXhwb3J0czoge31cbiAgICB9O1xuICAgIGZhY3RvcnkobW9kKTtcbiAgICBnbG9iYWwuYnJvd3NlciA9IG1vZC5leHBvcnRzO1xuICB9XG59KSh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbiAobW9kdWxlKSB7XG4gIC8qIHdlYmV4dGVuc2lvbi1wb2x5ZmlsbCAtIHYwLjEwLjAgLSBGcmkgQXVnIDEyIDIwMjIgMTk6NDI6NDQgKi9cblxuICAvKiAtKi0gTW9kZTogaW5kZW50LXRhYnMtbW9kZTogbmlsOyBqcy1pbmRlbnQtbGV2ZWw6IDIgLSotICovXG5cbiAgLyogdmltOiBzZXQgc3RzPTIgc3c9MiBldCB0dz04MDogKi9cblxuICAvKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gICAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAgICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy4gKi9cbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgaWYgKCFnbG9iYWxUaGlzLmNocm9tZT8ucnVudGltZT8uaWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIHNjcmlwdCBzaG91bGQgb25seSBiZSBsb2FkZWQgaW4gYSBicm93c2VyIGV4dGVuc2lvbi5cIik7XG4gIH1cblxuICBpZiAodHlwZW9mIGdsb2JhbFRoaXMuYnJvd3NlciA9PT0gXCJ1bmRlZmluZWRcIiB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsVGhpcy5icm93c2VyKSAhPT0gT2JqZWN0LnByb3RvdHlwZSkge1xuICAgIGNvbnN0IENIUk9NRV9TRU5EX01FU1NBR0VfQ0FMTEJBQ0tfTk9fUkVTUE9OU0VfTUVTU0FHRSA9IFwiVGhlIG1lc3NhZ2UgcG9ydCBjbG9zZWQgYmVmb3JlIGEgcmVzcG9uc2Ugd2FzIHJlY2VpdmVkLlwiOyAvLyBXcmFwcGluZyB0aGUgYnVsayBvZiB0aGlzIHBvbHlmaWxsIGluIGEgb25lLXRpbWUtdXNlIGZ1bmN0aW9uIGlzIGEgbWlub3JcbiAgICAvLyBvcHRpbWl6YXRpb24gZm9yIEZpcmVmb3guIFNpbmNlIFNwaWRlcm1vbmtleSBkb2VzIG5vdCBmdWxseSBwYXJzZSB0aGVcbiAgICAvLyBjb250ZW50cyBvZiBhIGZ1bmN0aW9uIHVudGlsIHRoZSBmaXJzdCB0aW1lIGl0J3MgY2FsbGVkLCBhbmQgc2luY2UgaXQgd2lsbFxuICAgIC8vIG5ldmVyIGFjdHVhbGx5IG5lZWQgdG8gYmUgY2FsbGVkLCB0aGlzIGFsbG93cyB0aGUgcG9seWZpbGwgdG8gYmUgaW5jbHVkZWRcbiAgICAvLyBpbiBGaXJlZm94IG5lYXJseSBmb3IgZnJlZS5cblxuICAgIGNvbnN0IHdyYXBBUElzID0gZXh0ZW5zaW9uQVBJcyA9PiB7XG4gICAgICAvLyBOT1RFOiBhcGlNZXRhZGF0YSBpcyBhc3NvY2lhdGVkIHRvIHRoZSBjb250ZW50IG9mIHRoZSBhcGktbWV0YWRhdGEuanNvbiBmaWxlXG4gICAgICAvLyBhdCBidWlsZCB0aW1lIGJ5IHJlcGxhY2luZyB0aGUgZm9sbG93aW5nIFwiaW5jbHVkZVwiIHdpdGggdGhlIGNvbnRlbnQgb2YgdGhlXG4gICAgICAvLyBKU09OIGZpbGUuXG4gICAgICBjb25zdCBhcGlNZXRhZGF0YSA9IHtcbiAgICAgICAgXCJhbGFybXNcIjoge1xuICAgICAgICAgIFwiY2xlYXJcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJjbGVhckFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImJvb2ttYXJrc1wiOiB7XG4gICAgICAgICAgXCJjcmVhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRDaGlsZHJlblwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFJlY2VudFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFN1YlRyZWVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRUcmVlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDBcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwibW92ZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMixcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAyXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVRyZWVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZWFyY2hcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJicm93c2VyQWN0aW9uXCI6IHtcbiAgICAgICAgICBcImRpc2FibGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwiZmFsbGJhY2tUb05vQ2FsbGJhY2tcIjogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJlbmFibGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwiZmFsbGJhY2tUb05vQ2FsbGJhY2tcIjogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRCYWRnZUJhY2tncm91bmRDb2xvclwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEJhZGdlVGV4dFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFBvcHVwXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0VGl0bGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJvcGVuUG9wdXBcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRCYWRnZUJhY2tncm91bmRDb2xvclwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJmYWxsYmFja1RvTm9DYWxsYmFja1wiOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldEJhZGdlVGV4dFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJmYWxsYmFja1RvTm9DYWxsYmFja1wiOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldEljb25cIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRQb3B1cFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJmYWxsYmFja1RvTm9DYWxsYmFja1wiOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldFRpdGxlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDEsXG4gICAgICAgICAgICBcImZhbGxiYWNrVG9Ob0NhbGxiYWNrXCI6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiYnJvd3NpbmdEYXRhXCI6IHtcbiAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMixcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAyXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZUNhY2hlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicmVtb3ZlQ29va2llc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZURvd25sb2Fkc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZUZvcm1EYXRhXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicmVtb3ZlSGlzdG9yeVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZUxvY2FsU3RvcmFnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVBhc3N3b3Jkc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVBsdWdpbkRhdGFcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXR0aW5nc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImNvbW1hbmRzXCI6IHtcbiAgICAgICAgICBcImdldEFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImNvbnRleHRNZW51c1wiOiB7XG4gICAgICAgICAgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVBbGxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJjb29raWVzXCI6IHtcbiAgICAgICAgICBcImdldFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEFsbENvb2tpZVN0b3Jlc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImRldnRvb2xzXCI6IHtcbiAgICAgICAgICBcImluc3BlY3RlZFdpbmRvd1wiOiB7XG4gICAgICAgICAgICBcImV2YWxcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDIsXG4gICAgICAgICAgICAgIFwic2luZ2xlQ2FsbGJhY2tBcmdcIjogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicGFuZWxzXCI6IHtcbiAgICAgICAgICAgIFwiY3JlYXRlXCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDMsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAzLFxuICAgICAgICAgICAgICBcInNpbmdsZUNhbGxiYWNrQXJnXCI6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImVsZW1lbnRzXCI6IHtcbiAgICAgICAgICAgICAgXCJjcmVhdGVTaWRlYmFyUGFuZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJkb3dubG9hZHNcIjoge1xuICAgICAgICAgIFwiY2FuY2VsXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZG93bmxvYWRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJlcmFzZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEZpbGVJY29uXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwib3BlblwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJmYWxsYmFja1RvTm9DYWxsYmFja1wiOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInBhdXNlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicmVtb3ZlRmlsZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlc3VtZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNlYXJjaFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNob3dcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwiZmFsbGJhY2tUb05vQ2FsbGJhY2tcIjogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJleHRlbnNpb25cIjoge1xuICAgICAgICAgIFwiaXNBbGxvd2VkRmlsZVNjaGVtZUFjY2Vzc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImlzQWxsb3dlZEluY29nbml0b0FjY2Vzc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImhpc3RvcnlcIjoge1xuICAgICAgICAgIFwiYWRkVXJsXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZGVsZXRlQWxsXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDBcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZGVsZXRlUmFuZ2VcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJkZWxldGVVcmxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRWaXNpdHNcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZWFyY2hcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJpMThuXCI6IHtcbiAgICAgICAgICBcImRldGVjdExhbmd1YWdlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0QWNjZXB0TGFuZ3VhZ2VzXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDBcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiaWRlbnRpdHlcIjoge1xuICAgICAgICAgIFwibGF1bmNoV2ViQXV0aEZsb3dcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJpZGxlXCI6IHtcbiAgICAgICAgICBcInF1ZXJ5U3RhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJtYW5hZ2VtZW50XCI6IHtcbiAgICAgICAgICBcImdldFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEFsbFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFNlbGZcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRFbmFibGVkXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAyLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwidW5pbnN0YWxsU2VsZlwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcIm5vdGlmaWNhdGlvbnNcIjoge1xuICAgICAgICAgIFwiY2xlYXJcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJjcmVhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRBbGxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRQZXJtaXNzaW9uTGV2ZWxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJwYWdlQWN0aW9uXCI6IHtcbiAgICAgICAgICBcImdldFBvcHVwXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0VGl0bGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJoaWRlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDEsXG4gICAgICAgICAgICBcImZhbGxiYWNrVG9Ob0NhbGxiYWNrXCI6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwic2V0SWNvblwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldFBvcHVwXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDEsXG4gICAgICAgICAgICBcImZhbGxiYWNrVG9Ob0NhbGxiYWNrXCI6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwic2V0VGl0bGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwiZmFsbGJhY2tUb05vQ2FsbGJhY2tcIjogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzaG93XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDEsXG4gICAgICAgICAgICBcImZhbGxiYWNrVG9Ob0NhbGxiYWNrXCI6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwicGVybWlzc2lvbnNcIjoge1xuICAgICAgICAgIFwiY29udGFpbnNcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRBbGxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZXF1ZXN0XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwicnVudGltZVwiOiB7XG4gICAgICAgICAgXCJnZXRCYWNrZ3JvdW5kUGFnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFBsYXRmb3JtSW5mb1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcIm9wZW5PcHRpb25zUGFnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInJlcXVlc3RVcGRhdGVDaGVja1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNlbmRNZXNzYWdlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDNcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwic2VuZE5hdGl2ZU1lc3NhZ2VcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRVbmluc3RhbGxVUkxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJzZXNzaW9uc1wiOiB7XG4gICAgICAgICAgXCJnZXREZXZpY2VzXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0UmVjZW50bHlDbG9zZWRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZXN0b3JlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwic3RvcmFnZVwiOiB7XG4gICAgICAgICAgXCJsb2NhbFwiOiB7XG4gICAgICAgICAgICBcImNsZWFyXCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImdldEJ5dGVzSW5Vc2VcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwic2V0XCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBcIm1hbmFnZWRcIjoge1xuICAgICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImdldEJ5dGVzSW5Vc2VcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIFwic3luY1wiOiB7XG4gICAgICAgICAgICBcImNsZWFyXCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImdldEJ5dGVzSW5Vc2VcIjoge1xuICAgICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwic2V0XCI6IHtcbiAgICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcInRhYnNcIjoge1xuICAgICAgICAgIFwiY2FwdHVyZVZpc2libGVUYWJcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJjcmVhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJkZXRlY3RMYW5ndWFnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImRpc2NhcmRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJkdXBsaWNhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJleGVjdXRlU2NyaXB0XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0Q3VycmVudFwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMCxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldFpvb21cIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRab29tU2V0dGluZ3NcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnb0JhY2tcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnb0ZvcndhcmRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJoaWdobGlnaHRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJpbnNlcnRDU1NcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJtb3ZlXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAyLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwicXVlcnlcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZWxvYWRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVDU1NcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZW5kTWVzc2FnZVwiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMixcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAzXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcInNldFpvb21cIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJzZXRab29tU2V0dGluZ3NcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJ0b3BTaXRlc1wiOiB7XG4gICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMFxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJ3ZWJOYXZpZ2F0aW9uXCI6IHtcbiAgICAgICAgICBcImdldEFsbEZyYW1lc1wiOiB7XG4gICAgICAgICAgICBcIm1pbkFyZ3NcIjogMSxcbiAgICAgICAgICAgIFwibWF4QXJnc1wiOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImdldEZyYW1lXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAxLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwid2ViUmVxdWVzdFwiOiB7XG4gICAgICAgICAgXCJoYW5kbGVyQmVoYXZpb3JDaGFuZ2VkXCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDBcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwid2luZG93c1wiOiB7XG4gICAgICAgICAgXCJjcmVhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRBbGxcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJnZXRDdXJyZW50XCI6IHtcbiAgICAgICAgICAgIFwibWluQXJnc1wiOiAwLFxuICAgICAgICAgICAgXCJtYXhBcmdzXCI6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiZ2V0TGFzdEZvY3VzZWRcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDAsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDEsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgXCJtaW5BcmdzXCI6IDIsXG4gICAgICAgICAgICBcIm1heEFyZ3NcIjogMlxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgaWYgKE9iamVjdC5rZXlzKGFwaU1ldGFkYXRhKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXBpLW1ldGFkYXRhLmpzb24gaGFzIG5vdCBiZWVuIGluY2x1ZGVkIGluIGJyb3dzZXItcG9seWZpbGxcIik7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEEgV2Vha01hcCBzdWJjbGFzcyB3aGljaCBjcmVhdGVzIGFuZCBzdG9yZXMgYSB2YWx1ZSBmb3IgYW55IGtleSB3aGljaCBkb2VzXG4gICAgICAgKiBub3QgZXhpc3Qgd2hlbiBhY2Nlc3NlZCwgYnV0IGJlaGF2ZXMgZXhhY3RseSBhcyBhbiBvcmRpbmFyeSBXZWFrTWFwXG4gICAgICAgKiBvdGhlcndpc2UuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY3JlYXRlSXRlbVxuICAgICAgICogICAgICAgIEEgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSBjYWxsZWQgaW4gb3JkZXIgdG8gY3JlYXRlIHRoZSB2YWx1ZSBmb3IgYW55XG4gICAgICAgKiAgICAgICAga2V5IHdoaWNoIGRvZXMgbm90IGV4aXN0LCB0aGUgZmlyc3QgdGltZSBpdCBpcyBhY2Nlc3NlZC4gVGhlXG4gICAgICAgKiAgICAgICAgZnVuY3Rpb24gcmVjZWl2ZXMsIGFzIGl0cyBvbmx5IGFyZ3VtZW50LCB0aGUga2V5IGJlaW5nIGNyZWF0ZWQuXG4gICAgICAgKi9cblxuXG4gICAgICBjbGFzcyBEZWZhdWx0V2Vha01hcCBleHRlbmRzIFdlYWtNYXAge1xuICAgICAgICBjb25zdHJ1Y3RvcihjcmVhdGVJdGVtLCBpdGVtcyA9IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHN1cGVyKGl0ZW1zKTtcbiAgICAgICAgICB0aGlzLmNyZWF0ZUl0ZW0gPSBjcmVhdGVJdGVtO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2V0KGtleSkge1xuICAgICAgICAgIGlmICghdGhpcy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgdGhpcy5zZXQoa2V5LCB0aGlzLmNyZWF0ZUl0ZW0oa2V5KSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHN1cGVyLmdldChrZXkpO1xuICAgICAgICB9XG5cbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBvYmplY3QgaXMgYW4gb2JqZWN0IHdpdGggYSBgdGhlbmAgbWV0aG9kLCBhbmQgY2FuXG4gICAgICAgKiB0aGVyZWZvcmUgYmUgYXNzdW1lZCB0byBiZWhhdmUgYXMgYSBQcm9taXNlLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHRlc3QuXG4gICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgdGhlbmFibGUuXG4gICAgICAgKi9cblxuXG4gICAgICBjb25zdCBpc1RoZW5hYmxlID0gdmFsdWUgPT4ge1xuICAgICAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSBcImZ1bmN0aW9uXCI7XG4gICAgICB9O1xuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2gsIHdoZW4gY2FsbGVkLCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0XG4gICAgICAgKiB0aGUgZ2l2ZW4gcHJvbWlzZSBiYXNlZCBvbiBob3cgaXQgaXMgY2FsbGVkOlxuICAgICAgICpcbiAgICAgICAqIC0gSWYsIHdoZW4gY2FsbGVkLCBgY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yYCBjb250YWlucyBhIG5vbi1udWxsIG9iamVjdCxcbiAgICAgICAqICAgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQgd2l0aCB0aGF0IHZhbHVlLlxuICAgICAgICogLSBJZiB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggZXhhY3RseSBvbmUgYXJndW1lbnQsIHRoZSBwcm9taXNlIGlzXG4gICAgICAgKiAgIHJlc29sdmVkIHRvIHRoYXQgdmFsdWUuXG4gICAgICAgKiAtIE90aGVyd2lzZSwgdGhlIHByb21pc2UgaXMgcmVzb2x2ZWQgdG8gYW4gYXJyYXkgY29udGFpbmluZyBhbGwgb2YgdGhlXG4gICAgICAgKiAgIGZ1bmN0aW9uJ3MgYXJndW1lbnRzLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBwcm9taXNlXG4gICAgICAgKiAgICAgICAgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHJlc29sdXRpb24gYW5kIHJlamVjdGlvbiBmdW5jdGlvbnMgb2YgYVxuICAgICAgICogICAgICAgIHByb21pc2UuXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcm9taXNlLnJlc29sdmVcbiAgICAgICAqICAgICAgICBUaGUgcHJvbWlzZSdzIHJlc29sdXRpb24gZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwcm9taXNlLnJlamVjdFxuICAgICAgICogICAgICAgIFRoZSBwcm9taXNlJ3MgcmVqZWN0aW9uIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IG1ldGFkYXRhXG4gICAgICAgKiAgICAgICAgTWV0YWRhdGEgYWJvdXQgdGhlIHdyYXBwZWQgbWV0aG9kIHdoaWNoIGhhcyBjcmVhdGVkIHRoZSBjYWxsYmFjay5cbiAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gbWV0YWRhdGEuc2luZ2xlQ2FsbGJhY2tBcmdcbiAgICAgICAqICAgICAgICBXaGV0aGVyIG9yIG5vdCB0aGUgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIG9ubHkgdGhlIGZpcnN0XG4gICAgICAgKiAgICAgICAgYXJndW1lbnQgb2YgdGhlIGNhbGxiYWNrLCBhbHRlcm5hdGl2ZWx5IGFuIGFycmF5IG9mIGFsbCB0aGVcbiAgICAgICAqICAgICAgICBjYWxsYmFjayBhcmd1bWVudHMgaXMgcmVzb2x2ZWQuIEJ5IGRlZmF1bHQsIGlmIHRoZSBjYWxsYmFja1xuICAgICAgICogICAgICAgIGZ1bmN0aW9uIGlzIGludm9rZWQgd2l0aCBvbmx5IGEgc2luZ2xlIGFyZ3VtZW50LCB0aGF0IHdpbGwgYmVcbiAgICAgICAqICAgICAgICByZXNvbHZlZCB0byB0aGUgcHJvbWlzZSwgd2hpbGUgYWxsIGFyZ3VtZW50cyB3aWxsIGJlIHJlc29sdmVkIGFzXG4gICAgICAgKiAgICAgICAgYW4gYXJyYXkgaWYgbXVsdGlwbGUgYXJlIGdpdmVuLlxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbn1cbiAgICAgICAqICAgICAgICBUaGUgZ2VuZXJhdGVkIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICAgICAgICovXG5cblxuICAgICAgY29uc3QgbWFrZUNhbGxiYWNrID0gKHByb21pc2UsIG1ldGFkYXRhKSA9PiB7XG4gICAgICAgIHJldHVybiAoLi4uY2FsbGJhY2tBcmdzKSA9PiB7XG4gICAgICAgICAgaWYgKGV4dGVuc2lvbkFQSXMucnVudGltZS5sYXN0RXJyb3IpIHtcbiAgICAgICAgICAgIHByb21pc2UucmVqZWN0KG5ldyBFcnJvcihleHRlbnNpb25BUElzLnJ1bnRpbWUubGFzdEVycm9yLm1lc3NhZ2UpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG1ldGFkYXRhLnNpbmdsZUNhbGxiYWNrQXJnIHx8IGNhbGxiYWNrQXJncy5sZW5ndGggPD0gMSAmJiBtZXRhZGF0YS5zaW5nbGVDYWxsYmFja0FyZyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHByb21pc2UucmVzb2x2ZShjYWxsYmFja0FyZ3NbMF0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9taXNlLnJlc29sdmUoY2FsbGJhY2tBcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBwbHVyYWxpemVBcmd1bWVudHMgPSBudW1BcmdzID0+IG51bUFyZ3MgPT0gMSA/IFwiYXJndW1lbnRcIiA6IFwiYXJndW1lbnRzXCI7XG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZXMgYSB3cmFwcGVyIGZ1bmN0aW9uIGZvciBhIG1ldGhvZCB3aXRoIHRoZSBnaXZlbiBuYW1lIGFuZCBtZXRhZGF0YS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAgICogICAgICAgIFRoZSBuYW1lIG9mIHRoZSBtZXRob2Qgd2hpY2ggaXMgYmVpbmcgd3JhcHBlZC5cbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtZXRhZGF0YVxuICAgICAgICogICAgICAgIE1ldGFkYXRhIGFib3V0IHRoZSBtZXRob2QgYmVpbmcgd3JhcHBlZC5cbiAgICAgICAqIEBwYXJhbSB7aW50ZWdlcn0gbWV0YWRhdGEubWluQXJnc1xuICAgICAgICogICAgICAgIFRoZSBtaW5pbXVtIG51bWJlciBvZiBhcmd1bWVudHMgd2hpY2ggbXVzdCBiZSBwYXNzZWQgdG8gdGhlXG4gICAgICAgKiAgICAgICAgZnVuY3Rpb24uIElmIGNhbGxlZCB3aXRoIGZld2VyIHRoYW4gdGhpcyBudW1iZXIgb2YgYXJndW1lbnRzLCB0aGVcbiAgICAgICAqICAgICAgICB3cmFwcGVyIHdpbGwgcmFpc2UgYW4gZXhjZXB0aW9uLlxuICAgICAgICogQHBhcmFtIHtpbnRlZ2VyfSBtZXRhZGF0YS5tYXhBcmdzXG4gICAgICAgKiAgICAgICAgVGhlIG1heGltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB3aGljaCBtYXkgYmUgcGFzc2VkIHRvIHRoZVxuICAgICAgICogICAgICAgIGZ1bmN0aW9uLiBJZiBjYWxsZWQgd2l0aCBtb3JlIHRoYW4gdGhpcyBudW1iZXIgb2YgYXJndW1lbnRzLCB0aGVcbiAgICAgICAqICAgICAgICB3cmFwcGVyIHdpbGwgcmFpc2UgYW4gZXhjZXB0aW9uLlxuICAgICAgICogQHBhcmFtIHtib29sZWFufSBtZXRhZGF0YS5zaW5nbGVDYWxsYmFja0FyZ1xuICAgICAgICogICAgICAgIFdoZXRoZXIgb3Igbm90IHRoZSBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggb25seSB0aGUgZmlyc3RcbiAgICAgICAqICAgICAgICBhcmd1bWVudCBvZiB0aGUgY2FsbGJhY2ssIGFsdGVybmF0aXZlbHkgYW4gYXJyYXkgb2YgYWxsIHRoZVxuICAgICAgICogICAgICAgIGNhbGxiYWNrIGFyZ3VtZW50cyBpcyByZXNvbHZlZC4gQnkgZGVmYXVsdCwgaWYgdGhlIGNhbGxiYWNrXG4gICAgICAgKiAgICAgICAgZnVuY3Rpb24gaXMgaW52b2tlZCB3aXRoIG9ubHkgYSBzaW5nbGUgYXJndW1lbnQsIHRoYXQgd2lsbCBiZVxuICAgICAgICogICAgICAgIHJlc29sdmVkIHRvIHRoZSBwcm9taXNlLCB3aGlsZSBhbGwgYXJndW1lbnRzIHdpbGwgYmUgcmVzb2x2ZWQgYXNcbiAgICAgICAqICAgICAgICBhbiBhcnJheSBpZiBtdWx0aXBsZSBhcmUgZ2l2ZW4uXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKG9iamVjdCwgLi4uKil9XG4gICAgICAgKiAgICAgICBUaGUgZ2VuZXJhdGVkIHdyYXBwZXIgZnVuY3Rpb24uXG4gICAgICAgKi9cblxuXG4gICAgICBjb25zdCB3cmFwQXN5bmNGdW5jdGlvbiA9IChuYW1lLCBtZXRhZGF0YSkgPT4ge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gYXN5bmNGdW5jdGlvbldyYXBwZXIodGFyZ2V0LCAuLi5hcmdzKSB7XG4gICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoIDwgbWV0YWRhdGEubWluQXJncykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBhdCBsZWFzdCAke21ldGFkYXRhLm1pbkFyZ3N9ICR7cGx1cmFsaXplQXJndW1lbnRzKG1ldGFkYXRhLm1pbkFyZ3MpfSBmb3IgJHtuYW1lfSgpLCBnb3QgJHthcmdzLmxlbmd0aH1gKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPiBtZXRhZGF0YS5tYXhBcmdzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGF0IG1vc3QgJHttZXRhZGF0YS5tYXhBcmdzfSAke3BsdXJhbGl6ZUFyZ3VtZW50cyhtZXRhZGF0YS5tYXhBcmdzKX0gZm9yICR7bmFtZX0oKSwgZ290ICR7YXJncy5sZW5ndGh9YCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YS5mYWxsYmFja1RvTm9DYWxsYmFjaykge1xuICAgICAgICAgICAgICAvLyBUaGlzIEFQSSBtZXRob2QgaGFzIGN1cnJlbnRseSBubyBjYWxsYmFjayBvbiBDaHJvbWUsIGJ1dCBpdCByZXR1cm4gYSBwcm9taXNlIG9uIEZpcmVmb3gsXG4gICAgICAgICAgICAgIC8vIGFuZCBzbyB0aGUgcG9seWZpbGwgd2lsbCB0cnkgdG8gY2FsbCBpdCB3aXRoIGEgY2FsbGJhY2sgZmlyc3QsIGFuZCBpdCB3aWxsIGZhbGxiYWNrXG4gICAgICAgICAgICAgIC8vIHRvIG5vdCBwYXNzaW5nIHRoZSBjYWxsYmFjayBpZiB0aGUgZmlyc3QgY2FsbCBmYWlscy5cbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbbmFtZV0oLi4uYXJncywgbWFrZUNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUsXG4gICAgICAgICAgICAgICAgICByZWplY3RcbiAgICAgICAgICAgICAgICB9LCBtZXRhZGF0YSkpO1xuICAgICAgICAgICAgICB9IGNhdGNoIChjYkVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGAke25hbWV9IEFQSSBtZXRob2QgZG9lc24ndCBzZWVtIHRvIHN1cHBvcnQgdGhlIGNhbGxiYWNrIHBhcmFtZXRlciwgYCArIFwiZmFsbGluZyBiYWNrIHRvIGNhbGwgaXQgd2l0aG91dCBhIGNhbGxiYWNrOiBcIiwgY2JFcnJvcik7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W25hbWVdKC4uLmFyZ3MpOyAvLyBVcGRhdGUgdGhlIEFQSSBtZXRob2QgbWV0YWRhdGEsIHNvIHRoYXQgdGhlIG5leHQgQVBJIGNhbGxzIHdpbGwgbm90IHRyeSB0b1xuICAgICAgICAgICAgICAgIC8vIHVzZSB0aGUgdW5zdXBwb3J0ZWQgY2FsbGJhY2sgYW55bW9yZS5cblxuICAgICAgICAgICAgICAgIG1ldGFkYXRhLmZhbGxiYWNrVG9Ob0NhbGxiYWNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbWV0YWRhdGEubm9DYWxsYmFjayA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1ldGFkYXRhLm5vQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgdGFyZ2V0W25hbWVdKC4uLmFyZ3MpO1xuICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0YXJnZXRbbmFtZV0oLi4uYXJncywgbWFrZUNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICByZXNvbHZlLFxuICAgICAgICAgICAgICAgIHJlamVjdFxuICAgICAgICAgICAgICB9LCBtZXRhZGF0YSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIC8qKlxuICAgICAgICogV3JhcHMgYW4gZXhpc3RpbmcgbWV0aG9kIG9mIHRoZSB0YXJnZXQgb2JqZWN0LCBzbyB0aGF0IGNhbGxzIHRvIGl0IGFyZVxuICAgICAgICogaW50ZXJjZXB0ZWQgYnkgdGhlIGdpdmVuIHdyYXBwZXIgZnVuY3Rpb24uIFRoZSB3cmFwcGVyIGZ1bmN0aW9uIHJlY2VpdmVzLFxuICAgICAgICogYXMgaXRzIGZpcnN0IGFyZ3VtZW50LCB0aGUgb3JpZ2luYWwgYHRhcmdldGAgb2JqZWN0LCBmb2xsb3dlZCBieSBlYWNoIG9mXG4gICAgICAgKiB0aGUgYXJndW1lbnRzIHBhc3NlZCB0byB0aGUgb3JpZ2luYWwgbWV0aG9kLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSB0YXJnZXRcbiAgICAgICAqICAgICAgICBUaGUgb3JpZ2luYWwgdGFyZ2V0IG9iamVjdCB0aGF0IHRoZSB3cmFwcGVkIG1ldGhvZCBiZWxvbmdzIHRvLlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gbWV0aG9kXG4gICAgICAgKiAgICAgICAgVGhlIG1ldGhvZCBiZWluZyB3cmFwcGVkLiBUaGlzIGlzIHVzZWQgYXMgdGhlIHRhcmdldCBvZiB0aGUgUHJveHlcbiAgICAgICAqICAgICAgICBvYmplY3Qgd2hpY2ggaXMgY3JlYXRlZCB0byB3cmFwIHRoZSBtZXRob2QuXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSB3cmFwcGVyXG4gICAgICAgKiAgICAgICAgVGhlIHdyYXBwZXIgZnVuY3Rpb24gd2hpY2ggaXMgY2FsbGVkIGluIHBsYWNlIG9mIGEgZGlyZWN0IGludm9jYXRpb25cbiAgICAgICAqICAgICAgICBvZiB0aGUgd3JhcHBlZCBtZXRob2QuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge1Byb3h5PGZ1bmN0aW9uPn1cbiAgICAgICAqICAgICAgICBBIFByb3h5IG9iamVjdCBmb3IgdGhlIGdpdmVuIG1ldGhvZCwgd2hpY2ggaW52b2tlcyB0aGUgZ2l2ZW4gd3JhcHBlclxuICAgICAgICogICAgICAgIG1ldGhvZCBpbiBpdHMgcGxhY2UuXG4gICAgICAgKi9cblxuXG4gICAgICBjb25zdCB3cmFwTWV0aG9kID0gKHRhcmdldCwgbWV0aG9kLCB3cmFwcGVyKSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJveHkobWV0aG9kLCB7XG4gICAgICAgICAgYXBwbHkodGFyZ2V0TWV0aG9kLCB0aGlzT2JqLCBhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4gd3JhcHBlci5jYWxsKHRoaXNPYmosIHRhcmdldCwgLi4uYXJncyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgbGV0IGhhc093blByb3BlcnR5ID0gRnVuY3Rpb24uY2FsbC5iaW5kKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkpO1xuICAgICAgLyoqXG4gICAgICAgKiBXcmFwcyBhbiBvYmplY3QgaW4gYSBQcm94eSB3aGljaCBpbnRlcmNlcHRzIGFuZCB3cmFwcyBjZXJ0YWluIG1ldGhvZHNcbiAgICAgICAqIGJhc2VkIG9uIHRoZSBnaXZlbiBgd3JhcHBlcnNgIGFuZCBgbWV0YWRhdGFgIG9iamVjdHMuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IHRhcmdldFxuICAgICAgICogICAgICAgIFRoZSB0YXJnZXQgb2JqZWN0IHRvIHdyYXAuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IFt3cmFwcGVycyA9IHt9XVxuICAgICAgICogICAgICAgIEFuIG9iamVjdCB0cmVlIGNvbnRhaW5pbmcgd3JhcHBlciBmdW5jdGlvbnMgZm9yIHNwZWNpYWwgY2FzZXMuIEFueVxuICAgICAgICogICAgICAgIGZ1bmN0aW9uIHByZXNlbnQgaW4gdGhpcyBvYmplY3QgdHJlZSBpcyBjYWxsZWQgaW4gcGxhY2Ugb2YgdGhlXG4gICAgICAgKiAgICAgICAgbWV0aG9kIGluIHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBgdGFyZ2V0YCBvYmplY3QgdHJlZS4gVGhlc2VcbiAgICAgICAqICAgICAgICB3cmFwcGVyIG1ldGhvZHMgYXJlIGludm9rZWQgYXMgZGVzY3JpYmVkIGluIHtAc2VlIHdyYXBNZXRob2R9LlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbbWV0YWRhdGEgPSB7fV1cbiAgICAgICAqICAgICAgICBBbiBvYmplY3QgdHJlZSBjb250YWluaW5nIG1ldGFkYXRhIHVzZWQgdG8gYXV0b21hdGljYWxseSBnZW5lcmF0ZVxuICAgICAgICogICAgICAgIFByb21pc2UtYmFzZWQgd3JhcHBlciBmdW5jdGlvbnMgZm9yIGFzeW5jaHJvbm91cy4gQW55IGZ1bmN0aW9uIGluXG4gICAgICAgKiAgICAgICAgdGhlIGB0YXJnZXRgIG9iamVjdCB0cmVlIHdoaWNoIGhhcyBhIGNvcnJlc3BvbmRpbmcgbWV0YWRhdGEgb2JqZWN0XG4gICAgICAgKiAgICAgICAgaW4gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIGBtZXRhZGF0YWAgdHJlZSBpcyByZXBsYWNlZCB3aXRoIGFuXG4gICAgICAgKiAgICAgICAgYXV0b21hdGljYWxseS1nZW5lcmF0ZWQgd3JhcHBlciBmdW5jdGlvbiwgYXMgZGVzY3JpYmVkIGluXG4gICAgICAgKiAgICAgICAge0BzZWUgd3JhcEFzeW5jRnVuY3Rpb259XG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge1Byb3h5PG9iamVjdD59XG4gICAgICAgKi9cblxuICAgICAgY29uc3Qgd3JhcE9iamVjdCA9ICh0YXJnZXQsIHdyYXBwZXJzID0ge30sIG1ldGFkYXRhID0ge30pID0+IHtcbiAgICAgICAgbGV0IGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgbGV0IGhhbmRsZXJzID0ge1xuICAgICAgICAgIGhhcyhwcm94eVRhcmdldCwgcHJvcCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3AgaW4gdGFyZ2V0IHx8IHByb3AgaW4gY2FjaGU7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGdldChwcm94eVRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICAgIGlmIChwcm9wIGluIGNhY2hlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBjYWNoZVtwcm9wXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCEocHJvcCBpbiB0YXJnZXQpKSB7XG4gICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IHRhcmdldFtwcm9wXTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBtZXRob2Qgb24gdGhlIHVuZGVybHlpbmcgb2JqZWN0LiBDaGVjayBpZiB3ZSBuZWVkIHRvIGRvXG4gICAgICAgICAgICAgIC8vIGFueSB3cmFwcGluZy5cbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3cmFwcGVyc1twcm9wXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIHNwZWNpYWwtY2FzZSB3cmFwcGVyIGZvciB0aGlzIG1ldGhvZC5cbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHdyYXBNZXRob2QodGFyZ2V0LCB0YXJnZXRbcHJvcF0sIHdyYXBwZXJzW3Byb3BdKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChoYXNPd25Qcm9wZXJ0eShtZXRhZGF0YSwgcHJvcCkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGFuIGFzeW5jIG1ldGhvZCB0aGF0IHdlIGhhdmUgbWV0YWRhdGEgZm9yLiBDcmVhdGUgYVxuICAgICAgICAgICAgICAgIC8vIFByb21pc2Ugd3JhcHBlciBmb3IgaXQuXG4gICAgICAgICAgICAgICAgbGV0IHdyYXBwZXIgPSB3cmFwQXN5bmNGdW5jdGlvbihwcm9wLCBtZXRhZGF0YVtwcm9wXSk7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB3cmFwTWV0aG9kKHRhcmdldCwgdGFyZ2V0W3Byb3BdLCB3cmFwcGVyKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgbWV0aG9kIHRoYXQgd2UgZG9uJ3Qga25vdyBvciBjYXJlIGFib3V0LiBSZXR1cm4gdGhlXG4gICAgICAgICAgICAgICAgLy8gb3JpZ2luYWwgbWV0aG9kLCBib3VuZCB0byB0aGUgdW5kZXJseWluZyBvYmplY3QuXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5iaW5kKHRhcmdldCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsICYmIChoYXNPd25Qcm9wZXJ0eSh3cmFwcGVycywgcHJvcCkgfHwgaGFzT3duUHJvcGVydHkobWV0YWRhdGEsIHByb3ApKSkge1xuICAgICAgICAgICAgICAvLyBUaGlzIGlzIGFuIG9iamVjdCB0aGF0IHdlIG5lZWQgdG8gZG8gc29tZSB3cmFwcGluZyBmb3IgdGhlIGNoaWxkcmVuXG4gICAgICAgICAgICAgIC8vIG9mLiBDcmVhdGUgYSBzdWItb2JqZWN0IHdyYXBwZXIgZm9yIGl0IHdpdGggdGhlIGFwcHJvcHJpYXRlIGNoaWxkXG4gICAgICAgICAgICAgIC8vIG1ldGFkYXRhLlxuICAgICAgICAgICAgICB2YWx1ZSA9IHdyYXBPYmplY3QodmFsdWUsIHdyYXBwZXJzW3Byb3BdLCBtZXRhZGF0YVtwcm9wXSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGhhc093blByb3BlcnR5KG1ldGFkYXRhLCBcIipcIikpIHtcbiAgICAgICAgICAgICAgLy8gV3JhcCBhbGwgcHJvcGVydGllcyBpbiAqIG5hbWVzcGFjZS5cbiAgICAgICAgICAgICAgdmFsdWUgPSB3cmFwT2JqZWN0KHZhbHVlLCB3cmFwcGVyc1twcm9wXSwgbWV0YWRhdGFbXCIqXCJdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gZG8gYW55IHdyYXBwaW5nIGZvciB0aGlzIHByb3BlcnR5LFxuICAgICAgICAgICAgICAvLyBzbyBqdXN0IGZvcndhcmQgYWxsIGFjY2VzcyB0byB0aGUgdW5kZXJseWluZyBvYmplY3QuXG4gICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjYWNoZSwgcHJvcCwge1xuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtwcm9wXTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FjaGVbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgc2V0KHByb3h5VGFyZ2V0LCBwcm9wLCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICAgIGlmIChwcm9wIGluIGNhY2hlKSB7XG4gICAgICAgICAgICAgIGNhY2hlW3Byb3BdID0gdmFsdWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGRlZmluZVByb3BlcnR5KHByb3h5VGFyZ2V0LCBwcm9wLCBkZXNjKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eShjYWNoZSwgcHJvcCwgZGVzYyk7XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGRlbGV0ZVByb3BlcnR5KHByb3h5VGFyZ2V0LCBwcm9wKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5kZWxldGVQcm9wZXJ0eShjYWNoZSwgcHJvcCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH07IC8vIFBlciBjb250cmFjdCBvZiB0aGUgUHJveHkgQVBJLCB0aGUgXCJnZXRcIiBwcm94eSBoYW5kbGVyIG11c3QgcmV0dXJuIHRoZVxuICAgICAgICAvLyBvcmlnaW5hbCB2YWx1ZSBvZiB0aGUgdGFyZ2V0IGlmIHRoYXQgdmFsdWUgaXMgZGVjbGFyZWQgcmVhZC1vbmx5IGFuZFxuICAgICAgICAvLyBub24tY29uZmlndXJhYmxlLiBGb3IgdGhpcyByZWFzb24sIHdlIGNyZWF0ZSBhbiBvYmplY3Qgd2l0aCB0aGVcbiAgICAgICAgLy8gcHJvdG90eXBlIHNldCB0byBgdGFyZ2V0YCBpbnN0ZWFkIG9mIHVzaW5nIGB0YXJnZXRgIGRpcmVjdGx5LlxuICAgICAgICAvLyBPdGhlcndpc2Ugd2UgY2Fubm90IHJldHVybiBhIGN1c3RvbSBvYmplY3QgZm9yIEFQSXMgdGhhdFxuICAgICAgICAvLyBhcmUgZGVjbGFyZWQgcmVhZC1vbmx5IGFuZCBub24tY29uZmlndXJhYmxlLCBzdWNoIGFzIGBjaHJvbWUuZGV2dG9vbHNgLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgcHJveHkgaGFuZGxlcnMgdGhlbXNlbHZlcyB3aWxsIHN0aWxsIHVzZSB0aGUgb3JpZ2luYWwgYHRhcmdldGBcbiAgICAgICAgLy8gaW5zdGVhZCBvZiB0aGUgYHByb3h5VGFyZ2V0YCwgc28gdGhhdCB0aGUgbWV0aG9kcyBhbmQgcHJvcGVydGllcyBhcmVcbiAgICAgICAgLy8gZGVyZWZlcmVuY2VkIHZpYSB0aGUgb3JpZ2luYWwgdGFyZ2V0cy5cblxuICAgICAgICBsZXQgcHJveHlUYXJnZXQgPSBPYmplY3QuY3JlYXRlKHRhcmdldCk7XG4gICAgICAgIHJldHVybiBuZXcgUHJveHkocHJveHlUYXJnZXQsIGhhbmRsZXJzKTtcbiAgICAgIH07XG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZXMgYSBzZXQgb2Ygd3JhcHBlciBmdW5jdGlvbnMgZm9yIGFuIGV2ZW50IG9iamVjdCwgd2hpY2ggaGFuZGxlc1xuICAgICAgICogd3JhcHBpbmcgb2YgbGlzdGVuZXIgZnVuY3Rpb25zIHRoYXQgdGhvc2UgbWVzc2FnZXMgYXJlIHBhc3NlZC5cbiAgICAgICAqXG4gICAgICAgKiBBIHNpbmdsZSB3cmFwcGVyIGlzIGNyZWF0ZWQgZm9yIGVhY2ggbGlzdGVuZXIgZnVuY3Rpb24sIGFuZCBzdG9yZWQgaW4gYVxuICAgICAgICogbWFwLiBTdWJzZXF1ZW50IGNhbGxzIHRvIGBhZGRMaXN0ZW5lcmAsIGBoYXNMaXN0ZW5lcmAsIG9yIGByZW1vdmVMaXN0ZW5lcmBcbiAgICAgICAqIHJldHJpZXZlIHRoZSBvcmlnaW5hbCB3cmFwcGVyLCBzbyB0aGF0ICBhdHRlbXB0cyB0byByZW1vdmUgYVxuICAgICAgICogcHJldmlvdXNseS1hZGRlZCBsaXN0ZW5lciB3b3JrIGFzIGV4cGVjdGVkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RGVmYXVsdFdlYWtNYXA8ZnVuY3Rpb24sIGZ1bmN0aW9uPn0gd3JhcHBlck1hcFxuICAgICAgICogICAgICAgIEEgRGVmYXVsdFdlYWtNYXAgb2JqZWN0IHdoaWNoIHdpbGwgY3JlYXRlIHRoZSBhcHByb3ByaWF0ZSB3cmFwcGVyXG4gICAgICAgKiAgICAgICAgZm9yIGEgZ2l2ZW4gbGlzdGVuZXIgZnVuY3Rpb24gd2hlbiBvbmUgZG9lcyBub3QgZXhpc3QsIGFuZCByZXRyaWV2ZVxuICAgICAgICogICAgICAgIGFuIGV4aXN0aW5nIG9uZSB3aGVuIGl0IGRvZXMuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge29iamVjdH1cbiAgICAgICAqL1xuXG5cbiAgICAgIGNvbnN0IHdyYXBFdmVudCA9IHdyYXBwZXJNYXAgPT4gKHtcbiAgICAgICAgYWRkTGlzdGVuZXIodGFyZ2V0LCBsaXN0ZW5lciwgLi4uYXJncykge1xuICAgICAgICAgIHRhcmdldC5hZGRMaXN0ZW5lcih3cmFwcGVyTWFwLmdldChsaXN0ZW5lciksIC4uLmFyZ3MpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhhc0xpc3RlbmVyKHRhcmdldCwgbGlzdGVuZXIpIHtcbiAgICAgICAgICByZXR1cm4gdGFyZ2V0Lmhhc0xpc3RlbmVyKHdyYXBwZXJNYXAuZ2V0KGxpc3RlbmVyKSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlTGlzdGVuZXIodGFyZ2V0LCBsaXN0ZW5lcikge1xuICAgICAgICAgIHRhcmdldC5yZW1vdmVMaXN0ZW5lcih3cmFwcGVyTWFwLmdldChsaXN0ZW5lcikpO1xuICAgICAgICB9XG5cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBvblJlcXVlc3RGaW5pc2hlZFdyYXBwZXJzID0gbmV3IERlZmF1bHRXZWFrTWFwKGxpc3RlbmVyID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgcmV0dXJuIGxpc3RlbmVyO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXcmFwcyBhbiBvblJlcXVlc3RGaW5pc2hlZCBsaXN0ZW5lciBmdW5jdGlvbiBzbyB0aGF0IGl0IHdpbGwgcmV0dXJuIGFcbiAgICAgICAgICogYGdldENvbnRlbnQoKWAgcHJvcGVydHkgd2hpY2ggcmV0dXJucyBhIGBQcm9taXNlYCByYXRoZXIgdGhhbiB1c2luZyBhXG4gICAgICAgICAqIGNhbGxiYWNrIEFQSS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IHJlcVxuICAgICAgICAgKiAgICAgICAgVGhlIEhBUiBlbnRyeSBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBuZXR3b3JrIHJlcXVlc3QuXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG9uUmVxdWVzdEZpbmlzaGVkKHJlcSkge1xuICAgICAgICAgIGNvbnN0IHdyYXBwZWRSZXEgPSB3cmFwT2JqZWN0KHJlcSwge31cbiAgICAgICAgICAvKiB3cmFwcGVycyAqL1xuICAgICAgICAgICwge1xuICAgICAgICAgICAgZ2V0Q29udGVudDoge1xuICAgICAgICAgICAgICBtaW5BcmdzOiAwLFxuICAgICAgICAgICAgICBtYXhBcmdzOiAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbGlzdGVuZXIod3JhcHBlZFJlcSk7XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG9uTWVzc2FnZVdyYXBwZXJzID0gbmV3IERlZmF1bHRXZWFrTWFwKGxpc3RlbmVyID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgcmV0dXJuIGxpc3RlbmVyO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXcmFwcyBhIG1lc3NhZ2UgbGlzdGVuZXIgZnVuY3Rpb24gc28gdGhhdCBpdCBtYXkgc2VuZCByZXNwb25zZXMgYmFzZWQgb25cbiAgICAgICAgICogaXRzIHJldHVybiB2YWx1ZSwgcmF0aGVyIHRoYW4gYnkgcmV0dXJuaW5nIGEgc2VudGluZWwgdmFsdWUgYW5kIGNhbGxpbmcgYVxuICAgICAgICAgKiBjYWxsYmFjay4gSWYgdGhlIGxpc3RlbmVyIGZ1bmN0aW9uIHJldHVybnMgYSBQcm9taXNlLCB0aGUgcmVzcG9uc2UgaXNcbiAgICAgICAgICogc2VudCB3aGVuIHRoZSBwcm9taXNlIGVpdGhlciByZXNvbHZlcyBvciByZWplY3RzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0geyp9IG1lc3NhZ2VcbiAgICAgICAgICogICAgICAgIFRoZSBtZXNzYWdlIHNlbnQgYnkgdGhlIG90aGVyIGVuZCBvZiB0aGUgY2hhbm5lbC5cbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IHNlbmRlclxuICAgICAgICAgKiAgICAgICAgRGV0YWlscyBhYm91dCB0aGUgc2VuZGVyIG9mIHRoZSBtZXNzYWdlLlxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCopfSBzZW5kUmVzcG9uc2VcbiAgICAgICAgICogICAgICAgIEEgY2FsbGJhY2sgd2hpY2gsIHdoZW4gY2FsbGVkIHdpdGggYW4gYXJiaXRyYXJ5IGFyZ3VtZW50LCBzZW5kc1xuICAgICAgICAgKiAgICAgICAgdGhhdCB2YWx1ZSBhcyBhIHJlc3BvbnNlLlxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICogICAgICAgIFRydWUgaWYgdGhlIHdyYXBwZWQgbGlzdGVuZXIgcmV0dXJuZWQgYSBQcm9taXNlLCB3aGljaCB3aWxsIGxhdGVyXG4gICAgICAgICAqICAgICAgICB5aWVsZCBhIHJlc3BvbnNlLiBGYWxzZSBvdGhlcndpc2UuXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG9uTWVzc2FnZShtZXNzYWdlLCBzZW5kZXIsIHNlbmRSZXNwb25zZSkge1xuICAgICAgICAgIGxldCBkaWRDYWxsU2VuZFJlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgICAgbGV0IHdyYXBwZWRTZW5kUmVzcG9uc2U7XG4gICAgICAgICAgbGV0IHNlbmRSZXNwb25zZVByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHdyYXBwZWRTZW5kUmVzcG9uc2UgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgZGlkQ2FsbFNlbmRSZXNwb25zZSA9IHRydWU7XG4gICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBsZXQgcmVzdWx0O1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGxpc3RlbmVyKG1lc3NhZ2UsIHNlbmRlciwgd3JhcHBlZFNlbmRSZXNwb25zZSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGlzUmVzdWx0VGhlbmFibGUgPSByZXN1bHQgIT09IHRydWUgJiYgaXNUaGVuYWJsZShyZXN1bHQpOyAvLyBJZiB0aGUgbGlzdGVuZXIgZGlkbid0IHJldHVybmVkIHRydWUgb3IgYSBQcm9taXNlLCBvciBjYWxsZWRcbiAgICAgICAgICAvLyB3cmFwcGVkU2VuZFJlc3BvbnNlIHN5bmNocm9ub3VzbHksIHdlIGNhbiBleGl0IGVhcmxpZXJcbiAgICAgICAgICAvLyBiZWNhdXNlIHRoZXJlIHdpbGwgYmUgbm8gcmVzcG9uc2Ugc2VudCBmcm9tIHRoaXMgbGlzdGVuZXIuXG5cbiAgICAgICAgICBpZiAocmVzdWx0ICE9PSB0cnVlICYmICFpc1Jlc3VsdFRoZW5hYmxlICYmICFkaWRDYWxsU2VuZFJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfSAvLyBBIHNtYWxsIGhlbHBlciB0byBzZW5kIHRoZSBtZXNzYWdlIGlmIHRoZSBwcm9taXNlIHJlc29sdmVzXG4gICAgICAgICAgLy8gYW5kIGFuIGVycm9yIGlmIHRoZSBwcm9taXNlIHJlamVjdHMgKGEgd3JhcHBlZCBzZW5kTWVzc2FnZSBoYXNcbiAgICAgICAgICAvLyB0byB0cmFuc2xhdGUgdGhlIG1lc3NhZ2UgaW50byBhIHJlc29sdmVkIHByb21pc2Ugb3IgYSByZWplY3RlZFxuICAgICAgICAgIC8vIHByb21pc2UpLlxuXG5cbiAgICAgICAgICBjb25zdCBzZW5kUHJvbWlzZWRSZXN1bHQgPSBwcm9taXNlID0+IHtcbiAgICAgICAgICAgIHByb21pc2UudGhlbihtc2cgPT4ge1xuICAgICAgICAgICAgICAvLyBzZW5kIHRoZSBtZXNzYWdlIHZhbHVlLlxuICAgICAgICAgICAgICBzZW5kUmVzcG9uc2UobXNnKTtcbiAgICAgICAgICAgIH0sIGVycm9yID0+IHtcbiAgICAgICAgICAgICAgLy8gU2VuZCBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIGVycm9yIGlmIHRoZSByZWplY3RlZCB2YWx1ZVxuICAgICAgICAgICAgICAvLyBpcyBhbiBpbnN0YW5jZSBvZiBlcnJvciwgb3IgdGhlIG9iamVjdCBpdHNlbGYgb3RoZXJ3aXNlLlxuICAgICAgICAgICAgICBsZXQgbWVzc2FnZTtcblxuICAgICAgICAgICAgICBpZiAoZXJyb3IgJiYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgfHwgdHlwZW9mIGVycm9yLm1lc3NhZ2UgPT09IFwic3RyaW5nXCIpKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZFwiO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICBfX21veldlYkV4dGVuc2lvblBvbHlmaWxsUmVqZWN0X186IHRydWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgIC8vIFByaW50IGFuIGVycm9yIG9uIHRoZSBjb25zb2xlIGlmIHVuYWJsZSB0byBzZW5kIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzZW5kIG9uTWVzc2FnZSByZWplY3RlZCByZXBseVwiLCBlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTsgLy8gSWYgdGhlIGxpc3RlbmVyIHJldHVybmVkIGEgUHJvbWlzZSwgc2VuZCB0aGUgcmVzb2x2ZWQgdmFsdWUgYXMgYVxuICAgICAgICAgIC8vIHJlc3VsdCwgb3RoZXJ3aXNlIHdhaXQgdGhlIHByb21pc2UgcmVsYXRlZCB0byB0aGUgd3JhcHBlZFNlbmRSZXNwb25zZVxuICAgICAgICAgIC8vIGNhbGxiYWNrIHRvIHJlc29sdmUgYW5kIHNlbmQgaXQgYXMgYSByZXNwb25zZS5cblxuXG4gICAgICAgICAgaWYgKGlzUmVzdWx0VGhlbmFibGUpIHtcbiAgICAgICAgICAgIHNlbmRQcm9taXNlZFJlc3VsdChyZXN1bHQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZW5kUHJvbWlzZWRSZXN1bHQoc2VuZFJlc3BvbnNlUHJvbWlzZSk7XG4gICAgICAgICAgfSAvLyBMZXQgQ2hyb21lIGtub3cgdGhhdCB0aGUgbGlzdGVuZXIgaXMgcmVwbHlpbmcuXG5cblxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHdyYXBwZWRTZW5kTWVzc2FnZUNhbGxiYWNrID0gKHtcbiAgICAgICAgcmVqZWN0LFxuICAgICAgICByZXNvbHZlXG4gICAgICB9LCByZXBseSkgPT4ge1xuICAgICAgICBpZiAoZXh0ZW5zaW9uQVBJcy5ydW50aW1lLmxhc3RFcnJvcikge1xuICAgICAgICAgIC8vIERldGVjdCB3aGVuIG5vbmUgb2YgdGhlIGxpc3RlbmVycyByZXBsaWVkIHRvIHRoZSBzZW5kTWVzc2FnZSBjYWxsIGFuZCByZXNvbHZlXG4gICAgICAgICAgLy8gdGhlIHByb21pc2UgdG8gdW5kZWZpbmVkIGFzIGluIEZpcmVmb3guXG4gICAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhL3dlYmV4dGVuc2lvbi1wb2x5ZmlsbC9pc3N1ZXMvMTMwXG4gICAgICAgICAgaWYgKGV4dGVuc2lvbkFQSXMucnVudGltZS5sYXN0RXJyb3IubWVzc2FnZSA9PT0gQ0hST01FX1NFTkRfTUVTU0FHRV9DQUxMQkFDS19OT19SRVNQT05TRV9NRVNTQUdFKSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoZXh0ZW5zaW9uQVBJcy5ydW50aW1lLmxhc3RFcnJvci5tZXNzYWdlKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlcGx5ICYmIHJlcGx5Ll9fbW96V2ViRXh0ZW5zaW9uUG9seWZpbGxSZWplY3RfXykge1xuICAgICAgICAgIC8vIENvbnZlcnQgYmFjayB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgZXJyb3IgaW50b1xuICAgICAgICAgIC8vIGFuIEVycm9yIGluc3RhbmNlLlxuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IocmVwbHkubWVzc2FnZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUocmVwbHkpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCB3cmFwcGVkU2VuZE1lc3NhZ2UgPSAobmFtZSwgbWV0YWRhdGEsIGFwaU5hbWVzcGFjZU9iaiwgLi4uYXJncykgPT4ge1xuICAgICAgICBpZiAoYXJncy5sZW5ndGggPCBtZXRhZGF0YS5taW5BcmdzKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBhdCBsZWFzdCAke21ldGFkYXRhLm1pbkFyZ3N9ICR7cGx1cmFsaXplQXJndW1lbnRzKG1ldGFkYXRhLm1pbkFyZ3MpfSBmb3IgJHtuYW1lfSgpLCBnb3QgJHthcmdzLmxlbmd0aH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IG1ldGFkYXRhLm1heEFyZ3MpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGF0IG1vc3QgJHttZXRhZGF0YS5tYXhBcmdzfSAke3BsdXJhbGl6ZUFyZ3VtZW50cyhtZXRhZGF0YS5tYXhBcmdzKX0gZm9yICR7bmFtZX0oKSwgZ290ICR7YXJncy5sZW5ndGh9YCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHdyYXBwZWRDYiA9IHdyYXBwZWRTZW5kTWVzc2FnZUNhbGxiYWNrLmJpbmQobnVsbCwge1xuICAgICAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgICAgIHJlamVjdFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFyZ3MucHVzaCh3cmFwcGVkQ2IpO1xuICAgICAgICAgIGFwaU5hbWVzcGFjZU9iai5zZW5kTWVzc2FnZSguLi5hcmdzKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBzdGF0aWNXcmFwcGVycyA9IHtcbiAgICAgICAgZGV2dG9vbHM6IHtcbiAgICAgICAgICBuZXR3b3JrOiB7XG4gICAgICAgICAgICBvblJlcXVlc3RGaW5pc2hlZDogd3JhcEV2ZW50KG9uUmVxdWVzdEZpbmlzaGVkV3JhcHBlcnMpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBydW50aW1lOiB7XG4gICAgICAgICAgb25NZXNzYWdlOiB3cmFwRXZlbnQob25NZXNzYWdlV3JhcHBlcnMpLFxuICAgICAgICAgIG9uTWVzc2FnZUV4dGVybmFsOiB3cmFwRXZlbnQob25NZXNzYWdlV3JhcHBlcnMpLFxuICAgICAgICAgIHNlbmRNZXNzYWdlOiB3cmFwcGVkU2VuZE1lc3NhZ2UuYmluZChudWxsLCBcInNlbmRNZXNzYWdlXCIsIHtcbiAgICAgICAgICAgIG1pbkFyZ3M6IDEsXG4gICAgICAgICAgICBtYXhBcmdzOiAzXG4gICAgICAgICAgfSlcbiAgICAgICAgfSxcbiAgICAgICAgdGFiczoge1xuICAgICAgICAgIHNlbmRNZXNzYWdlOiB3cmFwcGVkU2VuZE1lc3NhZ2UuYmluZChudWxsLCBcInNlbmRNZXNzYWdlXCIsIHtcbiAgICAgICAgICAgIG1pbkFyZ3M6IDIsXG4gICAgICAgICAgICBtYXhBcmdzOiAzXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNvbnN0IHNldHRpbmdNZXRhZGF0YSA9IHtcbiAgICAgICAgY2xlYXI6IHtcbiAgICAgICAgICBtaW5BcmdzOiAxLFxuICAgICAgICAgIG1heEFyZ3M6IDFcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0OiB7XG4gICAgICAgICAgbWluQXJnczogMSxcbiAgICAgICAgICBtYXhBcmdzOiAxXG4gICAgICAgIH0sXG4gICAgICAgIHNldDoge1xuICAgICAgICAgIG1pbkFyZ3M6IDEsXG4gICAgICAgICAgbWF4QXJnczogMVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgYXBpTWV0YWRhdGEucHJpdmFjeSA9IHtcbiAgICAgICAgbmV0d29yazoge1xuICAgICAgICAgIFwiKlwiOiBzZXR0aW5nTWV0YWRhdGFcbiAgICAgICAgfSxcbiAgICAgICAgc2VydmljZXM6IHtcbiAgICAgICAgICBcIipcIjogc2V0dGluZ01ldGFkYXRhXG4gICAgICAgIH0sXG4gICAgICAgIHdlYnNpdGVzOiB7XG4gICAgICAgICAgXCIqXCI6IHNldHRpbmdNZXRhZGF0YVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHdyYXBPYmplY3QoZXh0ZW5zaW9uQVBJcywgc3RhdGljV3JhcHBlcnMsIGFwaU1ldGFkYXRhKTtcbiAgICB9OyAvLyBUaGUgYnVpbGQgcHJvY2VzcyBhZGRzIGEgVU1EIHdyYXBwZXIgYXJvdW5kIHRoaXMgZmlsZSwgd2hpY2ggbWFrZXMgdGhlXG4gICAgLy8gYG1vZHVsZWAgdmFyaWFibGUgYXZhaWxhYmxlLlxuXG5cbiAgICBtb2R1bGUuZXhwb3J0cyA9IHdyYXBBUElzKGNocm9tZSk7XG4gIH0gZWxzZSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxUaGlzLmJyb3dzZXI7XG4gIH1cbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnJvd3Nlci1wb2x5ZmlsbC5qcy5tYXBcbiIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsImNvbnN0IExBTkdVQUdFU19MSVNUID0ge1xuICBhYToge1xuICAgIG5hbWU6ICdBZmFyJyxcbiAgICBuYXRpdmVOYW1lOiAnQWZhcmFmJyxcbiAgfSxcbiAgYWI6IHtcbiAgICBuYW1lOiAnQWJraGF6JyxcbiAgICBuYXRpdmVOYW1lOiAn0LDSp9GB0YPQsCDQsdGL0LfRiNOZ0LAnLFxuICB9LFxuICBhZToge1xuICAgIG5hbWU6ICdBdmVzdGFuJyxcbiAgICBuYXRpdmVOYW1lOiAnYXZlc3RhJyxcbiAgfSxcbiAgYWY6IHtcbiAgICBuYW1lOiAnQWZyaWthYW5zJyxcbiAgICBuYXRpdmVOYW1lOiAnQWZyaWthYW5zJyxcbiAgfSxcbiAgYWs6IHtcbiAgICBuYW1lOiAnQWthbicsXG4gICAgbmF0aXZlTmFtZTogJ0FrYW4nLFxuICB9LFxuICBhbToge1xuICAgIG5hbWU6ICdBbWhhcmljJyxcbiAgICBuYXRpdmVOYW1lOiAn4Yqg4Yib4Yit4YqbJyxcbiAgfSxcbiAgYW46IHtcbiAgICBuYW1lOiAnQXJhZ29uZXNlJyxcbiAgICBuYXRpdmVOYW1lOiAnYXJhZ29uw6lzJyxcbiAgfSxcbiAgYXI6IHtcbiAgICBuYW1lOiAnQXJhYmljJyxcbiAgICBuYXRpdmVOYW1lOiAn2KfZjtmE2ZLYudmO2LHZjtio2ZDZitmO2ZHYqdmPJyxcbiAgfSxcbiAgYXM6IHtcbiAgICBuYW1lOiAnQXNzYW1lc2UnLFxuICAgIG5hdGl2ZU5hbWU6ICfgpoXgprjgpq7gp4Dgpq/gprzgpr4nLFxuICB9LFxuICBhdjoge1xuICAgIG5hbWU6ICdBdmFyaWMnLFxuICAgIG5hdGl2ZU5hbWU6ICfQsNCy0LDRgCDQvNCw0YbTgCcsXG4gIH0sXG4gIGF5OiB7XG4gICAgbmFtZTogJ0F5bWFyYScsXG4gICAgbmF0aXZlTmFtZTogJ2F5bWFyIGFydScsXG4gIH0sXG4gIGF6OiB7XG4gICAgbmFtZTogJ0F6ZXJiYWlqYW5pJyxcbiAgICBuYXRpdmVOYW1lOiAnYXrJmXJiYXljYW4gZGlsaScsXG4gIH0sXG4gIGJhOiB7XG4gICAgbmFtZTogJ0Jhc2hraXInLFxuICAgIG5hdGl2ZU5hbWU6ICfQsdCw0YjSodC+0YDRgiDRgtC10LvQtScsXG4gIH0sXG4gIGJlOiB7XG4gICAgbmFtZTogJ0JlbGFydXNpYW4nLFxuICAgIG5hdGl2ZU5hbWU6ICfQsdC10LvQsNGA0YPRgdC60LDRjyDQvNC+0LLQsCcsXG4gIH0sXG4gIGJnOiB7XG4gICAgbmFtZTogJ0J1bGdhcmlhbicsXG4gICAgbmF0aXZlTmFtZTogJ9Cx0YrQu9Cz0LDRgNGB0LrQuCDQtdC30LjQuicsXG4gIH0sXG4gIGJpOiB7XG4gICAgbmFtZTogJ0Jpc2xhbWEnLFxuICAgIG5hdGl2ZU5hbWU6ICdCaXNsYW1hJyxcbiAgfSxcbiAgYm06IHtcbiAgICBuYW1lOiAnQmFtYmFyYScsXG4gICAgbmF0aXZlTmFtZTogJ2JhbWFuYW5rYW4nLFxuICB9LFxuICBibjoge1xuICAgIG5hbWU6ICdCZW5nYWxpJyxcbiAgICBuYXRpdmVOYW1lOiAn4Kas4Ka+4KaC4Kay4Ka+JyxcbiAgfSxcbiAgYm86IHtcbiAgICBuYW1lOiAnVGliZXRhbicsXG4gICAgbmF0aXZlTmFtZTogJ+C9luC9vOC9keC8i+C9oeC9suC9gicsXG4gIH0sXG4gIGJyOiB7XG4gICAgbmFtZTogJ0JyZXRvbicsXG4gICAgbmF0aXZlTmFtZTogJ2JyZXpob25lZycsXG4gIH0sXG4gIGJzOiB7XG4gICAgbmFtZTogJ0Jvc25pYW4nLFxuICAgIG5hdGl2ZU5hbWU6ICdib3NhbnNraSBqZXppaycsXG4gIH0sXG4gIGNhOiB7XG4gICAgbmFtZTogJ0NhdGFsYW4nLFxuICAgIG5hdGl2ZU5hbWU6ICdDYXRhbMOgJyxcbiAgfSxcbiAgY2U6IHtcbiAgICBuYW1lOiAnQ2hlY2hlbicsXG4gICAgbmF0aXZlTmFtZTogJ9C90L7RhdGH0LjQudC9INC80L7RgtGCJyxcbiAgfSxcbiAgY2g6IHtcbiAgICBuYW1lOiAnQ2hhbW9ycm8nLFxuICAgIG5hdGl2ZU5hbWU6ICdDaGFtb3J1JyxcbiAgfSxcbiAgY286IHtcbiAgICBuYW1lOiAnQ29yc2ljYW4nLFxuICAgIG5hdGl2ZU5hbWU6ICdjb3JzdScsXG4gIH0sXG4gIGNyOiB7XG4gICAgbmFtZTogJ0NyZWUnLFxuICAgIG5hdGl2ZU5hbWU6ICfhk4DhkKbhkIPhlK3hkI3hkI/hkKMnLFxuICB9LFxuICBjczoge1xuICAgIG5hbWU6ICdDemVjaCcsXG4gICAgbmF0aXZlTmFtZTogJ8SNZcWhdGluYScsXG4gIH0sXG4gIGN1OiB7XG4gICAgbmFtZTogJ09sZCBDaHVyY2ggU2xhdm9uaWMnLFxuICAgIG5hdGl2ZU5hbWU6ICfRqdC30YvQutGKINGB0LvQvtCy0aPQvdGM0YHQutGKJyxcbiAgfSxcbiAgY3Y6IHtcbiAgICBuYW1lOiAnQ2h1dmFzaCcsXG4gICAgbmF0aXZlTmFtZTogJ9GH05HQstCw0Ygg0YfTl9C70YXQuCcsXG4gIH0sXG4gIGN5OiB7XG4gICAgbmFtZTogJ1dlbHNoJyxcbiAgICBuYXRpdmVOYW1lOiAnQ3ltcmFlZycsXG4gIH0sXG4gIGRhOiB7XG4gICAgbmFtZTogJ0RhbmlzaCcsXG4gICAgbmF0aXZlTmFtZTogJ2RhbnNrJyxcbiAgfSxcbiAgZGU6IHtcbiAgICBuYW1lOiAnR2VybWFuJyxcbiAgICBuYXRpdmVOYW1lOiAnRGV1dHNjaCcsXG4gIH0sXG4gIGR2OiB7XG4gICAgbmFtZTogJ0RpdmVoaScsXG4gICAgbmF0aXZlTmFtZTogJ96L3qjeiN6s3oDeqCcsXG4gIH0sXG4gIGR6OiB7XG4gICAgbmFtZTogJ0R6b25na2hhJyxcbiAgICBuYXRpdmVOYW1lOiAn4L2i4L6r4L284L2E4LyL4L2BJyxcbiAgfSxcbiAgZWU6IHtcbiAgICBuYW1lOiAnRXdlJyxcbiAgICBuYXRpdmVOYW1lOiAnRcqLZWdiZScsXG4gIH0sXG4gIGVsOiB7XG4gICAgbmFtZTogJ0dyZWVrJyxcbiAgICBuYXRpdmVOYW1lOiAnzpXOu867zrfOvc65zrrOrCcsXG4gIH0sXG4gIGVuOiB7XG4gICAgbmFtZTogJ0VuZ2xpc2gnLFxuICAgIG5hdGl2ZU5hbWU6ICdFbmdsaXNoJyxcbiAgfSxcbiAgZW86IHtcbiAgICBuYW1lOiAnRXNwZXJhbnRvJyxcbiAgICBuYXRpdmVOYW1lOiAnRXNwZXJhbnRvJyxcbiAgfSxcbiAgZXM6IHtcbiAgICBuYW1lOiAnU3BhbmlzaCcsXG4gICAgbmF0aXZlTmFtZTogJ0VzcGHDsW9sJyxcbiAgfSxcbiAgZXQ6IHtcbiAgICBuYW1lOiAnRXN0b25pYW4nLFxuICAgIG5hdGl2ZU5hbWU6ICdlZXN0aScsXG4gIH0sXG4gIGV1OiB7XG4gICAgbmFtZTogJ0Jhc3F1ZScsXG4gICAgbmF0aXZlTmFtZTogJ2V1c2thcmEnLFxuICB9LFxuICBmYToge1xuICAgIG5hbWU6ICdQZXJzaWFuJyxcbiAgICBuYXRpdmVOYW1lOiAn2YHYp9ix2LPbjCcsXG4gIH0sXG4gIGZmOiB7XG4gICAgbmFtZTogJ0Z1bGEnLFxuICAgIG5hdGl2ZU5hbWU6ICdGdWxmdWxkZScsXG4gIH0sXG4gIGZpOiB7XG4gICAgbmFtZTogJ0Zpbm5pc2gnLFxuICAgIG5hdGl2ZU5hbWU6ICdzdW9taScsXG4gIH0sXG4gIGZqOiB7XG4gICAgbmFtZTogJ0ZpamlhbicsXG4gICAgbmF0aXZlTmFtZTogJ3Zvc2EgVmFrYXZpdGknLFxuICB9LFxuICBmbzoge1xuICAgIG5hbWU6ICdGYXJvZXNlJyxcbiAgICBuYXRpdmVOYW1lOiAnZsO4cm95c2t0JyxcbiAgfSxcbiAgZnI6IHtcbiAgICBuYW1lOiAnRnJlbmNoJyxcbiAgICBuYXRpdmVOYW1lOiAnRnJhbsOnYWlzJyxcbiAgfSxcbiAgZnk6IHtcbiAgICBuYW1lOiAnV2VzdGVybiBGcmlzaWFuJyxcbiAgICBuYXRpdmVOYW1lOiAnRnJ5c2snLFxuICB9LFxuICBnYToge1xuICAgIG5hbWU6ICdJcmlzaCcsXG4gICAgbmF0aXZlTmFtZTogJ0dhZWlsZ2UnLFxuICB9LFxuICBnZDoge1xuICAgIG5hbWU6ICdTY290dGlzaCBHYWVsaWMnLFxuICAgIG5hdGl2ZU5hbWU6ICdHw6BpZGhsaWcnLFxuICB9LFxuICBnbDoge1xuICAgIG5hbWU6ICdHYWxpY2lhbicsXG4gICAgbmF0aXZlTmFtZTogJ2dhbGVnbycsXG4gIH0sXG4gIGduOiB7XG4gICAgbmFtZTogJ0d1YXJhbsOtJyxcbiAgICBuYXRpdmVOYW1lOiBcIkF2YcOxZSfhur1cIixcbiAgfSxcbiAgZ3U6IHtcbiAgICBuYW1lOiAnR3VqYXJhdGknLFxuICAgIG5hdGl2ZU5hbWU6ICfgqpfgq4HgqpzgqrDgqr7gqqTgq4AnLFxuICB9LFxuICBndjoge1xuICAgIG5hbWU6ICdNYW54JyxcbiAgICBuYXRpdmVOYW1lOiAnR2FlbGcnLFxuICB9LFxuICBoYToge1xuICAgIG5hbWU6ICdIYXVzYScsXG4gICAgbmF0aXZlTmFtZTogJ9mH2Y7ZiNmP2LPZjicsXG4gIH0sXG4gIGhlOiB7XG4gICAgbmFtZTogJ0hlYnJldycsXG4gICAgbmF0aXZlTmFtZTogJ9ei15HXqNeZ16onLFxuICB9LFxuICBoaToge1xuICAgIG5hbWU6ICdIaW5kaScsXG4gICAgbmF0aXZlTmFtZTogJ+CkueCkv+CkqOCljeCkpuClgCcsXG4gIH0sXG4gIGhvOiB7XG4gICAgbmFtZTogJ0hpcmkgTW90dScsXG4gICAgbmF0aXZlTmFtZTogJ0hpcmkgTW90dScsXG4gIH0sXG4gIGhyOiB7XG4gICAgbmFtZTogJ0Nyb2F0aWFuJyxcbiAgICBuYXRpdmVOYW1lOiAnSHJ2YXRza2knLFxuICB9LFxuICBodDoge1xuICAgIG5hbWU6ICdIYWl0aWFuJyxcbiAgICBuYXRpdmVOYW1lOiAnS3JlecOybCBheWlzeWVuJyxcbiAgfSxcbiAgaHU6IHtcbiAgICBuYW1lOiAnSHVuZ2FyaWFuJyxcbiAgICBuYXRpdmVOYW1lOiAnbWFneWFyJyxcbiAgfSxcbiAgaHk6IHtcbiAgICBuYW1lOiAnQXJtZW5pYW4nLFxuICAgIG5hdGl2ZU5hbWU6ICfVgNWh1bXVpdaA1aXVticsXG4gIH0sXG4gIGh6OiB7XG4gICAgbmFtZTogJ0hlcmVybycsXG4gICAgbmF0aXZlTmFtZTogJ090amloZXJlcm8nLFxuICB9LFxuICBpYToge1xuICAgIG5hbWU6ICdJbnRlcmxpbmd1YScsXG4gICAgbmF0aXZlTmFtZTogJ0ludGVybGluZ3VhJyxcbiAgfSxcbiAgaWQ6IHtcbiAgICBuYW1lOiAnSW5kb25lc2lhbicsXG4gICAgbmF0aXZlTmFtZTogJ0JhaGFzYSBJbmRvbmVzaWEnLFxuICB9LFxuICBpZToge1xuICAgIG5hbWU6ICdJbnRlcmxpbmd1ZScsXG4gICAgbmF0aXZlTmFtZTogJ0ludGVybGluZ3VlJyxcbiAgfSxcbiAgaWc6IHtcbiAgICBuYW1lOiAnSWdibycsXG4gICAgbmF0aXZlTmFtZTogJ0Fz4bulc+G7pSBJZ2JvJyxcbiAgfSxcbiAgaWk6IHtcbiAgICBuYW1lOiAnTnVvc3UnLFxuICAgIG5hdGl2ZU5hbWU6ICfqhojqjKDqkr8gTnVvc3VoeG9wJyxcbiAgfSxcbiAgaWs6IHtcbiAgICBuYW1lOiAnSW51cGlhcScsXG4gICAgbmF0aXZlTmFtZTogJ0nDsXVwaWFxJyxcbiAgfSxcbiAgaW86IHtcbiAgICBuYW1lOiAnSWRvJyxcbiAgICBuYXRpdmVOYW1lOiAnSWRvJyxcbiAgfSxcbiAgaXM6IHtcbiAgICBuYW1lOiAnSWNlbGFuZGljJyxcbiAgICBuYXRpdmVOYW1lOiAnw41zbGVuc2thJyxcbiAgfSxcbiAgaXQ6IHtcbiAgICBuYW1lOiAnSXRhbGlhbicsXG4gICAgbmF0aXZlTmFtZTogJ0l0YWxpYW5vJyxcbiAgfSxcbiAgaXU6IHtcbiAgICBuYW1lOiAnSW51a3RpdHV0JyxcbiAgICBuYXRpdmVOYW1lOiAn4ZCD4ZOE4ZKD4ZGO4ZGQ4ZGmJyxcbiAgfSxcbiAgamE6IHtcbiAgICBuYW1lOiAnSmFwYW5lc2UnLFxuICAgIG5hdGl2ZU5hbWU6ICfml6XmnKzoqp4nLFxuICB9LFxuICBqdjoge1xuICAgIG5hbWU6ICdKYXZhbmVzZScsXG4gICAgbmF0aXZlTmFtZTogJ2Jhc2EgSmF3YScsXG4gIH0sXG4gIGthOiB7XG4gICAgbmFtZTogJ0dlb3JnaWFuJyxcbiAgICBuYXRpdmVOYW1lOiAn4YOl4YOQ4YOg4YOX4YOj4YOa4YOYJyxcbiAgfSxcbiAga2c6IHtcbiAgICBuYW1lOiAnS29uZ28nLFxuICAgIG5hdGl2ZU5hbWU6ICdLaWtvbmdvJyxcbiAgfSxcbiAga2k6IHtcbiAgICBuYW1lOiAnS2lrdXl1JyxcbiAgICBuYXRpdmVOYW1lOiAnR8Spa8WpecWpJyxcbiAgfSxcbiAga2o6IHtcbiAgICBuYW1lOiAnS3dhbnlhbWEnLFxuICAgIG5hdGl2ZU5hbWU6ICdLdWFueWFtYScsXG4gIH0sXG4gIGtrOiB7XG4gICAgbmFtZTogJ0themFraCcsXG4gICAgbmF0aXZlTmFtZTogJ9Kb0LDQt9Cw0psg0YLRltC70ZYnLFxuICB9LFxuICBrbDoge1xuICAgIG5hbWU6ICdLYWxhYWxsaXN1dCcsXG4gICAgbmF0aXZlTmFtZTogJ2thbGFhbGxpc3V0JyxcbiAgfSxcbiAga206IHtcbiAgICBuYW1lOiAnS2htZXInLFxuICAgIG5hdGl2ZU5hbWU6ICfhnoHhn4Hhnpjhnprhnpfhnrbhnp/hnrYnLFxuICB9LFxuICBrbjoge1xuICAgIG5hbWU6ICdLYW5uYWRhJyxcbiAgICBuYXRpdmVOYW1lOiAn4LKV4LKo4LON4LKo4LKhJyxcbiAgfSxcbiAga286IHtcbiAgICBuYW1lOiAnS29yZWFuJyxcbiAgICBuYXRpdmVOYW1lOiAn7ZWc6rWt7Ja0JyxcbiAgfSxcbiAga3I6IHtcbiAgICBuYW1lOiAnS2FudXJpJyxcbiAgICBuYXRpdmVOYW1lOiAnS2FudXJpJyxcbiAgfSxcbiAga3M6IHtcbiAgICBuYW1lOiAnS2FzaG1pcmknLFxuICAgIG5hdGl2ZU5hbWU6ICfgpJXgpLbgpY3gpK7gpYDgpLDgpYAnLFxuICB9LFxuICBrdToge1xuICAgIG5hbWU6ICdLdXJkaXNoJyxcbiAgICBuYXRpdmVOYW1lOiAnS3VyZMOuJyxcbiAgfSxcbiAga3Y6IHtcbiAgICBuYW1lOiAnS29taScsXG4gICAgbmF0aXZlTmFtZTogJ9C60L7QvNC4INC60YvQsicsXG4gIH0sXG4gIGt3OiB7XG4gICAgbmFtZTogJ0Nvcm5pc2gnLFxuICAgIG5hdGl2ZU5hbWU6ICdLZXJuZXdlaycsXG4gIH0sXG4gIGt5OiB7XG4gICAgbmFtZTogJ0t5cmd5eicsXG4gICAgbmF0aXZlTmFtZTogJ9Ca0YvRgNCz0YvQt9GH0LAnLFxuICB9LFxuICBsYToge1xuICAgIG5hbWU6ICdMYXRpbicsXG4gICAgbmF0aXZlTmFtZTogJ2xhdGluZScsXG4gIH0sXG4gIGxiOiB7XG4gICAgbmFtZTogJ0x1eGVtYm91cmdpc2gnLFxuICAgIG5hdGl2ZU5hbWU6ICdMw6t0emVidWVyZ2VzY2gnLFxuICB9LFxuICBsZzoge1xuICAgIG5hbWU6ICdHYW5kYScsXG4gICAgbmF0aXZlTmFtZTogJ0x1Z2FuZGEnLFxuICB9LFxuICBsaToge1xuICAgIG5hbWU6ICdMaW1idXJnaXNoJyxcbiAgICBuYXRpdmVOYW1lOiAnTGltYnVyZ3MnLFxuICB9LFxuICBsbjoge1xuICAgIG5hbWU6ICdMaW5nYWxhJyxcbiAgICBuYXRpdmVOYW1lOiAnTGluZ8OhbGEnLFxuICB9LFxuICBsbzoge1xuICAgIG5hbWU6ICdMYW8nLFxuICAgIG5hdGl2ZU5hbWU6ICfgup7gurLguqrgurLguqXgurLguqcnLFxuICB9LFxuICBsdDoge1xuICAgIG5hbWU6ICdMaXRodWFuaWFuJyxcbiAgICBuYXRpdmVOYW1lOiAnbGlldHV2acWzIGthbGJhJyxcbiAgfSxcbiAgbHU6IHtcbiAgICBuYW1lOiAnTHViYS1LYXRhbmdhJyxcbiAgICBuYXRpdmVOYW1lOiAnS2lsdWJhJyxcbiAgfSxcbiAgbHY6IHtcbiAgICBuYW1lOiAnTGF0dmlhbicsXG4gICAgbmF0aXZlTmFtZTogJ2xhdHZpZcWhdSB2YWxvZGEnLFxuICB9LFxuICBtZzoge1xuICAgIG5hbWU6ICdNYWxhZ2FzeScsXG4gICAgbmF0aXZlTmFtZTogJ2ZpdGVueSBtYWxhZ2FzeScsXG4gIH0sXG4gIG1oOiB7XG4gICAgbmFtZTogJ01hcnNoYWxsZXNlJyxcbiAgICBuYXRpdmVOYW1lOiAnS2FqaW4gTcynYWplxLwnLFxuICB9LFxuICBtaToge1xuICAgIG5hbWU6ICdNxIFvcmknLFxuICAgIG5hdGl2ZU5hbWU6ICd0ZSByZW8gTcSBb3JpJyxcbiAgfSxcbiAgbWs6IHtcbiAgICBuYW1lOiAnTWFjZWRvbmlhbicsXG4gICAgbmF0aXZlTmFtZTogJ9C80LDQutC10LTQvtC90YHQutC4INGY0LDQt9C40LonLFxuICB9LFxuICBtbDoge1xuICAgIG5hbWU6ICdNYWxheWFsYW0nLFxuICAgIG5hdGl2ZU5hbWU6ICfgtK7gtLLgtK/gtL7gtLPgtIInLFxuICB9LFxuICBtbjoge1xuICAgIG5hbWU6ICdNb25nb2xpYW4nLFxuICAgIG5hdGl2ZU5hbWU6ICfQnNC+0L3Qs9C+0Lsg0YXRjdC7JyxcbiAgfSxcbiAgbXI6IHtcbiAgICBuYW1lOiAnTWFyYXRoaScsXG4gICAgbmF0aXZlTmFtZTogJ+CkruCksOCkvuCkoOClgCcsXG4gIH0sXG4gIG1zOiB7XG4gICAgbmFtZTogJ01hbGF5JyxcbiAgICBuYXRpdmVOYW1lOiAnQmFoYXNhIE1lbGF5dScsXG4gIH0sXG4gIG10OiB7XG4gICAgbmFtZTogJ01hbHRlc2UnLFxuICAgIG5hdGl2ZU5hbWU6ICdNYWx0aScsXG4gIH0sXG4gIG15OiB7XG4gICAgbmFtZTogJ0J1cm1lc2UnLFxuICAgIG5hdGl2ZU5hbWU6ICfhgJfhgJnhgKzhgIXhgKwnLFxuICB9LFxuICBuYToge1xuICAgIG5hbWU6ICdOYXVydScsXG4gICAgbmF0aXZlTmFtZTogJ0RvcmVyaW4gTmFvZXJvJyxcbiAgfSxcbiAgbmI6IHtcbiAgICBuYW1lOiAnTm9yd2VnaWFuIEJva23DpWwnLFxuICAgIG5hdGl2ZU5hbWU6ICdOb3JzayBib2ttw6VsJyxcbiAgfSxcbiAgbmQ6IHtcbiAgICBuYW1lOiAnTm9ydGhlcm4gTmRlYmVsZScsXG4gICAgbmF0aXZlTmFtZTogJ2lzaU5kZWJlbGUnLFxuICB9LFxuICBuZToge1xuICAgIG5hbWU6ICdOZXBhbGknLFxuICAgIG5hdGl2ZU5hbWU6ICfgpKjgpYfgpKrgpL7gpLLgpYAnLFxuICB9LFxuICBuZzoge1xuICAgIG5hbWU6ICdOZG9uZ2EnLFxuICAgIG5hdGl2ZU5hbWU6ICdPd2FtYm8nLFxuICB9LFxuICBubDoge1xuICAgIG5hbWU6ICdEdXRjaCcsXG4gICAgbmF0aXZlTmFtZTogJ05lZGVybGFuZHMnLFxuICB9LFxuICBubjoge1xuICAgIG5hbWU6ICdOb3J3ZWdpYW4gTnlub3JzaycsXG4gICAgbmF0aXZlTmFtZTogJ05vcnNrIG55bm9yc2snLFxuICB9LFxuICBubzoge1xuICAgIG5hbWU6ICdOb3J3ZWdpYW4nLFxuICAgIG5hdGl2ZU5hbWU6ICdOb3JzaycsXG4gIH0sXG4gIG5yOiB7XG4gICAgbmFtZTogJ1NvdXRoZXJuIE5kZWJlbGUnLFxuICAgIG5hdGl2ZU5hbWU6ICdpc2lOZGViZWxlJyxcbiAgfSxcbiAgbnY6IHtcbiAgICBuYW1lOiAnTmF2YWpvJyxcbiAgICBuYXRpdmVOYW1lOiAnRGluw6kgYml6YWFkJyxcbiAgfSxcbiAgbnk6IHtcbiAgICBuYW1lOiAnQ2hpY2hld2EnLFxuICAgIG5hdGl2ZU5hbWU6ICdjaGlDaGXFtWEnLFxuICB9LFxuICBvYzoge1xuICAgIG5hbWU6ICdPY2NpdGFuJyxcbiAgICBuYXRpdmVOYW1lOiAnb2NjaXRhbicsXG4gIH0sXG4gIG9qOiB7XG4gICAgbmFtZTogJ09qaWJ3ZScsXG4gICAgbmF0aXZlTmFtZTogJ+GQiuGTguGUkeGTiOGQr+GSp+GQjuGTkCcsXG4gIH0sXG4gIG9tOiB7XG4gICAgbmFtZTogJ09yb21vJyxcbiAgICBuYXRpdmVOYW1lOiAnQWZhYW4gT3JvbW9vJyxcbiAgfSxcbiAgb3I6IHtcbiAgICBuYW1lOiAnT3JpeWEnLFxuICAgIG5hdGl2ZU5hbWU6ICfgrJPgrKHgrLzgrL/grIYnLFxuICB9LFxuICBvczoge1xuICAgIG5hbWU6ICdPc3NldGlhbicsXG4gICAgbmF0aXZlTmFtZTogJ9C40YDQvtC9IMOm0LLQt9Cw0LMnLFxuICB9LFxuICBwYToge1xuICAgIG5hbWU6ICdQYW5qYWJpJyxcbiAgICBuYXRpdmVOYW1lOiAn4Kiq4Kmw4Kic4Ki+4Kis4KmAJyxcbiAgfSxcbiAgcGk6IHtcbiAgICBuYW1lOiAnUMSBbGknLFxuICAgIG5hdGl2ZU5hbWU6ICfgpKrgpL7gpLTgpL8nLFxuICB9LFxuICBwbDoge1xuICAgIG5hbWU6ICdQb2xpc2gnLFxuICAgIG5hdGl2ZU5hbWU6ICdQb2xza2knLFxuICB9LFxuICBwczoge1xuICAgIG5hbWU6ICdQYXNodG8nLFxuICAgIG5hdGl2ZU5hbWU6ICfZvtqa2KrZiCcsXG4gIH0sXG4gIHB0OiB7XG4gICAgbmFtZTogJ1BvcnR1Z3Vlc2UnLFxuICAgIG5hdGl2ZU5hbWU6ICdQb3J0dWd1w6pzJyxcbiAgfSxcbiAgcXU6IHtcbiAgICBuYW1lOiAnUXVlY2h1YScsXG4gICAgbmF0aXZlTmFtZTogJ1J1bmEgU2ltaScsXG4gIH0sXG4gIHJtOiB7XG4gICAgbmFtZTogJ1JvbWFuc2gnLFxuICAgIG5hdGl2ZU5hbWU6ICdydW1hbnRzY2ggZ3Jpc2NodW4nLFxuICB9LFxuICBybjoge1xuICAgIG5hbWU6ICdLaXJ1bmRpJyxcbiAgICBuYXRpdmVOYW1lOiAnSWtpcnVuZGknLFxuICB9LFxuICBybzoge1xuICAgIG5hbWU6ICdSb21hbmlhbicsXG4gICAgbmF0aXZlTmFtZTogJ1JvbcOibsSDJyxcbiAgfSxcbiAgcnU6IHtcbiAgICBuYW1lOiAnUnVzc2lhbicsXG4gICAgbmF0aXZlTmFtZTogJ9Cg0YPRgdGB0LrQuNC5JyxcbiAgfSxcbiAgcnc6IHtcbiAgICBuYW1lOiAnS2lueWFyd2FuZGEnLFxuICAgIG5hdGl2ZU5hbWU6ICdJa2lueWFyd2FuZGEnLFxuICB9LFxuICBzYToge1xuICAgIG5hbWU6ICdTYW5za3JpdCcsXG4gICAgbmF0aXZlTmFtZTogJ+CkuOCkguCkuOCljeCkleClg+CkpOCkruCljScsXG4gIH0sXG4gIHNjOiB7XG4gICAgbmFtZTogJ1NhcmRpbmlhbicsXG4gICAgbmF0aXZlTmFtZTogJ3NhcmR1JyxcbiAgfSxcbiAgc2Q6IHtcbiAgICBuYW1lOiAnU2luZGhpJyxcbiAgICBuYXRpdmVOYW1lOiAn4KS44KS/4KSo4KWN4KSn4KWAJyxcbiAgfSxcbiAgc2U6IHtcbiAgICBuYW1lOiAnTm9ydGhlcm4gU2FtaScsXG4gICAgbmF0aXZlTmFtZTogJ0RhdnZpc8OhbWVnaWVsbGEnLFxuICB9LFxuICBzZzoge1xuICAgIG5hbWU6ICdTYW5nbycsXG4gICAgbmF0aXZlTmFtZTogJ3nDom5nw6IgdMOuIHPDpG5nw7YnLFxuICB9LFxuICBzaToge1xuICAgIG5hbWU6ICdTaW5oYWxhJyxcbiAgICBuYXRpdmVOYW1lOiAn4LeD4LeS4LaC4LeE4La9JyxcbiAgfSxcbiAgc2s6IHtcbiAgICBuYW1lOiAnU2xvdmFrJyxcbiAgICBuYXRpdmVOYW1lOiAnc2xvdmVuxI1pbmEnLFxuICB9LFxuICBzbDoge1xuICAgIG5hbWU6ICdTbG92ZW5pYW4nLFxuICAgIG5hdGl2ZU5hbWU6ICdzbG92ZW7FocSNaW5hJyxcbiAgfSxcbiAgc206IHtcbiAgICBuYW1lOiAnU2Ftb2FuJyxcbiAgICBuYXRpdmVOYW1lOiBcImdhZ2FuYSBmYSdhIFNhbW9hXCIsXG4gIH0sXG4gIHNuOiB7XG4gICAgbmFtZTogJ1Nob25hJyxcbiAgICBuYXRpdmVOYW1lOiAnY2hpU2hvbmEnLFxuICB9LFxuICBzbzoge1xuICAgIG5hbWU6ICdTb21hbGknLFxuICAgIG5hdGl2ZU5hbWU6ICdTb29tYWFsaWdhJyxcbiAgfSxcbiAgc3E6IHtcbiAgICBuYW1lOiAnQWxiYW5pYW4nLFxuICAgIG5hdGl2ZU5hbWU6ICdTaHFpcCcsXG4gIH0sXG4gIHNyOiB7XG4gICAgbmFtZTogJ1NlcmJpYW4nLFxuICAgIG5hdGl2ZU5hbWU6ICfRgdGA0L/RgdC60Lgg0ZjQtdC30LjQuicsXG4gIH0sXG4gIHNzOiB7XG4gICAgbmFtZTogJ1N3YXRpJyxcbiAgICBuYXRpdmVOYW1lOiAnU2lTd2F0aScsXG4gIH0sXG4gIHN0OiB7XG4gICAgbmFtZTogJ1NvdXRoZXJuIFNvdGhvJyxcbiAgICBuYXRpdmVOYW1lOiAnU2Vzb3RobycsXG4gIH0sXG4gIHN1OiB7XG4gICAgbmFtZTogJ1N1bmRhbmVzZScsXG4gICAgbmF0aXZlTmFtZTogJ0Jhc2EgU3VuZGEnLFxuICB9LFxuICBzdjoge1xuICAgIG5hbWU6ICdTd2VkaXNoJyxcbiAgICBuYXRpdmVOYW1lOiAnU3ZlbnNrYScsXG4gIH0sXG4gIHN3OiB7XG4gICAgbmFtZTogJ1N3YWhpbGknLFxuICAgIG5hdGl2ZU5hbWU6ICdLaXN3YWhpbGknLFxuICB9LFxuICB0YToge1xuICAgIG5hbWU6ICdUYW1pbCcsXG4gICAgbmF0aXZlTmFtZTogJ+CupOCuruCuv+CutOCvjScsXG4gIH0sXG4gIHRlOiB7XG4gICAgbmFtZTogJ1RlbHVndScsXG4gICAgbmF0aXZlTmFtZTogJ+CwpOCxhuCwsuCxgeCwl+CxgScsXG4gIH0sXG4gIHRnOiB7XG4gICAgbmFtZTogJ1RhamlrJyxcbiAgICBuYXRpdmVOYW1lOiAn0YLQvtK30LjQutOjJyxcbiAgfSxcbiAgdGg6IHtcbiAgICBuYW1lOiAnVGhhaScsXG4gICAgbmF0aXZlTmFtZTogJ+C5hOC4l+C4oicsXG4gIH0sXG4gIHRpOiB7XG4gICAgbmFtZTogJ1RpZ3JpbnlhJyxcbiAgICBuYXRpdmVOYW1lOiAn4Ym14YyN4Yit4YqbJyxcbiAgfSxcbiAgdGs6IHtcbiAgICBuYW1lOiAnVHVya21lbicsXG4gICAgbmF0aXZlTmFtZTogJ1TDvHJrbWVuw6dlJyxcbiAgfSxcbiAgdGw6IHtcbiAgICBuYW1lOiAnVGFnYWxvZycsXG4gICAgbmF0aXZlTmFtZTogJ1dpa2FuZyBUYWdhbG9nJyxcbiAgfSxcbiAgdG46IHtcbiAgICBuYW1lOiAnVHN3YW5hJyxcbiAgICBuYXRpdmVOYW1lOiAnU2V0c3dhbmEnLFxuICB9LFxuICB0bzoge1xuICAgIG5hbWU6ICdUb25nYScsXG4gICAgbmF0aXZlTmFtZTogJ2Zha2EgVG9uZ2EnLFxuICB9LFxuICB0cjoge1xuICAgIG5hbWU6ICdUdXJraXNoJyxcbiAgICBuYXRpdmVOYW1lOiAnVMO8cmvDp2UnLFxuICB9LFxuICB0czoge1xuICAgIG5hbWU6ICdUc29uZ2EnLFxuICAgIG5hdGl2ZU5hbWU6ICdYaXRzb25nYScsXG4gIH0sXG4gIHR0OiB7XG4gICAgbmFtZTogJ1RhdGFyJyxcbiAgICBuYXRpdmVOYW1lOiAn0YLQsNGC0LDRgCDRgtC10LvQtScsXG4gIH0sXG4gIHR3OiB7XG4gICAgbmFtZTogJ1R3aScsXG4gICAgbmF0aXZlTmFtZTogJ1R3aScsXG4gIH0sXG4gIHR5OiB7XG4gICAgbmFtZTogJ1RhaGl0aWFuJyxcbiAgICBuYXRpdmVOYW1lOiAnUmVvIFRhaGl0aScsXG4gIH0sXG4gIHVnOiB7XG4gICAgbmFtZTogJ1V5Z2h1cicsXG4gICAgbmF0aXZlTmFtZTogJ9im24fZiti624fYsdqG25XigI4nLFxuICB9LFxuICB1azoge1xuICAgIG5hbWU6ICdVa3JhaW5pYW4nLFxuICAgIG5hdGl2ZU5hbWU6ICfQo9C60YDQsNGX0L3RgdGM0LrQsCcsXG4gIH0sXG4gIHVyOiB7XG4gICAgbmFtZTogJ1VyZHUnLFxuICAgIG5hdGl2ZU5hbWU6ICfYp9ix2K/ZiCcsXG4gIH0sXG4gIHV6OiB7XG4gICAgbmFtZTogJ1V6YmVrJyxcbiAgICBuYXRpdmVOYW1lOiAn0I7Qt9Cx0LXQuicsXG4gIH0sXG4gIHZlOiB7XG4gICAgbmFtZTogJ1ZlbmRhJyxcbiAgICBuYXRpdmVOYW1lOiAnVHNoaXZlbuG4k2EnLFxuICB9LFxuICB2aToge1xuICAgIG5hbWU6ICdWaWV0bmFtZXNlJyxcbiAgICBuYXRpdmVOYW1lOiAnVGnhur9uZyBWaeG7h3QnLFxuICB9LFxuICB2bzoge1xuICAgIG5hbWU6ICdWb2xhcMO8aycsXG4gICAgbmF0aXZlTmFtZTogJ1ZvbGFww7xrJyxcbiAgfSxcbiAgd2E6IHtcbiAgICBuYW1lOiAnV2FsbG9vbicsXG4gICAgbmF0aXZlTmFtZTogJ3dhbG9uJyxcbiAgfSxcbiAgd286IHtcbiAgICBuYW1lOiAnV29sb2YnLFxuICAgIG5hdGl2ZU5hbWU6ICdXb2xsb2YnLFxuICB9LFxuICB4aDoge1xuICAgIG5hbWU6ICdYaG9zYScsXG4gICAgbmF0aXZlTmFtZTogJ2lzaVhob3NhJyxcbiAgfSxcbiAgeWk6IHtcbiAgICBuYW1lOiAnWWlkZGlzaCcsXG4gICAgbmF0aXZlTmFtZTogJ9eZ15nWtNeT15nXqScsXG4gIH0sXG4gIHlvOiB7XG4gICAgbmFtZTogJ1lvcnViYScsXG4gICAgbmF0aXZlTmFtZTogJ1lvcsO5YsOhJyxcbiAgfSxcbiAgemE6IHtcbiAgICBuYW1lOiAnWmh1YW5nJyxcbiAgICBuYXRpdmVOYW1lOiAnU2HJryBjdWXFi8aFJyxcbiAgfSxcbiAgemg6IHtcbiAgICBuYW1lOiAnQ2hpbmVzZScsXG4gICAgbmF0aXZlTmFtZTogJ+S4reaWhycsXG4gIH0sXG4gIHp1OiB7XG4gICAgbmFtZTogJ1p1bHUnLFxuICAgIG5hdGl2ZU5hbWU6ICdpc2ladWx1JyxcbiAgfSxcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gTEFOR1VBR0VTX0xJU1Q7XG4iLCJjb25zdCBMQU5HVUFHRVNfTElTVCA9IHJlcXVpcmUoJy4vZGF0YS5qcycpO1xuXG5jb25zdCBMQU5HVUFHRVMgPSB7fTtcbmNvbnN0IExBTkdVQUdFU19CWV9OQU1FID0ge307XG5jb25zdCBMQU5HVUFHRV9DT0RFUyA9IFtdO1xuY29uc3QgTEFOR1VBR0VfTkFNRVMgPSBbXTtcbmNvbnN0IExBTkdVQUdFX05BVElWRV9OQU1FUyA9IFtdO1xuXG5mb3IgKGNvbnN0IGNvZGUgaW4gTEFOR1VBR0VTX0xJU1QpIHtcbiAgY29uc3QgeyBuYW1lLCBuYXRpdmVOYW1lIH0gPSBMQU5HVUFHRVNfTElTVFtjb2RlXTtcbiAgTEFOR1VBR0VTW2NvZGVdID1cbiAgICBMQU5HVUFHRVNfQllfTkFNRVtuYW1lLnRvTG93ZXJDYXNlKCldID1cbiAgICBMQU5HVUFHRVNfQllfTkFNRVtuYXRpdmVOYW1lLnRvTG93ZXJDYXNlKCldID1cbiAgICAgIHsgY29kZSwgbmFtZSwgbmF0aXZlTmFtZSB9O1xuICBMQU5HVUFHRV9DT0RFUy5wdXNoKGNvZGUpO1xuICBMQU5HVUFHRV9OQU1FUy5wdXNoKG5hbWUpO1xuICBMQU5HVUFHRV9OQVRJVkVfTkFNRVMucHVzaChuYXRpdmVOYW1lKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBJU082MzkxIHtcbiAgc3RhdGljIGdldExhbmd1YWdlcyhjb2RlcyA9IFtdKSB7XG4gICAgcmV0dXJuIGNvZGVzLm1hcChjb2RlID0+XG4gICAgICBJU082MzkxLnZhbGlkYXRlKGNvZGUpXG4gICAgICAgID8gT2JqZWN0LmFzc2lnbih7fSwgTEFOR1VBR0VTW2NvZGVdKVxuICAgICAgICA6IHsgY29kZSwgbmFtZTogJycsIG5hdGl2ZU5hbWU6ICcnIH1cbiAgICApO1xuICB9XG5cbiAgc3RhdGljIGdldE5hbWUoY29kZSkge1xuICAgIHJldHVybiBJU082MzkxLnZhbGlkYXRlKGNvZGUpID8gTEFOR1VBR0VTX0xJU1RbY29kZV0ubmFtZSA6ICcnO1xuICB9XG5cbiAgc3RhdGljIGdldEFsbE5hbWVzKCkge1xuICAgIHJldHVybiBMQU5HVUFHRV9OQU1FUy5zbGljZSgpO1xuICB9XG5cbiAgc3RhdGljIGdldE5hdGl2ZU5hbWUoY29kZSkge1xuICAgIHJldHVybiBJU082MzkxLnZhbGlkYXRlKGNvZGUpID8gTEFOR1VBR0VTX0xJU1RbY29kZV0ubmF0aXZlTmFtZSA6ICcnO1xuICB9XG5cbiAgc3RhdGljIGdldEFsbE5hdGl2ZU5hbWVzKCkge1xuICAgIHJldHVybiBMQU5HVUFHRV9OQVRJVkVfTkFNRVMuc2xpY2UoKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRDb2RlKG5hbWUpIHtcbiAgICBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBMQU5HVUFHRVNfQllfTkFNRS5oYXNPd25Qcm9wZXJ0eShuYW1lKVxuICAgICAgPyBMQU5HVUFHRVNfQllfTkFNRVtuYW1lXS5jb2RlXG4gICAgICA6ICcnO1xuICB9XG5cbiAgc3RhdGljIGdldEFsbENvZGVzKCkge1xuICAgIHJldHVybiBMQU5HVUFHRV9DT0RFUy5zbGljZSgpO1xuICB9XG5cbiAgc3RhdGljIHZhbGlkYXRlKGNvZGUpIHtcbiAgICByZXR1cm4gTEFOR1VBR0VTX0xJU1QuaGFzT3duUHJvcGVydHkoY29kZSk7XG4gIH1cbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9iYWNrZ3JvdW5kL2luZGV4LnRzXCIpO1xuIiwiIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9